/*! Webex JS SDK v2.54.2 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Calling=t():e.Calling=t()}(self,(()=>(()=>{var __webpack_modules__={50176:(e,t,n)=>{n(79169),n(63090),e.exports=n(63093).Array.from},70964:(e,t,n)=>{n(48901),e.exports=n(63093).Array.isArray},76216:(e,t,n)=>{n(78175),e.exports=n(63093).Date.now},23565:(e,t,n)=>{var r=n(63093),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},94175:(e,t,n)=>{n(56536),n(79169),n(39361),n(99228),n(90401),n(28878),n(33012),e.exports=n(63093).Map},68080:(e,t,n)=>{n(57044),e.exports=n(63093).Number.isNaN},7153:(e,t,n)=>{n(73274),e.exports=n(63093).Number.parseInt},68207:(e,t,n)=>{n(82464),e.exports=n(63093).Object.assign},25380:(e,t,n)=>{n(97660);var r=n(63093).Object;e.exports=function(e,t){return r.create(e,t)}},99848:(e,t,n)=>{n(84521);var r=n(63093).Object;e.exports=function(e,t){return r.defineProperties(e,t)}},82624:(e,t,n)=>{n(15356);var r=n(63093).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},88058:(e,t,n)=>{n(39827),e.exports=n(63093).Object.entries},36759:(e,t,n)=>{n(8638),e.exports=n(63093).Object.freeze},44221:(e,t,n)=>{n(52812);var r=n(63093).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},22991:(e,t,n)=>{n(40342),e.exports=n(63093).Object.getOwnPropertyDescriptors},65162:(e,t,n)=>{n(13418);var r=n(63093).Object;e.exports=function(e){return r.getOwnPropertyNames(e)}},72818:(e,t,n)=>{n(15898),e.exports=n(63093).Object.getOwnPropertySymbols},87595:(e,t,n)=>{n(92810),e.exports=n(63093).Object.getPrototypeOf},15297:(e,t,n)=>{n(5338),e.exports=n(63093).Object.keys},21900:(e,t,n)=>{n(99269),e.exports=n(63093).Object.setPrototypeOf},42837:(e,t,n)=>{n(73625),e.exports=n(63093).Object.values},97186:(e,t,n)=>{n(55),e.exports=n(63093).parseFloat},16111:(e,t,n)=>{n(68785),e.exports=n(63093).parseInt},89448:(e,t,n)=>{n(56536),n(79169),n(39361),n(63723),n(36556),n(8421),e.exports=n(63093).Promise},58564:(e,t,n)=>{n(41896),e.exports=n(63093).Reflect.apply},98401:(e,t,n)=>{n(90634),e.exports=n(63093).Reflect.construct},53268:(e,t,n)=>{n(51244),e.exports=n(63093).Reflect.defineProperty},76409:(e,t,n)=>{n(16877),e.exports=n(63093).Reflect.deleteProperty},46383:(e,t,n)=>{n(39181),e.exports=n(63093).Reflect.getOwnPropertyDescriptor},42437:(e,t,n)=>{n(69805),e.exports=n(63093).Reflect.get},19414:(e,t,n)=>{n(44562),e.exports=n(63093).Reflect.ownKeys},98828:(e,t,n)=>{n(56536),n(79169),n(39361),n(6348),n(30093),n(42235),n(68572),e.exports=n(63093).Set},71922:(e,t,n)=>{n(15898),n(56536),n(52145),n(74775),e.exports=n(63093).Symbol},72974:(e,t,n)=>{n(79169),n(39361),e.exports=n(33485).f("iterator")},90446:(e,t,n)=>{e.exports=n(33485).f("toPrimitive")},53868:(e,t,n)=>{n(56536),e.exports=n(33485).f("toStringTag")},69488:(e,t,n)=>{n(56536),n(39361),n(11610),n(91877),n(20206),e.exports=n(63093).WeakMap},18679:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},86687:e=>{e.exports=function(){}},8003:e=>{e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},49226:(e,t,n)=>{var r=n(44425);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},51705:(e,t,n)=>{var r=n(26510);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},43206:(e,t,n)=>{var r=n(6303),i=n(45321),o=n(10139);e.exports=function(e){return function(t,n,a){var s,c=r(t),u=i(c.length),l=o(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},18485:(e,t,n)=>{var r=n(31133),i=n(65474),o=n(54922),a=n(45321),s=n(243);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,l=4==e,f=6==e,d=5==e||f,p=t||s;return function(t,s,h){for(var v,m,g=o(t),y=i(g),b=r(s,h,3),w=a(y.length),_=0,E=n?p(t,w):c?p(t,0):void 0;w>_;_++)if((d||_ in y)&&(m=b(v=y[_],_,g),e))if(n)E[_]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return _;case 2:E.push(v)}else if(l)return!1;return f?-1:u||l?l:E}}},33723:(e,t,n)=>{var r=n(44425),i=n(35730),o=n(23032)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},243:(e,t,n)=>{var r=n(33723);e.exports=function(e,t){return new(r(e))(t)}},98659:(e,t,n)=>{"use strict";var r=n(18679),i=n(44425),o=n(44990),a=[].slice,s={};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),c=function(){var r=n.concat(a.call(arguments));return this instanceof c?function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)}(t,r.length,r):o(t,r,e)};return i(t.prototype)&&(c.prototype=t.prototype),c}},85158:(e,t,n)=>{var r=n(47489),i=n(23032)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},47489:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},21706:(e,t,n)=>{"use strict";var r=n(56007).f,i=n(69270),o=n(561),a=n(31133),s=n(8003),c=n(26510),u=n(60354),l=n(85490),f=n(7183),d=n(97305),p=n(57010).fastKey,h=n(10069),v=d?"_s":"size",m=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var l=e((function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,null!=r&&c(r,n,e[u],e)}));return o(l.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=h(this,t),r=m(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(e){h(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(h(this,t),e)}}),d&&r(l.prototype,"size",{get:function(){return h(this,t)[v]}}),l},def:function(e,t,n){var r,i,o=m(e,t);return o?o.v=n:(e._l=o={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:m,setStrong:function(e,t,n){u(e,t,(function(e,n){this._t=h(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?l(0,"keys"==t?n.k:"values"==t?n.v:[n.k,n.v]):(e._t=void 0,l(1))}),n?"entries":"values",!n,!0),f(t)}}},80540:(e,t,n)=>{var r=n(85158),i=n(51705);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},77760:(e,t,n)=>{"use strict";var r=n(561),i=n(57010).getWeak,o=n(49226),a=n(44425),s=n(8003),c=n(26510),u=n(18485),l=n(3920),f=n(10069),d=u(5),p=u(6),h=0,v=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},g=function(e,t){return d(e.a,(function(e){return e[0]===t}))};m.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var n=g(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var u=e((function(e,r){s(e,u,t,"_i"),e._t=t,e._i=h++,e._l=void 0,null!=r&&c(r,n,e[o],e)}));return r(u.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return!0===n?v(f(this,t)).delete(e):n&&l(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return!0===n?v(f(this,t)).has(e):n&&l(n,this._i)}}),u},def:function(e,t,n){var r=i(o(t),!0);return!0===r?v(e).set(t,n):r[e._i]=n,e},ufstore:v}},66924:(e,t,n)=>{"use strict";var r=n(3220),i=n(14518),o=n(57010),a=n(84930),s=n(44379),c=n(561),u=n(26510),l=n(8003),f=n(44425),d=n(8182),p=n(56007).f,h=n(18485)(0),v=n(97305);e.exports=function(e,t,n,m,g,y){var b=r[e],w=b,_=g?"set":"add",E=w&&w.prototype,S={};return v&&"function"==typeof w&&(y||E.forEach&&!a((function(){(new w).entries().next()})))?(w=t((function(t,n){l(t,w,e,"_c"),t._c=new b,null!=n&&u(n,g,t[_],t)})),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;!(e in E)||y&&"clear"==e||s(w.prototype,e,(function(n,r){if(l(this,w,e),!t&&y&&!f(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i}))})),y||p(w.prototype,"size",{get:function(){return this._c.size}})):(w=m.getConstructor(t,e,g,_),c(w.prototype,n),o.NEED=!0),d(w,e),S[e]=w,i(i.G+i.W+i.F,S),y||m.setStrong(w,e,g),w}},63093:e=>{var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},10101:(e,t,n)=>{"use strict";var r=n(56007),i=n(35831);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},31133:(e,t,n)=>{var r=n(18679);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},59359:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},97305:(e,t,n)=>{e.exports=!n(84930)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},3299:(e,t,n)=>{var r=n(44425),i=n(3220).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},75834:e=>{e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},94331:(e,t,n)=>{var r=n(31304),i=n(18382),o=n(55066);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),c=o.f,u=0;s.length>u;)c.call(e,a=s[u++])&&t.push(a);return t}},14518:(e,t,n)=>{var r=n(3220),i=n(63093),o=n(31133),a=n(44379),s=n(3920),c="prototype",u=function(e,t,n){var l,f,d,p=e&u.F,h=e&u.G,v=e&u.S,m=e&u.P,g=e&u.B,y=e&u.W,b=h?i:i[t]||(i[t]={}),w=b[c],_=h?r:v?r[t]:(r[t]||{})[c];for(l in h&&(n=t),n)(f=!p&&_&&void 0!==_[l])&&s(b,l)||(d=f?_[l]:n[l],b[l]=h&&"function"!=typeof _[l]?n[l]:g&&f?o(d,r):y&&_[l]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[c]=e[c],t}(d):m&&"function"==typeof d?o(Function.call,d):d,m&&((b.virtual||(b.virtual={}))[l]=d,e&u.R&&w&&!w[l]&&a(w,l,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},84930:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},26510:(e,t,n)=>{var r=n(31133),i=n(12441),o=n(92566),a=n(49226),s=n(45321),c=n(25816),u={},l={},f=e.exports=function(e,t,n,f,d){var p,h,v,m,g=d?function(){return e}:c(e),y=r(n,f,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=s(e.length);p>b;b++)if((m=t?y(a(h=e[b])[0],h[1]):y(e[b]))===u||m===l)return m}else for(v=g.call(e);!(h=v.next()).done;)if((m=i(v,y,h.value,t))===u||m===l)return m};f.BREAK=u,f.RETURN=l},3220:e=>{var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},3920:e=>{var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},44379:(e,t,n)=>{var r=n(56007),i=n(35831);e.exports=n(97305)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},588:(e,t,n)=>{var r=n(3220).document;e.exports=r&&r.documentElement},17209:(e,t,n)=>{e.exports=!n(97305)&&!n(84930)((function(){return 7!=Object.defineProperty(n(3299)("div"),"a",{get:function(){return 7}}).a}))},44990:e=>{e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},65474:(e,t,n)=>{var r=n(47489);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},92566:(e,t,n)=>{var r=n(64502),i=n(23032)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},35730:(e,t,n)=>{var r=n(47489);e.exports=Array.isArray||function(e){return"Array"==r(e)}},44425:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},12441:(e,t,n)=>{var r=n(49226);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},95415:(e,t,n)=>{"use strict";var r=n(69270),i=n(35831),o=n(8182),a={};n(44379)(a,n(23032)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},60354:(e,t,n)=>{"use strict";var r=n(34436),i=n(14518),o=n(29763),a=n(44379),s=n(64502),c=n(95415),u=n(8182),l=n(65194),f=n(23032)("iterator"),d=!([].keys&&"next"in[].keys()),p="keys",h="values",v=function(){return this};e.exports=function(e,t,n,m,g,y,b){c(n,t,m);var w,_,E,S=function(e){if(!d&&e in k)return k[e];switch(e){case p:case h:return function(){return new n(this,e)}}return function(){return new n(this,e)}},R=t+" Iterator",x=g==h,C=!1,k=e.prototype,T=k[f]||k["@@iterator"]||g&&k[g],I=T||S(g),O=g?x?S("entries"):I:void 0,A="Array"==t&&k.entries||T;if(A&&(E=l(A.call(new e)))!==Object.prototype&&E.next&&(u(E,R,!0),r||"function"==typeof E[f]||a(E,f,v)),x&&T&&T.name!==h&&(C=!0,I=function(){return T.call(this)}),r&&!b||!d&&!C&&k[f]||a(k,f,I),s[t]=I,s[R]=v,g)if(w={values:x?I:S(h),keys:y?I:S(p),entries:O},b)for(_ in w)_ in k||o(k,_,w[_]);else i(i.P+i.F*(d||C),t,w);return w}},98661:(e,t,n)=>{var r=n(23032)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},85490:e=>{e.exports=function(e,t){return{value:t,done:!!e}}},64502:e=>{e.exports={}},34436:e=>{e.exports=!0},57010:(e,t,n)=>{var r=n(46918)("meta"),i=n(44425),o=n(3920),a=n(56007).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(84930)((function(){return c(Object.preventExtensions({}))})),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return u&&f.NEED&&c(e)&&!o(e,r)&&l(e),e}}},9734:(e,t,n)=>{var r=n(3220),i=n(26998).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(47489)(a);e.exports=function(){var e,t,n,u=function(){var r,i;for(c&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(u)}}else n=function(){i.call(r,u)};else{var f=!0,d=document.createTextNode("");new o(u).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},36253:(e,t,n)=>{"use strict";var r=n(18679);function i(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},47382:(e,t,n)=>{"use strict";var r=n(97305),i=n(31304),o=n(18382),a=n(55066),s=n(54922),c=n(65474),u=Object.assign;e.exports=!u||n(84930)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r}))?function(e,t){for(var n=s(e),u=arguments.length,l=1,f=o.f,d=a.f;u>l;)for(var p,h=c(arguments[l++]),v=f?i(h).concat(f(h)):i(h),m=v.length,g=0;m>g;)p=v[g++],r&&!d.call(h,p)||(n[p]=h[p]);return n}:u},69270:(e,t,n)=>{var r=n(49226),i=n(16287),o=n(75834),a=n(72596)("IE_PROTO"),s=function(){},c="prototype",u=function(){var e,t=n(3299)("iframe"),r=o.length;for(t.style.display="none",n(588).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u[c][o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[c]=r(e),n=new s,s[c]=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},56007:(e,t,n)=>{var r=n(49226),i=n(17209),o=n(32548),a=Object.defineProperty;t.f=n(97305)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},16287:(e,t,n)=>{var r=n(56007),i=n(49226),o=n(31304);e.exports=n(97305)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},30826:(e,t,n)=>{var r=n(55066),i=n(35831),o=n(6303),a=n(32548),s=n(3920),c=n(17209),u=Object.getOwnPropertyDescriptor;t.f=n(97305)?u:function(e,t){if(e=o(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},23208:(e,t,n)=>{var r=n(6303),i=n(95733).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},95733:(e,t,n)=>{var r=n(26567),i=n(75834).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},18382:(e,t)=>{t.f=Object.getOwnPropertySymbols},65194:(e,t,n)=>{var r=n(3920),i=n(54922),o=n(72596)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},26567:(e,t,n)=>{var r=n(3920),i=n(6303),o=n(43206)(!1),a=n(72596)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(u,n)||u.push(n));return u}},31304:(e,t,n)=>{var r=n(26567),i=n(75834);e.exports=Object.keys||function(e){return r(e,i)}},55066:(e,t)=>{t.f={}.propertyIsEnumerable},70874:(e,t,n)=>{var r=n(14518),i=n(63093),o=n(84930);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},30572:(e,t,n)=>{var r=n(97305),i=n(31304),o=n(6303),a=n(55066).f;e.exports=function(e){return function(t){for(var n,s=o(t),c=i(s),u=c.length,l=0,f=[];u>l;)n=c[l++],r&&!a.call(s,n)||f.push(e?[n,s[n]]:s[n]);return f}}},74737:(e,t,n)=>{var r=n(95733),i=n(18382),o=n(49226),a=n(3220).Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},23080:(e,t,n)=>{var r=n(3220).parseFloat,i=n(28685).trim;e.exports=1/r(n(58917)+"-0")!=-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},24049:(e,t,n)=>{var r=n(3220).parseInt,i=n(28685).trim,o=n(58917),a=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},19934:e=>{e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},77116:(e,t,n)=>{var r=n(49226),i=n(44425),o=n(36253);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},35831:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},561:(e,t,n)=>{var r=n(44379);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},29763:(e,t,n)=>{e.exports=n(44379)},74573:(e,t,n)=>{"use strict";var r=n(14518),i=n(18679),o=n(31133),a=n(26510);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,c=arguments[1];return i(this),(t=void 0!==c)&&i(c),null==e?new this:(n=[],t?(r=0,s=o(c,arguments[2],2),a(e,!1,(function(e){n.push(s(e,r++))}))):a(e,!1,n.push,n),new this(n))}})}},72758:(e,t,n)=>{"use strict";var r=n(14518);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},96573:(e,t,n)=>{var r=n(44425),i=n(49226),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(31133)(Function.call,n(30826).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},7183:(e,t,n)=>{"use strict";var r=n(3220),i=n(63093),o=n(56007),a=n(97305),s=n(23032)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},8182:(e,t,n)=>{var r=n(56007).f,i=n(3920),o=n(23032)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},72596:(e,t,n)=>{var r=n(5628)("keys"),i=n(46918);e.exports=function(e){return r[e]||(r[e]=i(e))}},5628:(e,t,n)=>{var r=n(63093),i=n(3220),o="__core-js_shared__",a=i[o]||(i[o]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(34436)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},312:(e,t,n)=>{var r=n(49226),i=n(18679),o=n(23032)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},87268:(e,t,n)=>{var r=n(72579),i=n(59359);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}}},28685:(e,t,n)=>{var r=n(14518),i=n(59359),o=n(84930),a=n(58917),s="["+a+"]",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),l=function(e,t,n){var i={},s=o((function(){return!!a[e]()||"​"!="​"[e]()})),c=i[e]=s?t(f):a[e];n&&(i[n]=c),r(r.P+r.F*s,"String",i)},f=l.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=l},58917:e=>{e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},26998:(e,t,n)=>{var r,i,o,a=n(31133),s=n(44990),c=n(588),u=n(3299),l=n(3220),f=l.process,d=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,v=l.Dispatch,m=0,g={},y="onreadystatechange",b=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},w=function(e){b.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},p=function(e){delete g[e]},"process"==n(47489)(f)?r=function(e){f.nextTick(a(b,e,1))}:v&&v.now?r=function(e){v.now(a(b,e,1))}:h?(o=(i=new h).port2,i.port1.onmessage=w,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",w,!1)):r=y in u("script")?function(e){c.appendChild(u("script"))[y]=function(){c.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:d,clear:p}},10139:(e,t,n)=>{var r=n(72579),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},72579:e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},6303:(e,t,n)=>{var r=n(65474),i=n(59359);e.exports=function(e){return r(i(e))}},45321:(e,t,n)=>{var r=n(72579),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},54922:(e,t,n)=>{var r=n(59359);e.exports=function(e){return Object(r(e))}},32548:(e,t,n)=>{var r=n(44425);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},46918:e=>{var t=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},58411:(e,t,n)=>{var r=n(3220).navigator;e.exports=r&&r.userAgent||""},10069:(e,t,n)=>{var r=n(44425);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},10305:(e,t,n)=>{var r=n(3220),i=n(63093),o=n(34436),a=n(33485),s=n(56007).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},33485:(e,t,n)=>{t.f=n(23032)},23032:(e,t,n)=>{var r=n(5628)("wks"),i=n(46918),o=n(3220).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},25816:(e,t,n)=>{var r=n(85158),i=n(23032)("iterator"),o=n(64502);e.exports=n(63093).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},63090:(e,t,n)=>{"use strict";var r=n(31133),i=n(14518),o=n(54922),a=n(12441),s=n(92566),c=n(45321),u=n(10101),l=n(25816);i(i.S+i.F*!n(98661)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,f,d=o(e),p="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,m=void 0!==v,g=0,y=l(d);if(m&&(v=r(v,h>2?arguments[2]:void 0,2)),null==y||p==Array&&s(y))for(n=new p(t=c(d.length));t>g;g++)u(n,g,m?v(d[g],g):d[g]);else for(f=y.call(d),n=new p;!(i=f.next()).done;g++)u(n,g,m?a(f,v,[i.value,g],!0):i.value);return n.length=g,n}})},48901:(e,t,n)=>{var r=n(14518);r(r.S,"Array",{isArray:n(35730)})},74296:(e,t,n)=>{"use strict";var r=n(86687),i=n(85490),o=n(64502),a=n(6303);e.exports=n(60354)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},78175:(e,t,n)=>{var r=n(14518);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},99228:(e,t,n)=>{"use strict";var r=n(21706),i=n(10069),o="Map";e.exports=n(66924)(o,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(i(this,o),e);return t&&t.v},set:function(e,t){return r.def(i(this,o),0===e?0:e,t)}},r,!0)},57044:(e,t,n)=>{var r=n(14518);r(r.S,"Number",{isNaN:function(e){return e!=e}})},73274:(e,t,n)=>{var r=n(14518),i=n(24049);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},82464:(e,t,n)=>{var r=n(14518);r(r.S+r.F,"Object",{assign:n(47382)})},97660:(e,t,n)=>{var r=n(14518);r(r.S,"Object",{create:n(69270)})},84521:(e,t,n)=>{var r=n(14518);r(r.S+r.F*!n(97305),"Object",{defineProperties:n(16287)})},15356:(e,t,n)=>{var r=n(14518);r(r.S+r.F*!n(97305),"Object",{defineProperty:n(56007).f})},8638:(e,t,n)=>{var r=n(44425),i=n(57010).onFreeze;n(70874)("freeze",(function(e){return function(t){return e&&r(t)?e(i(t)):t}}))},52812:(e,t,n)=>{var r=n(6303),i=n(30826).f;n(70874)("getOwnPropertyDescriptor",(function(){return function(e,t){return i(r(e),t)}}))},13418:(e,t,n)=>{n(70874)("getOwnPropertyNames",(function(){return n(23208).f}))},92810:(e,t,n)=>{var r=n(54922),i=n(65194);n(70874)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},5338:(e,t,n)=>{var r=n(54922),i=n(31304);n(70874)("keys",(function(){return function(e){return i(r(e))}}))},99269:(e,t,n)=>{var r=n(14518);r(r.S,"Object",{setPrototypeOf:n(96573).set})},56536:()=>{},55:(e,t,n)=>{var r=n(14518),i=n(23080);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},68785:(e,t,n)=>{var r=n(14518),i=n(24049);r(r.G+r.F*(parseInt!=i),{parseInt:i})},63723:(e,t,n)=>{"use strict";var r,i,o,a,s=n(34436),c=n(3220),u=n(31133),l=n(85158),f=n(14518),d=n(44425),p=n(18679),h=n(8003),v=n(26510),m=n(312),g=n(26998).set,y=n(9734)(),b=n(36253),w=n(19934),_=n(58411),E=n(77116),S="Promise",R=c.TypeError,x=c.process,C=x&&x.versions,k=C&&C.v8||"",T=c[S],I="process"==l(x),O=function(){},A=i=b.f,L=!!function(){try{var e=T.resolve(1),t=(e.constructor={})[n(23032)("species")]=function(e){e(O,O)};return(I||"function"==typeof PromiseRejectionEvent)&&e.then(O)instanceof t&&0!==k.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(e){}}(),M=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},P=function(e,t){if(!e._n){e._n=!0;var n=e._c;y((function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{s?(i||(2==e._h&&U(e),e._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===t.promise?u(R("Promise-chain cycle")):(o=M(n))?o.call(n,c,u):c(n)):u(r)}catch(e){l&&!a&&l.exit(),u(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&N(e)}))}},N=function(e){g.call(c,(function(){var t,n,r,i=e._v,o=D(e);if(o&&(t=w((function(){I?x.emit("unhandledRejection",i,e):(n=c.onunhandledrejection)?n({promise:e,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=I||D(e)?2:1),e._a=void 0,o&&t.e)throw t.v}))},D=function(e){return 1!==e._h&&0===(e._a||e._c).length},U=function(e){g.call(c,(function(){var t;I?x.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},Z=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),P(t,!0))},j=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw R("Promise can't be resolved itself");(t=M(e))?y((function(){var r={_w:n,_d:!1};try{t.call(e,u(j,r,1),u(Z,r,1))}catch(e){Z.call(r,e)}})):(n._v=e,n._s=1,P(n,!1))}catch(e){Z.call({_w:n,_d:!1},e)}}};L||(T=function(e){h(this,T,S,"_h"),p(e),r.call(this);try{e(u(j,this,1),u(Z,this,1))}catch(e){Z.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(561)(T.prototype,{then:function(e,t){var n=A(m(this,T));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=I?x.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=u(j,e,1),this.reject=u(Z,e,1)},b.f=A=function(e){return e===T||e===a?new o(e):i(e)}),f(f.G+f.W+f.F*!L,{Promise:T}),n(8182)(T,S),n(7183)(S),a=n(63093)[S],f(f.S+f.F*!L,S,{reject:function(e){var t=A(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!L),S,{resolve:function(e){return E(s&&this===a?T:this,e)}}),f(f.S+f.F*!(L&&n(98661)((function(e){T.all(e).catch(O)}))),S,{all:function(e){var t=this,n=A(t),r=n.resolve,i=n.reject,o=w((function(){var n=[],o=0,a=1;v(e,!1,(function(e){var s=o++,c=!1;n.push(void 0),a++,t.resolve(e).then((function(e){c||(c=!0,n[s]=e,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=A(t),r=n.reject,i=w((function(){v(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},41896:(e,t,n)=>{var r=n(14518),i=n(18679),o=n(49226),a=(n(3220).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(84930)((function(){a((function(){}))})),"Reflect",{apply:function(e,t,n){var r=i(e),c=o(n);return a?a(r,t,c):s.call(r,t,c)}})},90634:(e,t,n)=>{var r=n(14518),i=n(69270),o=n(18679),a=n(49226),s=n(44425),c=n(84930),u=n(98659),l=(n(3220).Reflect||{}).construct,f=c((function(){function e(){}return!(l((function(){}),[],e)instanceof e)})),d=!c((function(){l((function(){}))}));r(r.S+r.F*(f||d),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(d&&!f)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var c=n.prototype,p=i(s(c)?c:Object.prototype),h=Function.apply.call(e,p,t);return s(h)?h:p}})},51244:(e,t,n)=>{var r=n(56007),i=n(14518),o=n(49226),a=n(32548);i(i.S+i.F*n(84930)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},16877:(e,t,n)=>{var r=n(14518),i=n(30826).f,o=n(49226);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},39181:(e,t,n)=>{var r=n(30826),i=n(14518),o=n(49226);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},69805:(e,t,n)=>{var r=n(30826),i=n(65194),o=n(3920),a=n(14518),s=n(44425),c=n(49226);a(a.S,"Reflect",{get:function e(t,n){var a,u,l=arguments.length<3?t:arguments[2];return c(t)===l?t[n]:(a=r.f(t,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(l):void 0:s(u=i(t))?e(u,n,l):void 0}})},44562:(e,t,n)=>{var r=n(14518);r(r.S,"Reflect",{ownKeys:n(74737)})},6348:(e,t,n)=>{"use strict";var r=n(21706),i=n(10069);e.exports=n(66924)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},79169:(e,t,n)=>{"use strict";var r=n(87268)(!0);n(60354)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},15898:(e,t,n)=>{"use strict";var r=n(3220),i=n(3920),o=n(97305),a=n(14518),s=n(29763),c=n(57010).KEY,u=n(84930),l=n(5628),f=n(8182),d=n(46918),p=n(23032),h=n(33485),v=n(10305),m=n(94331),g=n(35730),y=n(49226),b=n(44425),w=n(54922),_=n(6303),E=n(32548),S=n(35831),R=n(69270),x=n(23208),C=n(30826),k=n(18382),T=n(56007),I=n(31304),O=C.f,A=T.f,L=x.f,M=r.Symbol,P=r.JSON,N=P&&P.stringify,D="prototype",U=p("_hidden"),Z=p("toPrimitive"),j={}.propertyIsEnumerable,F=l("symbol-registry"),B=l("symbols"),V=l("op-symbols"),q=Object[D],W="function"==typeof M&&!!k.f,z=r.QObject,G=!z||!z[D]||!z[D].findChild,H=o&&u((function(){return 7!=R(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=O(q,t);r&&delete q[t],A(e,t,n),r&&e!==q&&A(q,t,r)}:A,$=function(e){var t=B[e]=R(M[D]);return t._k=e,t},K=W&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},Y=function(e,t,n){return e===q&&Y(V,t,n),y(e),t=E(t,!0),y(n),i(B,t)?(n.enumerable?(i(e,U)&&e[U][t]&&(e[U][t]=!1),n=R(n,{enumerable:S(0,!1)})):(i(e,U)||A(e,U,S(1,{})),e[U][t]=!0),H(e,t,n)):A(e,t,n)},J=function(e,t){y(e);for(var n,r=m(t=_(t)),i=0,o=r.length;o>i;)Y(e,n=r[i++],t[n]);return e},X=function(e){var t=j.call(this,e=E(e,!0));return!(this===q&&i(B,e)&&!i(V,e))&&(!(t||!i(this,e)||!i(B,e)||i(this,U)&&this[U][e])||t)},Q=function(e,t){if(e=_(e),t=E(t,!0),e!==q||!i(B,t)||i(V,t)){var n=O(e,t);return!n||!i(B,t)||i(e,U)&&e[U][t]||(n.enumerable=!0),n}},ee=function(e){for(var t,n=L(_(e)),r=[],o=0;n.length>o;)i(B,t=n[o++])||t==U||t==c||r.push(t);return r},te=function(e){for(var t,n=e===q,r=L(n?V:_(e)),o=[],a=0;r.length>a;)!i(B,t=r[a++])||n&&!i(q,t)||o.push(B[t]);return o};W||(s((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===q&&t.call(V,n),i(this,U)&&i(this[U],e)&&(this[U][e]=!1),H(this,e,S(1,n))};return o&&G&&H(q,e,{configurable:!0,set:t}),$(e)})[D],"toString",(function(){return this._k})),C.f=Q,T.f=Y,n(95733).f=x.f=ee,n(55066).f=X,k.f=te,o&&!n(34436)&&s(q,"propertyIsEnumerable",X,!0),h.f=function(e){return $(p(e))}),a(a.G+a.W+a.F*!W,{Symbol:M});for(var ne="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ne.length>re;)p(ne[re++]);for(var ie=I(p.store),oe=0;ie.length>oe;)v(ie[oe++]);a(a.S+a.F*!W,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=M(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),a(a.S+a.F*!W,"Object",{create:function(e,t){return void 0===t?R(e):J(R(e),t)},defineProperty:Y,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var ae=u((function(){k.f(1)}));a(a.S+a.F*ae,"Object",{getOwnPropertySymbols:function(e){return k.f(w(e))}}),P&&a(a.S+a.F*(!W||u((function(){var e=M();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!K(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!K(t))return t}),r[1]=t,N.apply(P,r)}}),M[D][Z]||n(44379)(M[D],Z,M[D].valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},11610:(e,t,n)=>{"use strict";var r,i=n(3220),o=n(18485)(0),a=n(29763),s=n(57010),c=n(47382),u=n(77760),l=n(44425),f=n(10069),d=n(10069),p=!i.ActiveXObject&&"ActiveXObject"in i,h="WeakMap",v=s.getWeak,m=Object.isExtensible,g=u.ufstore,y=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},b={get:function(e){if(l(e)){var t=v(e);return!0===t?g(f(this,h)).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(f(this,h),e,t)}},w=e.exports=n(66924)(h,y,b,u,!0,!0);d&&p&&(c((r=u.getConstructor(y,h)).prototype,b),s.NEED=!0,o(["delete","has","get","set"],(function(e){var t=w.prototype,n=t[e];a(t,e,(function(t,i){if(l(t)&&!m(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)}))})))},33012:(e,t,n)=>{n(74573)("Map")},28878:(e,t,n)=>{n(72758)("Map")},90401:(e,t,n)=>{var r=n(14518);r(r.P+r.R,"Map",{toJSON:n(80540)("Map")})},39827:(e,t,n)=>{var r=n(14518),i=n(30572)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},40342:(e,t,n)=>{var r=n(14518),i=n(74737),o=n(6303),a=n(30826),s=n(10101);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),c=a.f,u=i(r),l={},f=0;u.length>f;)void 0!==(n=c(r,t=u[f++]))&&s(l,t,n);return l}})},73625:(e,t,n)=>{var r=n(14518),i=n(30572)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},36556:(e,t,n)=>{"use strict";var r=n(14518),i=n(63093),o=n(3220),a=n(312),s=n(77116);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},8421:(e,t,n)=>{"use strict";var r=n(14518),i=n(36253),o=n(19934);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},68572:(e,t,n)=>{n(74573)("Set")},42235:(e,t,n)=>{n(72758)("Set")},30093:(e,t,n)=>{var r=n(14518);r(r.P+r.R,"Set",{toJSON:n(80540)("Set")})},52145:(e,t,n)=>{n(10305)("asyncIterator")},74775:(e,t,n)=>{n(10305)("observable")},20206:(e,t,n)=>{n(74573)("WeakMap")},91877:(e,t,n)=>{n(72758)("WeakMap")},39361:(e,t,n)=>{n(74296);for(var r=n(3220),i=n(44379),o=n(64502),a=n(23032)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var u=s[c],l=r[u],f=l&&l.prototype;f&&!f[a]&&i(f,a,u),o[u]=o.Array}},25512:(e,t,n)=>{var r=n(28583);e.exports=function(e){var t,n=this,i=[].slice.call(arguments);t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return n.apply(this,arguments)},r(t,n);var o=function(){this.constructor=t};return o.prototype=n.prototype,t.prototype=new o,e&&(i.unshift(t.prototype),r.apply(null,i)),t.__super__=n.prototype,t}},90765:(e,t,n)=>{var r=n(49740),i=n(25512),o=n(1469),a=n(38169),s=n(28583),c=[].slice;function u(e,t){if(t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),t.parent&&(this.parent=t.parent),!this.mainIndex){var n=this.model&&this.model.prototype&&this.model.prototype.idAttribute;this.mainIndex=n||"id"}this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,s({silent:!0},t))}s(u.prototype,r,{initialize:function(){},isModel:function(e){return this.model&&e instanceof this.model},add:function(e,t){return this.set(e,s({merge:!1,add:!0,remove:!1},t))},parse:function(e,t){return e},serialize:function(){return this.map((function(e){if(e.serialize)return e.serialize();var t={};return s(t,e),delete t.collection,t}))},toJSON:function(){return this.serialize()},set:function(e,t){(t=s({add:!0,remove:!0,merge:!0},t)).parse&&(e=this.parse(e,t));var n,r,i,a,c,u,l,f=!o(e);e=f?e?[e]:[]:e.slice();var d=t.at,p=this.comparator&&null==d&&!1!==t.sort,h="string"==typeof this.comparator?this.comparator:null,v=[],m=[],g={},y=t.add,b=t.merge,w=t.remove,_=!(p||!y||!w)&&[],E=this.model&&this.model.prototype||Object.prototype;for(u=0,l=e.length;u<l;u++){if(i=e[u]||{},this.isModel(i)?n=r=i:E.generateId?n=E.generateId(i):void 0===(n=i[this.mainIndex])&&this._isDerivedIndex(E)&&(n=E._derived[this.mainIndex].fn.call(i)),a=this.get(n))w&&(g[a.cid||a[this.mainIndex]]=!0),b&&(i=i===r?r.attributes:i,t.parse&&(i=a.parse(i,t)),a.set?(a.set(i,t),p&&!c&&a.hasChanged(h)&&(c=!0)):s(a,i)),e[u]=a;else if(y){if(!(r=e[u]=this._prepareModel(i,t)))continue;v.push(r),this._addReference(r,t)}(r=a||r)&&(_&&(r.isNew&&r.isNew()||!r[this.mainIndex]||!g[r.cid||r[this.mainIndex]])&&_.push(r),g[r[this.mainIndex]]=!0)}if(w){for(u=0,l=this.length;u<l;u++)g[(r=this.models[u]).cid||r[this.mainIndex]]||m.push(r);for(m.length&&this.remove(m,t),u=0,l=v.length;u<l;u++)this._index(v[u])}if(v.length||_&&_.length)if(p&&(c=!0),null!=d)for(u=0,l=v.length;u<l;u++)this.models.splice(d+u,0,v[u]);else{var S=_||v;for(u=0,l=S.length;u<l;u++)this.models.push(S[u])}if(c&&this.sort({silent:!0}),!t.silent){for(u=0,l=v.length;u<l;u++)(r=v[u]).trigger?r.trigger("add",r,this,t):this.trigger("add",r,this,t);(c||_&&_.length)&&this.trigger("sort",this,t)}return f?e[0]:e},get:function(e,t){if(null!=e){var n=this.mainIndex,r=this._indexes[t||n];return r&&(r[e]||void 0!==e[n]&&r[e[n]])||this._indexes.cid[e]||this._indexes.cid[e.cid]}},at:function(e){return this.models[e]},remove:function(e,t){var n,r,i,a,s=!o(e);for(t||(t={}),n=0,r=(e=s?[e]:c.call(e)).length;n<r;n++)(i=e[n]=this.get(e[n]))&&(this._deIndex(i),a=this.models.indexOf(i),this.models.splice(a,1),t.silent||(t.index=a,i.trigger?i.trigger("remove",i,this,t):this.trigger("remove",i,this,t)),this._removeReference(i,t));return s?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,s({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},sort:function(e){var t=this;if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),"string"==typeof this.comparator?this.models.sort((function(e,n){return e.get?(e=e.get(t.comparator),n=n.get(t.comparator)):(e=e[t.comparator],n=n[t.comparator]),e>n||void 0===e?1:e<n||void 0===n?-1:0})):1===this.comparator.length?this.models.sort((function(e,n){return(e=t.comparator(e))>(n=t.comparator(n))||void 0===e?1:e<n||void 0===n?-1:0})):this.models.sort(a(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},_reset:function(){var e=c.call(this.indexes||[]),t=0;e.push(this.mainIndex),e.push("cid");var n=e.length;for(this.models=[],this._indexes={};t<n;t++)this._indexes[e[t]]={}},_prepareModel:function(e,t){if(!this.model)return e;if(this.isModel(e))return e.collection||(e.collection=this),e;(t=t?s({},t):{}).collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_deIndex:function(e,t,n){var r;if(void 0===t)for(var i in this._indexes)r=e.hasOwnProperty(i)?e[i]:e.get&&e.get(i),delete this._indexes[i][r];else{if(void 0===this._indexes[t])throw new Error("Given attribute is not an index");delete this._indexes[t][n]}},_index:function(e,t){var n;if(void 0===t)for(var r in this._indexes)null!=(n=e.hasOwnProperty(r)?e[r]:e.get&&e.get(r))&&(this._indexes[r][n]=e);else{if(void 0===this._indexes[t])throw new Error("Given attribute is not an index");(n=e[t]||e.get&&e.get(t))&&(this._indexes[t][n]=e)}},_isDerivedIndex:function(e){return!(!e||"object"!=typeof e._derived)&&Object.keys(e._derived).indexOf(this.mainIndex)>=0},_addReference:function(e,t){this._index(e),e.collection||(e.collection=this),e.on&&e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,this._deIndex(e),e.off&&e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){var i=e.split(":")[0],o=e.split(":")[1];("add"!==i&&"remove"!==i||n===this)&&("destroy"===i&&this.remove(t,r),t&&"change"===i&&o&&this._indexes[o]&&(this._deIndex(t,o,t.previousAttributes()[o]),this._index(t,o)),this.trigger.apply(this,arguments))}}),Object.defineProperties(u.prototype,{length:{get:function(){return this.models.length}},isCollection:{get:function(){return!0}}});["indexOf","lastIndexOf","every","some","forEach","map","filter","reduce","reduceRight"].forEach((function(e){u.prototype[e]=function(){return this.models[e].apply(this.models,arguments)}})),u.prototype.each=u.prototype.forEach,u.extend=i,e.exports=u},49740:(e,t,n)=>{var r=n(51463),i=n(3674),o=n(41609),a=n(28583),s=n(84486),c=Array.prototype.slice,u=n(25668),l={on:function(e,t,n){return u.eventsApi(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,n){if(!u.eventsApi(this,"once",e,[t,n])||!t)return this;var i=this,o=r((function(){i.off(e,o),t.apply(this,arguments)}));return o._callback=t,this.on(e,o,n)},off:function(e,t,n){var r,o,a,s,c,l,f,d;if(!this._events||!u.eventsApi(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(c=0,l=(s=e?[e]:i(this._events)).length;c<l;c++)if(e=s[c],a=this._events[e]){if(this._events[e]=r=[],t||n)for(f=0,d=a.length;f<d;f++)o=a[f],(t&&t!==o.callback&&t!==o.callback._callback||n&&n!==o.context)&&r.push(o);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=c.call(arguments,1);if(!u.eventsApi(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&u.triggerEvents(n,t),r&&u.triggerEvents(r,arguments),this},stopListening:function(e,t,n){var r=this._listeningTo;if(!r)return this;var i=!t&&!n;n||"object"!=typeof t||(n=this),e&&((r={})[e._listenId]=e);var a=this;return s(r,(function(e,r){e.off(t,n,a),(i||o(e._events))&&delete a._listeningTo[r]})),this},createEmitter:function(e){return a(e||{},l)},listenTo:u.createListenMethod("on"),listenToOnce:u.createListenMethod("once"),listenToAndRun:function(e,t,n){return this.listenTo.apply(this,arguments),n||"object"!=typeof t||(n=this),n.apply(this),this}};l.bind=l.on,l.unbind=l.off,l.removeListener=l.off,l.removeAllListeners=l.off,l.emit=l.trigger,e.exports=l},25668:(e,t,n)=>{var r=n(73955),i=/\s+/;t.triggerEvents=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}},t.eventsApi=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var o in n)e[t].apply(e,[o,n[o]].concat(r));return!1}if(i.test(n)){for(var a=n.split(i),s=0,c=a.length;s<c;s++)e[t].apply(e,[a[s]].concat(r));return!1}return!0},t.createListenMethod=function(e){return function(t,n,i){if(!t)throw new Error("Trying to listenTo event: '"+n+"' but the target object is undefined");if((this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=r("l"))]=t,i||"object"!=typeof n||(i=this),"function"!=typeof t[e])throw new Error("Trying to listenTo event: '"+n+"' on object: "+t.toString()+" but it does not have an 'on' method so is unbindable");return t[e](n,i,this),this}}},65109:(e,t,n)=>{"use strict";var r=n(73955),i=n(28583),o=function(e){return i({},e)},a=n(82723),s=n(7187),c=n(2525),u=n(64721),l=n(47037),f=n(13218),d=n(47960),p=n(23560),h=n(18446),v=n(18721),m=n(58613),g=n(93386),y=n(49740),b=n(78414),w=n(72185),_=/^change:/,E=function(){};function S(e,t){t||(t={}),this.cid||(this.cid=r("state")),this._events={},this._values={},this._eventBubblingHandlerCache={},this._definition=Object.create(this._definition),t.parse&&(e=this.parse(e,t)),this.parent=t.parent,this.collection=t.collection,this._keyTree=new b,this._initCollections(),this._initChildren(),this._cache={},this._previousAttributes={},e&&this.set(e,i({silent:!0,initial:!0},t)),this._changed={},this._derived&&this._initDerived(),!1!==t.init&&this.initialize.apply(this,arguments)}function R(e,t,n,r){var i,o,a=e._definition[t]={};if(l(n))(i=e._ensureValidType(n))&&(a.type=i);else{if(Array.isArray(n)&&(n={type:(o=n)[0],required:o[1],default:o[2]}),(i=e._ensureValidType(n.type))&&(a.type=i),n.required&&(a.required=!0),n.default&&"object"==typeof n.default)throw new TypeError("The default value for "+t+" cannot be an object/array, must be a value or a function which returns a value/object/array");a.default=n.default,a.allowNull=!!n.allowNull&&n.allowNull,n.setOnce&&(a.setOnce=!0),a.required&&void 0===a.default&&!a.setOnce&&(a.default=e._getDefaultForType(i)),a.test=n.test,a.values=n.values}return r&&(a.session=!0),i||(i=l(n)?n:n.type,console.warn("Invalid data type of `"+i+"` for `"+t+"` property. Use one of the default types or define your own")),Object.defineProperty(e,t,{set:function(e){this.set(t,e)},get:function(){if(!this._values)throw Error('You may be trying to `extend` a state object with "'+t+'" which has been defined in `props` on the object being extended');var e=this._values[t],n=this._dataTypes[a.type];if(void 0!==e)return n&&n.get&&(e=n.get(e)),e;var r=m(a,"default");(this._values[t]=r,void 0!==r)&&this._getOnChangeForType(a.type)(r,e,t);return r}}),a}function x(e,t,n){(e._derived[t]={fn:p(n)?n:n.fn,cache:!1!==n.cache,depList:n.deps||[]}).depList.forEach((function(n){e._deps[n]=g(e._deps[n]||[],[t])})),Object.defineProperty(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError("`"+t+"` is a derived property, it can't be set directly.")}})}i(S.prototype,y,{extraProperties:"ignore",idAttribute:"id",namespaceAttribute:"namespace",typeAttribute:"modelType",initialize:function(){return this},getId:function(){return this[this.idAttribute]},getNamespace:function(){return this[this.namespaceAttribute]},getType:function(){return this[this.typeAttribute]},isNew:function(){return null==this.getId()},escape:function(e){return s(this.get(e))},isValid:function(e){return this._validate({},i(e||{},{validate:!0}))},parse:function(e,t){return e},serialize:function(e){var t=i({props:!0},e),n=this.getAttributes(t,!0),r=function(e,t){n[t]=this[t].serialize()}.bind(this);return c(this._children,r),c(this._collections,r),n},set:function(e,t,n){var r,i,o,a,s,c,l,d,p,h,v,g,y,b,w,_,E,S=this,R=this.extraProperties;if(f(e)||null===e?(p=e,n=t):(p={})[e]=t,n=n||{},!this._validate(p,n))return!1;g=n.unset,v=n.silent,b=n.initial,r=this._changing,this._changing=!0,i=[],b?this._previousAttributes={}:r||(this._previousAttributes=this.attributes,this._changed={});for(var x=0,C=Object.keys(p),k=C.length;x<k;x++){if(o=typeof(a=p[d=C[x]]),y=this._values[d],!(s=this._definition[d])){if(this._children[d]||this._collections[d]){f(a)||(a={}),this[d].set(a,n);continue}if("ignore"===R)continue;if("reject"===R)throw new TypeError('No "'+d+'" property defined on '+(this.type||"this")+' model and extraProperties not set to "ignore" or "allow"');if("allow"===R)s=this._createPropertyDefinition(d,"any");else if(R)throw new TypeError('Invalid value for extraProperties: "'+R+'"')}if(_=this._getCompareForType(s.type),E=this._getOnChangeForType(s.type),(h=this._dataTypes[s.type])&&h.set&&(a=(c=h.set(a)).val,o=c.type),s.test&&(l=s.test.call(this,a,o)))throw new TypeError("Property '"+d+"' failed validation with error: "+l);if(void 0===a&&s.required)throw new TypeError("Required property '"+d+"' must be of type "+s.type+". Tried to set "+a);if(null===a&&s.required&&!s.allowNull)throw new TypeError("Property '"+d+"' must be of type "+s.type+" (cannot be null). Tried to set "+a);if(s.type&&"any"!==s.type&&s.type!==o&&null!=a)throw new TypeError("Property '"+d+"' must be of type "+s.type+". Tried to set "+a);if(s.values&&!u(s.values,a)){var T=m(s,"default");if(g&&void 0!==T)a=T;else if(!g||g&&void 0!==a)throw new TypeError("Property '"+d+"' must be one of values: "+s.values.join(", ")+". Tried to set "+a)}if(w=b||!_(y,a,d),s.setOnce&&void 0!==y&&w)throw new TypeError("Property '"+d+"' can only be set once.");w?(E(a,y,d),b||(this._changed[d]=a,this._previousAttributes[d]=y,g&&delete this._values[d],v||i.push({prev:y,val:a,key:d})),g||(this._values[d]=a)):delete this._changed[d]}if(i.length&&(this._pending=!0),i.forEach((function(e){S.trigger("change:"+e.key,S,e.val,n)})),r)return this;for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},get:function(e){return this[e]},toggle:function(e){var t=this._definition[e];if("boolean"===t.type)this[e]=!this[e];else{if(!t||!t.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.");this[e]=w(t.values,this[e])}return this},previousAttributes:function(){return o(this._previousAttributes)},hasChanged:function(e){return null==e?!!Object.keys(this._changed).length:v(this._derived,e)?this._derived[e].depList.some((function(e){return this.hasChanged(e)}),this):v(this._changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&o(this._changed);var t,n,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var a in e)(n=this._definition[a])&&(this._getCompareForType(n.type)(i[a],t=e[a])||((r||(r={}))[a]=t));return r},toJSON:function(){return this.serialize()},unset:function(e,t){var n=this;(e=Array.isArray(e)?e:[e]).forEach((function(e){var r,o=n._definition[e];if(o)return o.required?(r=m(o,"default"),n.set(e,r,t)):n.set(e,r,i({},t,{unset:!0}))}))},clear:function(e){var t=this;return Object.keys(this.attributes).forEach((function(n){t.unset(n,e)})),this},previous:function(e){return null!=e&&Object.keys(this._previousAttributes).length?this._previousAttributes[e]:null},_getDefaultForType:function(e){var t=this._dataTypes[e];return t&&t.default},_getCompareForType:function(e){var t=this._dataTypes[e];return t&&t.compare?t.compare.bind(this):h},_getOnChangeForType:function(e){var t=this._dataTypes[e];return t&&t.onChange?t.onChange.bind(this):E},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,i(t||{},{validationError:n})),!1)},_createPropertyDefinition:function(e,t,n){return R(this,e,t,n)},_ensureValidType:function(e){return u(["string","number","boolean","array","object","date","state","any"].concat(Object.keys(this._dataTypes)),e)?e:void 0},getAttributes:function(e,t){e=i({session:!1,props:!1,derived:!1},e||{});var n,r,o={};for(var a in this._definition)r=this._definition[a],(e.session&&r.session||e.props&&!r.session)&&(n=t?this._values[a]:this[a],t&&n&&p(n.serialize)&&(n=n.serialize()),void 0===n&&(n=m(r,"default")),void 0!==n&&(o[a]=n));if(e.derived)for(var s in this._derived)o[s]=this[s];return o},_initDerived:function(){var e=this;c(this._derived,(function(t,n){var r=e._derived[n];r.deps=r.depList;var i=function(){var t=r.fn.call(e);e._cache[n]===t&&r.cache||(r.cache&&(e._previousAttributes[n]=e._cache[n]),e._cache[n]=t,e.trigger("change:"+n,e,e._cache[n]))};r.deps.forEach((function(t){e._keyTree.add(t,i)}))})),this.on("all",(function(t){_.test(t)&&e._keyTree.get(t.split(":")[1]).forEach((function(e){e()}))}),this)},_getDerivedProperty:function(e,t){return this._derived[e].cache?(!t&&this._cache.hasOwnProperty(e)||(this._cache[e]=this._derived[e].fn.apply(this)),this._cache[e]):this._derived[e].fn.apply(this)},_initCollections:function(){var e;if(this._collections)for(e in this._collections)this._safeSet(e,new this._collections[e](null,{parent:this}))},_initChildren:function(){var e;if(this._children)for(e in this._children)this._safeSet(e,new this._children[e]({},{parent:this})),this.listenTo(this[e],"all",this._getCachedEventBubblingHandler(e))},_getCachedEventBubblingHandler:function(e){return this._eventBubblingHandlerCache[e]||(this._eventBubblingHandlerCache[e]=function(t,n,r){_.test(t)?this.trigger("change:"+e+"."+t.split(":")[1],n,r):"change"===t&&this.trigger("change",this)}.bind(this)),this._eventBubblingHandlerCache[e]},_verifyRequired:function(){var e=this.attributes;for(var t in this._definition)if(this._definition[t].required&&void 0===e[t])return!1;return!0},_safeSet:function(e,t){if(e in this)throw new Error("Encountered namespace collision while setting instance property `"+e+"`");return this[e]=t,this}}),Object.defineProperties(S.prototype,{attributes:{get:function(){return this.getAttributes({props:!0,session:!0})}},all:{get:function(){return this.getAttributes({session:!0,props:!0,derived:!0})}},isState:{get:function(){return!0},set:function(){}}});var C={string:{default:function(){return""}},date:{set:function(e){var t;if(null==e)t="object";else if(d(e))t="date",e=e.valueOf();else{var n=null,r=new Date(e).valueOf();isNaN(r)&&(r=new Date(parseInt(e,10)).valueOf(),isNaN(r)&&(n=!0)),e=r,t="date",n&&(t=typeof e)}return{val:e,type:t}},get:function(e){return null==e?e:new Date(e)},default:function(){return new Date}},array:{set:function(e){return{val:e,type:Array.isArray(e)?"array":typeof e}},default:function(){return[]}},object:{set:function(e){var t=typeof e;return"object"!==t&&void 0===e&&(e=null,t="object"),{val:e,type:t}},default:function(){return{}}},state:{set:function(e){return e instanceof S||e&&e.isState?{val:e,type:"state"}:{val:e,type:typeof e}},compare:function(e,t){return e===t},onChange:function(e,t,n){t&&this.stopListening(t,"all",this._getCachedEventBubblingHandler(n)),null!=e&&this.listenTo(e,"all",this._getCachedEventBubblingHandler(n))}}};S.extend=function(e){var t,n=this;t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return n.apply(this,arguments)},i(t,n);var r=function(){this.constructor=t};if(r.prototype=n.prototype,t.prototype=new r,t.prototype._derived=i({},n.prototype._derived),t.prototype._deps=i({},n.prototype._deps),t.prototype._definition=i({},n.prototype._definition),t.prototype._collections=i({},n.prototype._collections),t.prototype._children=i({},n.prototype._children),t.prototype._dataTypes=i({},n.prototype._dataTypes||C),e)for(var o=["dataTypes","props","session","derived","collections","children"],s=0;s<arguments.length;s++){var u=arguments[s];u.dataTypes&&c(u.dataTypes,(function(e,n){t.prototype._dataTypes[n]=e})),u.props&&c(u.props,(function(e,n){R(t.prototype,n,e)})),u.session&&c(u.session,(function(e,n){R(t.prototype,n,e,!0)})),u.derived&&c(u.derived,(function(e,n){x(t.prototype,n,e)})),u.collections&&c(u.collections,(function(e,n){t.prototype._collections[n]=e})),u.children&&c(u.children,(function(e,n){t.prototype._children[n]=e})),i(t.prototype,a(u,o))}return t.__super__=n.prototype,t},e.exports=S},72185:e=>{e.exports=function(e,t){var n=e.length,r=e.indexOf(t)+1;return r>n-1&&(r=0),e[r]}},67431:(e,t,n)=>{"use strict";function r(){var e=setTimeout.apply(void 0,arguments);return e.unref&&e.unref(),e}n.d(t,{L:()=>r})},18408:(e,t,n)=>{"use strict";n.d(t,{BrowserDetection:()=>Ce,Defer:()=>v,Exception:()=>me,base64:()=>c,cappedDebounce:()=>f,checkRequired:()=>d,deprecated:()=>ge,deviceType:()=>F,inBrowser:()=>ye,isBuffer:()=>o,make:()=>R,makeStateDataType:()=>m,oneFlight:()=>P,proxyEvents:()=>U,retry:()=>se,tap:()=>ce,transferEvents:()=>Z,whileInFlight:()=>ue});var r=n(83031),i=n(89509);const o=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)};function a(e){return r.decode(e).toString()}function s(e){var t=e;return o(t)||(t=i.Buffer.from(t)),r.encode(t)}const c={fromBase64url:a,toBase64Url:s,encode:function(e){return s(e)},decode:function(e){return a(e)},validate:function(e){return r.validate(e)}};var u=n(71544),l=n.n(u);function f(e,t,n){if(!e)throw new Error("`fn` must be a function");if(!t)throw new Error("`wait` is required");if(!(n=n||{}).maxWait)throw new Error("`options.maxWait` is required");if(!n.maxCalls)throw new Error("`options.maxCalls` is required");var r,i,o=n,a=o.maxCalls,s=o.maxWait,c=0;return function(){c+=1,clearTimeout(i),i=setTimeout((function(){return u()}),t),r||(r=setTimeout((function(){return u()}),s)),c>=a&&l()(u,this,[])};function u(){clearTimeout(i),i=null,clearTimeout(r),r=null,c=0,l()(e,this,[])}}function d(e,t){e.forEach((function(e){if(!t[e])throw new Error("missing required property ".concat(e," from ").concat(t))}))}var p=n(73473),h=n.n(p);function v(){var e=this;this.promise=new(h())((function(t,n){e.resolve=t,e.reject=n}))}function m(e,t){if(!e||!t)throw new Error("missing parameter for makeStateDataType");return{dataType:{set:function(n){return n instanceof e?(n.parent=this,{val:n,type:t}):{val:n?new e(n,{parent:this}):void 0,type:t}},compare:function(e,t){return e===t},onChange:function(e,t,n){t&&this.stopListening(t,"all",this._getCachedEventBubblingHandler(n)),e&&this.listenTo(e,"all",this._getCachedEventBubblingHandler(n))}},prop:{test:function(e){return!!e&&(e.parent=this,!1)},type:t}}}var g=n(956),y=n(8167),b=n(31314),w=n(83977),_=n.n(w),E=n(89539),S=n.n(E);function R(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.shift(),i=new(_()),o=new(_()),a=t.length>1?R.apply(void 0,t):t[0],s="(".concat([r.name].concat(t.map((function(e){return e.name}))).join(", "),")"),c=function(){function e(){(0,y.Z)(this,e);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];i.set(this,(0,g.Z)(r,n)),o.set(this,0)}return(0,b.Z)(e,[{key:"size",get:function(){return o.get(this)}},{key:"add",value:function(){return this.set.apply(this,arguments)}},{key:"clear",value:function(){var e=i.get(this).clear();return o.set(this,0),e}},{key:"delete",value:function(e){for(var t=i.get(this),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(!r.length)return t.delete(e);var s=t.get(e);if(!s)return!1;var c=s.delete.apply(s,r);return c&&o.set(this,o.get(this)-1),0===s.size&&t.delete(e),c}},{key:"get",value:function(e){var t=i.get(this);if(!t.get)return t;for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(!r.length)return t.get(e);var a=t.get(e);return a?a.get?a.get.apply(a,r):a:void 0}},{key:"has",value:function(){return void 0!==this.get.apply(this,arguments)}},{key:"set",value:function(){for(var e=!1,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.has.apply(this,n)&&(e=!0);var s=i.get(this),c=n.shift();if(!s.get)return x.apply(void 0,[s,c].concat(n)),this;var u=s.get(c);if(!u){if(!a)return x.apply(void 0,[s,c].concat(n)),this;x(s,c,u=new a)}return x.apply(void 0,[u].concat(n)),e||o.set(this,o.get(this)+1),this}},{key:"inspect",value:function(){return"Container".concat(s," {\n  ").concat(S().inspect(i.get(this),{depth:null}),"\n}")}}]),e}();return c}function x(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e.add)e.add.apply(e,n);else if(e.set)e.set.apply(e,n);else{if(!e.push)throw new TypeError("Could not determine how to insert into the specified container");e.push.apply(e,n)}}var C=n(13682),k=n(90359),T=n.n(k),I=n(18281),O=n.n(I),A=_(),L=O(),M=new(R(A,L,L));function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(3===t.length)return l()(s,null,t);var r=t[0]||{},i=r.cacheFailures,o=r.cacheSuccesses,a=r.keyFactory;return s;function s(e,t,n){var r=t;return n.value=T()(n.value,(function(t){for(var n=this,s=r,c=arguments.length,u=new Array(c>1?c-1:0),f=1;f<c;f++)u[f-1]=arguments[f];a&&(s="".concat(s,"_").concat(a.apply(void 0,u)));var d=M.get(this,e,s);return d||(d=l()(t,this,u),!i&&d&&d.catch&&(d=d.catch((function(t){return M.delete(n,e,s),h().reject(t)}))),!o&&d&&d.then&&(d=d.then((function(t){return M.delete(n,e,s),t}))),M.set(this,e,s,d),d)})),"object"!==(0,C.Z)(e)||e.prototype||(e[t]=n.value),n}}var N=n(1469),D=n.n(N);function U(e,t){return["on","once"].forEach((function(n){t[n]=function(){return e[n].apply(e,arguments),t}})),e}function Z(e,t,n){(e=D()(e)?e:[e]).forEach((function(e){t.on&&t.on(e,(function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return j.apply(void 0,[n,e].concat(r))}))}))}function j(e){var t=e.trigger||e.emit;if(!t)throw new Error("count not determine emit method");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return l()(t,e,r)}n(66250),n(33453);var F={PROVISIONAL:"PROVISIONAL",WEB:"WEB"};var B=n(26243),V=n.n(B),q=n(62680),W=n.n(q),z=n(95366),G=n.n(z),H=n(6919),$=n.n(H),K=n(93364),Y=n.n(K),J=n(26771),X=n.n(J),Q=n(77193),ee=n(23560),te=n.n(ee),ne=n(91747),re=n.n(ne),ie=n(17187),oe=n(25144);function ae(e,t){var n=V()(e);if(W()){var r=W()(e);t&&(r=r.filter((function(t){return G()(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0]||{};return i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){(0,Q.Z)(e,t,n[t])})):$()?Y()(e,$()(n)):ae(Object(n)).forEach((function(t){X()(e,t,G()(n,t))}))}return e}({},i),re()(i,{backoff:!0,delay:1,maxAttempts:3}),r=i.backoff?{initialDelay:i.delay,maxDelay:i.maxDelay}:{initialDelay:1,maxDelay:1},3===t.length?l()(o,null,t):o;function o(e,t,n){return n.value=T()(n.value,(function(e){for(var t=this,n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];var s=new ie.EventEmitter,c=new(h())((function(n,a){var c=oe.call((function(n){var r=l()(e,t,o);return te()(r.on)&&(r.on("progress",s.emit.bind(s,"progress")),r.on("upload-progress",s.emit.bind(s,"upload-progress")),r.on("download-progress",s.emit.bind(s,"download-progress"))),r.then((function(e){n(null,e)})).catch((function(e){e||(e=new Error("retryable method failed without providing an error object")),n(e)}))}),(function(e,t){return e?a(e):n(t)}));c.setStrategy(new oe.ExponentialStrategy(r)),i.maxAttempts&&c.failAfter(i.maxAttempts-1),c.start()}));return c.on=function(e,t){return s.on(e,t),c},c})),"object"!==(0,C.Z)(e)||e.prototype||(e[t]=n.value),n}}function ce(e){return function(t){return new(h())((function(n){n(e(t))})).then((function(){return t})).catch((function(){return t}))}}function ue(e){return function(t,n,r){r.value=T()(r.value,(function(t){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return new(h())((function(r){n[e]=!0,r(l()(t,n,i).then(ce((function(){n[e]=!1}))).catch((function(t){return n[e]=!1,h().reject(t)})))}))}))}}var le=n(63755),fe=n.n(le),de=n(69678),pe=n(26305),he=n(35002);function ve(e){var t=function(){if("undefined"==typeof Reflect||!fe())return!1;if(fe().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(fe()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,he.Z)(e);if(t){var i=(0,he.Z)(this).constructor;n=fe()(r,arguments,i)}else n=r.apply(this,arguments);return(0,pe.Z)(this,n)}}var me=function(e){(0,de.Z)(n,e);var t=ve(n);function n(){var e,r,i;(0,y.Z)(this,n);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];if((e=t.call.apply(t,[this].concat(a))).parse)r=(i=e).parse.apply(i,a);else if(e.constructor.parse){var c;r=(c=e.constructor).parse.apply(c,a)}return r||(r=e.constructor.defaultMessage),e.name=e.constructor.name,e.message=r,e}return(0,b.Z)(n,null,[{key:"parse",value:function(){return arguments.length<=0?void 0:arguments[0]}}]),n}((0,n(67097).Z)(Error));(0,Q.Z)(me,"defaultMessage","An error occurred");n(44894);const ge=function(){return function(){}},ye=!0;var be=n(88306),we=n.n(be),_e=n(51206),Ee=n.n(_e),Se=n(58908),Re=n.n(Se),xe={getOSName:function(){return n(24753).platform()},getOSVersion:function(){return n(24753).release()},getBrowserName:function(){return""},getBrowserVersion:function(){return""},isBrowser:function(){return!1}};const Ce=we()((function(e){var t,n;return e||null!==(t=Re().navigator)&&void 0!==t&&t.userAgent?(n=Ee().getParser(e||Re().navigator.userAgent),{getOSName:function(){var e;return null!==(e=null==n?void 0:n.getOSName())&&void 0!==e?e:""},getOSVersion:function(){var e;return null!==(e=null==n?void 0:n.getOSVersion())&&void 0!==e?e:""},getBrowserName:function(){var e;return null!==(e=null==n?void 0:n.getBrowserName())&&void 0!==e?e:""},getBrowserVersion:function(){var e;return null!==(e=null==n?void 0:n.getBrowserVersion())&&void 0!==e?e:""},isBrowser:function(e){return!(null==n||!n.isBrowser(e,!0))}}):xe}))},98380:(e,t,n)=>{"use strict";n.d(t,{oo:()=>z,ve:()=>X,nK:()=>Y,ce:()=>Ae});var r=n(47037),i=n.n(r),o=n(91747),a=n.n(o),s=n(40087),c=n.n(s),u=n(28583),l=n.n(u),f=n(39907),d=n.n(f),p=n(79873),h=n.n(p),v=n(67857),m=n.n(v),g=n(63755),y=n.n(g),b=n(8167),w=n(31314),_=n(23710),E=n(69678),S=n(26305),R=n(35002),x=n(93364),C=n.n(x),k=n(73473),T=n.n(k),I=n(13682),O=n(77193),A=n(78718),L=n.n(A),M=n(18433),P=n.n(M),N=n(8450),D=n.n(N),U=n(18408),Z=n(18428),j=n.n(Z),F=n(79529),B=n.n(F);function V(e){var t=function(){if("undefined"==typeof Reflect||!y())return!1;if(y().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(y()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,R.Z)(e);if(t){var i=(0,R.Z)(this).constructor;n=y()(r,arguments,i)}else n=r.apply(this,arguments);return(0,S.Z)(this,n)}}function q(e){var t=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(e),n=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(e),r=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),i=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),o=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),a=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),s=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),c=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),u=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),l=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),f=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),d=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),p=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),h=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),v=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),m=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),g=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),y=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),_=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),S=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(n),R=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(e),x=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(R),C=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(R),k=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(R),T=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(R),I=function(e){(0,E.Z)(n,e);var t=V(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n)}(R);j()(e,{0:t,NetworkOrCORSError:t,400:n,BadRequest:n,401:r,Unauthorized:r,402:i,PaymentRequired:i,403:o,Forbidden:o,404:a,NotFound:a,405:s,MethodNotAllowed:s,406:c,NotAcceptable:c,407:u,ProxyAuthenticationRequired:u,408:l,RequestTimeout:l,409:f,Conflict:f,410:d,Gone:d,411:p,LengthRequired:p,412:h,PreconditionFailed:h,413:v,RequestEntityTooLarge:v,414:m,RequestUriTooLong:m,415:g,UnsupportedMediaType:g,416:y,RequestRangeNotSatisfiable:y,417:_,ExpectationFailed:_,429:S,TooManyRequests:S,500:R,InternalServerError:R,501:x,NotImplemented:x,502:C,BadGateway:C,503:k,ServiceUnavailable:k,504:T,GatewayTimeout:T,505:I,HttpVersionNotSupported:I,select:function(t){if(null==t)return e;t=t.statusCode||t;var n=e[t];return n||(t="".concat(t.toString().split("").shift(),"00"),t=B()(t,10),e[t]||e)}})}function W(e){var t=function(){if("undefined"==typeof Reflect||!y())return!1;if(y().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(y()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,R.Z)(e);if(t){var i=(0,R.Z)(this).constructor;n=y()(r,arguments,i)}else n=r.apply(this,arguments);return(0,S.Z)(this,n)}}var z=function(e){(0,E.Z)(n,e);var t=W(n);function n(){return(0,b.Z)(this,n),t.apply(this,arguments)}return(0,w.Z)(n,[{key:"parse",value:function(e){var t,n=e.body;switch((0,I.Z)(n)){case"string":try{n=JSON.parse(n),t=this.parseObject(n)}catch(e){t=n}break;case"object":t=this.parseObject(n)}return t||(t=this.defaultMessage),C()(this,{body:{enumerable:!1,value:n},httpVersion:{enumerable:!1,value:e.httpVersion},headers:{enumerable:!1,value:e.headers||{}},rawHeaders:{enumerable:!1,value:e.rawHeaders||[]},trailers:{enumerable:!1,value:e.trailers||{}},rawTrailers:{enumerable:!1,value:e.rawTrailers||[]},method:{enumerable:!1,value:e.method},url:{enumerable:!1,value:e.url},statusCode:{enumerable:!1,value:e.statusCode},statusMessage:{enumerable:!1,value:e.statusMessage},socket:{enumerable:!1,value:e.socket},_res:{enumerable:!1,value:e}}),t}},{key:"parseObject",value:function(e){var t=P()(L()(e,n.errorKeys));if(0===t.length)return D()(e,null,2);var r=t[0];return"object"===(0,I.Z)(r)?this.parseObject(r):r}}]),n}(U.Exception);(0,O.Z)(z,"errorKeys",["error","errorString","response","errorResponse","message","msg"]),(0,O.Z)(z,"defaultMessage","An error was received while trying to fulfill the request"),q(z),z.makeSubTypes=q;var G=n(27361),H=n.n(G),$=n(26243),K=n.n($),Y=function(){function e(t){var n=this;(0,b.Z)(this,e),t&&K()(t).forEach((function(e){var r=t[e];h()(n,e,{enumerable:!0,value:r})}))}return(0,w.Z)(e,[{key:"logOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=H()(this,"webex.logger",console);({ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}).ENABLE_VERBOSE_NETWORK_LOGGING&&t&&(t.info("/***** Interceptor ****************************************************\\"),t.info("".concat(this.constructor.name," - ").concat(D()(e,null,2))))}},{key:"onRequest",value:function(e){return T().resolve(e)}},{key:"onRequestError",value:function(e,t){return T().reject(t)}},{key:"onResponse",value:function(e,t){return T().resolve(t)}},{key:"onResponseError",value:function(e,t){return T().reject(t)}}],[{key:"create",value:function(){throw new Error("`Interceptor.create()` must be defined")}}]),e}();function J(e){var t=function(){if("undefined"==typeof Reflect||!y())return!1;if(y().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(y()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,R.Z)(e);if(t){var i=(0,R.Z)(this).constructor;n=y()(r,arguments,i)}else n=r.apply(this,arguments);return(0,S.Z)(this,n)}}var X=function(e){(0,E.Z)(n,e);var t=J(n);function n(e,r){var i;(0,b.Z)(this,n),i=t.call(this,e);var o=r&&(r.error||r.ErrorConstructor)||z;return C()((0,_.Z)(i),{ErrorConstructor:{value:o}}),i}return(0,w.Z)(n,[{key:"onResponse",value:function(e,t){if(t.statusCode){if(t.statusCode<400)return T().resolve(t);if(404===t.statusCode&&t.body&&2000002===t.body.errorCode)return T().resolve(t)}return T().reject(new(this.ErrorConstructor.select(t.statusCode))(t))}}],[{key:"create",value:function(e){return new n(this,e)}}]),n}(Y),Q=n(17187),ee=n(27921),te=n.n(ee),ne=n(85579),re=n.n(ne),ie=n(22013),oe=n.n(ie),ae=n(78149),se=n.n(ae),ce=n(66250),ue=n(1469),le=n.n(ue),fe=n(33453),de=n.n(fe),pe=n(80129),he=n.n(pe),ve=n(58908),me=n(27376),ge=n(4947),ye=n(47529);function be(e,t,n){var r=e;return me(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=ye(t,{uri:e}),r.callback=n,r}function we(e,t,n){return _e(t=be(e,t,n))}function _e(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,r,i){t||(t=!0,e.callback(n,r,i))};function r(){var e=void 0;if(e=c.response?c.response:c.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML;return null}(c),v)try{e=JSON.parse(e)}catch(e){}return e}function i(e){return clearTimeout(u),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,m)}function o(){if(!s){var t;clearTimeout(u),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var i=m,o=null;return 0!==t?(i={body:r(),statusCode:t,method:f,headers:{},url:l,rawRequest:c},c.getAllResponseHeaders&&(i.headers=ge(c.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),n(o,i,i.body)}}var a,s,c=e.xhr||null;c||(c=e.cors||e.useXDR?new we.XDomainRequest:new we.XMLHttpRequest);var u,l=e.uri||e.url,f=e.method||"GET",d=e.body||e.data,p=e.headers||{},h=!!e.sync,v=!1,m={body:void 0,headers:{},statusCode:0,method:f,url:l,rawRequest:c};if("json"in e&&!1!==e.json&&(v=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==f&&"HEAD"!==f&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),d=D()(!0===e.json?d:e.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(o,0)},c.onload=o,c.onerror=i,c.onprogress=function(){},c.onabort=function(){s=!0},c.ontimeout=i,c.open(f,l,!h,e.username,e.password),h||(c.withCredentials=!!e.withCredentials),!h&&e.timeout>0&&(u=setTimeout((function(){if(!s){s=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}}),e.timeout)),c.setRequestHeader)for(a in p)p.hasOwnProperty(a)&&c.setRequestHeader(a,p[a]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(d||null),c}we.XMLHttpRequest=ve.XMLHttpRequest||function(){},we.XDomainRequest="withCredentials"in new we.XMLHttpRequest?we.XMLHttpRequest:ve.XDomainRequest,function(e,t){for(var n=0;n<e.length;n+=1)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){we["delete"===e?"del":e]=function(t,n,r){return(n=be(t,n,r)).method=e.toUpperCase(),_e(n)}}));const Ee=we;var Se=n(97769);function Re(e){return xe.apply(this,arguments)}function xe(){return(xe=(0,ce.Z)(de().mark((function e(t){var n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof Blob||t instanceof ArrayBuffer||t instanceof Uint8Array){e.next=2;break}throw new Error("`detect` requires a buffer of type Blob, ArrayBuffer, or Uint8Array");case 2:if(!(t instanceof Blob)){e.next=4;break}return e.abrupt("return",t.type);case 4:return e.next=6,(0,Se.fromBuffer)(t);case 6:if(n=e.sent){e.next=9;break}return e.abrupt("return","application/octet-stream");case 9:return e.abrupt("return",n.mime);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e,t){var n=void 0!==re()&&e[oe()]||e["@@iterator"];if(!n){if(se()(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return te()(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ke(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e){return new(T())((function(r){var i=L()(e,"method","uri","withCredentials","headers","timeout","responseType");i.response=!0,function(e){e.xhr=new XMLHttpRequest}(i),function(e,t){e.method&&["PATCH","POST","PUT"].includes(e.method.toUpperCase())&&(e.xhr||(e.xhr=new XMLHttpRequest),e.xhr.upload.onprogress=t.upload.emit.bind(t.upload,"progress"))}(i,e),function(e,t){if(t.auth)if(t.auth.bearer)e.headers.authorization="Bearer ".concat(t.auth.bearer);else{var n=t.auth.user||t.auth.username,r=t.auth.pass||t.auth.password,i=btoa("".concat(n,":").concat(r));e.headers.authorization="Basic ".concat(i)}}(i,e),function(e,t){t.jar&&(e.withCredentials=!0)}(i,e),function(e,t){var n={cors:!0,withCredentials:!1,timeout:0};a()(e,L()(t,K()(n)),n)}(i,e),function(e,t){"buffer"===t.responseType&&(e.responseType="arraybuffer")}(i,e),function(e,n){t.apply(this,arguments)}(i,e),function(e,t){"json"in t&&!0!==t.json||!t.body?t.form?(e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=he().stringify(t.form),m()(e,"json")):t.formData?e.body=K()(t.formData).reduce((function(e,r){return n(e,r,t.formData[r]),e}),new FormData):(e.body=t.body,m()(e,"json")):e.json=t.body}(i,e),function(e,t){t.qs&&(e.uri+="?".concat(he().stringify(t.qs)))}(i,e),e.logger.debug("start http ".concat(e.method?e.method:"request"," to ").concat(e.uri));var o=Ee(i,(function(t,n){t&&e.logger.warn(t),n?(n.statusCode>=400?e.logger.warn("http ".concat(e.method?e.method:"request"," to ").concat(e.uri," result: ").concat(n.statusCode)):e.logger.debug("http ".concat(e.method?e.method:"request"," to ").concat(e.uri," result: ").concat(n.statusCode)),n.options=e,function(e,t){if(!t.json&&"object"!==(0,I.Z)(e.body))try{e.body=JSON.parse(e.body)}catch(e){}}(n,i),r(n)):r({statusCode:0,options:e,headers:e.headers,method:e.method,url:e.uri,body:t})}));o.onprogress=e.download.emit.bind(e.download,"progress")})).catch((function(t){return e.logger.warn(t),{statusCode:0,options:e,headers:e.headers,method:e.method,url:e.uri,body:t}}));function t(){return(t=(0,ce.Z)(de().mark((function e(t,n){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.body instanceof Blob||n.body instanceof ArrayBuffer)){e.next=8;break}if(n.json=t.json=!1,e.t0=t.headers["content-type"],e.t0){e.next=7;break}return e.next=6,Re(n.body);case 6:e.t0=e.sent;case 7:t.headers["content-type"]=e.t0;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(e,t,r){if(le()(r)){var i,o=Ce(r);try{for(o.s();!(i=o.n()).done;){n(e,t,i.value)}}catch(e){o.e(e)}finally{o.f()}}else(r=function(e){if(e instanceof ArrayBuffer){var t=e.type?new Blob([e],{type:e.type}):new Blob([e]);return t.filename=e.filename||e.name||"untitled",t}return e}(r)).name?(r.filename=r.name,e.append(t,r,r.name)):e.append(t,r)}}n(81763),n(7520);var Ie=c()((function(e,t){if(i()(t)){var n=t;(t=arguments[2]||{}).uri=n}return["download","interceptors","logger","upload"].forEach((function(e){var n=d()(t,e);n=l()({},n,{enumerable:!1,writable:!0}),h()(t,e,n)})),a()(t,e),t.json||!1===t.json||m()(t,"json"),t.logger=t.logger||this.logger||console,function(e){return e.url&&(e.uri=e.url,e.url=null),e.headers=e.headers||{},e.download=new Q.EventEmitter,e.upload=new Q.EventEmitter,t(e.interceptors,"Request").then((function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Te.apply(void 0,[e].concat(n))})).then((function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.apply(void 0,[e.interceptors.slice().reverse(),"Response"].concat(r))}));function t(t,n,r){var i="on".concat(n),o="on".concat(n,"Error");return t.reduce((function(t,n){return t.then((function(t){return n.logOptions(e),n[i]?n[i](e,t):T().resolve(t)}),(function(t){return n.logOptions(e),n[o]?n[o](e,t):T().reject(t)}))}),T().resolve(r))}}(t)})),Oe={json:!0,interceptors:[X.create()]},Ae=Ie;Ie(Oe)},25026:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DeviceUrlInterceptor:()=>ge,FeatureCollection:()=>Y,FeatureModel:()=>K,FeaturesModel:()=>J,config:()=>be,constants:()=>r,default:()=>ae});var r={};n.r(r),n.d(r,{CISCO_DEVICE_URL:()=>L,DEVICE_EVENTS:()=>D,DEVICE_EVENT_REGISTRATION_SUCCESS:()=>N,FEATURE_COLLECTION_DEVELOPER:()=>I,FEATURE_COLLECTION_ENTITLEMENT:()=>O,FEATURE_COLLECTION_NAMES:()=>M,FEATURE_COLLECTION_USER:()=>A,FEATURE_TYPES:()=>P});n(3374);var i=n(21105),o=n(26243),a=n.n(o),s=n(62680),c=n.n(s),u=n(6919),l=n.n(u),f=n(93364),d=n.n(f),p=n(26771),h=n.n(p),v=n(77193),m=n(2313),g=n(73473),y=n.n(g),b=n(71544),w=n.n(b),_=n(66130),E=n.n(_),S=n(95366),R=n.n(S),x=n(18408),C=n(67431);const k="JS_SDK_WDM_REGISTRATION_SUCCESSFUL",T="JS_SDK_WDM_REGISTRATION_FAILED";var I="developer",O="entitlement",A="user",L="cisco-device-url",M=[I,O,A],P={BOOLEAN:"boolean",NUMBER:"number",STRING:"string"},N="registration:success",D=[N],U=n(65109),Z=n.n(U),j=n(90765),F=n.n(j),B=n(13682),V=n(13218),q=n.n(V),W=n(91747),z=n.n(W),G=n(7520),H=n.n(G);function $(e,t){var n=a()(e);if(c()){var r=c()(e);t&&(r=r.filter((function(t){return R()(e,t).enumerable}))),n.push.apply(n,r)}return n}const K=Z().extend({idAttribute:"key",props:{key:"string",lastModified:"date",mutable:"boolean",type:"string",val:"string",value:"any"},constructor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return z()(t,{parse:!0}),w()(Z().prototype.constructor,this,[e,t])},parse:function(e){if(!e||"object"!==(0,B.Z)(e))return{};var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):l()?d()(e,l()(n)):$(Object(n)).forEach((function(t){h()(e,t,R()(n,t))}))}return e}({},e),n=t.val;return H()(Number(n))?"string"==typeof n&&"true"===n.toLowerCase()?(t.type=P.BOOLEAN,t.value=!0):"string"==typeof n&&"false"===n.toLowerCase()?(t.type=P.BOOLEAN,t.value=!1):(t.type=P.STRING,t.value=n):(t.type=P.NUMBER,t.value=Number(n)),t},serialize:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=w()(Z().prototype.serialize,this,t);return r.lastModified&&(r.lastModified=new Date(r.lastModified).toISOString()),r},set:function(e,t,n){var r,i;return q()(e)||null===e?(r=e,i=t):((r={})[e]=t,i=n),r=this.parse(r,i),w()(Z().prototype.set,this,[r,i])}});const Y=F().extend({mainIndex:"key",model:K});const J=Z().extend({collections:{developer:Y,entitlement:Y,user:Y},clear:function(e){var t=this;return a()(this.attributes).forEach((function(n){t.unset(n,e)})),a()(this._children).forEach((function(e){t[e].clear()})),a()(this._collections).forEach((function(e){t[e].reset()})),this},initialize:function(){var e=this;["change:value","add","remove"].forEach((function(t){M.forEach((function(n){e[n].on(t,(function(t,r){e.trigger("change:".concat(n),e,e[n],r)}))}))}))}});var X,Q,ee,te,ne,re;function ie(e,t){var n=a()(e);if(c()){var r=c()(e);t&&(r=r.filter((function(t){return R()(e,t).enumerable}))),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){(0,v.Z)(e,t,n[t])})):l()?d()(e,l()(n)):ie(Object(n)).forEach((function(t){h()(e,t,R()(n,t))}))}return e}const ae=i._y.extend((X=(0,i.A4)("@"),Q=(0,i.A4)("@"),ee=(0,i.A4)("@"),te=(0,x.deprecated)("device#markUrlFailedAndGetNew(): Use services#markFailedUrl()"),ne=(0,i.tJ)("@",(function(){return!this.config.ephemeral})),re={namespace:"Device",extraProperties:"allow",idAttribute:"url",children:{features:J},props:{clientMessagingGiphy:"string",customerCompanyName:"string",customerLogoUrl:"string",deviceType:"string",helpUrl:"string",intranetInactivityDuration:"number",intranetInactivityCheckUrl:"string",inNetworkInactivityDuration:"number",ecmEnabledForAllUsers:["boolean",!1,!1],ecmSupportedStorageProviders:["array",!1,function(){return[]}],modificationTime:"string",navigationBarColor:"string",partnerCompanyName:"string",partnerLogoUrl:"string",peopleInsightsEnabled:"boolean",reportingSiteDesc:"string",reportingSiteUrl:"string",searchEncryptionKeyUrl:"string",showSupportText:"boolean",supportProviderCompanyName:"string",supportProviderLogoUrl:"string",url:"string",userId:"string",webFileShareControl:"string",webSocketUrl:"string",whiteboardFileShareControl:"string"},derived:{registered:{deps:["url"],fn:function(){return!!this.url}}},session:{logoutTimer:"any",lastUserActivityDate:"number",isReachabilityChecked:["boolean",!1,!1],isInMeeting:"boolean",isInNetwork:"boolean"},meetingStarted:function(){this.webex.trigger("meeting started")},meetingEnded:function(){this.webex.trigger("meeting ended")},refresh:function(){var e=this;return this.logger.info("device: refreshing"),this.canRegister().then((function(){if(!e.registered)return e.logger.info("device: device not registered, registering"),e.register();var t=oe(oe({},e.serialize()),e.config.body?e.config.body:{});delete t.features,delete t.mediaCluster,delete t.etag,e.config.ephemeral&&(t.ttl=e.config.ephemeralDeviceTTL);var n=oe(oe(oe({},e.config.defaults.headers?e.config.defaults.headers:{}),e.config.headers?e.config.headers:{}),e.etag?{"If-None-Match":e.etag}:{});return e.request({method:"PUT",uri:e.url,body:t,headers:n}).then((function(t){return e.processRegistrationSuccess(t)})).catch((function(t){return 404===t.statusCode?(e.logger.info("device: refresh failed, device is not valid"),e.logger.info("device: attempting to register a new device"),e.clear(),e.register()):y().reject(t)}))}))},register:function(){var e=this;return this.logger.info("device: registering"),this.canRegister().then((function(){if(e.registered)return e.logger.info("device: device already registered, refreshing"),e.refresh();var t=oe(oe({},e.config.defaults.body?e.config.defaults.body:{}),e.config.body?e.config.body:{}),n=oe(oe({},e.config.defaults.headers?e.config.defaults.headers:{}),e.config.headers?e.config.headers:{});return e.config.ephemeral&&(t.ttl=e.config.ephemeralDeviceTTL),e.request({method:"POST",service:"wdm",resource:"devices",body:t,headers:n}).then((function(t){return e.webex.internal.metrics.submitClientMetrics(k),e.processRegistrationSuccess(t)})).catch((function(t){throw e.webex.internal.metrics.submitClientMetrics(T,{fields:{error:t}}),t}))}))},unregister:function(){var e=this;return this.logger.info("device: unregistering"),this.registered?this.request({uri:this.url,method:"DELETE"}).then((function(){return e.clear()})):(this.logger.warn("device: not registered"),y().resolve())},canRegister:function(){this.logger.info("device: validating if registration can occur");var e=this.webex.internal.services;return e.waitForCatalog("postauth",this.config.canRegisterWaitDuration).then((function(){return e.get("wdm")?y().resolve():y().reject(new Error(["device: cannot register,","'wdm' service is not available from the postauth catalog"].join(" ")))}))},checkNetworkReachability:function(){var e=this;if(this.logger.info("device: checking network reachability"),this.isReachabilityChecked)return y().resolve(this.resetLogoutTimer());if(this.isReachabilityChecked=!0,!this.intranetInactivityCheckUrl)return this.isInNetwork=!1,y().resolve(this.resetLogoutTimer());return this.request({headers:{"cisco-no-http-redirect":null,"spark-user-agent":null,trackingid:null},method:"GET",uri:this.intranetInactivityCheckUrl}).then((function(){return e.isInNetwork=!0,y().resolve(e.resetLogoutTimer())})).catch((function(){return e.logger.info("device: did not reach ping endpoint"),e.logger.info("device: triggering off-network timer"),e.isInNetwork=!1,y().resolve(e.resetLogoutTimer())}))},clear:function(){this.logger.info("device: clearing registered device");for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];w()(i._y.prototype.clear,this,t)},getWebSocketUrl:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.logger.info("device: getting the current websocket url");var n=this.webex.internal.services;if(t)return this.waitForRegistration().then((function(){return n.convertUrlToPriorityHostUrl(e.webSocketUrl)})).catch((function(t){return e.logger.warn(t.message),y().reject(new Error("device: failed to get the current websocket url"))}));if(!this.registered)return y().reject(new Error("device: cannot get websocket url, device is not registered"));var r=n.convertUrlToPriorityHostUrl(this.webSocketUrl);return r?y().resolve(r):y().reject(new Error("device: failed to get the current websocket url"))},processRegistrationSuccess:function(e){var t=this;this.logger.info("device: received registration payload");var n=oe({},e.body);delete n.services,delete n.serviceHostMap;var r=(e.headers||{}).etag;if(this.etag&&r&&this.etag===r){var i=n.features;delete n.features,this.features.user.reset(i.user),this.features.entitlement.reset(i.entitlement)}if(this.set(n),this.set({etag:r}),this.config.ephemeral){this.logger.info("device: enqueuing device refresh");var o=1e3*(this.config.ephemeralDeviceTTL/2+60);this.refreshTimer=(0,C.L)((function(){return t.refresh()}),o)}this.trigger(N,this)},resetLogoutTimer:function(){this.logger.info("device: resetting logout timer"),clearTimeout(this.logoutTimer),this.off("change:lastUserActivityDate"),this.unset("logoutTimer"),!this.isInMeeting&&this.config.enableInactivityEnforcement&&this.isReachabilityChecked&&(this.isInNetwork?this.setLogoutTimer(this.inNetworkInactivityDuration):this.setLogoutTimer(this.intranetInactivityDuration))},setLogoutTimer:function(e){var t=this;this.logger.info("device: setting logout timer"),!e||e<=0||(this.on("change:lastUserActivityDate",(function(){t.resetLogoutTimer()})),this.logoutTimer=(0,C.L)((function(){t.webex.logout()}),1e3*e))},waitForRegistration:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.logger.info("device: waiting for registration"),new(y())((function(n,r){e.registered&&n();var i=(0,C.L)((function(){return r(new Error("device: timeout occured while waiting for registration"))}),1e3*t);e.once(N,(function(){clearTimeout(i),n()}))}))},markUrlFailedAndGetNew:function(e){return y().resolve(this.webex.internal.services.markFailedUrl(e))},initialize:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];w()(i._y.prototype.initialize,this,n),M.forEach((function(t){e.features.on("change:".concat(t),(function(t,n,r){e.trigger("change",e,r),e.trigger("change:features",e,e.features,r)}))})),this.on("change:intranetInactivityCheckUrl",(function(){e.checkNetworkReachability()})),this.on("change:intranetInactivityDuration",(function(){e.checkNetworkReachability()})),this.on("change:inNetworkInactivityDuration",(function(){e.checkNetworkReachability()})),this.listenTo(this.webex,"user-activity",(function(){e.lastUserActivityDate=E()()})),this.listenTo(this.webex,"meeting started",(function(){e.isInMeeting=!0,e.resetLogoutTimer()})),this.listenTo(this.webex,"meeting ended",(function(){e.isInMeeting=!1,e.resetLogoutTimer()}))},version:"2.54.2"},(0,m.Z)(re,"refresh",[x.oneFlight,X],R()(re,"refresh"),re),(0,m.Z)(re,"register",[x.oneFlight,Q],R()(re,"register"),re),(0,m.Z)(re,"unregister",[x.oneFlight,ee],R()(re,"unregister"),re),(0,m.Z)(re,"markUrlFailedAndGetNew",[te],R()(re,"markUrlFailedAndGetNew"),re),(0,m.Z)(re,"initialize",[ne],R()(re,"initialize"),re),re));var se=n(63755),ce=n.n(se),ue=n(8167),le=n(31314),fe=n(69678),de=n(26305),pe=n(35002),he=n(36968),ve=n.n(he);function me(e){var t=function(){if("undefined"==typeof Reflect||!ce())return!1;if(ce().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ce()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,pe.Z)(e);if(t){var i=(0,pe.Z)(this).constructor;n=ce()(r,arguments,i)}else n=r.apply(this,arguments);return(0,de.Z)(this,n)}}var ge=function(e){(0,fe.Z)(n,e);var t=me(n);function n(){return(0,ue.Z)(this,n),t.apply(this,arguments)}return(0,le.Z)(n,[{key:"onRequest",value:function(e){var t=e.headers,n=e.service,r=e.uri,i=this.webex.internal,o=i.device,a=i.services;return!o.url||t&&L in t&&t[L]?y().resolve(e):a.waitForService({service:n,url:r}).then((function(t){var n=(a.getServiceFromUrl(t)||{}).name;return n&&!["idbroker","oauth","saml"].includes(n)&&ve()(e,"headers['".concat(L,"']"),o.url),e})).catch((function(t){return t.message.match(/was not found after waiting/)?e:y().reject(t)}))}}],[{key:"create",value:function(){return new n({webex:this})}}]),n}(n(98380).nK),ye=n(34155);const be={device:{canRegisterWaitDuration:10,defaults:{body:{name:("string"==typeof ye.title?ye.title.trim():void 0)||x.inBrowser&&"browser"||"javascript",deviceType:x.deviceType.WEB,model:"web-js-sdk",localizedModel:"webex-js-sdk",systemName:"WEBEX_JS_SDK",systemVersion:"1.0.0"}},enableInactivityEnforcement:!1,ephemeral:!1,ephemeralDeviceTTL:1800}};(0,i.t4)("device",ae,{config:be,interceptors:{DeviceUrlInterceptor:ge.create},onBeforeLogout:function(){return this.unregister()}})},50819:(e,t,n)=>{"use strict";n(21408);var r=n(21105),i=n(43174),o=n.n(i),a=n(73473),s=n.n(a),c=n(71544),u=n.n(c),l=(n(25026),r._y.extend({namespace:"Feature",getFeature:function(e,t,n){if("developer"!==e&&"user"!==e&&"entitlement"!==e)return s().reject(new Error("Invalid feature keyType provided. Only `developer`, `user`, and `entitlement` feature toggles are permitted."));n=n||{};var r=this.webex.internal.device.features[e].get(t);return r?n.full?s().resolve(r.serialize()):s().resolve(r.value):s().resolve(null)},handleFeatureUpdate:function(e){if(e&&e.data){var t=e.data.featureToggle,n=t.type.toLowerCase();"user"!==n&&"developer"!==n||this.webex.internal.device.features[n].add([t],{merge:!0})}},listen:function(){this.listenTo(this.webex.internal.mercury,"event:featureToggle_update",this.handleFeatureUpdate)},setFeature:function(e,t,n){var r=this;return"developer"!==e&&"user"!==e?s().reject(new Error("Only `developer` and `user` feature toggles can be set.")):this.request({method:"POST",api:"feature",resource:"features/users/".concat(this.webex.internal.device.userId,"/").concat(e),body:{key:t,mutable:!0,val:n}}).then((function(t){return r.webex.internal.device.features[e].add(t.body,{merge:!0})}))},setBundledFeatures:function(e){var t=this;return e.forEach((function(e){e.mutable=e.mutable||"true","USER"!==e.type&&"DEV"!==e.type&&(e.type="USER")})),this.request({method:"POST",api:"feature",resource:"features/users/".concat(this.webex.internal.device.userId,"/toggles"),body:e}).then((function(e){var n=o()(e.body.featureToggles,{type:"USER"});t.webex.internal.device.features.user.add(n[0],{merge:!0}),t.webex.internal.device.features.developer.add(n[1],{merge:!0})}))},initialize:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];u()(r._y.prototype.initialize,this,t),this.listenToAndRun(this.webex,"change:internal.device.features.developer",this.trigger.bind(this,"change:developer")),this.listenToAndRun(this.webex,"change:internal.device.features.entitlement",this.trigger.bind(this,"change:entitlement")),this.listenToAndRun(this.webex,"change:internal.device.features.user",this.trigger.bind(this,"change:user"))}}));const f=l;(0,r.t4)("feature",f,{config:{feature:{}}})},21408:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BadRequest:()=>fe,ConnectionError:()=>ue,Forbidden:()=>pe,Mercury:()=>Re,NotAuthorized:()=>de,Socket:()=>ge,UnknownResponse:()=>le,config:()=>xe,default:()=>Re});n(25026),n(50819),n(3374);var r=n(21105),i=n(62680),o=n.n(i),a=n(6919),s=n.n(a),c=n(93364),u=n.n(c),l=n(26771),f=n.n(l),d=n(77193),p=n(14917),h=n(2313),v=n(36968),m=n.n(v),g=n(27361),y=n.n(g),b=n(68929),w=n.n(b),_=n(73473),E=n.n(_),S=n(26243),R=n.n(S),x=n(18428),C=n.n(x),k=n(67857),T=n.n(k),I=n(66130),O=n.n(I),A=n(95366),L=n.n(A),M=n(8575),P=n(18408),N=n(25144),D=n(63755),U=n.n(D),Z=n(8167),j=n(31314),F=n(23710),B=n(69678),V=n(26305),q=n(35002),W=n(13218),z=n.n(W),G=n(18721),H=n.n(G),$=n(91747),K=n.n($),Y=n(83977),J=n.n(Y),X=n(79873),Q=n.n(X),ee=n(79529),te=n.n(ee),ne=n(8450),re=n.n(ne),ie=n(17187),oe=n(67431),ae=n(55877),se=n.n(ae);function ce(e){var t=function(){if("undefined"==typeof Reflect||!U())return!1;if(U().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(U()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=U()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var ue=function(e){(0,B.Z)(n,e);var t=ce(n);function n(){return(0,Z.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"parse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u()(this,{code:{value:e.code},reason:{value:e.reason}}),e.reason}}]),n}(P.Exception);(0,d.Z)(ue,"defaultMessage","Failed to connect to socket");var le=function(e){(0,B.Z)(n,e);var t=ce(n);function n(){return(0,Z.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(ue);(0,d.Z)(le,"defaultMessage","UnknownResponse is produced by IE when we receive a 4XXX. You probably want to treat this like a NotFound");var fe=function(e){(0,B.Z)(n,e);var t=ce(n);function n(){return(0,Z.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(ue);(0,d.Z)(fe,"defaultMessage","BadRequest usually implies an attempt to use service account credentials");var de=function(e){(0,B.Z)(n,e);var t=ce(n);function n(){return(0,Z.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(ue);(0,d.Z)(de,"defaultMessage","Please refresh your access token");var pe=function(e){(0,B.Z)(n,e);var t=ce(n);function n(){return(0,Z.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(ue);function he(e){var t=function(){if("undefined"==typeof Reflect||!U())return!1;if(U().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(U()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=U()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}(0,d.Z)(pe,"defaultMessage","Forbidden usually implies these credentials are not entitled for Webex");var ve=new(J()),me=function(e){(0,B.Z)(n,e);var t=he(n);function n(){var e;return(0,Z.Z)(this,n),(e=t.call(this)).onmessage=e.onmessage.bind((0,F.Z)(e)),e.onclose=e.onclose.bind((0,F.Z)(e)),e}return(0,j.Z)(n,[{key:"binaryType",get:function(){return ve.get(this).binaryType}},{key:"bufferedAmount",get:function(){return ve.get(this).bufferedAmount}},{key:"extensions",get:function(){return ve.get(this).extensions}},{key:"protocol",get:function(){return ve.get(this).protocol}},{key:"readyState",get:function(){return ve.get(this).readyState}},{key:"url",get:function(){return ve.get(this).url}},{key:"close",value:function(e){var t=this;return new(E())((function(n,r){var i=ve.get(t);if(i){if(t.logger.info("socket: closing"),2===i.readyState||3===i.readyState)return t.logger.info("socket: already closed"),void n();if((e=e||{}).code&&1e3!==e.code&&(e.code<3e3||e.code>4999))r(new Error("`options.code` must be 1000 or between 3000 and 4999 (inclusive)"));else{e=K()(e,{code:1e3,reason:"Done"});var o=(0,oe.L)((function(){try{t.logger.info("socket: no close event received, forcing closure"),n(t.onclose({code:1e3,reason:"Done (forced)"}))}catch(e){t.logger.warn("socket: force-close failed",e)}}),t.forceCloseDelay);i.onclose=function(e){t.logger.info("socket: close event fired",e.code,e.reason),clearTimeout(o),t.onclose(e),n(e)},i.close(e.code,e.reason)}}else n()}))}},{key:"open",value:function(e,t){var r=this;return new(E())((function(i,o){if(e)if(ve.get(r))o(new Error("Socket#open() can only be called once per instance"));else{t=t||{},(0,P.checkRequired)(["forceCloseDelay","pingInterval","pongTimeout","token","trackingId","logger"],t),R()(t).forEach((function(e){Q()(r,e,{enumerable:!1,value:t[e]})}));var a=n.getWebSocketConstructor();r.logger.info("socket: creating WebSocket");var s=new a(e,[],t);s.binaryType="arraybuffer",s.onmessage=r.onmessage,s.onclose=function(e){switch(e=r._fixCloseCode(e),r.logger.info("socket: closed before open",e.code,e.reason),e.code){case 1005:return o(new le(e));case 4400:return o(new fe(e));case 4401:return o(new de(e));case 4403:return o(new pe(e));default:return o(new ue(e))}},s.onopen=function(){r.logger.info("socket: connected"),r._authorize().then((function(){r.logger.info("socket: authorized"),s.onclose=r.onclose,i()})).catch(o)},s.onerror=function(e){r.logger.warn("socket: error event fired",e)},ve.set(r,s),r.logger.info("socket: waiting for server")}else o(new Error("`url` is required"))}))}},{key:"onclose",value:function(e){this.logger.info("socket: closed",e.code,e.reason),clearTimeout(this.pongTimer),clearTimeout(this.pingTimer),e=this._fixCloseCode(e),this.emit("close",e),this.removeAllListeners()}},{key:"onmessage",value:function(e){try{var t=JSON.parse(e.data),n=te()(t.sequenceNumber,10);this.logger.debug("socket: sequence number: ",n),this.expectedSequenceNumber&&n!==this.expectedSequenceNumber&&(this.logger.debug("socket: sequence number mismatch indicates lost mercury message. expected: ".concat(this.expectedSequenceNumber,", actual: ").concat(n)),this.emit("sequence-mismatch",n,this.expectedSequenceNumber)),this.expectedSequenceNumber=n+1;var r={data:t};this._acknowledge(r),"pong"===t.type?this.emit("pong",r):this.emit("message",r)}catch(e){this.logger.warn("socket: error while receiving WebSocket message",e)}}},{key:"send",value:function(e){var t=this;return new(E())((function(n,r){return 1!==t.readyState?r(new Error("INVALID_STATE_ERROR")):(z()(e)&&(e=re()(e)),ve.get(t).send(e),n())}))}},{key:"_acknowledge",value:function(e){return e?H()(e,"data.id")?this.send({messageId:e.data.id,type:"ack"}):E().reject(new Error("`event.data.id` is required")):E().reject(new Error("`event` is required"))}},{key:"_authorize",value:function(){var e=this;return new(E())((function(t){e.logger.info("socket: authorizing"),e.send({id:se().v4(),type:"authorization",data:{token:e.token},trackingId:e.trackingId,logLevelToken:e.logLevelToken});e.once("message",(function n(r){r.data.type||"mercury.buffer_state"!==r.data.data.eventType&&"mercury.registration_status"!==r.data.data.eventType||(e.removeListener("message",n),e._ping(),t())}))}))}},{key:"_fixCloseCode",value:function(e){if(1005===e.code&&e.reason)switch(e.reason.toLowerCase()){case"replaced":this.logger.info("socket: fixing CloseEvent code for reason: ",e.reason),e.code=4e3;break;case"authentication failed":case"authentication did not happen within the timeout window of 30000 seconds.":this.logger.info("socket: fixing CloseEvent code for reason: ",e.reason),e.code=1008}return e}},{key:"_ping",value:function(e){var t=this;return e=e||se().v4(),this.pongTimer=(0,oe.L)((function(){try{t.logger.info("socket: pong not receive in expected period, closing socket"),t.close({code:1e3,reason:"Pong not received"}).catch((function(e){t.logger.warn("socket: failed to close socket after missed pong",e)}))}catch(e){t.logger.error("socket: error occurred in onPongNotReceived",e)}}),this.pongTimeout),this.once("pong",(function(){try{clearTimeout(t.pongTimer),t.pingTimer=(0,oe.L)((function(){return t._ping()}),t.pingInterval)}catch(e){t.logger.error("socket: error occurred in scheduleNextPingAndCancelPongTimer",e)}})),this.once("pong",(function(n){try{t.logger.debug("socket: pong",n.data.id),n.data&&n.data.id!==e&&(t.logger.info("socket: received pong for wrong ping id, closing socket"),t.logger.debug("socket: expected",e,"received",n.data.id),t.close({code:1e3,reason:"Pong mismatch"}))}catch(e){t.logger.error("socket: error occurred in confirmPongId",e)}})),this.logger.debug("socket: ping ".concat(e)),this.send({id:e,type:"ping"})}}],[{key:"getWebSocketConstructor",value:function(){throw new Error("Socket.getWebSocketConstructor() must be implemented in an environmentally appropriate way")}}]),n}(ie.EventEmitter);me.getWebSocketConstructor=function(){var e;return"undefined"!=typeof WebSocket?e=WebSocket:"undefined"!=typeof MozWebSocket?e=MozWebSocket:void 0!==n.g?e=n.g.WebSocket||n.g.MozWebSocket:"undefined"!=typeof window?e=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(e=self.WebSocket||self.MozWebSocket),e};const ge=me;var ye,be,we;function _e(e,t){var n=R()(e);if(o()){var r=o()(e);t&&(r=r.filter((function(t){return L()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):s()?u()(e,s()(n)):_e(Object(n)).forEach((function(t){f()(e,t,L()(n,t))}))}return e}var Se=["idle","done (forced)","pong not received","pong mismatch"];const Re=r._y.extend((ye=(0,P.deprecated)("Mercury#listen(): Use Mercury#connect() instead"),be=(0,P.deprecated)("Mercury#stopListening(): Use Mercury#disconnect() instead"),we={namespace:"Mercury",session:{connected:{default:!1,type:"boolean"},connecting:{default:!1,type:"boolean"},socket:"object",localClusterServiceUrls:"object"},derived:{listening:{deps:["connected"],fn:function(){return this.connected}}},connect:function(e){var t=this;return this.connected?(this.logger.info("mercury: already connected, will not connect again"),E().resolve()):(this.connecting=!0,E().resolve(this.webex.internal.device.registered||this.webex.internal.device.register()).then((function(){return t.logger.info("mercury: connecting"),t._connectWithBackoff(e)})))},disconnect:function(){var e=this;return new(E())((function(t){if(e.backoffCall&&(e.logger.info("mercury: aborting connection"),e.backoffCall.abort()),e.socket)return e.socket.removeAllListeners("message"),e.once("offline",t),void e.socket.close();t()}))},listen:function(){return this.connect()},stopListening:function(){return this.disconnect()},processRegistrationStatusEvent:function(e){this.localClusterServiceUrls=e.localClusterServiceUrls},_applyOverrides:function(e){e&&e.headers&&R()(e.headers).forEach((function(t){m()(e,t,e.headers[t])}))},_prepareUrl:function(e){var t=this;return e||(e=this.webex.internal.device.webSocketUrl),this.webex.internal.feature.getFeature("developer","web-high-availability").then((function(n){return n?t.webex.internal.services.convertUrlToPriorityHostUrl(e):e})).then((function(t){e=t})).then((function(){return t.webex.internal.feature.getFeature("developer","web-shared-mercury")})).then((function(n){return e=M.parse(e,!0),C()(e.query,{outboundWireFormat:"text",bufferStates:!0,aliasHttpStatus:!0}),n&&(C()(e.query,{mercuryRegistrationStatus:!0,isRegistrationRefreshEnabled:!0}),T()(e.query,"bufferStates")),y()(t,"webex.config.device.ephemeral",!1)&&(e.query.multipleConnections=!0),M.format(e)}))},_attemptConnection:function(e,t){var n,r=this,i=new ge;i.on("close",(function(){return r._onclose.apply(r,arguments)})),i.on("message",(function(){return r._onmessage.apply(r,arguments)})),i.on("sequence-mismatch",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._emit.apply(r,["sequence-mismatch"].concat(t))})),E().all([this._prepareUrl(e),this.webex.credentials.getUserToken()]).then((function(e){var t=(0,p.Z)(e,2),o=t[0],a=t[1];if(!r.backoffCall){var s="mercury: prevent socket open when backoffCall no longer defined";return r.logger.info(s),E().reject(new Error(s))}n=o;var c={forceCloseDelay:r.config.forceCloseDelay,pingInterval:r.config.pingInterval,pongTimeout:r.config.pongTimeout,token:a.toString(),trackingId:"".concat(r.webex.sessionId,"_").concat(O()()),logger:r.logger};return r.webex.config.defaultMercuryOptions&&(r.logger.info("mercury: setting custom options"),c=Ee(Ee({},c),r.webex.config.defaultMercuryOptions)),r.socket=i,i.open(o,c)})).then((function(){return r.webex.internal.metrics.submitClientMetrics("web-ha-mercury",{fields:{success:!0},tags:{action:"connected",url:n}}),t(),r.webex.internal.feature.getFeature("developer","web-high-availability").then((function(e){return e?r.webex.internal.device.refresh():E().resolve()}))})).catch((function(e){return 1006!==e.code&&r.backoffCall&&r.backoffCall.getNumRetries()>0&&r._emit("connection_failed",e,{retries:r.backoffCall.getNumRetries()}),r.logger.info("mercury: connection attempt failed",e),e instanceof le?(r.logger.info("mercury: received unknown response code, refreshing device registration"),r.webex.internal.device.refresh().then((function(){return t(e)}))):e instanceof de?(r.logger.info("mercury: received authorization error, reauthorizing"),r.webex.credentials.refresh({force:!0}).then((function(){return t(e)}))):e instanceof fe||e instanceof pe?(r.logger.warn("mercury: received unrecoverable response from mercury"),r.backoffCall.abort(),t(e)):e instanceof ue?r.webex.internal.feature.getFeature("developer","web-high-availability").then((function(t){return t?(r.logger.info("mercury: received a generic connection error, will try to connect to another datacenter"),r.webex.internal.metrics.submitClientMetrics("web-ha-mercury",{fields:{success:!1},tags:{action:"failed",error:e.message,url:n}}),r.webex.internal.services.markFailedUrl(n)):null})).then((function(){return t(e)})):t(e)})).catch((function(e){r.logger.error("mercury: failed to handle connection failure",e),t(e)}))},_connectWithBackoff:function(e){var t=this;return new(E())((function(n,r){var i;(i=N.call((function(n){t.logger.info("mercury: executing connection attempt ".concat(i.getNumRetries())),t._attemptConnection(e,n)}),(function(e){return t.connecting=!1,t.backoffCall=void 0,e?(t.logger.info("mercury: failed to connect after ".concat(i.getNumRetries()," retries; log statement about next retry was inaccurate; ").concat(e)),r(e)):(t.connected=!0,t._emit("online"),n())}))).setStrategy(new N.ExponentialStrategy({initialDelay:t.config.backoffTimeReset,maxDelay:t.config.backoffTimeMax})),t.config.maxRetries&&i.failAfter(t.config.maxRetries),i.on("abort",(function(){t.logger.info("mercury: connection aborted"),r(new Error("Mercury Connection Aborted"))})),i.on("callback",(function(e){if(e){var n=i.getNumRetries(),r=Math.min(i.strategy_.nextBackoffDelay_,t.config.backoffTimeMax);t.logger.info("mercury: failed to connect; attempting retry ".concat(n+1," in ").concat(r," ms"))}else t.logger.info("mercury: connected")})),i.start(),t.backoffCall=i}))},_emit:function(){try{this.trigger.apply(this,arguments)}catch(e){this.logger.error("mercury: error occurred in event handler",e)}},_getEventHandlers:function(e){var t=e.split("."),n=(0,p.Z)(t,2),r=n[0],i=n[1],o=[];if(!this.webex[r]&&!this.webex.internal[r])return o;var a=w()("process_".concat(i,"_event"));return(this.webex[r]||this.webex.internal[r])[a]&&o.push({name:a,namespace:r}),o},_onclose:function(e){try{var t=e.reason&&e.reason.toLowerCase(),n=this.socket.url;switch(this.socket.removeAllListeners(),this.unset("socket"),this.connected=!1,this._emit("offline",e),e.code){case 1003:this.logger.info("mercury: Mercury service rejected last message; will not reconnect: ".concat(e.reason)),this._emit("offline.permanent",e);break;case 4e3:this.logger.info("mercury: socket replaced; will not reconnect"),this._emit("offline.replaced",e);break;case 1001:case 1005:case 1006:case 1011:this.logger.info("mercury: socket disconnected; reconnecting"),this._emit("offline.transient",e),this._reconnect(n);break;case 1e3:Se.includes(t)?(this.logger.info("mercury: socket disconnected; reconnecting"),this._emit("offline.transient",e),this._reconnect(n)):(this.logger.info("mercury: socket disconnected; will not reconnect"),this._emit("offline.permanent",e));break;default:this.logger.info("mercury: socket disconnected unexpectedly; will not reconnect"),this._emit("offline.permanent",e)}}catch(e){this.logger.error("mercury: error occurred in close handler",e)}},_onmessage:function(e){var t=this,n=e.data;({ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}).ENABLE_MERCURY_LOGGING&&this.logger.debug("mercury: message envelope: ",n);var r=n.data;return this._applyOverrides(r),this._getEventHandlers(r.eventType).reduce((function(e,n){return e.then((function(){var e=n.namespace,i=n.name;return new(E())((function(n){return n((t.webex[e]||t.webex.internal[e])[i](r))})).catch((function(e){return t.logger.error("mercury: error occurred in autowired event handler for ".concat(r.eventType),e)}))}))}),E().resolve()).then((function(){t._emit("event",e.data);var i=r.eventType.split("."),o=(0,p.Z)(i,1)[0];o===r.eventType?t._emit("event:".concat(o),n):(t._emit("event:".concat(o),n),t._emit("event:".concat(r.eventType),n))})).catch((function(e){t.logger.error("mercury: error occurred processing socket message",e)}))},_reconnect:function(e){return this.logger.info("mercury: reconnecting"),this.connect(e)},version:"2.54.2"},(0,h.Z)(we,"connect",[P.oneFlight],L()(we,"connect"),we),(0,h.Z)(we,"disconnect",[P.oneFlight],L()(we,"disconnect"),we),(0,h.Z)(we,"listen",[ye],L()(we,"listen"),we),(0,h.Z)(we,"stopListening",[be],L()(we,"stopListening"),we),we)),xe={mercury:{pingInterval:{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.MERCURY_PING_INTERVAL||15e3,pongTimeout:{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.MERCURY_PONG_TIMEOUT||14e3,backoffTimeMax:{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.MERCURY_BACKOFF_TIME_MAX||32e3,backoffTimeReset:{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.MERCURY_BACKOFF_TIME_RESET||1e3,forceCloseDelay:{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.MERCURY_FORCE_CLOSE_DELAY||2e3}};(0,r.t4)("mercury",Re,{config:xe,onBeforeLogout:function(){return this.disconnect()}})},3374:(e,t,n)=>{"use strict";var r=n(21105),i=n(26243),o=n.n(i),a=n(62680),s=n.n(a),c=n(95366),u=n.n(c),l=n(6919),f=n.n(l),d=n(93364),p=n.n(d),h=n(26771),v=n.n(h),m=n(77193),g=n(18408),y="webex-js-sdk";const b={device:{preDiscoveryServices:{metricsServiceUrl:{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.METRICS_SERVICE_URL||"https://metrics-a.wbx2.com/metrics/api/v1",metrics:{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.METRICS_SERVICE_URL||"https://metrics-a.wbx2.com/metrics/api/v1"}},metrics:{appType:g.inBrowser?"browser":"nodejs",batcherWait:500,batcherMaxCalls:50,batcherMaxWait:1500,batcherRetryPlateau:32e3}};var w={WINDOWS:"windows",MAC:"mac",IOS:"ios",ANDROID:"android",CHROME:"chrome",LINUX:"linux",OTHERS:"other"},_={"Chrome OS":w.CHROME,macOS:w.MAC,Windows:w.WINDOWS,iOS:w.IOS,Android:w.ANDROID,Linux:w.LINUX},E=n(14917),S=n(85579),R=n.n(S),x=n(66130),C=n.n(x),k=n(73473),T=n.n(k),I=n(71544),O=n.n(I),A=n(67431),L=R()("metric id");const M=r.mr.extend({namespace:"Metrics",prepareItem:function(e){return e.appType=e.appType||this.config.appType,e.env=e.env||null,e.time=e.time||C()(),e.version=e.version||this.webex.version,T().resolve(e)},prepareRequest:function(e){return T().resolve(e.map((function(e){return e.postTime=e.postTime||C()(),e})))},submitHttpRequest:function(e){return this.webex.request({method:"POST",service:"metrics",resource:"metrics",body:{metrics:e}})},handleHttpSuccess:function(e){var t=this;return T().all(e.options.body.metrics.map((function(e){return t.acceptItem(e)})))},handleHttpError:function(e){var t=this;return e instanceof r.Ff.NetworkOrCORSError?(this.logger.warn("metrics-batcher: received network error submitting metrics, reenqueuing payload"),T().all(e.options.body.metrics.map((function(e){return new(T())((function(n){var r=e[L].nextDelay;r<t.config.batcherRetryPlateau&&(e[L].nextDelay*=2),(0,A.L)((function(){n(t.rerequest(e))}),r)}))})))):O()(r.mr.prototype.handleHttpError,this,[e])},rerequest:function(e){var t=this;return T().all([this.getDeferredForRequest(e),this.prepareItem(e)]).then((function(e){var n=(0,E.Z)(e,2),r=n[0],i=n[1];t.enqueue(i).then((function(){return t.bounce()})).catch((function(e){return r.reject(e)}))}))},fingerprintRequest:function(e){return e[L]=e[L]||{nextDelay:1e3},T().resolve(e[L])},fingerprintResponse:function(e){return T().resolve(e[L])}});const P=M.extend({namespace:"Metrics",prepareItem:function(e){return T().resolve(e)},prepareRequest:function(e){return T().resolve(e)},submitHttpRequest:function(e){return this.webex.request({method:"POST",service:"metrics",resource:"clientmetrics",body:{metrics:e}})}});var N=n(18428),D=n.n(N);const U=M.extend({namespace:"Metrics",getBuildType:function(e){return null!=e&&e.includes("teams.webex.com")||null!=e&&e.includes("localhost")||null!=e&&e.includes("127.0.0.1")?"test":"prod"},prepareItem:function(e){var t,n,r={buildType:this.getBuildType(null===(t=e.event)||void 0===t||null===(n=t.eventData)||void 0===n?void 0:n.webClientDomain),networkType:"unknown"};return e.eventPayload.origin=D()(r,e.eventPayload.origin),T().resolve(e)},prepareRequest:function(e){return e.forEach((function(e){e.eventPayload.originTime=e.eventPayload.originTime||{},e.eventPayload.originTime.sent=(new Date).toISOString()})),T().resolve(e)},submitHttpRequest:function(e){return this.webex.request({method:"POST",service:"metrics",resource:"clientmetrics",body:{metrics:e}})}});function Z(e,t){var n=o()(e);if(s()){var r=s()(e);t&&(r=r.filter((function(t){return u()(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):f()?p()(e,f()(n)):Z(Object(n)).forEach((function(t){v()(e,t,u()(n,t))}))}return e}var F=(0,g.BrowserDetection)(),B=F.getOSName,V=F.getOSVersion,q=F.getBrowserName,W=F.getBrowserVersion;function z(){var e;return null!==(e=_[B()])&&void 0!==e?e:w.OTHERS}const G=r._y.extend({children:{batcher:M,clientMetricsBatcher:P,callDiagnosticEventsBatcher:U},namespace:"Metrics",submit:function(e,t){return this.batcher.request(j({key:e},t))},submitClientMetrics:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(!e)throw Error("Missing behavioral metric name. Please provide one");var r,i,o,a,s,c,u,l={metricName:e};if(l.tags=j(j({},t.tags),{},{browser:q(),os:z(),domain:"undefined"!=typeof window&&window.location.hostname||"non-browser"}),l.fields=j(j({},t.fields),{},{browser_version:W(),os_version:V(),sdk_version:this.webex.version,platform:"Web",spark_user_agent:(r=this.webex,o=null!==(i=null==r?void 0:r.config)&&void 0!==i?i:{},a=o.appName,s=o.appVersion,c=o.appPlatform,u=y,a&&(u+=" ".concat(a,"/").concat(null!=s?s:"0.0")),c&&(u+=" ".concat(c)),u),client_id:this.webex.credentials.config.client_id}),l.type=t.type||this.webex.config.metrics.type,l.context=j(j({},t.context),{},{app:{version:this.webex.version},locale:"en-US",os:{name:z(),version:V()}}),t.eventPayload&&(l.eventPayload=t.eventPayload),l.timestamp=(new Date).valueOf(),n){var f={metrics:[l]};return this.postPreLoginMetric(f,n)}return this.clientMetricsBatcher.request(l)},aliasUser:function(e){return this.request({method:"POST",api:"metrics",resource:"clientmetrics",headers:{"x-prelogin-userid":e},body:{},qs:{alias:!0}})},postPreLoginMetric:function(e,t){var n=this;return this.webex.credentials.getClientToken().then((function(r){return n.request({method:"POST",api:"metrics",resource:"clientmetrics-prelogin",headers:{authorization:r.toString(),"x-prelogin-userid":t},body:e})}))},submitCallDiagnosticEvents:function(e){var t={type:"diagnostic-event",eventPayload:e};return this.callDiagnosticEventsBatcher.request(t)},version:"2.54.2"});(0,r.t4)("metrics",G,{config:b})},21105:(e,t,n)=>{"use strict";n.d(t,{mr:()=>Vr,t8:()=>ge,dR:()=>z,Ff:()=>kt,_y:()=>ye,ZP:()=>sn,tJ:()=>G,t4:()=>un,A4:()=>Y});var r=n(82723),i=n.n(r),o=n(13218),a=n.n(o),s=n(50361),c=n.n(s),u=n(26243),l=n.n(u),f=n(71544),d=n.n(f),p=n(73473),h=n.n(p),v=n(89539),m=n.n(v),g=n(65109),y=n.n(g),b=n(77193),w=n(13682),_=n(21882),E=n(90359),S=n.n(E),R=n(58613),x=n.n(R),C=n(6557),k=n.n(C),T=n(23279),I=n.n(T),O=n(40087),A=n.n(O),L=n(18281),M=n.n(L),P=n(90487),N=n.n(P),D=n(18408),U=n(63755),Z=n.n(U),j=n(31314),F=n(8167),B=n(69678),V=n(26305),q=n(35002);function W(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var z=function(e){(0,B.Z)(n,e);var t=W(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(function(e){(0,B.Z)(n,e);var t=W(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(D.Exception));function G(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(3===t.length)return G("@").apply(void 0,t);var r=t[0],i=t[1];return function(e,t,n){if("initialize"!==t)throw new TypeError("@persist can only currently be applied to AmpersandState objects or their derivatives and must be applied to the initialize method");n.value=S()(n.value,(function(e){for(var t=this,n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];var s=d()(e,this,o),c="@"===r?"change":"change:".concat(r);return this.on(c,I()((function(){return!i||d().apply(Reflect,[i,t].concat(o))?"@"===r?t.boundedStorage.put(r,t):t.boundedStorage.put(r,t[r]):h().resolve()}),0)),s})),Q(e,t)}}var H=M(),$=N(),K=new((0,D.make)(H,H,$));function Y(e){if(!e)throw new Error("`key` is required");return function(t,n,r){return K.add(t,n,e),r.value=S()(r.value,(function(e){for(var r=this,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=K.get(t,n);return h().all((0,_.Z)(s).map((function(e){return r.boundedStorage.waitFor(e)}))).then((function(){return d()(e,r,o)}))})),"object"!==(0,w.Z)(t)||t.prototype||(t[n]=r.value),Q(t,n),r}}var J=new(N());var X=new(N());function Q(e,t){var n=function(e){return e.namespace?e.namespace:e}(e);if(!J.has(n)){if(J.add(n),e.initialize)return void(e.initialize=S()(e.initialize,(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=d()(e,this,n);return d()(r,this,n),o})));e.initialize=r}function r(){var n=this,r=this.getNamespace();this.webex.initialize=S()(this.webex.initialize||k(),(function(i){var o=this;X.add(r);for(var a=arguments.length,s=new Array(a>1?a-1:0),c=1;c<a;c++)s[c-1]=arguments[c];d()(i,this,s);var u=A()((function(e,t){o.logger.debug("storage:(".concat(r,"): got `").concat(e,"` for first time")),"@"===e?n.parent.set((0,b.Z)({},r.toLowerCase(),t)):x()(n[e],"isState")?n[e].set(t):n.set(e,t),o.logger.debug("storage:(".concat(r,"): set `").concat(e,"` for first time"))})),l=A()((function(e,t){return t instanceof z?(o.logger.debug("storage(".concat(r,"): no data for `").concat(e,"`, continuing")),h().resolve()):(o.logger.error("storage(".concat(r,"): failed to init `").concat(e,"`"),t),h().reject(t))})),f=K.get(e,t),p=[];f.forEach((function(e){p.push(o.boundedStorage.get(r,e).then(u(e)).catch(l(e)))})),h().all(p).then((function(){X.delete(r),0===X.size&&(o.loaded=!0)}))}))}}var ee=n(2313),te=n(83977),ne=n.n(te),re=n(95366),ie=n.n(re),oe=n(18428),ae=n.n(oe),se=n(49740),ce=n.n(se),ue=new(ne());function le(e,t){var n,r,i=(n=(0,D.oneFlight)({keyFactory:function(e){return e}}),r=function(){function n(){(0,F.Z)(this,n),t.logger.debug("webex-store: constructing ".concat(e,"Storage")),ue.set(this,new(M()))}return(0,j.Z)(n,[{key:"adapter",get:function(){return t.config.storage["".concat(e,"Adapter")]}},{key:"bindings",get:function(){return ue.get(this)}},{key:"clear",value:function(){var e=[];return this.bindings.forEach((function(t){e.push(t.clear())})),h().all(e)}},{key:"del",value:function(e,n){return t.logger.debug("webex-store: removing ".concat(e,":").concat(n)),this._getBinding(e).then((function(e){return e.del(n)}))}},{key:"get",value:function(e,n){return t.logger.debug("webex-store: retrieving ".concat(e,":").concat(n)),this._getBinding(e).then((function(e){return e.get(n)}))}},{key:"put",value:function(e,n,r){return void 0===r?this.del(e,n):(t.logger.debug("webex-store: setting ".concat(e,":").concat(n)),this._getBinding(e).then((function(e){return e.put(n,r.serialize?r.serialize():r)})).then((function(){return r})))}},{key:"_getBinding",value:function(e){var n=this;return new(h())((function(r){t.logger.debug("storage: getting binding for `".concat(e,"`"));var i=n.bindings.get(e);return i?(t.logger.debug("storage: found binding for `".concat(e,"`")),r(i)):r(n.adapter.bind(e,{logger:t.logger}).then((function(r){return t.logger.debug("storage: made binding for `".concat(e,"`")),n.bindings.set(e,r),r})))}))}}]),n}(),(0,ee.Z)(r.prototype,"_getBinding",[n],ie()(r.prototype,"_getBinding"),r.prototype),r);return ae()(i.prototype,ce()),new i}var fe=n(1469),de=n.n(fe),pe=new(ne());function he(e){if(!a()(e))return e;var t=e.serialize?e.serialize():e;return l()(t).forEach((function(e){var n=t[e];de()(n)?0===n.length?t[e]=void 0:t[e]=n.map(he):a()(n)&&l()(n).forEach((function(e){n[e]=he(n[e])}))})),l()(t).reduce((function(e,n){return e&&!t[n]}),!0)?void 0:t}function ve(e,t){var n,r,i=(n=(0,D.oneFlight)({keyFactory:function(e){return"initValue-".concat(e)}}),r=function(){function n(){(0,F.Z)(this,n),pe.set(this,new(M()))}return(0,j.Z)(n,[{key:"clear",value:function(){return t.webex["".concat(e,"Storage")].del(t.getNamespace())}},{key:"del",value:function(){for(var n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=t.webex["".concat(e,"Storage")]).del.apply(n,[t.getNamespace()].concat(i))}},{key:"get",value:function(n){var r=pe.get(this).get(n);return r||(r=new D.Defer,pe.get(this).set(n,r)),t.webex["".concat(e,"Storage")].get(t.getNamespace(),n).then((function(e){return r.resolve(),e}))}},{key:"put",value:function(n,r){return t.webex["".concat(e,"Storage")].put(t.getNamespace(),n,he(r))}},{key:"waitFor",value:function(e){t.logger.debug("plugin-storage(".concat(t.getNamespace(),"): waiting to init key `").concat(e,"`"));var n=pe.get(this).get(e);return n?(t.logger.debug("plugin-storage(".concat(t.getNamespace(),"): already inited `").concat(e,"`")),n.promise):(t.logger.debug("plugin-storage(".concat(t.getNamespace(),"): initing `").concat(e,"`")),this.initValue(e))}},{key:"initValue",value:function(n){var r=new D.Defer;return pe.get(this).set(n,r),t.webex["".concat(e,"Storage")].get(t.getNamespace(),n).then((function(e){t.logger.debug("plugin-storage(".concat(t.getNamespace(),"): got `").concat(n,"` for first time")),"@"===n?t.parent.set(e):x()(t[n],"isState")?t[n].set(e):t.set(n,e),t.logger.debug("plugin-storage(".concat(t.getNamespace(),"): set `").concat(n,"` for first time")),r.resolve(),t.logger.debug("plugin-storage(".concat(t.getNamespace(),"): inited `").concat(n,"`"))})).catch((function(e){return e instanceof z?(t.logger.debug("plugin-storage(".concat(t.getNamespace(),"): no data for `").concat(n,"`, continuing")),r.resolve()):(t.logger.warn("plugin-storage(".concat(t.getNamespace(),"): failed to init `").concat(n,"`"),e),r.reject(e))})),r.promise}}]),n}(),(0,ee.Z)(r.prototype,"initValue",[n],ie()(r.prototype,"initValue"),r.prototype),r);return new i}function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=t||{},!e)return h().reject(new Error("`namespace` is required"));if(!t.logger)return h().reject(new Error("`options.logger` is required"));var n=t.logger,r=new(M())([["@",{}]]);return t.data&&l()(t.data).forEach((function(e){r.set(e,t.data[e])})),n.debug("memory-store-adapter: returning binding"),h().resolve({clear:function(){return n.debug("memory-store-adapter: clearing the binding"),h().resolve(r.clear())},del:function(e){return n.debug("memory-store-adapter: deleting `".concat(e,"`")),h().resolve(r.delete(e))},get:function(e){n.debug("memory-store-adapter: reading `".concat(e,"`"));var t=r.get(e);return void 0===t?h().reject(new z):h().resolve(t)},put:function(e,t){return n.debug("memory-store-adapter: writing `".concat(e,"`")),h().resolve(r.set(e,t))}})}const ge={bind:me,preload:function(e){return{bind:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[t]&&(n.data=e[t]),me(t,n)}}}};const ye=y().extend({derived:{boundedStorage:{deps:[],fn:function(){return ve("bounded",this)}},unboundedStorage:{deps:[],fn:function(){return ve("unbounded",this)}},config:{cache:!1,deps:["webex","webex.config"],fn:function(){if(this.webex&&this.webex.config){var e=this.getNamespace();return e?this.webex.config[e.toLowerCase()]:this.webex.config}return{}}},logger:{deps:["webex","webex.logger"],fn:function(){return this.webex.logger||console}},webex:{deps:["parent"],fn:function(){if(!this.parent&&!this.collection)throw new Error("Cannot determine `this.webex` without `this.parent` or `this.collection`. Please initialize `this` via `children` or `collection` or set `this.parent` manually");for(var e=this;e.parent||e.collection;)e=e.parent||e.collection;return e}}},session:{parent:{type:"any"},ready:{default:!0,type:"boolean"}},clear:function(e){var t=this;return l()(this.attributes).forEach((function(n){"parent"!==n&&t.unset(n,e)})),l()(this._children).forEach((function(e){t[e].clear()})),l()(this._collections).forEach((function(e){t[e].reset()})),this},initialize:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];d()(y().prototype.initialize,this,n),this._dataTypes=c()(this._dataTypes),l()(this._dataTypes).forEach((function(t){e._dataTypes[t].set&&(e._dataTypes[t].set=e._dataTypes[t].set.bind(e))})),this.on("change",(function(t,n){e.parent&&e.parent.trigger("change:".concat(e.getNamespace().toLowerCase()),e.parent,e,n)}))},inspect:function(e){return m().inspect(i()(this.serialize({props:!0,session:!0,derived:!0}),"boundedStorage","unboundedStorage","config","logger","webex","parent"),{depth:e})},request:function(){var e;return(e=this.webex).request.apply(e,arguments)},upload:function(){var e;return(e=this.webex).upload.apply(e,arguments)},when:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(r&&r.length>0)throw new Error("#when() does not accept a callback, you must attach to its promise");return new(h())((function(n){t.once(e,(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(t)}))}))},_filterSetParameters:function(e,t,n){var r;return a()(e)||null===e?(r=e,n=t):(r={})[e]=t,[r,n=n||{}]}});var be=n(62680),we=n.n(be),_e=n(6919),Ee=n.n(_e),Se=n(93364),Re=n.n(Se),xe=n(26771),Ce=n.n(xe),ke=n(66250),Te=n(98601),Ie=n.n(Te),Oe=n(36968),Ae=n.n(Oe),Le=n(82492),Me=n.n(Le),Pe=n(10928),Ne=n.n(Pe),De=n(47037),Ue=n.n(De),Ze=n(23560),je=n.n(Ze),Fe=n(27361),Be=n.n(Fe),Ve=n(66913),qe=n.n(Ve),We=n(33453),ze=n.n(We),Ge=n(8450),He=n.n(Ge),$e=n(67857),Ke=n.n($e),Ye=n(17187),Je=n(98380),Xe=n(55877),Qe=n.n(Xe);function et(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var tt=function(e){(0,B.Z)(n,e);var t=et(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"onRequest",value:function(e){var t=this;return e.headers=e.headers||{},"authorization"in e.headers||"auth"in e?(e.headers.authorization||Ke()(e.headers,"authorization"),h().resolve(e)):this.requiresCredentials(e).then((function(n){return n?t.webex.credentials.getUserToken().then((function(t){return e.headers.authorization=t.toString(),e})):e}))}},{key:"requiresCredentials",value:function(e){var t=this;if(!1===e.addAuthHeader)return h().resolve(!1);if(!this.webex.internal.services)return h().resolve(!1);var n=this.webex.internal.services,r=(n.getServiceFromUrl(e.uri||"")||{}).name,i=e.resource,o=e.uri,a=e.service||e.api;return a&&"u2c"===a||r&&"u2c"===r?i&&i.includes("limited")||o&&o.includes("limited")?h().resolve(!1):h().resolve(!0):n.validateDomains&&n.hasAllowedDomains()&&o&&n.isAllowedDomainUrl(o)?h().resolve(!0):n.waitForService({name:a,url:o}).then((function(e){return!!n.getServiceFromUrl(e)})).catch((function(e){return t.webex.logger.warn("auth-interceptor: failed to validate service exists in catalog",e),!1}))}},{key:"onResponseError",value:function(e,t){var n=this;return this.shouldAttemptReauth(t,e).then((function(r){return r&&(n.webex.logger.info("auth: received 401, attempting to reauthenticate"),t.options.headers&&Ke()(t.options.headers,"authorization"),n.webex.credentials.canRefresh)?n.webex.credentials.refresh().then((function(){return n.replay(e)})):h().reject(t)}))}},{key:"replay",value:function(e){return e.replayCount?e.replayCount+=1:e.replayCount=1,e.replayCount>this.webex.config.maxAuthenticationReplays?(this.webex.logger.error("auth: failed after ".concat(this.webex.config.maxAuthenticationReplays," replay attempts")),h().reject(new Error("Failed after ".concat(this.webex.config.maxAuthenticationReplays," replay attempts")))):(this.webex.logger.info("auth: replaying request ".concat(e.replayCount," time")),this.webex.request(e))}},{key:"shouldAttemptReauth",value:function(e,t){return t&&!1===t.shouldRefreshAccessToken?h().resolve(!1):401===e.statusCode?h().resolve(!0):h().resolve(!1)}}],[{key:"create",value:function(){return new n({webex:this})}}]),n}(Je.nK),nt=n(66130),rt=n.n(nt);function it(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var ot=function(e){(0,B.Z)(n,e);var t=it(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"onRequest",value:function(e){return e.$timings=e.$timings||{},e.$timings.networkStart=rt()(),e}},{key:"onResponse",value:function(e,t){return e.$timings.networkEnd=rt()(),t}},{key:"onResponseError",value:function(e,t){return e.$timings.networkEnd=rt()(),h().reject(t)}}],[{key:"create",value:function(e){return new n(this,e)}}]),n}(Je.nK);function at(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var st=function(e){(0,B.Z)(n,e);var t=at(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"onRequest",value:function(e){return e.noTransform?e:this.webex.transform("outbound",e)}},{key:"onResponse",value:function(e,t){return e.disableTransform?t:this.webex.transform("inbound",t)}},{key:"onResponseError",value:function(e,t){return this.webex.transform("inbound",t).then((function(e){return h().reject(e||t)}))}}],[{key:"create",value:function(){return new n({webex:this})}}]),n}(Je.nK),ct=n(66678),ut=n.n(ct);function lt(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var ft="cisco-no-http-redirect",dt="cisco-location",pt=function(e){(0,B.Z)(n,e);var t=lt(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"onRequest",value:function(e){return e&&e.uri&&"string"==typeof e.uri&&(e.uri.includes("https://idbroker")||e.uri.includes(this.webex.config.credentials.samlUrl)||e.uri.includes(this.webex.config.credentials.tokenUrl)||e.uri.includes(this.webex.config.credentials.authorizeUrl))?e:ft in e.headers?(e.headers[ft]||Ke()(e.headers,ft),e):(e.headers[ft]=!0,e.$redirectCount=e.$redirectCount||0,e)}},{key:"onResponse",value:function(e,t){if(t.headers&&t.headers[dt])return(e=ut()(e)).uri=t.headers[dt],e.$redirectCount+=1,e.$redirectCount>this.webex.config.maxAppLevelRedirects?h().reject(new Error("Maximum redirects exceeded")):this.webex.request(e);if(t.headers&&t.body&&2000002===t.body.errorCode&&t.body.location){if(e=ut()(e),this.webex.logger.warn("redirect: url redirects needed from",e.uri),t.options&&t.options.qs){var n=t.body.location.split("?");e.uri=n[0]}else e.uri=t.body.location;return this.webex.logger.warn("redirect: url redirects needed to",e.uri),e.$redirectCount+=1,e.$redirectCount>this.webex.config.maxLocusRedirects?h().reject(new Error("Maximum redirects exceeded")):this.webex.request(e)}return t}}],[{key:"create",value:function(){return new n({webex:this})}}]),n}(Je.nK);function ht(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var vt=function(e){(0,B.Z)(n,e);var t=ht(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"onRequest",value:function(e){var t=Be()(this,"webex.logger",console);try{this.webex.trigger("request:start",e)}catch(e){t.warn("event handler for request:start failed ",e)}return h().resolve(e)}},{key:"onRequestError",value:function(e,t){var n=Be()(this,"webex.logger",console);try{this.webex.trigger("request:end",e,t),this.webex.trigger("request:failure",e,t)}catch(e){n.warn("event handler for request:end failed ",e)}return h().reject(t)}},{key:"onResponse",value:function(e,t){var n=Be()(this,"webex.logger",console);try{this.webex.trigger("request:success",t.options,t)}catch(e){n.warn("event handler for request:success failed ",e)}return h().resolve(t)}},{key:"onResponseError",value:function(e,t){var n=Be()(this,"webex.logger",console);try{this.webex.trigger("request:end",e,t),this.webex.trigger("request:failure",e,t)}catch(e){n.warn("event handler for request:failure failed ",e)}return h().reject(t)}}],[{key:"create",value:function(){return new n({webex:this})}}]),n}(Je.nK),mt=n(18721),gt=n.n(mt);function yt(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var bt=function(e){(0,B.Z)(n,e);var t=yt(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"onRequest",value:function(e){var t=Be()(this,"webex.logger",console);t.info("/**********************************************************************\\ "),t.info("Request:",e.method||"GET",e.uri),t.info("WEBEX_TRACKINGID: ",Be()(e,"headers.trackingid")),gt()(e,"headers.x-trans-id")&&t.info("X-Trans-ID: ",Be()(e,"headers.x-trans-id"));var n=new Date;if({ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.ENABLE_VERBOSE_NETWORK_LOGGING){t.info("timestamp (start): ",n.getTime(),n.toISOString());try{e.body&&e.body.length&&!de()(e.body)&&!Ue()(e.body)?t.info("Request Options:",m().inspect(i()(e,"body"),{depth:null})):t.info("Request Options:",m().inspect(e,{depth:null}))}catch(e){t.warn("Could not stringify request options:",e)}}return h().resolve(e)}},{key:"onRequestError",value:function(e,t){this.onRequest(e);var n=Be()(this,"webex.logger",console);return n.error("Request Failed: ",t.stack),n.info("\\**********************************************************************/"),h().reject(t)}}],[{key:"create",value:function(){return new n({webex:this})}}]),n}(Je.nK);function wt(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var _t=function(e){(0,B.Z)(n,e);var t=wt(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"onRequest",value:function(e){return e.$timings=e.$timings||{},e.$timings.requestStart=rt()(),e}},{key:"onRequestError",value:function(e){return e.$timings.requestEnd=e.$timings.requestFail=rt()(),h().reject(e)}},{key:"onResponse",value:function(e,t){return e.$timings.requestEnd=rt()(),h().resolve(t)}},{key:"onResponseError",value:function(e,t){return e.$timings.requestEnd=e.$timings.requestFail=rt()(),h().reject(t)}}],[{key:"create",value:function(e){return new n(this,e)}}]),n}(Je.nK);function Et(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var St=function(e){(0,B.Z)(n,e);var t=Et(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"onResponse",value:function(e,t){var n=new Date;this.printResponseHeader(e,t);var r=Be()(this,"webex.logger",console);if({ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.ENABLE_VERBOSE_NETWORK_LOGGING)if(r.info("timestamp (end): ",n.getTime(),n.toISOString()),"string"==typeof t.body||(0,D.isBuffer)(t.body))r.info("Response: ","Not printed, it`s probably a file");else if("object"===(0,w.Z)(t.body))try{r.info("Response: ",m().inspect(i()(t.body,"features"),{depth:null}))}catch(e){r.info("Response: ","[Not Serializable]",e)}return r.info("\\**********************************************************************/"),t}},{key:"onResponseError",value:function(e,t){var n=new Date;this.printResponseHeader(e,t);var r=Be()(this,"webex.logger",console);if({ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.ENABLE_VERBOSE_NETWORK_LOGGING){r.info("timestamp (end): ",n.getTime(),n.toISOString());try{r.error("Response: ",m().inspect(t.body,{depth:null}))}catch(e){r.error("Response: ",t.body)}}return r.info("\\**********************************************************************/"),h().reject(t)}},{key:"printResponseHeader",value:function(e,t){var n=Be()(this,"webex.logger",console);n.info("Status Code:",t.statusCode),n.info("WEBEX_TRACKINGID:",Be()(e,"headers.trackingid")||Be()(t,"headers.trackingid")),n.info("Network duration:",e.$timings.networkEnd-e.$timings.networkStart),n.info("Processing duration:",e.$timings.requestEnd-e.$timings.requestStart)}}],[{key:"create",value:function(){return new n({webex:this})}}]),n}(Je.nK),Rt=n(79873),xt=n.n(Rt);function Ct(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var kt=function(e){(0,B.Z)(n,e);var t=Ct(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"parse",value:function(e){var t=d()(Je.oo.prototype.parse,this,[e]);return xt()(this,"options",{enumerable:!1,value:e.options}),this.options.url?t+="\n".concat(this.options.method," ").concat(this.options.url):this.options.uri?t+="\n".concat(this.options.method," ").concat(this.options.uri):t+="\n".concat(this.options.method," ").concat(this.options.service.toUpperCase(),"/").concat(this.options.resource),t+="\nWEBEX_TRACKING_ID: ".concat(this.options.headers.trackingid),this.options.headers&&this.options.headers["x-trans-id"]&&(t+="\nX-Trans-Id: ".concat(this.options.headers["x-trans-id"])),this.headers["retry-after"]&&(xt()(this,"retryAfter",{enumerable:!0,value:this.headers["retry-after"],writeable:!1}),t+="\nRETRY-AFTER: ".concat(this.retryAfter)),t+="\n"}}]),n}(Je.oo);Je.oo.makeSubTypes(kt);var Tt=function(e){(0,B.Z)(n,e);var t=Ct(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(Je.oo.BadRequest);Je.oo[429]=Tt,Je.oo.TooManyRequests=Tt;var It=n(23710);function Ot(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var At=new(ne()),Lt=function(e){(0,B.Z)(n,e);var t=Ot(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,F.Z)(this,n);var i=Be()(r,"webex.config.appName"),o=Be()(r,"webex.config.appVersion")||"0.0";return e=t.call(this,r),i?At.set((0,It.Z)(e),"".concat(i,"/").concat(o)):At.set((0,It.Z)(e),"@webex/http-core"),e}return(0,j.Z)(n,[{key:"onRequest",value:function(e){return D.inBrowser?e:(e.headers=e.headers||{},"user-agent"in e.headers&&e.headers["spark-user-agent"]||(e.headers["user-agent"]=At.get(this)),e)}}],[{key:"create",value:function(){return new n({webex:this})}}]),n}(Je.nK);function Mt(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var Pt=new(ne()),Nt=function(e){(0,B.Z)(n,e);var t=Mt(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"sequence",get:function(){var e=Pt.get(this)||0;return e+=1,Pt.set(this,e),e}},{key:"onRequest",value:function(e){if(e.headers=e.headers||{},"trackingid"in e.headers)return e.headers.trackingid||Ke()(e.headers,"trackingid"),e;if(this.requiresTrackingId(e)&&(e.headers.trackingid="".concat(this.webex.sessionId,"_").concat(this.sequence)),e.headers.trackingid&&e.replayCount){var t=e.headers.trackingid.split("+");t[1]=e.replayCount,e.headers.trackingid=t.join("+")}return e}},{key:"requiresTrackingId",value:function(e){return!e.headers.trackingid}}],[{key:"create",value:function(){return new n({webex:this})}}]),n}(Je.nK);function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var Ut=new(ne()),Zt=function(e){(0,B.Z)(n,e);var t=Dt(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,F.Z)(this,n);var i=Be()(r,"webex.webex",!1)?"webex":"webex-js-sdk",o=Be()(r,"webex.version","development");return e=t.call(this,r),Ut.set((0,It.Z)(e),"".concat(i,"/").concat(o," (").concat(D.inBrowser?"web":"node",")")),e}return(0,j.Z)(n,[{key:"onRequest",value:function(e){var t,n;e.headers=e.headers||{};var r=null!==(t=null===(n=this.webex)||void 0===n?void 0:n.config)&&void 0!==t?t:{},i=r.appName,o=r.appVersion,a=r.appPlatform,s="".concat(Ut.get(this));return i&&(s+=" ".concat(i,"/").concat(null!=o?o:"0.0")),a&&(s+=" ".concat(a)),e.uri&&e.uri.includes("https://idbroker")||e.uri&&(e.uri.includes(this.webex.config.credentials.samlUrl)||e.uri.includes(this.webex.config.credentials.tokenUrl)||e.uri.includes(this.webex.config.credentials.authorizeUrl))?e:"spark-user-agent"in e.headers?(e.headers["spark-user-agent"]||Ke()(e.headers,"spark-user-agent"),e):(e.headers["spark-user-agent"]=s,e)}}],[{key:"create",value:function(){return new n({webex:this})}}]),n}(Je.nK);function jt(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var Ft=new(ne()),Bt=/.*(idbroker|identity)(bts)?.ciscospark.com\/([^/]+)/,Vt=function(e){(0,B.Z)(n,e);var t=jt(n);function n(){var e;(0,F.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i)),Ft.set((0,It.Z)(e),new(M())),e}return(0,j.Z)(n,[{key:"onRequest",value:function(e){return this.isRateLimited(e.uri)?h().reject(new Error("API rate limited ".concat(e.uri))):h().resolve(e)}},{key:"onResponseError",value:function(e,t){return 429===t.statusCode&&(e.uri.includes("idbroker")||e.uri.includes("identity"))&&this.setRateLimitExpiry(e.uri,this.extractRetryAfterTime(e)),h().reject(t)}},{key:"extractRetryAfterTime",value:function(e){var t=1e3,n=e.headers["retry-after"]||null;return null===n||n<=0?6e4:n>3600?36e5:n*t}},{key:"setRateLimitExpiry",value:function(e,t){var n=this.getApiName(e);if(!n)return!1;var r=(new Date).getTime()+t;return Ft.get(this).set(n,r)}},{key:"getRateLimitStatus",value:function(e){var t=this.getApiName(e);if(!t)return!1;var n=(new Date).getTime(),r=Ft.get(this);return void 0!==r.get(t)&&n<r.get(t)}},{key:"getApiName",value:function(e){if(!e)return null;var t=e.match(Bt);return t?t[2]:null}},{key:"isRateLimited",value:function(e){return!(!e||!e.includes("idbroker")&&!e.includes("identity"))&&this.getRateLimitStatus(e)}}],[{key:"create",value:function(){return new n({webex:this})}}]),n}(Je.nK);function qt(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var Wt=function(e){(0,B.Z)(n,e);var t=qt(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"onResponseError",value:function(e,t){if(451===t.statusCode){var n=this.webex.internal.device,r=["Received `HTTP 451 Unavailable For Legal Reasons`, ","discarding credentials and device registration"].join("");n&&this.webex.internal.device.clear(),this.webex.credentials.clear(),this.webex.logger.info(r)}return h().reject(t)}}],[{key:"create",value:function(){return new n({webex:this})}}]),n}(Je.nK);function zt(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var Gt=function(e){(0,B.Z)(n,e);var t=zt(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"onRequest",value:function(e){var t=this.webex.config.defaultRequestOptions;return t?(l()(t).forEach((function(n){l()(e).includes(n)||(e[n]=t[n])})),e):e}}],[{key:"create",value:function(){return new n({webex:this})}}]),n}(Je.nK);const Ht={maxAppLevelRedirects:10,maxLocusRedirects:5,maxAuthenticationReplays:1,maxReconnectAttempts:1,onBeforeLogout:[],trackingIdPrefix:"webex-js-sdk",trackingIdSuffix:"",AlternateLogger:void 0,credentials:new(y().extend({extraProperties:"allow",props:{idbroker:["object",!1,function(){return{url:"https://idbroker.webex.com"}}],identity:["object",!1,function(){return{url:"https://identity.webex.com"}}],authorizationString:["string",!1,{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.WEBEX_AUTHORIZATION_STRING||{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.AUTHORIZATION_STRING],authorizeUrl:["string",!1,{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.WEBEX_AUTHORIZE_URL||"".concat("https://idbroker.webex.com","/idb/oauth2/v1/authorize")],client_id:["string",!1,{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.WEBEX_CLIENT_ID||{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.COMMON_IDENTITY_CLIENT_ID||{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.CLIENT_ID],client_secret:["string",!1,{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.WEBEX_CLIENT_SECRET||{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.COMMON_IDENTITY_CLIENT_SECRET||{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.CLIENT_SECRET],redirect_uri:["string",!1,{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.WEBEX_REDIRECT_URI||{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.COMMON_IDENTITY_REDIRECT_URI||{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.REDIRECT_URI],scope:["string",!1,{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.WEBEX_SCOPE||{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.WEBEX_SCOPES||{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.COMMON_IDENTITY_SCOPE||{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.SCOPE],cisService:["string",!1,"webex"]},derived:{activationUrl:{deps:["idbroker.url"],fn:function(){return"".concat(this.idbroker.url||"https://idbroker.webex.com","/idb/token/v1/actions/UserActivation/invoke")},cache:!1},generateOtpUrl:{deps:["idbroker.url"],fn:function(){return"".concat(this.idbroker.url||"https://idbroker.webex.com","/idb/token/v1/actions/UserOTP/Generate/invoke")},cache:!1},validateOtpUrl:{deps:["idbroker.url"],fn:function(){return"".concat(this.idbroker.url||"https://idbroker.webex.com","/idb/token/v1/actions/UserOTP/Validate/invoke")},cache:!1},tokenUrl:{deps:["idbroker.url"],fn:function(){return{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.TOKEN_URL||"".concat(this.idbroker.url,"/idb/oauth2/v1/access_token")},cache:!1},revokeUrl:{deps:["idbroker.url"],fn:function(){return{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.REVOKE_URL||"".concat(this.idbroker.url,"/idb/oauth2/v1/revoke")},cache:!1},logoutUrl:{deps:["idbroker.url"],fn:function(){return"".concat(this.idbroker.url,"/idb/oauth2/v1/logout")},cache:!1},setPasswordUrl:{deps:["identity.url"],fn:function(){return"".concat(this.identity.url||"https://identity.webex.com","/identity/scim/v1/Users")},cache:!1}}})),fedramp:{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.ENABLE_FEDRAMP||!1,services:{discovery:{hydra:"https://api.ciscospark.com/v1",u2c:"https://u2c.wbx2.com/u2c/api/v1"},validateDomains:!0,servicesNotNeedValidation:["webex-appapi-service"],allowedDomains:["wbx2.com","ciscospark.com","webex.com","webexapis.com","broadcloudpbx.com","broadcloud.eu","broadcloud.com.au","broadcloudpbx.net"]},device:{preDiscoveryServices:{hydra:"https://api.ciscospark.com/v1",hydraServiceUrl:"https://api.ciscospark.com/v1"},validateDomains:!0},metrics:{type:["behavioral","operational"]},payloadTransformer:{predicates:[],transforms:[]},storage:{boundedAdapter:ge,unboundedAdapter:ge}};var $t=n(93386),Kt=n.n($t);function Yt(e,t,n){(e._derived[t]={fn:je()(n)?n:n.fn,cache:!1!==n.cache,depList:n.deps||[]}).depList.forEach((function(n){e._deps[n]=Kt()(e._deps[n]||[],[t])})),xt()(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError("`".concat(t,"` is a derived property, it can't be set directly."))}})}const Jt=y().extend({derived:{ready:{deps:[],fn:function(){var e=this;return l()(this._children).reduce((function(t,n){return t&&e[n]&&!1!==e[n].ready}),!0)}}},inspect:function(e){return m().inspect(this.serialize({props:!0,session:!0,derived:!0}),{depth:e})}});var Xt,Qt=n(34155);function en(e,t){var n=l()(e);if(we()){var r=we()(e);t&&(r=r.filter((function(t){return ie()(e,t).enumerable}))),n.push.apply(n,r)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Ee()?Re()(e,Ee()(n)):en(Object(n)).forEach((function(t){Ce()(e,t,ie()(n,t))}))}return e}var nn={WebexTrackingIdInterceptor:Nt.create,RequestEventInterceptor:vt.create,RateLimitInterceptor:Vt.create,RequestLoggerInterceptor:{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.ENABLE_NETWORK_LOGGING||{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.ENABLE_VERBOSE_NETWORK_LOGGING?bt.create:void 0,ResponseLoggerInterceptor:{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.ENABLE_NETWORK_LOGGING||{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.ENABLE_VERBOSE_NETWORK_LOGGING?St.create:void 0,RequestTimingInterceptor:_t.create,ServiceInterceptor:void 0,UserAgentInterceptor:Lt.create,WebexUserAgentInterceptor:Zt.create,AuthInterceptor:tt.create,KmsDryErrorInterceptor:void 0,PayloadTransformerInterceptor:st.create,ConversationInterceptor:void 0,RedirectInterceptor:pt.create,HttpStatusInterceptor:function(){return Je.ve.create({error:kt})},NetworkTimingInterceptor:ot.create,EmbargoInterceptor:Wt.create,DefaultOptionsInterceptor:Gt.create},rn=["ResponseLoggerInterceptor","RequestTimingInterceptor","RequestEventInterceptor","WebexTrackingIdInterceptor","RateLimitInterceptor"],on=["HttpStatusInterceptor","NetworkTimingInterceptor","EmbargoInterceptor","RequestLoggerInterceptor","RateLimitInterceptor"],an=y().extend((Xt={version:"2.54.2",children:{internal:Jt},constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"string"==typeof e?e={credentials:{supertoken:{access_token:e}}}:(["credentials.authorization","authorization","credentials.supertoken.supertoken","supertoken","access_token","credentials.authorization.supertoken"].forEach((function(t){var n=Be()(e,t);n&&(Ie()(e,t),Ae()(e,"credentials.supertoken",n))})),["credentials","credentials.authorization"].forEach((function(t){var n=Be()(e,t);"string"==typeof n&&(Ie()(e,t),Ae()(e,"credentials.supertoken",n))})),"string"==typeof Be()(e,"credentials.access_token")&&(Ae()(e,"credentials.access_token",this.bearerValidator(Be()(e,"credentials.access_token").trim())),Ae()(e,"credentials.supertoken",e.credentials))),d()(y(),this,[e,t])},derived:{boundedStorage:{deps:[],fn:function(){return le("bounded",this)}},unboundedStorage:{deps:[],fn:function(){return le("unbounded",this)}},ready:{deps:["loaded","internal.ready"],fn:function(){var e=this;return this.loaded&&l()(this._children).reduce((function(t,n){return t&&e[n]&&!1!==e[n].ready}),!0)}}},session:{config:{type:"object"},loaded:{default:!1,type:"boolean"},request:{setOnce:!0,type:"any"},sessionId:{setOnce:!0,type:"string"}},refresh:function(){var e;return(e=this.credentials).refresh.apply(e,arguments)},transform:function(e,t){var n=this,r=this.config.payloadTransformer.predicates.filter((function(t){return!t.direction||t.direction===e})),i={webex:this};return h().all(r.map((function(e){return e.test(i,t).then((function(n){if(n)return e.extract(t).then((function(t){return{name:e.name,target:t}}))}))}))).then((function(t){return t.filter((function(e){return Boolean(e)})).reduce((function(t,r){var i=r.name,o=r.target,a=r.alias;return t.then((function(){return a?n.applyNamedTransform(e,a,o):n.applyNamedTransform(e,i,o)}))}),h().resolve())})).then((function(){return t}))},applyNamedTransform:function(e,t,n){for(var r=this,i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return Ue()(t)&&(o.unshift(n),n=t,t={webex:this,transform:function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return r.applyNamedTransform.apply(r,[e,t].concat(i))}}),t.webex.config.payloadTransformer.transforms.filter((function(t){return t.name===n&&(!t.direction||t.direction===e)})).reduce((function(e,n){return e.then((function(){var e;return n.alias?(e=t).transform.apply(e,[n.alias].concat(o)):h().resolve(n.fn.apply(n,[t].concat(o)))}))}),h().resolve()).then((function(){return Ne()(o)}))},getWindow:function(){return window},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=Me()({},Ht,t.config),this.trigger("change:config");var n=function t(){e.loaded&&(e.trigger("loaded"),e.stopListening(e,"change:loaded",t))};Qt.nextTick((function(){e.listenToAndRun(e,"change:loaded",n)}));var r=function t(){e.ready&&(e.trigger("ready"),e.stopListening(e,"change:ready",t))};Qt.nextTick((function(){e.listenToAndRun(e,"change:ready",r)})),l()(this.constructor.prototype._children).forEach((function(t){e.listenTo(e[t],"change",(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.unshift("change:".concat(t)),e.trigger.apply(e,r)}))}));var i=function(t,n){var r=nn[n];return je()(r)?(t.push(d()(r,e,[])),t):t},o=[];o=rn.reduce(i,o),o=l()(nn).filter((function(e){return!(rn.includes(e)||on.includes(e))})).reduce(i,o),o=on.reduce(i,o),this.request=(0,Je.ce)({json:!0,interceptors:o});var a="".concat(Be()(this,"config.trackingIdPrefix","webex-js-sdk"),"_").concat(Be()(this,"config.trackingIdBase",Qe().v4()));Be()(this,"config.trackingIdSuffix")&&(a+="_".concat(Be()(this,"config.trackingIdSuffix"))),this.sessionId=a},setConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=Me()({},this.config,e)},bearerValidator:function(e){return e.includes("Bearer")&&e.split(" ").length-1==0?(console.warn("Your access token does not have a space between 'Bearer' and the token, please add a space to it or replace it with this already fixed version:\n\n".concat(e.replace("Bearer","Bearer ").replace(/\s+/g," "))),console.info("Tip: You don't need to add 'Bearer' to the access_token field. The token by itself is fine"),e.replace("Bearer","Bearer ").replace(/\s+/g," ")):e.split(" ").length-1>1?(console.warn("Your access token has ".concat(e.split(" ").length-2," too many spaces, please use this format:\n\n").concat(e.replace(/\s+/g," "))),console.info("Tip: You don't need to add 'Bearer' to the access_token field, the token by itself is fine"),e.replace(/\s+/g," ")):e.replace(/\s+/g," ")},inspect:function(e){return m().inspect(i()(this.serialize({props:!0,session:!0,derived:!0}),"boundedStorage","unboundedStorage","request","config"),{depth:e})},logout:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=this.credentials.supertoken&&(this.credentials.supertoken.refresh_token||this.credentials.supertoken.access_token);return e=ae()({token:o},e),this.config.onBeforeLogout.reverse().reduce((function(n,i){var o=i.plugin,a=i.fn;return n.then((function(){return h().resolve(d()(a,t[o]||t.internal[o],[e].concat(r))).catch((function(e){t.logger.warn("onBeforeLogout from plugin ".concat(o,": failed"),e)}))}))}),h().resolve()).then((function(){return h().all([t.boundedStorage.clear(),t.unboundedStorage.clear()])})).then((function(){var e;return(e=t.credentials).invalidate.apply(e,r)})).then((function(){var n;return t.authorization&&t.authorization.logout&&(n=t.authorization).logout.apply(n,[e].concat(r))})).then((function(){return t.trigger("client:logout")}))},measure:function(){var e;return this.metrics?(e=this.metrics).sendUnstructured.apply(e,arguments):h().resolve()},upload:function(e){var t=this;return(0,ke.Z)(ze().mark((function n(){var r,o;return ze().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.file){n.next=2;break}return n.abrupt("return",h().reject(new Error("`options.file` is required")));case 2:return e.phases=e.phases||{},e.phases.initialize=e.phases.initialize||{},e.phases.upload=e.phases.upload||{},e.phases.finalize=e.phases.finalize||{},qe()(e.phases.initialize,{method:"POST",body:{uploadProtocol:"content-length"}},i()(e,"file","phases")),qe()(e.phases.upload,{method:"PUT",json:!1,withCredentials:!1,body:e.file,headers:{"x-trans-id":Qe().v4(),authorization:void 0}}),qe()(e.phases.finalize,{method:"POST"},i()(e,"file","phases")),r=new Ye.EventEmitter,o=t._uploadPhaseInitialize(e).then((function(){var n=t._uploadPhaseUpload(e);return(0,D.transferEvents)("progress",n,r),n})).then((function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t._uploadPhaseFinalize.apply(t,[e].concat(r))})).then((function(e){return tn(tn({},e.body),e.headers)})),(0,D.proxyEvents)(r,o),n.abrupt("return",o);case 13:case"end":return n.stop()}}),n)})))()},_uploadPhaseInitialize:function(e){var t=this;return this.logger.debug("client: initiating upload session"),this.request(e.phases.initialize).then((function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=1024*(r[0].body.fileUploadSizeLimit||2048)*1024,a=e.file.byteLength;return o&&o<a?t._uploadAbortSession.apply(t,[a].concat(r)):t._uploadApplySession.apply(t,[e].concat(r))})).then((function(e){return t.logger.debug("client: initiated upload session"),e}))},_uploadAbortSession:function(e,t){var n=this;return this.logger.debug("client: deleting uploaded file"),this.request({method:"DELETE",url:t.body.url,headers:t.options.headers}).then((function(){n.logger.debug("client: deleting uploaded file complete");var r={currentFileSizeInBytes:e,fileUploadSizeLimitInMB:t.body.fileUploadSizeLimit||2048,message:"file-upload-size-limit-enabled"};return h().reject(new Error("".concat(He()(r))))}))},_uploadApplySession:function(e,t){var n=t.body;["upload","finalize"].reduce((function(e,t){return e[t]=l()(e[t]).reduce((function(e,t){return t.startsWith("$")&&(e[t.substr(1)]=e[t](n),Ke()(e,t)),e}),e[t]),e}),e.phases)},_uploadPhaseUpload:function(e){var t=this;this.logger.debug("client: uploading file");var n=this.request(e.phases.upload).then((function(e){return t.logger.debug("client: uploaded file"),e}));return(0,D.proxyEvents)(e.phases.upload.upload,n),n},_uploadPhaseFinalize:function(e){var t=this;return this.logger.debug("client: finalizing upload session"),this.request(e.phases.finalize).then((function(e){return t.logger.debug("client: finalized upload session"),e}))}},(0,ee.Z)(Xt,"_uploadPhaseUpload",[D.retry],ie()(Xt,"_uploadPhaseUpload"),Xt),Xt));an.version="2.54.2",function(e,t,n){e.registerPlugin=function(r,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.prototype._children[r]||o.replace){if(e.prototype._children[r]=i,o.proxies)throw new Error("Proxies are not currently supported for private plugins");if(o.interceptors&&l()(o.interceptors).forEach((function(e){n[e]=o.interceptors[e]})),o.config&&Me()(t,o.config),gt()(o,"payloadTransformer.predicates")&&(t.payloadTransformer.predicates=t.payloadTransformer.predicates.concat(Be()(o,"payloadTransformer.predicates"))),gt()(o,"payloadTransformer.transforms")&&(t.payloadTransformer.transforms=t.payloadTransformer.transforms.concat(Be()(o,"payloadTransformer.transforms"))),o.onBeforeLogout)t.onBeforeLogout=t.onBeforeLogout||[],(de()(o.onBeforeLogout)?o.onBeforeLogout:[o.onBeforeLogout]).forEach((function(e){return t.onBeforeLogout.push({plugin:r,fn:e})}));if(i.prototype._definition&&i.prototype._definition.ready){var a=e.prototype._derived.ready,s=a.fn,c={deps:a.depList.concat("".concat(r,".ready")),fn:s};!function(e,t,n){var r=e._derived[t]={fn:je()(n)?n:n.fn,cache:!1!==n.cache,depList:n.deps||[]};r.depList.forEach((function(n){e._deps[n]=Kt()(e._deps[n]||[],[t])})),xt()(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError("`".concat(t,"` is a derived property, it can't be set directly."))}})}(e.prototype,"ready",c)}}}}(Jt,Ht,nn),function(e,t,n){e.registerPlugin=function(r,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.prototype._children[r]||o.replace){if(e.prototype._children[r]=i,o.proxies&&o.proxies.forEach((function(t){Yt(e.prototype,t,{deps:["".concat(r,".").concat(t)],fn:function(){return this[r][t]}})})),o.interceptors&&l()(o.interceptors).forEach((function(e){n[e]=o.interceptors[e]})),o.config&&Me()(t,o.config),gt()(o,"payloadTransformer.predicates")&&(t.payloadTransformer.predicates=t.payloadTransformer.predicates.concat(Be()(o,"payloadTransformer.predicates"))),gt()(o,"payloadTransformer.transforms")&&(t.payloadTransformer.transforms=t.payloadTransformer.transforms.concat(Be()(o,"payloadTransformer.transforms"))),o.onBeforeLogout)t.onBeforeLogout=t.onBeforeLogout||[],(de()(o.onBeforeLogout)?o.onBeforeLogout:[o.onBeforeLogout]).forEach((function(e){return t.onBeforeLogout.push({plugin:r,fn:e})}));if(i.prototype._definition&&i.prototype._definition.ready){var a=e.prototype._derived.ready,s=a.fn,c={deps:a.depList.concat("".concat(r,".ready")),fn:s};Yt(e.prototype,"ready",c)}}}}(an,Ht,nn);const sn=an;function cn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};an.registerPlugin(e,t,n)}function un(e,t,n){Jt.registerPlugin(e,t,n)}var ln={error:["log"],warn:["error","log"],info:["log"],debug:["info","log"],trace:["debug","info","log"]};function fn(e){var t=ln[e];if(t)for(t=t.slice();!console[e];)e=t.pop();return function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console)[e].apply(t,r)}}var dn=ye.extend({namespace:"Logger",error:fn("error"),warn:fn("warn"),log:fn("log"),info:fn("info"),debug:fn("debug"),trace:fn("trace"),version:"2.54.2"});cn("logger",dn);var pn=n(41609),hn=n.n(pn),vn=n(17673),mn=n(8575),gn=n(49704),yn=n.n(gn),bn=n(67431);function wn(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var _n=function(e){(0,B.Z)(n,e);var t=wn(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"parse",value:function(e){var t=e.body||e;return Re()(this,{error:{enumerable:!0,value:t.error},errorDescription:{enumerable:!0,value:t.error_description},errorUri:{enumerable:!0,value:t.error_uri},res:{enumerable:!1,value:e}}),this.errorDescription}}]),n}(D.Exception),En=function(e){(0,B.Z)(n,e);var t=wn(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(_n),Sn=function(e){(0,B.Z)(n,e);var t=wn(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(_n),Rn=function(e){(0,B.Z)(n,e);var t=wn(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(_n),xn=function(e){(0,B.Z)(n,e);var t=wn(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(_n),Cn=function(e){(0,B.Z)(n,e);var t=wn(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(_n),kn=function(e){(0,B.Z)(n,e);var t=wn(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n)}(_n),Tn={OAuthError:_n,InvalidRequestError:En,InvalidClientError:Sn,InvalidGrantError:Rn,UnauthorizedClientError:xn,UnsupportGrantTypeError:Cn,InvalidScopeError:kn,invalid_request:En,invalid_client:Sn,invalid_grant:Rn,unauthorized_client:xn,unsupported_grant_type:Cn,invalid_scope:kn,select:function(e){return Tn[e]||_n}};const In=Tn;function On(e){return e?e.split(" ").sort().join(" "):""}var An,Ln,Mn=n(14917),Pn=n(78718),Nn=n.n(Pn);function Dn(e,t){var n=l()(e);if(we()){var r=we()(e);t&&(r=r.filter((function(t){return ie()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Ee()?Re()(e,Ee()(n)):Dn(Object(n)).forEach((function(t){Ce()(e,t,ie()(n,t))}))}return e}function Zn(e){if(400!==e.statusCode)return h().reject(e);var t=In.select(e.body.error);return t===_n&&e instanceof kt?h().reject(e):t?h().reject(new t(e._res||e)):h().reject(e)}var jn=ye.extend((An=(0,D.oneFlight)({keyFactory:function(e){return e}}),Ln={derived:{canAuthorize:{deps:["access_token","isExpired"],fn:function(){return!!this.access_token&&!this.isExpired}},canDownscope:{deps:["canAuthorize"],fn:function(){return this.canAuthorize&&!!this.config.client_id}},canRefresh:{deps:["refresh_token"],fn:function(){return D.inBrowser?!!this.refresh_token&&!!this.config.refreshCallback:!!this.refresh_token&&!!this.config.client_secret}},isExpired:{deps:["expires","_isExpired"],fn:function(){return!!this.expires&&this._isExpired}},_string:{deps:["access_token","token_type"],fn:function(){return this.access_token&&this.token_type?"".concat(this.token_type," ").concat(this.access_token):""}}},namespace:"Credentials",props:{scope:"string",access_token:"string",expires:"number",expires_in:"number",refresh_token:"string",refresh_token_expires:"number",refresh_token_expires_in:"number",token_type:{default:"Bearer",type:"string"}},session:{_isExpired:{default:!1,type:"boolean"},previousToken:{type:"state"}},downscope:function(e){var t=this;return this.logger.info("token: downscoping token to ".concat(e)),this.isExpired?(this.logger.info("token: request received to downscope expired access_token"),h().reject(new Error("cannot downscope expired access token"))):this.canDownscope?(e&&(e=On(e)),e===On(this.config.scope)?h().reject(new Error("token: scope reduction requires a reduced scope")):this.webex.request({method:"POST",uri:this.config.tokenUrl,addAuthHeader:!1,form:{grant_type:"urn:cisco:oauth:grant-type:scope-reduction",token:this.access_token,scope:e,client_id:this.config.client_id,self_contained_token:!0}}).then((function(n){return t.logger.info("token: downscoped token to ".concat(e)),new jn(ae()(n.body,{scope:e}),{parent:t.parent})}))):(this.config.client_id?this.logger.info("token: request received to downscope invalid access_token"):this.logger.trace("token: cannot downscope without client_id"),h().reject(new Error("cannot downscope access token")))},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(d()(ye.prototype.initialize,this,[t,n]),"string"==typeof t&&(this.access_token=t),!this.access_token)throw new Error("`access_token` is required");this.expires&&(this.expires<rt()()?this._isExpired=!0:(0,bn.L)((function(){e._isExpired=!0}),this.expires-rt()()))},refresh:function(){var e,t=this;if(!this.canRefresh)throw new Error("Not enough information available to refresh this access token");if(D.inBrowser){if(!this.config.refreshCallback)throw new Error("Cannot refresh access token without refreshCallback");e=h().resolve(this.config.refreshCallback(this.webex,this))}return(e||this.webex.request({method:"POST",uri:this.config.tokenUrl,form:{grant_type:"refresh_token",redirect_uri:this.config.redirect_uri,refresh_token:this.refresh_token},auth:{user:this.config.client_id,pass:this.config.client_secret,sendImmediately:!0},shouldRefreshAccessToken:!1}).then((function(e){return e.body}))).then((function(e){if(!e)throw new Error("token: refreshCallback() did not produce an object");return e.refresh_token||ae()(e,Nn()(t,"refresh_token","refresh_token_expires","refresh_token_expires_in")),t.access_token===e.access_token?(t.logger.error("token: new token matches current token"),h().reject(new Error("new token matches current token"))):(t.previousToken&&(t.previousToken.revoke(),t.unset("previousToken")),e.previousToken=t,e.scope=t.scope,new jn(e,{parent:t.parent}))})).catch(Zn)},revoke:function(){var e=this;return this.isExpired?(this.logger.info("token: already expired, not making making revocation request"),h().resolve()):this.canAuthorize?this.config.client_secret?(this.logger.info("token: revoking access token"),this.webex.request({method:"POST",uri:this.config.revokeUrl,form:{token:this.access_token,token_type_hint:"access_token"},auth:{user:this.config.client_id,pass:this.config.client_secret,sendImmediately:!0},shouldRefreshAccessToken:!1}).then((function(){e.unset(["access_token","expires","expires_in","token_type"]),e.logger.info("token: access token revoked")})).catch(Zn)):(this.logger.info("token: no client secret available, not making revocation request"),h().resolve()):(this.logger.info("token: no longer valid, not making revocation request"),h().resolve())},set:function(){var e=this._filterSetParameters.apply(this,arguments),t=(0,Mn.Z)(e,2),n=t[0],r=t[1];if(!n.token_type&&n.access_token&&n.access_token.includes(" ")){var i=n.access_token.split(" "),o=(0,Mn.Z)(i,2),a=o[0],s=o[1];n=Un(Un({},n),{},{access_token:s,token_type:a})}var c=rt()();return!n.expires&&n.expires_in&&(n.expires=c+1e3*n.expires_in),!n.refresh_token_expires&&n.refresh_token_expires_in&&(n.refresh_token_expires=c+1e3*n.refresh_token_expires_in),n.scope&&(n.scope=On(n.scope)),d()(ye.prototype.set,this,[n,r])},toString:function(){if(!this._string)throw new Error("cannot stringify Token");return this._string},validate:function(){throw new Error("Token#validate() must not be used in production")},version:"2.54.2"},(0,ee.Z)(Ln,"downscope",[An],ie()(Ln,"downscope"),Ln),(0,ee.Z)(Ln,"refresh",[D.oneFlight],ie()(Ln,"refresh"),Ln),(0,ee.Z)(Ln,"revoke",[D.oneFlight],ie()(Ln,"revoke"),Ln),Ln));const Fn=jn;var Bn=n(90765);const Vn=n.n(Bn)().extend({mainIndex:"scope",model:Fn,namespace:"Credentials"});var qn,Wn,zn,Gn,Hn,$n,Kn;function Yn(e,t){var n=l()(e);if(we()){var r=we()(e);t&&(r=r.filter((function(t){return ie()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Ee()?Re()(e,Ee()(n)):Yn(Object(n)).forEach((function(t){Ce()(e,t,ie()(n,t))}))}return e}cn("credentials",ye.extend((qn=(0,D.oneFlight)({keyFactory:function(e){return e}}),Wn=Y("@"),zn=G("@"),Gn=Y("@"),Hn=(0,D.whileInFlight)("isRefreshing"),$n=Y("@"),Kn={collections:{userTokens:Vn},dataTypes:{token:(0,D.makeStateDataType)(Fn,"token").dataType},derived:{canAuthorize:{deps:["supertoken","supertoken.canAuthorize","canRefresh"],fn:function(){return Boolean(this.supertoken&&this.supertoken.canAuthorize||this.canRefresh)}},canRefresh:{deps:["supertoken","supertoken.canRefresh"],fn:function(){return!!this.config.jwtRefreshCallback||Boolean(this.supertoken&&this.supertoken.canRefresh)}}},props:{supertoken:(0,D.makeStateDataType)(Fn,"token").prop},namespace:"Credentials",session:{isRefreshing:{default:!1,type:"boolean"},ready:{default:!1,type:"boolean"},refreshTimer:{default:void 0,type:"any"}},buildLoginUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clientType:"public"};if(e.state&&!a()(e.state))throw new Error("if specified, `options.state` must be an object");return e.client_id=this.config.client_id,e.redirect_uri=this.config.redirect_uri,e.scope=this.config.scope,(e=c()(e)).response_type||(e.response_type="public"===e.clientType?"token":"code"),Ke()(e,"clientType"),e.state&&(hn()(e.state)?delete e.state:e.state=D.base64.toBase64Url(He()(e.state))),"".concat(this.config.authorizeUrl,"?").concat(vn.stringify(e))},getOrgId:function(){this.logger.info("credentials: attempting to retrieve the OrgId from token");try{return this.logger.info("credentials: trying to extract OrgId from JWT"),this.extractOrgIdFromJWT(this.supertoken.access_token)}catch(t){this.logger.info("credentials: could not extract OrgId from JWT"),this.logger.info("credentials: attempting to extract OrgId from user token");try{var e;return this.extractOrgIdFromUserToken(null===(e=this.supertoken)||void 0===e?void 0:e.access_token)}catch(e){throw this.logger.info("credentials: could not extract OrgId from user token"),e}}},extractOrgIdFromJWT:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=yn().decode(e);if(!t)throw new Error("unable to extract the OrgId from the provided JWT");if(!t.realm)throw new Error("the provided JWT does not contain an OrgId");return t.realm},extractOrgIdFromUserToken:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("_");if(3!==e.length)throw new Error("the provided token is not a valid format");return e[2]},buildLogoutUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"".concat(this.config.logoutUrl,"?").concat(vn.stringify(Jn({cisService:this.config.service,goto:this.config.redirect_uri},e)))},calcRefreshTimeout:function(e){return Math.floor((Math.floor(4*Math.random())+6)/10*e)},constructor:function(){var e=this;this._dataTypes=c()(this._dataTypes),l()(this._dataTypes).forEach((function(t){e._dataTypes[t].set&&(e._dataTypes[t].set=e._dataTypes[t].set.bind(e))}));for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];d()(ye,this,n)},downscope:function(e){var t=this;return this.supertoken.downscope(e).catch((function(n){return t.logger.trace("credentials: failed to downscope supertoken to ".concat(e),n),t.logger.trace("credentials: falling back to supertoken for ".concat(e)),h().resolve(new Fn(Jn({scope:e},t.supertoken.serialize())),{parent:t})}))},getClientToken:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.logger.info("credentials: requesting client credentials grant"),this.webex.request({method:"POST",uri:t.uri||this.config.tokenUrl,form:{grant_type:"client_credentials",scope:t.scope||"webexsquare:admin",self_contained_token:!0},auth:{user:this.config.client_id,pass:this.config.client_secret,sendImmediately:!0},shouldRefreshAccessToken:!1}).then((function(t){return new Fn(t.body,{parent:e})})).catch((function(e){if(400!==e.statusCode)return h().reject(e);var t=In.select(e.body.error);return h().reject(new t(e._res||e))}))},getUserToken:function(e){var t=this;return h().resolve(!this.isRefreshing||new(h())((function(e){t.logger.info("credentials: token refresh inflight; delaying getUserToken until refresh completes"),t.once("change:isRefreshing",(function(){t.logger.info("credentials: token refresh complete; reinvoking getUserToken"),e()}))}))).then((function(){if(!t.canAuthorize)return t.logger.info("credentials: cannot produce an access token from current state"),h().reject(new Error("Current state cannot produce an access token"));if(e||(e=function(e,t){return t?t.split(" ").filter((function(t){return t!==e})).sort().join(" "):""}("spark:kms",t.config.scope)),(e=On(e))===On(t.config.scope))return h().resolve(t.supertoken);var n=t.userTokens.get(e);return n&&n.access_token?h().resolve(n):t.downscope(e).then((0,D.tap)((function(e){return t.userTokens.add(e)})))}))},initialize:function(e,t){var n=this;e&&("string"==typeof e&&(this.supertoken=e),e.access_token&&(this.supertoken=e),e.authorization&&(e.authorization.supertoken?this.supertoken=e.authorization.supertoken:this.supertoken=e.authorization),this.supertoken&&this.supertoken.expires&&this.scheduleRefresh(this.supertoken.expires)),d()(ye.prototype.initialize,this,[e,t]),this.listenToOnce(this.parent,"change:config",(function(){if(n.config.authorizationString){var e=mn.parse(n.config.authorizationString,!0);n.config.client_id=e.query.client_id,n.config.redirect_uri=e.query.redirect_uri,n.config.scope=e.query.scope,n.config.authorizeUrl=e.href.substr(0,e.href.indexOf("?"))}})),this.webex.once("loaded",(function(){n.ready=!0}))},invalidate:function(){this.logger.info("credentials: invalidating tokens"),this.refreshTimer&&(clearTimeout(this.refreshTimer),this.unset("refreshTimer"));try{this.unset("supertoken")}catch(e){this.logger.warn("credentials: failed to clear supertoken",e)}for(;this.userTokens.models.length;)try{this.userTokens.remove(this.userTokens.models[0])}catch(e){this.logger.warn("credentials: failed to remove user token",e)}return this.logger.info("credentials: finished removing tokens"),h().resolve()},refresh:function(){var e=this;this.logger.info("credentials: refresh requested");var t=this.supertoken,n=ut()(this.userTokens.models);return this.config.jwtRefreshCallback?this.config.jwtRefreshCallback(this.webex).then((function(t){return e.webex.authorization.requestAccessTokenFromJwt({jwt:t})})):(this.webex.internal.services&&this.webex.internal.services.updateCredentialsConfig(),t.refresh().then((function(t){return e.refreshTimer&&(clearTimeout(e.refreshTimer),e.unset("refreshTimer")),e.supertoken=t,h().all(n.map((function(t){return e.downscope(t.scope).then((function(n){return e.logger.info("credentials: revoking token for ".concat(t.scope)),t.revoke().catch((function(t){e.logger.warn("credentials: failed to revoke user token",t)})).then((function(){e.userTokens.remove(t.scope),e.userTokens.add(n)}))}))})))})).then((function(){e.scheduleRefresh(e.supertoken.expires)})).catch((function(t){if(t instanceof In.InvalidRequestError){for(e.unset("supertoken");e.userTokens.models.length;)try{e.userTokens.remove(e.userTokens.models[0])}catch(t){e.logger.warn("credentials: failed to remove user token",t)}e.webex.trigger("client:InvalidRequestError")}return h().reject(t)})))},scheduleRefresh:function(e){var t=this,n=e-rt()();if(n>0){var r=this.calcRefreshTimeout(n);this.refreshTimer=(0,bn.L)((function(){return t.refresh()}),r)}else this.refresh()},version:"2.54.2"},(0,ee.Z)(Kn,"getUserToken",[qn,Wn],ie()(Kn,"getUserToken"),Kn),(0,ee.Z)(Kn,"initialize",[zn],ie()(Kn,"initialize"),Kn),(0,ee.Z)(Kn,"invalidate",[D.oneFlight,Gn],ie()(Kn,"invalidate"),Kn),(0,ee.Z)(Kn,"refresh",[D.oneFlight,Hn,$n],ie()(Kn,"refresh"),Kn),Kn)),{proxies:["canAuthorize","canRefresh"]});var Xn=["discovery","limited","signin","postauth","custom"],Qn="SERVICE_CATALOGS_ENUM_TYPES_STRING",er="SERVICE_CATALOGS_ENUM_TYPES_NUMBER",tr=n(52153),nr=n.n(tr);const rr="JS_SDK_SERVICE_NOT_FOUND";var ir=n(27921),or=n.n(ir),ar=n(85579),sr=n.n(ar),cr=n(22013),ur=n.n(cr),lr=n(78149),fr=n.n(lr);const dr=y().extend({namespace:"ServiceUrl",props:{defaultUrl:["string",!0,void 0],hosts:["array",!1,function(){return[]}],name:["string",!0,void 0]},_generateHostUrl:function(e){var t=mn.parse(this.defaultUrl);return t.host="".concat(e).concat(t.port?":".concat(t.port):""),mn.format(t)},_getHostUrls:function(){var e=this;return this.hosts.map((function(t){return{url:e._generateHostUrl(t.host),priority:t.priority}}))},_getPriorityHostUrl:function(e){if(0===this.hosts.length)return this.defaultUrl;var t=e?this.hosts.filter((function(t){return t.id===e})):this.hosts.filter((function(e){return e.homeCluster})),n=t.filter((function(e){return!e.failed}));return t=0===n.length?t.map((function(e){return e.failed=!1,e})):n,this._generateHostUrl(t.reduce((function(e,t){return e.priority>t.priority||!e.homeCluster?t:e}),{}).host)},failHost:function(e){if(e===this.defaultUrl)return!0;var t=mn.parse(e).hostname,n=this.hosts.find((function(e){return e.host===t}));return n&&(n.failed=!0),void 0!==n},get:function(e,t){return e?this._getPriorityHostUrl(t):this.defaultUrl}});function pr(e,t){var n=l()(e);if(we()){var r=we()(e);t&&(r=r.filter((function(t){return ie()(e,t).enumerable}))),n.push.apply(n,r)}return n}function hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Ee()?Re()(e,Ee()(n)):pr(Object(n)).forEach((function(t){Ce()(e,t,ie()(n,t))}))}return e}function vr(e,t){var n=void 0!==sr()&&e[ur()]||e["@@iterator"];if(!n){if(fr()(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return mr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return or()(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gr=y().extend({namespace:"ServiceCatalog",props:{serviceGroups:["object",!0,function(){return{discovery:[],override:[],preauth:[],postauth:[],signin:[]}}],status:["object",!0,function(){return{discovery:{ready:!1,collecting:!1},override:{ready:!1,collecting:!1},preauth:{ready:!1,collecting:!1},postauth:{ready:!1,collecting:!1},signin:{ready:!1,collecting:!1}}}],isReady:["boolean",!1,!1],allowedDomains:["array",!1,function(){return[]}]},_getUrl:function(e,t){return("string"==typeof t?this.serviceGroups[t]||[]:[].concat((0,_.Z)(this.serviceGroups.override),(0,_.Z)(this.serviceGroups.postauth),(0,_.Z)(this.serviceGroups.signin),(0,_.Z)(this.serviceGroups.preauth),(0,_.Z)(this.serviceGroups.discovery))).find((function(t){return t.name===e}))},_listServiceUrls:function(){return[].concat((0,_.Z)(this.serviceGroups.override),(0,_.Z)(this.serviceGroups.postauth),(0,_.Z)(this.serviceGroups.signin),(0,_.Z)(this.serviceGroups.preauth),(0,_.Z)(this.serviceGroups.discovery))},_loadServiceUrls:function(e,t){var n=this;return t.forEach((function(t){n._getUrl(t.name,e)||n.serviceGroups[e].push(t)})),this},_unloadServiceUrls:function(e,t){var n,r=this;return t.forEach((function(t){(n=r._getUrl(t.name,e))&&r.serviceGroups[e].splice(r.serviceGroups[e].indexOf(n),1)})),this},clean:function(){this.serviceGroups.preauth.length=0,this.serviceGroups.signin.length=0,this.serviceGroups.postauth.length=0,this.status.preauth={ready:!1},this.status.signin={ready:!1},this.status.postauth={ready:!1}},findClusterId:function(e){for(var t,n=mn.parse(e),r=0,i=l()(this.serviceGroups);r<i.length;r++){var o,a=i[r],s=vr(this.serviceGroups[a]);try{for(s.s();!(o=s.n()).done;){var c=o.value;t=mn.parse(c.defaultUrl);var u,f=vr(c.hosts);try{for(f.s();!(u=f.n()).done;){var d=u.value;if(n.hostname===d.host&&d.id)return d.id}}catch(e){f.e(e)}finally{f.f()}if(t.hostname===n.hostname&&c.hosts.length>0){var p,h=vr(c.hosts);try{for(h.s();!(p=h.n()).done;){var v=p.value;if(v.homeCluster)return v.id}}catch(e){h.e(e)}finally{h.f()}return c.hosts[0].id}}}catch(e){s.e(e)}finally{s.f()}}},findServiceFromClusterId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clusterId,n=e.priorityHost,r=void 0===n||n,i=e.serviceGroup,o=("string"==typeof i?this.serviceGroups[i]||[]:[].concat((0,_.Z)(this.serviceGroups.override),(0,_.Z)(this.serviceGroups.postauth),(0,_.Z)(this.serviceGroups.signin),(0,_.Z)(this.serviceGroups.preauth),(0,_.Z)(this.serviceGroups.discovery))).find((function(e){return e.hosts.find((function(e){return e.id===t}))}));if(o)return{name:o.name,url:o.get(r,t)}},findServiceUrlFromUrl:function(e){var t=mn.parse(e);return[].concat((0,_.Z)(this.serviceGroups.discovery),(0,_.Z)(this.serviceGroups.preauth),(0,_.Z)(this.serviceGroups.signin),(0,_.Z)(this.serviceGroups.postauth),(0,_.Z)(this.serviceGroups.override)).find((function(e){return t.hostname===mn.parse(e.defaultUrl).hostname||!!e.hosts.find((function(e){return e.host===t.hostname}))}))},findAllowedDomain:function(e){var t=mn.parse(e);if(t.host)return this.allowedDomains.find((function(e){return t.host.includes(e)}))},get:function(e,t,n){var r=this._getUrl(e,n);return r?r.get(t):void 0},getAllowedDomains:function(){return(0,_.Z)(this.allowedDomains)},list:function(e,t){var n={},r="string"==typeof t?this.serviceGroups[t]||[]:[].concat((0,_.Z)(this.serviceGroups.discovery),(0,_.Z)(this.serviceGroups.preauth),(0,_.Z)(this.serviceGroups.signin),(0,_.Z)(this.serviceGroups.postauth),(0,_.Z)(this.serviceGroups.override));return r&&r.forEach((function(t){n[t.name]=t.get(e)})),n},markFailedUrl:function(e,t){var n=this,r=this._getUrl(l()(this.list()).find((function(t){return n._getUrl(t).failHost(e)})));if(r)return t?r.get(!1):r.get(!0)},setAllowedDomains:function(e){this.allowedDomains=(0,_.Z)(e)},updateServiceUrls:function(e,t){var n=this,r=this.serviceGroups[e].filter((function(e){return t.every((function(t){return t.name!==e.name}))}));return this._unloadServiceUrls(e,r),t.forEach((function(t){var r=n._getUrl(t.name,e);r?(r.defaultUrl=t.defaultUrl,r.hosts=t.hosts||[]):n._loadServiceUrls(e,[new dr(hr({},t))])})),this.status[e].ready=!0,this.trigger(e),this},waitForCatalog:function(e,t){var n=this;return new(h())((function(r,i){n.status[e].ready&&r();var o=setTimeout((function(){return i(new Error("services: timeout occured while waiting for '".concat(e,"' catalog to populate")))}),t?1e3*t:6e4);n.once(e,(function(){clearTimeout(o),r()}))}))}});const yr=gr;var br=function(){function e(t){(0,F.Z)(this,e),e.validate(t),this.catalog=t.catalog,this.default=t.defaultUri,this.hostGroup=t.hostGroup,this.id=t.id,this.priority=t.priority,this.uri=t.uri,this.failed=!1,this.replaced=!1}return(0,j.Z)(e,[{key:"active",get:function(){return!this.failed&&!this.replaced}},{key:"local",get:function(){return this.default.includes(this.hostGroup)}},{key:"service",get:function(){return this.id.split(":")[3]}},{key:"url",get:function(){var e=mn.parse(this.default);return e.host="".concat(this.uri).concat(e.port?":".concat(e.port):""),mn.format(e)}},{key:"setStatus",value:function(e){var t=e.failed,n=e.replaced;return void 0!==t&&(this.failed=t),void 0!==n&&(this.replaced=n),this}}],[{key:"polyGenerate",value:function(t){var n=t.catalog,r=t.name,i=t.url;return new e({catalog:n,defaultUri:i,hostGroup:mn.parse(i).host,id:r?"poly-head:poly-group:poly-cluster:".concat(r):void 0,priority:1,uri:mn.parse(i).host})}},{key:"validate",value:function(e){var t=e.catalog,n=e.defaultUri,r=e.hostGroup,i=e.id,o=e.priority,a=e.uri,s=function(e){throw new Error("service-host: invalid constructor parameters, ".concat(e))};Xn.includes(t)||s("'catalog' must be a string"),"string"!=typeof n&&s("'defaultUri' must be a string"),"string"!=typeof r&&s("'hostGroup' must be a string"),"string"==typeof i&&4===i.split(":").length||s("'id' must be a string that contains 3 ':' characters"),"number"!=typeof o&&s("'priority' must be a number"),"string"!=typeof a&&s("'uri' must be a string")}}]),e}();function wr(e,t){var n=l()(e);if(we()){var r=we()(e);t&&(r=r.filter((function(t){return ie()(e,t).enumerable}))),n.push.apply(n,r)}return n}function _r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Ee()?Re()(e,Ee()(n)):wr(Object(n)).forEach((function(t){Ce()(e,t,ie()(n,t))}))}return e}var Er=function(){function e(){(0,F.Z)(this,e),this.hosts=[]}return(0,j.Z)(e,[{key:"map",get:function(){return this.find({active:!0,local:!0,priority:!0}).reduce((function(e,t){var n={};return n[t.service]=t.url,_r(_r({},e),n)}),{})}},{key:"clear",value:function(e){var t=this.find(e);return this.hosts=this.hosts.filter((function(e){return!t.includes(e)})),t}},{key:"failed",value:function(e){var t=this.find(e);return t.forEach((function(e){e.setStatus({failed:!0})})),t}},{key:"filterActive",value:function(e){return"boolean"==typeof e?this.hosts.filter((function(t){return t.active===e})):(0,_.Z)(this.hosts)}},{key:"filterCatalog",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(fr()(t)?t:[t]).map((function(t){return e.mapCatalogName({id:t,type:Qn})||t}));return n.length>0?this.hosts.filter((function(e){return n.includes(e.catalog)})):(0,_.Z)(this.hosts)}},{key:"filterCluster",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=fr()(e)?e:[e];return t.length>0?this.hosts.filter((function(e){return t.includes(e.id)})):(0,_.Z)(this.hosts)}},{key:"filterLocal",value:function(e){return"boolean"==typeof e?this.hosts.filter((function(t){return t.local===e})):(0,_.Z)(this.hosts)}},{key:"filterPriority",value:function(t){return t?this.hosts.reduce((function(t,n){if(!n.active)return t;var r=t.find((function(e){return e.hostGroup===n.hostGroup}));return r?((e.mapCatalogName({id:r.catalog,type:er})<e.mapCatalogName({id:n.catalog,type:er})||r.priority<n.priority)&&(t.splice(t.indexOf(r,1)),t.push(n)),t):(t.push(n),t)}),[]):(0,_.Z)(this.hosts)}},{key:"filterService",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=fr()(e)?e:[e];return t.length>0?this.hosts.filter((function(e){return t.includes(e.service)})):(0,_.Z)(this.hosts)}},{key:"filterUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=fr()(e)?e:[e];return t.length>0?this.hosts.filter((function(e){return t.includes(e.url)})):(0,_.Z)(this.hosts)}},{key:"find",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.active,r=t.catalog,i=t.cluster,o=t.local,a=t.priority,s=t.service,c=t.url;return this.hosts.filter((function(t){return e.filterActive(n).includes(t)&&e.filterCatalog(r).includes(t)&&e.filterCluster(i).includes(t)&&e.filterLocal(o).includes(t)&&e.filterPriority(a).includes(t)&&e.filterService(s).includes(t)&&e.filterUrl(c).includes(t)}))}},{key:"load",value:function(){var t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){return!!e.mapCatalogName({id:t.catalog,type:Qn})}));return(t=this.hosts).push.apply(t,(0,_.Z)(n.map((function(e){return new br(e)})))),this}},{key:"replaced",value:function(e){var t=this.find(e);return t.forEach((function(e){e.setStatus({replaced:!0})})),t}},{key:"reset",value:function(e){var t=this.find(e);return t.forEach((function(e){e.setStatus({failed:!1})})),t}}],[{key:"mapCatalogName",value:function(e){var t=e.id,n=e.type;if("number"==typeof t){if(n===er)return void 0!==Xn[t]?t:void 0;if(n===Qn)return Xn[t]}if("string"==typeof t){if(n===Qn)return Xn.includes(t)?t:void 0;if(n===er)return Xn.includes(t)?Xn.indexOf(t):void 0}}},{key:"mapRemoteCatalog",value:function(t){var n=t.catalog,r=t.hostCatalog,i=t.serviceLinks,o=e.mapCatalogName({id:n,type:Qn});if(!Xn.includes(o))throw new Error("service-catalogs: '".concat(n,"' is not a valid catalog"));return l()(r).reduce((function(e,t){return e.push.apply(e,(0,_.Z)(r[t].map((function(e){return{catalog:o,defaultUri:i[e.id.split(":")[3]],hostGroup:t,id:e.id,priority:e.priority,uri:e.host}})))),e}),[])}}]),e}(),Sr=function(){function e(){var t=this;(0,F.Z)(this,e),Xn.forEach((function(n){t[n]=e.generateCatalogState()}))}return(0,j.Z)(e,[{key:"setCollecting",value:function(e,t){this[e]&&(this[e].collecting=t)}},{key:"setReady",value:function(e,t){this[e]&&(this[e].ready=t)}}],[{key:"generateCatalogState",value:function(){return{collecting:!1,ready:!1}}}]),e}();const Rr={hydra:"https://api-usgov.webex.com/v1",u2c:"https://u2c.gov.ciscospark.com/u2c/api/v1"};function xr(e,t){var n=l()(e);if(we()){var r=we()(e);t&&(r=r.filter((function(t){return ie()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(n),!0).forEach((function(t){(0,b.Z)(e,t,n[t])})):Ee()?Re()(e,Ee()(n)):xr(Object(n)).forEach((function(t){Ce()(e,t,ie()(n,t))}))}return e}var kr=/(?:^\/)|(?:\/$)/,Tr={ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.WEBEX_CONVERSATION_CLUSTER_SERVICE||"identityLookup",Ir={ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.WEBEX_CONVERSATION_DEFAULT_CLUSTER||"".concat("urn:TEAM:us-east-2_a",":").concat(Tr),Or=ye.extend({namespace:"Services",registries:new(ne()),states:new(ne()),props:{validateDomains:["boolean",!1,!0]},_catalogs:new(ne()),_serviceUrls:null,getRegistry:function(){return this.registries.get(this.webex)},getState:function(){return this.states.get(this.webex)},_getCatalog:function(){return this._catalogs.get(this.webex)},get:function(e,t,n){return this._getCatalog().get(e,t,n)},hasService:function(e){return!!this.get(e)},hasAllowedDomains:function(){return this._getCatalog().getAllowedDomains().length>0},list:function(e,t){return this._getCatalog().list(e,t)},markFailedUrl:function(e,t){return this._getCatalog().markFailedUrl(e,t)},_updateServiceUrls:function(e){this._serviceUrls=Cr(Cr({},this._serviceUrls),e)},updateServices:function(){var e,t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.from,o=r.query,a=r.token,s=r.forceRefresh,c=this._getCatalog();switch(i){case"limited":t="preauth";break;case"signin":t="signin";break;default:t="postauth"}if(c.status[t].collecting)return this.waitForCatalog(t);if(c.status[t].collecting=!0,"preauth"===t){var u=o&&l()(o)[0];if(!["email","emailhash","userId","orgId","mode"].includes(u))return h().reject(new Error("a query param of email, emailhash, userId, orgId, or mode is required"))}if("preauth"===t||"signin"===t){var f=l()(o)[0];e={},"email"===f&&o.email?e.emailhash=nr()(o.email.toLowerCase()).toString():e[f]=o[f]}return this._fetchNewServiceHostmap({from:i,token:a,query:e,forceRefresh:s}).then((function(e){c.updateServiceUrls(t,e),n.updateCredentialsConfig(),c.status[t].collecting=!1})).catch((function(e){return c.status[t].collecting=!1,h().reject(e)}))},validateUser:function(e){var t=this,n=e.email,r=e.reqId,i=void 0===r?"WEBCLIENT":r,o=e.forceRefresh,a=void 0!==o&&o,s=e.activationOptions,c=void 0===s?{}:s,u=e.preloginUserId;if(this.logger.info("services: validating a user"),!n)return h().reject(new Error("`email` is required"));if(this.webex.credentials.canAuthorize)return this.updateServices({forceRefresh:a}).then((function(){return t.webex.credentials.getUserToken()})).then((function(e){return t.sendUserActivation({email:n,reqId:i,token:e.toString(),activationOptions:c,preloginUserId:u})})).then((function(e){return{activated:!0,exists:!0,details:"user is authorized via a user token",user:e}}));var l,f=this.webex.credentials.config,d=f.client_id,p=f.client_secret;return d&&p?this.collectPreauthCatalog({email:n}).then((function(){var e=t.get("idbroker",!0);return t.webex.credentials.getClientToken({uri:"".concat(e,"idb/oauth2/v1/access_token"),scope:"webexsquare:admin webexsquare:get_conversation Identity:SCIM"})})).then((function(e){return l=e.toString(),t.collectSigninCatalog({email:n,token:l,forceRefresh:a})})).catch((function(e){return{exists:"NotFound"!==e.name,activated:!1,details:"NotFound"!==e.name?"user exists but is not activated":"user does not exist and is not activated"}})).then((function(e){return h().all([e||{activated:!0,exists:!0,details:"user exists and is activated"},t.sendUserActivation({email:n,reqId:i,token:l,activationOptions:c,preloginUserId:u})])})).then((function(e){var t=(0,Mn.Z)(e,2),n=t[0],r=t[1];return Cr(Cr({},n),{},{user:r})})).catch((function(e){var t={statusCode:e.statusCode,responseText:e.body&&e.body.message,body:e.body};return h().reject(t)})):h().reject(new Error("client authentication details are not available"))},getMeetingPreferences:function(){var e=this;return this.request({method:"GET",service:"hydra",resource:"meetingPreferences"}).then((function(t){return e.logger.info("services: received user region info"),t.body})).catch((function(t){e.logger.info("services: was not able to fetch user login information",t)}))},fetchClientRegionInfo:function(){var e=this;return this.request({uri:"https://ds.ciscospark.com/v1/region",addAuthHeader:!1,headers:{"spark-user-agent":null},timeout:5e3}).then((function(t){return e.logger.info("services: received user region info"),t.body})).catch((function(t){e.logger.info("services: was not able to get user region info",t)}))},sendUserActivation:function(e){var t,n,r=this,i=e.email,o=e.reqId,a=e.token,s=e.activationOptions,c=e.preloginUserId;return this.logger.info("services: sending user activation request"),this.fetchClientRegionInfo().then((function(e){return e&&(t=e.countryCode,n=e.timezone),r.request({service:"license",resource:"users/activations",method:"POST",headers:{accept:"application/json",authorization:a,"x-prelogin-userid":c},body:Cr({email:i,reqId:o,countryCode:t,timeZone:n},s),shouldRefreshAccessToken:!1})})).then((function(e){return e.body})).catch((function(e){return h().reject(e)}))},collectPreauthCatalog:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?this.updateServices({from:"limited",query:e,forceRefresh:t}):this.updateServices({from:"limited",query:{mode:"DEFAULT_BY_PROXIMITY"},forceRefresh:t})},collectSigninCatalog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.email,n=e.token,r=e.forceRefresh;return t?n?this.updateServices({from:"signin",query:{email:t},token:n,forceRefresh:r}):h().reject(new Error("`token` is required")):h().reject(new Error("`email` is required"))},updateCredentialsConfig:function(){var e=this.list(!0),t=e.idbroker,n=e.identity;if(t&&n){var r=this.webex.config.credentials,i=r.authorizationString,o=r.authorizeUrl;this.webex.config.credentials.authorizeUrl=i?o:"".concat(t.replace(kr,""),"/idb/oauth2/v1/authorize"),this.webex.setConfig({credentials:{idbroker:{url:t.replace(kr,"")},identity:{url:n.replace(kr,"")}}})}},waitForCatalog:function(e,t){var n=this._getCatalog(),r=this.webex.credentials.supertoken;return"postauth"===e&&r&&r.access_token&&!n.status.postauth.collecting&&!n.status.postauth.ready?n.status.preauth.ready?this.updateServices():this.initServiceCatalogs():n.waitForCatalog(e,t)},waitForService:function(e){var t=this,n=e.name,r=e.timeout,i=void 0===r?5:r,o=e.url,a=this.webex.config.services,s=this._getCatalog();if(a.servicesNotNeedValidation.find((function(e){return e===n})))return h().resolve(this._serviceUrls[n]);var c=this.get(n,!0),u=this.getServiceFromUrl(o);return c||u?h().resolve(c||u.priorityUrl):s.isReady?o?h().resolve(o):(this.webex.internal.metrics.submitClientMetrics(rr,{fields:{service_name:n}}),h().reject(new Error("services: service '".concat(n,"' was not found in any of the catalogs")))):new(h())((function(e,r){h().all(["preauth","signin","postauth"].map((function(r){return a=r,s.waitForCatalog(a,i).then((function(){var r=t.get(n,!0),i=t.getServiceFromUrl(o);(r||i)&&e(r||i.priorityUrl)})).catch((function(){}));var a}))).then((function(){t.webex.internal.metrics.submitClientMetrics(rr,{fields:{service_name:n}}),r(new Error("services: service '".concat(n,"' was not found after waiting")))}))}))},_formatReceivedHostmap:function(e){var t=l()(e.hostCatalog).reduce((function(t,n){var r;if(0===e.hostCatalog[n].length)return t;var i=e.hostCatalog[n][0].id.split(":")[3],o=e.serviceLinks[i],a=t.find((function(e){return e.name===i}));return a||(a={name:i,defaultUrl:o,defaultHost:mn.parse(o).hostname,hosts:[]},t.push(a)),(r=a.hosts).push.apply(r,[{host:n,ttl:-1,priority:10,id:e.hostCatalog[n][0].id,homeCluster:a.defaultHost===n}].concat((0,_.Z)(e.hostCatalog[n].map((function(e){return Cr(Cr({},e),{},{homeCluster:a.defaultHost===n})}))))),t}),[]);return l()(e.serviceLinks).forEach((function(n){t.find((function(e){return e.name===n}))||t.push({name:n,defaultUrl:e.serviceLinks[n],defaultHost:mn.parse(e.serviceLinks[n]).hostname,hosts:[]})})),this._updateServiceUrls(e.serviceLinks),t},getClusterId:function(e){return this._getCatalog().findClusterId(e)},getServiceFromClusterId:function(e){return this._getCatalog().findServiceFromClusterId(e)},getServiceUrlFromClusterId:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cluster,t=void 0===e?"us":e,n="us"===t?Ir:t;n.split(":").length<4&&(n="".concat(t,":").concat(Tr));var r=(this.getServiceFromClusterId({clusterId:n})||{}).url;if(!r)throw Error("Could not find service for cluster [".concat(t,"]"));return r},getServiceFromUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this._getCatalog().findServiceUrlFromUrl(e);if(t)return{name:t.name,priorityUrl:t.get(!0),defaultUrl:t.get()}},isServiceUrl:function(e){return!!this._getCatalog().findServiceUrlFromUrl(e)},isAllowedDomainUrl:function(e){return!!this._getCatalog().findAllowedDomain(e)},convertUrlToPriorityHostUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.getServiceFromUrl(e);if(!t)throw Error("No service associated with url: [".concat(e,"]"));return e.replace(t.defaultUrl,t.priorityUrl)},_fetchNewServiceHostmap:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.from,r=t.query,i=t.token,o=t.forceRefresh,a=n?"/".concat(n,"/catalog"):"/catalog",s=Cr(Cr({},r),{},{format:"hostmap"});o&&(s.timestamp=(new Date).getTime());var c={method:"GET",service:"u2c",resource:a,qs:s};return i&&(c.headers={authorization:i}),this.request(c).then((function(t){var n=t.body;return e._formatReceivedHostmap(n)}))},initConfig:function(){var e=this._getCatalog(),t=this.webex.config,n=t.services,r=t.fedramp;if(n){if(r&&(n.discovery=Rr),n.discovery){var i=l()(n.discovery).map((function(e){return{name:e,defaultUrl:n.discovery[e]}}));e.updateServiceUrls("discovery",i)}if(n.override){var o=l()(n.override).map((function(e){return{name:e,defaultUrl:n.override[e]}}));e.updateServiceUrls("override",o)}n.allowedDomains&&e.setAllowedDomains(n.allowedDomains),this.validateDomains=n.validateDomains}},initServiceCatalogs:function(){var e=this;this.logger.info("services: initializing initial service catalogs");var t=this.webex.credentials;return h().resolve().then((function(){return t.getOrgId()})).then((function(t){return e.collectPreauthCatalog({orgId:t})})).then((function(){return t.canAuthorize?e.updateServices().catch((function(){return e.logger.warn("services: cannot retrieve postauth catalog")})):h().resolve()}))},initialize:function(){var e=this,t=new yr,n=new Er,r=new Sr;this._catalogs.set(this.webex,t),this.registries.set(this.webex,n),this.states.set(this.webex,r),this.listenToOnce(this.webex,"change:config",(function(){e.initConfig()})),this.listenToOnce(this.webex,"ready",(function(){var n=e.webex.credentials.supertoken;if(n&&n.access_token)e.initServiceCatalogs().then((function(){t.isReady=!0})).catch((function(t){return e.logger.error("services: failed to init initial services, ".concat(t.message))}));else{var r=e.webex.config.email;e.collectPreauthCatalog(r?{email:r}:void 0)}}))},version:"2.54.2"});const Ar=Or;function Lr(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var Mr=function(e){(0,B.Z)(n,e);var t=Lr(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"onResponseError",value:function(e,t){if((t instanceof kt.InternalServerError||t instanceof kt.BadGateway||t instanceof kt.ServiceUnavailable)&&e.uri){var n=this.webex.internal.device.features.developer.get("web-high-availability");if(n&&n.value)return this.webex.internal.metrics.submitClientMetrics("web-ha",{fields:{success:!1},tags:{action:"failed",error:t.message,url:e.uri}}),h().resolve(this.webex.internal.services.markFailedUrl(e.uri)).then((function(){return h().reject(t)}))}return h().reject(t)}}],[{key:"create",value:function(){return new n({webex:this})}}]),n}(Je.nK);function Pr(e){var t=function(){if("undefined"==typeof Reflect||!Z())return!1;if(Z().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Z()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,q.Z)(e);if(t){var i=(0,q.Z)(this).constructor;n=Z()(r,arguments,i)}else n=r.apply(this,arguments);return(0,V.Z)(this,n)}}var Nr=/(?:^\/)|(?:\/$)/,Dr=function(e){(0,B.Z)(n,e);var t=Pr(n);function n(){return(0,F.Z)(this,n),t.apply(this,arguments)}return(0,j.Z)(n,[{key:"onRequest",value:function(e){var t=this;if(e.uri)return e;this.normalizeOptions(e),this.validateOptions(e);var n=this.webex.internal.services,r=e.service,i=e.resource;return n.waitForService({name:r}).then((function(n){return e.uri=t.generateUri(n,i),e})).catch((function(){return h().reject(new Error("service-interceptor: '".concat(r,"' is not a known service")))}))}},{key:"generateUri",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.replace(Nr,""),r=t.replace(Nr,"");return"".concat(n,"/").concat(r)}},{key:"normalizeOptions",value:function(e){e.api&&(e.service=e.service||e.api,delete e.api)}},{key:"validateOptions",value:function(e){if(!e.resource)throw new Error("a `resource` parameter is required");if(!e.service)throw new Error("a valid 'service' parameter is required")}}],[{key:"create",value:function(){return new n({webex:this})}}]),n}(Je.nK);un("services",Ar,{interceptors:{ServiceInterceptor:Dr.create,ServerErrorInterceptor:Mr.create}});var Ur,Zr,jr=n(44894),Fr=new(ne()),Br=(Ur=function(){function e(){var t,n,r,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,F.Z)(this,e),t=this,n="ready",i=this,(r=Zr)&&xe(t,n,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0});var s=o.webex||a.parent;if(!s)throw new Error("One of `attrs.webex` or `options.parent` must be supplied when initializing a StatelessWebexPlugin");for(;s.parent||s.collection;)s=s.parent||s.collection;Fr.set(this,s)}return(0,j.Z)(e,[{key:"config",get:function(){var e=this.getNamespace?this.getNamespace():this.namespace;return e?(e=e.toLowerCase(),this.webex.config[e]):this.webex.config}},{key:"logger",get:function(){return this.webex.logger}},{key:"webex",get:function(){return Fr.get(this)}},{key:"request",value:function(){var e;return(e=this.webex).request.apply(e,arguments)}},{key:"upload",value:function(){var e;return(e=this.webex).upload.apply(e,arguments)}}]),e}(),Zr=(0,ee.Z)(Ur.prototype,"ready",[jr.OT],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ur);ae()(Br.prototype,ce());const Vr=ye.extend({session:{deferreds:{type:"object",default:function(){return new(M())}},queue:{type:"array",default:function(){return[]}}},derived:{bounce:{fn:function(){var e=this;return(0,D.cappedDebounce)((function(){return e.executeQueue.apply(e,arguments)}),this.config.batcherWait,{maxCalls:this.config.batcherMaxCalls,maxWait:this.config.batcherMaxWait})}}},request:function(e){var t=this,n=new D.Defer;return this.fingerprintRequest(e).then((function(r){t.deferreds.has(r)?n.resolve(t.deferreds.get(r).promise):(t.deferreds.set(r,n),t.prepareItem(e).then((function(e){n.promise=n.promise.then((0,D.tap)((function(){return t.deferreds.delete(r)}))).catch((function(e){return t.deferreds.delete(r),h().reject(e)})),t.enqueue(e).then((function(){return t.bounce()})).catch((function(e){return n.reject(e)}))})).catch((function(e){return n.reject(e)})))})).catch((function(e){return n.reject(e)})),n.promise},enqueue:function(e){return this.queue.push(e),h().resolve()},prepareItem:function(e){return h().resolve(e)},executeQueue:function(){var e=this,t=this.queue.splice(0,this.config.batcherMaxCalls);return new(h())((function(n){n(e.prepareRequest(t).then((function(t){return e.submitHttpRequest(t).then((function(t){return e.handleHttpSuccess(t)}))})).catch((function(n){return n instanceof kt?e.handleHttpError(n):h().all(t.map((function(t){return e.getDeferredForRequest(t).then((function(e){e.reject(n)}))})))})))})).catch((function(t){return e.logger.error(t),h().reject(t)}))},prepareRequest:function(e){return h().resolve(e)},submitHttpRequest:function(e){throw new Error("request() must be implemented")},handleHttpSuccess:function(e){var t=this;return h().all((e.body&&e.body.items||e.body).map((function(e){return t.acceptItem(e)})))},handleHttpError:function(e){var t=this;return e instanceof kt&&gt()(e,"options.body.map")?h().all(e.options.body.map((function(n){return t.getDeferredForRequest(n).then((function(t){t.reject(e)}))}))):(this.logger.error("http error handler called without a WebexHttpError object",e),h().reject(e))},acceptItem:function(e){var t=this;return this.didItemFail(e).then((function(n){return n?t.handleItemFailure(e):t.handleItemSuccess(e)}))},didItemFail:function(e){return h().resolve(!1)},handleItemFailure:function(e){return this.getDeferredForResponse(e).then((function(t){t.reject(e)}))},handleItemSuccess:function(e){return this.getDeferredForResponse(e).then((function(t){t.resolve(e)}))},getDeferredForRequest:function(e){var t=this;return this.fingerprintRequest(e).then((function(e){var n=t.deferreds.get(e);if(!n)throw new Error("Could not find pending request for received response");return n}))},getDeferredForResponse:function(e){var t=this;return this.fingerprintResponse(e).then((function(e){var n=t.deferreds.get(e);if(!n)throw new Error("Could not find pending request for received response");return n}))},fingerprintRequest:function(e){throw new Error("fingerprintRequest() must be implemented")},fingerprintResponse:function(e){throw new Error("fingerprintResponse() must be implemented")},version:"2.54.2"});var qr=new(ne()),Wr=new(ne()),zr=new(ne());ur()},90579:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var r=n(21105),i=n(8167),o=n(31314),a=n(83977),s=n.n(a),c=n(8450),u=n.n(c),l=n(73473),f=n.n(l),d=n(67857),p=n.n(d),h=new(s()),v=new(s());const m={boundedAdapter:new(function(){function e(t){(0,i.Z)(this,e),this.Bound=function(){function e(t,n){(0,i.Z)(this,e),h.set(this,t),v.set(this,n.logger)}return(0,o.Z)(e,[{key:"_getRawData",value:function(){var e=localStorage.getItem(t);return e?JSON.parse(e):{}}},{key:"_load",value:function(){return this._getRawData()[h.get(this)]||{}}},{key:"_save",value:function(e){var n=this._getRawData();n[h.get(this)]=e,localStorage.setItem(t,u()(n))}},{key:"clear",value:function(){return v.get(this).info("local-storage-store-adapter: clearing localStorage"),f().resolve(localStorage.removeItem(t))}},{key:"del",value:function(e){var t=this;return new(f())((function(n){v.get(t).info("local-storage-store-adapter: deleting `".concat(e,"`"));var r=t._load();p()(r,e),t._save(r),n()}))}},{key:"get",value:function(e){var t=this;return new(f())((function(n,i){v.get(t).debug("local-storage-store-adapter: reading `".concat(e,"`"));var o=t._load()[e];return void 0!==o?n(o):i(new r.dR("No value found for ".concat(e)))}))}},{key:"put",value:function(e,t){var n=this;return new(f())((function(r){v.get(n).debug("local-storage-store-adapter: writing `".concat(e,"`"));var i=n._load();i[e]=t,n._save(i),r()}))}}]),e}()}return(0,o.Z)(e,[{key:"bind",value:function(e,t){return t=t||{},e?t.logger?(t.logger.debug("local-storage-store-adapter: returning binding"),f().resolve(new this.Bound(e,t))):f().reject(new Error("`options.logger` is required")):f().reject(new Error("`namespace` is required"))}}]),e}())("webex"),unboundedAdapter:r.t8},g={hydra:"https://api.ciscospark.com/v1",hydraServiceUrl:"https://api.ciscospark.com/v1",credentials:{clientType:"confidential"},device:{validateDomains:!0,ephemeral:!0},storage:{boundedAdapter:m,unboundedAdapter:m}}},25144:(e,t,n)=>{var r=n(61070),i=n(33217),o=n(98433),a=n(4220);e.exports.Backoff=r,e.exports.FunctionCall=a,e.exports.FibonacciStrategy=o,e.exports.ExponentialStrategy=i,e.exports.fibonacci=function(e){return new r(new o(e))},e.exports.exponential=function(e){return new r(new i(e))},e.exports.call=function(e,t,n){var r=Array.prototype.slice.call(arguments);return e=r[0],t=r.slice(1,r.length-1),n=r[r.length-1],new a(e,t,n)}},61070:(e,t,n)=>{var r=n(17187),i=n(3814);function o(e){r.EventEmitter.call(this),this.backoffStrategy_=e,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}n(89539).inherits(o,r.EventEmitter),o.prototype.failAfter=function(e){i.checkArgument(e>0,"Expected a maximum number of retry greater than 0 but got %s.",e),this.maxNumberOfRetry_=e},o.prototype.backoff=function(e){i.checkState(-1===this.timeoutID_,"Backoff in progress."),this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",e),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,e))},o.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},o.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1},e.exports=o},4220:(e,t,n)=>{var r=n(17187),i=n(3814),o=n(89539),a=n(61070),s=n(98433);function c(e,t,n){r.EventEmitter.call(this),i.checkIsFunction(e,"Expected fn to be a function."),i.checkIsArray(t,"Expected args to be an array."),i.checkIsFunction(n,"Expected callback to be a function."),this.function_=e,this.arguments_=t,this.callback_=n,this.lastResult_=[],this.numRetries_=0,this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.retryPredicate_=c.DEFAULT_RETRY_PREDICATE_,this.state_=c.State_.PENDING}o.inherits(c,r.EventEmitter),c.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},c.DEFAULT_RETRY_PREDICATE_=function(e){return!0},c.prototype.isPending=function(){return this.state_==c.State_.PENDING},c.prototype.isRunning=function(){return this.state_==c.State_.RUNNING},c.prototype.isCompleted=function(){return this.state_==c.State_.COMPLETED},c.prototype.isAborted=function(){return this.state_==c.State_.ABORTED},c.prototype.setStrategy=function(e){return i.checkState(this.isPending(),"FunctionCall in progress."),this.strategy_=e,this},c.prototype.retryIf=function(e){return i.checkState(this.isPending(),"FunctionCall in progress."),this.retryPredicate_=e,this},c.prototype.getLastResult=function(){return this.lastResult_.concat()},c.prototype.getNumRetries=function(){return this.numRetries_},c.prototype.failAfter=function(e){return i.checkState(this.isPending(),"FunctionCall in progress."),this.failAfter_=e,this},c.prototype.abort=function(){this.isCompleted()||this.isAborted()||(this.isRunning()&&this.backoff_.reset(),this.state_=c.State_.ABORTED,this.lastResult_=[new Error("Backoff aborted.")],this.emit("abort"),this.doCallback_())},c.prototype.start=function(e){i.checkState(!this.isAborted(),"FunctionCall is aborted."),i.checkState(this.isPending(),"FunctionCall already started.");var t=this.strategy_||new s;this.backoff_=e?e(t):new a(t),this.backoff_.on("ready",this.doCall_.bind(this,!0)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),this.failAfter_>0&&this.backoff_.failAfter(this.failAfter_),this.state_=c.State_.RUNNING,this.doCall_(!1)},c.prototype.doCall_=function(e){e&&this.numRetries_++;var t=["call"].concat(this.arguments_);r.EventEmitter.prototype.emit.apply(this,t);var n=this.handleFunctionCallback_.bind(this);this.function_.apply(null,this.arguments_.concat(n))},c.prototype.doCallback_=function(){this.callback_.apply(null,this.lastResult_)},c.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var e=Array.prototype.slice.call(arguments);this.lastResult_=e,r.EventEmitter.prototype.emit.apply(this,["callback"].concat(e));var t=e[0];t&&this.retryPredicate_(t)?this.backoff_.backoff(t):(this.state_=c.State_.COMPLETED,this.doCallback_())}},c.prototype.handleBackoff_=function(e,t,n){this.emit("backoff",e,t,n)},e.exports=c},33217:(e,t,n)=>{var r=n(89539),i=n(3814),o=n(99618);function a(e){o.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay(),this.factor_=a.DEFAULT_FACTOR,e&&void 0!==e.factor&&(i.checkArgument(e.factor>1,"Exponential factor should be greater than 1 but got %s.",e.factor),this.factor_=e.factor)}r.inherits(a,o),a.DEFAULT_FACTOR=2,a.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=this.backoffDelay_*this.factor_,this.backoffDelay_},a.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()},e.exports=a},98433:(e,t,n)=>{var r=n(89539),i=n(99618);function o(e){i.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}r.inherits(o,i),o.prototype.next_=function(){var e=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=e,e},o.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0},e.exports=o},99618:(e,t,n)=>{n(17187),n(89539);function r(e){return null!=e}function i(e){if(r((e=e||{}).initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(r(e.maxDelay)&&e.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=e.initialDelay||100,this.maxDelay_=e.maxDelay||1e4,this.maxDelay_<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(r(e.randomisationFactor)&&(e.randomisationFactor<0||e.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=e.randomisationFactor||0}i.prototype.getMaxDelay=function(){return this.maxDelay_},i.prototype.getInitialDelay=function(){return this.initialDelay_},i.prototype.next=function(){var e=this.next_(),t=1+Math.random()*this.randomisationFactor_;return Math.round(e*t)},i.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},i.prototype.reset=function(){this.reset_()},i.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")},e.exports=i},79742:(e,t)=>{"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=c(e),a=o[0],s=o[1],u=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,u[l++]=255&t);1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=16383,s=0,c=r-i;s<c;s+=a)o.push(u(e,s,s+a>c?c:s+a));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},51206:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(i,o),s=0,c=e.map([t,n],(function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===s)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var s=function(){var e=o[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){r[t]=e[t]}))};for(t=0,n=o.length;t<n;t+=1)s();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){}var t,n,r;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,r=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(n=null)&&a(t.prototype,n),r&&a(t,r),e}();t.default=s,e.exports=t.default},91:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=c(n(92)),i=c(n(93)),o=c(n(94)),a=c(n(95)),s=c(n(17));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach((function(t){var a=e[t];"string"==typeof a?(i[t]=a,o+=1):"object"==typeof a&&(n[t]=a,r+=1)})),r>0){var a=Object.keys(n),c=s.default.find(a,(function(e){return t.isOS(e)}));if(c){var u=this.satisfies(n[c]);if(void 0!==u)return u}var l=s.default.find(a,(function(e){return t.isPlatform(e)}));if(l){var f=this.satisfies(n[l]);if(void 0!==f)return f}}if(o>0){var d=Object.keys(i),p=s.default.find(d,(function(e){return t.isBrowser(e,!0)}));if(void 0!==p)return this.compareVersion(i[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=u,e.exports=t.default},92:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=a,e.exports=t.default}})},88500:(e,t,n)=>{"use strict";var r=n(48764).Buffer,i=n(48764).SlowBuffer;function o(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))return!1;if(e.length!==t.length)return!1;for(var n=0,i=0;i<e.length;i++)n|=e[i]^t[i];return 0===n}e.exports=o,o.install=function(){r.prototype.equal=i.prototype.equal=function(e){return o(this,e)}};var a=r.prototype.equal,s=i.prototype.equal;o.restore=function(){r.prototype.equal=a,i.prototype.equal=s}},48764:(e,t,n)=>{"use strict";const r=n(79742),i=n(80645),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function s(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return u(e,t,n)}function u(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|v(e,t);let r=s(n);const i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(K(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(K(e,SharedArrayBuffer)||e&&K(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);const i=function(e){if(c.isBuffer(e)){const t=0|h(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||Y(e.length)?s(0):d(e);if("Buffer"===e.type&&Array.isArray(e.data))return d(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return l(e),s(e<0?0:0|h(e))}function d(e){const t=e.length<0?0:0|h(e.length),n=s(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function h(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function v(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(i)return r?-1:G(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Y(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){let o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*a}else-1!==r&&(o-=o-r),r=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(u(e,o+r)!==u(t,r)){n=!1;break}if(n)return o}return-1}function w(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let a;for(r>o/2&&(r=o/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if(Y(r))return a;e[n+a]=r}return a}function _(e,t,n,r){return $(G(t,e.length-n),e,n,r)}function E(e,t,n,r){return $(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return $(H(t),e,n,r)}function R(e,t,n,r){return $(function(e,t){let n,r,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function x(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,s,c;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(o=c));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return function(e){const t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=k));return n}(r)}t.kMaxLength=a,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return function(e,t,n){return l(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},c.allocUnsafe=function(e){return f(e)},c.allocUnsafeSlow=function(e){return f(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(K(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),K(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=c.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(K(t,Uint8Array))i+t.length>r.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},c.byteLength=v,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):m.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,i){if(K(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0);const s=Math.min(o,a),u=this.slice(r,i),l=e.slice(t,n);for(let e=0;e<s;++e)if(u[e]!==l[e]){o=u[e],a=l[e];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":case"latin1":case"binary":return E(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function T(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function O(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=J[e[r]];return i}function A(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function L(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r,i){V(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function N(e,t,n,r,i){V(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function D(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,o){return t=+t,n>>>=0,o||D(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function Z(e,t,n,r,o){return t=+t,n>>>=0,o||D(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=X((function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=X((function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=X((function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=X((function(e){q(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){M(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){M(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=X((function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=X((function(e,t=0){return N(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);M(this,e,t,n,r-1,-r)}let i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);M(this,e,t,n,r-1,-r)}let i=n-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=X((function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=X((function(e,t=0){return N(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return Z(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return Z(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const o=c.isBuffer(e)?e:c.from(e,r),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%a]}return this};const j={};function F(e,t,n){j[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function B(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function V(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new j.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||W(t,e.length-(n+1))}(r,i,o)}function q(e,t){if("number"!=typeof e)throw new j.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,n){if(Math.floor(e)!==e)throw q(e,n),new j.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=B(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=B(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const z=/[^+/0-9A-Za-z-_]/g;function G(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},21924:(e,t,n)=>{"use strict";var r=n(40210),i=n(55559),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&o(e,".prototype.")>-1?i(n):n}},55559:(e,t,n)=>{"use strict";var r=n(58612),i=n(40210),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),c=i("%Object.getOwnPropertyDescriptor%",!0),u=i("%Object.defineProperty%",!0),l=i("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=s(r,a,arguments);c&&u&&(c(t,"length").configurable&&u(t,"length",{value:1+l(0,e.length-(arguments.length-1))}));return t};var f=function(){return s(r,o,arguments)};u?u(e.exports,"apply",{value:f}):e.exports.apply=f},44894:(e,t,n)=>{"use strict";n.d(t,{OT:()=>k});var r=Object.defineProperty;function i(e,t,n){var i=n.configurable,o=n.enumerable,a=n.initializer,s=n.value;return{configurable:i,enumerable:o,get:function(){if(this!==e){var n=a?a.call(this):s;return r(this,t,{configurable:i,enumerable:o,writable:!0,value:n}),n}},set:w(t)}}function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return g(i,t)}var a,s,c,u,l,f,d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function p(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function h(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function v(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var m=Object.defineProperty;Object.getOwnPropertyDescriptor,Object.getOwnPropertyNames,Object.getOwnPropertySymbols;function g(e,t){return function(e){if(!e||!e.hasOwnProperty)return!1;for(var t=["value","initializer","get","set"],n=0,r=t.length;n<r;n++)if(e.hasOwnProperty(t[n]))return!0;return!1}(t[t.length-1])?e.apply(void 0,v(t).concat([[]])):function(){return e.apply(void 0,v(Array.prototype.slice.call(arguments)).concat([t]))}}var y=(a=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"debounceTimeoutIds",s,this),p(this,"throttleTimeoutIds",c,this),p(this,"throttlePreviousTimestamps",u,this),p(this,"throttleTrailingArgs",l,this),p(this,"profileLastRan",f,this)},s=h(a.prototype,"debounceTimeoutIds",[o],{enumerable:!0,initializer:function(){return{}}}),c=h(a.prototype,"throttleTimeoutIds",[o],{enumerable:!0,initializer:function(){return{}}}),u=h(a.prototype,"throttlePreviousTimestamps",[o],{enumerable:!0,initializer:function(){return{}}}),l=h(a.prototype,"throttleTrailingArgs",[o],{enumerable:!0,initializer:function(){return null}}),f=h(a.prototype,"profileLastRan",[o],{enumerable:!0,initializer:function(){return null}}),a),b="function"==typeof Symbol?Symbol("__core_decorators__"):"__core_decorators__";function w(e){return function(t){return Object.defineProperty(this,e,{configurable:!0,writable:!0,enumerable:!0,value:t}),t}}function _(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}}var E="object"===("undefined"==typeof console?"undefined":d(console))&&console&&"function"==typeof console.warn?_(console.warn,console):function(){};var S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var x=/^function ([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?(\([^\)]*\))[\s\S]+$/;!function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentKlass=t,this.childKlass=n,this.parentDescriptor=r,this.childDescriptor=i}R(e,[{key:"_getTopic",value:function(e){return void 0===e?null:"value"in e?e.value:"get"in e?e.get:"set"in e?e.set:void 0}},{key:"_extractTopicSignature",value:function(e){return"function"===(void 0===e?"undefined":S(e))?this._extractFunctionSignature(e):this.key}},{key:"_extractFunctionSignature",value:function(e){var t=this;return e.toString().replace(x,(function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.key)+arguments[2]}))}},{key:"key",get:function(){return this.childDescriptor.key}},{key:"parentNotation",get:function(){return this.parentKlass.constructor.name+"#"+this.parentPropertySignature}},{key:"childNotation",get:function(){return this.childKlass.constructor.name+"#"+this.childPropertySignature}},{key:"parentTopic",get:function(){return this._getTopic(this.parentDescriptor)}},{key:"childTopic",get:function(){return this._getTopic(this.childDescriptor)}},{key:"parentPropertySignature",get:function(){return this._extractTopicSignature(this.parentTopic)}},{key:"childPropertySignature",get:function(){return this._extractTopicSignature(this.childTopic)}}]),R(e,[{key:"assert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!0!==e&&this.error("{child} does not properly override {parent}"+t)}},{key:"error",value:function(e){var t=this;throw e=e.replace("{parent}",(function(e){return t.parentNotation})).replace("{child}",(function(e){return t.childNotation})),new SyntaxError(e)}}])}();Object.assign;Object.assign,"function"==typeof Symbol&&Symbol.iterator;Object.assign;Object.defineProperty,Object.getPrototypeOf;function C(e,t,n){return n.writable=!1,n}function k(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return g(C,t)}Object.assign;Object.assign;Object.defineProperty;"function"==typeof Symbol&&Symbol.iterator,Object.defineProperty,Object.getPrototypeOf;Object.assign;var T={};console.time&&console.time.bind(console),console.timeEnd&&console.timeEnd.bind(console);Object.assign,Object.getPrototypeOf,Object.getOwnPropertyDescriptor;var I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},A=(console,{profile:console.profile?_(console.profile,console):function(){},profileEnd:console.profileEnd?_(console.profileEnd,console):function(){},warn:E});function L(e,t,n,r){var i=O(r,3),o=i[0],a=void 0===o?null:o,s=i[1],c=void 0!==s&&s,u=i[2],l=void 0===u?A:u;if(!M.__enabled)return M.__warned||(l.warn("console.profile is not supported. All @profile decorators are disabled."),M.__warned=!0),n;var f=n.value;if(null===a&&(a=e.constructor.name+"."+t),"function"!=typeof f)throw new SyntaxError("@profile can only be used on functions, not: "+f);return I({},n,{value:function(){var e,t=Date.now(),n=(!1===(e=this).hasOwnProperty(b)&&m(e,b,{value:new y}),e[b]);(!0===c&&!n.profileLastRan||!1===c||"number"==typeof c&&t-n.profileLastRan>c||"function"==typeof c&&c.apply(this,arguments))&&(l.profile(a),n.profileLastRan=t);try{return f.apply(this,arguments)}finally{l.profileEnd(a)}}})}function M(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return g(L,t)}M.__enabled=!!console.profile,M.__warned=!1;Object.defineProperty,Object.getOwnPropertyDescriptor},78249:function(e,t,n){var r;e.exports=(r=r||function(e,t){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(42480)}catch(e){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},s=a.lib={},c=s.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=s.WordArray=c.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||f).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new u.init(t,e)}}),l=a.enc={},f=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},d=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},p=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},h=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,s=o/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,l=e.min(4*c,o);if(c){for(var f=0;f<c;f+=a)this._doProcessBlock(i,f);n=i.splice(0,c),r.sigBytes-=l}return new u.init(n,l)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),v=(s.Hasher=h.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new v.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math),r)},52153:function(e,t,n){var r;e.exports=(r=n(78249),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,a=t.algo,s=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(s[i]=n(e.pow(r,.5))),c[i]=n(e.pow(r,1/3)),i++),r++}();var u=[],l=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],f=n[6],d=n[7],p=0;p<64;p++){if(p<16)u[p]=0|e[t+p];else{var h=u[p-15],v=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,m=u[p-2],g=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;u[p]=v+u[p-7]+g+u[p-16]}var y=r&i^r&o^i&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&f)+c[p]+u[p];d=f,f=l,l=s,s=a+w|0,a=o,o=i,i=r,r=w+(b+y)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+f|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},35015:(e,t,n)=>{"use strict";var r=n(89509).Buffer,i=n(6972),o=128,a=48,s=2;function c(e){if(r.isBuffer(e))return e;if("string"==typeof e)return r.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function u(e,t,n){for(var r=0;t+r<n&&0===e[t+r];)++r;return e[t+r]>=o&&--r,r}e.exports={derToJose:function(e,t){e=c(e);var n=i(t),u=n+1,l=e.length,f=0;if(e[f++]!==a)throw new Error('Could not find expected "seq"');var d=e[f++];if(d===(1|o)&&(d=e[f++]),l-f<d)throw new Error('"seq" specified length of "'+d+'", only "'+(l-f)+'" remaining');if(e[f++]!==s)throw new Error('Could not find expected "int" for "r"');var p=e[f++];if(l-f-2<p)throw new Error('"r" specified length of "'+p+'", only "'+(l-f-2)+'" available');if(u<p)throw new Error('"r" specified length of "'+p+'", max of "'+u+'" is acceptable');var h=f;if(f+=p,e[f++]!==s)throw new Error('Could not find expected "int" for "s"');var v=e[f++];if(l-f!==v)throw new Error('"s" specified length of "'+v+'", expected "'+(l-f)+'"');if(u<v)throw new Error('"s" specified length of "'+v+'", max of "'+u+'" is acceptable');var m=f;if((f+=v)!==l)throw new Error('Expected to consume entire buffer, but "'+(l-f)+'" bytes remain');var g=n-p,y=n-v,b=r.allocUnsafe(g+p+y+v);for(f=0;f<g;++f)b[f]=0;e.copy(b,f,h+Math.max(-g,0),h+p);for(var w=f=n;f<w+y;++f)b[f]=0;return e.copy(b,f,m+Math.max(-y,0),m+v),b=(b=b.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(e,t){e=c(e);var n=i(t),l=e.length;if(l!==2*n)throw new TypeError('"'+t+'" signatures must be "'+2*n+'" bytes, saw "'+l+'"');var f=u(e,0,n),d=u(e,n,e.length),p=n-f,h=n-d,v=2+p+1+1+h,m=v<o,g=r.allocUnsafe((m?2:3)+v),y=0;return g[y++]=a,m?g[y++]=v:(g[y++]=1|o,g[y++]=255&v),g[y++]=s,g[y++]=p,f<0?(g[y++]=0,y+=e.copy(g,y,0,n)):y+=e.copy(g,y,f,n),g[y++]=s,g[y++]=h,d<0?(g[y++]=0,e.copy(g,y,n)):e.copy(g,y,n+d),g}}},6972:e=>{"use strict";function t(e){return(e/8|0)+(e%8==0?0:1)}var n={ES256:t(256),ES384:t(384),ES512:t(521)};e.exports=function(e){var t=n[e];if(t)return t;throw new Error('Unknown algorithm "'+e+'"')}},17187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}v(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&v(e,"error",t,n)}(e,i,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var i,o,a,u;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):h(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function v(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=o[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=h(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},40001:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";const Token=__webpack_require__(83416),strtok3=__webpack_require__(35849),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=__webpack_require__(76188),supported=__webpack_require__(49898),minimumBytes=4100;async function fromStream(e){const t=await strtok3.fromStream(e);try{return await fromTokenizer(t)}finally{await t.close()}}async function fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||Buffer.isBuffer(e)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof e}\``);const t=e instanceof Buffer?e:Buffer.from(e);if(!(t&&t.length>1))return;return fromTokenizer(strtok3.fromBuffer(t))}function _check(e,t,n){n={offset:0,...n};for(const[r,i]of t.entries())if(n.mask){if(i!==(n.mask[r]&e[r+n.offset]))return!1}else if(i!==e[r+n.offset])return!1;return!0}async function fromTokenizer(e){try{return _fromTokenizer(e)}catch(e){if(!(e instanceof strtok3.EndOfStreamError))throw e}}async function _fromTokenizer(e){let t=Buffer.alloc(minimumBytes);const n=(e,n)=>_check(t,e,n),r=(e,t)=>n(stringToBytes(e),t);if(e.fileInfo.size||(e.fileInfo.size=Number.MAX_SAFE_INTEGER),await e.peekBuffer(t,{length:12,mayBeLess:!0}),n([66,77]))return{ext:"bmp",mime:"image/bmp"};if(n([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(n([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(n([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(n([37,33]))return await e.peekBuffer(t,{length:24,mayBeLess:!0}),r("PS-Adobe-",{offset:2})&&r(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(n([31,160])||n([31,157]))return{ext:"Z",mime:"application/x-compress"};if(n([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(n([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(n([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(n([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(r("ID3")){await e.ignore(6);const i=await e.readToken(uint32SyncSafeToken);return e.position+i>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(i),fromTokenizer(e))}if(r("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((67===t[0]||70===t[0])&&n([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(n([71,73,70]))return{ext:"gif",mime:"image/gif"};if(r("FLIF"))return{ext:"flif",mime:"image/flif"};if(r("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(r("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(r("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(r("FORM"))return{ext:"aif",mime:"audio/aiff"};if(r("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(n([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(t,{length:30});const o={compressedSize:t.readUInt32LE(18),uncompressedSize:t.readUInt32LE(22),filenameLength:t.readUInt16LE(26),extraFieldLength:t.readUInt16LE(28)};if(o.filename=await e.readToken(new Token.StringType(o.filenameLength,"utf-8")),await e.ignore(o.extraFieldLength),"META-INF/mozilla.rsa"===o.filename)return{ext:"xpi",mime:"application/x-xpinstall"};if(o.filename.endsWith(".rels")||o.filename.endsWith(".xml")){switch(o.filename.split("/")[0]){case"_rels":default:break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}}if(o.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(o.filename.startsWith("3D/")&&o.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if("mimetype"===o.filename&&o.compressedSize===o.uncompressedSize){switch(await e.readToken(new Token.StringType(o.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"}}}if(0===o.compressedSize){let a=-1;for(;a<0&&e.position<e.fileInfo.size;)await e.peekBuffer(t,{mayBeLess:!0}),a=t.indexOf("504B0304",0,"hex"),await e.ignore(a>=0?a:t.length)}else await e.ignore(o.compressedSize)}}catch(s){if(!(s instanceof strtok3.EndOfStreamError))throw s}return{ext:"zip",mime:"application/zip"}}if(r("OggS")){await e.ignore(28);const c=Buffer.alloc(8);return await e.readBuffer(c),_check(c,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(c,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(c,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(c,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(c,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(c,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(n([80,75])&&(3===t[2]||5===t[2]||7===t[2])&&(4===t[3]||6===t[3]||8===t[3]))return{ext:"zip",mime:"application/zip"};if(r("ftyp",{offset:4})&&0!=(96&t[8])){const u=t.toString("binary",8,12).replace("\0"," ").trim();switch(u){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return u.startsWith("3g")?u.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(r("MThd"))return{ext:"mid",mime:"audio/midi"};if(r("wOFF")&&(n([0,1,0,0],{offset:4})||r("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(r("wOF2")&&(n([0,1,0,0],{offset:4})||r("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(n([212,195,178,161])||n([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(r("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(r("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(r("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(n([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(r("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(r("%PDF")){await e.ignore(1350);const l=10485760,f=Buffer.alloc(Math.min(l,e.fileInfo.size));return await e.readBuffer(f,{mayBeLess:!0}),f.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(n([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(n([73,73,42,0]))return r("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:n([28,0,254,0],{offset:8})||n([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:n([8,0,0,0],{offset:4})&&(n([45,0,254,0],{offset:8})||n([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(t=Buffer.alloc(24),await e.peekBuffer(t),(n([16,251,134,1],{offset:4})||n([8,0,0,0],{offset:4}))&&n([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(n([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(r("MAC "))return{ext:"ape",mime:"audio/ape"};if(n([26,69,223,163])){async function d(){const t=await e.peekNumber(Token.UINT8);let n=128,r=0;for(;0==(t&n)&&0!==n;)++r,n>>=1;const i=Buffer.alloc(r+1);return await e.readBuffer(i),i}async function p(){const e=await d(),t=await d();t[0]^=128>>t.length-1;const n=Math.min(6,t.length);return{id:e.readUIntBE(0,e.length),len:t.readUIntBE(t.length-n,n)}}async function h(t,n){for(;n>0;){const t=await p();if(17026===t.id)return e.readToken(new Token.StringType(t.len,"utf-8"));await e.ignore(t.len),--n}}const v=await p();switch(await h(0,v.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(n([82,73,70,70])){if(n([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(n([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(n([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(r("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(n([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(r("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(r("MSCF")||r("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(n([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(n([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(n([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(n([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(r("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(r("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(n([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(r("IMPM"))return{ext:"it",mime:"audio/x-it"};if(r("-lh0-",{offset:2})||r("-lh1-",{offset:2})||r("-lh2-",{offset:2})||r("-lh3-",{offset:2})||r("-lh4-",{offset:2})||r("-lh5-",{offset:2})||r("-lh6-",{offset:2})||r("-lh7-",{offset:2})||r("-lzs-",{offset:2})||r("-lz4-",{offset:2})||r("-lz5-",{offset:2})||r("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(n([0,0,1,186])){if(n([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(n([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(r("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(n([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(r("<?xml "))return{ext:"xml",mime:"application/xml"};if(n([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(n([82,97,114,33,26,7])&&(0===t[6]||1===t[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(r("solid "))return{ext:"stl",mime:"model/stl"};if(r("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(r("!<arch>")){await e.ignore(8);return"debian-binary"===await e.readToken(new Token.StringType(13,"ascii"))?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"}}if(n([137,80,78,71,13,10,26,10])){async function m(){return{length:await e.readToken(Token.INT32_BE),type:await e.readToken(new Token.StringType(4,"binary"))}}await e.ignore(8);do{const g=await m();if(g.length<0)return;switch(g.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(g.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(n([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(n([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(n([102,114,101,101],{offset:4})||n([109,100,97,116],{offset:4})||n([109,111,111,118],{offset:4})||n([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(n([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(r("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(n([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(n([48,38,178,117,142,102,207,17,166,217])){async function y(){const t=Buffer.alloc(16);return await e.readBuffer(t),{id:t,size:Number(await e.readToken(Token.UINT64_LE))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const b=await y();let w=b.size-24;if(_check(b.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const _=Buffer.alloc(16);if(w-=await e.readBuffer(_),_check(_,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(_,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(w)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(n([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((n([126,16,4])||n([126,24,4]))&&n([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(n([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(n([0,0,0,12,106,80,32,32,13,10,135,10])){await e.ignore(20);switch(await e.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}}if(n([255,10])||n([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(n([0,0,1,186])||n([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(n([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(n([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(n([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(n([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(t,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),r("BEGIN:")){if(r("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(r("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(r("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(r("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(r("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(n([4,0,0,0])&&t.length>=16){const E=t.readUInt32LE(12);if(E>12&&t.length>=E+16)try{const S=t.slice(16,E+16).toString();if(JSON.parse(S).files)return{ext:"asar",mime:"application/x-asar"}}catch(R){}}if(n([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(r("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(n([71],{offset:4})&&(n([71],{offset:192})||n([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(n([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(n([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(n([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(n([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(n([76,80],{offset:34})&&(n([0,0,1],{offset:8})||n([1,0,2],{offset:8})||n([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(n([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(t,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(t))return{ext:"tar",mime:"application/x-tar"};if(n([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(r("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(t.length>=2&&n([255,224],{offset:0,mask:[255,224]})){if(n([16],{offset:1,mask:[22]}))return n([8],{offset:1,mask:[8]}),{ext:"aac",mime:"audio/aac"};if(n([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(n([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(n([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise(((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",(async()=>{const e=new stream.PassThrough;let t;t=stream.pipeline?stream.pipeline(readableStream,e,(()=>{})):readableStream.pipe(e);const n=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const t=await fromBuffer(n);e.fileType=t}catch(e){reject(e)}resolve(t)}))})),fileType={fromStream,fromTokenizer,fromBuffer,stream};Object.defineProperty(fileType,"extensions",{get:()=>new Set(supported.extensions)}),Object.defineProperty(fileType,"mimeTypes",{get:()=>new Set(supported.mimeTypes)}),module.exports=fileType},97769:(e,t,n)=>{"use strict";const r=n(26597),i=n(40001);const o={fromFile:async function(e){const t=await r.fromFile(e);try{return await i.fromTokenizer(t)}finally{await t.close()}}};Object.assign(o,i),Object.defineProperty(o,"extensions",{get:()=>i.extensions}),Object.defineProperty(o,"mimeTypes",{get:()=>i.mimeTypes}),e.exports=o},49898:e=>{"use strict";e.exports={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}},76188:(e,t)=>{"use strict";t.stringToBytes=e=>[...e].map((e=>e.charCodeAt(0))),t.tarHeaderChecksumMatches=(e,t=0)=>{const n=parseInt(e.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(n))return!1;let r=256;for(let n=t;n<t+148;n++)r+=e[n];for(let n=t+156;n<t+512;n++)r+=e[n];return n===r},t.uint32SyncSafeToken={get:(e,t)=>127&e[t+3]|e[t+2]<<7|e[t+1]<<14|e[t]<<21,len:4}},94029:(e,t,n)=>{"use strict";var r=n(95320),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=n),"[object Array]"===i.call(e)?function(e,t,n){for(var r=0,i=e.length;r<i;r++)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,a):"string"==typeof e?function(e,t,n){for(var r=0,i=e.length;r<i;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)}(e,t,a):function(e,t,n){for(var r in e)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))}(e,t,a)}},17648:e=>{"use strict";var t=Array.prototype.slice,n=Object.prototype.toString;e.exports=function(e){var r=this;if("function"!=typeof r||"[object Function]"!==n.call(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var i,o=t.call(arguments,1),a=Math.max(0,r.length-o.length),s=[],c=0;c<a;c++)s.push("$"+c);if(i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var n=r.apply(this,o.concat(t.call(arguments)));return Object(n)===n?n:this}return r.apply(e,o.concat(t.call(arguments)))})),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i}},58612:(e,t,n)=>{"use strict";var r=n(17648);e.exports=Function.prototype.bind||r},40210:(e,t,n)=>{"use strict";var r,i=SyntaxError,o=Function,a=TypeError,s=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var u=function(){throw new a},l=c?function(){try{return u}catch(e){try{return c(arguments,"callee").get}catch(e){return u}}}():u,f=n(41405)(),d=Object.getPrototypeOf||function(e){return e.__proto__},p={},h="undefined"==typeof Uint8Array?r:d(Uint8Array),v={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":f?d([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f?d(d([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&f?d((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&f?d((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f?d(""[Symbol.iterator]()):r,"%Symbol%":f?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":l,"%TypedArray%":h,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};try{null.error}catch(e){var m=d(d(e));v["%Error.prototype%"]=m}var g=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=d(i.prototype))}return v[t]=n,n},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},b=n(58612),w=n(17642),_=b.call(Function.call,Array.prototype.concat),E=b.call(Function.apply,Array.prototype.splice),S=b.call(Function.call,String.prototype.replace),R=b.call(Function.call,String.prototype.slice),x=b.call(Function.call,RegExp.prototype.exec),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,k=/\\(\\)?/g,T=function(e,t){var n,r=e;if(w(y,r)&&(r="%"+(n=y[r])[0]+"%"),w(v,r)){var o=v[r];if(o===p&&(o=g(r)),void 0===o&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===x(/^%?[^%]*%?$/,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=R(e,0,1),n=R(e,-1);if("%"===t&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return S(e,C,(function(e,t,n,i){r[r.length]=n?S(i,k,"$1"):t||e})),r}(e),r=n.length>0?n[0]:"",o=T("%"+r+"%",t),s=o.name,u=o.value,l=!1,f=o.alias;f&&(r=f[0],E(n,_([0,1],f)));for(var d=1,p=!0;d<n.length;d+=1){var h=n[d],m=R(h,0,1),g=R(h,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new i("property names with quotes must have matching quotes");if("constructor"!==h&&p||(l=!0),w(v,s="%"+(r+="."+h)+"%"))u=v[s];else if(null!=u){if(!(h in u)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&d+1>=n.length){var y=c(u,h);u=(p=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:u[h]}else p=w(u,h),u=u[h];p&&!l&&(v[s]=u)}}return u}},58908:(e,t,n)=>{var r;r="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},e.exports=r},27296:(e,t,n)=>{"use strict";var r=n(40210)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(e){r=null}e.exports=r},41405:(e,t,n)=>{"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(55419);e.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},55419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},96410:(e,t,n)=>{"use strict";var r=n(55419);e.exports=function(){return r()&&!!Symbol.toStringTag}},17642:(e,t,n)=>{"use strict";var r=n(58612);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},80645:(e,t)=>{t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,f=n?i-1:0,d=n?-1:1,p=e[t+f];for(f+=d,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=d,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+f>=1?d/c:d*Math.pow(2,1-f))*c>=2&&(a++,c/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*c-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*v}},35717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},82584:(e,t,n)=>{"use strict";var r=n(96410)(),i=n(21924)("Object.prototype.toString"),o=function(e){return!(r&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},a=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,e.exports=s?o:a},95320:e=>{"use strict";var t,n,r=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},i((function(){throw 42}),null,t)}catch(e){e!==n&&(i=null)}else i=null;var o=/^\s*class\b/,a=function(e){try{var t=r.call(e);return o.test(t)}catch(e){return!1}},s=function(e){try{return!a(e)&&(r.call(e),!0)}catch(e){return!1}},c=Object.prototype.toString,u="function"==typeof Symbol&&!!Symbol.toStringTag,l=!(0 in[,]),f=function(){return!1};if("object"==typeof document){var d=document.all;c.call(d)===c.call(document.all)&&(f=function(e){if((l||!e)&&(void 0===e||"object"==typeof e))try{var t=c.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(e){}return!1})}e.exports=i?function(e){if(f(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;try{i(e,null,t)}catch(e){if(e!==n)return!1}return!a(e)&&s(e)}:function(e){if(f(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(u)return s(e);if(a(e))return!1;var t=c.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&s(e)}},27376:e=>{e.exports=function(e){if(!e)return!1;var n=t.call(e);return"[object Function]"===n||"function"==typeof e&&"[object RegExp]"!==n||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var t=Object.prototype.toString},48662:(e,t,n)=>{"use strict";var r,i=Object.prototype.toString,o=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=n(96410)(),c=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(a.test(o.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===i.call(e);if(!c)return!1;if(void 0===r){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();r=!!t&&c(t)}return c(e)===r}},85692:(e,t,n)=>{"use strict";var r=n(94029),i=n(63083),o=n(21924),a=o("Object.prototype.toString"),s=n(96410)(),c=n(27296),u="undefined"==typeof globalThis?n.g:globalThis,l=i(),f=o("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},d=o("String.prototype.slice"),p={},h=Object.getPrototypeOf;s&&c&&h&&r(l,(function(e){var t=new u[e];if(Symbol.toStringTag in t){var n=h(t),r=c(n,Symbol.toStringTag);if(!r){var i=h(n);r=c(i,Symbol.toStringTag)}p[e]=r.get}}));e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!s||!(Symbol.toStringTag in e)){var t=d(a(e),8,-1);return f(l,t)>-1}return!!c&&function(e){var t=!1;return r(p,(function(n,r){if(!t)try{t=n.call(e)===r}catch(e){}})),t}(e)}},97626:(e,t,n)=>{var r=n(40158);e.exports=function(e,t){t=t||{};var n=r.decode(e,t);if(!n)return null;var i=n.payload;if("string"==typeof i)try{var o=JSON.parse(i);null!==o&&"object"==typeof o&&(i=o)}catch(e){}return!0===t.complete?{header:n.header,payload:i,signature:n.signature}:i}},49704:(e,t,n)=>{e.exports={verify:n(17030),sign:n(22506),JsonWebTokenError:n(58619),NotBeforeError:n(71826),TokenExpiredError:n(2340)},Object.defineProperty(e.exports,"decode",{enumerable:!1,value:n(97626)})},58619:e=>{var t=function(e,t){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,t&&(this.inner=t)};(t.prototype=Object.create(Error.prototype)).constructor=t,e.exports=t},71826:(e,t,n)=>{var r=n(58619),i=function(e,t){r.call(this,e),this.name="NotBeforeError",this.date=t};(i.prototype=Object.create(r.prototype)).constructor=i,e.exports=i},2340:(e,t,n)=>{var r=n(58619),i=function(e,t){r.call(this,e),this.name="TokenExpiredError",this.expiredAt=t};(i.prototype=Object.create(r.prototype)).constructor=i,e.exports=i},85599:(e,t,n)=>{var r=n(34155);const i=n(81249);e.exports=i.satisfies(r.version,">=15.7.0")},14964:(e,t,n)=>{var r=n(34155),i=n(81249);e.exports=i.satisfies(r.version,"^6.12.0 || >=8.0.0")},91564:(e,t,n)=>{var r=n(34155);const i=n(81249);e.exports=i.satisfies(r.version,">=16.9.0")},68034:(e,t,n)=>{var r=n(57824);e.exports=function(e,t){var n=t||Math.floor(Date.now()/1e3);if("string"==typeof e){var i=r(e);if(void 0===i)return;return Math.floor(n+i/1e3)}return"number"==typeof e?n+e:void 0}},47566:(e,t,n)=>{const r=n(85599),i=n(91564),o={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},a={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};e.exports=function(e,t){if(!e||!t)return;const n=t.asymmetricKeyType;if(!n)return;const s=o[n];if(!s)throw new Error(`Unknown key type "${n}".`);if(!s.includes(e))throw new Error(`"alg" parameter for "${n}" key type must be one of: ${s.join(", ")}.`);if(r)switch(n){case"ec":const n=t.asymmetricKeyDetails.namedCurve,r=a[e];if(n!==r)throw new Error(`"alg" parameter "${e}" requires curve "${r}".`);break;case"rsa-pss":if(i){const n=parseInt(e.slice(-3),10),{hashAlgorithm:r,mgf1HashAlgorithm:i,saltLength:o}=t.asymmetricKeyDetails;if(r!==`sha${n}`||i!==r)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(void 0!==o&&o>n>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}}}},22506:(e,t,n)=>{const r=n(68034),i=n(14964),o=n(47566),a=n(40158),{includes:s,isBoolean:c,isInteger:u,isNumber:l,isPlainObject:f,isString:d,once:p}=n(96486),{KeyObject:h,createSecretKey:v,createPrivateKey:m}=n(66507),g=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];i&&g.splice(3,0,"PS256","PS384","PS512");const y={expiresIn:{isValid:function(e){return u(e)||d(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return u(e)||d(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return d(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:s.bind(null,g),message:'"algorithm" must be a valid string enum value'},header:{isValid:f,message:'"header" must be an object'},encoding:{isValid:d,message:'"encoding" must be a string'},issuer:{isValid:d,message:'"issuer" must be a string'},subject:{isValid:d,message:'"subject" must be a string'},jwtid:{isValid:d,message:'"jwtid" must be a string'},noTimestamp:{isValid:c,message:'"noTimestamp" must be a boolean'},keyid:{isValid:d,message:'"keyid" must be a string'},mutatePayload:{isValid:c,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:c,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:c,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},b={iat:{isValid:l,message:'"iat" should be a number of seconds'},exp:{isValid:l,message:'"exp" should be a number of seconds'},nbf:{isValid:l,message:'"nbf" should be a number of seconds'}};function w(e,t,n,r){if(!f(n))throw new Error('Expected "'+r+'" to be a plain object.');Object.keys(n).forEach((function(i){const o=e[i];if(o){if(!o.isValid(n[i]))throw new Error(o.message)}else if(!t)throw new Error('"'+i+'" is not allowed in "'+r+'"')}))}const _={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},E=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];e.exports=function(e,t,n,i){"function"==typeof n?(i=n,n={}):n=n||{};const s="object"==typeof e&&!Buffer.isBuffer(e),c=Object.assign({alg:n.algorithm||"HS256",typ:s?"JWT":void 0,kid:n.keyid},n.header);function u(e){if(i)return i(e);throw e}if(!t&&"none"!==n.algorithm)return u(new Error("secretOrPrivateKey must have a value"));if(null!=t&&!(t instanceof h))try{t=m(t)}catch(e){try{t=v("string"==typeof t?Buffer.from(t):t)}catch(e){return u(new Error("secretOrPrivateKey is not valid key material"))}}if(c.alg.startsWith("HS")&&"secret"!==t.type)return u(new Error(`secretOrPrivateKey must be a symmetric key when using ${c.alg}`));if(/^(?:RS|PS|ES)/.test(c.alg)){if("private"!==t.type)return u(new Error(`secretOrPrivateKey must be an asymmetric key when using ${c.alg}`));if(!n.allowInsecureKeySizes&&!c.alg.startsWith("ES")&&void 0!==t.asymmetricKeyDetails&&t.asymmetricKeyDetails.modulusLength<2048)return u(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`))}if(void 0===e)return u(new Error("payload is required"));if(s){try{!function(e){w(b,!0,e,"payload")}(e)}catch(e){return u(e)}n.mutatePayload||(e=Object.assign({},e))}else{const t=E.filter((function(e){return void 0!==n[e]}));if(t.length>0)return u(new Error("invalid "+t.join(",")+" option for "+typeof e+" payload"))}if(void 0!==e.exp&&void 0!==n.expiresIn)return u(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==e.nbf&&void 0!==n.notBefore)return u(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{!function(e){w(y,!1,e,"options")}(n)}catch(e){return u(e)}if(!n.allowInvalidAsymmetricKeyTypes)try{o(c.alg,t)}catch(e){return u(e)}const l=e.iat||Math.floor(Date.now()/1e3);if(n.noTimestamp?delete e.iat:s&&(e.iat=l),void 0!==n.notBefore){try{e.nbf=r(n.notBefore,l)}catch(e){return u(e)}if(void 0===e.nbf)return u(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==n.expiresIn&&"object"==typeof e){try{e.exp=r(n.expiresIn,l)}catch(e){return u(e)}if(void 0===e.exp)return u(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(_).forEach((function(t){const r=_[t];if(void 0!==n[t]){if(void 0!==e[r])return u(new Error('Bad "options.'+t+'" option. The payload already has an "'+r+'" property.'));e[r]=n[t]}}));const f=n.encoding||"utf8";if("function"!=typeof i){let r=a.sign({header:c,payload:e,secret:t,encoding:f});if(!n.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&r.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`);return r}i=i&&p(i),a.createSign({header:c,privateKey:t,payload:e,encoding:f}).once("error",i).once("done",(function(e){if(!n.allowInsecureKeySizes&&/^(?:RS|PS)/.test(c.alg)&&e.length<256)return i(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${c.alg}`));i(null,e)}))}},17030:(e,t,n)=>{const r=n(58619),i=n(71826),o=n(2340),a=n(97626),s=n(68034),c=n(47566),u=n(14964),l=n(40158),{KeyObject:f,createSecretKey:d,createPublicKey:p}=n(66507),h=["RS256","RS384","RS512"],v=["ES256","ES384","ES512"],m=["RS256","RS384","RS512"],g=["HS256","HS384","HS512"];u&&(h.splice(h.length,0,"PS256","PS384","PS512"),m.splice(m.length,0,"PS256","PS384","PS512")),e.exports=function(e,t,n,u){let y;if("function"!=typeof n||u||(u=n,n={}),n||(n={}),n=Object.assign({},n),y=u||function(e,t){if(e)throw e;return t},n.clockTimestamp&&"number"!=typeof n.clockTimestamp)return y(new r("clockTimestamp must be a number"));if(void 0!==n.nonce&&("string"!=typeof n.nonce||""===n.nonce.trim()))return y(new r("nonce must be a non-empty string"));if(void 0!==n.allowInvalidAsymmetricKeyTypes&&"boolean"!=typeof n.allowInvalidAsymmetricKeyTypes)return y(new r("allowInvalidAsymmetricKeyTypes must be a boolean"));const b=n.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return y(new r("jwt must be provided"));if("string"!=typeof e)return y(new r("jwt must be a string"));const w=e.split(".");if(3!==w.length)return y(new r("jwt malformed"));let _;try{_=a(e,{complete:!0})}catch(e){return y(e)}if(!_)return y(new r("invalid token"));const E=_.header;let S;if("function"==typeof t){if(!u)return y(new r("verify must be called asynchronous if secret or public key is provided as a callback"));S=t}else S=function(e,n){return n(null,t)};return S(E,(function(t,a){if(t)return y(new r("error in secret or public key callback: "+t.message));const u=""!==w[2].trim();if(!u&&a)return y(new r("jwt signature is required"));if(u&&!a)return y(new r("secret or public key must be provided"));if(!u&&!n.algorithms)return y(new r('please specify "none" in "algorithms" to verify unsigned tokens'));if(null!=a&&!(a instanceof f))try{a=p(a)}catch(e){try{a=d("string"==typeof a?Buffer.from(a):a)}catch(e){return y(new r("secretOrPublicKey is not valid key material"))}}if(n.algorithms||("secret"===a.type?n.algorithms=g:["rsa","rsa-pss"].includes(a.asymmetricKeyType)?n.algorithms=m:"ec"===a.asymmetricKeyType?n.algorithms=v:n.algorithms=h),-1===n.algorithms.indexOf(_.header.alg))return y(new r("invalid algorithm"));if(E.alg.startsWith("HS")&&"secret"!==a.type)return y(new r(`secretOrPublicKey must be a symmetric key when using ${E.alg}`));if(/^(?:RS|PS|ES)/.test(E.alg)&&"public"!==a.type)return y(new r(`secretOrPublicKey must be an asymmetric key when using ${E.alg}`));if(!n.allowInvalidAsymmetricKeyTypes)try{c(E.alg,a)}catch(e){return y(e)}let S;try{S=l.verify(e,_.header.alg,a)}catch(e){return y(e)}if(!S)return y(new r("invalid signature"));const R=_.payload;if(void 0!==R.nbf&&!n.ignoreNotBefore){if("number"!=typeof R.nbf)return y(new r("invalid nbf value"));if(R.nbf>b+(n.clockTolerance||0))return y(new i("jwt not active",new Date(1e3*R.nbf)))}if(void 0!==R.exp&&!n.ignoreExpiration){if("number"!=typeof R.exp)return y(new r("invalid exp value"));if(b>=R.exp+(n.clockTolerance||0))return y(new o("jwt expired",new Date(1e3*R.exp)))}if(n.audience){const e=Array.isArray(n.audience)?n.audience:[n.audience];if(!(Array.isArray(R.aud)?R.aud:[R.aud]).some((function(t){return e.some((function(e){return e instanceof RegExp?e.test(t):e===t}))})))return y(new r("jwt audience invalid. expected: "+e.join(" or ")))}if(n.issuer){if("string"==typeof n.issuer&&R.iss!==n.issuer||Array.isArray(n.issuer)&&-1===n.issuer.indexOf(R.iss))return y(new r("jwt issuer invalid. expected: "+n.issuer))}if(n.subject&&R.sub!==n.subject)return y(new r("jwt subject invalid. expected: "+n.subject));if(n.jwtid&&R.jti!==n.jwtid)return y(new r("jwt jwtid invalid. expected: "+n.jwtid));if(n.nonce&&R.nonce!==n.nonce)return y(new r("jwt nonce invalid. expected: "+n.nonce));if(n.maxAge){if("number"!=typeof R.iat)return y(new r("iat required when maxAge is specified"));const e=s(n.maxAge,R.iat);if(void 0===e)return y(new r('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(b>=e+(n.clockTolerance||0))return y(new o("maxAge exceeded",new Date(1e3*e)))}if(!0===n.complete){const e=_.signature;return y(null,{header:E,payload:R,signature:e})}return y(null,R)}))}},54178:(e,t,n)=>{var r=n(88500),i=n(89509).Buffer,o=n(86035),a=n(35015),s=n(89539),c="secret must be a string or buffer",u="key must be a string or a buffer",l="key must be a string, a buffer or an object",f="function"==typeof o.createPublicKey;function d(e){if(!i.isBuffer(e)&&"string"!=typeof e){if(!f)throw m(u);if("object"!=typeof e)throw m(u);if("string"!=typeof e.type)throw m(u);if("string"!=typeof e.asymmetricKeyType)throw m(u);if("function"!=typeof e.export)throw m(u)}}function p(e){if(!i.isBuffer(e)&&"string"!=typeof e&&"object"!=typeof e)throw m(l)}function h(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function v(e){var t=4-(e=e.toString()).length%4;if(4!==t)for(var n=0;n<t;++n)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function m(e){var t=[].slice.call(arguments,1),n=s.format.bind(s,e).apply(null,t);return new TypeError(n)}function g(e){var t;return t=e,i.isBuffer(t)||"string"==typeof t||(e=JSON.stringify(e)),e}function y(e){return function(t,n){!function(e){if(!i.isBuffer(e)){if("string"==typeof e)return e;if(!f)throw m(c);if("object"!=typeof e)throw m(c);if("secret"!==e.type)throw m(c);if("function"!=typeof e.export)throw m(c)}}(n),t=g(t);var r=o.createHmac("sha"+e,n);return h((r.update(t),r.digest("base64")))}}function b(e){return function(t,n,o){var a=y(e)(t,o);return r(i.from(n),i.from(a))}}function w(e){return function(t,n){p(n),t=g(t);var r=o.createSign("RSA-SHA"+e);return h((r.update(t),r.sign(n,"base64")))}}function _(e){return function(t,n,r){d(r),t=g(t),n=v(n);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify(r,n,"base64")}}function E(e){return function(t,n){p(n),t=g(t);var r=o.createSign("RSA-SHA"+e);return h((r.update(t),r.sign({key:n,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function S(e){return function(t,n,r){d(r),t=g(t),n=v(n);var i=o.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:r,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function R(e){var t=w(e);return function(){var n=t.apply(null,arguments);return n=a.derToJose(n,"ES"+e)}}function x(e){var t=_(e);return function(n,r,i){return r=a.joseToDer(r,"ES"+e).toString("base64"),t(n,r,i)}}function C(){return function(){return""}}function k(){return function(e,t){return""===t}}f&&(u+=" or a KeyObject",c+="or a KeyObject"),e.exports=function(e){var t={hs:y,rs:w,ps:E,es:R,none:C},n={hs:b,rs:_,ps:S,es:x,none:k},r=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!r)throw m('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',e);var i=(r[1]||r[3]).toLowerCase(),o=r[2];return{sign:t[i](o),verify:n[i](o)}}},40158:(e,t,n)=>{var r=n(48952),i=n(43079);t.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],t.sign=r.sign,t.verify=i.verify,t.decode=i.decode,t.isValid=i.isValid,t.createSign=function(e){return new r(e)},t.createVerify=function(e){return new i(e)}},97006:(e,t,n)=>{var r=n(34155),i=n(89509).Buffer,o=n(42830);function a(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=i.alloc(0),this;if("function"==typeof e.pipe)return this.buffer=i.alloc(0),e.pipe(this),this;if(e.length||"object"==typeof e)return this.buffer=e,this.writable=!1,r.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}n(89539).inherits(a,o),a.prototype.write=function(e){this.buffer=i.concat([this.buffer,i.from(e)]),this.emit("data",e)},a.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1},e.exports=a},48952:(e,t,n)=>{var r=n(89509).Buffer,i=n(97006),o=n(54178),a=n(42830),s=n(32010),c=n(89539);function u(e,t){return r.from(e,t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l(e){var t=e.header,n=e.payload,r=e.secret||e.privateKey,i=e.encoding,a=o(t.alg),l=function(e,t,n){n=n||"utf8";var r=u(s(e),"binary"),i=u(s(t),n);return c.format("%s.%s",r,i)}(t,n,i),f=a.sign(l,r);return c.format("%s.%s",l,f)}function f(e){var t=e.secret||e.privateKey||e.key,n=new i(t);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=n,this.payload=new i(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}c.inherits(f,a),f.prototype.sign=function(){try{var e=l({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},f.sign=l,e.exports=f},32010:(e,t,n)=>{var r=n(48764).Buffer;e.exports=function(e){return"string"==typeof e?e:"number"==typeof e||r.isBuffer(e)?e.toString():JSON.stringify(e)}},43079:(e,t,n)=>{var r=n(89509).Buffer,i=n(97006),o=n(54178),a=n(42830),s=n(32010),c=n(89539),u=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function l(e){if(function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e))return e;try{return JSON.parse(e)}catch(e){return}}function f(e){var t=e.split(".",1)[0];return l(r.from(t,"base64").toString("binary"))}function d(e){return e.split(".")[2]}function p(e){return u.test(e)&&!!f(e)}function h(e,t,n){if(!t){var r=new Error("Missing algorithm parameter for jws.verify");throw r.code="MISSING_ALGORITHM",r}var i=d(e=s(e)),a=function(e){return e.split(".",2).join(".")}(e);return o(t).verify(a,i,n)}function v(e,t){if(t=t||{},!p(e=s(e)))return null;var n=f(e);if(!n)return null;var i=function(e,t){t=t||"utf8";var n=e.split(".")[1];return r.from(n,"base64").toString(t)}(e);return("JWT"===n.typ||t.json)&&(i=JSON.parse(i,t.encoding)),{header:n,payload:i,signature:d(e)}}function m(e){var t=(e=e||{}).secret||e.publicKey||e.key,n=new i(t);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=n,this.signature=new i(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}c.inherits(m,a),m.prototype.verify=function(){try{var e=h(this.signature.buffer,this.algorithm,this.key.buffer),t=v(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(e){this.readable=!1,this.emit("error",e),this.emit("close")}},m.decode=v,m.isValid=p,m.verify=h,e.exports=m},78414:e=>{var t=Array.prototype.slice;function n(e){if("object"!=typeof(e=e||{}))throw new TypeError("Options must be an object");this.storage={},this.separator=e.separator||"."}n.prototype.add=function(e,t){(this.storage[e]||(this.storage[e]=[])).push(t)},n.prototype.remove=function(e){var t,n;for(t in this.storage)(n=this.storage[t]).some((function(t,r){if(t===e)return n.splice(r,1),!0}))},n.prototype.get=function(e){var t,n=[];for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+this.separator)||(n=n.concat(this.storage[t]));return n},n.prototype.getGrouped=function(e){var n,r={};for(n in this.storage)e&&e!==n&&0!==n.indexOf(e+this.separator)||(r[n]=t.call(this.storage[n]));return r},n.prototype.getAll=function(e){var n,r={};for(n in this.storage)e!==n&&0!==n.indexOf(e+this.separator)||(r[n]=t.call(this.storage[n]));return r},n.prototype.run=function(e,n){var r=t.call(arguments,2);this.get(e).forEach((function(e){e.apply(n||this,r)}))},e.exports=n},18552:(e,t,n)=>{var r=n(10852)(n(55639),"DataView");e.exports=r},1989:(e,t,n)=>{var r=n(51789),i=n(80401),o=n(57667),a=n(21327),s=n(81866);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},96425:(e,t,n)=>{var r=n(3118),i=n(9435),o=4294967295;function a(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=o,this.__views__=[]}a.prototype=r(i.prototype),a.prototype.constructor=a,e.exports=a},38407:(e,t,n)=>{var r=n(27040),i=n(14125),o=n(82117),a=n(67518),s=n(54705);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},7548:(e,t,n)=>{var r=n(3118),i=n(9435);function o(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}o.prototype=r(i.prototype),o.prototype.constructor=o,e.exports=o},57071:(e,t,n)=>{var r=n(10852)(n(55639),"Map");e.exports=r},83369:(e,t,n)=>{var r=n(24785),i=n(11285),o=n(96e3),a=n(49916),s=n(95265);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},53818:(e,t,n)=>{var r=n(10852)(n(55639),"Promise");e.exports=r},58525:(e,t,n)=>{var r=n(10852)(n(55639),"Set");e.exports=r},88668:(e,t,n)=>{var r=n(83369),i=n(90619),o=n(72385);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},46384:(e,t,n)=>{var r=n(38407),i=n(37465),o=n(63779),a=n(67599),s=n(44758),c=n(34309);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=c,e.exports=u},62705:(e,t,n)=>{var r=n(55639).Symbol;e.exports=r},11149:(e,t,n)=>{var r=n(55639).Uint8Array;e.exports=r},70577:(e,t,n)=>{var r=n(10852)(n(55639),"WeakMap");e.exports=r},96874:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},44174:e=>{e.exports=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}},77412:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},34963:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},47443:(e,t,n)=>{var r=n(42118);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},1196:e=>{e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},14636:(e,t,n)=>{var r=n(22545),i=n(35694),o=n(1469),a=n(44144),s=n(65776),c=n(36719),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),f=!n&&!l&&a(e),d=!n&&!l&&!f&&c(e),p=n||l||f||d,h=p?r(e.length,String):[],v=h.length;for(var m in e)!t&&!u.call(e,m)||p&&("length"==m||f&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,v))||h.push(m);return h}},29932:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},62488:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},62663:e=>{e.exports=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}},82908:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},44286:e=>{e.exports=function(e){return e.split("")}},49029:e=>{var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(t)||[]}},86556:(e,t,n)=>{var r=n(89465),i=n(77813);e.exports=function(e,t,n){(void 0!==n&&!i(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},34865:(e,t,n)=>{var r=n(89465),i=n(77813),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},18470:(e,t,n)=>{var r=n(77813);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},81119:(e,t,n)=>{var r=n(89881);e.exports=function(e,t,n,i){return r(e,(function(e,r,o){t(i,e,n(e),o)})),i}},44037:(e,t,n)=>{var r=n(98363),i=n(3674);e.exports=function(e,t){return e&&r(t,i(t),e)}},63886:(e,t,n)=>{var r=n(98363),i=n(81704);e.exports=function(e,t){return e&&r(t,i(t),e)}},89465:(e,t,n)=>{var r=n(38777);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},85990:(e,t,n)=>{var r=n(46384),i=n(77412),o=n(34865),a=n(44037),s=n(63886),c=n(64626),u=n(278),l=n(18805),f=n(1911),d=n(58234),p=n(46904),h=n(64160),v=n(43824),m=n(29148),g=n(38517),y=n(1469),b=n(44144),w=n(56688),_=n(13218),E=n(72928),S=n(3674),R=n(81704),x=1,C=2,k=4,T="[object Arguments]",I="[object Function]",O="[object GeneratorFunction]",A="[object Object]",L={};L[T]=L["[object Array]"]=L["[object ArrayBuffer]"]=L["[object DataView]"]=L["[object Boolean]"]=L["[object Date]"]=L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Map]"]=L["[object Number]"]=L[A]=L["[object RegExp]"]=L["[object Set]"]=L["[object String]"]=L["[object Symbol]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L["[object Error]"]=L[I]=L["[object WeakMap]"]=!1,e.exports=function e(t,n,M,P,N,D){var U,Z=n&x,j=n&C,F=n&k;if(M&&(U=N?M(t,P,N,D):M(t)),void 0!==U)return U;if(!_(t))return t;var B=y(t);if(B){if(U=v(t),!Z)return u(t,U)}else{var V=h(t),q=V==I||V==O;if(b(t))return c(t,Z);if(V==A||V==T||q&&!N){if(U=j||q?{}:g(t),!Z)return j?f(t,s(U,t)):l(t,a(U,t))}else{if(!L[V])return N?t:{};U=m(t,V,Z)}}D||(D=new r);var W=D.get(t);if(W)return W;D.set(t,U),E(t)?t.forEach((function(r){U.add(e(r,n,M,r,t,D))})):w(t)&&t.forEach((function(r,i){U.set(i,e(r,n,M,i,t,D))}));var z=B?void 0:(F?j?p:d:j?R:S)(t);return i(z||t,(function(r,i){z&&(r=t[i=r]),o(U,i,e(r,n,M,i,t,D))})),U}},3118:(e,t,n)=>{var r=n(13218),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},89881:(e,t,n)=>{var r=n(47816),i=n(99291)(r);e.exports=i},41848:e=>{e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},21078:(e,t,n)=>{var r=n(62488),i=n(37285);e.exports=function e(t,n,o,a,s){var c=-1,u=t.length;for(o||(o=i),s||(s=[]);++c<u;){var l=t[c];n>0&&o(l)?n>1?e(l,n-1,o,a,s):r(s,l):a||(s[s.length]=l)}return s}},28483:(e,t,n)=>{var r=n(25063)();e.exports=r},47816:(e,t,n)=>{var r=n(28483),i=n(3674);e.exports=function(e,t){return e&&r(e,t,i)}},97786:(e,t,n)=>{var r=n(71811),i=n(40327);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},68866:(e,t,n)=>{var r=n(62488),i=n(1469);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},44239:(e,t,n)=>{var r=n(62705),i=n(89607),o=n(2333),a="[object Null]",s="[object Undefined]",c=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:a:c&&c in Object(e)?i(e):o(e)}},78565:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return null!=e&&t.call(e,n)}},13:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},42118:(e,t,n)=>{var r=n(41848),i=n(62722),o=n(42351);e.exports=function(e,t,n){return t==t?o(e,t,n):r(e,i,n)}},9454:(e,t,n)=>{var r=n(44239),i=n(37005),o="[object Arguments]";e.exports=function(e){return i(e)&&r(e)==o}},41761:(e,t,n)=>{var r=n(44239),i=n(37005),o="[object Date]";e.exports=function(e){return i(e)&&r(e)==o}},90939:(e,t,n)=>{var r=n(2492),i=n(37005);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,a,e,s))}},2492:(e,t,n)=>{var r=n(46384),i=n(67114),o=n(18351),a=n(16096),s=n(64160),c=n(1469),u=n(44144),l=n(36719),f=1,d="[object Arguments]",p="[object Array]",h="[object Object]",v=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,y){var b=c(e),w=c(t),_=b?p:s(e),E=w?p:s(t),S=(_=_==d?h:_)==h,R=(E=E==d?h:E)==h,x=_==E;if(x&&u(e)){if(!u(t))return!1;b=!0,S=!1}if(x&&!S)return y||(y=new r),b||l(e)?i(e,t,n,m,g,y):o(e,t,_,n,m,g,y);if(!(n&f)){var C=S&&v.call(e,"__wrapped__"),k=R&&v.call(t,"__wrapped__");if(C||k){var T=C?e.value():e,I=k?t.value():t;return y||(y=new r),g(T,I,n,m,y)}}return!!x&&(y||(y=new r),a(e,t,n,m,g,y))}},25588:(e,t,n)=>{var r=n(64160),i=n(37005),o="[object Map]";e.exports=function(e){return i(e)&&r(e)==o}},2958:(e,t,n)=>{var r=n(46384),i=n(90939),o=1,a=2;e.exports=function(e,t,n,s){var c=n.length,u=c,l=!s;if(null==e)return!u;for(e=Object(e);c--;){var f=n[c];if(l&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++c<u;){var d=(f=n[c])[0],p=e[d],h=f[1];if(l&&f[2]){if(void 0===p&&!(d in e))return!1}else{var v=new r;if(s)var m=s(p,h,d,e,t,v);if(!(void 0===m?i(h,p,o|a,s,v):m))return!1}}return!0}},62722:e=>{e.exports=function(e){return e!=e}},28458:(e,t,n)=>{var r=n(23560),i=n(37724),o=n(13218),a=n(80346),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,f=u.hasOwnProperty,d=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:s).test(a(e))}},29221:(e,t,n)=>{var r=n(64160),i=n(37005),o="[object Set]";e.exports=function(e){return i(e)&&r(e)==o}},38749:(e,t,n)=>{var r=n(44239),i=n(41780),o=n(37005),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},67206:(e,t,n)=>{var r=n(91573),i=n(16432),o=n(6557),a=n(1469),s=n(39601);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},280:(e,t,n)=>{var r=n(25726),i=n(86916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},10313:(e,t,n)=>{var r=n(13218),i=n(25726),o=n(33498),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},9435:e=>{e.exports=function(){}},91573:(e,t,n)=>{var r=n(2958),i=n(1499),o=n(42634);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},16432:(e,t,n)=>{var r=n(90939),i=n(27361),o=n(79095),a=n(15403),s=n(89162),c=n(42634),u=n(40327),l=1,f=2;e.exports=function(e,t){return a(e)&&s(t)?c(u(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,l|f)}}},42980:(e,t,n)=>{var r=n(46384),i=n(86556),o=n(28483),a=n(59783),s=n(13218),c=n(81704),u=n(36390);e.exports=function e(t,n,l,f,d){t!==n&&o(n,(function(o,c){if(d||(d=new r),s(o))a(t,n,c,l,e,f,d);else{var p=f?f(u(t,c),o,c+"",t,n,d):void 0;void 0===p&&(p=o),i(t,c,p)}}),c)}},59783:(e,t,n)=>{var r=n(86556),i=n(64626),o=n(77133),a=n(278),s=n(38517),c=n(35694),u=n(1469),l=n(29246),f=n(44144),d=n(23560),p=n(13218),h=n(68630),v=n(36719),m=n(36390),g=n(59881);e.exports=function(e,t,n,y,b,w,_){var E=m(e,n),S=m(t,n),R=_.get(S);if(R)r(e,n,R);else{var x=w?w(E,S,n+"",e,t,_):void 0,C=void 0===x;if(C){var k=u(S),T=!k&&f(S),I=!k&&!T&&v(S);x=S,k||T||I?u(E)?x=E:l(E)?x=a(E):T?(C=!1,x=i(S,!0)):I?(C=!1,x=o(S,!0)):x=[]:h(S)||c(S)?(x=E,c(E)?x=g(E):p(E)&&!d(E)||(x=s(S))):C=!1}C&&(_.set(S,x),b(x,S,y,w,_),_.delete(S)),r(e,n,x)}}},25970:(e,t,n)=>{var r=n(63012),i=n(79095);e.exports=function(e,t){return r(e,t,(function(t,n){return i(e,n)}))}},63012:(e,t,n)=>{var r=n(97786),i=n(10611),o=n(71811);e.exports=function(e,t,n){for(var a=-1,s=t.length,c={};++a<s;){var u=t[a],l=r(e,u);n(l,u)&&i(c,o(u,e),l)}return c}},40371:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},79152:(e,t,n)=>{var r=n(97786);e.exports=function(e){return function(t){return r(t,e)}}},18674:e=>{e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},5976:(e,t,n)=>{var r=n(6557),i=n(45357),o=n(30061);e.exports=function(e,t){return o(i(e,t,r),e+"")}},10611:(e,t,n)=>{var r=n(34865),i=n(71811),o=n(65776),a=n(13218),s=n(40327);e.exports=function(e,t,n,c){if(!a(e))return e;for(var u=-1,l=(t=i(t,e)).length,f=l-1,d=e;null!=d&&++u<l;){var p=s(t[u]),h=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(u!=f){var v=d[p];void 0===(h=c?c(v,p,d):void 0)&&(h=a(v)?v:o(t[u+1])?[]:{})}r(d,p,h),d=d[p]}return e}},28045:(e,t,n)=>{var r=n(6557),i=n(89250),o=i?function(e,t){return i.set(e,t),e}:r;e.exports=o},56560:(e,t,n)=>{var r=n(75703),i=n(38777),o=n(6557),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},14259:e=>{e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},22545:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},80531:(e,t,n)=>{var r=n(62705),i=n(29932),o=n(1469),a=n(33448),s=1/0,c=r?r.prototype:void 0,u=c?c.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}},27561:(e,t,n)=>{var r=n(67990),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},7518:e=>{e.exports=function(e){return function(t){return e(t)}}},45652:(e,t,n)=>{var r=n(88668),i=n(47443),o=n(1196),a=n(74757),s=n(23593),c=n(21814),u=200;e.exports=function(e,t,n){var l=-1,f=i,d=e.length,p=!0,h=[],v=h;if(n)p=!1,f=o;else if(d>=u){var m=t?null:s(e);if(m)return c(m);p=!1,f=a,v=new r}else v=t?[]:h;e:for(;++l<d;){var g=e[l],y=t?t(g):g;if(g=n||0!==g?g:0,p&&y==y){for(var b=v.length;b--;)if(v[b]===y)continue e;t&&v.push(y),h.push(g)}else f(v,y,n)||(v!==h&&v.push(y),h.push(g))}return h}},57406:(e,t,n)=>{var r=n(71811),i=n(10928),o=n(40292),a=n(40327);e.exports=function(e,t){return t=r(t,e),null==(e=o(e,t))||delete e[a(i(t))]}},47415:(e,t,n)=>{var r=n(29932);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},74757:e=>{e.exports=function(e,t){return e.has(t)}},54290:(e,t,n)=>{var r=n(6557);e.exports=function(e){return"function"==typeof e?e:r}},71811:(e,t,n)=>{var r=n(1469),i=n(15403),o=n(55514),a=n(79833);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},40180:(e,t,n)=>{var r=n(14259);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},74318:(e,t,n)=>{var r=n(11149);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},64626:(e,t,n)=>{e=n.nmd(e);var r=n(55639),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},57157:(e,t,n)=>{var r=n(74318);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},93147:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},40419:(e,t,n)=>{var r=n(62705),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},77133:(e,t,n)=>{var r=n(74318);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},52157:e=>{var t=Math.max;e.exports=function(e,n,r,i){for(var o=-1,a=e.length,s=r.length,c=-1,u=n.length,l=t(a-s,0),f=Array(u+l),d=!i;++c<u;)f[c]=n[c];for(;++o<s;)(d||o<a)&&(f[r[o]]=e[o]);for(;l--;)f[c++]=e[o++];return f}},14054:e=>{var t=Math.max;e.exports=function(e,n,r,i){for(var o=-1,a=e.length,s=-1,c=r.length,u=-1,l=n.length,f=t(a-c,0),d=Array(f+l),p=!i;++o<f;)d[o]=e[o];for(var h=o;++u<l;)d[h+u]=n[u];for(;++s<c;)(p||o<a)&&(d[h+r[s]]=e[o++]);return d}},278:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},98363:(e,t,n)=>{var r=n(34865),i=n(89465);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var u=t[s],l=o?o(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),a?i(n,u,l):r(n,u,l)}return n}},18805:(e,t,n)=>{var r=n(98363),i=n(99551);e.exports=function(e,t){return r(e,i(e),t)}},1911:(e,t,n)=>{var r=n(98363),i=n(51442);e.exports=function(e,t){return r(e,i(e),t)}},14429:(e,t,n)=>{var r=n(55639)["__core-js_shared__"];e.exports=r},97991:e=>{e.exports=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}},55189:(e,t,n)=>{var r=n(44174),i=n(81119),o=n(67206),a=n(1469);e.exports=function(e,t){return function(n,s){var c=a(n)?r:i,u=t?t():{};return c(n,e,o(s,2),u)}}},21463:(e,t,n)=>{var r=n(5976),i=n(16612);e.exports=function(e){return r((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var c=n[r];c&&e(t,c,r,a)}return t}))}},99291:(e,t,n)=>{var r=n(98612);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},25063:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}},22402:(e,t,n)=>{var r=n(71774),i=n(55639),o=1;e.exports=function(e,t,n){var a=t&o,s=r(e);return function t(){return(this&&this!==i&&this instanceof t?s:e).apply(a?n:this,arguments)}}},98805:(e,t,n)=>{var r=n(40180),i=n(62689),o=n(83140),a=n(79833);e.exports=function(e){return function(t){t=a(t);var n=i(t)?o(t):void 0,s=n?n[0]:t.charAt(0),c=n?r(n,1).join(""):t.slice(1);return s[e]()+c}}},35393:(e,t,n)=>{var r=n(62663),i=n(53816),o=n(58748),a=RegExp("['’]","g");e.exports=function(e){return function(t){return r(o(i(t).replace(a,"")),e,"")}}},71774:(e,t,n)=>{var r=n(3118),i=n(13218);e.exports=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=r(e.prototype),o=e.apply(n,t);return i(o)?o:n}}},46347:(e,t,n)=>{var r=n(96874),i=n(71774),o=n(86935),a=n(94487),s=n(20893),c=n(46460),u=n(55639);e.exports=function(e,t,n){var l=i(e);return function i(){for(var f=arguments.length,d=Array(f),p=f,h=s(i);p--;)d[p]=arguments[p];var v=f<3&&d[0]!==h&&d[f-1]!==h?[]:c(d,h);return(f-=v.length)<n?a(e,t,o,i.placeholder,void 0,d,v,void 0,void 0,n-f):r(this&&this!==u&&this instanceof i?l:e,this,d)}}},86935:(e,t,n)=>{var r=n(52157),i=n(14054),o=n(97991),a=n(71774),s=n(94487),c=n(20893),u=n(90451),l=n(46460),f=n(55639),d=1,p=2,h=8,v=16,m=128,g=512;e.exports=function e(t,n,y,b,w,_,E,S,R,x){var C=n&m,k=n&d,T=n&p,I=n&(h|v),O=n&g,A=T?void 0:a(t);return function d(){for(var p=arguments.length,h=Array(p),v=p;v--;)h[v]=arguments[v];if(I)var m=c(d),g=o(h,m);if(b&&(h=r(h,b,w,I)),_&&(h=i(h,_,E,I)),p-=g,I&&p<x){var L=l(h,m);return s(t,n,e,d.placeholder,y,h,L,S,R,x-p)}var M=k?y:this,P=T?M[t]:t;return p=h.length,S?h=u(h,S):O&&p>1&&h.reverse(),C&&R<p&&(h.length=R),this&&this!==f&&this instanceof d&&(P=A||a(P)),P.apply(M,h)}}},84375:(e,t,n)=>{var r=n(96874),i=n(71774),o=n(55639),a=1;e.exports=function(e,t,n,s){var c=t&a,u=i(e);return function t(){for(var i=-1,a=arguments.length,l=-1,f=s.length,d=Array(f+a),p=this&&this!==o&&this instanceof t?u:e;++l<f;)d[l]=s[l];for(;a--;)d[l++]=arguments[++i];return r(p,c?n:this,d)}}},94487:(e,t,n)=>{var r=n(86528),i=n(258),o=n(69255),a=1,s=2,c=4,u=8,l=32,f=64;e.exports=function(e,t,n,d,p,h,v,m,g,y){var b=t&u;t|=b?l:f,(t&=~(b?f:l))&c||(t&=~(a|s));var w=[e,t,p,b?h:void 0,b?v:void 0,b?void 0:h,b?void 0:v,m,g,y],_=n.apply(void 0,w);return r(e)&&i(_,w),_.placeholder=d,o(_,e,t)}},23593:(e,t,n)=>{var r=n(58525),i=n(50308),o=n(21814),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},97727:(e,t,n)=>{var r=n(28045),i=n(22402),o=n(46347),a=n(86935),s=n(84375),c=n(66833),u=n(63833),l=n(258),f=n(69255),d=n(40554),p="Expected a function",h=1,v=2,m=8,g=16,y=32,b=64,w=Math.max;e.exports=function(e,t,n,_,E,S,R,x){var C=t&v;if(!C&&"function"!=typeof e)throw new TypeError(p);var k=_?_.length:0;if(k||(t&=~(y|b),_=E=void 0),R=void 0===R?R:w(d(R),0),x=void 0===x?x:d(x),k-=E?E.length:0,t&b){var T=_,I=E;_=E=void 0}var O=C?void 0:c(e),A=[e,t,n,_,E,T,I,S,R,x];if(O&&u(A,O),e=A[0],t=A[1],n=A[2],_=A[3],E=A[4],!(x=A[9]=void 0===A[9]?C?0:e.length:w(A[9]-k,0))&&t&(m|g)&&(t&=~(m|g)),t&&t!=h)L=t==m||t==g?o(e,t,x):t!=y&&t!=(h|y)||E.length?a.apply(void 0,A):s(e,t,n,_);else var L=i(e,t,n);return f((O?r:l)(L,A),e,t)}},92052:(e,t,n)=>{var r=n(42980),i=n(13218);e.exports=function e(t,n,o,a,s,c){return i(t)&&i(n)&&(c.set(n,t),r(t,n,void 0,e,c),c.delete(n)),t}},60696:(e,t,n)=>{var r=n(68630);e.exports=function(e){return r(e)?void 0:e}},69389:(e,t,n)=>{var r=n(18674)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});e.exports=r},38777:(e,t,n)=>{var r=n(10852),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},67114:(e,t,n)=>{var r=n(88668),i=n(82908),o=n(74757),a=1,s=2;e.exports=function(e,t,n,c,u,l){var f=n&a,d=e.length,p=t.length;if(d!=p&&!(f&&p>d))return!1;var h=l.get(e),v=l.get(t);if(h&&v)return h==t&&v==e;var m=-1,g=!0,y=n&s?new r:void 0;for(l.set(e,t),l.set(t,e);++m<d;){var b=e[m],w=t[m];if(c)var _=f?c(w,b,m,t,e,l):c(b,w,m,e,t,l);if(void 0!==_){if(_)continue;g=!1;break}if(y){if(!i(t,(function(e,t){if(!o(y,t)&&(b===e||u(b,e,n,c,l)))return y.push(t)}))){g=!1;break}}else if(b!==w&&!u(b,w,n,c,l)){g=!1;break}}return l.delete(e),l.delete(t),g}},18351:(e,t,n)=>{var r=n(62705),i=n(11149),o=n(77813),a=n(67114),s=n(68776),c=n(21814),u=1,l=2,f="[object Boolean]",d="[object Date]",p="[object Error]",h="[object Map]",v="[object Number]",m="[object RegExp]",g="[object Set]",y="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",_="[object DataView]",E=r?r.prototype:void 0,S=E?E.valueOf:void 0;e.exports=function(e,t,n,r,E,R,x){switch(n){case _:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!R(new i(e),new i(t)));case f:case d:case v:return o(+e,+t);case p:return e.name==t.name&&e.message==t.message;case m:case y:return e==t+"";case h:var C=s;case g:var k=r&u;if(C||(C=c),e.size!=t.size&&!k)return!1;var T=x.get(e);if(T)return T==t;r|=l,x.set(e,t);var I=a(C(e),C(t),r,E,R,x);return x.delete(e),I;case b:if(S)return S.call(e)==S.call(t)}return!1}},16096:(e,t,n)=>{var r=n(58234),i=1,o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,s,c){var u=n&i,l=r(e),f=l.length;if(f!=r(t).length&&!u)return!1;for(var d=f;d--;){var p=l[d];if(!(u?p in t:o.call(t,p)))return!1}var h=c.get(e),v=c.get(t);if(h&&v)return h==t&&v==e;var m=!0;c.set(e,t),c.set(t,e);for(var g=u;++d<f;){var y=e[p=l[d]],b=t[p];if(a)var w=u?a(b,y,p,t,e,c):a(y,b,p,e,t,c);if(!(void 0===w?y===b||s(y,b,n,a,c):w)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var _=e.constructor,E=t.constructor;_==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof E&&E instanceof E||(m=!1)}return c.delete(e),c.delete(t),m}},89464:(e,t,n)=>{var r=n(18674)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=r},99021:(e,t,n)=>{var r=n(85564),i=n(45357),o=n(30061);e.exports=function(e){return o(i(e,void 0,r),e+"")}},31957:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},58234:(e,t,n)=>{var r=n(68866),i=n(99551),o=n(3674);e.exports=function(e){return r(e,o,i)}},46904:(e,t,n)=>{var r=n(68866),i=n(51442),o=n(81704);e.exports=function(e){return r(e,o,i)}},66833:(e,t,n)=>{var r=n(89250),i=n(50308),o=r?function(e){return r.get(e)}:i;e.exports=o},97658:(e,t,n)=>{var r=n(52060),i=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=e.name+"",n=r[t],o=i.call(r,t)?n.length:0;o--;){var a=n[o],s=a.func;if(null==s||s==e)return a.name}return t}},20893:e=>{e.exports=function(e){return e.placeholder}},45050:(e,t,n)=>{var r=n(37019);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},1499:(e,t,n)=>{var r=n(89162),i=n(3674);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},10852:(e,t,n)=>{var r=n(28458),i=n(47801);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},85924:(e,t,n)=>{var r=n(5569)(Object.getPrototypeOf,Object);e.exports=r},89607:(e,t,n)=>{var r=n(62705),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},99551:(e,t,n)=>{var r=n(34963),i=n(70479),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},51442:(e,t,n)=>{var r=n(62488),i=n(85924),o=n(99551),a=n(70479),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=s},64160:(e,t,n)=>{var r=n(18552),i=n(57071),o=n(53818),a=n(58525),s=n(70577),c=n(44239),u=n(80346),l="[object Map]",f="[object Promise]",d="[object Set]",p="[object WeakMap]",h="[object DataView]",v=u(r),m=u(i),g=u(o),y=u(a),b=u(s),w=c;(r&&w(new r(new ArrayBuffer(1)))!=h||i&&w(new i)!=l||o&&w(o.resolve())!=f||a&&w(new a)!=d||s&&w(new s)!=p)&&(w=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case v:return h;case m:return l;case g:return f;case y:return d;case b:return p}return t}),e.exports=w},47801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},58775:e=>{var t=/\{\n\/\* \[wrapped with (.+)\] \*/,n=/,? & /;e.exports=function(e){var r=e.match(t);return r?r[1].split(n):[]}},222:(e,t,n)=>{var r=n(71811),i=n(35694),o=n(1469),a=n(65776),s=n(41780),c=n(40327);e.exports=function(e,t,n){for(var u=-1,l=(t=r(t,e)).length,f=!1;++u<l;){var d=c(t[u]);if(!(f=null!=e&&n(e,d)))break;e=e[d]}return f||++u!=l?f:!!(l=null==e?0:e.length)&&s(l)&&a(d,l)&&(o(e)||i(e))}},62689:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},93157:e=>{var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return t.test(e)}},51789:(e,t,n)=>{var r=n(94536);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},80401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},57667:(e,t,n)=>{var r=n(94536),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return n===i?void 0:n}return o.call(t,e)?t[e]:void 0}},21327:(e,t,n)=>{var r=n(94536),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},81866:(e,t,n)=>{var r=n(94536),i="__lodash_hash_undefined__";e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?i:t,this}},43824:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},29148:(e,t,n)=>{var r=n(74318),i=n(57157),o=n(93147),a=n(40419),s=n(77133),c="[object Boolean]",u="[object Date]",l="[object Map]",f="[object Number]",d="[object RegExp]",p="[object Set]",h="[object String]",v="[object Symbol]",m="[object ArrayBuffer]",g="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",_="[object Int16Array]",E="[object Int32Array]",S="[object Uint8Array]",R="[object Uint8ClampedArray]",x="[object Uint16Array]",C="[object Uint32Array]";e.exports=function(e,t,n){var k=e.constructor;switch(t){case m:return r(e);case c:case u:return new k(+e);case g:return i(e,n);case y:case b:case w:case _:case E:case S:case R:case x:case C:return s(e,n);case l:return new k;case f:case h:return new k(e);case d:return o(e);case p:return new k;case v:return a(e)}}},38517:(e,t,n)=>{var r=n(3118),i=n(85924),o=n(25726);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},83112:e=>{var t=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=function(e,n){var r=n.length;if(!r)return e;var i=r-1;return n[i]=(r>1?"& ":"")+n[i],n=n.join(r>2?", ":" "),e.replace(t,"{\n/* [wrapped with "+n+"] */\n")}},37285:(e,t,n)=>{var r=n(62705),i=n(35694),o=n(1469),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},65776:e=>{var t=9007199254740991,n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var i=typeof e;return!!(r=null==r?t:r)&&("number"==i||"symbol"!=i&&n.test(e))&&e>-1&&e%1==0&&e<r}},16612:(e,t,n)=>{var r=n(77813),i=n(98612),o=n(65776),a=n(13218);e.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},15403:(e,t,n)=>{var r=n(1469),i=n(33448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},37019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},86528:(e,t,n)=>{var r=n(96425),i=n(66833),o=n(97658),a=n(8111);e.exports=function(e){var t=o(e),n=a[t];if("function"!=typeof n||!(t in r.prototype))return!1;if(e===n)return!0;var s=i(n);return!!s&&e===s[0]}},37724:(e,t,n)=>{var r,i=n(14429),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},25726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},89162:(e,t,n)=>{var r=n(13218);e.exports=function(e){return e==e&&!r(e)}},27040:e=>{e.exports=function(){this.__data__=[],this.size=0}},14125:(e,t,n)=>{var r=n(18470),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},82117:(e,t,n)=>{var r=n(18470);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},67518:(e,t,n)=>{var r=n(18470);e.exports=function(e){return r(this.__data__,e)>-1}},54705:(e,t,n)=>{var r=n(18470);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},24785:(e,t,n)=>{var r=n(1989),i=n(38407),o=n(57071);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},11285:(e,t,n)=>{var r=n(45050);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},96e3:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).get(e)}},49916:(e,t,n)=>{var r=n(45050);e.exports=function(e){return r(this,e).has(e)}},95265:(e,t,n)=>{var r=n(45050);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},68776:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},42634:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},24523:(e,t,n)=>{var r=n(88306),i=500;e.exports=function(e){var t=r(e,(function(e){return n.size===i&&n.clear(),e})),n=t.cache;return t}},63833:(e,t,n)=>{var r=n(52157),i=n(14054),o=n(46460),a="__lodash_placeholder__",s=1,c=2,u=4,l=8,f=128,d=256,p=Math.min;e.exports=function(e,t){var n=e[1],h=t[1],v=n|h,m=v<(s|c|f),g=h==f&&n==l||h==f&&n==d&&e[7].length<=t[8]||h==(f|d)&&t[7].length<=t[8]&&n==l;if(!m&&!g)return e;h&s&&(e[2]=t[2],v|=n&s?0:u);var y=t[3];if(y){var b=e[3];e[3]=b?r(b,y,t[4]):y,e[4]=b?o(e[3],a):t[4]}return(y=t[5])&&(b=e[5],e[5]=b?i(b,y,t[6]):y,e[6]=b?o(e[5],a):t[6]),(y=t[7])&&(e[7]=y),h&f&&(e[8]=null==e[8]?t[8]:p(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=v,e}},89250:(e,t,n)=>{var r=n(70577),i=r&&new r;e.exports=i},94536:(e,t,n)=>{var r=n(10852)(Object,"create");e.exports=r},86916:(e,t,n)=>{var r=n(5569)(Object.keys,Object);e.exports=r},33498:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},31167:(e,t,n)=>{e=n.nmd(e);var r=n(31957),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},45357:(e,t,n)=>{var r=n(96874),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),c=Array(s);++a<s;)c[a]=o[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=o[a];return u[t]=n(c),r(e,this,u)}}},40292:(e,t,n)=>{var r=n(97786),i=n(14259);e.exports=function(e,t){return t.length<2?e:r(e,i(t,0,-1))}},52060:e=>{e.exports={}},90451:(e,t,n)=>{var r=n(278),i=n(65776),o=Math.min;e.exports=function(e,t){for(var n=e.length,a=o(t.length,n),s=r(e);a--;){var c=t[a];e[a]=i(c,n)?s[c]:void 0}return e}},46460:e=>{var t="__lodash_placeholder__";e.exports=function(e,n){for(var r=-1,i=e.length,o=0,a=[];++r<i;){var s=e[r];s!==n&&s!==t||(e[r]=t,a[o++]=r)}return a}},55639:(e,t,n)=>{var r=n(31957),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},36390:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},90619:e=>{var t="__lodash_hash_undefined__";e.exports=function(e){return this.__data__.set(e,t),this}},72385:e=>{e.exports=function(e){return this.__data__.has(e)}},258:(e,t,n)=>{var r=n(28045),i=n(21275)(r);e.exports=i},21814:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},30061:(e,t,n)=>{var r=n(56560),i=n(21275)(r);e.exports=i},69255:(e,t,n)=>{var r=n(58775),i=n(83112),o=n(30061),a=n(87241);e.exports=function(e,t,n){var s=t+"";return o(e,i(s,a(r(s),n)))}},21275:e=>{var t=800,n=16,r=Date.now;e.exports=function(e){var i=0,o=0;return function(){var a=r(),s=n-(a-o);if(o=a,s>0){if(++i>=t)return arguments[0]}else i=0;return e.apply(void 0,arguments)}}},37465:(e,t,n)=>{var r=n(38407);e.exports=function(){this.__data__=new r,this.size=0}},63779:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},67599:e=>{e.exports=function(e){return this.__data__.get(e)}},44758:e=>{e.exports=function(e){return this.__data__.has(e)}},34309:(e,t,n)=>{var r=n(38407),i=n(57071),o=n(83369),a=200;e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<a-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},42351:e=>{e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},83140:(e,t,n)=>{var r=n(44286),i=n(62689),o=n(676);e.exports=function(e){return i(e)?o(e):r(e)}},55514:(e,t,n)=>{var r=n(24523),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},40327:(e,t,n)=>{var r=n(33448),i=1/0;e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},80346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},67990:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},676:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+t+"]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+r+"|"+i+")"+"?",u="[\\ufe0e\\ufe0f]?",l=u+c+("(?:\\u200d(?:"+[o,a,s].join("|")+")"+u+c+")*"),f="(?:"+[o+r+"?",r,a,s,n].join("|")+")",d=RegExp(i+"(?="+i+")|"+f+l,"g");e.exports=function(e){return e.match(d)||[]}},2757:e=>{var t="\\ud800-\\udfff",n="\\u2700-\\u27bf",r="a-z\\xdf-\\xf6\\xf8-\\xff",i="A-Z\\xc0-\\xd6\\xd8-\\xde",o="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",a="["+o+"]",s="\\d+",c="["+n+"]",u="["+r+"]",l="[^"+t+o+s+n+r+i+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+i+"]",h="(?:"+u+"|"+l+")",v="(?:"+p+"|"+l+")",m="(?:['’](?:d|ll|m|re|s|t|ve))?",g="(?:['’](?:D|LL|M|RE|S|T|VE))?",y="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",b="[\\ufe0e\\ufe0f]?",w=b+y+("(?:\\u200d(?:"+["[^"+t+"]",f,d].join("|")+")"+b+y+")*"),_="(?:"+[c,f,d].join("|")+")"+w,E=RegExp([p+"?"+u+"+"+m+"(?="+[a,p,"$"].join("|")+")",v+"+"+g+"(?="+[a,p+h,"$"].join("|")+")",p+"?"+h+"+"+m,p+"+"+g,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",s,_].join("|"),"g");e.exports=function(e){return e.match(E)||[]}},87241:(e,t,n)=>{var r=n(77412),i=n(47443),o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=function(e,t){return r(o,(function(n){var r="_."+n[0];t&n[1]&&!i(e,r)&&e.push(r)})),e.sort()}},21913:(e,t,n)=>{var r=n(96425),i=n(7548),o=n(278);e.exports=function(e){if(e instanceof r)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=o(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},28583:(e,t,n)=>{var r=n(34865),i=n(98363),o=n(21463),a=n(98612),s=n(25726),c=n(3674),u=Object.prototype.hasOwnProperty,l=o((function(e,t){if(s(t)||a(t))i(t,c(t),e);else for(var n in t)u.call(t,n)&&r(e,n,t[n])}));e.exports=l},89567:(e,t,n)=>{var r=n(40554),i="Expected a function";e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError(i);return e=r(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},38169:(e,t,n)=>{var r=n(5976),i=n(97727),o=n(20893),a=n(46460),s=r((function(e,t,n){var r=1;if(n.length){var c=a(n,o(s));r|=32}return i(e,r,t,n,c)}));s.placeholder={},e.exports=s},68929:(e,t,n)=>{var r=n(48403),i=n(35393)((function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)}));e.exports=i},48403:(e,t,n)=>{var r=n(79833),i=n(11700);e.exports=function(e){return i(r(e).toLowerCase())}},66678:(e,t,n)=>{var r=n(85990),i=4;e.exports=function(e){return r(e,i)}},50361:(e,t,n)=>{var r=n(85990),i=1,o=4;e.exports=function(e){return r(e,i|o)}},75703:e=>{e.exports=function(e){return function(){return e}}},40087:(e,t,n)=>{var r=n(97727),i=8;function o(e,t,n){var a=r(e,i,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return a.placeholder=o.placeholder,a}o.placeholder={},e.exports=o},23279:(e,t,n)=>{var r=n(13218),i=n(7771),o=n(14841),a="Expected a function",s=Math.max,c=Math.min;e.exports=function(e,t,n){var u,l,f,d,p,h,v=0,m=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError(a);function b(t){var n=u,r=l;return u=l=void 0,v=t,d=e.apply(r,n)}function w(e){var n=e-h;return void 0===h||n>=t||n<0||g&&e-v>=f}function _(){var e=i();if(w(e))return E(e);p=setTimeout(_,function(e){var n=t-(e-h);return g?c(n,f-(e-v)):n}(e))}function E(e){return p=void 0,y&&u?b(e):(u=l=void 0,d)}function S(){var e=i(),n=w(e);if(u=arguments,l=this,h=e,n){if(void 0===p)return function(e){return v=e,p=setTimeout(_,t),m?b(e):d}(h);if(g)return clearTimeout(p),p=setTimeout(_,t),b(h)}return void 0===p&&(p=setTimeout(_,t)),d}return t=o(t)||0,r(n)&&(m=!!n.leading,f=(g="maxWait"in n)?s(o(n.maxWait)||0,t):f,y="trailing"in n?!!n.trailing:y),S.cancel=function(){void 0!==p&&clearTimeout(p),v=0,u=h=l=p=void 0},S.flush=function(){return void 0===p?d:E(i())},S}},53816:(e,t,n)=>{var r=n(69389),i=n(79833),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=i(e))&&e.replace(o,r).replace(a,"")}},91747:(e,t,n)=>{var r=n(5976),i=n(77813),o=n(16612),a=n(81704),s=Object.prototype,c=s.hasOwnProperty,u=r((function(e,t){e=Object(e);var n=-1,r=t.length,u=r>2?t[2]:void 0;for(u&&o(t[0],t[1],u)&&(r=1);++n<r;)for(var l=t[n],f=a(l),d=-1,p=f.length;++d<p;){var h=f[d],v=e[h];(void 0===v||i(v,s[h])&&!c.call(e,h))&&(e[h]=l[h])}return e}));e.exports=u},66913:(e,t,n)=>{var r=n(96874),i=n(5976),o=n(92052),a=n(30236),s=i((function(e){return e.push(void 0,o),r(a,void 0,e)}));e.exports=s},77813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},7187:(e,t,n)=>{var r=n(89464),i=n(79833),o=/[&<>"']/g,a=RegExp(o.source);e.exports=function(e){return(e=i(e))&&a.test(e)?e.replace(o,r):e}},85564:(e,t,n)=>{var r=n(21078);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},84486:(e,t,n)=>{var r=n(77412),i=n(89881),o=n(54290),a=n(1469);e.exports=function(e,t){return(a(e)?r:i)(e,o(t))}},2525:(e,t,n)=>{var r=n(47816),i=n(54290);e.exports=function(e,t){return e&&r(e,i(t))}},27361:(e,t,n)=>{var r=n(97786);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},18721:(e,t,n)=>{var r=n(78565),i=n(222);e.exports=function(e,t){return null!=e&&i(e,t,r)}},79095:(e,t,n)=>{var r=n(13),i=n(222);e.exports=function(e,t){return null!=e&&i(e,t,r)}},6557:e=>{e.exports=function(e){return e}},64721:(e,t,n)=>{var r=n(42118),i=n(98612),o=n(47037),a=n(40554),s=n(52628),c=Math.max;e.exports=function(e,t,n,u){e=i(e)?e:s(e),n=n&&!u?a(n):0;var l=e.length;return n<0&&(n=c(l+n,0)),o(e)?n<=l&&e.indexOf(t,n)>-1:!!l&&r(e,t,n)>-1}},35694:(e,t,n)=>{var r=n(9454),i=n(37005),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},1469:e=>{var t=Array.isArray;e.exports=t},98612:(e,t,n)=>{var r=n(23560),i=n(41780);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},29246:(e,t,n)=>{var r=n(98612),i=n(37005);e.exports=function(e){return i(e)&&r(e)}},44144:(e,t,n)=>{e=n.nmd(e);var r=n(55639),i=n(95062),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;e.exports=c},47960:(e,t,n)=>{var r=n(41761),i=n(7518),o=n(31167),a=o&&o.isDate,s=a?i(a):r;e.exports=s},41609:(e,t,n)=>{var r=n(280),i=n(64160),o=n(35694),a=n(1469),s=n(98612),c=n(44144),u=n(25726),l=n(36719),f="[object Map]",d="[object Set]",p=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||l(e)||o(e)))return!e.length;var t=i(e);if(t==f||t==d)return!e.size;if(u(e))return!r(e).length;for(var n in e)if(p.call(e,n))return!1;return!0}},18446:(e,t,n)=>{var r=n(90939);e.exports=function(e,t){return r(e,t)}},23560:(e,t,n)=>{var r=n(44239),i=n(13218),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";e.exports=function(e){if(!i(e))return!1;var t=r(e);return t==a||t==s||t==o||t==c}},41780:e=>{var t=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}},56688:(e,t,n)=>{var r=n(25588),i=n(7518),o=n(31167),a=o&&o.isMap,s=a?i(a):r;e.exports=s},81763:(e,t,n)=>{var r=n(44239),i=n(37005),o="[object Number]";e.exports=function(e){return"number"==typeof e||i(e)&&r(e)==o}},13218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},68630:(e,t,n)=>{var r=n(44239),i=n(85924),o=n(37005),a="[object Object]",s=Function.prototype,c=Object.prototype,u=s.toString,l=c.hasOwnProperty,f=u.call(Object);e.exports=function(e){if(!o(e)||r(e)!=a)return!1;var t=i(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==f}},72928:(e,t,n)=>{var r=n(29221),i=n(7518),o=n(31167),a=o&&o.isSet,s=a?i(a):r;e.exports=s},47037:(e,t,n)=>{var r=n(44239),i=n(1469),o=n(37005),a="[object String]";e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&r(e)==a}},33448:(e,t,n)=>{var r=n(44239),i=n(37005),o="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||i(e)&&r(e)==o}},36719:(e,t,n)=>{var r=n(38749),i=n(7518),o=n(31167),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},3674:(e,t,n)=>{var r=n(14636),i=n(280),o=n(98612);e.exports=function(e){return o(e)?r(e):i(e)}},81704:(e,t,n)=>{var r=n(14636),i=n(10313),o=n(98612);e.exports=function(e){return o(e)?r(e,!0):i(e)}},10928:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},96486:function(e,t,n){var r;e=n.nmd(e),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",c=16,u=32,l=64,f=128,d=256,p=1/0,h=9007199254740991,v=NaN,m=4294967295,g=[["ary",f],["bind",1],["bindKey",2],["curry",8],["curryRight",c],["flip",512],["partial",u],["partialRight",l],["rearg",d]],y="[object Arguments]",b="[object Array]",w="[object Boolean]",_="[object Date]",E="[object Error]",S="[object Function]",R="[object GeneratorFunction]",x="[object Map]",C="[object Number]",k="[object Object]",T="[object Promise]",I="[object RegExp]",O="[object Set]",A="[object String]",L="[object Symbol]",M="[object WeakMap]",P="[object ArrayBuffer]",N="[object DataView]",D="[object Float32Array]",U="[object Float64Array]",Z="[object Int8Array]",j="[object Int16Array]",F="[object Int32Array]",B="[object Uint8Array]",V="[object Uint8ClampedArray]",q="[object Uint16Array]",W="[object Uint32Array]",z=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,Y=RegExp($.source),J=RegExp(K.source),X=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(ie.source),ae=/^\s+/,se=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ve=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,be=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,_e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ee=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Re="\\ud800-\\udfff",xe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ce="\\u2700-\\u27bf",ke="a-z\\xdf-\\xf6\\xf8-\\xff",Te="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",Oe="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ae="['’]",Le="["+Re+"]",Me="["+Oe+"]",Pe="["+xe+"]",Ne="\\d+",De="["+Ce+"]",Ue="["+ke+"]",Ze="[^"+Re+Oe+Ne+Ce+ke+Te+"]",je="\\ud83c[\\udffb-\\udfff]",Fe="[^"+Re+"]",Be="(?:\\ud83c[\\udde6-\\uddff]){2}",Ve="[\\ud800-\\udbff][\\udc00-\\udfff]",qe="["+Te+"]",We="\\u200d",ze="(?:"+Ue+"|"+Ze+")",Ge="(?:"+qe+"|"+Ze+")",He="(?:['’](?:d|ll|m|re|s|t|ve))?",$e="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+Pe+"|"+je+")"+"?",Ye="["+Ie+"]?",Je=Ye+Ke+("(?:"+We+"(?:"+[Fe,Be,Ve].join("|")+")"+Ye+Ke+")*"),Xe="(?:"+[De,Be,Ve].join("|")+")"+Je,Qe="(?:"+[Fe+Pe+"?",Pe,Be,Ve,Le].join("|")+")",et=RegExp(Ae,"g"),tt=RegExp(Pe,"g"),nt=RegExp(je+"(?="+je+")|"+Qe+Je,"g"),rt=RegExp([qe+"?"+Ue+"+"+He+"(?="+[Me,qe,"$"].join("|")+")",Ge+"+"+$e+"(?="+[Me,qe+ze,"$"].join("|")+")",qe+"?"+ze+"+"+He,qe+"+"+$e,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ne,Xe].join("|"),"g"),it=RegExp("["+We+Re+xe+Ie+"]"),ot=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,at=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],st=-1,ct={};ct[D]=ct[U]=ct[Z]=ct[j]=ct[F]=ct[B]=ct[V]=ct[q]=ct[W]=!0,ct[y]=ct[b]=ct[P]=ct[w]=ct[N]=ct[_]=ct[E]=ct[S]=ct[x]=ct[C]=ct[k]=ct[I]=ct[O]=ct[A]=ct[M]=!1;var ut={};ut[y]=ut[b]=ut[P]=ut[N]=ut[w]=ut[_]=ut[D]=ut[U]=ut[Z]=ut[j]=ut[F]=ut[x]=ut[C]=ut[k]=ut[I]=ut[O]=ut[A]=ut[L]=ut[B]=ut[V]=ut[q]=ut[W]=!0,ut[E]=ut[S]=ut[M]=!1;var lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ft=parseFloat,dt=parseInt,pt="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ht="object"==typeof self&&self&&self.Object===Object&&self,vt=pt||ht||Function("return this")(),mt=t&&!t.nodeType&&t,gt=mt&&e&&!e.nodeType&&e,yt=gt&&gt.exports===mt,bt=yt&&pt.process,wt=function(){try{var e=gt&&gt.require&&gt.require("util").types;return e||bt&&bt.binding&&bt.binding("util")}catch(e){}}(),_t=wt&&wt.isArrayBuffer,Et=wt&&wt.isDate,St=wt&&wt.isMap,Rt=wt&&wt.isRegExp,xt=wt&&wt.isSet,Ct=wt&&wt.isTypedArray;function kt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Tt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ot(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Lt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Mt(e,t){return!!(null==e?0:e.length)&&qt(e,t,0)>-1}function Pt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Nt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Dt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Ut(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Zt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function jt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=Ht("length");function Bt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Vt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function qt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Vt(e,zt,n)}function Wt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function zt(e){return e!=e}function Gt(e,t){var n=null==e?0:e.length;return n?Yt(e,t)/n:v}function Ht(e){return function(t){return null==t?i:t[e]}}function $t(e){return function(t){return null==e?i:e[t]}}function Kt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Yt(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function Jt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Xt(e){return e?e.slice(0,mn(e)+1).replace(ae,""):e}function Qt(e){return function(t){return e(t)}}function en(e,t){return Nt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&qt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&qt(t,e[n],0)>-1;);return n}var on=$t({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),an=$t({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+lt[e]}function cn(e){return it.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ln(e,t){return function(n){return e(t(n))}}function fn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[i++]=n)}return o}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function hn(e){return cn(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):Ft(e)}function vn(e){return cn(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function mn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var gn=$t({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n,r=(t=null==t?vt:yn.defaults(vt.Object(),t,yn.pick(vt,at))).Array,se=t.Date,Re=t.Error,xe=t.Function,Ce=t.Math,ke=t.Object,Te=t.RegExp,Ie=t.String,Oe=t.TypeError,Ae=r.prototype,Le=xe.prototype,Me=ke.prototype,Pe=t["__core-js_shared__"],Ne=Le.toString,De=Me.hasOwnProperty,Ue=0,Ze=(n=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",je=Me.toString,Fe=Ne.call(ke),Be=vt._,Ve=Te("^"+Ne.call(De).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=yt?t.Buffer:i,We=t.Symbol,ze=t.Uint8Array,Ge=qe?qe.allocUnsafe:i,He=ln(ke.getPrototypeOf,ke),$e=ke.create,Ke=Me.propertyIsEnumerable,Ye=Ae.splice,Je=We?We.isConcatSpreadable:i,Xe=We?We.iterator:i,Qe=We?We.toStringTag:i,nt=function(){try{var e=po(ke,"defineProperty");return e({},"",{}),e}catch(e){}}(),it=t.clearTimeout!==vt.clearTimeout&&t.clearTimeout,lt=se&&se.now!==vt.Date.now&&se.now,pt=t.setTimeout!==vt.setTimeout&&t.setTimeout,ht=Ce.ceil,mt=Ce.floor,gt=ke.getOwnPropertySymbols,bt=qe?qe.isBuffer:i,wt=t.isFinite,Ft=Ae.join,$t=ln(ke.keys,ke),bn=Ce.max,wn=Ce.min,_n=se.now,En=t.parseInt,Sn=Ce.random,Rn=Ae.reverse,xn=po(t,"DataView"),Cn=po(t,"Map"),kn=po(t,"Promise"),Tn=po(t,"Set"),In=po(t,"WeakMap"),On=po(ke,"create"),An=In&&new In,Ln={},Mn=jo(xn),Pn=jo(Cn),Nn=jo(kn),Dn=jo(Tn),Un=jo(In),Zn=We?We.prototype:i,jn=Zn?Zn.valueOf:i,Fn=Zn?Zn.toString:i;function Bn(e){if(ns(e)&&!za(e)&&!(e instanceof zn)){if(e instanceof Wn)return e;if(De.call(e,"__wrapped__"))return Fo(e)}return new Wn(e)}var Vn=function(){function e(){}return function(t){if(!ts(t))return{};if($e)return $e(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function qn(){}function Wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function zn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new $n;++t<n;)this.add(e[t])}function Yn(e){var t=this.__data__=new Hn(e);this.size=t.size}function Jn(e,t){var n=za(e),r=!n&&Wa(e),i=!n&&!r&&Ka(e),o=!n&&!r&&!i&&ls(e),a=n||r||i||o,s=a?Jt(e.length,Ie):[],c=s.length;for(var u in e)!t&&!De.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||wo(u,c))||s.push(u);return s}function Xn(e){var t=e.length;return t?e[Kr(0,t-1)]:i}function Qn(e,t){return Do(Oi(e),cr(t,0,e.length))}function er(e){return Do(Oi(e))}function tr(e,t,n){(n!==i&&!Ba(e[t],n)||n===i&&!(t in e))&&ar(e,t,n)}function nr(e,t,n){var r=e[t];De.call(e,t)&&Ba(r,n)&&(n!==i||t in e)||ar(e,t,n)}function rr(e,t){for(var n=e.length;n--;)if(Ba(e[n][0],t))return n;return-1}function ir(e,t,n,r){return pr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function or(e,t){return e&&Ai(t,Ls(t),e)}function ar(e,t,n){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var n=-1,o=t.length,a=r(o),s=null==e;++n<o;)a[n]=s?i:ks(e,t[n]);return a}function cr(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function ur(e,t,n,r,o,a){var s,c=1&t,u=2&t,l=4&t;if(n&&(s=o?n(e,r,o,a):n(e)),s!==i)return s;if(!ts(e))return e;var f=za(e);if(f){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&De.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return Oi(e,s)}else{var d=mo(e),p=d==S||d==R;if(Ka(e))return Ri(e,c);if(d==k||d==y||p&&!o){if(s=u||p?{}:yo(e),!c)return u?function(e,t){return Ai(e,vo(e),t)}(e,function(e,t){return e&&Ai(t,Ms(t),e)}(s,e)):function(e,t){return Ai(e,ho(e),t)}(e,or(s,e))}else{if(!ut[d])return o?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case P:return xi(e);case w:case _:return new r(+e);case N:return function(e,t){var n=t?xi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case D:case U:case Z:case j:case F:case B:case V:case q:case W:return Ci(e,n);case x:return new r;case C:case A:return new r(e);case I:return function(e){var t=new e.constructor(e.source,ve.exec(e));return t.lastIndex=e.lastIndex,t}(e);case O:return new r;case L:return i=e,jn?ke(jn.call(i)):{}}var i}(e,d,c)}}a||(a=new Yn);var h=a.get(e);if(h)return h;a.set(e,s),ss(e)?e.forEach((function(r){s.add(ur(r,t,n,r,e,a))})):rs(e)&&e.forEach((function(r,i){s.set(i,ur(r,t,n,i,e,a))}));var v=f?i:(l?u?oo:io:u?Ms:Ls)(e);return It(v||e,(function(r,i){v&&(r=e[i=r]),nr(s,i,ur(r,t,n,i,e,a))})),s}function lr(e,t,n){var r=n.length;if(null==e)return!r;for(e=ke(e);r--;){var o=n[r],a=t[o],s=e[o];if(s===i&&!(o in e)||!a(s))return!1}return!0}function fr(e,t,n){if("function"!=typeof e)throw new Oe(o);return Lo((function(){e.apply(i,n)}),t)}function dr(e,t,n,r){var i=-1,o=Mt,a=!0,s=e.length,c=[],u=t.length;if(!s)return c;n&&(t=Nt(t,Qt(n))),r?(o=Pt,a=!1):t.length>=200&&(o=tn,a=!1,t=new Kn(t));e:for(;++i<s;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f==f){for(var d=u;d--;)if(t[d]===f)continue e;c.push(l)}else o(t,f,r)||c.push(l)}return c}Bn.templateSettings={escape:X,evaluate:Q,interpolate:ee,variable:"",imports:{_:Bn}},Bn.prototype=qn.prototype,Bn.prototype.constructor=Bn,Wn.prototype=Vn(qn.prototype),Wn.prototype.constructor=Wn,zn.prototype=Vn(qn.prototype),zn.prototype.constructor=zn,Gn.prototype.clear=function(){this.__data__=On?On(null):{},this.size=0},Gn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Gn.prototype.get=function(e){var t=this.__data__;if(On){var n=t[e];return n===a?i:n}return De.call(t,e)?t[e]:i},Gn.prototype.has=function(e){var t=this.__data__;return On?t[e]!==i:De.call(t,e)},Gn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=On&&t===i?a:t,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(e){var t=this.__data__,n=rr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},Hn.prototype.get=function(e){var t=this.__data__,n=rr(t,e);return n<0?i:t[n][1]},Hn.prototype.has=function(e){return rr(this.__data__,e)>-1},Hn.prototype.set=function(e,t){var n=this.__data__,r=rr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},$n.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(Cn||Hn),string:new Gn}},$n.prototype.delete=function(e){var t=lo(this,e).delete(e);return this.size-=t?1:0,t},$n.prototype.get=function(e){return lo(this,e).get(e)},$n.prototype.has=function(e){return lo(this,e).has(e)},$n.prototype.set=function(e,t){var n=lo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(e){return this.__data__.set(e,a),this},Kn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.clear=function(){this.__data__=new Hn,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Hn){var r=n.__data__;if(!Cn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new $n(r)}return n.set(e,t),this.size=n.size,this};var pr=Pi(_r),hr=Pi(Er,!0);function vr(e,t){var n=!0;return pr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function mr(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=t(a);if(null!=s&&(c===i?s==s&&!us(s):n(s,c)))var c=s,u=a}return u}function gr(e,t){var n=[];return pr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=bo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?yr(s,t-1,n,r,i):Dt(i,s):r||(i[i.length]=s)}return i}var br=Ni(),wr=Ni(!0);function _r(e,t){return e&&br(e,t,Ls)}function Er(e,t){return e&&wr(e,t,Ls)}function Sr(e,t){return Lt(t,(function(t){return Xa(e[t])}))}function Rr(e,t){for(var n=0,r=(t=wi(t,e)).length;null!=e&&n<r;)e=e[Zo(t[n++])];return n&&n==r?e:i}function xr(e,t,n){var r=t(e);return za(e)?r:Dt(r,n(e))}function Cr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Qe&&Qe in ke(e)?function(e){var t=De.call(e,Qe),n=e[Qe];try{e[Qe]=i;var r=!0}catch(e){}var o=je.call(e);r&&(t?e[Qe]=n:delete e[Qe]);return o}(e):function(e){return je.call(e)}(e)}function kr(e,t){return e>t}function Tr(e,t){return null!=e&&De.call(e,t)}function Ir(e,t){return null!=e&&t in ke(e)}function Or(e,t,n){for(var o=n?Pt:Mt,a=e[0].length,s=e.length,c=s,u=r(s),l=1/0,f=[];c--;){var d=e[c];c&&t&&(d=Nt(d,Qt(t))),l=wn(d.length,l),u[c]=!n&&(t||a>=120&&d.length>=120)?new Kn(c&&d):i}d=e[0];var p=-1,h=u[0];e:for(;++p<a&&f.length<l;){var v=d[p],m=t?t(v):v;if(v=n||0!==v?v:0,!(h?tn(h,m):o(f,m,n))){for(c=s;--c;){var g=u[c];if(!(g?tn(g,m):o(e[c],m,n)))continue e}h&&h.push(m),f.push(v)}}return f}function Ar(e,t,n){var r=null==(e=Io(e,t=wi(t,e)))?e:e[Zo(Jo(t))];return null==r?i:kt(r,e,n)}function Lr(e){return ns(e)&&Cr(e)==y}function Mr(e,t,n,r,o){return e===t||(null==e||null==t||!ns(e)&&!ns(t)?e!=e&&t!=t:function(e,t,n,r,o,a){var s=za(e),c=za(t),u=s?b:mo(e),l=c?b:mo(t),f=(u=u==y?k:u)==k,d=(l=l==y?k:l)==k,p=u==l;if(p&&Ka(e)){if(!Ka(t))return!1;s=!0,f=!1}if(p&&!f)return a||(a=new Yn),s||ls(e)?no(e,t,n,r,o,a):function(e,t,n,r,i,o,a){switch(n){case N:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!o(new ze(e),new ze(t)));case w:case _:case C:return Ba(+e,+t);case E:return e.name==t.name&&e.message==t.message;case I:case A:return e==t+"";case x:var s=un;case O:var c=1&r;if(s||(s=dn),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var l=no(s(e),s(t),r,i,o,a);return a.delete(e),l;case L:if(jn)return jn.call(e)==jn.call(t)}return!1}(e,t,u,n,r,o,a);if(!(1&n)){var h=f&&De.call(e,"__wrapped__"),v=d&&De.call(t,"__wrapped__");if(h||v){var m=h?e.value():e,g=v?t.value():t;return a||(a=new Yn),o(m,g,n,r,a)}}if(!p)return!1;return a||(a=new Yn),function(e,t,n,r,o,a){var s=1&n,c=io(e),u=c.length,l=io(t),f=l.length;if(u!=f&&!s)return!1;var d=u;for(;d--;){var p=c[d];if(!(s?p in t:De.call(t,p)))return!1}var h=a.get(e),v=a.get(t);if(h&&v)return h==t&&v==e;var m=!0;a.set(e,t),a.set(t,e);var g=s;for(;++d<u;){var y=e[p=c[d]],b=t[p];if(r)var w=s?r(b,y,p,t,e,a):r(y,b,p,e,t,a);if(!(w===i?y===b||o(y,b,n,r,a):w)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var _=e.constructor,E=t.constructor;_==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof E&&E instanceof E||(m=!1)}return a.delete(e),a.delete(t),m}(e,t,n,r,o,a)}(e,t,n,r,Mr,o))}function Pr(e,t,n,r){var o=n.length,a=o,s=!r;if(null==e)return!a;for(e=ke(e);o--;){var c=n[o];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var u=(c=n[o])[0],l=e[u],f=c[1];if(s&&c[2]){if(l===i&&!(u in e))return!1}else{var d=new Yn;if(r)var p=r(l,f,u,e,t,d);if(!(p===i?Mr(f,l,3,r,d):p))return!1}}return!0}function Nr(e){return!(!ts(e)||(t=e,Ze&&Ze in t))&&(Xa(e)?Ve:ye).test(jo(e));var t}function Dr(e){return"function"==typeof e?e:null==e?ic:"object"==typeof e?za(e)?Vr(e[0],e[1]):Br(e):pc(e)}function Ur(e){if(!xo(e))return $t(e);var t=[];for(var n in ke(e))De.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Zr(e){if(!ts(e))return function(e){var t=[];if(null!=e)for(var n in ke(e))t.push(n);return t}(e);var t=xo(e),n=[];for(var r in e)("constructor"!=r||!t&&De.call(e,r))&&n.push(r);return n}function jr(e,t){return e<t}function Fr(e,t){var n=-1,i=Ha(e)?r(e.length):[];return pr(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function Br(e){var t=fo(e);return 1==t.length&&t[0][2]?ko(t[0][0],t[0][1]):function(n){return n===e||Pr(n,e,t)}}function Vr(e,t){return Eo(e)&&Co(t)?ko(Zo(e),t):function(n){var r=ks(n,e);return r===i&&r===t?Ts(n,e):Mr(t,r,3)}}function qr(e,t,n,r,o){e!==t&&br(t,(function(a,s){if(o||(o=new Yn),ts(a))!function(e,t,n,r,o,a,s){var c=Oo(e,n),u=Oo(t,n),l=s.get(u);if(l)return void tr(e,n,l);var f=a?a(c,u,n+"",e,t,s):i,d=f===i;if(d){var p=za(u),h=!p&&Ka(u),v=!p&&!h&&ls(u);f=u,p||h||v?za(c)?f=c:$a(c)?f=Oi(c):h?(d=!1,f=Ri(u,!0)):v?(d=!1,f=Ci(u,!0)):f=[]:os(u)||Wa(u)?(f=c,Wa(c)?f=ys(c):ts(c)&&!Xa(c)||(f=yo(u))):d=!1}d&&(s.set(u,f),o(f,u,r,a,s),s.delete(u));tr(e,n,f)}(e,t,s,n,qr,r,o);else{var c=r?r(Oo(e,s),a,s+"",e,t,o):i;c===i&&(c=a),tr(e,s,c)}}),Ms)}function Wr(e,t){var n=e.length;if(n)return wo(t+=t<0?n:0,n)?e[t]:i}function zr(e,t,n){t=t.length?Nt(t,(function(e){return za(e)?function(t){return Rr(t,1===e.length?e[0]:e)}:e})):[ic];var r=-1;t=Nt(t,Qt(uo()));var i=Fr(e,(function(e,n,i){var o=Nt(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var c=ki(i[r],o[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Gr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Rr(e,a);n(s,a)&&ei(o,wi(a,e),s)}return o}function Hr(e,t,n,r){var i=r?Wt:qt,o=-1,a=t.length,s=e;for(e===t&&(t=Oi(t)),n&&(s=Nt(e,Qt(n)));++o<a;)for(var c=0,u=t[o],l=n?n(u):u;(c=i(s,l,c,r))>-1;)s!==e&&Ye.call(s,c,1),Ye.call(e,c,1);return e}function $r(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;wo(i)?Ye.call(e,i,1):di(e,i)}}return e}function Kr(e,t){return e+mt(Sn()*(t-e+1))}function Yr(e,t){var n="";if(!e||t<1||t>h)return n;do{t%2&&(n+=e),(t=mt(t/2))&&(e+=e)}while(t);return n}function Jr(e,t){return Mo(To(e,t,ic),e+"")}function Xr(e){return Xn(Bs(e))}function Qr(e,t){var n=Bs(e);return Do(n,cr(t,0,n.length))}function ei(e,t,n,r){if(!ts(e))return e;for(var o=-1,a=(t=wi(t,e)).length,s=a-1,c=e;null!=c&&++o<a;){var u=Zo(t[o]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=s){var f=c[u];(l=r?r(f,u,c):i)===i&&(l=ts(f)?f:wo(t[o+1])?[]:{})}nr(c,u,l),c=c[u]}return e}var ti=An?function(e,t){return An.set(e,t),e}:ic,ni=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:tc(t),writable:!0})}:ic;function ri(e){return Do(Bs(e))}function ii(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function oi(e,t){var n;return pr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ai(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!us(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return si(e,t,ic,n)}function si(e,t,n,r){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,c=null===t,u=us(t),l=t===i;o<a;){var f=mt((o+a)/2),d=n(e[f]),p=d!==i,h=null===d,v=d==d,m=us(d);if(s)var g=r||v;else g=l?v&&(r||p):c?v&&p&&(r||!h):u?v&&p&&!h&&(r||!m):!h&&!m&&(r?d<=t:d<t);g?o=f+1:a=f}return wn(a,4294967294)}function ci(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ba(s,c)){var c=s;o[i++]=0===a?0:a}}return o}function ui(e){return"number"==typeof e?e:us(e)?v:+e}function li(e){if("string"==typeof e)return e;if(za(e))return Nt(e,li)+"";if(us(e))return Fn?Fn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fi(e,t,n){var r=-1,i=Mt,o=e.length,a=!0,s=[],c=s;if(n)a=!1,i=Pt;else if(o>=200){var u=t?null:Yi(e);if(u)return dn(u);a=!1,i=tn,c=new Kn}else c=t?[]:s;e:for(;++r<o;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,a&&f==f){for(var d=c.length;d--;)if(c[d]===f)continue e;t&&c.push(f),s.push(l)}else i(c,f,n)||(c!==s&&c.push(f),s.push(l))}return s}function di(e,t){return null==(e=Io(e,t=wi(t,e)))||delete e[Zo(Jo(t))]}function pi(e,t,n,r){return ei(e,t,n(Rr(e,t)),r)}function hi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ii(e,r?0:o,r?o+1:i):ii(e,r?o+1:0,r?i:o)}function vi(e,t){var n=e;return n instanceof zn&&(n=n.value()),Ut(t,(function(e,t){return t.func.apply(t.thisArg,Dt([e],t.args))}),n)}function mi(e,t,n){var i=e.length;if(i<2)return i?fi(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=e[o],c=-1;++c<i;)c!=o&&(a[o]=dr(a[o]||s,e[c],t,n));return fi(yr(a,1),t,n)}function gi(e,t,n){for(var r=-1,o=e.length,a=t.length,s={};++r<o;){var c=r<a?t[r]:i;n(s,e[r],c)}return s}function yi(e){return $a(e)?e:[]}function bi(e){return"function"==typeof e?e:ic}function wi(e,t){return za(e)?e:Eo(e,t)?[e]:Uo(bs(e))}var _i=Jr;function Ei(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ii(e,t,n)}var Si=it||function(e){return vt.clearTimeout(e)};function Ri(e,t){if(t)return e.slice();var n=e.length,r=Ge?Ge(n):new e.constructor(n);return e.copy(r),r}function xi(e){var t=new e.constructor(e.byteLength);return new ze(t).set(new ze(e)),t}function Ci(e,t){var n=t?xi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function ki(e,t){if(e!==t){var n=e!==i,r=null===e,o=e==e,a=us(e),s=t!==i,c=null===t,u=t==t,l=us(t);if(!c&&!l&&!a&&e>t||a&&s&&u&&!c&&!l||r&&s&&u||!n&&u||!o)return 1;if(!r&&!a&&!l&&e<t||l&&n&&o&&!r&&!a||c&&n&&o||!s&&o||!u)return-1}return 0}function Ti(e,t,n,i){for(var o=-1,a=e.length,s=n.length,c=-1,u=t.length,l=bn(a-s,0),f=r(u+l),d=!i;++c<u;)f[c]=t[c];for(;++o<s;)(d||o<a)&&(f[n[o]]=e[o]);for(;l--;)f[c++]=e[o++];return f}function Ii(e,t,n,i){for(var o=-1,a=e.length,s=-1,c=n.length,u=-1,l=t.length,f=bn(a-c,0),d=r(f+l),p=!i;++o<f;)d[o]=e[o];for(var h=o;++u<l;)d[h+u]=t[u];for(;++s<c;)(p||o<a)&&(d[h+n[s]]=e[o++]);return d}function Oi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function Ai(e,t,n,r){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var c=t[a],u=r?r(n[c],e[c],c,n,e):i;u===i&&(u=e[c]),o?ar(n,c,u):nr(n,c,u)}return n}function Li(e,t){return function(n,r){var i=za(n)?Tt:ir,o=t?t():{};return i(n,e,uo(r,2),o)}}function Mi(e){return Jr((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&_o(n[0],n[1],s)&&(a=o<3?i:a,o=1),t=ke(t);++r<o;){var c=n[r];c&&e(t,c,r,a)}return t}))}function Pi(e,t){return function(n,r){if(null==n)return n;if(!Ha(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=ke(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ni(e){return function(t,n,r){for(var i=-1,o=ke(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}function Di(e){return function(t){var n=cn(t=bs(t))?vn(t):i,r=n?n[0]:t.charAt(0),o=n?Ei(n,1).join(""):t.slice(1);return r[e]()+o}}function Ui(e){return function(t){return Ut(Xs(Ws(t).replace(et,"")),e,"")}}function Zi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Vn(e.prototype),r=e.apply(n,t);return ts(r)?r:n}}function ji(e){return function(t,n,r){var o=ke(t);if(!Ha(t)){var a=uo(n,3);t=Ls(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[a?t[s]:s]:i}}function Fi(e){return ro((function(t){var n=t.length,r=n,a=Wn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Oe(o);if(a&&!c&&"wrapper"==so(s))var c=new Wn([],!0)}for(r=c?r:n;++r<n;){var u=so(s=t[r]),l="wrapper"==u?ao(s):i;c=l&&So(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?c[so(l[0])].apply(c,l[3]):1==s.length&&So(s)?c[u]():c.thru(s)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&za(r))return c.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Bi(e,t,n,o,a,s,c,u,l,d){var p=t&f,h=1&t,v=2&t,m=24&t,g=512&t,y=v?i:Zi(e);return function f(){for(var b=arguments.length,w=r(b),_=b;_--;)w[_]=arguments[_];if(m)var E=co(f),S=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(w,E);if(o&&(w=Ti(w,o,a,m)),s&&(w=Ii(w,s,c,m)),b-=S,m&&b<d){var R=fn(w,E);return $i(e,t,Bi,f.placeholder,n,w,R,u,l,d-b)}var x=h?n:this,C=v?x[e]:e;return b=w.length,u?w=function(e,t){var n=e.length,r=wn(t.length,n),o=Oi(e);for(;r--;){var a=t[r];e[r]=wo(a,n)?o[a]:i}return e}(w,u):g&&b>1&&w.reverse(),p&&l<b&&(w.length=l),this&&this!==vt&&this instanceof f&&(C=y||Zi(C)),C.apply(x,w)}}function Vi(e,t){return function(n,r){return function(e,t,n,r){return _r(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function qi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=li(n),r=li(r)):(n=ui(n),r=ui(r)),o=e(n,r)}return o}}function Wi(e){return ro((function(t){return t=Nt(t,Qt(uo())),Jr((function(n){var r=this;return e(t,(function(e){return kt(e,r,n)}))}))}))}function zi(e,t){var n=(t=t===i?" ":li(t)).length;if(n<2)return n?Yr(t,e):t;var r=Yr(t,ht(e/hn(t)));return cn(t)?Ei(vn(r),0,e).join(""):r.slice(0,e)}function Gi(e){return function(t,n,o){return o&&"number"!=typeof o&&_o(t,n,o)&&(n=o=i),t=hs(t),n===i?(n=t,t=0):n=hs(n),function(e,t,n,i){for(var o=-1,a=bn(ht((t-e)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=e,e+=n;return s}(t,n,o=o===i?t<n?1:-1:hs(o),e)}}function Hi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=gs(t),n=gs(n)),e(t,n)}}function $i(e,t,n,r,o,a,s,c,f,d){var p=8&t;t|=p?u:l,4&(t&=~(p?l:u))||(t&=-4);var h=[e,t,o,p?a:i,p?s:i,p?i:a,p?i:s,c,f,d],v=n.apply(i,h);return So(e)&&Ao(v,h),v.placeholder=r,Po(v,e,t)}function Ki(e){var t=Ce[e];return function(e,n){if(e=gs(e),(n=null==n?0:wn(vs(n),292))&&wt(e)){var r=(bs(e)+"e").split("e");return+((r=(bs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Yi=Tn&&1/dn(new Tn([,-0]))[1]==p?function(e){return new Tn(e)}:uc;function Ji(e){return function(t){var n=mo(t);return n==x?un(t):n==O?pn(t):function(e,t){return Nt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xi(e,t,n,a,p,h,v,m){var g=2&t;if(!g&&"function"!=typeof e)throw new Oe(o);var y=a?a.length:0;if(y||(t&=-97,a=p=i),v=v===i?v:bn(vs(v),0),m=m===i?m:vs(m),y-=p?p.length:0,t&l){var b=a,w=p;a=p=i}var _=g?i:ao(e),E=[e,t,n,a,p,b,w,h,v,m];if(_&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==f&&8==n||r==f&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var c=t[3];if(c){var u=e[3];e[3]=u?Ti(u,c,t[4]):c,e[4]=u?fn(e[3],s):t[4]}(c=t[5])&&(u=e[5],e[5]=u?Ii(u,c,t[6]):c,e[6]=u?fn(e[5],s):t[6]);(c=t[7])&&(e[7]=c);r&f&&(e[8]=null==e[8]?t[8]:wn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(E,_),e=E[0],t=E[1],n=E[2],a=E[3],p=E[4],!(m=E[9]=E[9]===i?g?0:e.length:bn(E[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==c?function(e,t,n){var o=Zi(e);return function a(){for(var s=arguments.length,c=r(s),u=s,l=co(a);u--;)c[u]=arguments[u];var f=s<3&&c[0]!==l&&c[s-1]!==l?[]:fn(c,l);return(s-=f.length)<n?$i(e,t,Bi,a.placeholder,i,c,f,i,i,n-s):kt(this&&this!==vt&&this instanceof a?o:e,this,c)}}(e,t,m):t!=u&&33!=t||p.length?Bi.apply(i,E):function(e,t,n,i){var o=1&t,a=Zi(e);return function t(){for(var s=-1,c=arguments.length,u=-1,l=i.length,f=r(l+c),d=this&&this!==vt&&this instanceof t?a:e;++u<l;)f[u]=i[u];for(;c--;)f[u++]=arguments[++s];return kt(d,o?n:this,f)}}(e,t,n,a);else var S=function(e,t,n){var r=1&t,i=Zi(e);return function t(){return(this&&this!==vt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return Po((_?ti:Ao)(S,E),e,t)}function Qi(e,t,n,r){return e===i||Ba(e,Me[n])&&!De.call(r,n)?t:e}function eo(e,t,n,r,o,a){return ts(e)&&ts(t)&&(a.set(t,e),qr(e,t,i,eo,a),a.delete(t)),e}function to(e){return os(e)?i:e}function no(e,t,n,r,o,a){var s=1&n,c=e.length,u=t.length;if(c!=u&&!(s&&u>c))return!1;var l=a.get(e),f=a.get(t);if(l&&f)return l==t&&f==e;var d=-1,p=!0,h=2&n?new Kn:i;for(a.set(e,t),a.set(t,e);++d<c;){var v=e[d],m=t[d];if(r)var g=s?r(m,v,d,t,e,a):r(v,m,d,e,t,a);if(g!==i){if(g)continue;p=!1;break}if(h){if(!jt(t,(function(e,t){if(!tn(h,t)&&(v===e||o(v,e,n,r,a)))return h.push(t)}))){p=!1;break}}else if(v!==m&&!o(v,m,n,r,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function ro(e){return Mo(To(e,i,Go),e+"")}function io(e){return xr(e,Ls,ho)}function oo(e){return xr(e,Ms,vo)}var ao=An?function(e){return An.get(e)}:uc;function so(e){for(var t=e.name+"",n=Ln[t],r=De.call(Ln,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function co(e){return(De.call(Bn,"placeholder")?Bn:e).placeholder}function uo(){var e=Bn.iteratee||oc;return e=e===oc?Dr:e,arguments.length?e(arguments[0],arguments[1]):e}function lo(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function fo(e){for(var t=Ls(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Co(i)]}return t}function po(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Nr(n)?n:i}var ho=gt?function(e){return null==e?[]:(e=ke(e),Lt(gt(e),(function(t){return Ke.call(e,t)})))}:mc,vo=gt?function(e){for(var t=[];e;)Dt(t,ho(e)),e=He(e);return t}:mc,mo=Cr;function go(e,t,n){for(var r=-1,i=(t=wi(t,e)).length,o=!1;++r<i;){var a=Zo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&es(i)&&wo(a,i)&&(za(e)||Wa(e))}function yo(e){return"function"!=typeof e.constructor||xo(e)?{}:Vn(He(e))}function bo(e){return za(e)||Wa(e)||!!(Je&&e&&e[Je])}function wo(e,t){var n=typeof e;return!!(t=null==t?h:t)&&("number"==n||"symbol"!=n&&we.test(e))&&e>-1&&e%1==0&&e<t}function _o(e,t,n){if(!ts(n))return!1;var r=typeof t;return!!("number"==r?Ha(n)&&wo(t,n.length):"string"==r&&t in n)&&Ba(n[t],e)}function Eo(e,t){if(za(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!us(e))||(ne.test(e)||!te.test(e)||null!=t&&e in ke(t))}function So(e){var t=so(e),n=Bn[t];if("function"!=typeof n||!(t in zn.prototype))return!1;if(e===n)return!0;var r=ao(n);return!!r&&e===r[0]}(xn&&mo(new xn(new ArrayBuffer(1)))!=N||Cn&&mo(new Cn)!=x||kn&&mo(kn.resolve())!=T||Tn&&mo(new Tn)!=O||In&&mo(new In)!=M)&&(mo=function(e){var t=Cr(e),n=t==k?e.constructor:i,r=n?jo(n):"";if(r)switch(r){case Mn:return N;case Pn:return x;case Nn:return T;case Dn:return O;case Un:return M}return t});var Ro=Pe?Xa:gc;function xo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Me)}function Co(e){return e==e&&!ts(e)}function ko(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in ke(n)))}}function To(e,t,n){return t=bn(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=bn(i.length-t,0),s=r(a);++o<a;)s[o]=i[t+o];o=-1;for(var c=r(t+1);++o<t;)c[o]=i[o];return c[t]=n(s),kt(e,this,c)}}function Io(e,t){return t.length<2?e:Rr(e,ii(t,0,-1))}function Oo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ao=No(ti),Lo=pt||function(e,t){return vt.setTimeout(e,t)},Mo=No(ni);function Po(e,t,n){var r=t+"";return Mo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ce,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return It(g,(function(n){var r="_."+n[0];t&n[1]&&!Mt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(le):[]}(r),n)))}function No(e){var t=0,n=0;return function(){var r=_n(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Do(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var a=Kr(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Uo=function(e){var t=Na(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(pe,"$1"):n||e)})),t}));function Zo(e){if("string"==typeof e||us(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function jo(e){if(null!=e){try{return Ne.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fo(e){if(e instanceof zn)return e.clone();var t=new Wn(e.__wrapped__,e.__chain__);return t.__actions__=Oi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Bo=Jr((function(e,t){return $a(e)?dr(e,yr(t,1,$a,!0)):[]})),Vo=Jr((function(e,t){var n=Jo(t);return $a(n)&&(n=i),$a(e)?dr(e,yr(t,1,$a,!0),uo(n,2)):[]})),qo=Jr((function(e,t){var n=Jo(t);return $a(n)&&(n=i),$a(e)?dr(e,yr(t,1,$a,!0),i,n):[]}));function Wo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=bn(r+i,0)),Vt(e,uo(t,3),i)}function zo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=vs(n),o=n<0?bn(r+o,0):wn(o,r-1)),Vt(e,uo(t,3),o,!0)}function Go(e){return(null==e?0:e.length)?yr(e,1):[]}function Ho(e){return e&&e.length?e[0]:i}var $o=Jr((function(e){var t=Nt(e,yi);return t.length&&t[0]===e[0]?Or(t):[]})),Ko=Jr((function(e){var t=Jo(e),n=Nt(e,yi);return t===Jo(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Or(n,uo(t,2)):[]})),Yo=Jr((function(e){var t=Jo(e),n=Nt(e,yi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Or(n,i,t):[]}));function Jo(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Xo=Jr(Qo);function Qo(e,t){return e&&e.length&&t&&t.length?Hr(e,t):e}var ea=ro((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return $r(e,Nt(t,(function(e){return wo(e,n)?+e:e})).sort(ki)),r}));function ta(e){return null==e?e:Rn.call(e)}var na=Jr((function(e){return fi(yr(e,1,$a,!0))})),ra=Jr((function(e){var t=Jo(e);return $a(t)&&(t=i),fi(yr(e,1,$a,!0),uo(t,2))})),ia=Jr((function(e){var t=Jo(e);return t="function"==typeof t?t:i,fi(yr(e,1,$a,!0),i,t)}));function oa(e){if(!e||!e.length)return[];var t=0;return e=Lt(e,(function(e){if($a(e))return t=bn(e.length,t),!0})),Jt(t,(function(t){return Nt(e,Ht(t))}))}function aa(e,t){if(!e||!e.length)return[];var n=oa(e);return null==t?n:Nt(n,(function(e){return kt(t,i,e)}))}var sa=Jr((function(e,t){return $a(e)?dr(e,t):[]})),ca=Jr((function(e){return mi(Lt(e,$a))})),ua=Jr((function(e){var t=Jo(e);return $a(t)&&(t=i),mi(Lt(e,$a),uo(t,2))})),la=Jr((function(e){var t=Jo(e);return t="function"==typeof t?t:i,mi(Lt(e,$a),i,t)})),fa=Jr(oa);var da=Jr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,aa(e,n)}));function pa(e){var t=Bn(e);return t.__chain__=!0,t}function ha(e,t){return t(e)}var va=ro((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof zn&&wo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ha,args:[o],thisArg:i}),new Wn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)}));var ma=Li((function(e,t,n){De.call(e,n)?++e[n]:ar(e,n,1)}));var ga=ji(Wo),ya=ji(zo);function ba(e,t){return(za(e)?It:pr)(e,uo(t,3))}function wa(e,t){return(za(e)?Ot:hr)(e,uo(t,3))}var _a=Li((function(e,t,n){De.call(e,n)?e[n].push(t):ar(e,n,[t])}));var Ea=Jr((function(e,t,n){var i=-1,o="function"==typeof t,a=Ha(e)?r(e.length):[];return pr(e,(function(e){a[++i]=o?kt(t,e,n):Ar(e,t,n)})),a})),Sa=Li((function(e,t,n){ar(e,n,t)}));function Ra(e,t){return(za(e)?Nt:Fr)(e,uo(t,3))}var xa=Li((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Ca=Jr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&_o(e,t[0],t[1])?t=[]:n>2&&_o(t[0],t[1],t[2])&&(t=[t[0]]),zr(e,yr(t,1),[])})),ka=lt||function(){return vt.Date.now()};function Ta(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Xi(e,f,i,i,i,i,t)}function Ia(e,t){var n;if("function"!=typeof t)throw new Oe(o);return e=vs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Oa=Jr((function(e,t,n){var r=1;if(n.length){var i=fn(n,co(Oa));r|=u}return Xi(e,r,t,n,i)})),Aa=Jr((function(e,t,n){var r=3;if(n.length){var i=fn(n,co(Aa));r|=u}return Xi(t,r,e,n,i)}));function La(e,t,n){var r,a,s,c,u,l,f=0,d=!1,p=!1,h=!0;if("function"!=typeof e)throw new Oe(o);function v(t){var n=r,o=a;return r=a=i,f=t,c=e.apply(o,n)}function m(e){var n=e-l;return l===i||n>=t||n<0||p&&e-f>=s}function g(){var e=ka();if(m(e))return y(e);u=Lo(g,function(e){var n=t-(e-l);return p?wn(n,s-(e-f)):n}(e))}function y(e){return u=i,h&&r?v(e):(r=a=i,c)}function b(){var e=ka(),n=m(e);if(r=arguments,a=this,l=e,n){if(u===i)return function(e){return f=e,u=Lo(g,t),d?v(e):c}(l);if(p)return Si(u),u=Lo(g,t),v(l)}return u===i&&(u=Lo(g,t)),c}return t=gs(t)||0,ts(n)&&(d=!!n.leading,s=(p="maxWait"in n)?bn(gs(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h),b.cancel=function(){u!==i&&Si(u),f=0,r=l=a=u=i},b.flush=function(){return u===i?c:y(ka())},b}var Ma=Jr((function(e,t){return fr(e,1,t)})),Pa=Jr((function(e,t,n){return fr(e,gs(t)||0,n)}));function Na(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Oe(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Na.Cache||$n),n}function Da(e){if("function"!=typeof e)throw new Oe(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Na.Cache=$n;var Ua=_i((function(e,t){var n=(t=1==t.length&&za(t[0])?Nt(t[0],Qt(uo())):Nt(yr(t,1),Qt(uo()))).length;return Jr((function(r){for(var i=-1,o=wn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return kt(e,this,r)}))})),Za=Jr((function(e,t){var n=fn(t,co(Za));return Xi(e,u,i,t,n)})),ja=Jr((function(e,t){var n=fn(t,co(ja));return Xi(e,l,i,t,n)})),Fa=ro((function(e,t){return Xi(e,d,i,i,i,t)}));function Ba(e,t){return e===t||e!=e&&t!=t}var Va=Hi(kr),qa=Hi((function(e,t){return e>=t})),Wa=Lr(function(){return arguments}())?Lr:function(e){return ns(e)&&De.call(e,"callee")&&!Ke.call(e,"callee")},za=r.isArray,Ga=_t?Qt(_t):function(e){return ns(e)&&Cr(e)==P};function Ha(e){return null!=e&&es(e.length)&&!Xa(e)}function $a(e){return ns(e)&&Ha(e)}var Ka=bt||gc,Ya=Et?Qt(Et):function(e){return ns(e)&&Cr(e)==_};function Ja(e){if(!ns(e))return!1;var t=Cr(e);return t==E||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!os(e)}function Xa(e){if(!ts(e))return!1;var t=Cr(e);return t==S||t==R||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Qa(e){return"number"==typeof e&&e==vs(e)}function es(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function ts(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ns(e){return null!=e&&"object"==typeof e}var rs=St?Qt(St):function(e){return ns(e)&&mo(e)==x};function is(e){return"number"==typeof e||ns(e)&&Cr(e)==C}function os(e){if(!ns(e)||Cr(e)!=k)return!1;var t=He(e);if(null===t)return!0;var n=De.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ne.call(n)==Fe}var as=Rt?Qt(Rt):function(e){return ns(e)&&Cr(e)==I};var ss=xt?Qt(xt):function(e){return ns(e)&&mo(e)==O};function cs(e){return"string"==typeof e||!za(e)&&ns(e)&&Cr(e)==A}function us(e){return"symbol"==typeof e||ns(e)&&Cr(e)==L}var ls=Ct?Qt(Ct):function(e){return ns(e)&&es(e.length)&&!!ct[Cr(e)]};var fs=Hi(jr),ds=Hi((function(e,t){return e<=t}));function ps(e){if(!e)return[];if(Ha(e))return cs(e)?vn(e):Oi(e);if(Xe&&e[Xe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xe]());var t=mo(e);return(t==x?un:t==O?dn:Bs)(e)}function hs(e){return e?(e=gs(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function vs(e){var t=hs(e),n=t%1;return t==t?n?t-n:t:0}function ms(e){return e?cr(vs(e),0,m):0}function gs(e){if("number"==typeof e)return e;if(us(e))return v;if(ts(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ts(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Xt(e);var n=ge.test(e);return n||be.test(e)?dt(e.slice(2),n?2:8):me.test(e)?v:+e}function ys(e){return Ai(e,Ms(e))}function bs(e){return null==e?"":li(e)}var ws=Mi((function(e,t){if(xo(t)||Ha(t))Ai(t,Ls(t),e);else for(var n in t)De.call(t,n)&&nr(e,n,t[n])})),_s=Mi((function(e,t){Ai(t,Ms(t),e)})),Es=Mi((function(e,t,n,r){Ai(t,Ms(t),e,r)})),Ss=Mi((function(e,t,n,r){Ai(t,Ls(t),e,r)})),Rs=ro(sr);var xs=Jr((function(e,t){e=ke(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&_o(t[0],t[1],o)&&(r=1);++n<r;)for(var a=t[n],s=Ms(a),c=-1,u=s.length;++c<u;){var l=s[c],f=e[l];(f===i||Ba(f,Me[l])&&!De.call(e,l))&&(e[l]=a[l])}return e})),Cs=Jr((function(e){return e.push(i,eo),kt(Ns,i,e)}));function ks(e,t,n){var r=null==e?i:Rr(e,t);return r===i?n:r}function Ts(e,t){return null!=e&&go(e,t,Ir)}var Is=Vi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),e[t]=n}),tc(ic)),Os=Vi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=je.call(t)),De.call(e,t)?e[t].push(n):e[t]=[n]}),uo),As=Jr(Ar);function Ls(e){return Ha(e)?Jn(e):Ur(e)}function Ms(e){return Ha(e)?Jn(e,!0):Zr(e)}var Ps=Mi((function(e,t,n){qr(e,t,n)})),Ns=Mi((function(e,t,n,r){qr(e,t,n,r)})),Ds=ro((function(e,t){var n={};if(null==e)return n;var r=!1;t=Nt(t,(function(t){return t=wi(t,e),r||(r=t.length>1),t})),Ai(e,oo(e),n),r&&(n=ur(n,7,to));for(var i=t.length;i--;)di(n,t[i]);return n}));var Us=ro((function(e,t){return null==e?{}:function(e,t){return Gr(e,t,(function(t,n){return Ts(e,n)}))}(e,t)}));function Zs(e,t){if(null==e)return{};var n=Nt(oo(e),(function(e){return[e]}));return t=uo(t),Gr(e,n,(function(e,n){return t(e,n[0])}))}var js=Ji(Ls),Fs=Ji(Ms);function Bs(e){return null==e?[]:en(e,Ls(e))}var Vs=Ui((function(e,t,n){return t=t.toLowerCase(),e+(n?qs(t):t)}));function qs(e){return Js(bs(e).toLowerCase())}function Ws(e){return(e=bs(e))&&e.replace(_e,on).replace(tt,"")}var zs=Ui((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Gs=Ui((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Hs=Di("toLowerCase");var $s=Ui((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Ks=Ui((function(e,t,n){return e+(n?" ":"")+Js(t)}));var Ys=Ui((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Js=Di("toUpperCase");function Xs(e,t,n){return e=bs(e),(t=n?i:t)===i?function(e){return ot.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(fe)||[]}(e):e.match(t)||[]}var Qs=Jr((function(e,t){try{return kt(e,i,t)}catch(e){return Ja(e)?e:new Re(e)}})),ec=ro((function(e,t){return It(t,(function(t){t=Zo(t),ar(e,t,Oa(e[t],e))})),e}));function tc(e){return function(){return e}}var nc=Fi(),rc=Fi(!0);function ic(e){return e}function oc(e){return Dr("function"==typeof e?e:ur(e,1))}var ac=Jr((function(e,t){return function(n){return Ar(n,e,t)}})),sc=Jr((function(e,t){return function(n){return Ar(e,n,t)}}));function cc(e,t,n){var r=Ls(t),i=Sr(t,r);null!=n||ts(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Sr(t,Ls(t)));var o=!(ts(n)&&"chain"in n&&!n.chain),a=Xa(e);return It(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Oi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Dt([this.value()],arguments))})})),e}function uc(){}var lc=Wi(Nt),fc=Wi(At),dc=Wi(jt);function pc(e){return Eo(e)?Ht(Zo(e)):function(e){return function(t){return Rr(t,e)}}(e)}var hc=Gi(),vc=Gi(!0);function mc(){return[]}function gc(){return!1}var yc=qi((function(e,t){return e+t}),0),bc=Ki("ceil"),wc=qi((function(e,t){return e/t}),1),_c=Ki("floor");var Ec,Sc=qi((function(e,t){return e*t}),1),Rc=Ki("round"),xc=qi((function(e,t){return e-t}),0);return Bn.after=function(e,t){if("function"!=typeof t)throw new Oe(o);return e=vs(e),function(){if(--e<1)return t.apply(this,arguments)}},Bn.ary=Ta,Bn.assign=ws,Bn.assignIn=_s,Bn.assignInWith=Es,Bn.assignWith=Ss,Bn.at=Rs,Bn.before=Ia,Bn.bind=Oa,Bn.bindAll=ec,Bn.bindKey=Aa,Bn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return za(e)?e:[e]},Bn.chain=pa,Bn.chunk=function(e,t,n){t=(n?_o(e,t,n):t===i)?1:bn(vs(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var a=0,s=0,c=r(ht(o/t));a<o;)c[s++]=ii(e,a,a+=t);return c},Bn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Bn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Dt(za(n)?Oi(n):[n],yr(t,1))},Bn.cond=function(e){var t=null==e?0:e.length,n=uo();return e=t?Nt(e,(function(e){if("function"!=typeof e[1])throw new Oe(o);return[n(e[0]),e[1]]})):[],Jr((function(n){for(var r=-1;++r<t;){var i=e[r];if(kt(i[0],this,n))return kt(i[1],this,n)}}))},Bn.conforms=function(e){return function(e){var t=Ls(e);return function(n){return lr(n,e,t)}}(ur(e,1))},Bn.constant=tc,Bn.countBy=ma,Bn.create=function(e,t){var n=Vn(e);return null==t?n:or(n,t)},Bn.curry=function e(t,n,r){var o=Xi(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Bn.curryRight=function e(t,n,r){var o=Xi(t,c,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},Bn.debounce=La,Bn.defaults=xs,Bn.defaultsDeep=Cs,Bn.defer=Ma,Bn.delay=Pa,Bn.difference=Bo,Bn.differenceBy=Vo,Bn.differenceWith=qo,Bn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=n||t===i?1:vs(t))<0?0:t,r):[]},Bn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,0,(t=r-(t=n||t===i?1:vs(t)))<0?0:t):[]},Bn.dropRightWhile=function(e,t){return e&&e.length?hi(e,uo(t,3),!0,!0):[]},Bn.dropWhile=function(e,t){return e&&e.length?hi(e,uo(t,3),!0):[]},Bn.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&_o(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=vs(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:vs(r))<0&&(r+=o),r=n>r?0:ms(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Bn.filter=function(e,t){return(za(e)?Lt:gr)(e,uo(t,3))},Bn.flatMap=function(e,t){return yr(Ra(e,t),1)},Bn.flatMapDeep=function(e,t){return yr(Ra(e,t),p)},Bn.flatMapDepth=function(e,t,n){return n=n===i?1:vs(n),yr(Ra(e,t),n)},Bn.flatten=Go,Bn.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,p):[]},Bn.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===i?1:vs(t)):[]},Bn.flip=function(e){return Xi(e,512)},Bn.flow=nc,Bn.flowRight=rc,Bn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Bn.functions=function(e){return null==e?[]:Sr(e,Ls(e))},Bn.functionsIn=function(e){return null==e?[]:Sr(e,Ms(e))},Bn.groupBy=_a,Bn.initial=function(e){return(null==e?0:e.length)?ii(e,0,-1):[]},Bn.intersection=$o,Bn.intersectionBy=Ko,Bn.intersectionWith=Yo,Bn.invert=Is,Bn.invertBy=Os,Bn.invokeMap=Ea,Bn.iteratee=oc,Bn.keyBy=Sa,Bn.keys=Ls,Bn.keysIn=Ms,Bn.map=Ra,Bn.mapKeys=function(e,t){var n={};return t=uo(t,3),_r(e,(function(e,r,i){ar(n,t(e,r,i),e)})),n},Bn.mapValues=function(e,t){var n={};return t=uo(t,3),_r(e,(function(e,r,i){ar(n,r,t(e,r,i))})),n},Bn.matches=function(e){return Br(ur(e,1))},Bn.matchesProperty=function(e,t){return Vr(e,ur(t,1))},Bn.memoize=Na,Bn.merge=Ps,Bn.mergeWith=Ns,Bn.method=ac,Bn.methodOf=sc,Bn.mixin=cc,Bn.negate=Da,Bn.nthArg=function(e){return e=vs(e),Jr((function(t){return Wr(t,e)}))},Bn.omit=Ds,Bn.omitBy=function(e,t){return Zs(e,Da(uo(t)))},Bn.once=function(e){return Ia(2,e)},Bn.orderBy=function(e,t,n,r){return null==e?[]:(za(t)||(t=null==t?[]:[t]),za(n=r?i:n)||(n=null==n?[]:[n]),zr(e,t,n))},Bn.over=lc,Bn.overArgs=Ua,Bn.overEvery=fc,Bn.overSome=dc,Bn.partial=Za,Bn.partialRight=ja,Bn.partition=xa,Bn.pick=Us,Bn.pickBy=Zs,Bn.property=pc,Bn.propertyOf=function(e){return function(t){return null==e?i:Rr(e,t)}},Bn.pull=Xo,Bn.pullAll=Qo,Bn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,uo(n,2)):e},Bn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,i,n):e},Bn.pullAt=ea,Bn.range=hc,Bn.rangeRight=vc,Bn.rearg=Fa,Bn.reject=function(e,t){return(za(e)?Lt:gr)(e,Da(uo(t,3)))},Bn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=uo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return $r(e,i),n},Bn.rest=function(e,t){if("function"!=typeof e)throw new Oe(o);return Jr(e,t=t===i?t:vs(t))},Bn.reverse=ta,Bn.sampleSize=function(e,t,n){return t=(n?_o(e,t,n):t===i)?1:vs(t),(za(e)?Qn:Qr)(e,t)},Bn.set=function(e,t,n){return null==e?e:ei(e,t,n)},Bn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ei(e,t,n,r)},Bn.shuffle=function(e){return(za(e)?er:ri)(e)},Bn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&_o(e,t,n)?(t=0,n=r):(t=null==t?0:vs(t),n=n===i?r:vs(n)),ii(e,t,n)):[]},Bn.sortBy=Ca,Bn.sortedUniq=function(e){return e&&e.length?ci(e):[]},Bn.sortedUniqBy=function(e,t){return e&&e.length?ci(e,uo(t,2)):[]},Bn.split=function(e,t,n){return n&&"number"!=typeof n&&_o(e,t,n)&&(t=n=i),(n=n===i?m:n>>>0)?(e=bs(e))&&("string"==typeof t||null!=t&&!as(t))&&!(t=li(t))&&cn(e)?Ei(vn(e),0,n):e.split(t,n):[]},Bn.spread=function(e,t){if("function"!=typeof e)throw new Oe(o);return t=null==t?0:bn(vs(t),0),Jr((function(n){var r=n[t],i=Ei(n,0,t);return r&&Dt(i,r),kt(e,this,i)}))},Bn.tail=function(e){var t=null==e?0:e.length;return t?ii(e,1,t):[]},Bn.take=function(e,t,n){return e&&e.length?ii(e,0,(t=n||t===i?1:vs(t))<0?0:t):[]},Bn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ii(e,(t=r-(t=n||t===i?1:vs(t)))<0?0:t,r):[]},Bn.takeRightWhile=function(e,t){return e&&e.length?hi(e,uo(t,3),!1,!0):[]},Bn.takeWhile=function(e,t){return e&&e.length?hi(e,uo(t,3)):[]},Bn.tap=function(e,t){return t(e),e},Bn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Oe(o);return ts(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),La(e,t,{leading:r,maxWait:t,trailing:i})},Bn.thru=ha,Bn.toArray=ps,Bn.toPairs=js,Bn.toPairsIn=Fs,Bn.toPath=function(e){return za(e)?Nt(e,Zo):us(e)?[e]:Oi(Uo(bs(e)))},Bn.toPlainObject=ys,Bn.transform=function(e,t,n){var r=za(e),i=r||Ka(e)||ls(e);if(t=uo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ts(e)&&Xa(o)?Vn(He(e)):{}}return(i?It:_r)(e,(function(e,r,i){return t(n,e,r,i)})),n},Bn.unary=function(e){return Ta(e,1)},Bn.union=na,Bn.unionBy=ra,Bn.unionWith=ia,Bn.uniq=function(e){return e&&e.length?fi(e):[]},Bn.uniqBy=function(e,t){return e&&e.length?fi(e,uo(t,2)):[]},Bn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?fi(e,i,t):[]},Bn.unset=function(e,t){return null==e||di(e,t)},Bn.unzip=oa,Bn.unzipWith=aa,Bn.update=function(e,t,n){return null==e?e:pi(e,t,bi(n))},Bn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:pi(e,t,bi(n),r)},Bn.values=Bs,Bn.valuesIn=function(e){return null==e?[]:en(e,Ms(e))},Bn.without=sa,Bn.words=Xs,Bn.wrap=function(e,t){return Za(bi(t),e)},Bn.xor=ca,Bn.xorBy=ua,Bn.xorWith=la,Bn.zip=fa,Bn.zipObject=function(e,t){return gi(e||[],t||[],nr)},Bn.zipObjectDeep=function(e,t){return gi(e||[],t||[],ei)},Bn.zipWith=da,Bn.entries=js,Bn.entriesIn=Fs,Bn.extend=_s,Bn.extendWith=Es,cc(Bn,Bn),Bn.add=yc,Bn.attempt=Qs,Bn.camelCase=Vs,Bn.capitalize=qs,Bn.ceil=bc,Bn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=gs(n))==n?n:0),t!==i&&(t=(t=gs(t))==t?t:0),cr(gs(e),t,n)},Bn.clone=function(e){return ur(e,4)},Bn.cloneDeep=function(e){return ur(e,5)},Bn.cloneDeepWith=function(e,t){return ur(e,5,t="function"==typeof t?t:i)},Bn.cloneWith=function(e,t){return ur(e,4,t="function"==typeof t?t:i)},Bn.conformsTo=function(e,t){return null==t||lr(e,t,Ls(t))},Bn.deburr=Ws,Bn.defaultTo=function(e,t){return null==e||e!=e?t:e},Bn.divide=wc,Bn.endsWith=function(e,t,n){e=bs(e),t=li(t);var r=e.length,o=n=n===i?r:cr(vs(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},Bn.eq=Ba,Bn.escape=function(e){return(e=bs(e))&&J.test(e)?e.replace(K,an):e},Bn.escapeRegExp=function(e){return(e=bs(e))&&oe.test(e)?e.replace(ie,"\\$&"):e},Bn.every=function(e,t,n){var r=za(e)?At:vr;return n&&_o(e,t,n)&&(t=i),r(e,uo(t,3))},Bn.find=ga,Bn.findIndex=Wo,Bn.findKey=function(e,t){return Bt(e,uo(t,3),_r)},Bn.findLast=ya,Bn.findLastIndex=zo,Bn.findLastKey=function(e,t){return Bt(e,uo(t,3),Er)},Bn.floor=_c,Bn.forEach=ba,Bn.forEachRight=wa,Bn.forIn=function(e,t){return null==e?e:br(e,uo(t,3),Ms)},Bn.forInRight=function(e,t){return null==e?e:wr(e,uo(t,3),Ms)},Bn.forOwn=function(e,t){return e&&_r(e,uo(t,3))},Bn.forOwnRight=function(e,t){return e&&Er(e,uo(t,3))},Bn.get=ks,Bn.gt=Va,Bn.gte=qa,Bn.has=function(e,t){return null!=e&&go(e,t,Tr)},Bn.hasIn=Ts,Bn.head=Ho,Bn.identity=ic,Bn.includes=function(e,t,n,r){e=Ha(e)?e:Bs(e),n=n&&!r?vs(n):0;var i=e.length;return n<0&&(n=bn(i+n,0)),cs(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&qt(e,t,n)>-1},Bn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=bn(r+i,0)),qt(e,t,i)},Bn.inRange=function(e,t,n){return t=hs(t),n===i?(n=t,t=0):n=hs(n),function(e,t,n){return e>=wn(t,n)&&e<bn(t,n)}(e=gs(e),t,n)},Bn.invoke=As,Bn.isArguments=Wa,Bn.isArray=za,Bn.isArrayBuffer=Ga,Bn.isArrayLike=Ha,Bn.isArrayLikeObject=$a,Bn.isBoolean=function(e){return!0===e||!1===e||ns(e)&&Cr(e)==w},Bn.isBuffer=Ka,Bn.isDate=Ya,Bn.isElement=function(e){return ns(e)&&1===e.nodeType&&!os(e)},Bn.isEmpty=function(e){if(null==e)return!0;if(Ha(e)&&(za(e)||"string"==typeof e||"function"==typeof e.splice||Ka(e)||ls(e)||Wa(e)))return!e.length;var t=mo(e);if(t==x||t==O)return!e.size;if(xo(e))return!Ur(e).length;for(var n in e)if(De.call(e,n))return!1;return!0},Bn.isEqual=function(e,t){return Mr(e,t)},Bn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Mr(e,t,i,n):!!r},Bn.isError=Ja,Bn.isFinite=function(e){return"number"==typeof e&&wt(e)},Bn.isFunction=Xa,Bn.isInteger=Qa,Bn.isLength=es,Bn.isMap=rs,Bn.isMatch=function(e,t){return e===t||Pr(e,t,fo(t))},Bn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Pr(e,t,fo(t),n)},Bn.isNaN=function(e){return is(e)&&e!=+e},Bn.isNative=function(e){if(Ro(e))throw new Re("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nr(e)},Bn.isNil=function(e){return null==e},Bn.isNull=function(e){return null===e},Bn.isNumber=is,Bn.isObject=ts,Bn.isObjectLike=ns,Bn.isPlainObject=os,Bn.isRegExp=as,Bn.isSafeInteger=function(e){return Qa(e)&&e>=-9007199254740991&&e<=h},Bn.isSet=ss,Bn.isString=cs,Bn.isSymbol=us,Bn.isTypedArray=ls,Bn.isUndefined=function(e){return e===i},Bn.isWeakMap=function(e){return ns(e)&&mo(e)==M},Bn.isWeakSet=function(e){return ns(e)&&"[object WeakSet]"==Cr(e)},Bn.join=function(e,t){return null==e?"":Ft.call(e,t)},Bn.kebabCase=zs,Bn.last=Jo,Bn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=vs(n))<0?bn(r+o,0):wn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Vt(e,zt,o,!0)},Bn.lowerCase=Gs,Bn.lowerFirst=Hs,Bn.lt=fs,Bn.lte=ds,Bn.max=function(e){return e&&e.length?mr(e,ic,kr):i},Bn.maxBy=function(e,t){return e&&e.length?mr(e,uo(t,2),kr):i},Bn.mean=function(e){return Gt(e,ic)},Bn.meanBy=function(e,t){return Gt(e,uo(t,2))},Bn.min=function(e){return e&&e.length?mr(e,ic,jr):i},Bn.minBy=function(e,t){return e&&e.length?mr(e,uo(t,2),jr):i},Bn.stubArray=mc,Bn.stubFalse=gc,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=Sc,Bn.nth=function(e,t){return e&&e.length?Wr(e,vs(t)):i},Bn.noConflict=function(){return vt._===this&&(vt._=Be),this},Bn.noop=uc,Bn.now=ka,Bn.pad=function(e,t,n){e=bs(e);var r=(t=vs(t))?hn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return zi(mt(i),n)+e+zi(ht(i),n)},Bn.padEnd=function(e,t,n){e=bs(e);var r=(t=vs(t))?hn(e):0;return t&&r<t?e+zi(t-r,n):e},Bn.padStart=function(e,t,n){e=bs(e);var r=(t=vs(t))?hn(e):0;return t&&r<t?zi(t-r,n)+e:e},Bn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),En(bs(e).replace(ae,""),t||0)},Bn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&_o(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=hs(e),t===i?(t=e,e=0):t=hs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=Sn();return wn(e+o*(t-e+ft("1e-"+((o+"").length-1))),t)}return Kr(e,t)},Bn.reduce=function(e,t,n){var r=za(e)?Ut:Kt,i=arguments.length<3;return r(e,uo(t,4),n,i,pr)},Bn.reduceRight=function(e,t,n){var r=za(e)?Zt:Kt,i=arguments.length<3;return r(e,uo(t,4),n,i,hr)},Bn.repeat=function(e,t,n){return t=(n?_o(e,t,n):t===i)?1:vs(t),Yr(bs(e),t)},Bn.replace=function(){var e=arguments,t=bs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Bn.result=function(e,t,n){var r=-1,o=(t=wi(t,e)).length;for(o||(o=1,e=i);++r<o;){var a=null==e?i:e[Zo(t[r])];a===i&&(r=o,a=n),e=Xa(a)?a.call(e):a}return e},Bn.round=Rc,Bn.runInContext=e,Bn.sample=function(e){return(za(e)?Xn:Xr)(e)},Bn.size=function(e){if(null==e)return 0;if(Ha(e))return cs(e)?hn(e):e.length;var t=mo(e);return t==x||t==O?e.size:Ur(e).length},Bn.snakeCase=$s,Bn.some=function(e,t,n){var r=za(e)?jt:oi;return n&&_o(e,t,n)&&(t=i),r(e,uo(t,3))},Bn.sortedIndex=function(e,t){return ai(e,t)},Bn.sortedIndexBy=function(e,t,n){return si(e,t,uo(n,2))},Bn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ai(e,t);if(r<n&&Ba(e[r],t))return r}return-1},Bn.sortedLastIndex=function(e,t){return ai(e,t,!0)},Bn.sortedLastIndexBy=function(e,t,n){return si(e,t,uo(n,2),!0)},Bn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=ai(e,t,!0)-1;if(Ba(e[n],t))return n}return-1},Bn.startCase=Ks,Bn.startsWith=function(e,t,n){return e=bs(e),n=null==n?0:cr(vs(n),0,e.length),t=li(t),e.slice(n,n+t.length)==t},Bn.subtract=xc,Bn.sum=function(e){return e&&e.length?Yt(e,ic):0},Bn.sumBy=function(e,t){return e&&e.length?Yt(e,uo(t,2)):0},Bn.template=function(e,t,n){var r=Bn.templateSettings;n&&_o(e,t,n)&&(t=i),e=bs(e),t=Es({},t,r,Qi);var o,a,s=Es({},t.imports,r.imports,Qi),c=Ls(s),u=en(s,c),l=0,f=t.interpolate||Ee,d="__p += '",p=Te((t.escape||Ee).source+"|"+f.source+"|"+(f===ee?he:Ee).source+"|"+(t.evaluate||Ee).source+"|$","g"),h="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++st+"]")+"\n";e.replace(p,(function(t,n,r,i,s,c){return r||(r=i),d+=e.slice(l,c).replace(Se,sn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t})),d+="';\n";var v=De.call(t,"variable")&&t.variable;if(v){if(de.test(v))throw new Re("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(z,""):d).replace(G,"$1").replace(H,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Qs((function(){return xe(c,h+"return "+d).apply(i,u)}));if(m.source=d,Ja(m))throw m;return m},Bn.times=function(e,t){if((e=vs(e))<1||e>h)return[];var n=m,r=wn(e,m);t=uo(t),e-=m;for(var i=Jt(r,t);++n<e;)t(n);return i},Bn.toFinite=hs,Bn.toInteger=vs,Bn.toLength=ms,Bn.toLower=function(e){return bs(e).toLowerCase()},Bn.toNumber=gs,Bn.toSafeInteger=function(e){return e?cr(vs(e),-9007199254740991,h):0===e?e:0},Bn.toString=bs,Bn.toUpper=function(e){return bs(e).toUpperCase()},Bn.trim=function(e,t,n){if((e=bs(e))&&(n||t===i))return Xt(e);if(!e||!(t=li(t)))return e;var r=vn(e),o=vn(t);return Ei(r,nn(r,o),rn(r,o)+1).join("")},Bn.trimEnd=function(e,t,n){if((e=bs(e))&&(n||t===i))return e.slice(0,mn(e)+1);if(!e||!(t=li(t)))return e;var r=vn(e);return Ei(r,0,rn(r,vn(t))+1).join("")},Bn.trimStart=function(e,t,n){if((e=bs(e))&&(n||t===i))return e.replace(ae,"");if(!e||!(t=li(t)))return e;var r=vn(e);return Ei(r,nn(r,vn(t))).join("")},Bn.truncate=function(e,t){var n=30,r="...";if(ts(t)){var o="separator"in t?t.separator:o;n="length"in t?vs(t.length):n,r="omission"in t?li(t.omission):r}var a=(e=bs(e)).length;if(cn(e)){var s=vn(e);a=s.length}if(n>=a)return e;var c=n-hn(r);if(c<1)return r;var u=s?Ei(s,0,c).join(""):e.slice(0,c);if(o===i)return u+r;if(s&&(c+=u.length-c),as(o)){if(e.slice(c).search(o)){var l,f=u;for(o.global||(o=Te(o.source,bs(ve.exec(o))+"g")),o.lastIndex=0;l=o.exec(f);)var d=l.index;u=u.slice(0,d===i?c:d)}}else if(e.indexOf(li(o),c)!=c){var p=u.lastIndexOf(o);p>-1&&(u=u.slice(0,p))}return u+r},Bn.unescape=function(e){return(e=bs(e))&&Y.test(e)?e.replace($,gn):e},Bn.uniqueId=function(e){var t=++Ue;return bs(e)+t},Bn.upperCase=Ys,Bn.upperFirst=Js,Bn.each=ba,Bn.eachRight=wa,Bn.first=Ho,cc(Bn,(Ec={},_r(Bn,(function(e,t){De.call(Bn.prototype,t)||(Ec[t]=e)})),Ec),{chain:!1}),Bn.VERSION="4.17.21",It(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Bn[e].placeholder=Bn})),It(["drop","take"],(function(e,t){zn.prototype[e]=function(n){n=n===i?1:bn(vs(n),0);var r=this.__filtered__&&!t?new zn(this):this.clone();return r.__filtered__?r.__takeCount__=wn(n,r.__takeCount__):r.__views__.push({size:wn(n,m),type:e+(r.__dir__<0?"Right":"")}),r},zn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),It(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;zn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:uo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),It(["head","last"],(function(e,t){var n="take"+(t?"Right":"");zn.prototype[e]=function(){return this[n](1).value()[0]}})),It(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");zn.prototype[e]=function(){return this.__filtered__?new zn(this):this[n](1)}})),zn.prototype.compact=function(){return this.filter(ic)},zn.prototype.find=function(e){return this.filter(e).head()},zn.prototype.findLast=function(e){return this.reverse().find(e)},zn.prototype.invokeMap=Jr((function(e,t){return"function"==typeof e?new zn(this):this.map((function(n){return Ar(n,e,t)}))})),zn.prototype.reject=function(e){return this.filter(Da(uo(e)))},zn.prototype.slice=function(e,t){e=vs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new zn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=vs(t))<0?n.dropRight(-t):n.take(t-e)),n)},zn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},zn.prototype.toArray=function(){return this.take(m)},_r(zn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=Bn[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);o&&(Bn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,c=t instanceof zn,u=s[0],l=c||za(t),f=function(e){var t=o.apply(Bn,Dt([e],s));return r&&d?t[0]:t};l&&n&&"function"==typeof u&&1!=u.length&&(c=l=!1);var d=this.__chain__,p=!!this.__actions__.length,h=a&&!d,v=c&&!p;if(!a&&l){t=v?t:new zn(this);var m=e.apply(t,s);return m.__actions__.push({func:ha,args:[f],thisArg:i}),new Wn(m,d)}return h&&v?e.apply(this,s):(m=this.thru(f),h?r?m.value()[0]:m.value():m)})})),It(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ae[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Bn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(za(i)?i:[],e)}return this[n]((function(n){return t.apply(za(n)?n:[],e)}))}})),_r(zn.prototype,(function(e,t){var n=Bn[t];if(n){var r=n.name+"";De.call(Ln,r)||(Ln[r]=[]),Ln[r].push({name:t,func:n})}})),Ln[Bi(i,2).name]=[{name:"wrapper",func:i}],zn.prototype.clone=function(){var e=new zn(this.__wrapped__);return e.__actions__=Oi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Oi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Oi(this.__views__),e},zn.prototype.reverse=function(){if(this.__filtered__){var e=new zn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},zn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=za(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=wn(t,e+a);break;case"takeRight":e=bn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,c=s-a,u=r?s:a-1,l=this.__iteratees__,f=l.length,d=0,p=wn(c,this.__takeCount__);if(!n||!r&&i==c&&p==c)return vi(e,this.__actions__);var h=[];e:for(;c--&&d<p;){for(var v=-1,m=e[u+=t];++v<f;){var g=l[v],y=g.iteratee,b=g.type,w=y(m);if(2==b)m=w;else if(!w){if(1==b)continue e;break e}}h[d++]=m}return h},Bn.prototype.at=va,Bn.prototype.chain=function(){return pa(this)},Bn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===i&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},Bn.prototype.plant=function(e){for(var t,n=this;n instanceof qn;){var r=Fo(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},Bn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof zn){var t=e;return this.__actions__.length&&(t=new zn(this)),(t=t.reverse()).__actions__.push({func:ha,args:[ta],thisArg:i}),new Wn(t,this.__chain__)}return this.thru(ta)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return vi(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,Xe&&(Bn.prototype[Xe]=function(){return this}),Bn}();vt._=yn,(r=function(){return yn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},88306:(e,t,n)=>{var r=n(83369),i="Expected a function";function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(o.Cache||r),n}o.Cache=r,e.exports=o},82492:(e,t,n)=>{var r=n(42980),i=n(21463)((function(e,t,n){r(e,t,n)}));e.exports=i},30236:(e,t,n)=>{var r=n(42980),i=n(21463)((function(e,t,n,i){r(e,t,n,i)}));e.exports=i},50308:e=>{e.exports=function(){}},7771:(e,t,n)=>{var r=n(55639);e.exports=function(){return r.Date.now()}},82723:(e,t,n)=>{var r=n(29932),i=n(85990),o=n(57406),a=n(71811),s=n(98363),c=n(60696),u=n(99021),l=n(46904),f=u((function(e,t){var n={};if(null==e)return n;var u=!1;t=r(t,(function(t){return t=a(t,e),u||(u=t.length>1),t})),s(e,l(e),n),u&&(n=i(n,7,c));for(var f=t.length;f--;)o(n,t[f]);return n}));e.exports=f},51463:(e,t,n)=>{var r=n(89567);e.exports=function(e){return r(2,e)}},53131:(e,t,n)=>{var r=n(5976),i=n(97727),o=n(20893),a=n(46460),s=r((function(e,t){var n=a(t,o(s));return i(e,32,void 0,t,n)}));s.placeholder={},e.exports=s},43174:(e,t,n)=>{var r=n(55189)((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));e.exports=r},78718:(e,t,n)=>{var r=n(25970),i=n(99021)((function(e,t){return null==e?{}:r(e,t)}));e.exports=i},39601:(e,t,n)=>{var r=n(40371),i=n(79152),o=n(15403),a=n(40327);e.exports=function(e){return o(e)?r(a(e)):i(e)}},58613:(e,t,n)=>{var r=n(71811),i=n(23560),o=n(40327);e.exports=function(e,t,n){var a=-1,s=(t=r(t,e)).length;for(s||(s=1,e=void 0);++a<s;){var c=null==e?void 0:e[o(t[a])];void 0===c&&(a=s,c=n),e=i(c)?c.call(e):c}return e}},36968:(e,t,n)=>{var r=n(10611);e.exports=function(e,t,n){return null==e?e:r(e,t,n)}},70479:e=>{e.exports=function(){return[]}},95062:e=>{e.exports=function(){return!1}},18601:(e,t,n)=>{var r=n(14841),i=1/0,o=17976931348623157e292;e.exports=function(e){return e?(e=r(e))===i||e===-i?(e<0?-1:1)*o:e==e?e:0:0===e?e:0}},40554:(e,t,n)=>{var r=n(18601);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},14841:(e,t,n)=>{var r=n(27561),i=n(13218),o=n(33448),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return a;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=c.test(e);return n||u.test(e)?l(e.slice(2),n?2:8):s.test(e)?a:+e}},59881:(e,t,n)=>{var r=n(98363),i=n(81704);e.exports=function(e){return r(e,i(e))}},79833:(e,t,n)=>{var r=n(80531);e.exports=function(e){return null==e?"":r(e)}},93386:(e,t,n)=>{var r=n(21078),i=n(5976),o=n(45652),a=n(29246),s=i((function(e){return o(r(e,1,a,!0))}));e.exports=s},73955:(e,t,n)=>{var r=n(79833),i=0;e.exports=function(e){var t=++i;return r(e)+t}},98601:(e,t,n)=>{var r=n(57406);e.exports=function(e,t){return null==e||r(e,t)}},11700:(e,t,n)=>{var r=n(98805)("toUpperCase");e.exports=r},52628:(e,t,n)=>{var r=n(47415),i=n(3674);e.exports=function(e){return null==e?[]:r(e,i(e))}},58748:(e,t,n)=>{var r=n(49029),i=n(93157),o=n(79833),a=n(2757);e.exports=function(e,t,n){return e=o(e),void 0===(t=n?void 0:t)?i(e)?a(e):r(e):e.match(t)||[]}},90359:(e,t,n)=>{var r=n(54290),i=n(53131);e.exports=function(e,t){return i(r(t),e)}},8111:(e,t,n)=>{var r=n(96425),i=n(7548),o=n(9435),a=n(1469),s=n(37005),c=n(21913),u=Object.prototype.hasOwnProperty;function l(e){if(s(e)&&!a(e)&&!(e instanceof r)){if(e instanceof i)return e;if(u.call(e,"__wrapped__"))return c(e)}return new i(e)}l.prototype=o.prototype,l.prototype.constructor=l,e.exports=l},39593:(e,t,n)=>{"use strict";const r=n(34411),i=Symbol("max"),o=Symbol("length"),a=Symbol("lengthCalculator"),s=Symbol("allowStale"),c=Symbol("maxAge"),u=Symbol("dispose"),l=Symbol("noDisposeOnSet"),f=Symbol("lruList"),d=Symbol("cache"),p=Symbol("updateAgeOnGet"),h=()=>1;const v=(e,t,n)=>{const r=e[d].get(t);if(r){const t=r.value;if(m(e,t)){if(y(e,r),!e[s])return}else n&&(e[p]&&(r.value.now=Date.now()),e[f].unshiftNode(r));return t.value}},m=(e,t)=>{if(!t||!t.maxAge&&!e[c])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[c]&&n>e[c]},g=e=>{if(e[o]>e[i])for(let t=e[f].tail;e[o]>e[i]&&null!==t;){const n=t.prev;y(e,t),t=n}},y=(e,t)=>{if(t){const n=t.value;e[u]&&e[u](n.key,n.value),e[o]-=n.length,e[d].delete(n.key),e[f].removeNode(t)}};class b{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const w=(e,t,n,r)=>{let i=n.value;m(e,i)&&(y(e,n),e[s]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[i]=e.max||1/0;const t=e.length||h;if(this[a]="function"!=typeof t?h:t,this[s]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[u]=e.dispose,this[l]=e.noDisposeOnSet||!1,this[p]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||1/0,g(this)}get max(){return this[i]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[c]=e,g(this)}get maxAge(){return this[c]}set lengthCalculator(e){"function"!=typeof e&&(e=h),e!==this[a]&&(this[a]=e,this[o]=0,this[f].forEach((e=>{e.length=this[a](e.value,e.key),this[o]+=e.length}))),g(this)}get lengthCalculator(){return this[a]}get length(){return this[o]}get itemCount(){return this[f].length}rforEach(e,t){t=t||this;for(let n=this[f].tail;null!==n;){const r=n.prev;w(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[f].head;null!==n;){const r=n.next;w(this,e,n,t),n=r}}keys(){return this[f].toArray().map((e=>e.key))}values(){return this[f].toArray().map((e=>e.value))}reset(){this[u]&&this[f]&&this[f].length&&this[f].forEach((e=>this[u](e.key,e.value))),this[d]=new Map,this[f]=new r,this[o]=0}dump(){return this[f].map((e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[f]}set(e,t,n){if((n=n||this[c])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,s=this[a](t,e);if(this[d].has(e)){if(s>this[i])return y(this,this[d].get(e)),!1;const a=this[d].get(e).value;return this[u]&&(this[l]||this[u](e,a.value)),a.now=r,a.maxAge=n,a.value=t,this[o]+=s-a.length,a.length=s,this.get(e),g(this),!0}const p=new b(e,t,s,r,n);return p.length>this[i]?(this[u]&&this[u](e,t),!1):(this[o]+=p.length,this[f].unshift(p),this[d].set(e,this[f].head),g(this),!0)}has(e){if(!this[d].has(e))return!1;const t=this[d].get(e).value;return!m(this,t)}get(e){return v(this,e,!0)}peek(e){return v(this,e,!1)}pop(){const e=this[f].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[d].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[d].forEach(((e,t)=>v(this,t,!1)))}}},57824:e=>{var t=1e3,n=60*t,r=60*n,i=24*r,o=7*i,a=365.25*i;function s(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,c){c=c||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!s)return;var c=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*a;case"weeks":case"week":case"w":return c*o;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*r;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===u&&isFinite(e))return c.long?function(e){var o=Math.abs(e);if(o>=i)return s(e,o,i,"day");if(o>=r)return s(e,o,r,"hour");if(o>=n)return s(e,o,n,"minute");if(o>=t)return s(e,o,t,"second");return e+" ms"}(e):function(e){var o=Math.abs(e);if(o>=i)return Math.round(e/i)+"d";if(o>=r)return Math.round(e/r)+"h";if(o>=n)return Math.round(e/n)+"m";if(o>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},70631:(e,t,n)=>{var r="function"==typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&r?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=r&&i&&"function"==typeof i.get?i.get:null,a=r&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=s&&c&&"function"==typeof c.get?c.get:null,l=s&&Set.prototype.forEach,f="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,h=Boolean.prototype.valueOf,v=Object.prototype.toString,m=Function.prototype.toString,g=String.prototype.match,y=String.prototype.slice,b=String.prototype.replace,w=String.prototype.toUpperCase,_=String.prototype.toLowerCase,E=RegExp.prototype.test,S=Array.prototype.concat,R=Array.prototype.join,x=Array.prototype.slice,C=Math.floor,k="function"==typeof BigInt?BigInt.prototype.valueOf:null,T=Object.getOwnPropertySymbols,I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,O="function"==typeof Symbol&&"object"==typeof Symbol.iterator,A="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===O||"symbol")?Symbol.toStringTag:null,L=Object.prototype.propertyIsEnumerable,M=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function P(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||E.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var r=e<0?-C(-e):C(e);if(r!==e){var i=String(r),o=y.call(t,i.length+1);return b.call(i,n,"$&_")+"."+b.call(b.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return b.call(t,n,"$&_")}var N=n(24654),D=N.custom,U=V(D)?D:null;function Z(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function j(e){return b.call(String(e),/"/g,"&quot;")}function F(e){return!("[object Array]"!==z(e)||A&&"object"==typeof e&&A in e)}function B(e){return!("[object RegExp]"!==z(e)||A&&"object"==typeof e&&A in e)}function V(e){if(O)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!I)return!1;try{return I.call(e),!0}catch(e){}return!1}e.exports=function e(t,n,r,i){var s=n||{};if(W(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(W(s,"maxStringLength")&&("number"==typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=!W(s,"customInspect")||s.customInspect;if("boolean"!=typeof c&&"symbol"!==c)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(W(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(W(s,"numericSeparator")&&"boolean"!=typeof s.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var v=s.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return H(t,s);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var w=String(t);return v?P(t,w):w}if("bigint"==typeof t){var E=String(t)+"n";return v?P(t,E):E}var C=void 0===s.depth?5:s.depth;if(void 0===r&&(r=0),r>=C&&C>0&&"object"==typeof t)return F(t)?"[Array]":"[Object]";var T=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=R.call(Array(e.indent+1)," ")}return{base:n,prev:R.call(Array(t+1),n)}}(s,r);if(void 0===i)i=[];else if(G(i,t)>=0)return"[Circular]";function D(t,n,o){if(n&&(i=x.call(i)).push(n),o){var a={depth:s.depth};return W(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),e(t,a,r+1,i)}return e(t,s,r+1,i)}if("function"==typeof t&&!B(t)){var q=function(e){if(e.name)return e.name;var t=g.call(m.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),$=Q(t,D);return"[Function"+(q?": "+q:" (anonymous)")+"]"+($.length>0?" { "+R.call($,", ")+" }":"")}if(V(t)){var ee=O?b.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):I.call(t);return"object"!=typeof t||O?ee:K(ee)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var te="<"+_.call(String(t.nodeName)),ne=t.attributes||[],re=0;re<ne.length;re++)te+=" "+ne[re].name+"="+Z(j(ne[re].value),"double",s);return te+=">",t.childNodes&&t.childNodes.length&&(te+="..."),te+="</"+_.call(String(t.nodeName))+">"}if(F(t)){if(0===t.length)return"[]";var ie=Q(t,D);return T&&!function(e){for(var t=0;t<e.length;t++)if(G(e[t],"\n")>=0)return!1;return!0}(ie)?"["+X(ie,T)+"]":"[ "+R.call(ie,", ")+" ]"}if(function(e){return!("[object Error]"!==z(e)||A&&"object"==typeof e&&A in e)}(t)){var oe=Q(t,D);return"cause"in Error.prototype||!("cause"in t)||L.call(t,"cause")?0===oe.length?"["+String(t)+"]":"{ ["+String(t)+"] "+R.call(oe,", ")+" }":"{ ["+String(t)+"] "+R.call(S.call("[cause]: "+D(t.cause),oe),", ")+" }"}if("object"==typeof t&&c){if(U&&"function"==typeof t[U]&&N)return N(t,{depth:C-r});if("symbol"!==c&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!=typeof e)return!1;try{o.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var ae=[];return a&&a.call(t,(function(e,n){ae.push(D(n,t,!0)+" => "+D(e,t))})),J("Map",o.call(t),ae,T)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{o.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var se=[];return l&&l.call(t,(function(e){se.push(D(e,t))})),J("Set",u.call(t),se,T)}if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{f.call(e,f);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return Y("WeakMap");if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{f.call(e,f)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return Y("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return Y("WeakRef");if(function(e){return!("[object Number]"!==z(e)||A&&"object"==typeof e&&A in e)}(t))return K(D(Number(t)));if(function(e){if(!e||"object"!=typeof e||!k)return!1;try{return k.call(e),!0}catch(e){}return!1}(t))return K(D(k.call(t)));if(function(e){return!("[object Boolean]"!==z(e)||A&&"object"==typeof e&&A in e)}(t))return K(h.call(t));if(function(e){return!("[object String]"!==z(e)||A&&"object"==typeof e&&A in e)}(t))return K(D(String(t)));if(!function(e){return!("[object Date]"!==z(e)||A&&"object"==typeof e&&A in e)}(t)&&!B(t)){var ce=Q(t,D),ue=M?M(t)===Object.prototype:t instanceof Object||t.constructor===Object,le=t instanceof Object?"":"null prototype",fe=!ue&&A&&Object(t)===t&&A in t?y.call(z(t),8,-1):le?"Object":"",de=(ue||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(fe||le?"["+R.call(S.call([],fe||[],le||[]),": ")+"] ":"");return 0===ce.length?de+"{}":T?de+"{"+X(ce,T)+"}":de+"{ "+R.call(ce,", ")+" }"}return String(t)};var q=Object.prototype.hasOwnProperty||function(e){return e in this};function W(e,t){return q.call(e,t)}function z(e){return v.call(e)}function G(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function H(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return H(y.call(e,0,t.maxStringLength),t)+r}return Z(b.call(b.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,$),"single",t)}function $(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+w.call(t.toString(16))}function K(e){return"Object("+e+")"}function Y(e){return e+" { ? }"}function J(e,t,n,r){return e+" ("+t+") {"+(r?X(n,r):R.call(n,", "))+"}"}function X(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+R.call(e,","+n)+"\n"+t.prev}function Q(e,t){var n=F(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=W(e,i)?t(e[i],e):""}var o,a="function"==typeof T?T(e):[];if(O){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var c in e)W(e,c)&&(n&&String(Number(c))===c&&c<e.length||O&&o["$"+c]instanceof Symbol||(E.call(/[^\w$]/,c)?r.push(t(c,e)+": "+t(e[c],e)):r.push(c+": "+t(e[c],e))));if("function"==typeof T)for(var u=0;u<a.length;u++)L.call(e,a[u])&&r.push("["+t(a[u])+"]: "+t(e[a[u]],e));return r}},24753:(e,t,n)=>{e.exports=n(24753)},4947:e=>{var t=function(e){return e.replace(/^\s+|\s+$/g,"")};e.exports=function(e){if(!e)return{};for(var n,r={},i=t(e).split("\n"),o=0;o<i.length;o++){var a=i[o],s=a.indexOf(":"),c=t(a.slice(0,s)).toLowerCase(),u=t(a.slice(s+1));void 0===r[c]?r[c]=u:(n=r[c],"[object Array]"===Object.prototype.toString.call(n)?r[c].push(u):r[c]=[r[c],u])}return r}},28985:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Deferred=void 0;t.Deferred=class{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise(((e,t)=>{this.reject=t,this.resolve=e}))}}},37279:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EndOfStreamError=t.defaultMessages=void 0,t.defaultMessages="End-Of-Stream";class n extends Error{constructor(){super(t.defaultMessages)}}t.EndOfStreamError=n},56654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamReader=t.EndOfStreamError=void 0;const r=n(37279),i=n(28985);var o=n(37279);Object.defineProperty(t,"EndOfStreamError",{enumerable:!0,get:function(){return o.EndOfStreamError}});t.StreamReader=class{constructor(e){if(this.s=e,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!e.read||!e.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",(()=>this.reject(new r.EndOfStreamError))),this.s.once("error",(e=>this.reject(e))),this.s.once("close",(()=>this.reject(new Error("Stream closed"))))}async peek(e,t,n){const r=await this.read(e,t,n);return this.peekQueue.push(e.subarray(t,t+r)),r}async read(e,t,n){if(0===n)return 0;if(0===this.peekQueue.length&&this.endOfStream)throw new r.EndOfStreamError;let i=n,o=0;for(;this.peekQueue.length>0&&i>0;){const n=this.peekQueue.pop();if(!n)throw new Error("peekData should be defined");const r=Math.min(n.length,i);e.set(n.subarray(0,r),t+o),o+=r,i-=r,r<n.length&&this.peekQueue.push(n.subarray(r))}for(;i>0&&!this.endOfStream;){const n=Math.min(i,1048576),r=await this.readFromStream(e,t+o,n);if(o+=r,r<n)break;i-=r}return o}async readFromStream(e,t,n){const r=this.s.read(n);if(r)return e.set(r,t),r.length;{const r={buffer:e,offset:t,length:n,deferred:new i.Deferred};return this.deferred=r.deferred,this.s.once("readable",(()=>{this.readDeferred(r)})),r.deferred.promise}}readDeferred(e){const t=this.s.read(e.length);t?(e.buffer.set(t,e.offset),e.deferred.resolve(t.length),this.deferred=null):this.s.once("readable",(()=>{this.readDeferred(e)}))}reject(e){this.endOfStream=!0,this.deferred&&(this.deferred.reject(e),this.deferred=null)}}},55167:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamReader=t.EndOfStreamError=void 0;var r=n(37279);Object.defineProperty(t,"EndOfStreamError",{enumerable:!0,get:function(){return r.EndOfStreamError}});var i=n(56654);Object.defineProperty(t,"StreamReader",{enumerable:!0,get:function(){return i.StreamReader}})},31795:function(e,t,n){var r;e=n.nmd(e),function(){"use strict";var i={function:!0,object:!0},o=i[typeof window]&&window||this,a=i[typeof t]&&t,s=i.object&&e&&!e.nodeType&&e,c=a&&s&&"object"==typeof n.g&&n.g;!c||c.global!==c&&c.window!==c&&c.self!==c||(o=c);var u=Math.pow(2,53)-1,l=/\bOpera/,f=Object.prototype,d=f.hasOwnProperty,p=f.toString;function h(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function v(e){return e=w(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:h(e)}function m(e,t){for(var n in e)d.call(e,n)&&t(e[n],n,e)}function g(e){return null==e?h(e):p.call(e).slice(8,-1)}function y(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function b(e,t){var n=null;return function(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=u)for(;++n<r;)t(e[n],n,e);else m(e,t)}(e,(function(r,i){n=t(n,r,i,e)})),n}function w(e){return String(e).replace(/^ +| +$/g,"")}var _=function e(t){var n=o,r=t&&"object"==typeof t&&"String"!=g(t);r&&(n=t,t=null);var i=n.navigator||{},a=i.userAgent||"";t||(t=a);var s,c,u,f,d,h=r?!!i.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(p.toString()),_="Object",E=r?_:"ScriptBridgingProxyObject",S=r?_:"Environment",R=r&&n.java?"JavaPackage":g(n.java),x=r?_:"RuntimeObject",C=/\bJava/.test(R)&&n.java,k=C&&g(n.environment)==S,T=C?"a":"α",I=C?"b":"β",O=n.document||{},A=n.operamini||n.opera,L=l.test(L=r&&A?A["[[Class]]"]:g(A))?L:A=null,M=t,P=[],N=null,D=t==a,U=D&&A&&"function"==typeof A.version&&A.version(),Z=b([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,n){return e||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(t)&&(n.label||n)})),j=function(e){return b(e,(function(e,n){return e||RegExp("\\b"+(n.pattern||y(n))+"\\b","i").exec(t)&&(n.label||n)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),F=q([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),B=function(e){return b(e,(function(e,n,r){return e||(n[F]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(F)]||RegExp("\\b"+y(r)+"(?:\\b|\\w*\\d)","i").exec(t))&&r}))}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),V=function(e){return b(e,(function(e,n){var r=n.pattern||y(n);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),v(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,r,n.label||n)),e}))}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function q(e){return b(e,(function(e,n){var r=n.pattern||y(n);return!e&&(e=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=v(e[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}function W(e){return b(e,(function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))}if(Z&&(Z=[Z]),/\bAndroid\b/.test(V)&&!F&&(s=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(t))&&(F=w(s[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),B&&!F?F=q([B]):B&&F&&(F=F.replace(RegExp("^("+y(B)+")[-_.\\s]","i"),B+" ").replace(RegExp("^("+y(B)+")[-_.]?(\\w)","i"),B+" $2")),(s=/\bGoogle TV\b/.exec(F))&&(F=s[0]),/\bSimulator\b/i.test(t)&&(F=(F?F+" ":"")+"Simulator"),"Opera Mini"==j&&/\bOPiOS\b/.test(t)&&P.push("running in Turbo/Uncompressed mode"),"IE"==j&&/\blike iPhone OS\b/.test(t)?(B=(s=e(t.replace(/like iPhone OS/,""))).manufacturer,F=s.product):/^iP/.test(F)?(j||(j="Safari"),V="iOS"+((s=/ OS ([\d_]+)/i.exec(t))?" "+s[1].replace(/_/g,"."):"")):"Konqueror"==j&&/^Linux\b/i.test(V)?V="Kubuntu":B&&"Google"!=B&&(/Chrome/.test(j)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(F))||/\bAndroid\b/.test(V)&&/^Chrome/.test(j)&&/\bVersion\//i.test(t)?(j="Android Browser",V=/\bAndroid\b/.test(V)?V:"Android"):"Silk"==j?(/\bMobi/i.test(t)||(V="Android",P.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&P.unshift("accelerated")):"UC Browser"==j&&/\bUCWEB\b/.test(t)?P.push("speed mode"):"PaleMoon"==j&&(s=/\bFirefox\/([\d.]+)\b/.exec(t))?P.push("identifying as Firefox "+s[1]):"Firefox"==j&&(s=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(V||(V="Firefox OS"),F||(F=s[1])):!j||(s=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(j))?(j&&!F&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(s+"/")+8))&&(j=null),(s=F||B||V)&&(F||B||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(V))&&(j=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(V)?V:s)+" Browser")):"Electron"==j&&(s=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&P.push("Chromium "+s),U||(U=W(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",y(j),"(?:Firefox|Minefield|NetFront)"])),(s=("iCab"==Z&&parseFloat(U)>3?"WebKit":/\bOpera\b/.test(j)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(Z)&&"WebKit"||!Z&&/\bMSIE\b/i.test(t)&&("Mac OS"==V?"Tasman":"Trident")||"WebKit"==Z&&/\bPlayStation\b(?! Vita\b)/i.test(j)&&"NetFront")&&(Z=[s]),"IE"==j&&(s=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(j+=" Mobile",V="Windows Phone "+(/\+$/.test(s)?s:s+".x"),P.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(j="IE Mobile",V="Windows Phone 8.x",P.unshift("desktop mode"),U||(U=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=j&&"Trident"==Z&&(s=/\brv:([\d.]+)/.exec(t))&&(j&&P.push("identifying as "+j+(U?" "+U:"")),j="IE",U=s[1]),D){if(f="global",d=null!=(u=n)?typeof u[f]:"number",/^(?:boolean|number|string|undefined)$/.test(d)||"object"==d&&!u[f])g(s=n.runtime)==E?(j="Adobe AIR",V=s.flash.system.Capabilities.os):g(s=n.phantom)==x?(j="PhantomJS",U=(s=s.version||null)&&s.major+"."+s.minor+"."+s.patch):"number"==typeof O.documentMode&&(s=/\bTrident\/(\d+)/i.exec(t))?(U=[U,O.documentMode],(s=+s[1]+4)!=U[1]&&(P.push("IE "+U[1]+" mode"),Z&&(Z[1]=""),U[1]=s),U="IE"==j?String(U[1].toFixed(1)):U[0]):"number"==typeof O.documentMode&&/^(?:Chrome|Firefox)\b/.test(j)&&(P.push("masking as "+j+" "+U),j="IE",U="11.0",Z=["Trident"],V="Windows");else if(C&&(M=(s=C.lang.System).getProperty("os.arch"),V=V||s.getProperty("os.name")+" "+s.getProperty("os.version")),k){try{U=n.require("ringo/engine").version.join("."),j="RingoJS"}catch(e){(s=n.system)&&s.global.system==n.system&&(j="Narwhal",V||(V=s[0].os||null))}j||(j="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(s=n.process)&&("object"==typeof s.versions&&("string"==typeof s.versions.electron?(P.push("Node "+s.versions.node),j="Electron",U=s.versions.electron):"string"==typeof s.versions.nw&&(P.push("Chromium "+U,"Node "+s.versions.node),j="NW.js",U=s.versions.nw)),j||(j="Node.js",M=s.arch,V=s.platform,U=(U=/[\d.]+/.exec(s.version))?U[0]:null));V=V&&v(V)}if(U&&(s=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(U)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(D&&i.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(N=/b/i.test(s)?"beta":"alpha",U=U.replace(RegExp(s+"\\+?$"),"")+("beta"==N?I:T)+(/\d+\+?/.exec(s)||"")),"Fennec"==j||"Firefox"==j&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(V))j="Firefox Mobile";else if("Maxthon"==j&&U)U=U.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(F))"Xbox 360"==F&&(V=null),"Xbox 360"==F&&/\bIEMobile\b/.test(t)&&P.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(j)&&(!j||F||/Browser|Mobi/.test(j))||"Windows CE"!=V&&!/Mobi/i.test(t))if("IE"==j&&D)try{null===n.external&&P.unshift("platform preview")}catch(e){P.unshift("embedded")}else(/\bBlackBerry\b/.test(F)||/\bBB10\b/.test(t))&&(s=(RegExp(F.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||U)?(V=((s=[s,/BB10/.test(t)])[1]?(F=null,B="BlackBerry"):"Device Software")+" "+s[0],U=null):this!=m&&"Wii"!=F&&(D&&A||/Opera/.test(j)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==j&&/\bOS X (?:\d+\.){2,}/.test(V)||"IE"==j&&(V&&!/^Win/.test(V)&&U>5.5||/\bWindows XP\b/.test(V)&&U>8||8==U&&!/\bTrident\b/.test(t)))&&!l.test(s=e.call(m,t.replace(l,"")+";"))&&s.name&&(s="ing as "+s.name+((s=s.version)?" "+s:""),l.test(j)?(/\bIE\b/.test(s)&&"Mac OS"==V&&(V=null),s="identify"+s):(s="mask"+s,j=L?v(L.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(s)&&(V=null),D||(U=null)),Z=["Presto"],P.push(s));else j+=" Mobile";(s=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(s=[parseFloat(s.replace(/\.(\d)$/,".0$1")),s],"Safari"==j&&"+"==s[1].slice(-1)?(j="WebKit Nightly",N="alpha",U=s[1].slice(0,-1)):U!=s[1]&&U!=(s[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(U=null),s[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(t)||0)[1],537.36==s[0]&&537.36==s[2]&&parseFloat(s[1])>=28&&"WebKit"==Z&&(Z=["Blink"]),D&&(h||s[1])?(Z&&(Z[1]="like Chrome"),s=s[1]||((s=s[0])<530?1:s<532?2:s<532.05?3:s<533?4:s<534.03?5:s<534.07?6:s<534.1?7:s<534.13?8:s<534.16?9:s<534.24?10:s<534.3?11:s<535.01?12:s<535.02?"13+":s<535.07?15:s<535.11?16:s<535.19?17:s<536.05?18:s<536.1?19:s<537.01?20:s<537.11?"21+":s<537.13?23:s<537.18?24:s<537.24?25:s<537.36?26:"Blink"!=Z?"27":"28")):(Z&&(Z[1]="like Safari"),s=(s=s[0])<400?1:s<500?2:s<526?3:s<533?4:s<534?"4+":s<535?5:s<537?6:s<538?7:s<601?8:s<602?9:s<604?10:s<606?11:s<608?12:"12"),Z&&(Z[1]+=" "+(s+="number"==typeof s?".x":/[.+]/.test(s)?"":"+")),"Safari"==j&&(!U||parseInt(U)>45)?U=s:"Chrome"==j&&/\bHeadlessChrome/i.test(t)&&P.unshift("headless")),"Opera"==j&&(s=/\bzbov|zvav$/.exec(V))?(j+=" ",P.unshift("desktop mode"),"zvav"==s?(j+="Mini",U=null):j+="Mobile",V=V.replace(RegExp(" *"+s+"$"),"")):"Safari"==j&&/\bChrome\b/.exec(Z&&Z[1])?(P.unshift("desktop mode"),j="Chrome Mobile",U=null,/\bOS X\b/.test(V)?(B="Apple",V="iOS 4.3+"):V=null):/\bSRWare Iron\b/.test(j)&&!U&&(U=W("Chrome")),U&&0==U.indexOf(s=/[\d.]+$/.exec(V))&&t.indexOf("/"+s+"-")>-1&&(V=w(V.replace(s,""))),V&&-1!=V.indexOf(j)&&!RegExp(j+" OS").test(V)&&(V=V.replace(RegExp(" *"+y(j)+" *"),"")),Z&&!/\b(?:Avant|Nook)\b/.test(j)&&(/Browser|Lunascape|Maxthon/.test(j)||"Safari"!=j&&/^iOS/.test(V)&&/\bSafari\b/.test(Z[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(j)&&Z[1])&&(s=Z[Z.length-1])&&P.push(s),P.length&&(P=["("+P.join("; ")+")"]),B&&F&&F.indexOf(B)<0&&P.push("on "+B),F&&P.push((/^on /.test(P[P.length-1])?"":"on ")+F),V&&(s=/ ([\d.+]+)$/.exec(V),c=s&&"/"==V.charAt(V.length-s[0].length-1),V={architecture:32,family:s&&!c?V.replace(s[0],""):V,version:s?s[1]:null,toString:function(){var e=this.version;return this.family+(e&&!c?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(s=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(M))&&!/\bi686\b/i.test(M)?(V&&(V.architecture=64,V.family=V.family.replace(RegExp(" *"+s),"")),j&&(/\bWOW64\b/i.test(t)||D&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(t))&&P.unshift("32-bit")):V&&/^OS X/.test(V.family)&&"Chrome"==j&&parseFloat(U)>=39&&(V.architecture=64),t||(t=null);var z={};return z.description=t,z.layout=Z&&Z[0],z.manufacturer=B,z.name=j,z.prerelease=N,z.product=F,z.ua=t,z.version=j&&U,z.os=V||{architecture:null,family:null,version:null,toString:function(){return"null"}},z.parse=e,z.toString=function(){return this.description||""},z.version&&P.unshift(U),z.name&&P.unshift(j),V&&j&&(V!=String(V).split(" ")[0]||V!=j.split(" ")[0]&&!F)&&P.push(F?"("+V+")":"on "+V),P.length&&(z.description=P.join(" ")),z}();o.platform=_,void 0===(r=function(){return _}.call(t,n,t,e))||(e.exports=r)}.call(this)},3814:(e,t,n)=>{e.exports=n(91361)},91361:(e,t,n)=>{var r=n(89539),i=e.exports=n(73984);function o(e,t,n,i){n=n||"";var o=new e(r.format.apply(this,[n].concat(i)));throw Error.captureStackTrace(o,t),o}function a(e,t,n){o(i.IllegalArgumentError,e,t,n)}function s(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array"}return t}function c(e){return function(t,n){var r=s(t);if(r==e)return t;a(arguments.callee,n||'Expected "'+e+'" but got "'+r+'".',Array.prototype.slice.call(arguments,2))}}e.exports.checkArgument=function(e,t){e||a(arguments.callee,t,Array.prototype.slice.call(arguments,2))},e.exports.checkState=function(e,t){e||function(e,t,n){o(i.IllegalStateError,e,t,n)}(arguments.callee,t,Array.prototype.slice.call(arguments,2))},e.exports.checkIsDef=function(e,t){if(void 0!==e)return e;a(arguments.callee,t||"Expected value to be defined but was undefined.",Array.prototype.slice.call(arguments,2))},e.exports.checkIsDefAndNotNull=function(e,t){if(null!=e)return e;a(arguments.callee,t||'Expected value to be defined and not null but got "'+s(e)+'".',Array.prototype.slice.call(arguments,2))},e.exports.checkIsString=c("string"),e.exports.checkIsArray=c("array"),e.exports.checkIsNumber=c("number"),e.exports.checkIsBoolean=c("boolean"),e.exports.checkIsFunction=c("function"),e.exports.checkIsObject=c("object")},73984:(e,t,n)=>{var r=n(89539);function i(e){Error.call(this,e),this.message=e}function o(e){Error.call(this,e),this.message=e}r.inherits(i,Error),i.prototype.name="IllegalArgumentError",r.inherits(o,Error),o.prototype.name="IllegalStateError",e.exports.IllegalStateError=o,e.exports.IllegalArgumentError=i},34155:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,c=[],u=!1,l=-1;function f(){u&&s&&(u=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!u){var e=a(f);u=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},55798:e=>{"use strict";var t=String.prototype.replace,n=/%20/g,r="RFC1738",i="RFC3986";e.exports={default:i,formatters:{RFC1738:function(e){return t.call(e,n,"+")},RFC3986:function(e){return String(e)}},RFC1738:r,RFC3986:i}},80129:(e,t,n)=>{"use strict";var r=n(58261),i=n(55235),o=n(55798);e.exports={formats:o,parse:i,stringify:r}},55235:(e,t,n)=>{"use strict";var r=n(12769),i=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,n,r){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=n.depth>0&&/(\[[^[\]]*])/.exec(o),u=s?o.slice(0,s.index):o,l=[];if(u){if(!n.plainObjects&&i.call(Object.prototype,u)&&!n.allowPrototypes)return;l.push(u)}for(var f=0;n.depth>0&&null!==(s=a.exec(o))&&f<n.depth;){if(f+=1,!n.plainObjects&&i.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+o.slice(s.index)+"]"),function(e,t,n,r){for(var i=r?t:c(t,n),o=e.length-1;o>=0;--o){var a,s=e[o];if("[]"===s&&n.parseArrays)a=[].concat(i);else{a=n.plainObjects?Object.create(null):{};var u="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(u,10);n.parseArrays||""!==u?!isNaN(l)&&s!==u&&String(l)===u&&l>=0&&n.parseArrays&&l<=n.arrayLimit?(a=[])[l]=i:"__proto__"!==u&&(a[u]=i):a={0:i}}i=a}return i}(l,t,n,r)}};e.exports=function(e,t){var n=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var l="string"==typeof e?function(e,t){var n,u={__proto__:null},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,f=t.parameterLimit===1/0?void 0:t.parameterLimit,d=l.split(t.delimiter,f),p=-1,h=t.charset;if(t.charsetSentinel)for(n=0;n<d.length;++n)0===d[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[n]?h="utf-8":"utf8=%26%2310003%3B"===d[n]&&(h="iso-8859-1"),p=n,n=d.length);for(n=0;n<d.length;++n)if(n!==p){var v,m,g=d[n],y=g.indexOf("]="),b=-1===y?g.indexOf("="):y+1;-1===b?(v=t.decoder(g,a.decoder,h,"key"),m=t.strictNullHandling?null:""):(v=t.decoder(g.slice(0,b),a.decoder,h,"key"),m=r.maybeMap(c(g.slice(b+1),t),(function(e){return t.decoder(e,a.decoder,h,"value")}))),m&&t.interpretNumericEntities&&"iso-8859-1"===h&&(m=s(m)),g.indexOf("[]=")>-1&&(m=o(m)?[m]:m),i.call(u,v)?u[v]=r.combine(u[v],m):u[v]=m}return u}(e,n):e,f=n.plainObjects?Object.create(null):{},d=Object.keys(l),p=0;p<d.length;++p){var h=d[p],v=u(h,l[h],n,"string"==typeof e);f=r.merge(f,v,n)}return!0===n.allowSparse?f:r.compact(f)}},58261:(e,t,n)=>{"use strict";var r=n(37478),i=n(12769),o=n(55798),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,u=Array.prototype.push,l=function(e,t){u.apply(e,c(t)?t:[t])},f=Date.prototype.toISOString,d=o.default,p={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:d,formatter:o.formatters[d],indices:!1,serializeDate:function(e){return f.call(e)},skipNulls:!1,strictNullHandling:!1},h={},v=function e(t,n,o,a,s,u,f,d,v,m,g,y,b,w,_,E){for(var S,R=t,x=E,C=0,k=!1;void 0!==(x=x.get(h))&&!k;){var T=x.get(t);if(C+=1,void 0!==T){if(T===C)throw new RangeError("Cyclic object value");k=!0}void 0===x.get(h)&&(C=0)}if("function"==typeof d?R=d(n,R):R instanceof Date?R=g(R):"comma"===o&&c(R)&&(R=i.maybeMap(R,(function(e){return e instanceof Date?g(e):e}))),null===R){if(s)return f&&!w?f(n,p.encoder,_,"key",y):n;R=""}if("string"==typeof(S=R)||"number"==typeof S||"boolean"==typeof S||"symbol"==typeof S||"bigint"==typeof S||i.isBuffer(R))return f?[b(w?n:f(n,p.encoder,_,"key",y))+"="+b(f(R,p.encoder,_,"value",y))]:[b(n)+"="+b(String(R))];var I,O=[];if(void 0===R)return O;if("comma"===o&&c(R))w&&f&&(R=i.maybeMap(R,f)),I=[{value:R.length>0?R.join(",")||null:void 0}];else if(c(d))I=d;else{var A=Object.keys(R);I=v?A.sort(v):A}for(var L=a&&c(R)&&1===R.length?n+"[]":n,M=0;M<I.length;++M){var P=I[M],N="object"==typeof P&&void 0!==P.value?P.value:R[P];if(!u||null!==N){var D=c(R)?"function"==typeof o?o(L,P):L:L+(m?"."+P:"["+P+"]");E.set(t,C);var U=r();U.set(h,E),l(O,e(N,D,o,a,s,u,"comma"===o&&w&&c(R)?null:f,d,v,m,g,y,b,w,_,U))}}return O};e.exports=function(e,t){var n,i=e,u=function(e){if(!e)return p;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=o.default;if(void 0!==e.format){if(!a.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=o.formatters[n],i=p.filter;return("function"==typeof e.filter||c(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:void 0===e.allowDots?p.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof u.filter?i=(0,u.filter)("",i):c(u.filter)&&(n=u.filter);var f,d=[];if("object"!=typeof i||null===i)return"";f=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var h=s[f];if(t&&"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var m="comma"===h&&t&&t.commaRoundTrip;n||(n=Object.keys(i)),u.sort&&n.sort(u.sort);for(var g=r(),y=0;y<n.length;++y){var b=n[y];u.skipNulls&&null===i[b]||l(d,v(i[b],b,h,m,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,g))}var w=d.join(u.delimiter),_=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),w.length>0?_+w:""}},12769:(e,t,n)=>{"use strict";var r=n(55798),i=Object.prototype.hasOwnProperty,o=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],a=i.obj[i.prop],s=Object.keys(a),c=0;c<s.length;++c){var u=s[c],l=a[u];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:a,prop:u}),n.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(o(n)){for(var r=[],i=0;i<n.length;++i)void 0!==n[i]&&r.push(n[i]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n,i,o){if(0===e.length)return e;var s=e;if("symbol"==typeof e?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===n)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",u=0;u<s.length;++u){var l=s.charCodeAt(u);45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||o===r.RFC1738&&(40===l||41===l)?c+=s.charAt(u):l<128?c+=a[l]:l<2048?c+=a[192|l>>6]+a[128|63&l]:l<55296||l>=57344?c+=a[224|l>>12]+a[128|l>>6&63]+a[128|63&l]:(u+=1,l=65536+((1023&l)<<10|1023&s.charCodeAt(u)),c+=a[240|l>>18]+a[128|l>>12&63]+a[128|l>>6&63]+a[128|63&l])}return c},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!=typeof n){if(o(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!i.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var a=t;return o(t)&&!o(n)&&(a=s(t,r)),o(t)&&o(n)?(n.forEach((function(n,o){if(i.call(t,o)){var a=t[o];a&&"object"==typeof a&&n&&"object"==typeof n?t[o]=e(a,n,r):t.push(n)}else t[o]=n})),t):Object.keys(n).reduce((function(t,o){var a=n[o];return i.call(t,o)?t[o]=e(t[o],a,r):t[o]=a,t}),a)}}},62587:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,r,i){n=n||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(n);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var c=e.length;s>0&&c>s&&(c=s);for(var u=0;u<c;++u){var l,f,d,p,h=e[u].replace(a,"%20"),v=h.indexOf(r);v>=0?(l=h.substr(0,v),f=h.substr(v+1)):(l=h,f=""),d=decodeURIComponent(l),p=decodeURIComponent(f),t(o,d)?Array.isArray(o[d])?o[d].push(p):o[d]=[o[d],p]:o[d]=p}return o}},12361:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,i){return n=n||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(i){var o=encodeURIComponent(t(i))+r;return Array.isArray(e[i])?e[i].map((function(e){return o+encodeURIComponent(t(e))})).join(n):o+encodeURIComponent(t(e[i]))})).join(n):i?encodeURIComponent(t(i))+r+encodeURIComponent(t(e)):""}},17673:(e,t,n)=>{"use strict";t.decode=t.parse=n(62587),t.encode=t.stringify=n(12361)},94281:e=>{"use strict";var t={};function n(e,n,r){r||(r=Error);var i=function(e){var t,r;function i(t,r,i){return e.call(this,function(e,t,r){return"string"==typeof n?n:n(e,t,r)}(t,r,i))||this}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i}(r);i.prototype.name=r.name,i.prototype.code=e,t[e]=i}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,o,a,s;if("string"==typeof t&&(o="not ",t.substr(!a||a<0?0:+a,o.length)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))s="The ".concat(e," ").concat(i," ").concat(r(t,"type"));else{var c=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(c," ").concat(i," ").concat(r(t,"type"))}return s+=". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},56753:(e,t,n)=>{"use strict";var r=n(34155),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var o=n(79481),a=n(64229);n(35717)(l,o);for(var s=i(a.prototype),c=0;c<s.length;c++){var u=s[c];l.prototype[u]||(l.prototype[u]=a.prototype[u])}function l(e){if(!(this instanceof l))return new l(e);o.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",f)))}function f(){this._writableState.ended||r.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},82725:(e,t,n)=>{"use strict";e.exports=i;var r=n(74605);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(35717)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},79481:(e,t,n)=>{"use strict";var r,i=n(34155);e.exports=x,x.ReadableState=R;n(17187).EventEmitter;var o=function(e,t){return e.listeners(t).length},a=n(22503),s=n(48764).Buffer,c=(void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var u,l=n(94616);u=l&&l.debuglog?l.debuglog("stream"):function(){};var f,d,p,h=n(57327),v=n(61195),m=n(82457).getHighWaterMark,g=n(94281).q,y=g.ERR_INVALID_ARG_TYPE,b=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(35717)(x,a);var E=v.errorOrDestroy,S=["error","close","destroy","pause","resume"];function R(e,t,i){r=r||n(56753),e=e||{},"boolean"!=typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",i),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=n(32553).s),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function x(e){if(r=r||n(56753),!(this instanceof x))return new x(e);var t=this instanceof r;this._readableState=new R(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),a.call(this)}function C(e,t,n,r,i){u("readableAddChunk",t);var o,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(u("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?O(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,A(e)))}(e,a);else if(i||(o=function(e,t){var n;r=t,s.isBuffer(r)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(a,t)),o)E(e,o);else if(a.objectMode||t&&t.length>0)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),r)a.endEmitted?E(e,new _):k(e,a,t,!0);else if(a.ended)E(e,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?k(e,a,t,!1):L(e,a)):k(e,a,t,!1)}else r||(a.reading=!1,L(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function k(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&O(e)),L(e,t)}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),x.prototype.destroy=v.destroy,x.prototype._undestroy=v.undestroy,x.prototype._destroy=function(e,t){t(e)},x.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=s.from(e,t),t=""),n=!0),C(this,e,t,!1,n)},x.prototype.unshift=function(e){return C(this,e,null,!0,!1)},x.prototype.isPaused=function(){return!1===this._readableState.flowing},x.prototype.setEncoding=function(e){f||(f=n(32553).s);var t=new f(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var T=1073741824;function I(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function O(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(A,e))}function A(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,U(e)}function L(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(M,e,t))}function M(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function N(e){u("readable nexttick read 0"),e.read(0)}function D(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),U(e),t.flowing&&!t.reading&&e.read(0)}function U(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function Z(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function j(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(F,t,e))}function F(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function B(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}x.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?j(this):O(this),null;if(0===(e=I(e,t))&&t.ended)return 0===t.length&&j(this),null;var r,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=I(n,t))),null===(r=e>0?Z(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&j(this)),null!==r&&this.emit("data",r),r},x.prototype._read=function(e){E(this,new w("_read()"))},x.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,u("pipe count=%d opts=%j",r.pipesCount,t);var a=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr?c:m;function s(t,i){u("onunpipe"),t===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,u("cleanup"),e.removeListener("close",h),e.removeListener("finish",v),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",s),n.removeListener("end",c),n.removeListener("end",m),n.removeListener("data",d),f=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function c(){u("onend"),e.end()}r.endEmitted?i.nextTick(a):n.once("end",a),e.on("unpipe",s);var l=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,U(e))}}(n);e.on("drain",l);var f=!1;function d(t){u("ondata");var i=e.write(t);u("dest.write",i),!1===i&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==B(r.pipes,e))&&!f&&(u("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function p(t){u("onerror",t),m(),e.removeListener("error",p),0===o(e,"error")&&E(e,t)}function h(){e.removeListener("finish",v),m()}function v(){u("onfinish"),e.removeListener("close",h),m()}function m(){u("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",p),e.once("close",h),e.once("finish",v),e.emit("pipe",n),r.flowing||(u("pipe resume"),n.resume()),e},x.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=B(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},x.prototype.on=function(e,t){var n=a.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,u("on readable",r.length,r.reading),r.length?O(this):r.reading||i.nextTick(N,this))),n},x.prototype.addListener=x.prototype.on,x.prototype.removeListener=function(e,t){var n=a.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(P,this),n},x.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(P,this),t},x.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(D,e,t))}(this,e)),e.paused=!1,this},x.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},x.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(u("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<S.length;o++)e.on(S[o],this.emit.bind(this,S[o]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(x.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=n(45850)),d(this)}),Object.defineProperty(x.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(x.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(x.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),x._fromList=Z,Object.defineProperty(x.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(x.from=function(e,t){return void 0===p&&(p=n(15167)),p(x,e,t)})},74605:(e,t,n)=>{"use strict";e.exports=l;var r=n(94281).q,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,c=n(56753);function u(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush((function(t,n){d(e,t,n)}))}function d(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}n(35717)(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new i("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},64229:(e,t,n)=>{"use strict";var r,i=n(34155);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=x,x.WritableState=R;var a={deprecate:n(94927)},s=n(22503),c=n(48764).Buffer,u=(void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,f=n(61195),d=n(82457).getHighWaterMark,p=n(94281).q,h=p.ERR_INVALID_ARG_TYPE,v=p.ERR_METHOD_NOT_IMPLEMENTED,m=p.ERR_MULTIPLE_CALLBACK,g=p.ERR_STREAM_CANNOT_PIPE,y=p.ERR_STREAM_DESTROYED,b=p.ERR_STREAM_NULL_VALUES,w=p.ERR_STREAM_WRITE_AFTER_END,_=p.ERR_UNKNOWN_ENCODING,E=f.errorOrDestroy;function S(){}function R(e,t,a){r=r||n(56753),e=e||{},"boolean"!=typeof a&&(a=t instanceof r),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,o=n.writecb;if("function"!=typeof o)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,o){--t.pendingcb,n?(i.nextTick(o,r),i.nextTick(A,e,t),e._writableState.errorEmitted=!0,E(e,r)):(o(r),e._writableState.errorEmitted=!0,E(e,r),A(e,t))}(e,n,r,t,o);else{var a=I(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||T(e,n),r?i.nextTick(k,e,n,a,o):k(e,n,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function x(e){var t=this instanceof(r=r||n(56753));if(!t&&!l.call(x,this))return new x(e);this._writableState=new R(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.call(this)}function C(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function k(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),A(e,t)}function T(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,c=!0;n;)i[s]=n,n.isBuf||(c=!1),n=n.next,s+=1;i.allBuffers=c,C(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,f=n.callback;if(C(e,t,!1,t.objectMode?1:u.length,u,l,f),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function O(e,t){e._final((function(n){t.pendingcb--,n&&E(e,n),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var n=I(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(O,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}n(35717)(x,s),R.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(R.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===x&&(e&&e._writableState instanceof R)}})):l=function(e){return e instanceof this},x.prototype.pipe=function(){E(this,new g)},x.prototype.write=function(e,t,n){var r,o=this._writableState,a=!1,s=!o.objectMode&&(r=e,c.isBuffer(r)||r instanceof u);return s&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=S),o.ending?function(e,t){var n=new w;E(e,n),i.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var o;return null===n?o=new b:"string"==typeof n||t.objectMode||(o=new h("chunk",["string","Buffer"],n)),!o||(E(e,o),i.nextTick(r,o),!1)}(this,o,e,n))&&(o.pendingcb++,a=function(e,t,n,r,i,o){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,n));return t}(t,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,s,r,i,o);return u}(this,o,s,e,t,n)),a},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,n){n(new v("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,A(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=f.destroy,x.prototype._undestroy=f.undestroy,x.prototype._destroy=function(e,t){t(e)}},45850:(e,t,n)=>{"use strict";var r,i=n(34155);function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(8610),s=Symbol("lastResolve"),c=Symbol("lastReject"),u=Symbol("error"),l=Symbol("ended"),f=Symbol("lastPromise"),d=Symbol("handlePromise"),p=Symbol("stream");function h(e,t){return{value:e,done:t}}function v(e){var t=e[s];if(null!==t){var n=e[p].read();null!==n&&(e[f]=null,e[s]=null,e[c]=null,t(h(n,!1)))}}function m(e){i.nextTick(v,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((o(r={get stream(){return this[p]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(h(void 0,!0));if(this[p].destroyed)return new Promise((function(t,n){i.nextTick((function(){e[u]?n(e[u]):t(h(void 0,!0))}))}));var n,r=this[f];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[l]?n(h(void 0,!0)):t[d](n,r)}),r)}}(r,this));else{var o=this[p].read();if(null!==o)return Promise.resolve(h(o,!1));n=new Promise(this[d])}return this[f]=n,n}},Symbol.asyncIterator,(function(){return this})),o(r,"return",(function(){var e=this;return new Promise((function(t,n){e[p].destroy(null,(function(e){e?n(e):t(h(void 0,!0))}))}))})),r),g);e.exports=function(e){var t,n=Object.create(y,(o(t={},p,{value:e,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,u,{value:null,writable:!0}),o(t,l,{value:e._readableState.endEmitted,writable:!0}),o(t,d,{value:function(e,t){var r=n[p].read();r?(n[f]=null,n[s]=null,n[c]=null,e(h(r,!1))):(n[s]=e,n[c]=t)},writable:!0}),t));return n[f]=null,a(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[c];return null!==t&&(n[f]=null,n[s]=null,n[c]=null,t(e)),void(n[u]=e)}var r=n[s];null!==r&&(n[f]=null,n[s]=null,n[c]=null,r(h(void 0,!0))),n[l]=!0})),e.on("readable",m.bind(null,n)),n}},57327:(e,t,n)=>{"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var c=n(48764).Buffer,u=n(52361).inspect,l=u&&u.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,r;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return c.alloc(0);for(var t,n,r,i=c.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=i,r=a,c.prototype.copy.call(t,n,r),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=c.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:l,value:function(e,t){return u(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},61195:(e,t,n)=>{"use strict";var r=n(34155);function i(e,t){a(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,s=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return s||c?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(a,this,e)):r.nextTick(a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?n._writableState?n._writableState.errorEmitted?r.nextTick(o,n):(n._writableState.errorEmitted=!0,r.nextTick(i,n,e)):r.nextTick(i,n,e):t?(r.nextTick(o,n),t(e)):r.nextTick(o,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},8610:(e,t,n)=>{"use strict";var r=n(94281).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);n||(n={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(o||i);var a=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){s=!1,u=!0,a||o.call(t)},f=t._readableState&&t._readableState.endEmitted,d=function(){a=!1,f=!0,s||o.call(t)},p=function(e){o.call(t,e)},h=function(){var e;return a&&!f?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):s&&!u?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},v=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?s&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",h),t.req?v():t.on("request",v)),t.on("end",d),t.on("finish",l),!1!==n.error&&t.on("error",p),t.on("close",h),function(){t.removeListener("complete",l),t.removeListener("abort",h),t.removeListener("request",v),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",d),t.removeListener("error",p),t.removeListener("close",h)}}},15167:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},59946:(e,t,n)=>{"use strict";var r;var i=n(94281).q,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function c(e){e()}function u(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var l,f=function(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var d=t.map((function(e,i){var o=i<t.length-1;return function(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;e.on("close",(function(){s=!0})),void 0===r&&(r=n(8610)),r(e,{readable:t,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var c=!1;return function(t){if(!s&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new a("pipe"))}}(e,o,i>0,(function(e){l||(l=e),e&&d.forEach(c),o||(d.forEach(c),f(l))}))}));return t.reduce(u)}},82457:(e,t,n)=>{"use strict";var r=n(94281).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},22503:(e,t,n)=>{e.exports=n(17187).EventEmitter},89509:(e,t,n)=>{var r=n(48764),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},22257:(e,t,n)=>{const r=Symbol("SemVer ANY");class i{static get ANY(){return r}constructor(e,t){if(t=o(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new l(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new l(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new f(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new f(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),o=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=c(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=c(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||o&&a||s||u}}e.exports=i;const o=n(12893),{re:a,t:s}=n(55765),c=n(7539),u=n(74225),l=n(26376),f=n(66902)},66902:(e,t,n)=>{class r{constructor(e,t){if(t=o(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!h(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&v(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=i.get(t);if(n)return n;const r=this.options.loose,o=r?u[l.HYPHENRANGELOOSE]:u[l.HYPHENRANGE];e=e.replace(o,k(this.options.includePrerelease)),s("hyphen replace",e),e=e.replace(u[l.COMPARATORTRIM],f),s("comparator trim",e);let c=(e=(e=(e=e.replace(u[l.TILDETRIM],d)).replace(u[l.CARETTRIM],p)).split(/\s+/).join(" ")).split(" ").map((e=>g(e,this.options))).join(" ").split(/\s+/).map((e=>C(e,this.options)));r&&(c=c.filter((e=>(s("loose invalid filter",e,this.options),!!e.match(u[l.COMPARATORLOOSE]))))),s("range list",c);const v=new Map,m=c.map((e=>new a(e,this.options)));for(const e of m){if(h(e))return[e];v.set(e.value,e)}v.size>1&&v.has("")&&v.delete("");const y=[...v.values()];return i.set(t,y),y}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some((n=>m(n,t)&&e.set.some((e=>m(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(T(this.set[t],e,this.options))return!0;return!1}}e.exports=r;const i=new(n(39593))({max:1e3}),o=n(12893),a=n(22257),s=n(74225),c=n(26376),{re:u,t:l,comparatorTrimReplace:f,tildeTrimReplace:d,caretTrimReplace:p}=n(55765),h=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,m=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},g=(e,t)=>(s("comp",e,t),e=_(e,t),s("caret",e),e=b(e,t),s("tildes",e),e=S(e,t),s("xrange",e),e=x(e,t),s("stars",e),e),y=e=>!e||"x"===e.toLowerCase()||"*"===e,b=(e,t)=>e.trim().split(/\s+/).map((e=>w(e,t))).join(" "),w=(e,t)=>{const n=t.loose?u[l.TILDELOOSE]:u[l.TILDE];return e.replace(n,((t,n,r,i,o)=>{let a;return s("tilde",e,t,n,r,i,o),y(n)?a="":y(r)?a=`>=${n}.0.0 <${+n+1}.0.0-0`:y(i)?a=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(s("replaceTilde pr",o),a=`>=${n}.${r}.${i}-${o} <${n}.${+r+1}.0-0`):a=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,s("tilde return",a),a}))},_=(e,t)=>e.trim().split(/\s+/).map((e=>E(e,t))).join(" "),E=(e,t)=>{s("caret",e,t);const n=t.loose?u[l.CARETLOOSE]:u[l.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,o,a)=>{let c;return s("caret",e,t,n,i,o,a),y(n)?c="":y(i)?c=`>=${n}.0.0${r} <${+n+1}.0.0-0`:y(o)?c="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:a?(s("replaceCaret pr",a),c="0"===n?"0"===i?`>=${n}.${i}.${o}-${a} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}-${a} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o}-${a} <${+n+1}.0.0-0`):(s("no pr"),c="0"===n?"0"===i?`>=${n}.${i}.${o}${r} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o} <${+n+1}.0.0-0`),s("caret return",c),c}))},S=(e,t)=>(s("replaceXRanges",e,t),e.split(/\s+/).map((e=>R(e,t))).join(" ")),R=(e,t)=>{e=e.trim();const n=t.loose?u[l.XRANGELOOSE]:u[l.XRANGE];return e.replace(n,((n,r,i,o,a,c)=>{s("xRange",e,n,r,i,o,a,c);const u=y(i),l=u||y(o),f=l||y(a),d=f;return"="===r&&d&&(r=""),c=t.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&d?(l&&(o=0),a=0,">"===r?(r=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),"<"===r&&(c="-0"),n=`${r+i}.${o}.${a}${c}`):l?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:f&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),s("xRange return",n),n}))},x=(e,t)=>(s("replaceStars",e,t),e.trim().replace(u[l.STAR],"")),C=(e,t)=>(s("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),k=e=>(t,n,r,i,o,a,s,c,u,l,f,d,p)=>`${n=y(r)?"":y(i)?`>=${r}.0.0${e?"-0":""}`:y(o)?`>=${r}.${i}.0${e?"-0":""}`:a?`>=${n}`:`>=${n}${e?"-0":""}`} ${c=y(u)?"":y(l)?`<${+u+1}.0.0-0`:y(f)?`<${u}.${+l+1}.0-0`:d?`<=${u}.${l}.${f}-${d}`:e?`<${u}.${l}.${+f+1}-0`:`<=${c}`}`.trim(),T=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(s(e[n].semver),e[n].semver!==a.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},26376:(e,t,n)=>{const r=n(74225),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=n(83295),{re:a,t:s}=n(55765),c=n(12893),{compareIdentifiers:u}=n(86742);class l{constructor(e,t){if(t=c(t),e instanceof l){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?a[s.LOOSE]:a[s.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof l)){if("string"==typeof e&&e===this.version)return 0;e=new l(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof l||(e=new l(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++t)}compareBuild(e){e instanceof l||(e=new l(e,this.options));let t=0;do{const n=this.build[t],i=e.build[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return u(n,i)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=l},13507:(e,t,n)=>{const r=n(33959);e.exports=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},7539:(e,t,n)=>{const r=n(58718),i=n(81194),o=n(71312),a=n(25903),s=n(21544),c=n(12056);e.exports=(e,t,n,u)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,u);case"!=":return i(e,n,u);case">":return o(e,n,u);case">=":return a(e,n,u);case"<":return s(e,n,u);case"<=":return c(e,n,u);default:throw new TypeError(`Invalid operator: ${t}`)}}},99038:(e,t,n)=>{const r=n(26376),i=n(33959),{re:o,t:a}=n(55765);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=o[a.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),o[a.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;o[a.COERCERTL].lastIndex=-1}else n=e.match(o[a.COERCE]);return null===n?null:i(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)}},88880:(e,t,n)=>{const r=n(26376);e.exports=(e,t,n)=>{const i=new r(e,n),o=new r(t,n);return i.compare(o)||i.compareBuild(o)}},27880:(e,t,n)=>{const r=n(46269);e.exports=(e,t)=>r(e,t,!0)},46269:(e,t,n)=>{const r=n(26376);e.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))},62378:(e,t,n)=>{const r=n(33959),i=n(58718);e.exports=(e,t)=>{if(i(e,t))return null;{const n=r(e),i=r(t),o=n.prerelease.length||i.prerelease.length,a=o?"pre":"",s=o?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==i[e])return a+e;return s}}},58718:(e,t,n)=>{const r=n(46269);e.exports=(e,t,n)=>0===r(e,t,n)},71312:(e,t,n)=>{const r=n(46269);e.exports=(e,t,n)=>r(e,t,n)>0},25903:(e,t,n)=>{const r=n(46269);e.exports=(e,t,n)=>r(e,t,n)>=0},20253:(e,t,n)=>{const r=n(26376);e.exports=(e,t,n,i)=>{"string"==typeof n&&(i=n,n=void 0);try{return new r(e instanceof r?e.version:e,n).inc(t,i).version}catch(e){return null}}},21544:(e,t,n)=>{const r=n(46269);e.exports=(e,t,n)=>r(e,t,n)<0},12056:(e,t,n)=>{const r=n(46269);e.exports=(e,t,n)=>r(e,t,n)<=0},38679:(e,t,n)=>{const r=n(26376);e.exports=(e,t)=>new r(e,t).major},87789:(e,t,n)=>{const r=n(26376);e.exports=(e,t)=>new r(e,t).minor},81194:(e,t,n)=>{const r=n(46269);e.exports=(e,t,n)=>0!==r(e,t,n)},33959:(e,t,n)=>{const{MAX_LENGTH:r}=n(83295),{re:i,t:o}=n(55765),a=n(26376),s=n(12893);e.exports=(e,t)=>{if(t=s(t),e instanceof a)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?i[o.LOOSE]:i[o.FULL]).test(e))return null;try{return new a(e,t)}catch(e){return null}}},52358:(e,t,n)=>{const r=n(26376);e.exports=(e,t)=>new r(e,t).patch},57559:(e,t,n)=>{const r=n(33959);e.exports=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},79795:(e,t,n)=>{const r=n(46269);e.exports=(e,t,n)=>r(t,e,n)},63657:(e,t,n)=>{const r=n(88880);e.exports=(e,t)=>e.sort(((e,n)=>r(n,e,t)))},45712:(e,t,n)=>{const r=n(66902);e.exports=(e,t,n)=>{try{t=new r(t,n)}catch(e){return!1}return t.test(e)}},21100:(e,t,n)=>{const r=n(88880);e.exports=(e,t)=>e.sort(((e,n)=>r(e,n,t)))},76397:(e,t,n)=>{const r=n(33959);e.exports=(e,t)=>{const n=r(e,t);return n?n.version:null}},81249:(e,t,n)=>{const r=n(55765),i=n(83295),o=n(26376),a=n(86742),s=n(33959),c=n(76397),u=n(13507),l=n(20253),f=n(62378),d=n(38679),p=n(87789),h=n(52358),v=n(57559),m=n(46269),g=n(79795),y=n(27880),b=n(88880),w=n(21100),_=n(63657),E=n(71312),S=n(21544),R=n(58718),x=n(81194),C=n(25903),k=n(12056),T=n(7539),I=n(99038),O=n(22257),A=n(66902),L=n(45712),M=n(51042),P=n(85775),N=n(71657),D=n(95316),U=n(89042),Z=n(6826),j=n(97606),F=n(50032),B=n(82937),V=n(17908),q=n(50799);e.exports={parse:s,valid:c,clean:u,inc:l,diff:f,major:d,minor:p,patch:h,prerelease:v,compare:m,rcompare:g,compareLoose:y,compareBuild:b,sort:w,rsort:_,gt:E,lt:S,eq:R,neq:x,gte:C,lte:k,cmp:T,coerce:I,Comparator:O,Range:A,satisfies:L,toComparators:M,maxSatisfying:P,minSatisfying:N,minVersion:D,validRange:U,outside:Z,gtr:j,ltr:F,intersects:B,simplifyRange:V,subset:q,SemVer:o,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,compareIdentifiers:a.compareIdentifiers,rcompareIdentifiers:a.rcompareIdentifiers}},83295:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:t,MAX_SAFE_COMPONENT_LENGTH:16}},74225:(e,t,n)=>{const r="object"==typeof n(34155)&&{ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.NODE_DEBUG&&/\bsemver\b/i.test({ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=r},86742:e=>{const t=/^[0-9]+$/,n=(e,n)=>{const r=t.test(e),i=t.test(n);return r&&i&&(e=+e,n=+n),e===n?0:r&&!i?-1:i&&!r?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},12893:e=>{const t=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:t.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{}},55765:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:r}=n(83295),i=n(74225),o=(t=e.exports={}).re=[],a=t.src=[],s=t.t={};let c=0;const u=(e,t,n)=>{const r=c++;i(e,r,t),s[e]=r,a[r]=t,o[r]=new RegExp(t,n?"g":void 0)};u("NUMERICIDENTIFIER","0|[1-9]\\d*"),u("NUMERICIDENTIFIERLOOSE","[0-9]+"),u("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),u("MAINVERSION",`(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})`),u("MAINVERSIONLOOSE",`(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})`),u("PRERELEASEIDENTIFIER",`(?:${a[s.NUMERICIDENTIFIER]}|${a[s.NONNUMERICIDENTIFIER]})`),u("PRERELEASEIDENTIFIERLOOSE",`(?:${a[s.NUMERICIDENTIFIERLOOSE]}|${a[s.NONNUMERICIDENTIFIER]})`),u("PRERELEASE",`(?:-(${a[s.PRERELEASEIDENTIFIER]}(?:\\.${a[s.PRERELEASEIDENTIFIER]})*))`),u("PRERELEASELOOSE",`(?:-?(${a[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[s.PRERELEASEIDENTIFIERLOOSE]})*))`),u("BUILDIDENTIFIER","[0-9A-Za-z-]+"),u("BUILD",`(?:\\+(${a[s.BUILDIDENTIFIER]}(?:\\.${a[s.BUILDIDENTIFIER]})*))`),u("FULLPLAIN",`v?${a[s.MAINVERSION]}${a[s.PRERELEASE]}?${a[s.BUILD]}?`),u("FULL",`^${a[s.FULLPLAIN]}$`),u("LOOSEPLAIN",`[v=\\s]*${a[s.MAINVERSIONLOOSE]}${a[s.PRERELEASELOOSE]}?${a[s.BUILD]}?`),u("LOOSE",`^${a[s.LOOSEPLAIN]}$`),u("GTLT","((?:<|>)?=?)"),u("XRANGEIDENTIFIERLOOSE",`${a[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),u("XRANGEIDENTIFIER",`${a[s.NUMERICIDENTIFIER]}|x|X|\\*`),u("XRANGEPLAIN",`[v=\\s]*(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:${a[s.PRERELEASE]})?${a[s.BUILD]}?)?)?`),u("XRANGEPLAINLOOSE",`[v=\\s]*(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:${a[s.PRERELEASELOOSE]})?${a[s.BUILD]}?)?)?`),u("XRANGE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAIN]}$`),u("XRANGELOOSE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAINLOOSE]}$`),u("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),u("COERCERTL",a[s.COERCE],!0),u("LONETILDE","(?:~>?)"),u("TILDETRIM",`(\\s*)${a[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",u("TILDE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAIN]}$`),u("TILDELOOSE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAINLOOSE]}$`),u("LONECARET","(?:\\^)"),u("CARETTRIM",`(\\s*)${a[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",u("CARET",`^${a[s.LONECARET]}${a[s.XRANGEPLAIN]}$`),u("CARETLOOSE",`^${a[s.LONECARET]}${a[s.XRANGEPLAINLOOSE]}$`),u("COMPARATORLOOSE",`^${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]})$|^$`),u("COMPARATOR",`^${a[s.GTLT]}\\s*(${a[s.FULLPLAIN]})$|^$`),u("COMPARATORTRIM",`(\\s*)${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]}|${a[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",u("HYPHENRANGE",`^\\s*(${a[s.XRANGEPLAIN]})\\s+-\\s+(${a[s.XRANGEPLAIN]})\\s*$`),u("HYPHENRANGELOOSE",`^\\s*(${a[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[s.XRANGEPLAINLOOSE]})\\s*$`),u("STAR","(<|>)?=?\\s*\\*"),u("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),u("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},97606:(e,t,n)=>{const r=n(6826);e.exports=(e,t,n)=>r(e,t,">",n)},82937:(e,t,n)=>{const r=n(66902);e.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t))},50032:(e,t,n)=>{const r=n(6826);e.exports=(e,t,n)=>r(e,t,"<",n)},85775:(e,t,n)=>{const r=n(26376),i=n(66902);e.exports=(e,t,n)=>{let o=null,a=null,s=null;try{s=new i(t,n)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(o&&-1!==a.compare(e)||(o=e,a=new r(o,n)))})),o}},71657:(e,t,n)=>{const r=n(26376),i=n(66902);e.exports=(e,t,n)=>{let o=null,a=null,s=null;try{s=new i(t,n)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(o&&1!==a.compare(e)||(o=e,a=new r(o,n)))})),o}},95316:(e,t,n)=>{const r=n(26376),i=n(66902),o=n(71312);e.exports=(e,t)=>{e=new i(e,t);let n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let a=null;i.forEach((e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":a&&!o(t,a)||(a=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!a||n&&!o(n,a)||(n=a)}return n&&e.test(n)?n:null}},6826:(e,t,n)=>{const r=n(26376),i=n(22257),{ANY:o}=i,a=n(66902),s=n(45712),c=n(71312),u=n(21544),l=n(12056),f=n(25903);e.exports=(e,t,n,d)=>{let p,h,v,m,g;switch(e=new r(e,d),t=new a(t,d),n){case">":p=c,h=l,v=u,m=">",g=">=";break;case"<":p=u,h=f,v=c,m="<",g="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,d))return!1;for(let n=0;n<t.set.length;++n){const r=t.set[n];let a=null,s=null;if(r.forEach((e=>{e.semver===o&&(e=new i(">=0.0.0")),a=a||e,s=s||e,p(e.semver,a.semver,d)?a=e:v(e.semver,s.semver,d)&&(s=e)})),a.operator===m||a.operator===g)return!1;if((!s.operator||s.operator===m)&&h(e,s.semver))return!1;if(s.operator===g&&v(e,s.semver))return!1}return!0}},17908:(e,t,n)=>{const r=n(45712),i=n(46269);e.exports=(e,t,n)=>{const o=[];let a=null,s=null;const c=e.sort(((e,t)=>i(e,t,n)));for(const e of c){r(e,t,n)?(s=e,a||(a=e)):(s&&o.push([a,s]),s=null,a=null)}a&&o.push([a,null]);const u=[];for(const[e,t]of o)e===t?u.push(e):t||e!==c[0]?t?e===c[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const l=u.join(" || "),f="string"==typeof t.raw?t.raw:String(t);return l.length<f.length?l:t}},50799:(e,t,n)=>{const r=n(66902),i=n(22257),{ANY:o}=i,a=n(45712),s=n(46269),c=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=n.includePrerelease?[new i(">=0.0.0-0")]:[new i(">=0.0.0")]}if(1===t.length&&t[0].semver===o){if(n.includePrerelease)return!0;t=[new i(">=0.0.0")]}const r=new Set;let c,f,d,p,h,v,m;for(const t of e)">"===t.operator||">="===t.operator?c=u(c,t,n):"<"===t.operator||"<="===t.operator?f=l(f,t,n):r.add(t.semver);if(r.size>1)return null;if(c&&f){if(d=s(c.semver,f.semver,n),d>0)return null;if(0===d&&(">="!==c.operator||"<="!==f.operator))return null}for(const e of r){if(c&&!a(e,String(c),n))return null;if(f&&!a(e,String(f),n))return null;for(const r of t)if(!a(e,String(r),n))return!1;return!0}let g=!(!f||n.includePrerelease||!f.semver.prerelease.length)&&f.semver,y=!(!c||n.includePrerelease||!c.semver.prerelease.length)&&c.semver;g&&1===g.prerelease.length&&"<"===f.operator&&0===g.prerelease[0]&&(g=!1);for(const e of t){if(m=m||">"===e.operator||">="===e.operator,v=v||"<"===e.operator||"<="===e.operator,c)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),">"===e.operator||">="===e.operator){if(p=u(c,e,n),p===e&&p!==c)return!1}else if(">="===c.operator&&!a(c.semver,String(e),n))return!1;if(f)if(g&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===g.major&&e.semver.minor===g.minor&&e.semver.patch===g.patch&&(g=!1),"<"===e.operator||"<="===e.operator){if(h=l(f,e,n),h===e&&h!==f)return!1}else if("<="===f.operator&&!a(f.semver,String(e),n))return!1;if(!e.operator&&(f||c)&&0!==d)return!1}return!(c&&v&&!f&&0!==d)&&(!(f&&m&&!c&&0!==d)&&(!y&&!g))},u=(e,t,n)=>{if(!e)return t;const r=s(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},l=(e,t,n)=>{if(!e)return t;const r=s(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,n={})=>{if(e===t)return!0;e=new r(e,n),t=new r(t,n);let i=!1;e:for(const r of e.set){for(const e of t.set){const t=c(r,e,n);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},51042:(e,t,n)=>{const r=n(66902);e.exports=(e,t)=>new r(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},89042:(e,t,n)=>{const r=n(66902);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(e){return null}}},37478:(e,t,n)=>{"use strict";var r=n(40210),i=n(21924),o=n(70631),a=r("%TypeError%"),s=r("%WeakMap%",!0),c=r("%Map%",!0),u=i("WeakMap.prototype.get",!0),l=i("WeakMap.prototype.set",!0),f=i("WeakMap.prototype.has",!0),d=i("Map.prototype.get",!0),p=i("Map.prototype.set",!0),h=i("Map.prototype.has",!0),v=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n};e.exports=function(){var e,t,n,r={assert:function(e){if(!r.has(e))throw new a("Side channel does not contain "+o(e))},get:function(r){if(s&&r&&("object"==typeof r||"function"==typeof r)){if(e)return u(e,r)}else if(c){if(t)return d(t,r)}else if(n)return function(e,t){var n=v(e,t);return n&&n.value}(n,r)},has:function(r){if(s&&r&&("object"==typeof r||"function"==typeof r)){if(e)return f(e,r)}else if(c){if(t)return h(t,r)}else if(n)return function(e,t){return!!v(e,t)}(n,r);return!1},set:function(r,i){s&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new s),l(e,r,i)):c?(t||(t=new c),p(t,r,i)):(n||(n={key:{},next:null}),function(e,t,n){var r=v(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}}(n,r,i))}};return r}},42830:(e,t,n)=>{e.exports=i;var r=n(17187).EventEmitter;function i(){r.call(this)}n(35717)(i,r),i.Readable=n(79481),i.Writable=n(64229),i.Duplex=n(56753),i.Transform=n(74605),i.PassThrough=n(82725),i.finished=n(8610),i.pipeline=n(59946),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",o),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",c));var a=!1;function s(){a||(a=!0,e.end())}function c(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(l(),0===r.listenerCount(this,"error"))throw e}function l(){n.removeListener("data",i),e.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",c),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",l),n.removeListener("close",l),e.removeListener("close",l)}return n.on("error",u),e.on("error",u),n.on("end",l),n.on("close",l),e.on("close",l),e.emit("pipe",n),e}},32553:(e,t,n)=>{"use strict";var r=n(89509).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=l,this.end=f,t=3;break;default:return this.write=d,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function l(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(i=a(t[r]),i>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(i=a(t[r]),i>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},80842:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTokenizer=void 0;const r=n(55167);t.AbstractTokenizer=class{constructor(e){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=e||{}}async readToken(e,t=this.position){const n=Buffer.alloc(e.len);if(await this.readBuffer(n,{position:t})<e.len)throw new r.EndOfStreamError;return e.get(n,0)}async peekToken(e,t=this.position){const n=Buffer.alloc(e.len);if(await this.peekBuffer(n,{position:t})<e.len)throw new r.EndOfStreamError;return e.get(n,0)}async readNumber(e){if(await this.readBuffer(this.numBuffer,{length:e.len})<e.len)throw new r.EndOfStreamError;return e.get(this.numBuffer,0)}async peekNumber(e){if(await this.peekBuffer(this.numBuffer,{length:e.len})<e.len)throw new r.EndOfStreamError;return e.get(this.numBuffer,0)}async ignore(e){if(void 0!==this.fileInfo.size){const t=this.fileInfo.size-this.position;if(e>t)return this.position+=t,t}return this.position+=e,e}async close(){}normalizeOptions(e,t){if(t&&void 0!==t.position&&t.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return t?{mayBeLess:!0===t.mayBeLess,offset:t.offset?t.offset:0,length:t.length?t.length:e.length-(t.offset?t.offset:0),position:t.position?t.position:this.position}:{mayBeLess:!1,offset:0,length:e.length,position:this.position}}}},30778:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferTokenizer=void 0;const r=n(55167),i=n(80842);class o extends i.AbstractTokenizer{constructor(e,t){super(t),this.uint8Array=e,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:e.length}async readBuffer(e,t){if(t&&t.position){if(t.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=t.position}const n=await this.peekBuffer(e,t);return this.position+=n,n}async peekBuffer(e,t){const n=this.normalizeOptions(e,t),i=Math.min(this.uint8Array.length-n.position,n.length);if(!n.mayBeLess&&i<n.length)throw new r.EndOfStreamError;return e.set(this.uint8Array.subarray(n.position,n.position+i),n.offset),i}async close(){}}t.BufferTokenizer=o},27859:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromFile=t.FileTokenizer=void 0;const r=n(80842),i=n(55167),o=n(77209);class a extends r.AbstractTokenizer{constructor(e,t){super(t),this.fd=e}async readBuffer(e,t){const n=this.normalizeOptions(e,t);this.position=n.position;const r=await o.read(this.fd,e,n.offset,n.length,n.position);if(this.position+=r.bytesRead,r.bytesRead<n.length&&(!t||!t.mayBeLess))throw new i.EndOfStreamError;return r.bytesRead}async peekBuffer(e,t){const n=this.normalizeOptions(e,t),r=await o.read(this.fd,e,n.offset,n.length,n.position);if(!n.mayBeLess&&r.bytesRead<n.length)throw new i.EndOfStreamError;return r.bytesRead}async close(){return o.close(this.fd)}}t.FileTokenizer=a,t.fromFile=async function(e){const t=await o.stat(e);if(!t.isFile)throw new Error(`File not a file: ${e}`);const n=await o.open(e,"r");return new a(n,{path:e,size:t.size})}},77209:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readFile=t.writeFileSync=t.writeFile=t.read=t.open=t.close=t.stat=t.createReadStream=t.pathExists=void 0;const r=n(4059);t.pathExists=r.existsSync,t.createReadStream=r.createReadStream,t.stat=async function(e){return new Promise(((t,n)=>{r.stat(e,((e,r)=>{e?n(e):t(r)}))}))},t.close=async function(e){return new Promise(((t,n)=>{r.close(e,(e=>{e?n(e):t()}))}))},t.open=async function(e,t){return new Promise(((n,i)=>{r.open(e,t,((e,t)=>{e?i(e):n(t)}))}))},t.read=async function(e,t,n,i,o){return new Promise(((a,s)=>{r.read(e,t,n,i,o,((e,t,n)=>{e?s(e):a({bytesRead:t,buffer:n})}))}))},t.writeFile=async function(e,t){return new Promise(((n,i)=>{r.writeFile(e,t,(e=>{e?i(e):n()}))}))},t.writeFileSync=function(e,t){r.writeFileSync(e,t)},t.readFile=async function(e){return new Promise(((t,n)=>{r.readFile(e,((e,r)=>{e?n(e):t(r)}))}))}},20599:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadStreamTokenizer=void 0;const r=n(80842),i=n(55167);class o extends r.AbstractTokenizer{constructor(e,t){super(t),this.streamReader=new i.StreamReader(e)}async getFileInfo(){return this.fileInfo}async readBuffer(e,t){const n=this.normalizeOptions(e,t),r=n.position-this.position;if(r>0)return await this.ignore(r),this.readBuffer(e,t);if(r<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(0===n.length)return 0;const o=await this.streamReader.read(e,n.offset,n.length);if(this.position+=o,(!t||!t.mayBeLess)&&o<n.length)throw new i.EndOfStreamError;return o}async peekBuffer(e,t){const n=this.normalizeOptions(e,t);let r=0;if(n.position){const t=n.position-this.position;if(t>0){const i=new Uint8Array(n.length+t);return r=await this.peekBuffer(i,{mayBeLess:n.mayBeLess}),e.set(i.subarray(t),n.offset),r-t}if(t<0)throw new Error("Cannot peek from a negative offset in a stream")}if(n.length>0){try{r=await this.streamReader.peek(e,n.offset,n.length)}catch(e){if(t&&t.mayBeLess&&e instanceof i.EndOfStreamError)return 0;throw e}if(!n.mayBeLess&&r<n.length)throw new i.EndOfStreamError}return r}async ignore(e){const t=Math.min(256e3,e),n=new Uint8Array(t);let r=0;for(;r<e;){const i=e-r,o=await this.readBuffer(n,{length:Math.min(t,i)});if(o<0)return o;r+=o}return r}}t.ReadStreamTokenizer=o},35849:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromBuffer=t.fromStream=t.EndOfStreamError=void 0;const r=n(20599),i=n(30778);var o=n(55167);Object.defineProperty(t,"EndOfStreamError",{enumerable:!0,get:function(){return o.EndOfStreamError}}),t.fromStream=function(e,t){return t=t||{},new r.ReadStreamTokenizer(e,t)},t.fromBuffer=function(e,t){return new i.BufferTokenizer(e,t)}},26597:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromStream=t.fromBuffer=t.EndOfStreamError=t.fromFile=void 0;const r=n(77209),i=n(35849);var o=n(27859);Object.defineProperty(t,"fromFile",{enumerable:!0,get:function(){return o.fromFile}});var a=n(35849);Object.defineProperty(t,"EndOfStreamError",{enumerable:!0,get:function(){return a.EndOfStreamError}}),Object.defineProperty(t,"fromBuffer",{enumerable:!0,get:function(){return a.fromBuffer}}),t.fromStream=async function(e,t){if(t=t||{},e.path){const n=await r.stat(e.path);t.path=e.path,t.size=n.size}return i.fromStream(e,t)}},83416:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnsiStringType=t.StringType=t.BufferType=t.Uint8ArrayType=t.IgnoreType=t.Float80_LE=t.Float80_BE=t.Float64_LE=t.Float64_BE=t.Float32_LE=t.Float32_BE=t.Float16_LE=t.Float16_BE=t.INT64_BE=t.UINT64_BE=t.INT64_LE=t.UINT64_LE=t.INT32_LE=t.INT32_BE=t.INT24_BE=t.INT24_LE=t.INT16_LE=t.INT16_BE=t.INT8=t.UINT32_BE=t.UINT32_LE=t.UINT24_BE=t.UINT24_LE=t.UINT16_BE=t.UINT16_LE=t.UINT8=void 0;const r=n(80645);function i(e){return new DataView(e.buffer,e.byteOffset)}t.UINT8={len:1,get:(e,t)=>i(e).getUint8(t),put:(e,t,n)=>(i(e).setUint8(t,n),t+1)},t.UINT16_LE={len:2,get:(e,t)=>i(e).getUint16(t,!0),put:(e,t,n)=>(i(e).setUint16(t,n,!0),t+2)},t.UINT16_BE={len:2,get:(e,t)=>i(e).getUint16(t),put:(e,t,n)=>(i(e).setUint16(t,n),t+2)},t.UINT24_LE={len:3,get(e,t){const n=i(e);return n.getUint8(t)+(n.getUint16(t+1,!0)<<8)},put(e,t,n){const r=i(e);return r.setUint8(t,255&n),r.setUint16(t+1,n>>8,!0),t+3}},t.UINT24_BE={len:3,get(e,t){const n=i(e);return(n.getUint16(t)<<8)+n.getUint8(t+2)},put(e,t,n){const r=i(e);return r.setUint16(t,n>>8),r.setUint8(t+2,255&n),t+3}},t.UINT32_LE={len:4,get:(e,t)=>i(e).getUint32(t,!0),put:(e,t,n)=>(i(e).setUint32(t,n,!0),t+4)},t.UINT32_BE={len:4,get:(e,t)=>i(e).getUint32(t),put:(e,t,n)=>(i(e).setUint32(t,n),t+4)},t.INT8={len:1,get:(e,t)=>i(e).getInt8(t),put:(e,t,n)=>(i(e).setInt8(t,n),t+1)},t.INT16_BE={len:2,get:(e,t)=>i(e).getInt16(t),put:(e,t,n)=>(i(e).setInt16(t,n),t+2)},t.INT16_LE={len:2,get:(e,t)=>i(e).getInt16(t,!0),put:(e,t,n)=>(i(e).setInt16(t,n,!0),t+2)},t.INT24_LE={len:3,get(e,n){const r=t.UINT24_LE.get(e,n);return r>8388607?r-16777216:r},put(e,t,n){const r=i(e);return r.setUint8(t,255&n),r.setUint16(t+1,n>>8,!0),t+3}},t.INT24_BE={len:3,get(e,n){const r=t.UINT24_BE.get(e,n);return r>8388607?r-16777216:r},put(e,t,n){const r=i(e);return r.setUint16(t,n>>8),r.setUint8(t+2,255&n),t+3}},t.INT32_BE={len:4,get:(e,t)=>i(e).getInt32(t),put:(e,t,n)=>(i(e).setInt32(t,n),t+4)},t.INT32_LE={len:4,get:(e,t)=>i(e).getInt32(t,!0),put:(e,t,n)=>(i(e).setInt32(t,n,!0),t+4)},t.UINT64_LE={len:8,get:(e,t)=>i(e).getBigUint64(t,!0),put:(e,t,n)=>(i(e).setBigUint64(t,n,!0),t+8)},t.INT64_LE={len:8,get:(e,t)=>i(e).getBigInt64(t,!0),put:(e,t,n)=>(i(e).setBigInt64(t,n,!0),t+8)},t.UINT64_BE={len:8,get:(e,t)=>i(e).getBigUint64(t),put:(e,t,n)=>(i(e).setBigUint64(t,n),t+8)},t.INT64_BE={len:8,get:(e,t)=>i(e).getBigInt64(t),put:(e,t,n)=>(i(e).setBigInt64(t,n),t+8)},t.Float16_BE={len:2,get(e,t){return r.read(e,t,!1,10,this.len)},put(e,t,n){return r.write(e,n,t,!1,10,this.len),t+this.len}},t.Float16_LE={len:2,get(e,t){return r.read(e,t,!0,10,this.len)},put(e,t,n){return r.write(e,n,t,!0,10,this.len),t+this.len}},t.Float32_BE={len:4,get:(e,t)=>i(e).getFloat32(t),put:(e,t,n)=>(i(e).setFloat32(t,n),t+4)},t.Float32_LE={len:4,get:(e,t)=>i(e).getFloat32(t,!0),put:(e,t,n)=>(i(e).setFloat32(t,n,!0),t+4)},t.Float64_BE={len:8,get:(e,t)=>i(e).getFloat64(t),put:(e,t,n)=>(i(e).setFloat64(t,n),t+8)},t.Float64_LE={len:8,get:(e,t)=>i(e).getFloat64(t,!0),put:(e,t,n)=>(i(e).setFloat64(t,n,!0),t+8)},t.Float80_BE={len:10,get(e,t){return r.read(e,t,!1,63,this.len)},put(e,t,n){return r.write(e,n,t,!1,63,this.len),t+this.len}},t.Float80_LE={len:10,get(e,t){return r.read(e,t,!0,63,this.len)},put(e,t,n){return r.write(e,n,t,!0,63,this.len),t+this.len}};t.IgnoreType=class{constructor(e){this.len=e}get(e,t){}};t.Uint8ArrayType=class{constructor(e){this.len=e}get(e,t){return e.subarray(t,t+this.len)}};t.BufferType=class{constructor(e){this.len=e}get(e,t){return Buffer.from(e.subarray(t,t+this.len))}};t.StringType=class{constructor(e,t){this.len=e,this.encoding=t}get(e,t){return Buffer.from(e).toString(this.encoding,t,t+this.len)}};class o{constructor(e){this.len=e}static decode(e,t,n){let r="";for(let i=t;i<n;++i)r+=o.codePointToString(o.singleByteDecoder(e[i]));return r}static inRange(e,t,n){return t<=e&&e<=n}static codePointToString(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}static singleByteDecoder(e){if(o.inRange(e,0,127))return e;const t=o.windows1252[e-128];if(null===t)throw Error("invaliding encoding");return t}get(e,t=0){return o.decode(e,t,t+this.len)}}t.AnsiStringType=o,o.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]},52511:function(e,t,n){var r;e=n.nmd(e),function(i){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var a,s=2147483647,c=36,u=1,l=26,f=38,d=700,p=72,h=128,v="-",m=/^xn--/,g=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=c-u,_=Math.floor,E=String.fromCharCode;function S(e){throw RangeError(b[e])}function R(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function x(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+R((e=e.replace(y,".")).split("."),t).join(".")}function C(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function k(e){return R(e,(function(e){var t="";return e>65535&&(t+=E((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=E(e)})).join("")}function T(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function I(e,t,n){var r=0;for(e=n?_(e/d):e>>1,e+=_(e/t);e>w*l>>1;r+=c)e=_(e/w);return _(r+(w+1)*e/(e+f))}function O(e){var t,n,r,i,o,a,f,d,m,g,y,b=[],w=e.length,E=0,R=h,x=p;for((n=e.lastIndexOf(v))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&S("not-basic"),b.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<w;){for(o=E,a=1,f=c;i>=w&&S("invalid-input"),((d=(y=e.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:c)>=c||d>_((s-E)/a))&&S("overflow"),E+=d*a,!(d<(m=f<=x?u:f>=x+l?l:f-x));f+=c)a>_(s/(g=c-m))&&S("overflow"),a*=g;x=I(E-o,t=b.length+1,0==o),_(E/t)>s-R&&S("overflow"),R+=_(E/t),E%=t,b.splice(E++,0,R)}return k(b)}function A(e){var t,n,r,i,o,a,f,d,m,g,y,b,w,R,x,k=[];for(b=(e=C(e)).length,t=h,n=0,o=p,a=0;a<b;++a)(y=e[a])<128&&k.push(E(y));for(r=i=k.length,i&&k.push(v);r<b;){for(f=s,a=0;a<b;++a)(y=e[a])>=t&&y<f&&(f=y);for(f-t>_((s-n)/(w=r+1))&&S("overflow"),n+=(f-t)*w,t=f,a=0;a<b;++a)if((y=e[a])<t&&++n>s&&S("overflow"),y==t){for(d=n,m=c;!(d<(g=m<=o?u:m>=o+l?l:m-o));m+=c)x=d-g,R=c-g,k.push(E(T(g+x%R,0))),d=_(x/R);k.push(E(T(d,0))),o=I(n,w,r==i),n=0,++r}++n,++t}return k.join("")}a={version:"1.3.2",ucs2:{decode:C,encode:k},decode:O,encode:A,toASCII:function(e){return x(e,(function(e){return g.test(e)?"xn--"+A(e):e}))},toUnicode:function(e){return x(e,(function(e){return m.test(e)?O(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},8575:(e,t,n)=>{"use strict";var r=n(52511),i=n(62502);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=b(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),f=["%","/","?",";","#"].concat(l),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(17673);function b(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",u=e.split(s);u[0]=u[0].replace(/\\/g,"/");var b=e=u.join(s);if(b=b.trim(),!n&&1===e.split("#").length){var w=c.exec(b);if(w)return this.path=b,this.href=b,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var _=a.exec(b);if(_){var E=(_=_[0]).toLowerCase();this.protocol=E,b=b.substr(_.length)}if(n||_||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===b.substr(0,2);!S||_&&m[_]||(b=b.substr(2),this.slashes=!0)}if(!m[_]&&(S||_&&!g[_])){for(var R,x,C=-1,k=0;k<d.length;k++){-1!==(T=b.indexOf(d[k]))&&(-1===C||T<C)&&(C=T)}-1!==(x=-1===C?b.lastIndexOf("@"):b.lastIndexOf("@",C))&&(R=b.slice(0,x),b=b.slice(x+1),this.auth=decodeURIComponent(R)),C=-1;for(k=0;k<f.length;k++){var T;-1!==(T=b.indexOf(f[k]))&&(-1===C||T<C)&&(C=T)}-1===C&&(C=b.length),this.host=b.slice(0,C),b=b.slice(C),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var O=this.hostname.split(/\./),A=(k=0,O.length);k<A;k++){var L=O[k];if(L&&!L.match(p)){for(var M="",P=0,N=L.length;P<N;P++)L.charCodeAt(P)>127?M+="x":M+=L[P];if(!M.match(p)){var D=O.slice(0,k),U=O.slice(k+1),Z=L.match(h);Z&&(D.push(Z[1]),U.unshift(Z[2])),U.length&&(b="/"+U.join(".")+b),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=r.toASCII(this.hostname));var j=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+j,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!v[E])for(k=0,A=l.length;k<A;k++){var B=l[k];if(-1!==b.indexOf(B)){var V=encodeURIComponent(B);V===B&&(V=escape(B)),b=b.split(B).join(V)}}var q=b.indexOf("#");-1!==q&&(this.hash=b.substr(q),b=b.slice(0,q));var W=b.indexOf("?");if(-1!==W?(this.search=b.substr(W),this.query=b.substr(W+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,W)):t&&(this.search="",this.query={}),b&&(this.pathname=b),g[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var z=this.search||"";this.path=j+z}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var l=c[u];"protocol"!==l&&(n[l]=e[l])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!g[e.protocol]){for(var f=Object.keys(e),d=0;d<f.length;d++){var p=f[d];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",y=n.search||"";n.path=v+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),w=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=w||b||n.host&&e.pathname,E=_,S=n.pathname&&n.pathname.split("/")||[],R=(h=e.pathname&&e.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(R&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),_=_&&(""===h[0]||""===S[0])),w)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,S=h;else if(h.length)S||(S=[]),S.pop(),S=S.concat(h),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(R)n.hostname=n.host=S.shift(),(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift());return n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=S.slice(-1)[0],C=(n.host||e.host||S.length>1)&&("."===x||".."===x)||""===x,k=0,T=S.length;T>=0;T--)"."===(x=S[T])?S.splice(T,1):".."===x?(S.splice(T,1),k++):k&&(S.splice(T,1),k--);if(!_&&!E)for(;k--;k)S.unshift("..");!_||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),C&&"/"!==S.join("/").substr(-1)&&S.push("");var I,O=""===S[0]||S[0]&&"/"===S[0].charAt(0);R&&(n.hostname=n.host=O?"":S.length?S.shift():"",(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift()));return(_=_||n.host&&S.length)&&!O&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},62502:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},83031:(e,t,n)=>{e.exports=n(32482)},32482:(e,t)=>{t.version="1.0.0",t.encode=function(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},t.decode=function(e){return e=(e+=Array(5-e.length%4).join("=")).replace(/\-/g,"+").replace(/\_/g,"/"),new Buffer(e,"base64")},t.validate=function(e){return/^[A-Za-z0-9\-_]+$/.test(e)}},94927:(e,t,n)=>{function r(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},20384:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},55955:(e,t,n)=>{"use strict";var r=n(82584),i=n(48662),o=n(86430),a=n(85692);function s(e){return e.call.bind(e)}var c="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,l=s(Object.prototype.toString),f=s(Number.prototype.valueOf),d=s(String.prototype.valueOf),p=s(Boolean.prototype.valueOf);if(c)var h=s(BigInt.prototype.valueOf);if(u)var v=s(Symbol.prototype.valueOf);function m(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function g(e){return"[object Map]"===l(e)}function y(e){return"[object Set]"===l(e)}function b(e){return"[object WeakMap]"===l(e)}function w(e){return"[object WeakSet]"===l(e)}function _(e){return"[object ArrayBuffer]"===l(e)}function E(e){return"undefined"!=typeof ArrayBuffer&&(_.working?_(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===l(e)}function R(e){return"undefined"!=typeof DataView&&(S.working?S(e):e instanceof DataView)}t.isArgumentsObject=r,t.isGeneratorFunction=i,t.isTypedArray=a,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||R(e)},t.isUint8Array=function(e){return"Uint8Array"===o(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},t.isUint16Array=function(e){return"Uint16Array"===o(e)},t.isUint32Array=function(e){return"Uint32Array"===o(e)},t.isInt8Array=function(e){return"Int8Array"===o(e)},t.isInt16Array=function(e){return"Int16Array"===o(e)},t.isInt32Array=function(e){return"Int32Array"===o(e)},t.isFloat32Array=function(e){return"Float32Array"===o(e)},t.isFloat64Array=function(e){return"Float64Array"===o(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},g.working="undefined"!=typeof Map&&g(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(g.working?g(e):e instanceof Map)},y.working="undefined"!=typeof Set&&y(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(y.working?y(e):e instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),t.isWeakSet=function(e){return w(e)},_.working="undefined"!=typeof ArrayBuffer&&_(new ArrayBuffer),t.isArrayBuffer=E,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=R;var x="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function C(e){return"[object SharedArrayBuffer]"===l(e)}function k(e){return void 0!==x&&(void 0===C.working&&(C.working=C(new x)),C.working?C(e):e instanceof x)}function T(e){return m(e,f)}function I(e){return m(e,d)}function O(e){return m(e,p)}function A(e){return c&&m(e,h)}function L(e){return u&&m(e,v)}t.isSharedArrayBuffer=k,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===l(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===l(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===l(e)},t.isGeneratorObject=function(e){return"[object Generator]"===l(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===l(e)},t.isNumberObject=T,t.isStringObject=I,t.isBooleanObject=O,t.isBigIntObject=A,t.isSymbolObject=L,t.isBoxedPrimitive=function(e){return T(e)||I(e)||O(e)||A(e)||L(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(E(e)||k(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},89539:(e,t,n)=>{var r=n(34155),i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),s=r[n];n<i;s=r[++n])g(s)||!E(s)?a+=" "+s:a+=" "+u(s);return a},t.deprecate=function(e,n){if(void 0!==r&&!0===r.noDeprecation)return e;if(void 0===r)return function(){return t.deprecate(e,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(r.throwDeprecation)throw new Error(n);r.traceDeprecation?console.trace(n):console.error(n),i=!0}return e.apply(this,arguments)}};var a={},s=/^$/;if({ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.NODE_DEBUG){var c={ATLAS_SERVICE_URL:"https://atlas-a.wbx2.com/admin/api/v1",CONVERSATION_SERVICE:"https://conv-a.wbx2.com/conversation/api/v1",ENCRYPTION_SERVICE_URL:"https://encryption-a.wbx2.com",HYDRA_SERVICE_URL:"https://api.ciscospark.com/v1",IDBROKER_BASE_URL:"https://idbroker.webex.com",IDENTITY_BASE_URL:"https://identity.webex.com",U2C_SERVICE_URL:"https://u2c.wbx2.com/u2c/api/v1",WDM_SERVICE_URL:"https://wdm-a.wbx2.com/wdm/api/v1",WHISTLER_API_SERVICE_URL:"https://whistler-prod.allnint.ciscospark.com/api/v1"}.NODE_DEBUG;c=c.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+c+"$","i")}function u(e,n){var r={seen:[],stylize:f};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(n)?r.showHidden=n:n&&t._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),d(r,e,r.depth)}function l(e,t){var n=u.styles[t];return n?"["+u.colors[n][0]+"m"+e+"["+u.colors[n][1]+"m":e}function f(e,t){return e}function d(e,n,r){if(e.customInspect&&n&&x(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return b(i)||(i=d(e,i,r)),i}var o=function(e,t){if(w(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(y(t))return e.stylize(""+t,"number");if(m(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),R(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(n);if(0===a.length){if(x(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(_(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(S(n))return e.stylize(Date.prototype.toString.call(n),"date");if(R(n))return p(n)}var u,l="",f=!1,E=["{","}"];(v(n)&&(f=!0,E=["[","]"]),x(n))&&(l=" [Function"+(n.name?": "+n.name:"")+"]");return _(n)&&(l=" "+RegExp.prototype.toString.call(n)),S(n)&&(l=" "+Date.prototype.toUTCString.call(n)),R(n)&&(l=" "+p(n)),0!==a.length||f&&0!=n.length?r<0?_(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=f?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)I(t,String(a))?o.push(h(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))})),o}(e,n,r,s,a):a.map((function(t){return h(e,n,r,s,t,f)})),e.seen.pop(),function(e,t,n){var r=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(u,l,E)):E[0]+l+E[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),I(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(n)?d(e,c.value,null):d(e,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.slice(1,-1),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function v(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return void 0===e}function _(e){return E(e)&&"[object RegExp]"===C(e)}function E(e){return"object"==typeof e&&null!==e}function S(e){return E(e)&&"[object Date]"===C(e)}function R(e){return E(e)&&("[object Error]"===C(e)||e instanceof Error)}function x(e){return"function"==typeof e}function C(e){return Object.prototype.toString.call(e)}function k(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!a[e])if(s.test(e)){var n=r.pid;a[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else a[e]=function(){};return a[e]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(55955),t.isArray=v,t.isBoolean=m,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=b,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=w,t.isRegExp=_,t.types.isRegExp=_,t.isObject=E,t.isDate=S,t.types.isDate=S,t.isError=R,t.types.isNativeError=R,t.isFunction=x,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(20384);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(e=new Date,n=[k(e.getHours()),k(e.getMinutes()),k(e.getSeconds())].join(":"),[e.getDate(),T[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n(35717),t._extend=function(e,t){if(!t||!E(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var O="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function A(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(O&&e[O]){var t;if("function"!=typeof(t=e[O]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,O,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),O&&Object.defineProperty(t,O,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=O,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,t).then((function(e){r.nextTick(a.bind(null,null,e))}),(function(e){r.nextTick(A.bind(null,e,a))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,i(e)),t}},55877:(e,t,n)=>{var r=n(23570),i=n(71171),o=i;o.v1=r,o.v4=i,e.exports=o},45327:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,i=t;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},85217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},23570:(e,t,n)=>{var r,i,o=n(85217),a=n(45327),s=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],f=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==f||null==d){var p=o();null==f&&(f=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=i=16383&(p[6]<<8|p[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:c+1,m=h-s+(v-c)/1e4;if(m<0&&void 0===e.clockseq&&(d=d+1&16383),(m<0||h>s)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,c=v,i=d;var g=(1e4*(268435455&(h+=122192928e5))+v)%4294967296;l[u++]=g>>>24&255,l[u++]=g>>>16&255,l[u++]=g>>>8&255,l[u++]=255&g;var y=h/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=d>>>8|128,l[u++]=255&d;for(var b=0;b<6;++b)l[u+b]=f[b];return t||a(l)}},71171:(e,t,n)=>{var r=n(85217),i=n(45327);e.exports=function(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}},86430:(e,t,n)=>{"use strict";var r=n(94029),i=n(63083),o=n(21924),a=n(27296),s=o("Object.prototype.toString"),c=n(96410)(),u="undefined"==typeof globalThis?n.g:globalThis,l=i(),f=o("String.prototype.slice"),d={},p=Object.getPrototypeOf;c&&a&&p&&r(l,(function(e){if("function"==typeof u[e]){var t=new u[e];if(Symbol.toStringTag in t){var n=p(t),r=a(n,Symbol.toStringTag);if(!r){var i=p(n);r=a(i,Symbol.toStringTag)}d[e]=r.get}}}));var h=n(85692);e.exports=function(e){return!!h(e)&&(c&&Symbol.toStringTag in e?function(e){var t=!1;return r(d,(function(n,r){if(!t)try{var i=n.call(e);i===r&&(t=i)}catch(e){}})),t}(e):f(s(e),8,-1))}},47529:e=>{e.exports=function(){for(var e={},n=0;n<arguments.length;n++){var r=arguments[n];for(var i in r)t.call(r,i)&&(e[i]=r[i])}return e};var t=Object.prototype.hasOwnProperty},49602:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},34411:(e,t,n)=>{"use strict";function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}function i(e,t,n){var r=t===e.head?new s(n,null,t,e):new s(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function o(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,n,r){if(!(this instanceof s))return new s(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=r,r.Node=s,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},r.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},r.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},r.prototype.map=function(e,t){t=t||this;for(var n=new r,i=this.head;null!==i;)n.push(e.call(t,i.value,this)),i=i.next;return n},r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new r,i=this.tail;null!==i;)n.push(e.call(t,i.value,this)),i=i.prev;return n},r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,o=this.head;null!==o&&i<e;i++)o=o.next;for(;null!==o&&i<t;i++,o=o.next)n.push(o.value);return n},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,o=this.tail;null!==o&&i>t;i--)o=o.prev;for(;null!==o&&i>e;i--,o=o.prev)n.push(o.value);return n},r.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,o=this.head;null!==o&&r<e;r++)o=o.next;var a=[];for(r=0;o&&r<t;r++)a.push(o.value),o=this.removeNode(o);null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(r=0;r<n.length;r++)o=i(this,o,n[r]);return a},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{n(49602)(r)}catch(e){}},42480:()=>{},66507:()=>{},86035:()=>{},24654:()=>{},52361:()=>{},94616:()=>{},4059:()=>{},27921:(e,t,n)=>{e.exports=n(50176)},78149:(e,t,n)=>{e.exports=n(70964)},66130:(e,t,n)=>{e.exports=n(76216)},8450:(e,t,n)=>{e.exports=n(23565)},18281:(e,t,n)=>{e.exports=n(94175)},7520:(e,t,n)=>{e.exports=n(68080)},53804:(e,t,n)=>{e.exports=n(7153)},18428:(e,t,n)=>{e.exports=n(68207)},5940:(e,t,n)=>{e.exports=n(25380)},93364:(e,t,n)=>{e.exports=n(99848)},26771:(e,t,n)=>{e.exports=n(82624)},43562:(e,t,n)=>{e.exports=n(88058)},27392:(e,t,n)=>{e.exports=n(36759)},95366:(e,t,n)=>{e.exports=n(44221)},6919:(e,t,n)=>{e.exports=n(22991)},21986:(e,t,n)=>{e.exports=n(65162)},62680:(e,t,n)=>{e.exports=n(72818)},62962:(e,t,n)=>{e.exports=n(87595)},26243:(e,t,n)=>{e.exports=n(15297)},22863:(e,t,n)=>{e.exports=n(21900)},18433:(e,t,n)=>{e.exports=n(42837)},62207:(e,t,n)=>{e.exports=n(97186)},79529:(e,t,n)=>{e.exports=n(16111)},73473:(e,t,n)=>{e.exports=n(89448)},71544:(e,t,n)=>{e.exports=n(58564)},63755:(e,t,n)=>{e.exports=n(98401)},79873:(e,t,n)=>{e.exports=n(53268)},67857:(e,t,n)=>{e.exports=n(76409)},39907:(e,t,n)=>{e.exports=n(46383)},66411:(e,t,n)=>{e.exports=n(42437)},19031:(e,t,n)=>{e.exports=n(19414)},90487:(e,t,n)=>{e.exports=n(98828)},85579:(e,t,n)=>{e.exports=n(71922)},22013:(e,t,n)=>{e.exports=n(72974)},64233:(e,t,n)=>{e.exports=n(90446)},66282:(e,t,n)=>{e.exports=n(53868)},83977:(e,t,n)=>{e.exports=n(69488)},11996:(e,t,n)=>{var r=n(63207).default,i=n(26771),o=n(85579),a=n(5940),s=n(62962),c=n(22863),u=n(73473);function l(){"use strict";e.exports=l=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,f=n.hasOwnProperty,d=i||function(e,t,n){e[t]=n.value},p="function"==typeof o?o:{},h=p.iterator||"@@iterator",v=p.asyncIterator||"@@asyncIterator",m=p.toStringTag||"@@toStringTag";function g(e,t,n){return i(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{g({},"")}catch(e){g=function(e,t,n){return e[t]=n}}function y(e,t,n,r){var i=t&&t.prototype instanceof _?t:_,o=a(i.prototype),s=new M(r||[]);return d(o,"_invoke",{value:I(e,n,s)}),o}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=y;var w={};function _(){}function E(){}function S(){}var R={};g(R,h,(function(){return this}));var x=s&&s(s(P([])));x&&x!==n&&f.call(x,h)&&(R=x);var C=S.prototype=_.prototype=a(R);function k(e){["next","throw","return"].forEach((function(t){g(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(i,o,a,s){var c=b(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==r(l)&&f.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;d(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}})}function I(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return N()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===w)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=b(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===w)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function O(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var i=b(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,w;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,w):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,w)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function P(e){if(e){var t=e[h];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(f.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:N}}function N(){return{value:void 0,done:!0}}return E.prototype=S,d(C,"constructor",{value:S,configurable:!0}),d(S,"constructor",{value:E,configurable:!0}),E.displayName=g(S,m,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return c?c(e,S):(e.__proto__=S,g(e,m,"GeneratorFunction")),e.prototype=a(C),e},t.awrap=function(e){return{__await:e}},k(T.prototype),g(T.prototype,v,(function(){return this})),t.AsyncIterator=T,t.async=function(e,n,r,i,o){void 0===o&&(o=u);var a=new T(y(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(C),g(C,m,"Generator"),g(C,h,(function(){return this})),g(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&f.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=f.call(i,"catchLoc"),s=f.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&f.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;L(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),w}},t}e.exports=l,e.exports.__esModule=!0,e.exports.default=e.exports},63207:(e,t,n)=>{var r=n(85579),i=n(22013);function o(t){return e.exports=o="function"==typeof r&&"symbol"==typeof i?function(e){return typeof e}:function(e){return e&&"function"==typeof r&&e.constructor===r&&e!==r.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,o(t)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},33453:(e,t,n)=>{var r=n(11996)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},63083:(e,t,n)=>{"use strict";var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i="undefined"==typeof globalThis?n.g:globalThis;e.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"==typeof i[r[t]]&&(e[e.length]=r[t]);return e}},2313:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(26243),i=n(26771);function o(e,t,n,o,a){var s={};return r(o).forEach((function(e){s[e]=o[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),s),a&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(a):void 0,s.initializer=void 0),void 0===s.initializer&&(i(e,t,s),s=null),s}},80759:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:()=>r})},23710:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:()=>r})},66250:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(73473);function i(e,t,n,i,o,a,s){try{var c=e[a](s),u=c.value}catch(e){return void n(e)}c.done?t(u):r.resolve(u).then(i,o)}function o(e){return function(){var t=this,n=arguments;return new r((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}},8167:(e,t,n)=>{"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:()=>r})},956:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(63755),i=n(35148);function o(e,t,n){return o=function(){if("undefined"==typeof Reflect||!r)return!1;if(r.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?r.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&(0,i.Z)(o,n.prototype),o},o.apply(null,arguments)}},31314:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(26771),i=n(44660);function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),r(e,(0,i.Z)(o.key),o)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),r(e,"prototype",{writable:!1}),e}},77193:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(26771),i=n(44660);function o(e,t,n){return(t=(0,i.Z)(t))in e?r(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},35002:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(22863),i=n(62962);function o(e){return o=r?i.bind():function(e){return e.__proto__||i(e)},o(e)}},69678:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(5940),i=n(26771),o=n(35148);function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=r(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),i(e,"prototype",{writable:!1}),t&&(0,o.Z)(e,t)}},26305:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(13682),i=n(23710);function o(e,t){if(t&&("object"===(0,r.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},35148:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(22863);function i(e,t){return i=r?r.bind():function(e,t){return e.__proto__=t,e},i(e,t)}},14917:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(78149);var i=n(85579),o=n(22013);var a=n(33422);function s(e,t){return function(e){if(r(e))return e}(e)||function(e,t){var n=null==e?null:void 0!==i&&e[o]||e["@@iterator"];if(null!=n){var r,a,s,c,u=[],l=!0,f=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(u.push(r.value),u.length!==t);l=!0);}catch(e){f=!0,a=e}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(f)throw a}}return u}}(e,t)||(0,a.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},21882:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(78149),i=n(80759);var o=n(85579),a=n(22013),s=n(27921);var c=n(33422);function u(e){return function(e){if(r(e))return(0,i.Z)(e)}(e)||function(e){if(void 0!==o&&null!=e[a]||null!=e["@@iterator"])return s(e)}(e)||(0,c.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},44660:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(13682),i=n(64233);function o(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[i];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==(0,r.Z)(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},13682:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(85579),i=n(22013);function o(e){return o="function"==typeof r&&"symbol"==typeof i?function(e){return typeof e}:function(e){return e&&"function"==typeof r&&e.constructor===r&&e!==r.prototype?"symbol":typeof e},o(e)}},33422:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(27921),i=n(80759);function o(e,t){if(e){if("string"==typeof e)return(0,i.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?r(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,i.Z)(e,t):void 0}}},67097:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(18281),i=n(5940),o=n(35002),a=n(35148);var s=n(956);function c(e){var t="function"==typeof r?new r:void 0;return c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return(0,s.Z)(e,arguments,(0,o.Z)(this).constructor)}return r.prototype=i(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,a.Z)(r,e)},c(e)}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.d(__webpack_exports__,{default:()=>sb});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{ActiveSpeakerInfo:()=>xv,CodecInfo:()=>Av,ConnectionState:()=>Rs,ErrorType:()=>ed,Errors:()=>Zv,Event:()=>Xf,H264Codec:()=>Lv,LocalCameraTrack:()=>ps,LocalDisplayTrack:()=>hs,LocalMicrophoneTrack:()=>vs,LocalTrack:()=>fs,LocalTrackEvents:()=>us,Media:()=>Fv,MediaFamily:()=>Cv,MediaRequest:()=>hu,MediaStreamTrackKind:()=>Oc,MediaType:()=>Iv,MultistreamRoapMediaConnection:()=>Uv,PeerConnection:()=>Pc,Policy:()=>Tv,ReceiveSlot:()=>Ef,ReceiveSlotEvents:()=>wf,ReceiverSelectedInfo:()=>Mv,RemoteTrackType:()=>Qf,RoapMediaConnection:()=>bv,WcmeError:()=>ms,createCameraTrack:()=>gs,createDisplayTrack:()=>bs,createMicrophoneTrack:()=>ys,getAudioInputDevices:()=>_s,getAudioOutputDevices:()=>Es,getDevices:()=>ws,getErrorDescription:()=>ko,getLogger:()=>Co,getMediaFamily:()=>Pv,getVideoInputDevices:()=>Ss,isBrowserSupported:()=>jv,setLogger:()=>xo,setOnDeviceChangeHandler:()=>Cs});var t,n,r=__webpack_require__(63755),i=__webpack_require__.n(r),o=__webpack_require__(8167),a=__webpack_require__(31314),s=__webpack_require__(69678),c=__webpack_require__(26305),u=__webpack_require__(35002),l=__webpack_require__(66250),f=__webpack_require__(77193),d=__webpack_require__(33453),p=__webpack_require__.n(d),h=__webpack_require__(27392),v=__webpack_require__.n(h),m=function(){function e(){(0,o.Z)(this,e)}return(0,a.Z)(e,[{key:"setWebex",value:function(e){if(t)throw new Error("You cannot set the SDKConnector instance more than once");var r=function(e){return e.canAuthorize?e.ready?e.internal.mercury?{error:void 0,success:!0}:{error:new Error("webex.internal.mercury is not available"),success:!1}:{error:new Error("webex.ready is not true"),success:!1}:{error:new Error("webex.canAuthorize is not true"),success:!1}}(e),i=r.error,o=r.success;if(i)throw i;if(!o)throw new Error("An unknown error occurred setting up the webex instance.");n=e,t=this}},{key:"get",value:function(){return t}},{key:"getWebex",value:function(){return n}},{key:"request",value:function(e){return t.getWebex().request(e)}},{key:"registerListener",value:function(e,n){t.getWebex().internal.mercury.on(e,(function(e){n(e)}))}},{key:"unregisterListener",value:function(e){t.getWebex().internal.mercury.off(e)}}]),e}();const g=v()(new m);var y,b,w,_="1.66.0",E="web-calling-sdk",S="".concat(E,"/").concat(_," (").concat("web-calling",")"),R="calls",x="cisco-device-url",C="devices",k={"rtp-rxstat":{Dur:0,Pkt:0,Oct:0,LatePkt:0,LostPkt:0,AvgJit:0,VQMetrics:{VoRxCodec:"unknown",VoPktSizeMs:0,maxJitter:0,VoOneWayDelayMs:0,networkType:"unknown",hwType:"unknown"}},"rtp-txstat":{Dur:0,Pkt:0,Oct:0,VQMetrics:{VoTxCodec:"unknown",rtpBitRate:0}}},T=/^[a-zA-Z ]+/,I="identity",O="callhold",A="scim",L="v1/Users?filter=",M="spark-user-agent",P="/calling/web/",N=/[\d\s()*#+.-]+/,D="CallerId",U="utils",Z="CallingClient",j="call",F="callManager",B="metric",V="register",q="codecId",W="id",z="RTCIceCandidatePair_",G="localCandidateId",H="RTCIceCandidate_",$="networkType",K="RTCCodec_",Y="CIT01_",J="COT01_",X="mimeType",Q="remote-inbound-rtp",ee="totalRoundTripTime",te="roundTripTimeMeasurements",ne="inbound-rtp",re="outbound-rtp",ie="packetsReceived",oe="packetsSent",ae="packetsLost",se="packetsDiscarded",ce="jitterBufferDelay",ue="jitterBufferEmittedCount",le="timestamp",fe="type",de="transport",pe="targetBitrate",he="media-source",ve="bytesReceived",me="bytesSent",ge="selectedCandidatePairId",ye="totalSamplesDuration",be="rtp-rxstat",we="rtp-txstat",_e=1e3,Ee="getMobiusServers",Se="executeFailback",Re="scheduleFailback429Retry",xe="callsClearedHandler";!function(e){e.MAIN="CALLING_SDK",e.FILE="file",e.METHOD="method",e.EVENT="event",e.MESSAGE="message",e.ERROR="error"}(y||(y={})),function(e){e[e.error=1]="error",e[e.warn=2]="warn",e[e.log=3]="log",e[e.info=4]="info",e[e.trace=5]="trace"}(b||(b={})),function(e){e.ERROR="error",e.WARN="warn",e.INFO="info",e.LOG="log",e.TRACE="trace"}(w||(w={}));var Ce=b.error,ke=function(e,t){switch(t){case w.INFO:case w.LOG:console.log(e);break;case w.WARN:console.warn(e);break;case w.ERROR:console.error(e);break;case w.TRACE:console.trace(e)}},Te=function(e,t){var n=(new Date).toUTCString();return"".concat(E,": ").concat(n,": ").concat(t,": ").concat(y.FILE,":").concat(e.file," - ").concat(y.METHOD,":").concat(e.method)};const Ie={log:function(e,t){Ce>=b.log&&ke("".concat(Te(t,"[LOG]")," - ").concat(y.MESSAGE,":").concat(e),w.LOG)},error:function(e,t){Ce>=b.error&&ke("".concat(Te(t,"[ERROR]")," - !").concat(y.ERROR,"!").concat(y.MESSAGE,":").concat(e.message),w.ERROR)},info:function(e,t){Ce>=b.info&&ke("".concat(Te(t,"[INFO]")," - ").concat(y.MESSAGE,":").concat(e),w.INFO)},warn:function(e,t){Ce>=b.warn&&ke("".concat(Te(t,"[WARN]")," - ").concat(y.MESSAGE,":").concat(e),w.WARN)},trace:function(e,t){Ce>=b.trace&&ke("".concat(Te(t,"[TRACE]")," - ").concat(y.MESSAGE,":").concat(e),w.TRACE)},setLogger:function(e,t){switch(e){case w.WARN:Ce=b.warn;break;case w.LOG:Ce=b.log;break;case w.INFO:Ce=b.info;break;case w.TRACE:Ce=b.trace;break;default:Ce=b.error}var n="Logger initialized for module: ".concat(t," with level: ").concat(Ce);ke("".concat(Te({file:"logger.ts",method:"setLogger"},""),"  - ").concat(y.MESSAGE,":").concat(n),w.INFO)},getLogLevel:function(){var e;switch(Ce){case b.warn:e=w.WARN;break;case b.log:e=w.LOG;break;case b.info:e=w.INFO;break;case b.trace:e=w.TRACE;break;default:e=w.ERROR}return e}};var Oe,Ae,Le,Me,Pe,Ne,De,Ue,Ze;!function(e){e.MOBIUS="mobius",e.JANUS="janus"}(Oe||(Oe={})),function(e){e.GET="GET",e.POST="POST",e.PATCH="PATCH",e.PUT="PUT",e.DELETE="DELETE"}(Ae||(Ae={})),function(e){e.ACTIVE="active",e.DEFAULT="default"}(Le||(Le={})),function(e){e.URI="uri",e.TEL="tel"}(Me||(Me={})),function(e){e.INBOUND="inbound",e.OUTBOUND="outbound"}(Pe||(Pe={})),function(e){e.ASC="ASC",e.DESC="DESC",e.DEFAULT="DESC"}(Ne||(Ne={})),function(e){e.END_TIME="endTime",e.DEFAULT="endTime",e.START_TIME="startTime"}(De||(De={})),function(e){e.CALLING="calling",e.CONTACT_CENTER="contactcenter"}(Ue||(Ue={})),function(e){e.PEOPLE="PEOPLE",e.ORGANIZATION="ORGANIZATION"}(Ze||(Ze={}));var je,Fe,Be,Ve,qe,We="bearer",ze="content",Ge="devices",He="items",$e="key",Ke="$",Ye="rawRequest",Je="settings",Xe="statusCode",Qe="SUCCESS",et=200,tt="time",nt="user",rt="userSessions",it="_values",ot="text/xml",at="xsiActionsEndpoint",st="organizations?callingData=true",ct="services",ut="ciscospark://us",lt="CallSettings",ft="people",dt="orgId",pt="features/doNotDisturb",ht="features/callForwarding",vt="features/voicemail",mt=__webpack_require__(27921),gt=__webpack_require__.n(mt),yt=__webpack_require__(85579),bt=__webpack_require__.n(yt),wt=__webpack_require__(22013),_t=__webpack_require__.n(wt),Et=__webpack_require__(78149),St=__webpack_require__.n(Et),Rt=__webpack_require__(26243),xt=__webpack_require__.n(Rt),Ct=__webpack_require__(8450),kt=__webpack_require__.n(Ct),Tt=__webpack_require__(73473),It=__webpack_require__.n(Tt),Ot=__webpack_require__(31795),At=__webpack_require__(23710),Lt=__webpack_require__(67097);function Mt(e){var t=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=i()(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}!function(e){e.CALL_CONTROL="call_control",e.MEDIA="media"}(je||(je={})),function(e){e.CALL_ERROR="call_error",e.DEFAULT="default_error",e.FORBIDDEN_ERROR="forbidden",e.NOT_FOUND="not_found",e.REGISTRATION_ERROR="registration_error",e.SERVICE_UNAVAILABLE="service_unavailable",e.TIMEOUT="timeout",e.TOKEN_ERROR="token_error",e.SERVER_ERROR="server_error"}(Fe||(Fe={})),function(e){e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.DEVICE_NOT_FOUND=404]="DEVICE_NOT_FOUND",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.REQUEST_TIMEOUT=408]="REQUEST_TIMEOUT",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS"}(Be||(Be={})),function(e){e[e.INVALID_STATUS_UPDATE=111]="INVALID_STATUS_UPDATE",e[e.DEVICE_NOT_REGISTERED=112]="DEVICE_NOT_REGISTERED",e[e.CALL_NOT_FOUND=113]="CALL_NOT_FOUND",e[e.ERROR_PROCESSING=114]="ERROR_PROCESSING",e[e.USER_BUSY=115]="USER_BUSY",e[e.PARSING_ERROR=116]="PARSING_ERROR",e[e.TIMEOUT_ERROR=117]="TIMEOUT_ERROR",e[e.NOT_ACCEPTABLE=118]="NOT_ACCEPTABLE",e[e.CALL_REJECTED=119]="CALL_REJECTED",e[e.NOT_AVAILABLE=120]="NOT_AVAILABLE"}(Ve||(Ve={})),function(e){e[e.DEVICE_LIMIT_EXCEEDED=101]="DEVICE_LIMIT_EXCEEDED",e[e.DEVICE_CREATION_DISABLED=102]="DEVICE_CREATION_DISABLED",e[e.DEVICE_CREATION_FAILED=103]="DEVICE_CREATION_FAILED"}(qe||(qe={}));var Pt=function(e){(0,s.Z)(n,e);var t=Mt(n);function n(e,r,i){var a;return(0,o.Z)(this,n),a=t.call(this,e),(0,f.Z)((0,At.Z)(a),"type",void 0),(0,f.Z)((0,At.Z)(a),"context",void 0),a.type=i||Fe.DEFAULT,a.context=r,a}return(0,a.Z)(n)}((0,Lt.Z)(Error));function Nt(e){var t=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=i()(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var Dt=function(e){(0,s.Z)(n,e);var t=Nt(n);function n(e,r,i,a,s){var c;return(0,o.Z)(this,n),c=t.call(this,e,r,i),(0,f.Z)((0,At.Z)(c),"correlationId",void 0),(0,f.Z)((0,At.Z)(c),"errorLayer",void 0),c.correlationId=a,c.errorLayer=s,c}return(0,a.Z)(n,[{key:"setCallError",value:function(e){this.message=e.message,this.correlationId=e.correlationId,this.context=e.context,this.type=e.type}},{key:"getCallError",value:function(){return{message:this.message,context:this.context,type:this.type,correlationId:this.correlationId,errorLayer:this.errorLayer}}}]),n}(Pt),Ut=function(e,t,n,r,i){return new Dt(e,t,n,r,i)};function Zt(e){var t=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=i()(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var jt,Ft=function(e){(0,s.Z)(n,e);var t=Zt(n);function n(e,r,i,a){var s;return(0,o.Z)(this,n),s=t.call(this,e,r,i),(0,f.Z)((0,At.Z)(s),"status",Le.DEFAULT),s.status=a,s}return(0,a.Z)(n,[{key:"setError",value:function(e){this.message=e.message,this.context=e.context,this.type=e.type}},{key:"getError",value:function(){return{message:this.message,context:this.context,type:this.type}}}]),n}(Pt),Bt=function(e,t,n,r){return new Ft(e,t,n,r)};!function(e){e.WXC="WEBEX_CALLING",e.BWRKS="BROADWORKS_CALLING",e.UCM="UCM_CALLING",e.INVALID="Calling backend is currently not supported"}(jt||(jt={}));var Vt="BroadworksBackendConnector",qt="v2.0",Wt="broadworksXsiActionsUrl",zt="bc-sp-basic",Gt="broadworks-connector",Ht="bc-sp-standard",$t="?format=json",Kt="MarkAsRead",Yt="MarkAsUnread",Jt="messageMediaContent",Xt="NATIVE_SIP_CALL_TO_UCM",Qt="NATIVE_WEBEX_TEAMS_CALLING",en="No additional voicemails",tn="UcmBackendConnector",nn="voicemails",rn="VoiceMessagingMessages",on="WxCallBackendConnector";function an(e,t){var n=void 0!==bt()&&e[_t()]||e["@@iterator"];if(!n){if(St()(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return gt()(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cn(e,t){var n,r,i={file:U,method:cn.name},o=[],a=[];if(null!=e&&null!==(n=e.primary)&&void 0!==n&&n.uris){Ie.info("Adding Primary uris",i);var s,c=an(e.primary.uris);try{for(c.s();!(s=c.n()).done;){var u=s.value;o.push("".concat(u).concat(P))}}catch(e){c.e(e)}finally{c.f()}}if(null!=e&&null!==(r=e.backup)&&void 0!==r&&r.uris){Ie.info("Adding Backup uris",i);var l,f=an(e.backup.uris);try{for(f.s();!(l=f.n()).done;){var d=l.value;a.push("".concat(d).concat(P))}}catch(e){f.e(e)}finally{f.f()}}Ie.info("Adding Default uri",i),o.length||a.length?a.push("".concat(t).concat(P)):o.push("".concat(t).concat(P));for(var p=[],h=[],v=0;v<o.length;v+=1)-1===p.indexOf(o[v])&&p.push(o[v]);for(var m=0;m<a.length;m+=1)-1===h.indexOf(a[m])&&h.push(a[m]);return{primary:p,backup:h}}function un(e,t,n,r,i){var o={};o.context=e,o.type=t,o.message=n,o.correlationId=r,i.setCallError(o)}function ln(e,t,n,r){var i={};i.context=e,i.type=t,i.message=n,r.setError(i)}function fn(e,t){var n=Bt("",{},Fe.DEFAULT,Le.DEFAULT);ln(t,Fe.SERVICE_UNAVAILABLE,"An unknown error occurred. Wait a moment and try again. Please contact the administrator if the problem persists.",n),e(n)}function dn(e,t,n,r){return pn.apply(this,arguments)}function pn(){return(pn=(0,l.Z)(p().mark((function e(t,n,r,i){var o,a,s,c,u,l,f,d,h;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Bt("",{},Fe.DEFAULT,Le.DEFAULT),a=t.statusCode,s=!1,Ie.warn("Status code: -> ".concat(a),r),e.t0=a,e.next=e.t0===Be.UNAUTHORIZED?7:e.t0===Be.INTERNAL_SERVER_ERROR?12:e.t0===Be.SERVICE_UNAVAILABLE?16:e.t0===Be.FORBIDDEN?20:e.t0===Be.DEVICE_NOT_FOUND?55:60;break;case 7:return s=!0,Ie.warn("401 Unauthorized",r),ln(r,Fe.TOKEN_ERROR,"User is unauthorized due to an expired token. Sign out, then sign back in.",o),n(o,s),e.abrupt("break",63);case 12:return Ie.warn("500 Internal Server Error",r),ln(r,Fe.SERVER_ERROR,"An unknown error occurred while placing the request. Wait a moment and try again.",o),n(o,s),e.abrupt("break",63);case 16:return Ie.warn("503 Service Unavailable",r),ln(r,Fe.SERVICE_UNAVAILABLE,"An error occurred on the server while processing the request. Wait a moment and try again.",o),n(o,s),e.abrupt("break",63);case 20:if(Ie.warn("403 Forbidden",r),c=t.body){e.next=27;break}return Ie.warn("Error response has no body, throwing default error",r),ln(r,Fe.FORBIDDEN_ERROR,"An unauthorized action has been received. This action has been blocked. Please contact the administrator if this persists.",o),n(o,s),e.abrupt("return",s);case 27:u=c.errorCode,Ie.warn("Error code found : ".concat(u),r),e.t1=u,e.next=e.t1===qe.DEVICE_LIMIT_EXCEEDED?32:e.t1===qe.DEVICE_CREATION_DISABLED?39:e.t1===qe.DEVICE_CREATION_FAILED?45:50;break;case 32:if("User device limit exceeded",Ie.warn("User device limit exceeded",r),!i){e.next=38;break}return l=r.method||"handleErrors",e.next=38,i(c,l);case 38:return e.abrupt("break",54);case 39:return f="User is not configured for WebRTC calling. Please contact the administrator to resolve this issue.",s=!0,ln(r,Fe.FORBIDDEN_ERROR,f,o),Ie.warn(f,r),n(o,!0),e.abrupt("break",54);case 45:return d="An unknown error occurred while provisioning the device. Wait a moment and try again.",ln(r,Fe.FORBIDDEN_ERROR,d,o),Ie.warn(d,r),n(o,s),e.abrupt("break",54);case 50:h="An unknown error occurred. Wait a moment and try again. Please contact the administrator if the problem persists.",ln(r,Fe.FORBIDDEN_ERROR,h,o),Ie.warn(h,r),n(o,s);case 54:return e.abrupt("break",63);case 55:return s=!0,Ie.warn("404 Device Not Found",r),ln(r,Fe.NOT_FOUND,"The client has unregistered. Please wait for the client to register before attempting the call. If error persists, sign out, sign back in and attempt the call.",o),n(o,s),e.abrupt("break",63);case 60:ln(r,Fe.DEFAULT,"Unknown error",o),Ie.warn("Unknown Error",r),n(o,s);case 63:return e.abrupt("return",s);case 64:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hn(e,t,n,r,i,o,a){return vn.apply(this,arguments)}function vn(){return(vn=(0,l.Z)(p().mark((function e(t,n,r,i,o,a,s){var c,u,l,f,d,h,v;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=Ut("",c={file:s,method:a},Fe.DEFAULT,"",n),l=o.statusCode,Ie.warn("Status code: ->".concat(l),c),e.t0=l,e.next=e.t0===Be.UNAUTHORIZED?7:e.t0===Be.FORBIDDEN||e.t0===Be.SERVICE_UNAVAILABLE?11:e.t0===Be.DEVICE_NOT_FOUND?48:e.t0===Be.INTERNAL_SERVER_ERROR?52:56;break;case 7:return Ie.warn("401 Unauthorized",c),un(c,Fe.TOKEN_ERROR,"User is unauthorized due to an expired token. Sign out, then sign back in.",i,u),t(u),e.abrupt("break",57);case 11:if(f=o.body){e.next=17;break}return Ie.warn("Error response has no body, throwing default error",c),un(c,403===o.statusCode?Fe.FORBIDDEN_ERROR:Fe.SERVICE_UNAVAILABLE,403===o.statusCode?"An unauthorized action has been received. This action has been blocked. Please contact the administrator if this persists.":"An error occurred on the server while processing the request. Wait a moment and try again.",i,u),t(u),e.abrupt("return");case 17:if(!(o.headers&&"retry-after"in o.headers&&r)){e.next=22;break}return d=o.headers["retry-after"],Ie.warn("Retry Interval received: ".concat(d),c),r(d),e.abrupt("return");case 22:h=f.errorCode,e.t1=h,e.next=e.t1===Ve.INVALID_STATUS_UPDATE?26:e.t1===Ve.DEVICE_NOT_REGISTERED?28:e.t1===Ve.CALL_NOT_FOUND?30:e.t1===Ve.ERROR_PROCESSING?32:e.t1===Ve.USER_BUSY?34:e.t1===Ve.PARSING_ERROR?36:e.t1===Ve.NOT_ACCEPTABLE?38:e.t1===Ve.CALL_REJECTED?40:e.t1===Ve.NOT_AVAILABLE?42:44;break;case 26:return v="An invalid status update has been received for the call. Wait a moment and try again.",e.abrupt("break",45);case 28:return v="The client has unregistered. Please wait for the client to register before attempting the call. If error persists, sign out, sign back in and attempt the call.",e.abrupt("break",45);case 30:return v="Call is not found on the server. Wait a moment and try again.",e.abrupt("break",45);case 32:return v="An error occurred while processing the call on the server. Wait a moment and try again.",e.abrupt("break",45);case 34:return v="Called user is busy.",e.abrupt("break",45);case 36:return v="An error occurred while parsing the provided information. Wait a moment and try again.",e.abrupt("break",45);case 38:return v="An error occurred on the server while accepting the call. Wait a moment and try again. Please contact the administrator if this persists.",e.abrupt("break",45);case 40:return v="Call rejected by the server. Wait a moment and try again. Please contact the administrator if this persists.",e.abrupt("break",45);case 42:return v="Calling services not available. Wait a moment and try again. Please contact the administrator if this persists.",e.abrupt("break",45);case 44:v="An unknown error occurred. Wait a moment and try again.";case 45:return un(c,403===o.statusCode?Fe.FORBIDDEN_ERROR:Fe.SERVICE_UNAVAILABLE,v,i,u),t(u),e.abrupt("break",57);case 48:return Ie.warn("404 Call Not Found",c),un(c,Fe.NOT_FOUND,"Call is no longer active. Wait a moment and try again.",i,u),t(u),e.abrupt("break",57);case 52:return Ie.warn("500 Internal Server Error",c),un(c,Fe.SERVER_ERROR,"An unknown error occurred in the call. Wait a moment and try again.",i,u),t(u),e.abrupt("break",57);case 56:Ie.warn("Unknown Error",c);case 57:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mn(e,t){return gn.apply(this,arguments)}function gn(){return(gn=(0,l.Z)(p().mark((function e(t,n){var r,i,o,a,s,c,u,l,f,d;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.statusCode,i="FAILURE",e.t0=r,e.next=e.t0===Be.BAD_REQUEST?5:e.t0===Be.UNAUTHORIZED?8:e.t0===Be.FORBIDDEN?11:e.t0===Be.DEVICE_NOT_FOUND?14:e.t0===Be.REQUEST_TIMEOUT?17:e.t0===Be.INTERNAL_SERVER_ERROR?20:e.t0===Be.SERVICE_UNAVAILABLE?23:26;break;case 5:return Ie.warn("400 Bad request",n),o={statusCode:400,data:{error:"400 Bad request"},message:i},e.abrupt("return",o);case 8:return Ie.warn("401 User is unauthorised, possible token expiry",n),a={statusCode:401,data:{error:"User is unauthorised, possible token expiry"},message:i},e.abrupt("return",a);case 11:return Ie.warn("403 User request is forbidden",n),s={statusCode:403,data:{error:"User request is forbidden"},message:i},e.abrupt("return",s);case 14:return Ie.warn("404 User info not found",n),c={statusCode:404,data:{error:"User info not found"},message:i},e.abrupt("return",c);case 17:return Ie.warn("408 Request to the server timedout",n),u={statusCode:408,data:{error:"Request to the server timedout"},message:i},e.abrupt("return",u);case 20:return Ie.warn("500 Internal server error occurred",n),l={statusCode:500,data:{error:"Internal server error occurred"},message:i},e.abrupt("return",l);case 23:return Ie.warn("503 Unable to establish a connection with the server",n),f={statusCode:503,data:{error:"Unable to establish a connection with the server"},message:i},e.abrupt("return",f);case 26:return Ie.warn("422 Exception has occurred",n),d={statusCode:422,data:{error:"422 Exception has occurred"},message:i},e.abrupt("return",d);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yn(e){if(!e||-1!==navigator.userAgent.indexOf("Firefox"))return Ie.info("RTCStatsReport is null, adding dummy stats",{file:U,method:yn.name}),k;try{var t,n,r,i,o={},a={},s={},c={},u={},l={},f=0,d=0,p=0,h=0,v="",m=0;l.maxJitter=0,l.VoPktSizeMs=20,e.forEach((function(e){xt()(e).forEach((function(l){if(l!==le)if(t&&l!==fe)if(n&&l!==W)if(n&&-1!==n.indexOf(z))l===G&&(a[n]=e[l]);else if(n&&-1!==n.indexOf(H))l===$&&(o[n]=e[l]);else if(!n||-1===n.indexOf(Y)&&-1===n.indexOf(J)&&-1===n.indexOf(K)){if(t&&t===Q)switch(l){case ee:p=e[l];break;case te:h=e[l]}else if(t&&t===ne)switch(l){case q:r=e[l];break;case ie:c.Pkt=e[l];break;case ve:c.Oct=e[l];break;case se:c.LatePkt=e[l];break;case ae:c.LostPkt=e[l];break;case ce:f=e[l];break;case ue:d=e[l]}else if(t&&t===de){if(l===ge)v=e[l]}else if(t&&t===re)switch(l){case q:i=e[l];break;case oe:u.Pkt=e[l];break;case me:u.Oct=e[l];break;case pe:m=e[l]}else if(t&&t===he&&l===ye)c.Dur=e[l],u.Dur=e[l]}else l===X&&(s[n]=e[l]);else n=e[l];else t=e[l]}))})),l.VoOneWayDelayMs=0!==h?p/(2*h):0,l.hwType="".concat(Ot.os,"/").concat(Ot.name,"-").concat(Ot.version),l.networkType=o[a[v]],c.AvgJit=f/d,l.VoRxCodec=s[r].split("/")[1];var g={};g.VoTxCodec=s[i].split("/")[1],g.rtpBitRate=m;var y={};return c.VQMetrics=l,u.VQMetrics=g,y[be]=c,y[we]=u,Ie.log(kt()(y),{file:U,method:yn.name}),y}catch(e){return Ie.warn("Caught error while parsing RTP stats, ".concat(e),{file:U,method:yn.name}),k}}function bn(e,t,n){return wn.apply(this,arguments)}function wn(){return wn=(0,l.Z)(p().mark((function e(t,n,r){var i,o,a,s,c,u,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=r,e.next=e.t0===jt.WXC?4:e.t0===jt.BWRKS?10:17;break;case 4:return e.next=6,t.request({uri:"".concat(t.internal.services._serviceUrls.hydra,"/").concat(st),method:Ae.GET});case 6:return i=e.sent,o=i.body,a=o[He][0][at],e.abrupt("return",a);case 10:return e.next=12,t.request({uri:"".concat(t.internal.services._serviceUrls.wdm,"/").concat(Ge),method:Ae.GET});case 12:return s=e.sent,c=s.body,u=c[Ge][0][Je][Wt],c[Ge][0][Je][Wt].endsWith(qt)&&(u=c[Ge][0][Je][Wt].slice(0,-5)),e.abrupt("return",u);case 17:throw new Error("Calling backend is not identified, exiting....");case 18:e.next=25;break;case 20:return e.prev=20,e.t1=e.catch(0),mn(l=e.t1,n),e.abrupt("return",l);case 25:case"end":return e.stop()}}),e,null,[[0,20]])}))),wn.apply(this,arguments)}function _n(e,t){return t===Ne.DESC?e.sort((function(e,t){return t[tt][Ke]-e[tt][Ke]})):t===Ne.ASC&&e.sort((function(e,t){return e[tt][Ke]-t[tt][Ke]})),e}function En(e){return Sn.apply(this,arguments)}function Sn(){return Sn=(0,l.Z)(p().mark((function e(t){var n,r,i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie.info("Starting resolution for filter:- ".concat(t),{file:U,method:"scimQuery"}),r=g.getWebex(),i="".concat(r.internal.services._serviceUrls.identity,"/").concat(I,"/").concat(A,"/").concat(r.internal.device.orgId,"/").concat(L),o=i+encodeURIComponent(t),e.abrupt("return",r.request({uri:o,method:Ae.GET,headers:(n={},(0,f.Z)(n,x,r.internal.device.url),(0,f.Z)(n,M,S),n),service:Oe.MOBIUS}));case 6:case"end":return e.stop()}}),e)}))),Sn.apply(this,arguments)}function Rn(e){return xn.apply(this,arguments)}function xn(){return(xn=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s,c,u,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},e.prev=1,e.next=4,En(t);case 4:o=e.sent,r=o.body,Ie.info("Number of records found for this user :- ".concat(r.totalResults),{file:U,method:"resolveCallerIdDisplay"}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),a=e.t0,Ie.warn("Error response: - ".concat(a.statusCode),{file:U,method:"resolveCallerIdDisplay"});case 13:return null!==(n=r)&&void 0!==n&&n.totalResults&&r.totalResults>0&&(c=r.Resources[0],i.name=c.displayName,(u=c.phoneNumbers.find((function(e){return!0===e.primary})))?i.num=u.value:c.phoneNumbers.length>0&&(Ie.info("Failure to resolve caller information. Setting number as caller ID",{file:U,method:"resolveCallerIdDisplay"}),i.num=c.phoneNumbers[0].value),l=null===(s=c.photos)||void 0===s?void 0:s.find((function(e){return"thumbnail"===e.type})),i.avatarSrc=l?l.value:"unknown",i.id=c.id,Ie.info("Extracted details:- name: ".concat(i.name," , number: ").concat(i.num,", photo: ").concat(i.avatarSrc,", id: ").concat(i.id),{file:U,method:"resolveCallerIdDisplay"})),e.abrupt("return",i);case 15:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function Cn(e){return kn.apply(this,arguments)}function kn(){return kn=(0,l.Z)(p().mark((function e(t){var n,r,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},r=g.getWebex(),i=function(e){return r.people.list({displayName:e})},e.next=6,i(t).then((function(e){if(Ie.info("DS Result: ".concat(e),{file:U,method:"resolveCallerIdByName"}),e&&e.items&&e.items.length>0){var t=e.items[0];n.name=t.displayName;var r=Buffer.from(t.id,"base64").toString("binary");n.id=r.split("/").pop();var i=t.phoneNumbers.find((function(e){return"work"===e.type}));i?n.num=i.value:t.phoneNumbers.length>0&&(n.num=t.phoneNumbers[0].value),n.avatarSrc=t.avatar,Ie.info("Extracted details:- name: ".concat(n.name," , number: ").concat(n.num,", photo: ").concat(n.avatarSrc,", id: ").concat(n.id),{file:U,method:"resolveCallerIdByName"})}}));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),kn.apply(this,arguments)}function Tn(){return(Tn=(0,l.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.userExternalId||!t.userExternalId.$){e.next=2;break}return e.abrupt("return",Rn('id eq "'.concat(t.userExternalId.$,'"')));case 2:if(!t.name||!t.name.$){e.next=4;break}return e.abrupt("return",Cn(t.name.$));case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function In(e,t){var n=Buffer.from(kt()(t),"utf8").toString("base64");sessionStorage.setItem(e,n.toString())}function On(e,t,n,r){var i=!1,o=[];try{var a=JSON.parse(Buffer.from(sessionStorage.getItem(e),"base64").toString("utf8"));Ie.info("Length of voicemail list:  ".concat(a.length),r),a.length>t+n&&(i=!0),o=a.slice(t,t+n)}catch(e){Ie.warn("Caught exception while fetching voicemail from storage. ".concat(e),r),mn(e,{})}return{messages:o,moreVMAvailable:i}}function An(e,t){return Buffer.from("".concat(ut,"/").concat(t,"/").concat(e),"binary").toString("base64")}var Ln,Mn=function(){function e(t,n){(0,o.Z)(this,e),(0,f.Z)(this,"sdkConnector",void 0),(0,f.Z)(this,"webex",void 0),(0,f.Z)(this,"hydraEndpoint",void 0),(0,f.Z)(this,"userId",void 0),(0,f.Z)(this,"personId",void 0),(0,f.Z)(this,"orgId",void 0),(0,f.Z)(this,"xsiEndpoint",void 0),this.sdkConnector=g,this.sdkConnector.getWebex()||g.setWebex(t),this.webex=this.sdkConnector.getWebex(),this.hydraEndpoint=this.webex.internal.services._serviceUrls.hydra,Ie.setLogger(n.level,lt),this.userId=this.webex.internal.device.userId,this.personId=An(this.webex.internal.device.userId,Ze.PEOPLE),this.orgId=An(this.webex.internal.device.orgId,Ze.ORGANIZATION)}var t,n,r,i,s,c,u;return(0,a.Z)(e,[{key:"getCallWaitingSetting",value:(u=(0,l.Z)(p().mark((function e(){var t,n,r,i,o,a,s,c,u,l,f,d,h;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={file:lt,method:"getCallWaitingSetting"},e.prev=1,e.next=4,this.webex.request({uri:"".concat(this.hydraEndpoint,"/").concat(st),method:Ae.GET});case 4:return n=e.sent,r=n.body,this.xsiEndpoint=r[He][0][at],i="".concat(this.xsiEndpoint,"/").concat("v2.0","/").concat("user","/").concat(this.userId,"/").concat(ct,"/").concat("CallWaiting"),e.t0=fetch,e.t1="".concat(i),e.t2=Ae.GET,e.next=13,this.webex.credentials.getUserToken();case 13:return e.t3=e.sent,e.t4={Authorization:e.t3},e.t5={method:e.t2,headers:e.t4},e.next=18,(0,e.t0)(e.t1,e.t5);case 18:if((o=e.sent).ok){e.next=21;break}throw new Error("".concat(o.status));case 21:return e.next=23,o.text();case 23:return a=e.sent,s=new DOMParser,c=s.parseFromString(a,ot),u=c.getElementsByTagName("active"),l=u[0].childNodes[0].textContent,f={statusCode:200,data:{callSetting:{enabled:"true"===l}},message:Qe},e.abrupt("return",f);case 33:return e.prev=33,e.t6=e.catch(1),d={statusCode:e.t6 instanceof Error?Number(e.t6.message):""},h=mn(d,t),e.abrupt("return",h);case 38:case"end":return e.stop()}}),e,this,[[1,33]])}))),function(){return u.apply(this,arguments)})},{key:"getDoNotDisturbSetting",value:(c=(0,l.Z)(p().mark((function e(){var t,n,r,i,o,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={file:lt,method:"getDoNotDisturbSetting"},e.prev=1,e.next=4,this.webex.request({uri:"".concat(this.hydraEndpoint,"/").concat(ft,"/").concat(this.personId,"/").concat(pt,"?").concat(dt,"=").concat(this.orgId),method:Ae.GET});case 4:return n=e.sent,r=n.body,i={statusCode:n[Xe],data:{callSetting:r},message:Qe},e.abrupt("return",i);case 10:return e.prev=10,e.t0=e.catch(1),o=e.t0,a=mn(o,t),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return c.apply(this,arguments)})},{key:"setDoNotDisturbSetting",value:(s=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:lt,method:"setDoNotDisturbSetting"},e.prev=1,r={enabled:t,ringSplashEnabled:!1},e.next=5,this.webex.request({uri:"".concat(this.hydraEndpoint,"/").concat(ft,"/").concat(this.personId,"/").concat(pt,"?").concat(dt,"=").concat(this.orgId),method:Ae.PUT,body:r});case 5:return i=e.sent,o={statusCode:i[Xe],data:{callSetting:r},message:Qe},e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(1),a=e.t0,s=mn(a,n),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return s.apply(this,arguments)})},{key:"getCallForwardSetting",value:(i=(0,l.Z)(p().mark((function e(){var t,n,r,i,o,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={file:lt,method:"getCallForwardingSetting"},e.prev=1,e.next=4,this.webex.request({uri:"".concat(this.hydraEndpoint,"/").concat(ft,"/").concat(this.personId,"/").concat(ht,"?").concat(dt,"=").concat(this.orgId),method:Ae.GET});case 4:return n=e.sent,r=n.body,i={statusCode:n[Xe],data:{callSetting:r},message:Qe},e.abrupt("return",i);case 10:return e.prev=10,e.t0=e.catch(1),o=e.t0,a=mn(o,t),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return i.apply(this,arguments)})},{key:"setCallForwardSetting",value:(r=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:lt,method:"setCallForwardingSetting"},e.prev=1,e.next=4,this.webex.request({uri:"".concat(this.hydraEndpoint,"/").concat(ft,"/").concat(this.personId,"/").concat(ht,"?").concat(dt,"=").concat(this.orgId),method:Ae.PUT,body:t});case 4:return r=e.sent,i={statusCode:r[Xe],data:{callSetting:t},message:Qe},e.abrupt("return",i);case 9:return e.prev=9,e.t0=e.catch(1),o=e.t0,a=mn(o,n),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return r.apply(this,arguments)})},{key:"getVoicemailSetting",value:(n=(0,l.Z)(p().mark((function e(){var t,n,r,i,o,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={file:lt,method:"getVoicemailSetting"},e.prev=1,e.next=4,this.webex.request({uri:"".concat(this.hydraEndpoint,"/").concat(ft,"/").concat(this.personId,"/").concat(vt,"?").concat(dt,"=").concat(this.orgId),method:Ae.GET});case 4:return n=e.sent,r=n.body,i={statusCode:n[Xe],data:{callSetting:r},message:Qe},e.abrupt("return",i);case 10:return e.prev=10,e.t0=e.catch(1),o=e.t0,a=mn(o,t),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(){return n.apply(this,arguments)})},{key:"setVoicemailSetting",value:(t=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:lt,method:"setVoicemailSetting"},e.prev=1,e.next=4,this.webex.request({uri:"".concat(this.hydraEndpoint,"/").concat(ft,"/").concat(this.personId,"/").concat(vt,"?").concat(dt,"=").concat(this.orgId),method:Ae.PUT,body:t});case 4:return r=e.sent,i={statusCode:r[Xe],data:{callSetting:t},message:Qe},e.abrupt("return",i);case 9:return e.prev=9,e.t0=e.catch(1),o=e.t0,a=mn(o,n),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return t.apply(this,arguments)})},{key:"getSDKConnector",value:function(){return this.sdkConnector}}]),e}(),Pn=__webpack_require__(21882),Nn=__webpack_require__(14917),Dn=__webpack_require__(43562),Un=__webpack_require__.n(Dn),Zn="Contacts";!function(e){e.CUSTOM="CUSTOM",e.CLOUD="CLOUD"}(Ln||(Ln={}));var jn=function(){function e(t,n){(0,o.Z)(this,e),(0,f.Z)(this,"sdkConnector",void 0),(0,f.Z)(this,"webex",void 0),this.sdkConnector=g,this.sdkConnector.getWebex()||g.setWebex(t),this.webex=this.sdkConnector.getWebex(),Ie.setLogger(n.level,Zn)}var t,n,r;return(0,a.Z)(e,[{key:"getSDKConnector",value:function(){return this.sdkConnector}},{key:"decryptContact",value:(r=(0,l.Z)(p().mark((function e(t,n,r,i){var o,a,s,c,u,l,f,d,h,v,m,g,y,b,w,_,E,S,R,x,C,k,T,I,O,A;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.addressInfo,a=t.companyName,s=t.displayName,c=t.emails,u=t.firstName,l=t.lastName,f=t.phoneNumbers,d=t.sipAddresses,h=t.title,!o){e.next=13;break}b=0,w=Un()(o);case 3:if(!(b<w.length)){e.next=13;break}if(_=(0,Nn.Z)(w[b],2),E=_[0],!(S=_[1])){e.next=9;break}return e.next=8,this.webex.internal.encryption.decryptText(r,S);case 8:S=e.sent;case 9:o[E]=S;case 10:b++,e.next=3;break;case 13:if(!a){e.next=17;break}return e.next=16,this.webex.internal.encryption.decryptText(r,a);case 16:v=e.sent;case 17:return e.next=19,this.webex.internal.encryption.decryptText(r,s);case 19:if(R=e.sent,!u){e.next=24;break}return e.next=23,this.webex.internal.encryption.decryptText(r,u);case 23:m=e.sent;case 24:if(!l){e.next=28;break}return e.next=27,this.webex.internal.encryption.decryptText(r,l);case 27:g=e.sent;case 28:if(!c){e.next=38;break}x=0;case 30:if(!(x<c.length)){e.next=38;break}return C=c[x].value,e.next=34,this.webex.internal.encryption.decryptText(r,C);case 34:c[x].value=e.sent;case 35:x+=1,e.next=30;break;case 38:if(!f){e.next=48;break}k=0;case 40:if(!(k<f.length)){e.next=48;break}return T=f[k].value,e.next=44,this.webex.internal.encryption.decryptText(r,T);case 44:f[k].value=e.sent;case 45:k+=1,e.next=40;break;case 48:if(!d){e.next=58;break}I=0;case 50:if(!(I<d.length)){e.next=58;break}return O=d[I].value,e.next=54,this.webex.internal.encryption.decryptText(r,O);case 54:d[I].value=e.sent;case 55:I+=1,e.next=50;break;case 58:if(!h){e.next=62;break}return e.next=61,this.webex.internal.encryption.decryptText(r,h);case 61:y=e.sent;case 62:return A={addressInfo:o,avatarUrlDomain:n,companyName:v,contactId:t.contactId,contactType:Ln.CUSTOM,displayName:R,emails:c,encryptionKeyUrl:r,firstName:m,groups:t.groups,lastName:g,ownerId:i,phoneNumbers:f,sipAddresses:d,title:y},e.abrupt("return",A);case 64:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"fetchContactFromDSS",value:(n=(0,l.Z)(p().mark((function e(t,n,r,i){var o,a,s,c,u,l,f,d,h,v,m,g,y,b,w,_,E;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],e.next=3,this.webex.internal.dss.lookup({ids:xt()(t)});case 3:for(a=e.sent,s=0;s<a.length;s+=1)c=a[s],u=c.identity,l=c.displayName,f=c.emails,d=c.phoneNumbers,h=c.sipAddresses,v=c.additionalInfo,m=v.department,g=v.firstName,y=v.identityManager,b=v.jobTitle,w=v.lastName,_=y&&y.displayName?y.displayName:void 0,E={avatarUrlDomain:n,contactId:u,contactType:Ln.CLOUD,department:m,displayName:l,emails:f,encryptionKeyUrl:r,firstName:g,groups:t[u],lastName:w,manager:_,ownerId:i,phoneNumbers:d,sipAddresses:h,title:b},o.push(E);return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r,i){return n.apply(this,arguments)})},{key:"getContacts",value:(t=(0,l.Z)(p().mark((function e(){var t,n,r,i,o,a,s,c,u,l,f,d,h,v,m,g,y,b;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={file:Zn,method:"getContacts"},n=[],r={},i="",o="",a="",e.prev=6,e.next=9,this.webex.request({uri:"".concat(this.webex.internal.services._serviceUrls.contactsService,"/").concat("encrypt","/").concat("Users","/").concat("contacts"),method:Ae.GET});case 9:if(s=e.sent,c=s.body){e.next=13;break}throw new Error("".concat(s));case 13:u=c.contacts,l=0;case 15:if(!(l<u.length)){e.next=31;break}if(f=u[l],i=f.avatarUrlDomain,o=f.encryptionKeyUrl,a=f.ownerId,f.contactType!==Ln.CUSTOM){e.next=27;break}return e.next=23,this.decryptContact(f,i,o,a);case 23:d=e.sent,n.push(d),e.next=28;break;case 27:f.contactType===Ln.CLOUD&&(h=f.contactId,v=f.groups,r[h]=v);case 28:l+=1,e.next=15;break;case 31:if(!xt()(r).length){e.next=36;break}return e.next=34,this.fetchContactFromDSS(r,i,o,a);case 34:m=e.sent,n.push.apply(n,(0,Pn.Z)(m));case 36:return g={statusCode:s[Xe],data:{contactList:n},message:Qe},e.abrupt("return",g);case 40:return e.prev=40,e.t0=e.catch(6),y=e.t0,b=mn(y,t),e.abrupt("return",b);case 45:case"end":return e.stop()}}),e,this,[[6,40]])}))),function(){return t.apply(this,arguments)})}]),e}(),Fn=__webpack_require__(18433),Bn=__webpack_require__.n(Fn),Vn=__webpack_require__(66411),qn=__webpack_require__(95366),Wn=__webpack_require__.n(qn);function zn(){return zn="undefined"!=typeof Reflect&&Vn?Vn.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,u.Z)(e)););return e}(e,t);if(r){var i=qn(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},zn.apply(this,arguments)}var Gn=__webpack_require__(13682),Hn=__webpack_require__(26771),$n=__webpack_require__.n(Hn),Kn=__webpack_require__(62207),Yn=__webpack_require__.n(Kn),Jn=__webpack_require__(79529),Xn=__webpack_require__.n(Jn),Qn=__webpack_require__(5940),er=__webpack_require__.n(Qn),tr=__webpack_require__(62962),nr=__webpack_require__.n(tr),rr=__webpack_require__(19031),ir=__webpack_require__.n(rr),or=__webpack_require__(83977),ar=__webpack_require__.n(or),sr=__webpack_require__(90487),cr=__webpack_require__.n(sr),ur=__webpack_require__(62680),lr=__webpack_require__.n(ur),fr=__webpack_require__(6919),dr=__webpack_require__.n(fr),pr=__webpack_require__(93364),hr=__webpack_require__.n(pr),vr=__webpack_require__(18281),mr=__webpack_require__.n(vr),gr=__webpack_require__(71544),yr=__webpack_require__.n(gr),br=__webpack_require__(21986),wr=__webpack_require__.n(br),_r=__webpack_require__(7520),Er=__webpack_require__.n(_r),Sr=__webpack_require__(18428),Rr=__webpack_require__.n(Sr),xr=__webpack_require__(53804),Cr=__webpack_require__.n(xr),kr=__webpack_require__(66130),Tr=__webpack_require__.n(kr),Ir=__webpack_require__(66282),Or=__webpack_require__.n(Ir);function Ar(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function Lr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ar(o,r,i,a,s,"next",e)}function s(e){Ar(o,r,i,a,s,"throw",e)}a(void 0)}))}}function Mr(e){return Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mr(e)}function Pr(e){var t=function(e,t){if("object"!==Mr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Mr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Mr(t)?t:String(t)}function Nr(e,t,n){return(t=Pr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dr(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function Ur(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Dr(e,t,"get"))}function Zr(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Dr(e,t,"set"),n),n}function jr(e,t){var n=void 0!==bt()&&e[_t()]||e["@@iterator"];if(!n){if(St()(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Fr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return gt()(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Br(e){var t=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=i()(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}function Vr(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!St()(t)&&xt()(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Wn()(t,n);$n()(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),v()(e)}var qr=void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Wr(){throw new Error("setTimeout has not been defined")}function zr(){throw new Error("clearTimeout has not been defined")}var Gr=Wr,Hr=zr;function $r(e){if(Gr===setTimeout)return setTimeout(e,0);if((Gr===Wr||!Gr)&&setTimeout)return Gr=setTimeout,setTimeout(e,0);try{return Gr(e,0)}catch(t){try{return Gr.call(null,e,0)}catch(t){return Gr.call(this,e,0)}}}"function"==typeof qr.setTimeout&&(Gr=setTimeout),"function"==typeof qr.clearTimeout&&(Hr=clearTimeout);var Kr,Yr=[],Jr=!1,Xr=-1;function Qr(){Jr&&Kr&&(Jr=!1,Kr.length?Yr=Kr.concat(Yr):Xr=-1,Yr.length&&ei())}function ei(){if(!Jr){var e=$r(Qr);Jr=!0;for(var t=Yr.length;t;){for(Kr=Yr,Yr=[];++Xr<t;)Kr&&Kr[Xr].run();Xr=-1,t=Yr.length}Kr=null,Jr=!1,function(e){if(Hr===clearTimeout)return clearTimeout(e);if((Hr===zr||!Hr)&&clearTimeout)return Hr=clearTimeout,clearTimeout(e);try{return Hr(e)}catch(t){try{return Hr.call(null,e)}catch(t){return Hr.call(this,e)}}}(e)}}function ti(e,t){this.fun=e,this.array=t}ti.prototype.run=function(){this.fun.apply(null,this.array)};function ni(){}var ri=ni,ii=ni,oi=ni,ai=ni,si=ni,ci=ni,ui=ni;var li=qr.performance||{},fi=li.now||li.mozNow||li.msNow||li.oNow||li.webkitNow||function(){return(new Date).getTime()};var di=new Date;var pi={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Yr.push(new ti(e,t)),1!==Yr.length||Jr||$r(ei)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:ri,addListener:ii,once:oi,off:ai,removeListener:si,removeAllListeners:ci,emit:ui,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*fi.call(li),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-di)/1e3}},hi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{},vi={exports:{}};!function(e){!function(){var t,n="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";if(b="object"===(0,Gn.Z)(pi)&&"object"===(0,Gn.Z)(pi.versions)&&pi.versions.node&&!pi.browser){var r=pi.versions.node.toString().replace("v","");n="Nodejs/"+r+" (NodeOS) AppleWebKit/"+r+" (KHTML, like Gecko) Nodejs/"+r+" Nodejs/"+r}t=void 0!==hi?hi:window,"undefined"==typeof window&&("undefined"==typeof window&&void 0!==hi&&(hi.navigator={userAgent:n,getUserMedia:function(){}},t.window=hi),"undefined"==typeof location&&(t.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(t.screen={width:0,height:0}));var i=window.navigator;void 0!==i?(void 0!==i.webkitGetUserMedia&&(i.getUserMedia=i.webkitGetUserMedia),void 0!==i.mozGetUserMedia&&(i.getUserMedia=i.mozGetUserMedia)):i={getUserMedia:function(){},userAgent:n};var o=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(i.userAgent||""),a=!(-1===i.userAgent.indexOf("Edge")||!i.msSaveOrOpenBlob&&!i.msSaveBlob),s=!!window.opera||i.userAgent.indexOf(" OPR/")>=0,c=i.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(i.userAgent),u=/^((?!chrome|android).)*safari/i.test(i.userAgent),l=!!window.chrome&&!s,f="undefined"!=typeof document&&!!document.documentMode&&!a;function d(e,t){var n=0,r=!1,i=window.setInterval((function(){e()&&(window.clearInterval(i),t(r)),n++>50&&(window.clearInterval(i),t(r=!0))}),10)}var p={Android:function(){return i.userAgent.match(/Android/i)},BlackBerry:function(){return i.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return i.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return i.userAgent.match(/Opera Mini/i)},Windows:function(){return i.userAgent.match(/IEMobile/i)},any:function(){return p.Android()||p.BlackBerry()||p.iOS()||p.Opera()||p.Windows()},getOsName:function(){var e="Unknown OS";return p.Android()&&(e="Android"),p.BlackBerry()&&(e="BlackBerry"),p.iOS()&&(e="iOS"),p.Opera()&&(e="Opera Mini"),p.Windows()&&(e="Windows"),e}};var h="Unknown OS",v="Unknown OS Version";var m,g,y=function(){for(var e,t=i.appVersion,n=i.userAgent,r="-",o=[{s:"Chrome OS",r:/CrOS/},{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],a=0;e=o[a];a++)if(e.r.test(n)){r=e.s;break}var s="-";switch(/Windows/.test(r)&&(/Windows (.*)/.test(r)&&(s=/Windows (.*)/.exec(r)[1]),r="Windows"),r){case"Mac OS X":/Mac OS X (10[\.\_\d]+)/.test(n)&&(s=/Mac OS X (10[\.\_\d]+)/.exec(n)[1]);break;case"Android":/Android ([\.\_\d]+)/.test(n)&&(s=/Android ([\.\_\d]+)/.exec(n)[1]);break;case"iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(n)&&(s=/OS (\d+)_(\d+)_?(\d+)?/.exec(t))&&s.length>3&&(s=s[1]+"."+s[2]+"."+(0|s[3]))}return{osName:r,osVersion:s}}();y&&y.osName&&"-"!=y.osName?(h=y.osName,v=y.osVersion):p.any()&&"Android"==(h=p.getOsName())&&(v=!!(g=(m=(m||i.userAgent).toLowerCase()).match(/android\s([0-9\.]*)/))&&g[1]);var b="object"===(0,Gn.Z)(pi)&&"object"===(0,Gn.Z)(pi.versions)&&pi.versions.node;"Unknown OS"===h&&b&&(h="Nodejs",v=pi.versions.node.toString().replace("v",""));var w=!1,_=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(e){"undefined"!=typeof document&&"function"==typeof document.createElement&&(!w&&e in document.createElement("canvas")&&(w=!0),!_&&e in document.createElement("video")&&(_=!0))}));var E=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,S=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,R=/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/;var x=[],C=[],k=[],T=[];i.mediaDevices&&i.mediaDevices.enumerateDevices&&(i.enumerateDevices=function(e){var t=i.mediaDevices.enumerateDevices();t&&t.then?i.mediaDevices.enumerateDevices().then(e).catch((function(){e([])})):e([])});var I=!1;("undefined"!=typeof MediaStreamTrack&&"getSources"in MediaStreamTrack||i.mediaDevices&&i.mediaDevices.enumerateDevices)&&(I=!0);var O=!1,A=!1,L=!1,M=!1,P=!1;var N=window.DetectRTC||{};N.browser=function(){i.appVersion;var e,t,n,r=i.userAgent,o=i.appName,d=""+Yn()(i.appVersion),p=Xn()(i.appVersion,10);if(s){o="Opera";try{p=(d=i.userAgent.split("OPR/")[1].split(" ")[0]).split(".")[0]}catch(e){d="0.0.0.0",p=0}}else f?((t=r.indexOf("rv:"))>0?d=r.substring(t+3):(t=r.indexOf("MSIE"),d=r.substring(t+5)),o="IE"):l?(t=r.indexOf("Chrome"),o="Chrome",d=r.substring(t+7)):u?-1!==r.indexOf("CriOS")?(t=r.indexOf("CriOS"),o="Chrome",d=r.substring(t+6)):-1!==r.indexOf("FxiOS")?(t=r.indexOf("FxiOS"),o="Firefox",d=r.substring(t+6)):(t=r.indexOf("Safari"),o="Safari",d=r.substring(t+7),-1!==(t=r.indexOf("Version"))&&(d=r.substring(t+8)),-1!==i.userAgent.indexOf("Version/")&&(d=i.userAgent.split("Version/")[1].split(" ")[0])):c?(t=r.indexOf("Firefox"),o="Firefox",d=r.substring(t+8)):(e=r.lastIndexOf(" ")+1)<(t=r.lastIndexOf("/"))&&(o=r.substring(e,t),d=r.substring(t+1),o.toLowerCase()===o.toUpperCase()&&(o=i.appName));return a&&(o="Edge",d=i.userAgent.split("Edge/")[1]),-1!==(n=d.search(/[; \)]/))&&(d=d.substring(0,n)),p=Xn()(""+d,10),isNaN(p)&&(d=""+Yn()(i.appVersion),p=Xn()(i.appVersion,10)),{fullVersion:d,version:p,name:o,isPrivateBrowsing:!1}}(),function(e){var t;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,(function(){t=!1}),(function(e){t=!0}));else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var n;try{(n=window.indexedDB.open("test")).onerror=function(){return!0}}catch(e){t=!0}void 0===t&&d((function(){return"done"===n.readyState}),(function(e){e||(t=!n.result)}))}else if(function(e){var t=e.toLowerCase();if(0===t.indexOf("msie")&&0===t.indexOf("trident"))return!1;var n=/(?:msie|rv:)\s?([\d\.]+)/.exec(t);return!!(n&&Xn()(n[1],10)>=10)}(window.navigator.userAgent)){t=!1;try{window.indexedDB||(t=!0)}catch(e){t=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(e){t=!0}void 0===t&&(t=!1,window.localStorage.removeItem("test"))}}catch(e){t=!1}d((function(){return void 0!==t}),(function(n){e(t)}))}((function(e){N.browser.isPrivateBrowsing=!!e})),N.browser["is"+N.browser.name]=!0,N.osName=h,N.osVersion=v,"object"===(0,Gn.Z)(pi)&&"object"===(0,Gn.Z)(pi.versions)&&pi.versions["node-webkit"];var D=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach((function(e){D||e in window&&(D=!0)})),N.isWebRTCSupported=D,N.isORTCSupported="undefined"!=typeof RTCIceGatherer;var U=!1;((N.browser.isChrome&&N.browser.version>=35||N.browser.isFirefox&&N.browser.version>=34||N.browser.isEdge&&N.browser.version>=17||"Android"===N.osName&&N.browser.isChrome)&&(U=!0),(i.getDisplayMedia||i.mediaDevices&&i.mediaDevices.getDisplayMedia)&&(U=!0),/^(https:|chrome-extension:)$/g.test(location.protocol||""))||("undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(N.browser.isChrome||N.browser.isEdge||N.browser.isOpera)||N.browser.isFirefox)&&(U=!1);N.isScreenCapturingSupported=U;var Z={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach((function(e){Z.isSupported||e in window&&(Z.isSupported=!0,window[e]&&"createMediaStreamSource"in window[e].prototype&&(Z.isCreateMediaStreamSourceSupported=!0))})),N.isAudioContextSupported=Z.isSupported,N.isCreateMediaStreamSourceSupported=Z.isCreateMediaStreamSourceSupported;var j=!1;N.browser.isChrome&&N.browser.version>31&&(j=!0),N.isRtpDataChannelsSupported=j;var F=!1;(N.browser.isFirefox&&N.browser.version>28||N.browser.isChrome&&N.browser.version>25||N.browser.isOpera&&N.browser.version>=11)&&(F=!0),N.isSctpDataChannelsSupported=F,N.isMobileDevice=o;var B=!1;(i.getUserMedia||i.mediaDevices&&i.mediaDevices.getUserMedia)&&(B=!0),N.browser.isChrome&&N.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(B="Requires HTTPs"),"Nodejs"===N.osName&&(B=!1),N.isGetUserMediaSupported=B;var V,q,W,z="";screen.width&&(z+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));N.displayResolution=z,N.displayAspectRatio=(V=screen.width,q=screen.height,W=function e(t,n){return 0==n?t:e(n,t%n)}(V,q),V/W/(q/W)).toFixed(2),N.isCanvasSupportsStreamCapturing=w,N.isVideoSupportsStreamCapturing=_,"Chrome"==N.browser.name&&N.browser.version>=53&&(N.isCanvasSupportsStreamCapturing||(N.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),N.isVideoSupportsStreamCapturing||(N.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),N.DetectLocalIPAddress=function(e,t){if(N.isWebRTCSupported){var n=!0,r=!0;!function(e,t){if("undefined"==typeof document||"function"!=typeof document.getElementById)return;var n={},r=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!r){var i=document.getElementById("iframe");if(!i)return;var o=i.contentWindow;r=o.RTCPeerConnection||o.mozRTCPeerConnection||o.webkitRTCPeerConnection}if(!r)return;var a=null;"Chrome"===N.browser&&N.browser.version<58&&(a={optional:[{RtpDataChannels:!0}]});var s=new r({iceServers:[{urls:"stun:stun.l.google.com:19302"}]},a);t&&(s.addStream?s.addStream(t):s.addTrack&&t.getTracks()[0]&&s.addTrack(t.getTracks()[0],t));function c(t){if(t){var r=S.exec(t);if(r){var i=r[1],o=t.match(E),a=!0;void 0===n[i]&&e(i,o,a),n[i]=!0}}else e()}if(s.onicecandidate=function(e){e.candidate&&e.candidate.candidate?c(e.candidate.candidate):c()},!t)try{s.createDataChannel("sctp",{})}catch(e){}N.isPromisesSupported?s.createOffer().then((function(e){s.setLocalDescription(e).then(u)})):s.createOffer((function(e){s.setLocalDescription(e,u,(function(){}))}),(function(){}));function u(){s.localDescription.sdp.split("\n").forEach((function(e){e&&0===e.indexOf("a=candidate:")&&c(e)}))}}((function(t){t?t.match(E)?e("Local: "+t,n=!1,r):t.match(R)?e("Public: "+t,n,r=!1):e("Public: "+t,n,r):e()}),t)}},N.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,N.isWebSocketsBlocked=!N.isWebSocketsSupported,"Nodejs"===N.osName&&(N.isWebSocketsSupported=!0,N.isWebSocketsBlocked=!1),N.checkWebSocketsSupport=function(e){e=e||function(){};try{var t,n=new WebSocket("wss://echo.websocket.org:443/");n.onopen=function(){N.isWebSocketsBlocked=!1,t=(new Date).getTime(),n.send("ping")},n.onmessage=function(){N.WebsocketLatency=(new Date).getTime()-t+"ms",e(),n.close(),n=null},n.onerror=function(){N.isWebSocketsBlocked=!0,e()}}catch(t){N.isWebSocketsBlocked=!0,e()}},N.load=function(e){!function(e){if(I)if(!i.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(i.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!i.enumerateDevices&&i.enumerateDevices&&(i.enumerateDevices=i.enumerateDevices.bind(i)),i.enumerateDevices){x=[],C=[],k=[],T=[],O=!1,A=!1,L=!1,M=!1,P=!1;var t={};i.enumerateDevices((function(n){x=[],C=[],k=[],T=[],n.forEach((function(e){var n={};for(var r in e)try{"function"!=typeof e[r]&&(n[r]=e[r])}catch(e){}t[n.deviceId+n.label+n.kind]||("audio"===n.kind&&(n.kind="audioinput"),"video"===n.kind&&(n.kind="videoinput"),n.deviceId||(n.deviceId=n.id),n.id||(n.id=n.deviceId),n.label?("videoinput"!==n.kind||P||(P=!0),"audioinput"!==n.kind||M||(M=!0)):(n.isCustomLabel=!0,"videoinput"===n.kind?n.label="Camera "+(T.length+1):"audioinput"===n.kind?n.label="Microphone "+(C.length+1):"audiooutput"===n.kind?n.label="Speaker "+(k.length+1):n.label="Please invoke getUserMedia once.",void 0!==N&&N.browser.isChrome&&N.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(n.label="HTTPs is required to get label of this "+n.kind+" device.")),"audioinput"===n.kind&&(O=!0,-1===C.indexOf(n)&&C.push(n)),"audiooutput"===n.kind&&(A=!0,-1===k.indexOf(n)&&k.push(n)),"videoinput"===n.kind&&(L=!0,-1===T.indexOf(n)&&T.push(n)),x.push(n),t[n.deviceId+n.label+n.kind]=n)})),void 0!==N&&(N.MediaDevices=x,N.hasMicrophone=O,N.hasSpeakers=A,N.hasWebcam=L,N.isWebsiteHasWebcamPermissions=P,N.isWebsiteHasMicrophonePermissions=M,N.audioInputDevices=C,N.audioOutputDevices=k,N.videoInputDevices=T),e&&e()}))}else e&&e();else e&&e()}(e=e||function(){})},N.MediaDevices=void 0!==x?x:[],N.hasMicrophone=O,N.hasSpeakers=A,N.hasWebcam=L,N.isWebsiteHasWebcamPermissions=P,N.isWebsiteHasMicrophonePermissions=M,N.audioInputDevices=C,N.audioOutputDevices=k,N.videoInputDevices=T;var G=!1;"undefined"!=typeof document&&"function"==typeof document.createElement&&"setSinkId"in document.createElement("video")&&(G=!0),N.isSetSinkIdSupported=G;var H=!1;N.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(H=!0):N.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(H=!0),N.isRTPSenderReplaceTracksSupported=H;var $=!1;N.browser.isFirefox&&N.browser.version>38&&($=!0),N.isRemoteStreamProcessingSupported=$;var K=!1;"undefined"!=typeof MediaStreamTrack&&"applyConstraints"in MediaStreamTrack.prototype&&(K=!0),N.isApplyConstraintsSupported=K;var Y=!1;N.browser.isFirefox&&N.browser.version>=43&&(Y=!0),N.isMultiMonitorScreenCapturingSupported=Y,N.isPromisesSupported=!!("Promise"in window),N.version="1.4.1",void 0===N&&(window.DetectRTC={});var J=window.MediaStream;void 0===J&&"undefined"!=typeof webkitMediaStream&&(J=webkitMediaStream),N.MediaStream=void 0!==J&&"function"==typeof J&&xt()(J.prototype),"undefined"!=typeof MediaStreamTrack?N.MediaStreamTrack=xt()(MediaStreamTrack.prototype):N.MediaStreamTrack=!1;var X=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;N.RTCPeerConnection=void 0!==X&&xt()(X.prototype),window.DetectRTC=N,e.exports=N}()}(vi);for(var mi,gi="MEDIA",yi="DEVICE",bi="MEDIA_STREAM_TRACK",wi={error:1,warn:2,info:3,debug:4},_i="error",Ei=function(e,t){wi[e]<=wi[_i]&&console.log(function(e,t){var n=t.ID,r=t.mediaType,i=t.action,o=t.description,a=t.error,s=(new Date).toISOString(),c=a?a.stack?"".concat(a.message,": ").concat(a.stack):"".concat(a):"";return"".concat(s," ").concat(e," ").concat(n||""," ").concat(r," ").concat(i," ").concat(o," ").concat(c).replace(/\s+/g," ").trim()}(e,t))},Si={info:function(e){return Ei("info",e)},warn:function(e){return Ei("warn",e)},error:function(e){return Ei("error",e)},debug:function(e){return Ei("debug",e)}},Ri=function(e){Si[e]=function(t){var n=t.ID,r=t.mediaType,i=t.action,o=t.description,a=t.error;return _i=e,Ei(e,{ID:n,mediaType:r,action:i,description:o,error:a})}},xi=0,Ci=["info","warn","error","debug"];xi<Ci.length;xi++){Ri(Ci[xi])}function ki(){}function Ti(){Ti.init.call(this)}function Ii(e){return void 0===e._maxListeners?Ti.defaultMaxListeners:e._maxListeners}function Oi(e,t,n,r){var i,o,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]):(o=e._events=new ki,e._eventsCount=0),a){if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=Ii(e))&&i>0&&a.length>i){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=o[t]=n,++e._eventsCount;return e}function Ai(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}function Li(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function Mi(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function Pi(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}ki.prototype=er()(null),Ti.EventEmitter=Ti,Ti.usingDomains=!1,Ti.prototype.domain=void 0,Ti.prototype._events=void 0,Ti.prototype._maxListeners=void 0,Ti.defaultMaxListeners=10,Ti.init=function(){this.domain=null,Ti.usingDomains&&undefined.active,this._events&&this._events!==nr()(this)._events||(this._events=new ki,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ti.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},Ti.prototype.getMaxListeners=function(){return Ii(this)},Ti.prototype.emit=function(e){var t,n,r,i,o,a,s,c="error"===e;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(t=arguments[1],!s){if(t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(n=a[e]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=Mi(e,r),o=0;o<r;++o)i[o].call(n)}(n,l,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=Mi(e,i),a=0;a<i;++a)o[a].call(n,r)}(n,l,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=Mi(e,o),s=0;s<o;++s)a[s].call(n,r,i)}(n,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=Mi(e,a),c=0;c<a;++c)s[c].call(n,r,i,o)}(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=Mi(e,i),a=0;a<i;++a)o[a].apply(n,r)}(n,l,this,i)}return!0},Ti.prototype.addListener=function(e,t){return Oi(this,e,t,!1)},Ti.prototype.on=Ti.prototype.addListener,Ti.prototype.prependListener=function(e,t){return Oi(this,e,t,!0)},Ti.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,Ai(this,e,t)),this},Ti.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,Ai(this,e,t)),this},Ti.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new ki:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new ki,this;delete r[e]}else!function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i);r.removeListener&&this.emit("removeListener",e,a||t)}return this},Ti.prototype.off=function(e,t){return this.removeListener(e,t)},Ti.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new ki,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new ki:delete n[e]),this;if(0===arguments.length){for(var r,i=xt()(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new ki,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},Ti.prototype.listeners=function(e){var t,n,r=this._events;return n=r&&(t=r[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[],n},Ti.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Li.call(e,t)},Ti.prototype.listenerCount=Li,Ti.prototype.eventNames=function(){return this._eventsCount>0?ir()(this._events):[]},function(e){e.AUDIO_INPUT="audioinput",e.AUDIO_OUTPUT="audiooutput",e.VIDEO_INPUT="videoinput"}(mi||(mi={}));var Ni,Di,Ui=new(ar()),Zi=(0,a.Z)((function e(t){(0,o.Z)(this,e),Nr(this,"ID",void 0),Nr(this,"groupID",void 0),Nr(this,"label",void 0),Nr(this,"kind",void 0),Pi(this,Ui,{writable:!0,value:void 0}),Zr(this,Ui,t),this.ID=Ur(this,Ui).deviceId,this.groupID=Ur(this,Ui).groupId,this.label=Ur(this,Ui).label,this.kind=Ur(this,Ui).kind}));function ji(e){Si.debug({ID:e.id,mediaType:bi,action:"getTrackSettings()",description:"Called"});var t=e.getSettings();if(t)return Si.debug({ID:e.id,mediaType:bi,action:"getTrackSettings()",description:"Returning track settings ".concat(kt()(t))}),t;var n=new Error("Unable to get track settings");return Si.info({ID:e.id,mediaType:bi,action:"getTrackSettings()",description:n.message,error:n}),{}}function Fi(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}!function(e){e.ENDED="ended",e.LIVE="live"}(Ni||(Ni={})),function(e){e.AUDIO="audio",e.VIDEO="video"}(Di||(Di={}));var Bi=new(ar()),Vi=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this),Nr((0,At.Z)(r),"ID",void 0),Nr((0,At.Z)(r),"kind",void 0),Nr((0,At.Z)(r),"status",void 0),Nr((0,At.Z)(r),"muted",void 0),Nr((0,At.Z)(r),"label",void 0),Fi((0,At.Z)(r),Bi,{writable:!0,value:void 0}),r.ID=e.id,r.kind=e.kind,r.status=e.readyState,r.muted=e.muted,r.label=e.label,Zr((0,At.Z)(r),Bi,e),Ur((0,At.Z)(r),Bi).onmute=function(){var e=Ur((0,At.Z)(r),Bi).enabled?"muted":"unmuted";r.emit("track:mute",{action:e})},r}return(0,a.Z)(n,[{key:"stop",value:function(){Ur(this,Bi).stop(),this.status=Ni.ENDED}},{key:"applyConstraints",value:function(e){var t=this;return Lr(p().mark((function n(){var r,i,o,a,s,c,u,l,f,d;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(Si.debug({ID:null==e||null===(r=e.deviceId)||void 0===r?void 0:r.toString(),mediaType:yi,action:"applyConstraints()",description:"Called with ".concat(kt()(e))}),Si.info({ID:null==e||null===(i=e.deviceId)||void 0===i?void 0:i.toString(),mediaType:yi,action:"applyConstraints()",description:"Applying constraints to track objects"}),a=navigator.mediaDevices.getSupportedConstraints(),s=[],c=0,u=xt()(e);c<u.length;c++)l=u[c],a[l]||(Si.debug({ID:null==e||null===(f=e.deviceId)||void 0===f?void 0:f.toString(),mediaType:yi,action:"applyConstraints()",description:"Not suported constraint tracked ".concat(l)}),s.push(l));if(!(s.length>0)){n.next=9;break}return console.warn("#TrackObject Unsupported constraints - ".concat(s.join(", "))),Si.debug({ID:null==e||null===(d=e.deviceId)||void 0===d?void 0:d.toString(),mediaType:yi,action:"applyConstraints()",description:"Constraints not applied"}),n.abrupt("return",!1);case 9:return n.next=11,Ur(t,Bi).applyConstraints(e);case 11:return Si.debug({ID:null==e||null===(o=e.deviceId)||void 0===o?void 0:o.toString(),mediaType:yi,action:"applyConstraints()",description:"Constraints applied successfully"}),n.abrupt("return",!0);case 13:case"end":return n.stop()}}),n)})))()}},{key:"getSettings",value:function(){Si.debug({mediaType:gi,action:"getSettings()",description:"Called"}),Si.info({mediaType:gi,action:"getSettings()",description:"Fetching constraints properties for the current media stream track"});var e=ji(Ur(this,Bi));return Si.debug({mediaType:gi,action:"getSettings()",description:"Received settings ".concat(kt()(e))}),e}},{key:"getMediaStreamTrack",value:function(){Si.debug({mediaType:gi,action:"getMediaStreamTrack()",description:"Called"});var e=Ur(this,Bi);return Si.debug({mediaType:gi,action:"getMediaStreamTrack()",description:"Received media stream track ".concat(kt()(e))}),e}}]),n}(Ti),qi=new Ti,Wi=[],zi=function(){var e=Lr(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Si.debug({mediaType:yi,action:"getDevices()",description:"Called"}),null!==(t=navigator.mediaDevices)&&void 0!==t&&t.enumerateDevices){e.next=4;break}return console.warn("navigator.mediaDevices.enumerateDevices() is not supported."),e.abrupt("return",[]);case 4:return Si.info({mediaType:yi,action:"getDevices()",description:"Requesting list of available media input and output devices"}),e.abrupt("return",navigator.mediaDevices.enumerateDevices());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Gi=function(){var e=Lr(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Si.debug({mediaType:yi,action:"getCameras()",description:"Called"}),e.next=3,zi();case 3:return t=e.sent,Si.info({mediaType:yi,action:"getCameras()",description:"Filtering camera devices from all available media devices"}),e.abrupt("return",t.filter((function(e){return e.kind===mi.VIDEO_INPUT})).map((function(e){return Si.debug({ID:e.deviceId,mediaType:yi,action:"getCameras()",description:"Received camera device ".concat(kt()(e))}),new Zi(e)})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Hi=function(){var e=Lr(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Si.debug({mediaType:yi,action:"getMicrophones()",description:"Called"}),e.next=3,zi();case 3:return t=e.sent,Si.info({mediaType:yi,action:"getMicrophones()",description:"Filtering microphones devices from all available media devices"}),e.abrupt("return",t.filter((function(e){return e.kind===mi.AUDIO_INPUT})).map((function(e){return Si.debug({ID:e.deviceId,mediaType:yi,action:"getMicrophones()",description:"Received microphone device ".concat(kt()(e))}),new Zi(e)})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$i=function(){var e=Lr(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Si.debug({mediaType:yi,action:"getSpeakers()",description:"Called"}),e.next=3,zi();case 3:return t=e.sent,Si.info({mediaType:yi,action:"getSpeakers()",description:"Filtering speaker devices from all available media devices"}),e.abrupt("return",t.filter((function(e){return e.kind===mi.AUDIO_OUTPUT})).map((function(e){return Si.debug({ID:e.deviceId,mediaType:yi,action:"getSpeakers()",description:"Received speaker device ".concat(kt()(e))}),new Zi(e)})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Ki(e){Si.debug({mediaType:gi,action:"getUnsupportedConstraints()",description:"Called with ".concat(kt()(e))}),Si.info({mediaType:gi,action:"getUnsupportedConstraints()",description:"Filtering list of media track unsupported constraints"});var t=navigator.mediaDevices.getSupportedConstraints(),n=[];return xt()(e).forEach((function(e){Object.prototype.hasOwnProperty.call(t,e)&&t[e]||n.push(e)})),Si.debug({mediaType:gi,action:"getUnsupportedConstraints()",description:"Received unsupported constraints ".concat(n)}),n}function Yi(){return(Yi=Lr(p().mark((function e(t){var n,r,i,o,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Si.debug({ID:null==t?void 0:t.ID,mediaType:yi,action:"createAudioTrack()",description:"Called ".concat(t?"with ".concat(kt()(t)):""," ")}),!t||t.kind===mi.AUDIO_INPUT){e.next=5;break}throw n=new Error("Device ".concat(t.ID," is not of kind AUDIO_INPUT")),Si.error({ID:t.ID,mediaType:"DEVICE",action:"createAudioTrack()",description:n.message,error:n}),n;case 5:return Si.info({ID:null==t?void 0:t.ID,mediaType:yi,action:"createAudioTrack()",description:"Creating audio track"}),r=t?{audio:{deviceId:{exact:t.ID}}}:{audio:!0,video:!1},e.next=9,navigator.mediaDevices.getUserMedia(r);case 9:if(i=e.sent,!(o=i.getAudioTracks()[0])){e.next=14;break}return Si.debug({ID:null==t?void 0:t.ID,mediaType:yi,action:"createAudioTrack()",description:"Received audio track ".concat(kt()(o))}),e.abrupt("return",new Vi(o));case 14:throw a=new Error("Device could not obtain an audio track of kind ".concat(null==t?void 0:t.kind)),Si.error({ID:null==t?void 0:t.ID,mediaType:"DEVICE",action:"createAudioTrack()",description:a.message,error:a}),a;case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ji(){return(Ji=Lr(p().mark((function e(t){var n,r,i,o,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Si.debug({ID:null==t?void 0:t.ID,mediaType:yi,action:"createVideoTrack()",description:"Called ".concat(t?"with ".concat(kt()(t)):""," ")}),!t||t.kind===mi.VIDEO_INPUT){e.next=5;break}throw n=new Error("Device ".concat(t.ID," is not of kind VIDEO_INPUT")),Si.error({ID:t.ID,mediaType:"DEVICE",action:"createVideoTrack()",description:n.message,error:n}),n;case 5:return Si.info({ID:null==t?void 0:t.ID,mediaType:yi,action:"createVideoTrack()",description:"Creating video track"}),r=t?{video:{deviceId:{exact:t.ID}}}:{audio:!1,video:!0},e.next=9,navigator.mediaDevices.getUserMedia(r);case 9:if(i=e.sent,!(o=i.getVideoTracks()[0])){e.next=14;break}return Si.debug({ID:null==t?void 0:t.ID,mediaType:yi,action:"createVideoTrack()",description:"Received video track ".concat(kt()(o))}),e.abrupt("return",new Vi(o));case 14:throw a=new Error("Device could not obtain a video track of kind ".concat(null==t?void 0:t.kind)),Si.error({ID:null==t?void 0:t.ID,mediaType:"DEVICE",action:"createVideoTrack()",description:a.message,error:a}),a;case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xi(){return(Xi=Lr(p().mark((function e(t){var n,r,i,o,a,s,c,u,l,f,d,h,v,m,g;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Si.debug({ID:null==t||null===(n=t.deviceId)||void 0===n?void 0:n.toString(),mediaType:yi,action:"createContentTrack()",description:"Called ".concat(t?"with ".concat(kt()(t)):""," ")}),Si.info({ID:null==t||null===(r=t.deviceId)||void 0===r?void 0:r.toString(),mediaType:gi,action:"createContentTrack()",description:"Creating content track"}),o={audio:!1,video:!0},e.prev=3,e.next=6,navigator.mediaDevices.getDisplayMedia(o);case 6:s=e.sent,c=s.getVideoTracks(),u=(0,Nn.Z)(c,1),a=u[0],e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(3),e.t0 instanceof Error&&Si.error({ID:null==t||null===(l=t.deviceId)||void 0===l?void 0:l.toString(),mediaType:"DEVICE",action:"createContentTrack()",description:e.t0.message,error:e.t0}),e.t0;case 16:if(!t){e.next=26;break}if(!((f=Ki(t)).length<=0)){e.next=23;break}a.applyConstraints(t),Si.debug({ID:null==t||null===(d=t.deviceId)||void 0===d?void 0:d.toString(),mediaType:yi,action:"createContentTrack()",description:"Applied media constraints to fetched content track"}),e.next=26;break;case 23:throw v=new Error("".concat(f.join(", ")," constraint is not supported by browser")),Si.error({ID:null==t||null===(h=t.deviceId)||void 0===h?void 0:h.toString(),mediaType:"DEVICE",action:"createContentTrack()",description:v.message,error:v}),v;case 26:if(!a){e.next=29;break}return Si.debug({ID:null==t||null===(m=t.deviceId)||void 0===m?void 0:m.toString(),mediaType:yi,action:"createContentTrack()",description:"Received content track ".concat(kt()(a))}),e.abrupt("return",new Vi(a));case 29:throw g=new Error("Could not obtain a content track"),Si.error({ID:null==t||null===(i=t.deviceId)||void 0===i?void 0:i.toString(),mediaType:"DEVICE",action:"createContentTrack()",description:g.message,error:g}),g;case 32:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}function Qi(){return eo.apply(this,arguments)}function eo(){return(eo=Lr(p().mark((function e(){var t,n,r,i,o,a,s,c,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Si.debug({mediaType:yi,action:"deviceChangePublisher()",description:"Called"}),null!==(t=navigator.mediaDevices)&&void 0!==t&&t.enumerateDevices){e.next=4;break}return console.warn("navigator.mediaDevices.enumerateDevices() is not supported."),e.abrupt("return");case 4:return Si.info({mediaType:yi,action:"deviceChangePublisher()",description:"Calling individual subscription listener obtained by device change event"}),e.next=7,navigator.mediaDevices.enumerateDevices();case 7:n=e.sent,r=[],i=[],o=[],a="changed",s=new(cr()),n.length!==Wi.length&&(c=n.length<Wi.length?[n,Wi,"removed"]:[Wi,n,"added"],u=(0,Nn.Z)(c,3),i=u[0],o=u[1],a=u[2],i.forEach((function(e){s.add(e.groupId)})),r=o.filter((function(e){return!s.has(e.groupId)})),Wi.splice(0,Wi.length),Wi.push.apply(Wi,(0,Pn.Z)(n)),qi.emit("device:changed",{action:a,devices:r}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function to(){return(to=Lr(p().mark((function e(t,n){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Si.debug({mediaType:gi,action:"on()",description:"Subscribing to an ".concat(t,",").concat(n)}),qi.on(t,n),"device:changed"!==t){e.next=8;break}return e.next=5,zi();case 5:r=e.sent,Wi.push.apply(Wi,(0,Pn.Z)(r)),navigator.mediaDevices.addEventListener("devicechange",Qi);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var no,ro={isModuleAdded:!1,workletProcessorUrl:"https://models.intelligence.webex.com/bnr/1.1.0/noise-reduction-effect.worklet.js"};function io(e){if(navigator.mediaDevices.getSupportedConstraints().sampleRate){var t=ji(e).sampleRate;if(t&&![16e3,32e3,48e3].includes(t)){var n=new Error("Sample rate of ".concat(t," is not supported."));throw Si.error({ID:e.id,mediaType:bi,action:"isValidTrack()",description:n.message,error:n}),n}return!0}var r=new Error("Not supported");return Si.info({ID:e.id,mediaType:bi,action:"isValidTrack()",description:r.message,error:r}),!0}function oo(){return ao.apply(this,arguments)}function ao(){return(ao=Lr(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Si.info({mediaType:bi,action:"loadProcessor()",description:"Creating and loading BNR module"}),t=new AudioContext,ro.isModuleAdded=!0,ro.audioContext=t,e.next=6,t.audioWorklet.addModule(ro.workletProcessorUrl);case 6:return ro.workletNode=new AudioWorkletNode(t,"noise-reduction-worklet-processor"),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function so(){return(so=Lr(p().mark((function e(t){var n,r,i,o,a,s,c,u,l,f;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Si.debug({ID:t.id,mediaType:bi,action:"enableBNR()",description:"Called"}),e.prev=1,io(t),(n=new MediaStream).addTrack(t),Si.info({ID:t.id,mediaType:bi,action:"enableBNR()",description:"Checking if BNR module is present already"}),!(i=ro.destinationTrack)||t.id!==i.id){e.next=12;break}throw o="BNR is enabled on the track already",a=new Error(o),Si.error({ID:t.id,mediaType:bi,action:"enableBNR()",description:o,error:a}),a;case 12:return ro.isModuleAdded&&(Si.debug({ID:t.id,mediaType:bi,action:"enableBNR()",description:"Disposing existing BNR module"}),(r=ro.workletNode).port.postMessage("DISPOSE")),Si.info({ID:t.id,mediaType:bi,action:"enableBNR()",description:"Creating worklet node, connecting source and destination streams"}),e.next=16,oo();case 16:return s=e.sent,(r=ro.workletNode).port.postMessage("ENABLE"),ro.sourceNode=s.createMediaStreamSource(n),ro.sourceNode.connect(r),ro.destinationStream=s.createMediaStreamDestination(),r.connect(ro.destinationStream),Si.info({ID:t.id,mediaType:bi,action:"enableBNR()",description:"Obtaining noise reduced track and returning"}),c=ro.destinationStream.stream,u=c.getAudioTracks(),l=(0,Nn.Z)(u,1),f=l[0],ro.destinationTrack=f,e.abrupt("return",f);case 30:throw e.prev=30,e.t0=e.catch(1),Si.error({ID:t.id,mediaType:bi,action:"enableBNR()",description:"Error in enableBNR",error:e.t0}),e.t0;case 34:case"end":return e.stop()}}),e,null,[[1,30]])})))).apply(this,arguments)}!function(e){e[e.MediaConnectionError=30001]="MediaConnectionError",e[e.SdpError=30002]="SdpError",e[e.IceGatheringError=30003]="IceGatheringError",e[e.SdpAnswerHandlingError=30004]="SdpAnswerHandlingError",e[e.SdpOfferCreationError=30005]="SdpOfferCreationError",e[e.SdpOfferHandlingError=30006]="SdpOfferHandlingError"}(no||(no={}));var co=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;(0,o.Z)(this,n);var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r=t.call(this,e),Nr((0,At.Z)(r),"code",void 0),r.name=i.name||"MediaConnectionError",r.cause=i.cause,r.code=i.code||no.MediaConnectionError,r}return(0,a.Z)(n)}((0,Lt.Z)(Error));function uo(e,t){var n=xt()(e);if(lr()){var r=lr()(e);t&&(r=r.filter((function(t){return Wn()(e,t).enumerable}))),n.push.apply(n,r)}return n}var lo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){(0,o.Z)(this,n);var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.call(this,e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uo(Object(n),!0).forEach((function(t){Nr(e,t,n[t])})):dr()?hr()(e,dr()(n)):uo(Object(n)).forEach((function(t){$n()(e,t,Wn()(n,t))}))}return e}({code:no.SdpError,name:"SdpError"},r))}return(0,a.Z)(n)}(co);function fo(e,t){var n=xt()(e);if(lr()){var r=lr()(e);t&&(r=r.filter((function(t){return Wn()(e,t).enumerable}))),n.push.apply(n,r)}return n}var po=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){(0,o.Z)(this,n);var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.call(this,e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fo(Object(n),!0).forEach((function(t){Nr(e,t,n[t])})):dr()?hr()(e,dr()(n)):fo(Object(n)).forEach((function(t){$n()(e,t,Wn()(n,t))}))}return e}({code:no.IceGatheringError,name:"IceGatheringError"},r))}return(0,a.Z)(n)}(lo);function ho(e,t){var n=xt()(e);if(lr()){var r=lr()(e);t&&(r=r.filter((function(t){return Wn()(e,t).enumerable}))),n.push.apply(n,r)}return n}var vo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){(0,o.Z)(this,n);var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.call(this,e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(n),!0).forEach((function(t){Nr(e,t,n[t])})):dr()?hr()(e,dr()(n)):ho(Object(n)).forEach((function(t){$n()(e,t,Wn()(n,t))}))}return e}({code:no.SdpAnswerHandlingError,name:"SdpAnswerHandlingError"},r))}return(0,a.Z)(n)}(lo);function mo(e,t){var n=xt()(e);if(lr()){var r=lr()(e);t&&(r=r.filter((function(t){return Wn()(e,t).enumerable}))),n.push.apply(n,r)}return n}var go=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){(0,o.Z)(this,n);var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.call(this,e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(n),!0).forEach((function(t){Nr(e,t,n[t])})):dr()?hr()(e,dr()(n)):mo(Object(n)).forEach((function(t){$n()(e,t,Wn()(n,t))}))}return e}({code:no.SdpOfferCreationError,name:"SdpOfferCreationError"},r))}return(0,a.Z)(n)}(lo);function yo(e,t){var n=xt()(e);if(lr()){var r=lr()(e);t&&(r=r.filter((function(t){return Wn()(e,t).enumerable}))),n.push.apply(n,r)}return n}var bo,wo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){(0,o.Z)(this,n);var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.call(this,e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yo(Object(n),!0).forEach((function(t){Nr(e,t,n[t])})):dr()?hr()(e,dr()(n)):yo(Object(n)).forEach((function(t){$n()(e,t,Wn()(n,t))}))}return e}({code:no.SdpOfferHandlingError,name:"SdpOfferHandlingError"},r))}return(0,a.Z)(n)}(lo),_o=v()({__proto__:null,get ErrorCode(){return no},IceGatheringError:po,MediaConnectionError:co,SdpAnswerHandlingError:vo,SdpError:lo,SdpOfferCreationError:go,SdpOfferHandlingError:wo}),Eo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n)}(Ti),So={info:function(){var e;return(e=console).info.apply(e,arguments)},log:function(){var e;return(e=console).log.apply(e,arguments)},error:function(){var e;return(e=console).error.apply(e,arguments)},warn:function(){var e;return(e=console).warn.apply(e,arguments)},trace:function(){var e;return(e=console).trace.apply(e,arguments)},debug:function(){var e;return(e=console).debug.apply(e,arguments)}},Ro=So,xo=function(e){Ro=e||So},Co=function(){return Ro},ko=function(e){return e?e.stack?"".concat(e.message,": ").concat(e.stack):"".concat(e):""},To="\\d+",Io="[!#$%&'*+\\-.^_`{|}~a-zA-Z0-9]+",Oo="\\S+",Ao=".+",Lo=(0,a.Z)((function e(){(0,o.Z)(this,e)})),Mo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this)).bandwidthType=e,i.bandwidth=r,i}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"b=".concat(this.bandwidthType,":").concat(this.bandwidth)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(t[1],Xn()(t[2],10))}}}]),n}(Lo);bo=Mo,Mo.BW_TYPE_REGEX="CT|AS|TIAS",Mo.regex=new RegExp("^(".concat(bo.BW_TYPE_REGEX,"):(").concat(To,")"));var Po,No=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).mids=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=group:BUNDLE ".concat(this.mids.join(" "))}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1].split(" "))}}]),n}(Lo);No.regex=new RegExp("^group:BUNDLE (".concat(Ao,")"));var Do=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i,a,s,c,u,l,f,d){var p;return(0,o.Z)(this,n),(p=t.call(this)).foundation=e,p.componentId=r,p.transport=i,p.priority=a,p.connectionAddress=s,p.port=c,p.candidateType=u,p.relAddr=l,p.relPort=f,p.candidateExtensions=d,p}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){var e="";return e+="a=candidate:".concat(this.foundation," ").concat(this.componentId," ").concat(this.transport," ").concat(this.priority," ").concat(this.connectionAddress," ").concat(this.port," typ ").concat(this.candidateType),this.relAddr&&(e+=" raddr ".concat(this.relAddr)),this.relPort&&(e+=" rport ".concat(this.relPort)),this.candidateExtensions&&(e+=" ".concat(this.candidateExtensions)),e}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(t[1],Xn()(t[2],10),t[3],Xn()(t[4],10),t[5],Xn()(t[6],10),t[7],t[8],t[9]?Xn()(t[9],10):void 0,t[10])}}}]),n}(Lo);Po=Do,Do.ICE_CHARS="[a-zA-Z0-9+/]+",Do.regex=new RegExp("^candidate:(".concat(Po.ICE_CHARS,") (").concat(To,") (").concat(Oo,") (").concat(To,") (").concat(Oo,") (").concat(To,") typ (").concat(Oo,")(?: raddr (").concat(Oo,"))?(?: rport (").concat(To,"))?(?: (").concat(Ao,"))?"));var Uo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i){var a;return(0,o.Z)(this,n),(a=t.call(this)).netType=e,a.addrType=r,a.ipAddr=i,a}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"c=".concat(this.netType," ").concat(this.addrType," ").concat(this.ipAddr)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(t[1],t[2],t[3])}}}]),n}(Lo);Uo.regex=new RegExp("^(".concat(Oo,") (").concat(Oo,") (").concat(Oo,")"));var Zo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).values=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=content:".concat(this.values.join(","))}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1].split(","))}}]),n}(Lo);Zo.regex=new RegExp("^content:(".concat(Ao,")$"));var jo,Fo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).direction=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=".concat(this.direction)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(Lo);Fo.regex=/^(sendrecv|sendonly|recvonly|inactive)$/;var Bo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i,a){var s;return(0,o.Z)(this,n),(s=t.call(this)).id=e,s.uri=r,s.direction=i,s.extensionAttributes=a,s}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){var e="";return e+="a=extmap:".concat(this.id),this.direction&&(e+="/".concat(this.direction)),e+=" ".concat(this.uri),this.extensionAttributes&&(e+=" ".concat(this.extensionAttributes)),e}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex),r=Xn()(t[1],10),i=t[2];return new n(r,t[3],i,t[4])}}}]),n}(Lo);jo=Bo,Bo.EXTMAP_DIRECTION="sendonly|recvonly|sendrecv|inactive",Bo.regex=new RegExp("^extmap:(".concat(To,")(?:/(").concat(jo.EXTMAP_DIRECTION,"))? (").concat(Oo,")(?: (").concat(Ao,"))?"));var Vo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).fingerprint=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=fingerprint:".concat(this.fingerprint)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(Lo);Vo.regex=new RegExp("^fingerprint:(".concat(Ao,")"));var qo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this)).payloadType=e,i.params=r,i}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){var e=this,t=gt()(this.params.keys()).map((function(t){return void 0!==e.params.get(t)?"".concat(t,"=").concat(e.params.get(t)):"".concat(t)})).join(";");return"a=fmtp:".concat(this.payloadType," ").concat(t)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10),function(e){e=e.replace(/^a=fmtp:\d+\x20/,"");var t=new(mr());return/^\d+([/-]\d+)+$/.test(e)?(t.set(e,void 0),t):(e.split(";").forEach((function(n){var r=n&&n.split("=");if(2!==r.length||!r[0]||!r[1])throw new Error("Fmtp params is invalid with ".concat(e));t.set(r[0],r[1])})),t)}(t[2]))}}}]),n}(Lo);qo.regex=new RegExp("^fmtp:(".concat(To,") (").concat(Ao,")"));var Wo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).options=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=ice-options:".concat(this.options.join(" "))}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1].split(" "))}}]),n}(Lo);Wo.regex=new RegExp("^ice-options:(".concat(Ao,")$"));var zo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).pwd=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=ice-pwd:".concat(this.pwd)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(Lo);zo.regex=new RegExp("^ice-pwd:(".concat(Oo,")$"));var Go=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).ufrag=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=ice-ufrag:".concat(this.ufrag)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(Lo);Go.regex=new RegExp("^ice-ufrag:(".concat(Oo,")$"));var Ho,$o=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).maxMessageSize=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=max-message-size:".concat(this.maxMessageSize)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10))}}}]),n}(Lo);$o.regex=new RegExp("^max-message-size:(".concat(To,")"));var Ko=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i,a){var s;return(0,o.Z)(this,n),(s=t.call(this)).type=e,s.port=r,s.protocol=i,s.formats=a,s}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"m=".concat(this.type," ").concat(this.port," ").concat(this.protocol," ").concat(this.formats.join(" "))}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(t[1],Xn()(t[2],10),t[3],t[4].split(" "))}}}]),n}(Lo);Ho=Ko,Ko.MEDIA_TYPE="audio|video|application",Ko.regex=new RegExp("^(".concat(Ho.MEDIA_TYPE,") (").concat(To,") (").concat(Oo,") (").concat(Ao,")"));var Yo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).mid=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=mid:".concat(this.mid)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(Lo);Yo.regex=new RegExp("^mid:(".concat(Oo,")$"));var Jo,Xo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i,a,s,c){var u;return(0,o.Z)(this,n),(u=t.call(this)).username=e,u.sessionId=r,u.sessionVersion=i,u.netType=a,u.addrType=s,u.ipAddr=c,u}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"o=".concat(this.username," ").concat(this.sessionId," ").concat(this.sessionVersion," ").concat(this.netType," ").concat(this.addrType," ").concat(this.ipAddr)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(t[1],t[2],Xn()(t[3],10),t[4],t[5],t[6])}}}]),n}(Lo);Xo.regex=new RegExp("^(".concat(Oo,") (").concat(Oo,") (").concat(To,") (").concat(Oo,") (").concat(Oo,") (").concat(Oo,")"));var Qo=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i){var a;return(0,o.Z)(this,n),(a=t.call(this)).id=e,a.direction=r,a.params=i,a}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){var e="";return e+="a=rid:".concat(this.id," ").concat(this.direction),this.params&&(e+=" ".concat(this.params)),e}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(t[1],t[2],t[3])}}}]),n}(Lo);Jo=Qo,Qo.RID_ID="[\\w-]+",Qo.RID_DIRECTION="\\bsend\\b|\\brecv\\b",Qo.regex=new RegExp("^rid:(".concat(Jo.RID_ID,") (").concat(Jo.RID_DIRECTION,")(?:").concat("\\s","(").concat(Ao,"))?"));var ea=function(e){(0,s.Z)(n,e);var t=Br(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=rtcp-mux"}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n}}]),n}(Lo);ea.regex=/^rtcp-mux$/;var ta,na=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this)).payloadType=e,i.feedback=r,i}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=rtcp-fb:".concat(this.payloadType," ").concat(this.feedback)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10),t[2])}}}]),n}(Lo);na.regex=new RegExp("^rtcp-fb:(".concat(To,") (").concat(Ao,")"));var ra=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i,a){var s;return(0,o.Z)(this,n),(s=t.call(this)).payloadType=e,s.encodingName=r,s.clockRate=i,s.encodingParams=a,s}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){var e="";return e+="a=rtpmap:".concat(this.payloadType," ").concat(this.encodingName,"/").concat(this.clockRate),this.encodingParams&&(e+="/".concat(this.encodingParams)),e}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10),t[2],Xn()(t[3],10),t[4])}}}]),n}(Lo);ta=ra,ra.NON_SLASH_TOKEN="[^\\s/]+",ra.regex=new RegExp("^rtpmap:(".concat(To,") (").concat(ta.NON_SLASH_TOKEN,")/(").concat(ta.NON_SLASH_TOKEN,")(?:/(").concat(ta.NON_SLASH_TOKEN,"))?"));var ia=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).port=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=sctp-port:".concat(this.port)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10))}}}]),n}(Lo);ia.regex=new RegExp("^sctp-port:(".concat(To,")"));var oa=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).info=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"i=".concat(this.info)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(Lo);oa.regex=new RegExp("(".concat(Ao,")"));var aa=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).name=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"s=".concat(this.name)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(Lo);aa.regex=new RegExp("^(".concat(Ao,")"));var sa=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).setup=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=setup:".concat(this.setup)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(Lo);sa.regex=/^setup:(actpass|active|passive)$/;var ca=function(){function e(t,n){(0,o.Z)(this,e),this.id=t,this.paused=n}return(0,a.Z)(e,[{key:"toString",value:function(){return this.paused?"~".concat(this.id):this.id}}]),e}(),ua=function(){function e(){(0,o.Z)(this,e),this.layers=[]}return(0,a.Z)(e,[{key:"addLayer",value:function(e){this.layers.push([e])}},{key:"addLayerWithAlternatives",value:function(e){this.layers.push(e)}},{key:"length",get:function(){return this.layers.length}},{key:"get",value:function(e){return this.layers[e]}},{key:"toString",value:function(){return this.layers.map((function(e){return e.map((function(e){return e.toString()})).join(",")})).join(";")}}],[{key:"fromString",value:function(t){var n=new e,r=t.split(";");if(1===r.length&&!r[0].trim())throw new Error("simulcast stream list empty");return r.forEach((function(e){if(!e)throw new Error("simulcast layer list empty");var t=e.split(","),r=[];t.forEach((function(e){if(!e||"~"===e)throw new Error("rid empty");var t="~"===e[0],n=t?e.substring(1):e;r.push(new ca(n,t))})),n.addLayerWithAlternatives(r)})),n}}]),e}(),la=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this)).sendLayers=e,i.recvLayers=r,i}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){var e="a=simulcast:";return this.sendLayers.length&&(e+="send ".concat(this.sendLayers.toString()),this.recvLayers.length&&(e+=" ")),this.recvLayers.length&&(e+="recv ".concat(this.recvLayers.toString())),e}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t,r,i=e.match(n.regex),o=i[3]&&i[4],a=i[1],s=ua.fromString(i[2]),c=new ua;if(o){if(a===i[3])return;c=ua.fromString(i[4])}return"send"===a?(t=s,r=c):(t=c,r=s),new n(t,r)}}}]),n}(Lo);la.regex=new RegExp("^simulcast:(send|recv) (".concat(Oo,")(?: (send|recv) (").concat(Oo,"))?"));var fa=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;(0,o.Z)(this,n);var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return(i=t.call(this)).ssrcId=e,i.attribute=r,i.attributeValue=a,i.attributeData=s,i}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){var e="a=ssrc:".concat(this.ssrcId," ").concat(this.attribute);return this.attributeValue&&(e+=":".concat(this.attributeValue)),this.attributeData&&(e+=" ".concat(this.attributeData)),e}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10),t[2],t[3],t[4])}}}]),n}(Lo);fa.regex=new RegExp("^ssrc:(".concat(To,") (").concat(Io,")(?::(").concat(Io,")?(?: (").concat(Oo,"))?)?$"));var da=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this)).semantics=e,i.ssrcs=r,i}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=ssrc-group:".concat(this.semantics," ").concat(this.ssrcs.join(" "))}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(t[1],t[2].split(" ").map((function(e){return Xn()(e,10)})))}}}]),n}(Lo);da.regex=new RegExp("^ssrc-group:(SIM|FID|FEC) ((?:".concat(To).concat("\\s","*)+)"));var pa=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this)).startTime=e,i.stopTime=r,i}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"t=".concat(this.startTime," ").concat(this.stopTime)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10),Xn()(t[2],10))}}}]),n}(Lo);pa.regex=new RegExp("^(".concat(To,") (").concat(To,")"));var ha=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).version=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"v=".concat(this.version)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10))}}}]),n}(Lo);ha.regex=new RegExp("^(".concat(To,")$"));var va=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).value=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"".concat(this.value)}}],[{key:"fromSdpLine",value:function(e){return new n(e.match(n.regex)[1])}}]),n}(Lo);va.regex=new RegExp("(".concat(Ao,")"));var ma=function(){function e(){(0,o.Z)(this,e),this.candidates=[]}return(0,a.Z)(e,[{key:"addLine",value:function(e){return e instanceof Go?(this.ufrag=e,!0):e instanceof zo?(this.pwd=e,!0):e instanceof Wo?(this.options=e,!0):e instanceof Do&&(this.candidates.push(e),!0)}},{key:"toLines",value:function(){var e=[];return this.ufrag&&e.push(this.ufrag),this.pwd&&e.push(this.pwd),this.options&&e.push(this.options),this.candidates.forEach((function(t){return e.push(t)})),e}}]),e}(),ga=function(){function e(t,n,r){(0,o.Z)(this,e),this.iceInfo=new ma,this.otherLines=[],this.type=t,this.port=n,this.protocol=r}return(0,a.Z)(e,[{key:"findOtherLine",value:function(e){return this.otherLines.find((function(t){return t instanceof e}))}},{key:"addLine",value:function(e){if(e instanceof No)throw new Error("Error: bundle group line not allowed in media description");return e instanceof Mo?(this.bandwidth=e,!0):e instanceof Yo?(this.mid=e.mid,!0):e instanceof Vo?(this.fingerprint=e.fingerprint,!0):e instanceof sa?(this.setup=e.setup,!0):e instanceof Uo?(this.connection=e,!0):e instanceof Zo?(this.content=e,!0):this.iceInfo.addLine(e)}}]),e}(),ya=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e.type,e.port,e.protocol)).fmts=[],r.fmts=e.formats,r}return(0,a.Z)(n,[{key:"toLines",value:function(){var e=[];return e.push(new Ko(this.type,this.port,this.protocol,this.fmts)),this.connection&&e.push(this.connection),this.bandwidth&&e.push(this.bandwidth),e.push.apply(e,(0,Pn.Z)(this.iceInfo.toLines())),this.fingerprint&&e.push(new Vo(this.fingerprint)),this.setup&&e.push(new sa(this.setup)),this.mid&&e.push(new Yo(this.mid)),this.content&&e.push(this.content),this.sctpPort&&e.push(new ia(this.sctpPort)),this.maxMessageSize&&e.push(new $o(this.maxMessageSize)),e.push.apply(e,(0,Pn.Z)(this.otherLines)),e}},{key:"addLine",value:function(e){if(zn((0,u.Z)(n.prototype),"addLine",this).call(this,e))return!0;if(e instanceof Ko)throw new Error("Error: tried passing a MediaLine to an existing MediaInfo");return e instanceof ia?(this.sctpPort=e.port,!0):e instanceof $o?(this.maxMessageSize=e.maxMessageSize,!0):(this.otherLines.push(e),!0)}}]),n}(ga),ba=function(){function e(t){(0,o.Z)(this,e),this.fmtParams=new(mr()),this.feedback=[],this.pt=t}return(0,a.Z)(e,[{key:"addLine",value:function(e){if(e instanceof ra)return this.name=e.encodingName,this.clockRate=e.clockRate,this.encodingParams=e.encodingParams,!0;if(e instanceof qo){if(this.fmtParams=new(mr())([].concat((0,Pn.Z)(gt()(this.fmtParams.entries())),(0,Pn.Z)(gt()(e.params.entries())))),e.params.has("apt")){var t=e.params.get("apt");this.primaryCodecPt=Xn()(t,10)}return!0}return e instanceof na&&(this.feedback.push(e.feedback),!0)}},{key:"toLines",value:function(){var e=this,t=[];return this.name&&this.clockRate&&t.push(new ra(this.pt,this.name,this.clockRate,this.encodingParams)),this.feedback.forEach((function(n){t.push(new na(e.pt,n))})),this.fmtParams.size>0&&t.push(new qo(this.pt,this.fmtParams)),t}}]),e}(),wa=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e.type,e.port,e.protocol)).pts=[],r.extMaps=[],r.rids=[],r.codecs=new(mr()),r.rtcpMux=!1,r.ssrcs=[],r.ssrcGroups=[],r.pts=e.formats.map((function(e){return Xn()(e,10)})),r.pts.forEach((function(e){return r.codecs.set(e,new ba(e))})),r}return(0,a.Z)(n,[{key:"toLines",value:function(){var e=[];return e.push(new Ko(this.type,this.port,this.protocol,this.pts.map((function(e){return"".concat(e)})))),this.connection&&e.push(this.connection),this.bandwidth&&e.push(this.bandwidth),e.push.apply(e,(0,Pn.Z)(this.iceInfo.toLines())),this.fingerprint&&e.push(new Vo(this.fingerprint)),this.setup&&e.push(new sa(this.setup)),this.mid&&e.push(new Yo(this.mid)),this.rtcpMux&&e.push(new ea),this.content&&e.push(this.content),this.extMaps.forEach((function(t){return e.push(t)})),this.rids.forEach((function(t){return e.push(t)})),this.simulcast&&e.push(this.simulcast),this.direction&&e.push(new Fo(this.direction)),this.codecs.forEach((function(t){return e.push.apply(e,(0,Pn.Z)(t.toLines()))})),e.push.apply(e,(0,Pn.Z)(this.ssrcs)),e.push.apply(e,(0,Pn.Z)(this.ssrcGroups)),e.push.apply(e,(0,Pn.Z)(this.otherLines)),e}},{key:"addLine",value:function(e){if(zn((0,u.Z)(n.prototype),"addLine",this).call(this,e))return!0;if(e instanceof Ko)throw new Error("Error: tried passing a MediaLine to an existing MediaInfo");if(e instanceof Fo)return this.direction=e.direction,!0;if(e instanceof Bo)return this.extMaps.push(e),!0;if(e instanceof Qo)return this.rids.push(e),!0;if(e instanceof ea)return this.rtcpMux=!0,!0;if(e instanceof la)return this.simulcast=e,!0;if(e instanceof ra||e instanceof qo||e instanceof na){var t=this.codecs.get(e.payloadType);if(!t)throw new Error("Error: got line for unknown codec: ".concat(e.toSdpLine()));return t.addLine(e),!0}return e instanceof fa?(this.ssrcs.push(e),!0):e instanceof da?(this.ssrcGroups.push(e),!0):(this.otherLines.push(e),!0)}},{key:"getCodecByPt",value:function(e){return this.codecs.get(e)}},{key:"removePt",value:function(e){var t=this,n=(0,Pn.Z)(this.codecs.values()).filter((function(t){return t.primaryCodecPt===e})).map((function(e){return e.pt})),r=[e].concat((0,Pn.Z)(n));r.forEach((function(e){t.codecs.delete(e)})),this.pts=this.pts.filter((function(e){return-1===r.indexOf(e)}))}}]),n}(ga),_a=function(){function e(){(0,o.Z)(this,e),this.groups=[],this.otherLines=[]}return(0,a.Z)(e,[{key:"addLine",value:function(e){return e instanceof ha?(this.version=e,!0):e instanceof Xo?(this.origin=e,!0):e instanceof aa?(this.sessionName=e,!0):e instanceof oa?(this.information=e,!0):e instanceof pa?(this.timing=e,!0):e instanceof Uo?(this.connection=e,!0):e instanceof Mo?(this.bandwidth=e,!0):e instanceof No?(this.groups.push(e),!0):(this.otherLines.push(e),!0)}},{key:"toLines",value:function(){var e=[];return this.version&&e.push(this.version),this.origin&&e.push(this.origin),this.sessionName&&e.push(this.sessionName),this.information&&e.push(this.information),this.connection&&e.push(this.connection),this.bandwidth&&e.push(this.bandwidth),this.timing&&e.push(this.timing),this.groups&&e.push.apply(e,(0,Pn.Z)(this.groups)),e.push.apply(e,(0,Pn.Z)(this.otherLines)),e}}]),e}(),Ea=function(){function e(){(0,o.Z)(this,e),this.session=new _a,this.media=[]}return(0,a.Z)(e,[{key:"avMedia",get:function(){return this.media.filter((function(e){return e instanceof wa}))}},{key:"toString",value:function(){var e=[];return e.push.apply(e,(0,Pn.Z)(this.session.toLines())),this.media.forEach((function(t){return e.push.apply(e,(0,Pn.Z)(t.toLines()))})),"".concat(e.map((function(e){return e.toSdpLine()})).join("\r\n"),"\r\n")}}]),e}(),Sa=new(function(e){(0,s.Z)(n,e);var t=Br(n);function n(){var e;return(0,o.Z)(this,n),(e=t.call(this)).addParser("v",ha.fromSdpLine),e.addParser("o",Xo.fromSdpLine),e.addParser("c",Uo.fromSdpLine),e.addParser("i",oa.fromSdpLine),e.addParser("m",Ko.fromSdpLine),e.addParser("s",aa.fromSdpLine),e.addParser("t",pa.fromSdpLine),e.addParser("b",Mo.fromSdpLine),e.addParser("a",ra.fromSdpLine),e.addParser("a",na.fromSdpLine),e.addParser("a",qo.fromSdpLine),e.addParser("a",Fo.fromSdpLine),e.addParser("a",Bo.fromSdpLine),e.addParser("a",Yo.fromSdpLine),e.addParser("a",Go.fromSdpLine),e.addParser("a",zo.fromSdpLine),e.addParser("a",Wo.fromSdpLine),e.addParser("a",Vo.fromSdpLine),e.addParser("a",sa.fromSdpLine),e.addParser("a",ia.fromSdpLine),e.addParser("a",$o.fromSdpLine),e.addParser("a",ea.fromSdpLine),e.addParser("a",No.fromSdpLine),e.addParser("a",Zo.fromSdpLine),e.addParser("a",Qo.fromSdpLine),e.addParser("a",Do.fromSdpLine),e.addParser("a",la.fromSdpLine),e.addParser("a",fa.fromSdpLine),e.addParser("a",da.fromSdpLine),e}return(0,a.Z)(n)}(function(){function e(){(0,o.Z)(this,e),this.parsers=new(mr())}return(0,a.Z)(e,[{key:"addParser",value:function(e,t){var n=this.parsers.get(e)||[];n.push(t),this.parsers.set(e,n)}},{key:"getParsers",value:function(e){return this.parsers.get(e)||[]}}]),e}()));function Ra(e){return e.length>2}function xa(e){var t=function(e,t){var n=[];return e.split(/(\r\n|\r|\n)/).filter(Ra).forEach((function(e){var r,i=e[0],o=e.slice(2),a=jr(t.getParsers(i));try{for(a.s();!(r=a.n()).done;){var s=(0,r.value)(o);if(s)return void n.push(s)}}catch(e){a.e(e)}finally{a.f()}var c=va.fromSdpLine(e);n.push(c)})),n}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sa),n=function(e){var t=new Ea,n=t.session;return e.forEach((function(e){if(e instanceof Ko){var r;if("audio"===e.type||"video"===e.type)r=new wa(e);else{if("application"!==e.type)throw new Error("Unhandled media type: ".concat(e.type));r=new ya(e)}t.media.push(r),n=r}else n.addLine(e)})),t}(t);return n}function Ca(e,t,n){var r=function(){var e=!!n;return e&&t?"sendrecv":e&&!t?"sendonly":!e&&t?"recvonly":"inactive"}();return{trackOrKind:n||e,direction:r}}function ka(e){var t,n=jr(e.codecs.values());try{for(n.s();!(t=n.n()).done;){var r;if("H264"===(null===(r=t.value.name)||void 0===r?void 0:r.toUpperCase()))return!0}}catch(e){n.e(e)}finally{n.f()}return!1}var Ta=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this),Nr((0,At.Z)(r),"value",void 0),r.value=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=".concat(this.value)}}],[{key:"fromSdpLine",value:function(){}}]),n}(Lo);function Ia(e){e.avMedia.forEach((function(e){e.extMaps.length=0}))}function Oa(e,t){var n=xa(t);return e.disableRtx&&function(e){e.avMedia.forEach((function(e){var t=[];e.codecs.forEach((function(e,n){"rtx"===e.name&&e.primaryCodecPt&&t.push(n)})),t.forEach((function(t){return e.codecs.delete(t)})),e.pts=e.pts.filter((function(e){return!t.includes(e)}))}))}(n),n.toString()}function Aa(e,t){var n=xa(t);return e.convertCLineToIPv4&&function(e){var t=function(e){"IP6"===(null==e?void 0:e.addrType)&&(e.addrType="IP4",e.ipAddr="0.0.0.0")};t(e.session.connection),e.media.forEach((function(e){t(e.connection)}))}(n),e.bandwidthLimits&&function(e,t){e.avMedia.forEach((function(e){"audio"===e.type?e.addLine(new Mo("TIAS",t.audio)):"video"===e.type&&e.addLine(new Mo("TIAS",t.video))}))}(n,e.bandwidthLimits),e.periodicKeyframes&&function(e,t){e.avMedia.forEach((function(e){"video"===e.type&&e.addLine(new Ta("periodic-keyframes:".concat(t)))}))}(n,e.periodicKeyframes),e.convertPort9to0&&function(e){e.media.forEach((function(e){9===e.port&&(e.port=0)}))}(n),e.addContentSlides&&function(e){var t=e.avMedia.filter((function(e){return"video"===e.type}));2===t.length&&t[1].addLine(new Zo(["slides"]))}(n),e.disableExtmap&&Ia(n),e.h264MaxFs&&function(e,t){var n={10:99,11:396,12:396,13:396,20:396,21:792,22:1620,30:1620,31:3600,32:5120,40:8192,41:8192,42:8704,50:22080,51:36864,52:36864,60:139264,61:139264,62:139264};e.avMedia.forEach((function(e){"video"===e.type&&e.codecs.forEach((function(e){var r;if("H264"===(null===(r=e.name)||void 0===r?void 0:r.toUpperCase())){var i=e.fmtParams.get("profile-level-id");if(i){var o=i.substring(0,4).toLowerCase(),a=Xn()(i.substring(4,6),16);if(!n[a])throw new Error("found unsupported h264 profile level id value in the SDP: ".concat(a));if(n[a]===t)return;if(n[a]<t)return e.fmtParams.set("max-fs","".concat(t)),void e.fmtParams.set("max-mbps","".concat(30*t));var s=xt()(n).reverse().find((function(e){return n[e]===t}));if(s){var c=Xn()(s,10).toString(16);return e.fmtParams.set("profile-level-id","".concat(o).concat(c)),void e.fmtParams.set("max-mbps","".concat(30*t))}throw new Error("unsupported maxFsValue: ".concat(t))}}}))}))}(n,e.h264MaxFs),n.toString()}function La(e,t){var n=xa(t);return e.startBitrate&&function(e,t){!function(e,t){e.avMedia.forEach((function(e){"video"===e.type&&e.codecs.forEach((function(e){var n;"H264"===(null===(n=e.name)||void 0===n?void 0:n.toUpperCase())&&t.forEach((function(t,n){return e.fmtParams.set(n,t)}))}))}))}(e,new(mr())([["x-google-start-bitrate",t.toString()]]))}(n,e.startBitrate),e.disableExtmap&&Ia(n),function(e){e.media.forEach((function(e){e.iceInfo.candidates=e.iceInfo.candidates.filter((function(e){return"xtls"!==e.transport.toLowerCase()}))}))}(n),n.toString()}function Ma(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!St()(t)&&xt()(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Wn()(t,n);$n()(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),v()(e)}function Pa(e,t,n,r){return new(n||(n=It()))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}var Na="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==qr?qr:"undefined"!=typeof self?self:{},Da={exports:{}};!function(e){!function(t){var n,r={};r.VERSION="1.6.1";var i={},o=function(e,t){return function(){return t.apply(e,arguments)}},a=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])!(e in r)&&n[t].hasOwnProperty(e)&&(r[e]=n[t][e]);return r},s=function(e,t){return{value:e,name:t}};r.TRACE=s(1,"TRACE"),r.DEBUG=s(2,"DEBUG"),r.INFO=s(3,"INFO"),r.TIME=s(4,"TIME"),r.WARN=s(5,"WARN"),r.ERROR=s(8,"ERROR"),r.OFF=s(99,"OFF");var c=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};c.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(r.TRACE,arguments)},debug:function(){this.invoke(r.DEBUG,arguments)},info:function(){this.invoke(r.INFO,arguments)},warn:function(){this.invoke(r.WARN,arguments)},error:function(){this.invoke(r.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(r.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(r.TIME,[e,"end"])},invoke:function(e,t){n&&this.enabledFor(e)&&n(t,a({level:e},this.context))}};var u,l=new c({filterLevel:r.OFF});(u=r).enabledFor=o(l,l.enabledFor),u.trace=o(l,l.trace),u.debug=o(l,l.debug),u.time=o(l,l.time),u.timeEnd=o(l,l.timeEnd),u.info=o(l,l.info),u.warn=o(l,l.warn),u.error=o(l,l.error),u.log=u.info,r.setHandler=function(e){n=e},r.setLevel=function(e){for(var t in l.setLevel(e),i)i.hasOwnProperty(t)&&i[t].setLevel(e)},r.getLevel=function(){return l.getLevel()},r.get=function(e){return i[e]||(i[e]=new c(a({name:e},l.context)))},r.createDefaultHandler=function(e){(e=e||{}).formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(i,o){i=Array.prototype.slice.call(i);var a,s=console.log;o.level===r.TIME?(a=(o.name?"["+o.name+"] ":"")+i[0],"start"===i[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):n(s,[a+": "+((new Date).getTime()-t[a])+"ms"])):(o.level===r.WARN&&console.warn?s=console.warn:o.level===r.ERROR&&console.error?s=console.error:o.level===r.INFO&&console.info?s=console.info:o.level===r.DEBUG&&console.debug?s=console.debug:o.level===r.TRACE&&console.trace&&(s=console.trace),e.formatter(i,o),n(s,i))}},r.useDefaults=function(e){r.setLevel(e&&e.defaultLevel||r.DEBUG),r.setHandler(r.createDefaultHandler(e))},r.setDefaults=r.useDefaults,e.exports?e.exports=r:(r._prevLogger=t.Logger,r.noConflict=function(){return t.Logger=r._prevLogger,r},t.Logger=r)}(Na)}(Da);var Ua,Za=Da.exports,ja=Za.get("webrtc-core");function Fa(e){return Pa(this,void 0,void 0,p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",navigator.mediaDevices.getUserMedia(e));case 1:case"end":return t.stop()}}),t)})))}function Ba(e){return navigator.mediaDevices.getDisplayMedia(e)}function Va(){return Pa(this,void 0,void 0,p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",navigator.mediaDevices.enumerateDevices());case 1:case"end":return e.stop()}}),e)})))}function qa(e){return Pa(this,void 0,void 0,p().mark((function t(){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],e.includes(Ua.VideoInput)&&n.push(navigator.permissions.query({name:"camera"})),e.includes(Ua.AudioInput)&&n.push(navigator.permissions.query({name:"microphone"})),t.abrupt("return",It().all(n));case 4:case"end":return t.stop()}}),t)})))}function Wa(e){return Pa(this,void 0,void 0,p().mark((function t(){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qa(e);case 3:if(!t.sent.every((function(e){return"granted"===e.state}))){t.next=6;break}return t.abrupt("return",!0);case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:return t.prev=10,t.next=13,Va();case 13:return n=t.sent,t.abrupt("return",n.filter((function(t){return e.includes(t.kind)})).every((function(e){return e.label})));case 17:t.prev=17,t.t1=t.catch(10);case 19:return t.abrupt("return",!1);case 20:case"end":return t.stop()}}),t,null,[[0,8],[10,17]])})))}function za(e,t){return Pa(this,void 0,void 0,p().mark((function n(){var r,i;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Wa(e);case 3:if(n.sent){n.next=13;break}return n.next=7,Fa({audio:e.includes(Ua.AudioInput),video:e.includes(Ua.VideoInput)});case 7:return r=n.sent,n.next=10,t();case 10:return i=n.sent,r.getTracks().forEach((function(e){return e.stop()})),n.abrupt("return",i);case 13:return n.abrupt("return",t());case 16:throw n.prev=16,n.t0=n.catch(0),ja.error(n.t0),new Error("Failed to ensure device permissions.");case 20:case"end":return n.stop()}}),n,null,[[0,16]])})))}ja.setLevel(Za.DEBUG),function(e){e.AudioInput="audioinput",e.AudioOutput="audiooutput",e.VideoInput="videoinput"}(Ua||(Ua={}));var Ga,Ha=v()({__proto__:null,get DeviceKind(){return Ua},getUserMedia:Fa,getDisplayMedia:Ba,enumerateDevices:Va,setOnDeviceChangeHandler:function(e){navigator.mediaDevices.ondevicechange=e},checkDevicePermissions:Wa,ensureDevicePermissions:za}),$a={exports:{}},Ka="object"===("undefined"==typeof Reflect?"undefined":(0,Gn.Z)(Reflect))?Reflect:null,Ya=Ka&&"function"==typeof yr()?yr():function(e,t,n){return Function.prototype.apply.call(e,t,n)};Ga=Ka&&"function"==typeof ir()?ir():lr()?function(e){return wr()(e).concat(lr()(e))}:function(e){return wr()(e)};var Ja=Er()||function(e){return e!=e};function Xa(){Xa.init.call(this)}$a.exports=Xa,$a.exports.once=function(e,t){return new(It())((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}cs(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&cs(e,"error",t,n)}(e,i,{once:!0})}))},Xa.EventEmitter=Xa,Xa.prototype._events=void 0,Xa.prototype._eventsCount=0,Xa.prototype._maxListeners=void 0;var Qa=10;function es(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+(0,Gn.Z)(e))}function ts(e){return void 0===e._maxListeners?Xa.defaultMaxListeners:e._maxListeners}function ns(e,t,n,r){var i,o,a,s;if(es(n),void 0===(o=e._events)?(o=e._events=er()(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=ts(e))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return e}function rs(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function is(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=rs.bind(r);return i.listener=n,r.wrapFn=i,i}function os(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):ss(i,i.length)}function as(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function ss(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function cs(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+(0,Gn.Z)(e));e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}$n()(Xa,"defaultMaxListeners",{enumerable:!0,get:function(){return Qa},set:function(e){if("number"!=typeof e||e<0||Ja(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Qa=e}}),Xa.init=function(){void 0!==this._events&&this._events!==nr()(this)._events||(this._events=er()(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Xa.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||Ja(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Xa.prototype.getMaxListeners=function(){return ts(this)},Xa.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)Ya(s,this,t);else{var c=s.length,u=ss(s,c);for(n=0;n<c;++n)Ya(u[n],this,t)}return!0},Xa.prototype.addListener=function(e,t){return ns(this,e,t,!1)},Xa.prototype.on=Xa.prototype.addListener,Xa.prototype.prependListener=function(e,t){return ns(this,e,t,!0)},Xa.prototype.once=function(e,t){return es(t),this.on(e,is(this,e,t)),this},Xa.prototype.prependOnceListener=function(e,t){return es(t),this.prependListener(e,is(this,e,t)),this},Xa.prototype.removeListener=function(e,t){var n,r,i,o,a;if(es(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=er()(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},Xa.prototype.off=Xa.prototype.removeListener,Xa.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=er()(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=er()(null):delete n[e]),this;if(0===arguments.length){var i,o=xt()(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=er()(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},Xa.prototype.listeners=function(e){return os(this,e,!0)},Xa.prototype.rawListeners=function(e){return os(this,e,!1)},Xa.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):as.call(e,t)},Xa.prototype.listenerCount=as,Xa.prototype.eventNames=function(){return this._eventsCount>0?Ga(this._events):[]};var us,ls=function(e){(0,s.Z)(n,e);var t=Br(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n)}($a.exports.EventEmitter);!function(e){e.Ended="ended",e.Muted="muted",e.PublishedStateUpdate="published-state-update",e.UnderlyingTrackChange="underlying-track-change",e.TrackConstraintsChange="track-constraints-change"}(us||(us={}));var fs=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).isPublished=!1,r.effects=new(mr()),r.originalStream=e,r.underlyingStream=e,r.label=r.underlyingStream.getTracks()[0].label,r.underlyingTrack.onended=function(){r.emit(us.Ended,{trackState:r.trackState})},r}return(0,a.Z)(n,[{key:"kind",get:function(){return this.underlyingTrack.kind}},{key:"id",get:function(){return this.underlyingTrack.id}},{key:"muted",get:function(){return!this.underlyingTrack.enabled}},{key:"published",get:function(){return this.isPublished}},{key:"underlyingStream",get:function(){return this._underlyingStream},set:function(e){this._underlyingStream=e}},{key:"trackState",get:function(){return{id:this.id,label:this.label,type:this.kind,muted:this.muted}}},{key:"underlyingTrack",get:function(){return this._underlyingStream.getTracks()[0]}},{key:"originalTrack",get:function(){return this.originalStream.getTracks()[0]}},{key:"setMuted",value:function(e){this.underlyingTrack.enabled===e&&(this.originalTrack.enabled=!e,this.underlyingTrack.enabled=!e,this.emit(us.Muted,{trackState:this.trackState}),ja.log("Local track ".concat(e?"muted":"unmuted",":"),{trackState:this.trackState}))}},{key:"setPublished",value:function(e){this.isPublished!==e&&(this.isPublished=e,this.emit(us.PublishedStateUpdate,{trackState:this.trackState,isPublished:e}),ja.log("Local track ".concat(e?"published":"unpublished",":"),{trackState:this.trackState}))}},{key:"stop",value:function(){this.originalTrack.stop(),this.underlyingTrack.stop(),this.emit(us.Ended,{trackState:this.trackState}),ja.log("Local track stopped:",{trackState:this.trackState})}},{key:"addEffect",value:function(e,t){return Pa(this,void 0,void 0,p().mark((function n(){return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.load(this.underlyingStream);case 2:this.underlyingStream=t.getUnderlyingStream(),this.effects.set(e,t),this.emit(us.UnderlyingTrackChange);case 5:case"end":return n.stop()}}),n,this)})))}},{key:"getEffect",value:function(e){var t=this.effects.get(e);return t||ja.log("No effect found with name '".concat(e,"'")),t}},{key:"disposeEffects",value:function(){this.effects.size>0&&(this.effects.forEach((function(e){return e.dispose()})),this.effects.clear(),this.underlyingStream=this.originalStream,this.emit(us.UnderlyingTrackChange))}},{key:"applyConstraints",value:function(e){return Pa(this,void 0,void 0,p().mark((function t(){var n,r=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ja.log("Applying constraints to local track:",e),n=this.underlyingTrack.applyConstraints(e).then((function(){r.emit(us.TrackConstraintsChange)})),t.abrupt("return",n);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getConstraints",value:function(){return this.underlyingTrack.getConstraints()}},{key:"getSettings",value:function(){return this.underlyingTrack.getSettings()}},{key:"getNumActiveSimulcastLayers",value:function(){var e=0;if("audio"===this.trackState.type)return e;var t=this.underlyingTrack.getSettings().height;return e=t<=180?1:t<=360?2:3}}]),n}(ls);fs.Events=us;var ds,ps=function(e){(0,s.Z)(n,e);var t=Br(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n)}(fs),hs=function(e){(0,s.Z)(n,e);var t=Br(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n)}(fs),vs=function(e){(0,s.Z)(n,e);var t=Br(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n)}(fs);!function(e){e.DEVICE_PERMISSION_DENIED="DEVICE_PERMISSION_DENIED",e.CREATE_CAMERA_TRACK_FAILED="CREATE_CAMERA_TRACK_FAILED",e.CREATE_MICROPHONE_TRACK_FAILED="CREATE_MICROPHONE_TRACK_FAILED"}(ds||(ds={}));var ms=(0,a.Z)((function e(t){(0,o.Z)(this,e);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.type=t,this.message=n}));function gs(e){return Pa(this,void 0,void 0,p().mark((function t(){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Fa({video:Rr()({},e)});case 3:n=t.sent,t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),new ms(ds.CREATE_CAMERA_TRACK_FAILED,"Failed to create camera track ".concat(t.t0));case 9:return t.abrupt("return",new ps(n));case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))}function ys(e){return Pa(this,void 0,void 0,p().mark((function t(){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Fa({audio:Rr()({},e)});case 3:n=t.sent,t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),new ms(ds.CREATE_MICROPHONE_TRACK_FAILED,"Failed to create microphone track ".concat(t.t0));case 9:return t.abrupt("return",new vs(n));case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))}function bs(){return Pa(this,void 0,void 0,p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ba({video:!0});case 2:return t=e.sent,e.abrupt("return",new hs(t));case 4:case"end":return e.stop()}}),e)})))}function ws(e){return Pa(this,void 0,void 0,p().mark((function t(){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,za([Ua.AudioInput,Ua.VideoInput],Va);case 3:n=t.sent,t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),new ms(ds.DEVICE_PERMISSION_DENIED,"Failed to ensure device permissions");case 9:return t.abrupt("return",n.filter((function(t){return!e||t.kind===e})));case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))}function _s(){return Pa(this,void 0,void 0,p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ws(Ua.AudioInput));case 1:case"end":return e.stop()}}),e)})))}function Es(){return Pa(this,void 0,void 0,p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ws(Ua.AudioOutput));case 1:case"end":return e.stop()}}),e)})))}function Ss(){return Pa(this,void 0,void 0,p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ws(Ua.VideoInput));case 1:case"end":return e.stop()}}),e)})))}var Rs,xs,Cs=Ha.setOnDeviceChangeHandler;!function(e){e.New="New",e.Closed="Closed",e.Connected="Connected",e.Connecting="Connecting",e.Disconnected="Disconnected",e.Failed="Failed"}(Rs||(Rs={})),function(e){e.ConnectionStateChanged="ConnectionStateChanged"}(xs||(xs={}));var ks=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).getCurrentStatesCallback=e,r.mediaConnectionState=r.evaluateMediaConnectionState(),r}return(0,a.Z)(n,[{key:"onConnectionStateChange",value:function(){this.handleAnyConnectionStateChange()}},{key:"onIceConnectionStateChange",value:function(){this.handleAnyConnectionStateChange()}},{key:"handleAnyConnectionStateChange",value:function(){var e=this.evaluateMediaConnectionState();e!==this.mediaConnectionState&&(this.mediaConnectionState=e,this.emit(xs.ConnectionStateChanged,this.mediaConnectionState))}},{key:"evaluateMediaConnectionState",value:function(){var e,t=this.getCurrentStatesCallback(),n=t.connectionState,r=t.iceState,i=[n,r];return e=i.every((function(e){return"new"===e}))?Rs.New:i.some((function(e){return"closed"===e}))?Rs.Closed:i.some((function(e){return"failed"===e}))?Rs.Failed:i.some((function(e){return"disconnected"===e}))?Rs.Disconnected:i.every((function(e){return"connected"===e||"completed"===e}))?Rs.Connected:Rs.Connecting,ja.log("iceConnectionState=".concat(r," connectionState=").concat(n," => ").concat(this.mediaConnectionState)),e}},{key:"getConnectionState",value:function(){return this.mediaConnectionState}}]),n}(ls);ks.Events=xs;var Ts=!0,Is=!0;function Os(e,t,n){var r=e.match(t);return r&&r.length>=n&&Xn()(r[n],10)}function As(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new(mr())),this._eventMap[t].set(r,o),i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===xt()(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},$n()(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function Ls(e){return"boolean"!=typeof e?new Error("Argument type: "+(0,Gn.Z)(e)+". Please use a boolean."):(Ts=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Ms(e){return"boolean"!=typeof e?new Error("Argument type: "+(0,Gn.Z)(e)+". Please use a boolean."):(Is=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Ps(){if("object"===("undefined"==typeof window?"undefined":(0,Gn.Z)(window))){if(Ts)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function Ns(e,t){Is&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Ds(e){return"[object Object]"===Object.prototype.toString.call(e)}function Us(e){return Ds(e)?xt()(e).reduce((function(t,n){var r=Ds(e[n]),i=r?Us(e[n]):e[n],o=r&&!xt()(i).length;return void 0===i||o?t:Rr()(t,(0,f.Z)({},n,i))}),{}):e}function Zs(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),xt()(t).forEach((function(r){r.endsWith("Id")?Zs(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){Zs(e,e.get(t),n)}))})))}function js(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new(mr());if(null===t)return i;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&Zs(e,n,i)}))})),i}var Fs=Ps;function Bs(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!==(0,Gn.Z)(e)||e.mandatory||e.optional)return e;var t={};return xt()(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===(0,Gn.Z)(e[n])?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),(o={})[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(kt()(e)))&&"object"===(0,Gn.Z)(e.audio)){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};o((e=JSON.parse(kt()(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===(0,Gn.Z)(e.video)){var a=e.video.facingMode;a=a&&("object"===(0,Gn.Z)(a)?a:{ideal:a});var s,c=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||c))if(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?s=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(s=["front"]),s)return n.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return s.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&s.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=a.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),Fs("chrome: "+kt()(e)),i(e)}));e.video=r(e.video)}return Fs("chrome: "+kt()(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){var a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return i(e,(function(e){return a(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return It().reject(o(e))}))}))}}}}function Vs(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function qs(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){$n()(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else As(e,"track",(function(e){return e.transceiver||$n()(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function Ws(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},$n()(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function zs(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],o=n[2];if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new(mr())(xt()(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){return t.apply(this,[function(e){i(s(a(e)))},r])}return new(It())((function(n,r){t.apply(e,[function(e){n(s(a(e)))},r])})).then(i,o)}}}function Gs(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return js(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),As(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return js(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,o=arguments[0];return this.getSenders().forEach((function(e){e.track===o&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===o&&(n?r=!0:n=e),e.track===o})),r||t&&n?It().reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():It().reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function Hs(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},xt()(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&xt()(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}function $s(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Hs(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),It().resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var a=new e.MediaStream([t]);this._streams[n.id]=a,this._reverseStreams[a.id]=n,this.addStream(a)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=(0,f.Z)({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var r=s(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return s(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){var n=t.sdp;return xt()(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var a=Wn()(e.RTCPeerConnection.prototype,"localDescription");$n()(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},xt()(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var n=t.sdp;return xt()(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function Ks(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=(0,f.Z)({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}))}function Ys(e,t){As(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var Js=v()({__proto__:null,shimMediaStream:Vs,shimOnTrack:qs,shimGetSendersWithDtmf:Ws,shimGetStats:zs,shimSenderReceiverGetStats:Gs,shimAddTrackRemoveTrackWithNative:Hs,shimAddTrackRemoveTrack:$s,shimPeerConnection:Ks,fixNegotiationNeeded:Ys,shimGetUserMedia:Bs,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function Xs(e,t){var n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){Ns("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===(0,Gn.Z)(e)&&"object"===(0,Gn.Z)(e.audio)&&(e=JSON.parse(kt()(e)),i(e.audio,"autoGainControl","mozAutoGainControl"),i(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},r&&r.prototype.getSettings){var a=r.prototype.getSettings;r.prototype.getSettings=function(){var e=a.apply(this,arguments);return i(e,"mozAutoGainControl","autoGainControl"),i(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(0,Gn.Z)(e)&&(e=JSON.parse(kt()(e)),i(e,"autoGainControl","mozAutoGainControl"),i(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function Qs(e){"object"===(0,Gn.Z)(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&$n()(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function ec(e,t){if("object"===(0,Gn.Z)(e)&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=(0,f.Z)({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),i=e[0],o=e[1],a=e[2];return r.apply(this,[i||null]).then((function(e){if(t.version<53&&!o)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,r){e.set(r,Rr()({},t,{type:n[t.type]||t.type}))}))}return e})).then(o,a)}}}function tc(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):It().resolve(new(mr()))}}}function nc(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),As(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function rc(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;Ns("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function ic(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function oc(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]);var n=(e=(0,Pn.Z)(e)).length>0;n&&e.forEach((function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(Yn()(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(Yn()(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();(!("encodings"in o)||1===o.encodings.length&&0===xt()(o.encodings[0]).length)&&(o.encodings=e,i.sendEncodings=e,this.setParametersPromises.push(i.setParameters(o).then((function(){delete i.sendEncodings})).catch((function(){delete i.sendEncodings}))))}return r})}}function ac(e){if("object"===(0,Gn.Z)(e)&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function sc(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?It().all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function cc(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?It().all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}var uc=v()({__proto__:null,shimOnTrack:Qs,shimPeerConnection:ec,shimSenderGetStats:tc,shimReceiverGetStats:nc,shimRemoveStream:rc,shimRTCDataChannel:ic,shimAddTransceiver:oc,shimGetParameters:ac,shimCreateOffer:sc,shimCreateAnswer:cc,shimGetUserMedia:Xs,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,It().reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}});function lc(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function fc(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){$n()(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function dc(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),It().resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),It().resolve()):i};var s=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),It().resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),It().resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),It().resolve()):r},t.addIceCandidate=s}}function pc(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(hc(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function hc(e){return e&&void 0!==e.video?Rr()({},e,{video:Us(e.video)}):e}function vc(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(Ns("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(kt()(o))).urls=o.url,delete o.url,r.push(o)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&$n()(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function mc(e){"object"===(0,Gn.Z)(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&$n()(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function gc(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function yc(e){"object"!==(0,Gn.Z)(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var bc=v()({__proto__:null,shimLocalStreamsAPI:lc,shimRemoteStreamsAPI:fc,shimCallbacksAPI:dc,shimGetUserMedia:pc,shimConstraints:hc,shimRTCIceServerUrls:vc,shimTrackEventTransceiver:mc,shimCreateOfferLegacy:gc,shimAudioContext:yc}),wc={exports:{}};!function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:Xn()(t[3],10),ip:t[4],address:t[4],port:Xn()(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=Xn()(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation);var n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:Xn()(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=Xn()(t[1],10),n.channels=3===t.length?Xn()(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:Xn()(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&xt()(e.parameters).length){var r=[];xt()(e.parameters).forEach((function(t){void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:Xn()(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return Xn()(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:Xn()(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===(0,Gn.Z)(e.keyParams)?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},t.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],a=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=t.parseRtpMap(a),c=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var i=0;return n.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],i=t.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return Xn()(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:Xn()(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),o&&((t=JSON.parse(kt()(t))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?Xn()(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*Xn()(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;var o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(n=i[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");i.length>0&&(n=Xn()(i[0].substr(19),10)),isNaN(n)&&(n=65536);var o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:Xn()(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};var a=t.matchPrefix(e,"a=sctpmap:");if(a.length>0){var s=a[0].substr(10).split(" ");return{port:Xn()(s[0],10),protocol:s[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var i=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){for(var r=t.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:Xn()(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:Xn()(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t}(wc);var _c=wc.exports,Ec=Ma({__proto__:null,default:_c},[wc.exports]);function Sc(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(0,Gn.Z)(e)&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(kt()(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=_c.parseCandidate(e.candidate),i=Rr()(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,As(e,"icecandidate",(function(t){return t.candidate&&$n()(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function Rc(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||$n()(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e,r;(this._sctp=null,"chrome"===t.browser&&t.version>=76)&&("plan-b"===this.getConfiguration().sdpSemantics&&$n()(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}));if(function(e){if(!e||!e.sdp)return!1;var t=_c.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=_c.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){var i,o=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=Xn()(t[1],10);return n!=n?-1:n}(arguments[0]),a=(e=o,r=65536,"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r),s=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=_c.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=Xn()(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],o);i=0===a&&0===s?Number.POSITIVE_INFINITY:0===a||0===s?Math.max(a,s):Math.min(a,s);var c={};$n()(c,"maxMessageSize",{get:function(){return i}}),this._sctp=c}return n.apply(this,arguments)}}}function xc(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},As(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function Cc(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;$n()(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),$n()(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function kc(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}}function Tc(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?It().resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),It().resolve())})}}function Ic(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this,t=arguments[0]||{};if("object"!==(0,Gn.Z)(t)||t.type&&t.sdp)return n.apply(this,arguments);if(!(t={type:t.type,sdp:t.sdp}).type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":t.type="offer";break;default:t.type="answer"}return t.sdp||"offer"!==t.type&&"answer"!==t.type?n.apply(this,[t]):("offer"===t.type?this.createOffer:this.createAnswer).apply(this).then((function(t){return n.apply(e,[t])}))})}}var Oc,Ac,Lc=v()({__proto__:null,shimRTCIceCandidate:Sc,shimMaxMessageSize:Rc,shimSendThrowTypeError:xc,shimConnectionState:Cc,removeExtmapAllowMixed:kc,shimAddIceCandidateNullOrEmpty:Tc,shimParameterlessSetLocalDescription:Ic});!function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},n=Ps,r=function(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=Os(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=Os(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=Os(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:Lc,extractVersion:Os,disableLog:Ls,disableWarnings:Ms,sdp:Ec};switch(r.browser){case"chrome":if(!Js||!Ks||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Js,Tc(e,r),Ic(e),Bs(e,r),Vs(e),Ks(e,r),qs(e),$s(e,r),Ws(e),zs(e),Gs(e),Ys(e,r),Sc(e),Cc(e),Rc(e,r),xc(e),kc(e,r);break;case"firefox":if(!uc||!ec||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=uc,Tc(e,r),Ic(e),Xs(e,r),ec(e,r),Qs(e),rc(e),tc(e),nc(e),ic(e),oc(e),ac(e),sc(e),cc(e),Sc(e),Cc(e),Rc(e,r),xc(e);break;case"safari":if(!bc||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=bc,Tc(e,r),Ic(e),vc(e),gc(e),dc(e),lc(e),fc(e),mc(e),pc(e),yc(e),Sc(e),Rc(e,r),xc(e),kc(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window}),function(e){e.Audio="audio",e.Video="video"}(Oc||(Oc={})),function(e){e.IceGatheringStateChange="icegatheringstatechange",e.ConnectionStateChange="connectionstatechange"}(Ac||(Ac={}));var Mc,Pc=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this),ja.log("PeerConnection init"),r.pc=function(e){return new RTCPeerConnection(e)}(e),r.connectionStateHandler=new ks((function(){return{connectionState:r.pc.connectionState,iceState:r.pc.iceConnectionState}})),r.connectionStateHandler.on(ks.Events.ConnectionStateChanged,(function(e){r.emit(n.Events.ConnectionStateChange,e)})),r.pc.oniceconnectionstatechange=function(){return r.connectionStateHandler.onIceConnectionStateChange()},r.pc.onconnectionstatechange=function(){return r.connectionStateHandler.onConnectionStateChange()},r.pc.onicegatheringstatechange=function(e){r.emit(n.Events.IceGatheringStateChange,e)},r}return(0,a.Z)(n,[{key:"getUnderlyingRTCPeerConnection",value:function(){return this.pc}},{key:"getConnectionState",value:function(){return this.connectionStateHandler.getConnectionState()}},{key:"addTrack",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.pc).addTrack.apply(t,[e].concat(r))}},{key:"addTransceiver",value:function(e,t){return this.pc.addTransceiver(e,t)}},{key:"removeTrack",value:function(e){this.pc.removeTrack(e)}},{key:"createDataChannel",value:function(e,t){return this.pc.createDataChannel(e,t)}},{key:"createAnswer",value:function(e){return Pa(this,void 0,void 0,p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.pc.createAnswer(e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"createOffer",value:function(e){return Pa(this,void 0,void 0,p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.pc.createOffer(e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"setLocalDescription",value:function(e){return Pa(this,void 0,void 0,p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.pc.setLocalDescription(e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"setRemoteDescription",value:function(e){return Pa(this,void 0,void 0,p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.pc.setRemoteDescription(e));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"close",value:function(){this.pc.close()}},{key:"getLocalDescription",value:function(){return this.pc.localDescription}},{key:"getRemoteDescription",value:function(){return this.pc.remoteDescription}},{key:"getSenders",value:function(){return this.pc.getSenders()}},{key:"getTransceivers",value:function(){return this.pc.getTransceivers()}},{key:"getStats",value:function(e){return this.pc.getStats(e)}},{key:"iceGatheringState",get:function(){return this.pc.iceGatheringState}},{key:"getCurrentConnectionType",value:function(){var e;return Pa(this,void 0,void 0,p().mark((function t(){var n,r,i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("connected"===this.pc.iceConnectionState||"completed"===this.pc.iceConnectionState){t.next=3;break}throw new Error("Ice connection is not established");case 3:return n=new(cr()),r=[],t.next=7,this.pc.getStats();case 7:if(t.sent.forEach((function(e){var t;"candidate-pair"===e.type&&"succeeded"===(null===(t=e.state)||void 0===t?void 0:t.toLowerCase())&&n.add(e.localCandidateId),"local-candidate"===e.type&&r.push(e)})),i=r.find((function(e){return n.has(e.id)}))){t.next=11;break}return t.abrupt("return","unknown");case 11:if(!i.relayProtocol){t.next=13;break}return t.abrupt("return","TURN-".concat(i.relayProtocol.toUpperCase()));case 13:return t.abrupt("return",null===(e=i.protocol)||void 0===e?void 0:e.toUpperCase());case 14:case"end":return t.stop()}}),t,this)})))}}]),n}(ls);Pc.Events=Ac,function(e){e.H264="video/H264",e.AV1="video/AV1",e.OPUS="audio/opus"}(Mc||(Mc={}));var Nc;function Dc(e,t){return xt()(t).every((function(n){if("clockRate"===n||"name"===n)return e[n]===t[n];if("fmtParams"===n){var r=e[n],i=t[n],o=(0,Pn.Z)(r.keys()).some((function(e){return"level-asymmetry-allowed"===e&&"1"===i.get(e)&&"1"===r.get(e)}));return(0,Pn.Z)(r.keys()).every((function(e){return i.get(e)&&"profile-level-id"===e?function(e,t,n){var r=Cr()("0x".concat(e),16),i=Cr()("0x".concat(t),16),o=r>>16,a=i>>16,s=(65280&r)>>8,c=(65280&i)>>8;return(o===a&&s===c||66===o&&66===a&&(64&s)==(64&c))&&(!!n||(255&r)<=(255&i))}(r.get(e),i.get(e),o):"packetization-mode"!==e||r.get(e)===i.get(e)}))}return!0}))}function Uc(e,t){return 0===t?e:Uc(t,e%t)}function Zc(e,t){var n=Uc(e[0],e[1]),r=e[0]/n,i=e[1]/n;return Math.floor(Math.sqrt(16*t*16/(r*i)))*i}!function(e){e[e.NB=12e3]="NB",e[e.WB=2e4]="WB",e[e.FB=4e4]="FB",e[e.FB_MONO_MUSIC=64e3]="FB_MONO_MUSIC",e[e.FB_STEREO_MUSIC=128e3]="FB_STEREO_MUSIC"}(Nc||(Nc={}));var jc="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==qr?qr:"undefined"!=typeof self?self:{},Fc={exports:{}};!function(e){!function(t){var n,r={};r.VERSION="1.6.1";var i={},o=function(e,t){return function(){return t.apply(e,arguments)}},a=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])!(e in r)&&n[t].hasOwnProperty(e)&&(r[e]=n[t][e]);return r},s=function(e,t){return{value:e,name:t}};r.TRACE=s(1,"TRACE"),r.DEBUG=s(2,"DEBUG"),r.INFO=s(3,"INFO"),r.TIME=s(4,"TIME"),r.WARN=s(5,"WARN"),r.ERROR=s(8,"ERROR"),r.OFF=s(99,"OFF");var c=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};c.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(r.TRACE,arguments)},debug:function(){this.invoke(r.DEBUG,arguments)},info:function(){this.invoke(r.INFO,arguments)},warn:function(){this.invoke(r.WARN,arguments)},error:function(){this.invoke(r.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(r.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(r.TIME,[e,"end"])},invoke:function(e,t){n&&this.enabledFor(e)&&n(t,a({level:e},this.context))}};var u,l=new c({filterLevel:r.OFF});(u=r).enabledFor=o(l,l.enabledFor),u.trace=o(l,l.trace),u.debug=o(l,l.debug),u.time=o(l,l.time),u.timeEnd=o(l,l.timeEnd),u.info=o(l,l.info),u.warn=o(l,l.warn),u.error=o(l,l.error),u.log=u.info,r.setHandler=function(e){n=e},r.setLevel=function(e){for(var t in l.setLevel(e),i)i.hasOwnProperty(t)&&i[t].setLevel(e)},r.getLevel=function(){return l.getLevel()},r.get=function(e){return i[e]||(i[e]=new c(a({name:e},l.context)))},r.createDefaultHandler=function(e){(e=e||{}).formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(i,o){i=Array.prototype.slice.call(i);var a,s=console.log;o.level===r.TIME?(a=(o.name?"["+o.name+"] ":"")+i[0],"start"===i[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):n(s,[a+": "+((new Date).getTime()-t[a])+"ms"])):(o.level===r.WARN&&console.warn?s=console.warn:o.level===r.ERROR&&console.error?s=console.error:o.level===r.INFO&&console.info?s=console.info:o.level===r.DEBUG&&console.debug?s=console.debug:o.level===r.TRACE&&console.trace&&(s=console.trace),e.formatter(i,o),n(s,i))}},r.useDefaults=function(e){r.setLevel(e&&e.defaultLevel||r.DEBUG),r.setHandler(r.createDefaultHandler(e))},r.setDefaults=r.useDefaults,e.exports?e.exports=r:(r._prevLogger=t.Logger,r.noConflict=function(){return t.Logger=r._prevLogger,r},t.Logger=r)}(jc)}(Fc);var Bc,Vc=Fc.exports;Vc.useDefaults({defaultLevel:Vc.DEBUG,formatter:function(e,t){e.unshift("[".concat(t.name,"] "))}}),function(e){e.Multistream="multistream"}(Bc||(Bc={}));var qc,Wc=function(){function e(t,n){(0,o.Z)(this,e),this.msgType=t,this.payload=n}return(0,a.Z)(e,null,[{key:"fromJson",value:function(t){return t.msgType&&t.payload?new e(t.msgType,t.payload):null}}]),e}();!function(e){e.Scr="scr",e.ScrAck="scrAck",e.ActiveSpeakerNotification="activeSpeakerNotification",e.SourceIndication="sourceIndication",e.SourceIndicationAck="sourceIndicationAck"}(qc||(qc={}));var zc=function(){function e(t,n,r){(0,o.Z)(this,e),this.mediaFamily=t,this.mediaContent=n,this.payload=r}return(0,a.Z)(e,[{key:"toString",value:function(){return"JmpMsg(mediaFamily=".concat(this.mediaFamily,", mediaContent=").concat(this.mediaContent,", payload=").concat(this.payload,")")}}]),e}();function Gc(e){var t=e;return Boolean(t.mediaContent&&t.mediaFamily&&t.payload&&function(e){var t=e;return Boolean(t.msgType&&t.payload)}(t.payload))}var Hc=function(){function e(t){(0,o.Z)(this,e),this.scrSeqNum=t}return(0,a.Z)(e,[{key:"toString",value:function(){return"JmpScrAckMsg(seqNum=".concat(this.scrSeqNum,")")}}]),e}();var $c=function(){function e(t,n){(0,o.Z)(this,e),this.seqNum=t,this.requests=n}return(0,a.Z)(e,[{key:"toString",value:function(){return"JmpScrMsg(seqNum=".concat(this.seqNum,", requests=[").concat(this.requests,"])")}}]),e}();var Kc=function(){function e(t,n,r,i){(0,o.Z)(this,e);var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.policy=t,this.policySpecificInfo=n,this.ids=r,this.maxPayloadBitsPerSecond=i,this.codecInfos=a}return(0,a.Z)(e,[{key:"toString",value:function(){return"Request(policy=".concat(this.policy,", info=").concat(this.policySpecificInfo,", ids=[").concat(this.ids,"], maxPayloadBitsPerSecond=[").concat(this.maxPayloadBitsPerSecond,"], codecInfos=[").concat(this.codecInfos,"])")}}]),e}();function Yc(e){return Boolean(e.csi)}var Jc,Xc,Qc,eu,tu=function(){function e(t){(0,o.Z)(this,e),this.sourceIndicationSeqNum=t}return(0,a.Z)(e,[{key:"toString",value:function(){return"SourceIndicationAckMsg(sourceIndicationSeqNum=".concat(this.sourceIndicationSeqNum,")")}}]),e}();function nu(){return e=0,t=8388607,Math.floor(Math.random()*(t-e+1))+e;var e,t}function ru(e,t){return t<<8|(e===Jc.Audio?0:1)}function iu(e,t){return e===Jc.Video&&t===Xc.Main?eu.VideoMain:e===Jc.Video&&t===Xc.Slides?eu.VideoSlides:e===Jc.Audio&&t===Xc.Main?eu.AudioMain:eu.AudioSlides}function ou(e){return[eu.VideoMain,eu.VideoSlides].includes(e)?Jc.Video:Jc.Audio}function au(e){return[eu.VideoMain,eu.AudioMain].includes(e)?Xc.Main:Xc.Slides}!function(e){e.Audio="AUDIO",e.Video="VIDEO"}(Jc||(Jc={})),function(e){e.Main="MAIN",e.Slides="SLIDES"}(Xc||(Xc={})),function(e){e.ActiveSpeaker="active-speaker",e.ReceiverSelected="receiver-selected"}(Qc||(Qc={})),function(e){e.VideoMain="VIDEO-MAIN",e.VideoSlides="VIDEO-SLIDES",e.AudioMain="AUDIO-MAIN",e.AudioSlides="AUDIO-SLIDES"}(eu||(eu={}));var su=function(e){return 0===e||e};function cu(e,t){var n=xt()(e),r=xt()(t);return n.length===r.length&&n.every((function(n){return e[n]===t[n]}))}var uu=function(){function e(t,n,r,i){(0,o.Z)(this,e),this.seqNum=t,this.numTotalSources=n,this.numLiveSources=r,this.sources=i}return(0,a.Z)(e,[{key:"sourcesToString",value:function(){return this.sources.map((function(e){return"Source(id=".concat(e.id," state=").concat(e.state," ").concat(e.csi?"csi=".concat(e.csi):"",")")})).join(", ")}},{key:"toString",value:function(){return"SourceIndication(seqNum=".concat(this.seqNum," numTotalSources=").concat(this.numTotalSources," numLiveSources=").concat(this.numLiveSources," sources=[").concat(this.sourcesToString(),"])")}}]),e}();function lu(e){var t=e;return Boolean(t.id&&function(e){var t=e;return(!t.mid||!t.ssrc)&&(Boolean(t.mid)||Boolean(t.ssrc))}(t.id)&&["no source","invalid source","live","avatar","bandwidth disabled"].includes(t.state))}var fu,du=function(){function e(t,n,r,i,a){(0,o.Z)(this,e),this.timerHandle=void 0,this.msg=t,this.numRetransmitsLeft=n,this.retransmitIntervalMs=r,this.transmitCallback=i,this.expirationCallback=a,this.scheduleTimer()}return(0,a.Z)(e,[{key:"onTimer",value:function(){var e;this.numRetransmitsLeft>0?(--this.numRetransmitsLeft,this.transmitCallback(this.msg),this.scheduleTimer()):null===(e=this.expirationCallback)||void 0===e||e.call(this,this.msg)}},{key:"scheduleTimer",value:function(){var e=this;this.timerHandle=window.setTimeout((function(){return e.onTimer()}),this.retransmitIntervalMs)}},{key:"cancel",value:function(){this.timerHandle&&clearTimeout(this.timerHandle),this.timerHandle=void 0}}]),e}();!function(e){e.SourceIndication="source-indication",e.ActiveSpeaker="active-speaker",e.ScrRequestReceived="scr-request-received"}(fu||(fu={}));var pu=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;(0,o.Z)(this,n);var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:250;return(i=t.call(this)).currScrSeqNum=1,i.currSourceIndicationSeqNum=1,i.txCallback=void 0,i.lastSentScr=void 0,i.lastSentScrAck=void 0,i.lastReceivedScr=void 0,i.mediaFamily=e,i.mediaContent=r,i.logger=Vc.get("JmpSession ".concat(i.mediaFamily,"-").concat(i.mediaContent)),i.maxNumRetransmits=a,i.retransmitIntervalMs=s,i}return(0,a.Z)(n,[{key:"getLogger",value:function(){return this.logger}},{key:"sendRequests",value:function(e){var t,n=this,r=new $c(this.currScrSeqNum++,e),i=new zc(this.mediaFamily,this.mediaContent,{msgType:qc.Scr,payload:r});this.sendJmpMsg(i),null===(t=this.lastSentScr)||void 0===t||t.cancel(),this.lastSentScr=new du(r,this.maxNumRetransmits,this.retransmitIntervalMs,(function(e){return n.sendJmpScr(e)}),(function(e){n.logger.warn("Retransmits for message expired: ".concat(e))}))}},{key:"updateSourceIndication",value:function(e,t,n){var r,i=this,o=n.filter((function(e){var t;return null===(t=i.lastReceivedScr)||void 0===t?void 0:t.requests.some((function(t){return t.ids.find((function(t){return cu(t,e.id)}))}))})),a=new uu(this.currSourceIndicationSeqNum++,e,t,o),s=new zc(this.mediaFamily,this.mediaContent,{msgType:qc.SourceIndication,payload:a});this.sendJmpMsg(s),null===(r=this.lastSentSourceIndication)||void 0===r||r.cancel(),this.lastSentSourceIndication=new du(a,this.maxNumRetransmits,this.retransmitIntervalMs,(function(e){return i.sendSourceIndication(e)}),(function(e){i.logger.warn("Retransmits for message expired:",e)}))}},{key:"receive",value:function(e){var t,n,r,i,o,a,s,c;if(e.mediaContent===this.mediaContent&&e.mediaFamily===this.mediaFamily){this.logger.debug("Received JmpMsg",e);var u,l=e.payload;if(l.msgType===qc.Scr){var f=l.payload;if(u=f,!Boolean(u.seqNum&&u.requests))return void this.logger.error("Received invalid SCR:",f);if(this.lastReceivedScr&&f.seqNum<(null===(t=this.lastReceivedScr)||void 0===t?void 0:t.seqNum))this.logger.info("Received old SCR, ignoring");else if(this.lastReceivedScr&&f.seqNum===this.lastReceivedScr.seqNum)this.lastSentScrAck?(this.logger.info("Received duplicate SCR, re-sending ACK"),this.sendJmpScrAck(this.lastSentScrAck)):this.logger.warn("Received duplicate SCR, but there was no ACK previously sent");else{this.logger.info("Received new SCR, sending ACK");var d=new Hc(f.seqNum);this.lastReceivedScr=f,this.lastSentScrAck=d,this.sendJmpScrAck(d),this.emit(fu.ScrRequestReceived,f)}}else if(l.msgType===qc.ScrAck){var p=l.payload;if(!function(e){return Boolean(e.scrSeqNum)}(p))return void this.logger.error("Received invalid SCR ACK:",p);p.scrSeqNum===(null===(r=null===(n=this.lastSentScr)||void 0===n?void 0:n.msg)||void 0===r?void 0:r.seqNum)?(this.logger.info("Received ACK for last sent SCR"),null===(i=this.lastSentScr)||void 0===i||i.cancel()):this.logger.info("Received ACK for old SCR")}else if(l.msgType===qc.ActiveSpeakerNotification){var h=l.payload;if(!function(e){var t=e;return Boolean(t.seqNum&&t.csis)}(h))return void this.logger.info("Received invalid Active Speaker Notification:",h);this.logger.debug("Received Active Speaker Notification:",h),this.emit(fu.ActiveSpeaker,h)}else if(l.msgType===qc.SourceIndication){var v=l.payload;if(!function(e){var t,n=e;return Boolean(n.seqNum&&su(n.numTotalSources)&&su(n.numLiveSources)&&n.sources&&(null===(t=n.sources)||void 0===t?void 0:t.every((function(e){return lu(e)}))))}(v))return void this.logger.error("Received invalid Source Indication:",v);if(this.lastReceivedSourceIndication&&v.seqNum<(null===(o=this.lastReceivedSourceIndication)||void 0===o?void 0:o.seqNum))this.logger.info("Received old Source Indication, ignoring");else if(this.lastReceivedSourceIndication&&v.seqNum===this.lastReceivedSourceIndication.seqNum)this.lastSentSourceIndicationAck?(this.logger.info("Received duplicate Source Indication, re-sending ACK"),this.sendSourceIndicationAck(this.lastSentSourceIndicationAck)):this.logger.warn("Received duplicate Source Indication, but there was no ACK previously sent");else{this.logger.info("Received new Source Indication, sending ACK");var m=new tu(v.seqNum);this.lastReceivedSourceIndication=v,this.lastSentSourceIndicationAck=m,this.sendSourceIndicationAck(m),this.emit(fu.SourceIndication,v)}}else if(l.msgType===qc.SourceIndicationAck){var g=l.payload;if(!function(e){return Boolean(e.sourceIndicationSeqNum)}(g))return void this.logger.error("Received invalid SCR ACK:",g);g.sourceIndicationSeqNum===(null===(s=null===(a=this.lastSentSourceIndication)||void 0===a?void 0:a.msg)||void 0===s?void 0:s.seqNum)?(this.logger.info("Received ACK for last sent SCR"),null===(c=this.lastSentSourceIndication)||void 0===c||c.cancel()):this.logger.info("Received ACK for old SCR")}else this.logger.error("Received unknown JmpMsg")}else this.logger.error("JmpMsg ".concat(e," sent to incorrect JmpSession"))}},{key:"setTxCallback",value:function(e){this.txCallback=e}},{key:"close",value:function(){var e;this.logger.info("closing"),null===(e=this.lastSentScr)||void 0===e||e.cancel()}},{key:"sendSourceIndicationAck",value:function(e){var t=new zc(this.mediaFamily,this.mediaContent,{msgType:qc.SourceIndicationAck,payload:e});this.sendJmpMsg(t)}},{key:"sendSourceIndication",value:function(e){var t=new zc(this.mediaFamily,this.mediaContent,{msgType:qc.SourceIndication,payload:e});this.sendJmpMsg(t)}},{key:"sendJmpScrAck",value:function(e){var t=new zc(this.mediaFamily,this.mediaContent,{msgType:qc.ScrAck,payload:e});this.sendJmpMsg(t)}},{key:"sendJmpScr",value:function(e){var t=new zc(this.mediaFamily,this.mediaContent,{msgType:qc.Scr,payload:e});this.sendJmpMsg(t)}},{key:"sendJmpMsg",value:function(e){var t,n=new Wc(Bc.Multistream,e);null===(t=this.txCallback)||void 0===t||t.call(this,kt()(n))}}]),n}(Ti),hu=function(){function e(t,n,r,i){(0,o.Z)(this,e);var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.policy=t,this.policySpecificInfo=n,this.receiveSlots=r,this.maxPayloadBitsPerSecond=i,this.codecInfos=a}return(0,a.Z)(e,[{key:"_toJmpScrRequest",value:function(){return new Kc(this.policy,this.policySpecificInfo,this.receiveSlots.map((function(e){return e.id})),this.maxPayloadBitsPerSecond,this.codecInfos)}}]),e}();function vu(e,t,n,r){return new(n||(n=It()))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}var mu,gu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==qr?qr:"undefined"!=typeof self?self:{};function yu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function bu(e){if(e.__esModule)return e;var t=$n()({},"__esModule",{value:!0});return xt()(e).forEach((function(n){var r=Wn()(e,n);$n()(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var wu=new Uint8Array(16);function _u(){if(!mu&&!(mu="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mu(wu)}var Eu=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Su(e){return"string"==typeof e&&Eu.test(e)}for(var Ru,xu,Cu=[],ku=0;ku<256;++ku)Cu.push((ku+256).toString(16).substr(1));function Tu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Cu[e[t+0]]+Cu[e[t+1]]+Cu[e[t+2]]+Cu[e[t+3]]+"-"+Cu[e[t+4]]+Cu[e[t+5]]+"-"+Cu[e[t+6]]+Cu[e[t+7]]+"-"+Cu[e[t+8]]+Cu[e[t+9]]+"-"+Cu[e[t+10]]+Cu[e[t+11]]+Cu[e[t+12]]+Cu[e[t+13]]+Cu[e[t+14]]+Cu[e[t+15]]).toLowerCase();if(!Su(n))throw TypeError("Stringified UUID is invalid");return n}var Iu=0,Ou=0;function Au(e){if(!Su(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=Xn()(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=Xn()(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=Xn()(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=Xn()(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=Xn()(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}var Lu="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Mu="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Pu(e,t,n){function r(e,r,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=Au(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(r),a.set(e,r.length),(a=n(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,i){o=o||0;for(var s=0;s<16;++s)i[o+s]=a[s];return i}return Tu(a)}try{r.name=e}catch(e){}return r.DNS=Lu,r.URL=Mu,r}function Nu(e){return 14+(e+64>>>9<<4)+1}function Du(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function Uu(e,t,n,r,i,o){return Du((a=Du(Du(t,e),Du(r,o)))<<(s=i)|a>>>32-s,n);var a,s}function Zu(e,t,n,r,i,o,a){return Uu(t&n|~t&r,e,t,i,o,a)}function ju(e,t,n,r,i,o,a){return Uu(t&r|n&~r,e,t,i,o,a)}function Fu(e,t,n,r,i,o,a){return Uu(t^n^r,e,t,i,o,a)}function Bu(e,t,n,r,i,o,a){return Uu(n^(t|~r),e,t,i,o,a)}var Vu=Pu("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var o=e[i>>5]>>>i%32&255,a=Xn()(r.charAt(o>>>4&15)+r.charAt(15&o),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[Nu(t)-1]=t;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<e.length;a+=16){var s=n,c=r,u=i,l=o;n=Zu(n,r,i,o,e[a],7,-680876936),o=Zu(o,n,r,i,e[a+1],12,-389564586),i=Zu(i,o,n,r,e[a+2],17,606105819),r=Zu(r,i,o,n,e[a+3],22,-1044525330),n=Zu(n,r,i,o,e[a+4],7,-176418897),o=Zu(o,n,r,i,e[a+5],12,1200080426),i=Zu(i,o,n,r,e[a+6],17,-1473231341),r=Zu(r,i,o,n,e[a+7],22,-45705983),n=Zu(n,r,i,o,e[a+8],7,1770035416),o=Zu(o,n,r,i,e[a+9],12,-1958414417),i=Zu(i,o,n,r,e[a+10],17,-42063),r=Zu(r,i,o,n,e[a+11],22,-1990404162),n=Zu(n,r,i,o,e[a+12],7,1804603682),o=Zu(o,n,r,i,e[a+13],12,-40341101),i=Zu(i,o,n,r,e[a+14],17,-1502002290),n=ju(n,r=Zu(r,i,o,n,e[a+15],22,1236535329),i,o,e[a+1],5,-165796510),o=ju(o,n,r,i,e[a+6],9,-1069501632),i=ju(i,o,n,r,e[a+11],14,643717713),r=ju(r,i,o,n,e[a],20,-373897302),n=ju(n,r,i,o,e[a+5],5,-701558691),o=ju(o,n,r,i,e[a+10],9,38016083),i=ju(i,o,n,r,e[a+15],14,-660478335),r=ju(r,i,o,n,e[a+4],20,-405537848),n=ju(n,r,i,o,e[a+9],5,568446438),o=ju(o,n,r,i,e[a+14],9,-1019803690),i=ju(i,o,n,r,e[a+3],14,-187363961),r=ju(r,i,o,n,e[a+8],20,1163531501),n=ju(n,r,i,o,e[a+13],5,-1444681467),o=ju(o,n,r,i,e[a+2],9,-51403784),i=ju(i,o,n,r,e[a+7],14,1735328473),n=Fu(n,r=ju(r,i,o,n,e[a+12],20,-1926607734),i,o,e[a+5],4,-378558),o=Fu(o,n,r,i,e[a+8],11,-2022574463),i=Fu(i,o,n,r,e[a+11],16,1839030562),r=Fu(r,i,o,n,e[a+14],23,-35309556),n=Fu(n,r,i,o,e[a+1],4,-1530992060),o=Fu(o,n,r,i,e[a+4],11,1272893353),i=Fu(i,o,n,r,e[a+7],16,-155497632),r=Fu(r,i,o,n,e[a+10],23,-1094730640),n=Fu(n,r,i,o,e[a+13],4,681279174),o=Fu(o,n,r,i,e[a],11,-358537222),i=Fu(i,o,n,r,e[a+3],16,-722521979),r=Fu(r,i,o,n,e[a+6],23,76029189),n=Fu(n,r,i,o,e[a+9],4,-640364487),o=Fu(o,n,r,i,e[a+12],11,-421815835),i=Fu(i,o,n,r,e[a+15],16,530742520),n=Bu(n,r=Fu(r,i,o,n,e[a+2],23,-995338651),i,o,e[a],6,-198630844),o=Bu(o,n,r,i,e[a+7],10,1126891415),i=Bu(i,o,n,r,e[a+14],15,-1416354905),r=Bu(r,i,o,n,e[a+5],21,-57434055),n=Bu(n,r,i,o,e[a+12],6,1700485571),o=Bu(o,n,r,i,e[a+3],10,-1894986606),i=Bu(i,o,n,r,e[a+10],15,-1051523),r=Bu(r,i,o,n,e[a+1],21,-2054922799),n=Bu(n,r,i,o,e[a+8],6,1873313359),o=Bu(o,n,r,i,e[a+15],10,-30611744),i=Bu(i,o,n,r,e[a+6],15,-1560198380),r=Bu(r,i,o,n,e[a+13],21,1309151649),n=Bu(n,r,i,o,e[a+4],6,-145523070),o=Bu(o,n,r,i,e[a+11],10,-1120210379),i=Bu(i,o,n,r,e[a+2],15,718787259),r=Bu(r,i,o,n,e[a+9],21,-343485551),n=Du(n,s),r=Du(r,c),i=Du(i,u),o=Du(o,l)}return[n,r,i,o]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(Nu(t)),r=0;r<t;r+=8)n[r>>5]|=(255&e[r/8])<<r%32;return n}(e),8*e.length))})),qu=Vu;function Wu(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function zu(e,t){return e<<t|e>>>32-t}var Gu=Pu("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}else St()(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a),c=0;c<a;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];s[c]=u}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var f=0;f<a;++f){for(var d=new Uint32Array(80),p=0;p<16;++p)d[p]=s[f][p];for(var h=16;h<80;++h)d[h]=zu(d[h-3]^d[h-8]^d[h-14]^d[h-16],1);for(var v=n[0],m=n[1],g=n[2],y=n[3],b=n[4],w=0;w<80;++w){var _=Math.floor(w/20),E=zu(v,5)+Wu(_,m,g,y)+b+t[_]+d[w]>>>0;b=y,y=g,g=zu(m,30)>>>0,m=v,v=E}n[0]=n[0]+v>>>0,n[1]=n[1]+m>>>0,n[2]=n[2]+g>>>0,n[3]=n[3]+y>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),Hu=Gu;var $u=v()({__proto__:null,v1:function(e,t,n){var r=t&&n||0,i=t||new Array(16),o=(e=e||{}).node||Ru,a=void 0!==e.clockseq?e.clockseq:xu;if(null==o||null==a){var s=e.random||(e.rng||_u)();null==o&&(o=Ru=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=xu=16383&(s[6]<<8|s[7]))}var c=void 0!==e.msecs?e.msecs:Tr()(),u=void 0!==e.nsecs?e.nsecs:Ou+1,l=c-Iu+(u-Ou)/1e4;if(l<0&&void 0===e.clockseq&&(a=a+1&16383),(l<0||c>Iu)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Iu=c,Ou=u,xu=a;var f=(1e4*(268435455&(c+=122192928e5))+u)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=255&f;var d=c/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=255&d,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var p=0;p<6;++p)i[r+p]=o[p];return t||Tu(i)},v3:qu,v4:function(e,t,n){var r=(e=e||{}).random||(e.rng||_u)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Tu(r)},v5:Hu,NIL:"00000000-0000-0000-0000-000000000000",version:function(e){if(!Su(e))throw TypeError("Invalid UUID");return Xn()(e.substr(14,1),16)},validate:Su,stringify:Tu,parse:Au}),Ku=void 0,Yu=bu($u),Ju=function(e){return JSON.parse(kt()(e))},Xu=function e(t,n){if(t===n)return!0;if(t&&n&&"object"===(0,Gn.Z)(t)&&"object"===(0,Gn.Z)(n)){if(t.constructor!==n.constructor)return!1;if(xt()(t).length!==xt()(n).length)return!1;for(var r in t){if(!n.hasOwnProperty(r))return!1;if(!e(t[r],n[r]))return!1}return!0}return!1},Qu=["type","id","timestamp"],el=function(e,t){var n=Ju(t);xt()(n).forEach((function(t){var r=n[t];e[t]&&xt()(r).forEach((function(i){Xu(r[i],e[t][i])&&!Qu.includes(i)&&delete n[t][i],function(e){return!!xt()(e).filter((function(e){return!Qu.includes(e)})).length}(r)||delete n[t]}))}));var r=-1/0;return xt()(n).forEach((function(e){var t=n[e];t.timestamp>r&&(r=t.timestamp)})),xt()(n).forEach((function(e){var t=n[e];t.timestamp===r&&delete t.timestamp})),n.timestamp=r,n},tl=function(e){return[{value:e,type:"string",id:""}]};Ku=function(e,t,n,r,i){void 0===r&&(r=(0,Yu.v4)()),void 0===i&&(i=function(){return It().resolve()});var o={},a=function(e,n,i){t({id:r,timestamp:i?Math.round(i):Tr()(),name:e,payload:n})};e.addEventListener("icecandidate",(function(e){e.candidate&&a("onicecandidate",tl(kt()(e.candidate)))})),e.addEventListener("icecandidateerror",(function(e){var t=e,n=t.errorCode,r=t.errorText;a("onicecandidateerror",tl("".concat(n,": ").concat(r)))})),e.addEventListener("track",(function(e){a("ontrack",tl("".concat(e.track.kind,":").concat(e.track.id," ").concat(e.streams.map((function(e){return"stream:".concat(e.id)})).join(" "))))})),e.addEventListener("signalingstatechange",(function(){a("onsignalingstatechange",tl(e.signalingState))})),e.addEventListener("iceconnectionstatechange",(function(){a("oniceconnectionstatechange",tl(e.iceConnectionState))})),e.addEventListener("icegatheringstatechange",(function(){a("onicegatheringstatechange",tl(e.iceGatheringState))})),e.addEventListener("connectionstatechange",(function(){a("onconnectionstatechange",tl(e.connectionState))})),e.addEventListener("negotiationneeded",(function(){a("onnegotiationneeded",tl("negotiationneeded"))})),e.addEventListener("datachannel",(function(e){a("ondatachannel",tl("".concat(e.channel.id,": ").concat(e.channel.label)))}));var s=window.setInterval((function(){"closed"!==e.signalingState?e.getStats(null).then((function(e){var t=function(e){if(!e.size)return e;var t={};return e.forEach((function(e,n){t[n]=e})),t}(e);i(t).then((function(){var e,n=Ju(t),r=el(o,t);a("stats-report",(e=r,xt()(e).filter((function(e){return"timestamp"!==e})).map((function(t){return e[t]}))),r.timestamp!==-1/0?r.timestamp:void 0),o=n}))})):window.clearInterval(s)}),n)};var nl,rl="\\d+",il="[!#$%&'*+\\-.^_`{|}~a-zA-Z0-9]+",ol="\\S+",al=".+",sl=(0,a.Z)((function e(){(0,o.Z)(this,e)})),cl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this)).bandwidthType=e,i.bandwidth=r,i}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"b=".concat(this.bandwidthType,":").concat(this.bandwidth)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(t[1],Xn()(t[2],10))}}}]),n}(sl);nl=cl,cl.BW_TYPE_REGEX="CT|AS|TIAS",cl.regex=new RegExp("^(".concat(nl.BW_TYPE_REGEX,"):(").concat(rl,")"));var ul,ll=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).mids=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=group:BUNDLE ".concat(this.mids.join(" "))}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1].split(" "))}}]),n}(sl);ll.regex=new RegExp("^group:BUNDLE (".concat(al,")"));var fl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i,a,s,c,u,l,f,d){var p;return(0,o.Z)(this,n),(p=t.call(this)).foundation=e,p.componentId=r,p.transport=i,p.priority=a,p.connectionAddress=s,p.port=c,p.candidateType=u,p.relAddr=l,p.relPort=f,p.candidateExtensions=d,p}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){var e="";return e+="a=candidate:".concat(this.foundation," ").concat(this.componentId," ").concat(this.transport," ").concat(this.priority," ").concat(this.connectionAddress," ").concat(this.port," typ ").concat(this.candidateType),this.relAddr&&(e+=" raddr ".concat(this.relAddr)),this.relPort&&(e+=" rport ".concat(this.relPort)),this.candidateExtensions&&(e+=" ".concat(this.candidateExtensions)),e}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(t[1],Xn()(t[2],10),t[3],Xn()(t[4],10),t[5],Xn()(t[6],10),t[7],t[8],t[9]?Xn()(t[9],10):void 0,t[10])}}}]),n}(sl);ul=fl,fl.ICE_CHARS="[a-zA-Z0-9+/]+",fl.regex=new RegExp("^candidate:(".concat(ul.ICE_CHARS,") (").concat(rl,") (").concat(ol,") (").concat(rl,") (").concat(ol,") (").concat(rl,") typ (").concat(ol,")(?: raddr (").concat(ol,"))?(?: rport (").concat(rl,"))?(?: (").concat(al,"))?"));var dl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i){var a;return(0,o.Z)(this,n),(a=t.call(this)).netType=e,a.addrType=r,a.ipAddr=i,a}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"c=".concat(this.netType," ").concat(this.addrType," ").concat(this.ipAddr)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(t[1],t[2],t[3])}}}]),n}(sl);dl.regex=new RegExp("^(".concat(ol,") (").concat(ol,") (").concat(ol,")"));var pl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).values=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=content:".concat(this.values.join(","))}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1].split(","))}}]),n}(sl);pl.regex=new RegExp("^content:(".concat(al,")$"));var hl,vl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).direction=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=".concat(this.direction)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(sl);vl.regex=/^(sendrecv|sendonly|recvonly|inactive)$/;var ml=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i,a){var s;return(0,o.Z)(this,n),(s=t.call(this)).id=e,s.uri=r,s.direction=i,s.extensionAttributes=a,s}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){var e="";return e+="a=extmap:".concat(this.id),this.direction&&(e+="/".concat(this.direction)),e+=" ".concat(this.uri),this.extensionAttributes&&(e+=" ".concat(this.extensionAttributes)),e}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex),r=Xn()(t[1],10),i=t[2];return new n(r,t[3],i,t[4])}}}]),n}(sl);hl=ml,ml.EXTMAP_DIRECTION="sendonly|recvonly|sendrecv|inactive",ml.regex=new RegExp("^extmap:(".concat(rl,")(?:/(").concat(hl.EXTMAP_DIRECTION,"))? (").concat(ol,")(?: (").concat(al,"))?"));var gl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).fingerprint=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=fingerprint:".concat(this.fingerprint)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(sl);gl.regex=new RegExp("^fingerprint:(".concat(al,")"));var yl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this)).payloadType=e,i.params=r,i}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){var e=this,t=gt()(this.params.keys()).map((function(t){return void 0!==e.params.get(t)?"".concat(t,"=").concat(e.params.get(t)):"".concat(t)})).join(";");return"a=fmtp:".concat(this.payloadType," ").concat(t)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10),function(e){e=e.replace(/^a=fmtp:\d+\x20/,"");var t=new(mr());return/^\d+([/-]\d+)+$/.test(e)?(t.set(e,void 0),t):(e.split(";").forEach((function(n){var r=n&&n.split("=");if(2!==r.length||!r[0]||!r[1])throw new Error("Fmtp params is invalid with ".concat(e));t.set(r[0],r[1])})),t)}(t[2]))}}}]),n}(sl);yl.regex=new RegExp("^fmtp:(".concat(rl,") (").concat(al,")"));var bl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).options=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=ice-options:".concat(this.options.join(" "))}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1].split(" "))}}]),n}(sl);bl.regex=new RegExp("^ice-options:(".concat(al,")$"));var wl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).pwd=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=ice-pwd:".concat(this.pwd)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(sl);wl.regex=new RegExp("^ice-pwd:(".concat(ol,")$"));var _l=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).ufrag=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=ice-ufrag:".concat(this.ufrag)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(sl);_l.regex=new RegExp("^ice-ufrag:(".concat(ol,")$"));var El,Sl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).maxMessageSize=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=max-message-size:".concat(this.maxMessageSize)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10))}}}]),n}(sl);Sl.regex=new RegExp("^max-message-size:(".concat(rl,")"));var Rl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i,a){var s;return(0,o.Z)(this,n),(s=t.call(this)).type=e,s.port=r,s.protocol=i,s.formats=a,s}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"m=".concat(this.type," ").concat(this.port," ").concat(this.protocol," ").concat(this.formats.join(" "))}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(t[1],Xn()(t[2],10),t[3],t[4].split(" "))}}}]),n}(sl);El=Rl,Rl.MEDIA_TYPE="audio|video|application",Rl.regex=new RegExp("^(".concat(El.MEDIA_TYPE,") (").concat(rl,") (").concat(ol,") (").concat(al,")"));var xl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).mid=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=mid:".concat(this.mid)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(sl);xl.regex=new RegExp("^mid:(".concat(ol,")$"));var Cl,kl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i,a,s,c){var u;return(0,o.Z)(this,n),(u=t.call(this)).username=e,u.sessionId=r,u.sessionVersion=i,u.netType=a,u.addrType=s,u.ipAddr=c,u}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"o=".concat(this.username," ").concat(this.sessionId," ").concat(this.sessionVersion," ").concat(this.netType," ").concat(this.addrType," ").concat(this.ipAddr)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(t[1],t[2],Xn()(t[3],10),t[4],t[5],t[6])}}}]),n}(sl);kl.regex=new RegExp("^(".concat(ol,") (").concat(ol,") (").concat(rl,") (").concat(ol,") (").concat(ol,") (").concat(ol,")"));var Tl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i){var a;return(0,o.Z)(this,n),(a=t.call(this)).id=e,a.direction=r,a.params=i,a}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){var e="";return e+="a=rid:".concat(this.id," ").concat(this.direction),this.params&&(e+=" ".concat(this.params)),e}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(t[1],t[2],t[3])}}}]),n}(sl);Cl=Tl,Tl.RID_ID="[\\w-]+",Tl.RID_DIRECTION="\\bsend\\b|\\brecv\\b",Tl.regex=new RegExp("^rid:(".concat(Cl.RID_ID,") (").concat(Cl.RID_DIRECTION,")(?:").concat("\\s","(").concat(al,"))?"));var Il=function(e){(0,s.Z)(n,e);var t=Br(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=rtcp-mux"}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n}}]),n}(sl);Il.regex=/^rtcp-mux$/;var Ol,Al=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this)).payloadType=e,i.feedback=r,i}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=rtcp-fb:".concat(this.payloadType," ").concat(this.feedback)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10),t[2])}}}]),n}(sl);Al.regex=new RegExp("^rtcp-fb:(".concat(rl,") (").concat(al,")"));var Ll=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i,a){var s;return(0,o.Z)(this,n),(s=t.call(this)).payloadType=e,s.encodingName=r,s.clockRate=i,s.encodingParams=a,s}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){var e="";return e+="a=rtpmap:".concat(this.payloadType," ").concat(this.encodingName,"/").concat(this.clockRate),this.encodingParams&&(e+="/".concat(this.encodingParams)),e}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10),t[2],Xn()(t[3],10),t[4])}}}]),n}(sl);Ol=Ll,Ll.NON_SLASH_TOKEN="[^\\s/]+",Ll.regex=new RegExp("^rtpmap:(".concat(rl,") (").concat(Ol.NON_SLASH_TOKEN,")/(").concat(Ol.NON_SLASH_TOKEN,")(?:/(").concat(Ol.NON_SLASH_TOKEN,"))?"));var Ml=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).port=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=sctp-port:".concat(this.port)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10))}}}]),n}(sl);Ml.regex=new RegExp("^sctp-port:(".concat(rl,")"));var Pl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).info=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"i=".concat(this.info)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(sl);Pl.regex=new RegExp("(".concat(al,")"));var Nl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).name=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"s=".concat(this.name)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(sl);Nl.regex=new RegExp("^(".concat(al,")"));var Dl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).setup=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=setup:".concat(this.setup)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(sl);Dl.regex=/^setup:(actpass|active|passive)$/;var Ul=function(){function e(t,n){(0,o.Z)(this,e),this.id=t,this.paused=n}return(0,a.Z)(e,[{key:"toString",value:function(){return this.paused?"~".concat(this.id):this.id}}]),e}(),Zl=function(){function e(){(0,o.Z)(this,e),this.layers=[]}return(0,a.Z)(e,[{key:"addLayer",value:function(e){this.layers.push([e])}},{key:"addLayerWithAlternatives",value:function(e){this.layers.push(e)}},{key:"length",get:function(){return this.layers.length}},{key:"get",value:function(e){return this.layers[e]}},{key:"toString",value:function(){return this.layers.map((function(e){return e.map((function(e){return e.toString()})).join(",")})).join(";")}}],[{key:"fromString",value:function(t){var n=new e,r=t.split(";");if(1===r.length&&!r[0].trim())throw new Error("simulcast stream list empty");return r.forEach((function(e){if(!e)throw new Error("simulcast layer list empty");var t=e.split(","),r=[];t.forEach((function(e){if(!e||"~"===e)throw new Error("rid empty");var t="~"===e[0],n=t?e.substring(1):e;r.push(new Ul(n,t))})),n.addLayerWithAlternatives(r)})),n}}]),e}(),jl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this)).sendLayers=e,i.recvLayers=r,i}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){var e="a=simulcast:";return this.sendLayers.length&&(e+="send ".concat(this.sendLayers.toString()),this.recvLayers.length&&(e+=" ")),this.recvLayers.length&&(e+="recv ".concat(this.recvLayers.toString())),e}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t,r,i=e.match(n.regex),o=i[3]&&i[4],a=i[1],s=Zl.fromString(i[2]),c=new Zl;if(o){if(a===i[3])return;c=Zl.fromString(i[4])}return"send"===a?(t=s,r=c):(t=c,r=s),new n(t,r)}}}]),n}(sl);jl.regex=new RegExp("^simulcast:(send|recv) (".concat(ol,")(?: (send|recv) (").concat(ol,"))?"));var Fl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;(0,o.Z)(this,n);var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return(i=t.call(this)).ssrcId=e,i.attribute=r,i.attributeValue=a,i.attributeData=s,i}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){var e="a=ssrc:".concat(this.ssrcId," ").concat(this.attribute);return this.attributeValue&&(e+=":".concat(this.attributeValue)),this.attributeData&&(e+=" ".concat(this.attributeData)),e}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10),t[2],t[3],t[4])}}}]),n}(sl);Fl.regex=new RegExp("^ssrc:(".concat(rl,") (").concat(il,")(?::(").concat(il,")?(?: (").concat(ol,"))?)?$"));var Bl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this)).semantics=e,i.ssrcs=r,i}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=ssrc-group:".concat(this.semantics," ").concat(this.ssrcs.join(" "))}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(t[1],t[2].split(" ").map((function(e){return Xn()(e,10)})))}}}]),n}(sl);Bl.regex=new RegExp("^ssrc-group:(SIM|FID|FEC) ((?:".concat(rl).concat("\\s","*)+)"));var Vl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this)).startTime=e,i.stopTime=r,i}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"t=".concat(this.startTime," ").concat(this.stopTime)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10),Xn()(t[2],10))}}}]),n}(sl);Vl.regex=new RegExp("^(".concat(rl,") (").concat(rl,")"));var ql=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).version=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"v=".concat(this.version)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(Xn()(t[1],10))}}}]),n}(sl);ql.regex=new RegExp("^(".concat(rl,")$"));var Wl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).value=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"".concat(this.value)}}],[{key:"fromSdpLine",value:function(e){return new n(e.match(n.regex)[1])}}]),n}(sl);Wl.regex=new RegExp("(".concat(al,")"));var zl=function(){function e(){(0,o.Z)(this,e),this.candidates=[]}return(0,a.Z)(e,[{key:"addLine",value:function(e){return e instanceof _l?(this.ufrag=e,!0):e instanceof wl?(this.pwd=e,!0):e instanceof bl?(this.options=e,!0):e instanceof fl&&(this.candidates.push(e),!0)}},{key:"toLines",value:function(){var e=[];return this.ufrag&&e.push(this.ufrag),this.pwd&&e.push(this.pwd),this.options&&e.push(this.options),this.candidates.forEach((function(t){return e.push(t)})),e}}]),e}(),Gl=function(){function e(t,n,r){(0,o.Z)(this,e),this.iceInfo=new zl,this.otherLines=[],this.type=t,this.port=n,this.protocol=r}return(0,a.Z)(e,[{key:"findOtherLine",value:function(e){return this.otherLines.find((function(t){return t instanceof e}))}},{key:"addLine",value:function(e){if(e instanceof ll)throw new Error("Error: bundle group line not allowed in media description");return e instanceof cl?(this.bandwidth=e,!0):e instanceof xl?(this.mid=e.mid,!0):e instanceof gl?(this.fingerprint=e.fingerprint,!0):e instanceof Dl?(this.setup=e.setup,!0):e instanceof dl?(this.connection=e,!0):e instanceof pl?(this.content=e,!0):this.iceInfo.addLine(e)}}]),e}(),Hl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e.type,e.port,e.protocol)).fmts=[],r.fmts=e.formats,r}return(0,a.Z)(n,[{key:"toLines",value:function(){var e=[];return e.push(new Rl(this.type,this.port,this.protocol,this.fmts)),this.connection&&e.push(this.connection),this.bandwidth&&e.push(this.bandwidth),e.push.apply(e,(0,Pn.Z)(this.iceInfo.toLines())),this.fingerprint&&e.push(new gl(this.fingerprint)),this.setup&&e.push(new Dl(this.setup)),this.mid&&e.push(new xl(this.mid)),this.content&&e.push(this.content),this.sctpPort&&e.push(new Ml(this.sctpPort)),this.maxMessageSize&&e.push(new Sl(this.maxMessageSize)),e.push.apply(e,(0,Pn.Z)(this.otherLines)),e}},{key:"addLine",value:function(e){if(zn((0,u.Z)(n.prototype),"addLine",this).call(this,e))return!0;if(e instanceof Rl)throw new Error("Error: tried passing a MediaLine to an existing MediaInfo");return e instanceof Ml?(this.sctpPort=e.port,!0):e instanceof Sl?(this.maxMessageSize=e.maxMessageSize,!0):(this.otherLines.push(e),!0)}}]),n}(Gl),$l=function(){function e(t){(0,o.Z)(this,e),this.fmtParams=new(mr()),this.feedback=[],this.pt=t}return(0,a.Z)(e,[{key:"addLine",value:function(e){if(e instanceof Ll)return this.name=e.encodingName,this.clockRate=e.clockRate,this.encodingParams=e.encodingParams,!0;if(e instanceof yl){if(this.fmtParams=new(mr())([].concat((0,Pn.Z)(gt()(this.fmtParams.entries())),(0,Pn.Z)(gt()(e.params.entries())))),e.params.has("apt")){var t=e.params.get("apt");this.primaryCodecPt=Xn()(t,10)}return!0}return e instanceof Al&&(this.feedback.push(e.feedback),!0)}},{key:"toLines",value:function(){var e=this,t=[];return t.push(new Ll(this.pt,this.name,this.clockRate,this.encodingParams)),this.feedback.forEach((function(n){t.push(new Al(e.pt,n))})),this.fmtParams.size>0&&t.push(new yl(this.pt,this.fmtParams)),t}}]),e}(),Kl=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e.type,e.port,e.protocol)).pts=[],r.extMaps=[],r.rids=[],r.codecs=new(mr()),r.rtcpMux=!1,r.ssrcs=[],r.ssrcGroups=[],r.pts=e.formats.map((function(e){return Xn()(e,10)})),r.pts.forEach((function(e){return r.codecs.set(e,new $l(e))})),r}return(0,a.Z)(n,[{key:"toLines",value:function(){var e=[];return e.push(new Rl(this.type,this.port,this.protocol,this.pts.map((function(e){return"".concat(e)})))),this.connection&&e.push(this.connection),this.bandwidth&&e.push(this.bandwidth),e.push.apply(e,(0,Pn.Z)(this.iceInfo.toLines())),this.fingerprint&&e.push(new gl(this.fingerprint)),this.setup&&e.push(new Dl(this.setup)),this.mid&&e.push(new xl(this.mid)),this.rtcpMux&&e.push(new Il),this.content&&e.push(this.content),this.extMaps.forEach((function(t){return e.push(t)})),this.rids.forEach((function(t){return e.push(t)})),this.simulcast&&e.push(this.simulcast),this.direction&&e.push(new vl(this.direction)),this.codecs.forEach((function(t){return e.push.apply(e,(0,Pn.Z)(t.toLines()))})),e.push.apply(e,(0,Pn.Z)(this.ssrcs)),e.push.apply(e,(0,Pn.Z)(this.ssrcGroups)),e.push.apply(e,(0,Pn.Z)(this.otherLines)),e}},{key:"addLine",value:function(e){if(zn((0,u.Z)(n.prototype),"addLine",this).call(this,e))return!0;if(e instanceof Rl)throw new Error("Error: tried passing a MediaLine to an existing MediaInfo");if(e instanceof vl)return this.direction=e.direction,!0;if(e instanceof ml)return this.extMaps.push(e),!0;if(e instanceof Tl)return this.rids.push(e),!0;if(e instanceof Il)return this.rtcpMux=!0,!0;if(e instanceof jl)return this.simulcast=e,!0;if(e instanceof Ll||e instanceof yl||e instanceof Al){var t=this.codecs.get(e.payloadType);if(!t)throw new Error("Error: got line for unknown codec: ".concat(e.toSdpLine()));return t.addLine(e),!0}return e instanceof Fl?(this.ssrcs.push(e),!0):e instanceof Bl?(this.ssrcGroups.push(e),!0):(this.otherLines.push(e),!0)}},{key:"getCodecByPt",value:function(e){return this.codecs.get(e)}},{key:"removePt",value:function(e){var t=this,n=(0,Pn.Z)(this.codecs.values()).filter((function(t){return t.primaryCodecPt===e})).map((function(e){return e.pt})),r=[e].concat((0,Pn.Z)(n));r.forEach((function(e){t.codecs.delete(e)})),this.pts=this.pts.filter((function(e){return-1===r.indexOf(e)}))}}]),n}(Gl),Yl=function(){function e(){(0,o.Z)(this,e),this.groups=[],this.otherLines=[]}return(0,a.Z)(e,[{key:"addLine",value:function(e){return e instanceof ql?(this.version=e,!0):e instanceof kl?(this.origin=e,!0):e instanceof Nl?(this.sessionName=e,!0):e instanceof Pl?(this.information=e,!0):e instanceof Vl?(this.timing=e,!0):e instanceof dl?(this.connection=e,!0):e instanceof cl?(this.bandwidth=e,!0):e instanceof ll?(this.groups.push(e),!0):(this.otherLines.push(e),!0)}},{key:"toLines",value:function(){var e=[];return this.version&&e.push(this.version),this.origin&&e.push(this.origin),this.sessionName&&e.push(this.sessionName),this.information&&e.push(this.information),this.connection&&e.push(this.connection),this.bandwidth&&e.push(this.bandwidth),this.timing&&e.push(this.timing),this.groups&&e.push.apply(e,(0,Pn.Z)(this.groups)),e.push.apply(e,(0,Pn.Z)(this.otherLines)),e}}]),e}(),Jl=function(){function e(){(0,o.Z)(this,e),this.session=new Yl,this.media=[]}return(0,a.Z)(e,[{key:"avMedia",get:function(){return this.media.filter((function(e){return e instanceof Kl}))}},{key:"toString",value:function(){var e=[];return e.push.apply(e,(0,Pn.Z)(this.session.toLines())),this.media.forEach((function(t){return e.push.apply(e,(0,Pn.Z)(t.toLines()))})),"".concat(e.map((function(e){return e.toSdpLine()})).join("\r\n"),"\r\n")}}]),e}(),Xl=new(function(e){(0,s.Z)(n,e);var t=Br(n);function n(){var e;return(0,o.Z)(this,n),(e=t.call(this)).addParser("v",ql.fromSdpLine),e.addParser("o",kl.fromSdpLine),e.addParser("c",dl.fromSdpLine),e.addParser("i",Pl.fromSdpLine),e.addParser("m",Rl.fromSdpLine),e.addParser("s",Nl.fromSdpLine),e.addParser("t",Vl.fromSdpLine),e.addParser("b",cl.fromSdpLine),e.addParser("a",Ll.fromSdpLine),e.addParser("a",Al.fromSdpLine),e.addParser("a",yl.fromSdpLine),e.addParser("a",vl.fromSdpLine),e.addParser("a",ml.fromSdpLine),e.addParser("a",xl.fromSdpLine),e.addParser("a",_l.fromSdpLine),e.addParser("a",wl.fromSdpLine),e.addParser("a",bl.fromSdpLine),e.addParser("a",gl.fromSdpLine),e.addParser("a",Dl.fromSdpLine),e.addParser("a",Ml.fromSdpLine),e.addParser("a",Sl.fromSdpLine),e.addParser("a",Il.fromSdpLine),e.addParser("a",ll.fromSdpLine),e.addParser("a",pl.fromSdpLine),e.addParser("a",Tl.fromSdpLine),e.addParser("a",fl.fromSdpLine),e.addParser("a",jl.fromSdpLine),e.addParser("a",Fl.fromSdpLine),e.addParser("a",Bl.fromSdpLine),e}return(0,a.Z)(n)}(function(){function e(){(0,o.Z)(this,e),this.parsers=new(mr())}return(0,a.Z)(e,[{key:"addParser",value:function(e,t){var n=this.parsers.get(e)||[];n.push(t),this.parsers.set(e,n)}},{key:"getParsers",value:function(e){return this.parsers.get(e)||[]}}]),e}()));function Ql(e){return e.length>2}function ef(e){var t=function(e,t){var n=[];return e.split(/(\r\n|\r|\n)/).filter(Ql).forEach((function(e){var r,i=e[0],o=e.slice(2),a=jr(t.getParsers(i));try{for(a.s();!(r=a.n()).done;){var s=(0,r.value)(o);if(s)return void n.push(s)}}catch(e){a.e(e)}finally{a.f()}var c=Wl.fromSdpLine(e);n.push(c)})),n}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xl),n=function(e){var t=new Jl,n=t.session;return e.forEach((function(e){if(e instanceof Rl){var r;if("audio"===e.type||"video"===e.type)r=new Kl(e);else{if("application"!==e.type)throw new Error("Unhandled media type: ".concat(e.type));r=new Hl(e)}t.media.push(r),n=r}else n.addLine(e)})),t}(t);return n}var tf,nf={exports:{}},rf="object"===("undefined"==typeof Reflect?"undefined":(0,Gn.Z)(Reflect))?Reflect:null,of=rf&&"function"==typeof yr()?yr():function(e,t,n){return Function.prototype.apply.call(e,t,n)};tf=rf&&"function"==typeof ir()?ir():lr()?function(e){return wr()(e).concat(lr()(e))}:function(e){return wr()(e)};var af=Er()||function(e){return e!=e};function sf(){sf.init.call(this)}nf.exports=sf,nf.exports.once=function(e,t){return new(It())((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}gf(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&gf(e,"error",t,n)}(e,i,{once:!0})}))},sf.EventEmitter=sf,sf.prototype._events=void 0,sf.prototype._eventsCount=0,sf.prototype._maxListeners=void 0;var cf=10;function uf(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+(0,Gn.Z)(e))}function lf(e){return void 0===e._maxListeners?sf.defaultMaxListeners:e._maxListeners}function ff(e,t,n,r){var i,o,a,s;if(uf(n),void 0===(o=e._events)?(o=e._events=er()(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=lf(e))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return e}function df(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function pf(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=df.bind(r);return i.listener=n,r.wrapFn=i,i}function hf(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):mf(i,i.length)}function vf(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function mf(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function gf(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+(0,Gn.Z)(e));e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}$n()(sf,"defaultMaxListeners",{enumerable:!0,get:function(){return cf},set:function(e){if("number"!=typeof e||e<0||af(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");cf=e}}),sf.init=function(){void 0!==this._events&&this._events!==nr()(this)._events||(this._events=er()(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},sf.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||af(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},sf.prototype.getMaxListeners=function(){return lf(this)},sf.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)of(s,this,t);else{var c=s.length,u=mf(s,c);for(n=0;n<c;++n)of(u[n],this,t)}return!0},sf.prototype.addListener=function(e,t){return ff(this,e,t,!1)},sf.prototype.on=sf.prototype.addListener,sf.prototype.prependListener=function(e,t){return ff(this,e,t,!0)},sf.prototype.once=function(e,t){return uf(t),this.on(e,pf(this,e,t)),this},sf.prototype.prependOnceListener=function(e,t){return uf(t),this.prependListener(e,pf(this,e,t)),this},sf.prototype.removeListener=function(e,t){var n,r,i,o,a;if(uf(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=er()(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},sf.prototype.off=sf.prototype.removeListener,sf.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=er()(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=er()(null):delete n[e]),this;if(0===arguments.length){var i,o=xt()(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=er()(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},sf.prototype.listeners=function(e){return hf(this,e,!0)},sf.prototype.rawListeners=function(e){return hf(this,e,!1)},sf.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):vf.call(e,t)},sf.prototype.listenerCount=vf,sf.prototype.eventNames=function(){return this._eventsCount>0?tf(this._events):[]};var yf,bf=function(e){(0,s.Z)(n,e);var t=Br(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n)}(nf.exports.EventEmitter);!function(e){e[e.NOT_OVERUSED=0]="NOT_OVERUSED",e[e.OVERUSED=1]="OVERUSED"}(yf||(yf={}));var wf,_f=function(){function e(t){(0,o.Z)(this,e),this.monitors=[],this.lastOverallOveruseState=yf.NOT_OVERUSED,this.isRunning=!1,this.overuseUpdateCallback=t}return(0,a.Z)(e,[{key:"addMonitor",value:function(e){var t=this;this.monitors.push(e),this.isRunning&&e.startMonitoring((function(){return t.onMonitorOveruseUpdate()}))}},{key:"start",value:function(){var e=this;this.isRunning=!0,this.monitors.forEach((function(t){return t.startMonitoring((function(){return e.onMonitorOveruseUpdate()}))}))}},{key:"stop",value:function(){this.isRunning=!1,this.monitors.forEach((function(e){return e.stopMonitoring()}))}},{key:"onMonitorOveruseUpdate",value:function(){var e=this.monitors.map((function(e){return e.getLastOveruseState()})).some((function(e){return e===yf.OVERUSED}))?yf.OVERUSED:yf.NOT_OVERUSED;e!==this.lastOverallOveruseState&&(this.lastOverallOveruseState=e,this.overuseUpdateCallback(e))}}]),e}();!function(e){e.MediaStarted="media-started",e.MediaStopped="media-stopped",e.SourceUpdate="source-update"}(wf||(wf={}));var Ef=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this))._idGetter=e,i.handleTrackMuted=i.handleTrackMuted.bind((0,At.Z)(i)),i.handleTrackUnmuted=i.handleTrackUnmuted.bind((0,At.Z)(i)),i._stream=new MediaStream([r]),i._sourceState="no source",i.addTrackHandlers(r),i}return(0,a.Z)(n,[{key:"addTrackHandlers",value:function(e){e.addEventListener("mute",this.handleTrackMuted),e.addEventListener("unmute",this.handleTrackUnmuted)}},{key:"handleTrackMuted",value:function(){this.emit(wf.MediaStopped)}},{key:"handleTrackUnmuted",value:function(){this.emit(wf.MediaStarted)}},{key:"removeTrackHandlers",value:function(e){e.removeEventListener("mute",this.handleTrackMuted),e.removeEventListener("unmute",this.handleTrackUnmuted)}},{key:"replaceTrack",value:function(e){var t,n=null===(t=this._stream.getTracks())||void 0===t?void 0:t[0];n&&(this._stream.removeTrack(n),this.removeTrackHandlers(n)),this.addTrackHandlers(e),this._stream.addTrack(e)}},{key:"_updateSource",value:function(e,t){e===this._sourceState&&t===this._currentRxCsi||(this._sourceState=e,this._currentRxCsi=t,this.emit(wf.SourceUpdate,e,t))}},{key:"close",value:function(){var e=this;this._stream.getTracks().forEach((function(t){e.removeTrackHandlers(t)}))}},{key:"id",get:function(){return this._idGetter()}},{key:"stream",get:function(){return this._stream}},{key:"currentRxCsi",get:function(){return this._currentRxCsi}}]),n}(bf);Ef.Events=wf;var Sf=function(){function e(t){(0,o.Z)(this,e),this._rtcRtpTransceiver=t}return(0,a.Z)(e,[{key:"replaceTransceiver",value:function(e){this._rtcRtpTransceiver=e}},{key:"receiver",get:function(){return this._rtcRtpTransceiver.receiver}},{key:"sender",get:function(){return this._rtcRtpTransceiver.sender}},{key:"mid",get:function(){return this._rtcRtpTransceiver.mid}},{key:"close",value:function(){this._rtcRtpTransceiver.stop()}}]),e}(),Rf=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this,e))._receiveSlot=new Ef((function(){return i._rtcRtpTransceiver.mid?r(i._rtcRtpTransceiver.mid):null}),i._rtcRtpTransceiver.receiver.track),i}return(0,a.Z)(n,[{key:"replaceTransceiver",value:function(e){zn((0,u.Z)(n.prototype),"replaceTransceiver",this).call(this,e),this._receiveSlot.replaceTrack(e.receiver.track)}},{key:"close",value:function(){zn((0,u.Z)(n.prototype),"close",this).call(this),this._receiveSlot.close()}},{key:"receiveSlot",get:function(){return this._receiveSlot}},{key:"getStats",value:function(){return this.receiver.getStats()}}]),n}(Sf);Rf.rid="1";var xf=function(e){(0,s.Z)(n,e);var t=Br(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=jmp"}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n}}]),n}(sl);xf.regex=/^jmp$/;var Cf=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).streamIdMode=e,r}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){return"a=jmp-stream-id-mode:".concat(this.streamIdMode)}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e))return new n(e.match(n.regex)[1])}}]),n}(sl);Cf.regex=/^jmp-stream-id-mode:(MID-RID|SSRC)$/;var kf=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this)).source=e,i.csi=r,i}return(0,a.Z)(n,[{key:"toSdpLine",value:function(){var e="a=jmp-source:".concat(this.source);return this.csi&&(e+=" csi=".concat(this.csi)),e}}],[{key:"fromSdpLine",value:function(e){if(n.regex.test(e)){var t=e.match(n.regex);return new n(t[1],t[2])}}}]),n}(sl);function Tf(e){return St()(e)?e.map((function(e){return Tf(e)})):e instanceof mr()?new(mr())(e):e instanceof Date?new Date(e.getTime()):e&&"object"===(0,Gn.Z)(e)?wr()(e).reduce((function(t,n){return $n()(t,n,Wn()(e,n)),t[n]=Tf(e[n]),t}),er()(nr()(e))):e}function If(e,t){var n=t.map((function(e){return e.toLowerCase()}));e.avMedia.map((function(e){return(0,Pn.Z)(e.codecs.values()).map((function(e){return e.name}))})).flat().filter((function(e){return!n.includes(e.toLowerCase())})).forEach((function(t){return function(e,t){e.avMedia.forEach((function(e){var n=(0,Pn.Z)(e.codecs.entries()).filter((function(e){var n;return(null===(n=(0,Nn.Z)(e,2)[1].name)||void 0===n?void 0:n.toLowerCase())===t.toLowerCase()}));n.forEach((function(t){var n=(0,Nn.Z)(t,1)[0];return e.removePt(n)}))}))}(e,t)}))}function Of(e,t,n){if("max-compat"===t){var r=n.get(eu.AudioMain),i=n.get(eu.VideoMain),o=n.get(eu.AudioSlides),a=n.get(eu.VideoSlides);e.session.groups.splice(0,e.session.groups.length),r&&e.session.groups.push(new ll(r)),i&&e.session.groups.push(new ll(i)),o&&e.session.groups.push(new ll(o)),a&&e.session.groups.push(new ll(a))}}function Af(e,t,n){t.session.groups=e.session.groups,t.media=e.media.map((function(e){if(!e.mid)throw new Error("Offer mline is missing MID");var r=t.media.find((function(t){return t.mid===e.mid}));if(r)return r instanceof Kl&&(0,Pn.Z)(r.codecs.values()).forEach((function(e){e.fmtParams.set("x-google-start-bitrate","60000")})),r;if(!(e instanceof Kl))throw new Error("Answer is missing a non-media mline: ".concat(e.mid));var i=t.avMedia.find((function(t){return t.type===e.type}));if(!i)throw new Error("Answer has no mline of type ".concat(e.type,", can't generate synthetic answer mline for mid ").concat(e.mid));var o=Tf(i);(o.mid=e.mid,o.simulcast=void 0,"sendrecv"!==e.direction&&"sendonly"!==e.direction||(o.direction="recvonly"),"recvonly"===e.direction)&&(o.direction="sendonly",n.getIngressStreamSignalerOrThrow(e.mid).signalRemoteStreams(o));return o}))}function Lf(e,t,n){e.avMedia.filter((function(e){return"sendrecv"===e.direction||"inactive"===e.direction})).forEach((function(e){if(e.otherLines.find((function(e){return e instanceof xf}))||e.addLine(new xf),!e.otherLines.find((function(e){return e instanceof kf}))){var r=function(e){var t,n,r;if(e.type.toLowerCase()===Jc.Audio.toLowerCase())r=Jc.Audio;else{if(e.type.toLowerCase()!==Jc.Video.toLowerCase())throw Error("Mline type doesn't match any known MediaFamily: ".concat(e.type));r=Jc.Video}return iu(r,(null===(n=null===(t=e.content)||void 0===t?void 0:t.values)||void 0===n?void 0:n.some((function(e){return"slides"===e.toLowerCase()})))?Xc.Slides:Xc.Main)}(e),i=t.get(r);if(!i)throw new Error("Unable to find CSI for MediaType ".concat(r));e.addLine(new kf(e.mid,i.toString()))}e.otherLines.find((function(e){return e instanceof Cf}))||e.addLine(new Cf(n))}))}kf.regex=new RegExp("^jmp-source:(".concat(ol,") (?:csi=(").concat(ol,"))")),Xl.addParser("a",xf.fromSdpLine),Xl.addParser("a",kf.fromSdpLine),Xl.addParser("a",Cf.fromSdpLine);var Mf=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this,e)).requested=!1,i.csi=r,i.direction="sendrecv",i.handleTrackChange=i.handleTrackChange.bind((0,At.Z)(i)),i}return(0,a.Z)(n,[{key:"handleTrackChange",value:function(){var e;return vu(this,void 0,void 0,p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.requested){t.next=3;break}return t.next=3,this.sender.replaceTrack((null===(e=this.publishedTrack)||void 0===e?void 0:e.underlyingTrack)||null);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"replaceTransceiver",value:function(e){var t,r=this,i=er()(null,{replaceTransceiver:{get:function(){return zn((0,u.Z)(n.prototype),"replaceTransceiver",r)}}});return vu(this,void 0,void 0,p().mark((function n(){return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i.replaceTransceiver.call(this,e),e.direction=this.direction,!this.requested){n.next=5;break}return n.next=5,this.sender.replaceTrack((null===(t=this.publishedTrack)||void 0===t?void 0:t.underlyingTrack)||null);case 5:case"end":return n.stop()}}),n,this)})))}},{key:"replacePublishedTrack",value:function(e){var t,n;return vu(this,void 0,void 0,p().mark((function r(){return p().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null===(t=this.publishedTrack)||void 0===t||t.off(us.UnderlyingTrackChange,this.handleTrackChange),null===(n=this.publishedTrack)||void 0===n||n.setPublished(!1),!this.requested){r.next=5;break}return r.next=5,this.sender.replaceTrack((null==e?void 0:e.underlyingTrack)||null);case 5:this.publishedTrack=e,null==e||e.on(us.UnderlyingTrackChange,this.handleTrackChange),null==e||e.setPublished(!0);case 8:case"end":return r.stop()}}),r,this)})))}},{key:"setTrackRequested",value:function(e){var t;return vu(this,void 0,void 0,p().mark((function n(){var r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.requested===e){n.next=5;break}return this.requested=e,r=e&&(null===(t=this.publishedTrack)||void 0===t?void 0:t.underlyingTrack)||null,n.next=5,this.sender.replaceTrack(r);case 5:case"end":return n.stop()}}),n,this)})))}},{key:"updateSimulcastStreamStates",value:function(e){return vu(this,void 0,void 0,p().mark((function t(){var n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=this.sender.getParameters()).encodings.forEach((function(t,n){var r=e.get(n);t.active=Boolean(r),r&&(r.scaleDownRatio>=1&&t.scaleResolutionDownBy!==r.scaleDownRatio&&(t.scaleResolutionDownBy=r.scaleDownRatio),r.maxPayloadBitsPerSecond&&(t.maxBitrate=r.maxPayloadBitsPerSecond))})),t.next=4,this.sender.setParameters(n);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getScaleDownRatio",value:function(e){var t;if(!e)return-1;if(!this.publishedTrack)return-1;var n=null===(t=this.publishedTrack)||void 0===t?void 0:t.underlyingTrack.getSettings(),r=null==n?void 0:n.height,i=null==n?void 0:n.width;return i&&r?Math.max(function(e,t,n){return t/Zc(e,n)}([i,r],r,e),1):-1}},{key:"publishTrack",value:function(e){return this.replacePublishedTrack(e)}},{key:"unpublishTrack",value:function(){return this.replacePublishedTrack()}},{key:"setActive",value:function(e){return this.direction=e?"sendrecv":"inactive",this._rtcRtpTransceiver.direction=this.direction,this._rtcRtpTransceiver.direction!==this._rtcRtpTransceiver.currentDirection}},{key:"getStats",value:function(){return this.sender.getStats()}}]),n}(Sf),Pf=function(){function e(t){var n=this;(0,o.Z)(this,e);var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return vu(n,void 0,void 0,p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))};this.statsGetter=t,this.statsPreProcessor=r}return(0,a.Z)(e,[{key:"getStats",value:function(){return vu(this,void 0,void 0,p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.statsGetter();case 2:return t=e.sent,n=new(mr()),t.forEach((function(e,t){return n.set(t,e)})),e.next=7,this.statsPreProcessor(n);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})))}}]),e}(),Nf={0:"240",1:"2304",2:"8160"},Df=function(){function e(t){(0,o.Z)(this,e),this.mid=t}return(0,a.Z)(e,[{key:"getReceiverId",value:function(){return{mid:this.mid,rid:"1"}}},{key:"signalLocalStreams",value:function(e){}},{key:"signalRemoteStreams",value:function(e){}}]),e}(),Uf=function(){function e(t){(0,o.Z)(this,e),this.streamIds=[],this.mid=t}return(0,a.Z)(e,[{key:"signalStreams",value:function(e,t,n){n.ssrcGroups=[],0===this.streamIds.length&&(this.streamIds=e?[{mid:this.mid,rid:"low"},{mid:this.mid,rid:"medium"},{mid:this.mid,rid:"high"}]:[{mid:this.mid}]),e&&(n.rids=this.streamIds.map((function(e,t){return new Tl(e.rid,"send","max-fs=".concat(Nf[t]))})),n.simulcast=new jl(Zl.fromString("low;medium;high"),new Zl))}},{key:"getSenderIds",value:function(){return this.streamIds}},{key:"getEncodingIndexForStreamId",value:function(e){return this.streamIds.findIndex((function(t){return cu(t,e)}))}}]),e}();function Zf(){return Math.floor(4294967295*Math.random())+1}var jf=function(){function e(){(0,o.Z)(this,e),this.ssrc=Zf()}return(0,a.Z)(e,[{key:"getReceiverId",value:function(){return Rr()({ssrc:this.ssrc},this.rtxSsrc?{rtxSsrc:this.rtxSsrc}:{})}},{key:"signalLocalStreams",value:function(e){}},{key:"signalRemoteStreams",value:function(e){e.addLine(new Fl(this.ssrc,"cname","".concat(this.ssrc,"-cname"))),e.addLine(new Fl(this.ssrc,"msid","-","1")),function(e,t){return(0,Pn.Z)(t.codecs.values()).some((function(t){var n;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===e.toLowerCase()}))}("rtx",e)&&(this.rtxSsrc=Zf(),e.addLine(new Fl(this.rtxSsrc,"cname","".concat(this.ssrc,"-cname"))),e.addLine(new Fl(this.rtxSsrc,"msid","-","1")),e.addLine(new Bl("FID",[this.ssrc,this.rtxSsrc])))}}]),e}(),Ff=function(){function e(){(0,o.Z)(this,e),this.streamIds=[]}return(0,a.Z)(e,[{key:"signalStreams",value:function(e,t,n){var r=this;if(n.rids=[],n.simulcast=void 0,n.ssrcs=[],n.ssrcGroups=[],n.extMaps=n.extMaps.filter((function(e){return!/^urn:ietf:params:rtp-hdrext:sdes:(?:mid|rtp-stream-id|repaired-rtp-stream-id)$/.test(e.uri)})),0===this.streamIds.length){var i=e?3:1;(0,Pn.Z)(Array(i).keys()).forEach((function(){var e={ssrc:Zf()};t&&(e.rtxSsrc=Zf()),r.streamIds.push(e)}))}this.streamIds.forEach((function(e){var r=e.ssrc;if(n.addLine(new Fl(r,"cname","".concat(r,"-cname"))),n.addLine(new Fl(r,"msid","-","1")),t){var i=e.rtxSsrc;n.addLine(new Fl(i,"cname","".concat(r,"-cname"))),n.addLine(new Fl(i,"msid","-","1")),n.addLine(new Bl("FID",[r,i]))}})),e&&n.addLine(new Bl("SIM",this.streamIds.map((function(e){return e.ssrc}))))}},{key:"getSenderIds",value:function(){return this.streamIds}},{key:"getEncodingIndexForStreamId",value:function(e){return this.streamIds.findIndex((function(t){return cu(t,e)}))}}]),e}(),Bf=function(){function e(t){(0,o.Z)(this,e),this.egressStreamSignalersByMid=new(mr()),this.ingressStreamsSignalersByMid=new(mr()),this.ingressStreamSignalingMode=t,this.egressStreamSignalingMode=t}return(0,a.Z)(e,[{key:"getOrCreateEgressStreamSignaler",value:function(e){var t,n=this.getEgressStreamSignaler(e);return n||(t="MID-RID"===this.egressStreamSignalingMode?new Uf(e):new Ff,this.egressStreamSignalersByMid.set(e,t),t)}},{key:"getEgressStreamSignalerOrThrow",value:function(e){var t=this.getEgressStreamSignaler(e);if(!t)throw new Error("Couldn't find EgressStreamSignaler for mid ".concat(e));return t}},{key:"getEgressStreamSignaler",value:function(e){return this.egressStreamSignalersByMid.get(e)}},{key:"getOrCreateIngressStreamSignaler",value:function(e){var t,n=this.getIngressStreamSignaler(e);return n||(t="MID-RID"===this.ingressStreamSignalingMode?new Df(e):new jf,this.ingressStreamsSignalersByMid.set(e,t),t)}},{key:"getIngressStreamSignaler",value:function(e){return this.ingressStreamsSignalersByMid.get(e)}},{key:"getIngressStreamSignalerOrThrow",value:function(e){var t=this.getIngressStreamSignaler(e);if(!t)throw new Error("Couldn't find IngressStreamSignaler for mid ".concat(e));return t}}]),e}(),Vf=function(e,t){return vu(void 0,void 0,void 0,p().mark((function n(){var r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={audio:{senders:[],receivers:[]},video:{senders:[],receivers:[]},screenShareAudio:{senders:[],receivers:[]},screenShareVideo:{senders:[],receivers:[]}},n.next=3,It().all((0,Pn.Z)(e.entries()).map((function(e){var t=(0,Nn.Z)(e,2),n=t[0],i=t[1];return vu(void 0,void 0,void 0,p().mark((function e(){var t,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.getStats();case 2:e.t0=e.sent,e.t1=i.mid,e.t2=i.csi,e.t3=null===(t=i.publishedTrack)||void 0===t?void 0:t.label,o={report:e.t0,mid:e.t1,csi:e.t2,currentDirection:"sendonly",localTrackLabel:e.t3},n===eu.AudioMain&&r.audio.senders.push(o),n===eu.VideoMain&&r.video.senders.push(o),n===eu.AudioSlides&&r.screenShareAudio.senders.push(o),n===eu.VideoSlides&&r.screenShareVideo.senders.push(o);case 11:case"end":return e.stop()}}),e)})))})));case 3:return n.next=5,It().all((0,Pn.Z)(t.entries()).map((function(e){var t=(0,Nn.Z)(e,2),n=t[0],i=t[1];return vu(void 0,void 0,void 0,p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",It().all(i.map((function(e){return vu(void 0,void 0,void 0,p().mark((function t(){var i,o,a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getStats();case 2:t.t0=t.sent,t.t1=null===(i=e.receiveSlot.id)||void 0===i?void 0:i.mid,t.t2=e.receiveSlot.currentRxCsi,t.t3=null===(o=e.receiveSlot.stream.getTracks()[0])||void 0===o?void 0:o.label,a={report:t.t0,mid:t.t1,csi:t.t2,currentDirection:"recvonly",localTrackLabel:t.t3},n===eu.AudioMain&&r.audio.receivers.push(a),n===eu.VideoMain&&r.video.receivers.push(a),n===eu.AudioSlides&&r.screenShareAudio.receivers.push(a),n===eu.VideoSlides&&r.screenShareVideo.receivers.push(a);case 11:case"end":return t.stop()}}),t)})))}))));case 1:case"end":return e.stop()}}),e)})))})));case 5:return n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))},qf={exports:{}};!function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||$n()(e,t,{enumerable:!0,get:r})},n.r=function(e){void 0!==bt()&&Or()&&$n()(e,Or(),{value:"Module"}),$n()(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==(0,Gn.Z)(e)&&e&&e.__esModule)return e;var r=er()(null);if(n.r(r),$n()(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return Xn()(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return Xn()(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(i,o),s=0,c=e.map([t,n],(function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===s)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(Rr())return Rr().apply(Object,[e].concat(o));var s=function(){var e=o[t];"object"==(0,Gn.Z)(e)&&null!==e&&xt()(e).forEach((function(t){r[t]=e[t]}))};for(t=0,n=o.length;t<n;t+=1)s();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),$n()(e,r.key,r)}}var s=function(){function e(){}var t,n,r;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,r=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(n=null)&&a(t.prototype,n),r&&a(t,r),e}();t.default=s,e.exports=t.default},91:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=c(n(92)),i=c(n(93)),o=c(n(94)),a=c(n(95)),s=c(n(17));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(xt()(e).forEach((function(t){var a=e[t];"string"==typeof a?(i[t]=a,o+=1):"object"==(0,Gn.Z)(a)&&(n[t]=a,r+=1)})),r>0){var a=xt()(n),c=s.default.find(a,(function(e){return t.isOS(e)}));if(c){var u=this.satisfies(n[c]);if(void 0!==u)return u}var l=s.default.find(a,(function(e){return t.isPlatform(e)}));if(l){var f=this.satisfies(n[l]);if(void 0!==f)return f}}if(o>0){var d=xt()(i),p=s.default.find(d,(function(e){return t.isBrowser(e,!0)}));if(void 0!==p)return this.compareVersion(i[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=u,e.exports=t.default},92:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=a,e.exports=t.default}})}(qf);var Wf=yu(qf.exports);function zf(){return Wf.getParser(window.navigator.userAgent).getBrowser()}var Gf={exports:{}};!function(e){!function(t){var n,r={};r.VERSION="1.6.1";var i={},o=function(e,t){return function(){return t.apply(e,arguments)}},a=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])!(e in r)&&n[t].hasOwnProperty(e)&&(r[e]=n[t][e]);return r},s=function(e,t){return{value:e,name:t}};r.TRACE=s(1,"TRACE"),r.DEBUG=s(2,"DEBUG"),r.INFO=s(3,"INFO"),r.TIME=s(4,"TIME"),r.WARN=s(5,"WARN"),r.ERROR=s(8,"ERROR"),r.OFF=s(99,"OFF");var c=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};c.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(r.TRACE,arguments)},debug:function(){this.invoke(r.DEBUG,arguments)},info:function(){this.invoke(r.INFO,arguments)},warn:function(){this.invoke(r.WARN,arguments)},error:function(){this.invoke(r.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(r.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(r.TIME,[e,"end"])},invoke:function(e,t){n&&this.enabledFor(e)&&n(t,a({level:e},this.context))}};var u,l=new c({filterLevel:r.OFF});(u=r).enabledFor=o(l,l.enabledFor),u.trace=o(l,l.trace),u.debug=o(l,l.debug),u.time=o(l,l.time),u.timeEnd=o(l,l.timeEnd),u.info=o(l,l.info),u.warn=o(l,l.warn),u.error=o(l,l.error),u.log=u.info,r.setHandler=function(e){n=e},r.setLevel=function(e){for(var t in l.setLevel(e),i)i.hasOwnProperty(t)&&i[t].setLevel(e)},r.getLevel=function(){return l.getLevel()},r.get=function(e){return i[e]||(i[e]=new c(a({name:e},l.context)))},r.createDefaultHandler=function(e){(e=e||{}).formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(i,o){i=Array.prototype.slice.call(i);var a,s=console.log;o.level===r.TIME?(a=(o.name?"["+o.name+"] ":"")+i[0],"start"===i[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):n(s,[a+": "+((new Date).getTime()-t[a])+"ms"])):(o.level===r.WARN&&console.warn?s=console.warn:o.level===r.ERROR&&console.error?s=console.error:o.level===r.INFO&&console.info?s=console.info:o.level===r.DEBUG&&console.debug?s=console.debug:o.level===r.TRACE&&console.trace&&(s=console.trace),e.formatter(i,o),n(s,i))}},r.useDefaults=function(e){r.setLevel(e&&e.defaultLevel||r.DEBUG),r.setHandler(r.createDefaultHandler(e))},r.setDefaults=r.useDefaults,e.exports?e.exports=r:(r._prevLogger=t.Logger,r.noConflict=function(){return t.Logger=r._prevLogger,r},t.Logger=r)}(gu)}(Gf);var Hf,$f=Gf.exports,Kf=$f.get("web-client-media-engine");function Yf(e){return[eu.VideoMain,eu.VideoSlides].includes(e)?Oc.Video:Oc.Audio}function Jf(e){return e===Oc.Video?Jc.Video:Jc.Audio}Kf.setLevel($f.DEBUG),function(e){e.VideoSourceCountUpdate="video-source-count-update",e.AudioSourceCountUpdate="audio-source-count-update",e.ActiveSpeakerNotification="active-speaker-notification",e.ConnectionStateUpdate="connection-state-update"}(Hf||(Hf={}));var Xf,Qf,ed,td={floorControlledPresentation:!1,disableSimulcast:"Firefox"===zf().name,streamSignalingMode:"SSRC",bundlePolicy:"max-compat",iceServers:void 0,disableContentSimulcast:!0,enableMainAudio:!0,enableMainVideo:!0},nd=function(e){(0,s.Z)(n,e);var t=Br(n);function n(){var e;(0,o.Z)(this,n);var r,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=t.call(this)).sendTransceivers=new(mr()),e.recvTransceivers=new(mr()),e.jmpSessions=new(mr()),e.pendingJmpTasks=[],e.metricsCallback=function(){},e.overuseUpdateCallback=function(){},e.customCodecParameters=new(mr()),e.midMap=new(mr()),e.currentMid=0,e.options=Rr()(Rr()({},td),a),Kf.info("Creating multistream connection with options ".concat(kt()(e.options))),e.initializePeerConnection(),e.streamSignalerManager=new Bf(e.options.streamSignalingMode),e.overuseStateManager=new _f((function(t){return e.overuseUpdateCallback(t)})),e.overuseStateManager.start(),e.statsManager=new Pf((function(){return e.pc.getStats()}),(function(t){return e.preProcessStats(t)}));var s=nu(),c=e.getVideoEncodingOptions(Xc.Main);if(e.createSendTransceiver(eu.VideoMain,s,c),e.createSendTransceiver(eu.AudioMain,s),null===(r=e.sendTransceivers.get(eu.VideoMain))||void 0===r||r.setActive(e.options.enableMainVideo),null===(i=e.sendTransceivers.get(eu.AudioMain))||void 0===i||i.setActive(e.options.enableMainAudio),e.options.floorControlledPresentation){var u=e.getVideoEncodingOptions(Xc.Slides),l=nu();e.createSendTransceiver(eu.VideoSlides,l,u),e.createSendTransceiver(eu.AudioSlides,l)}return e}return(0,a.Z)(n,[{key:"addMid",value:function(e){var t=this.currentMid++,n=this.midMap.get(e)||[];n.push("".concat(t)),this.midMap.set(e,n)}},{key:"clearMids",value:function(){this.midMap=new(mr()),this.currentMid=0}},{key:"initializePeerConnection",value:function(){var e,t=this;null===(e=this.pc)||void 0===e||e.close(),this.pc=new Pc({iceServers:this.options.iceServers,bundlePolicy:this.options.bundlePolicy}),this.pc.on(Pc.Events.ConnectionStateChange,(function(e){return t.emit(Hf.ConnectionStateUpdate,e)})),this.attachMetricsObserver(),this.createDataChannel()}},{key:"getConnectionState",value:function(){return this.pc.getConnectionState()}},{key:"getVideoEncodingOptions",value:function(e){return(e===Xc.Main?!this.options.disableSimulcast:!this.options.disableContentSimulcast)?[{scaleResolutionDownBy:4,active:!1},{scaleResolutionDownBy:2,active:!1},{active:!1}]:[{active:!1}]}},{key:"createSendTransceiver",value:function(e,t,n){var r;try{r=this.pc.addTransceiver(Yf(e),{direction:"sendrecv",sendEncodings:n})}catch(e){throw Kf.error("addTransceiver failed due to : ".concat(e)),e}this.addMid(e);var i=ru(ou(e),t);this.sendTransceivers.set(e,new Mf(r,i)),this.createJmpSession(e)}},{key:"createJmpSession",value:function(e){var t=this,n=new pu(ou(e),au(e));if(n.setTxCallback((function(e){var n;"open"===(null===(n=t.dataChannel)||void 0===n?void 0:n.readyState)?(Kf.info("Sending JMP message: ".concat(e)),t.dataChannel.send(e)):Kf.error("DataChannel not created or not connected. Unable to send JMP message.")})),ou(e)===Jc.Video){var r=0,i=0;n.on(fu.SourceIndication,(function(n){n.sources.forEach((function(e){var n=t.getReceiveSlotById(e.id);n?n._updateSource(e.state,e.csi):Kf.warn("Got source indication for unknown receive slot: ".concat(e.id))})),n.numTotalSources===r&&n.numLiveSources===i||(r=n.numTotalSources,i=n.numLiveSources,t.emit(Hf.VideoSourceCountUpdate,n.numTotalSources,n.numLiveSources,au(e)))})),n.on(fu.ScrRequestReceived,(function(n){t.sendSourceWarnings(e,n.requests),t.updateRequestedStreams(e,n.requests)}))}if(ou(e)===Jc.Audio){var o=0,a=0;n.on(fu.SourceIndication,(function(n){n.sources.forEach((function(e){var n=t.getReceiveSlotById(e.id);n?n._updateSource(e.state,e.csi):Kf.warn("Got source indication for unknown receive slot: ".concat(e.id))})),n.numTotalSources===o&&n.numLiveSources===a||(o=n.numTotalSources,a=n.numLiveSources,t.emit(Hf.AudioSourceCountUpdate,n.numTotalSources,n.numLiveSources,au(e)))})),n.on(fu.ActiveSpeaker,(function(e){return t.emit(Hf.ActiveSpeakerNotification,e)})),n.on(fu.ScrRequestReceived,(function(n){t.updateRequestedStreams(e,n.requests)}))}this.jmpSessions.set(e,n)}},{key:"sendSourceWarnings",value:function(e,t){var n;if(ou(e)===Jc.Video){var r=this.getSendTransceiverOrThrow(e),i=this.streamSignalerManager.getEgressStreamSignalerOrThrow(r.mid),o=(null===(n=r.publishedTrack)||void 0===n?void 0:n.getNumActiveSimulcastLayers())||0,a=[];if(t.forEach((function(e){var t=e.ids,n=e.policySpecificInfo;t.forEach((function(e){Yc(n)&&r.csi!==n.csi?a.push({id:e,state:"invalid source",csi:n.csi}):i.getSenderIds().some((function(t){return cu(e,t)}))?i.getEncodingIndexForStreamId(e)>o&&a.push({id:e,state:"no source",csi:r.csi}):a.push({id:e,state:"invalid source",csi:r.csi})}))})),a.length>0){var s=r.publishedTrack,c=!!s&&s.published&&!s.muted;this.sendSourceIndication(e,+c,a)}}}},{key:"updateRequestedStreams",value:function(e,t){var n=this.getSendTransceiverOrThrow(e),r=this.streamSignalerManager.getEgressStreamSignalerOrThrow(n.mid),i=new(mr()),o=t.filter((function(e){return Yc(e.policySpecificInfo)}));o.length!==t.length&&Kf.warn("Ignoring non-receiver-selected requests"),o.forEach((function(t){var o,a=t.ids,s=t.policySpecificInfo,c=t.codecInfos,u=t.maxPayloadBitsPerSecond;if(a.length>1)throw new Error("More than a single ID being unexpected/invalid ".concat(a));if(0!==a.length)if(n.csi===s.csi){var l=a[0],f=c[0];if(r.getSenderIds().some((function(e){return cu(l,e)}))){var d=r.getEncodingIndexForStreamId(l);-1!==d?i.set(d,{scaleDownRatio:n.getScaleDownRatio(null===(o=null==f?void 0:f.h264)||void 0===o?void 0:o.maxFs),maxPayloadBitsPerSecond:u}):Kf.warn("".concat(e,": Unable to get encoding index for stream ID: ").concat(kt()(l)))}else Kf.warn("".concat(e,": Unable to find matching stream ID for requested ID: ").concat(kt()(l)))}else Kf.warn("csi in the scr request does not match")})),n.setTrackRequested(i.size>0),ou(e)===Jc.Video&&n.updateSimulcastStreamStates(i)}},{key:"createDataChannel",value:function(){var e=this,t=this.pc.createDataChannel("datachannel",{});t.onopen=function(t){Kf.info("DataChannel opened: ",t),e.sendTransceivers.forEach((function(t,n){var r=t.publishedTrack;if(r)if(ou(n)===Jc.Audio)e.sendSourceIndication(n,+!r.muted);else{var i=e.streamSignalerManager.getEgressStreamSignalerOrThrow(t.mid),o=r.muted?"avatar":"live",a=i.getSenderIds().map((function(e){return{id:e,state:o,csi:t.csi}}));e.sendSourceIndication(n,+!r.muted,a)}else e.sendSourceIndication(n,0)})),Kf.info("Flushing pending JMP task queue"),e.pendingJmpTasks.forEach((function(e){return e()})),e.pendingJmpTasks=[]},t.onmessage=function(t){var n;try{n=JSON.parse(t.data)}catch(e){return void Kf.error("Error parsing datachannel JSON: ".concat(e))}Kf.debug("DataChannel got msg: ",n);var r=Wc.fromJson(n);if(r){var i=r.payload;if(Gc(i)){var o=iu(i.mediaFamily,i.mediaContent),a=e.jmpSessions.get(o);a?a.receive(i):Kf.error("Unable to find JMP session for media type ".concat(o,"."))}else Kf.error("Received invalid JMP msg: ".concat(i))}else Kf.error("Received invalid datachannel message: ".concat(t))},t.onclose=function(e){Kf.info("DataChannel closed: ",e)},t.onerror=function(e){Kf.info("DataChannel error: ",e)},this.dataChannel=t}},{key:"close",value:function(){this.sendTransceivers.forEach((function(e){return e.close()})),this.recvTransceivers.forEach((function(e){e.forEach((function(e){return e.close()}))})),this.pc.close()}},{key:"sendSourceIndication",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=function(){var n;null===(n=r.jmpSessions.get(e))||void 0===n||n.updateSourceIndication(1,t,i)};"open"===(null===(n=this.dataChannel)||void 0===n?void 0:n.readyState)?o():this.pendingJmpTasks.push(o)}},{key:"publishTrack",value:function(e){return vu(this,void 0,void 0,p().mark((function t(){var n,r,i,o;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e instanceof hs&&this.options.floorControlledPresentation?Xc.Slides:Xc.Main,r=Jf(e.kind),i=iu(r,n),o=this.getSendTransceiverOrThrow(i),e!==o.publishedTrack){t.next=7;break}return Kf.warn("This track has already been published on the transceiver."),t.abrupt("return",It().resolve());case 7:return this.addTrackListeners(i,e),t.abrupt("return",o.publishTrack(e));case 9:case"end":return t.stop()}}),t,this)})))}},{key:"unpublishTrack",value:function(e){return vu(this,void 0,void 0,p().mark((function t(){var n,r,i,o;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e instanceof hs&&this.options.floorControlledPresentation?Xc.Slides:Xc.Main,r=Jf(e.kind),i=iu(r,n),o=this.getSendTransceiverOrThrow(i),t.abrupt("return",o.unpublishTrack());case 5:case"end":return t.stop()}}),t,this)})))}},{key:"addTrackListeners",value:function(e,t){var n=this,r=function(){var t=n.getVideoSources(e);null!=t&&n.sendSourceIndication(e,1,t)};t.on(fs.Events.TrackConstraintsChange,r);var i=function(t){if(ou(e)===Jc.Audio)n.sendSourceIndication(e,+!t.trackState.muted);else{var r=n.getVideoSources(e);null!=r&&n.sendSourceIndication(e,+!t.trackState.muted,r)}};t.on(fs.Events.Muted,i);t.on(fs.Events.PublishedStateUpdate,(function o(a){if(a.isPublished||(t.off(fs.Events.Muted,i),t.off(fs.Events.PublishedStateUpdate,o),t.off(fs.Events.TrackConstraintsChange,r)),ou(e)===Jc.Audio)n.sendSourceIndication(e,+a.isPublished);else{var s=n.getVideoSources(e);null!=s&&n.sendSourceIndication(e,+a.isPublished,s)}}))}},{key:"getVideoSources",value:function(e){var t,n,r,i=this.getSendTransceiverOrThrow(e),o=this.streamSignalerManager.getEgressStreamSignaler(i.mid);if(!o)return null;var a=(null===(t=i.publishedTrack)||void 0===t?void 0:t.getNumActiveSimulcastLayers())||0,s=null===(n=i.publishedTrack)||void 0===n?void 0:n.published,c=!0===(null===(r=i.publishedTrack)||void 0===r?void 0:r.muted);return o.getSenderIds().map((function(e){return{id:e,state:s?c?"avatar":a<=o.getEncodingIndexForStreamId(e)?"no source":"live":"no source",csi:i.csi}}))}},{key:"createReceiveSlot",value:function(e){return vu(this,void 0,void 0,p().mark((function t(){var n,r,i=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.pc.addTransceiver(Yf(e),{direction:"recvonly"}),this.addMid(e),r=new Rf(n,(function(e){var t=i.streamSignalerManager.getIngressStreamSignaler(e);return t?t.getReceiverId():null})),!this.pc.getRemoteDescription()){t.next=6;break}return t.next=6,this.doLocalOfferAnswer();case 6:return this.recvTransceivers.set(e,[].concat((0,Pn.Z)(this.recvTransceivers.get(e)||[]),[r])),t.abrupt("return",r.receiveSlot);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"getIngressPayloadType",value:function(e,t){var n,r,i,o=t.split("/")[1],a=null===(n=this.sendTransceivers.get(e))||void 0===n?void 0:n.mid,s=ef(null===(r=this.pc.getLocalDescription())||void 0===r?void 0:r.sdp),c=ef(null===(i=this.pc.getRemoteDescription())||void 0===i?void 0:i.sdp).avMedia.filter((function(e){return a===e.mid})).map((function(e){return(0,Pn.Z)(e.codecs.values())})).flat().filter((function(e){return e.name===o})),u=s.avMedia.filter((function(e){return a===e.mid})).map((function(e){return(0,Pn.Z)(e.codecs.values())})).flat().filter((function(e){return e.name===o}));if(!c||!u||0===c.length||0===u.length)throw new Error("sender codecs or receiver codecs is undefined or empty");var l=c[0],f=u.find((function(e){return Dc(l,e)}));if(!f||!f.pt)throw new Error("ingress payload type is not well defined in receiver codecs");return f.pt}},{key:"createOffer",value:function(){return vu(this,void 0,void 0,p().mark((function e(){var t=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pc.getLocalDescription()||this.currentMid++,e.abrupt("return",this.pc.createOffer().then((function(e){if(!e.sdp)throw new Error("No SDP offer");return e.sdp=t.preProcessLocalOffer(e.sdp),t.pc.setLocalDescription(e)})).then((function(){return e=t.pc,new(It())((function(t,n){var r=function(){var r=e.getLocalDescription();r?t(r):n(new Error("Local description was null"))};e.on(Pc.Events.IceGatheringStateChange,(function(e){"complete"===e.target.iceGatheringState&&r()})),"complete"===e.iceGatheringState&&r()}));var e})).then((function(e){return{sdp:t.prepareLocalOfferForRemoteServer(e.sdp),type:e.type}})));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"setAnswer",value:function(e){return vu(this,void 0,void 0,p().mark((function t(){var n,r,i=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!this.pc.getRemoteDescription(),r=this.preProcessRemoteAnswer(e),t.abrupt("return",this.pc.setRemoteDescription({type:"answer",sdp:r}).then((function(){n&&i.customCodecParameters.size>0&&i.doLocalOfferAnswer()})));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"doLocalOfferAnswer",value:function(){var e;return vu(this,void 0,void 0,p().mark((function t(){var n,r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.pc.createOffer();case 2:if((n=t.sent).sdp){t.next=5;break}throw new Error("No SDP offer");case 5:return n.sdp=this.preProcessLocalOffer(n.sdp),t.next=8,this.pc.setLocalDescription(n);case 8:return r=this.preProcessRemoteAnswer(null===(e=this.pc.getRemoteDescription())||void 0===e?void 0:e.sdp),t.abrupt("return",this.pc.setRemoteDescription({type:"answer",sdp:r}));case 10:case"end":return t.stop()}}),t,this)})))}},{key:"enableMultistreamAudio",value:function(e){var t=this.sendTransceivers.get(eu.AudioMain);return!!t&&t.setActive(e)}},{key:"preProcessLocalOffer",value:function(e){var t,n=this,r=ef(e);return If(r,["h264","opus","rtx"]),t=2e7,r.avMedia.forEach((function(e){e.bandwidth=new cl("TIAS",t)})),r.avMedia.filter((function(e){return"recvonly"===e.direction})).forEach((function(e){n.streamSignalerManager.getOrCreateIngressStreamSignaler(e.mid).signalLocalStreams(e)})),r.avMedia.filter((function(e){return"sendrecv"===e.direction})).forEach((function(e){var t=n.streamSignalerManager.getOrCreateEgressStreamSignaler(e.mid),r=function(e){return!!e.simulcast||e.ssrcGroups.map((function(e){return e.semantics})).some((function(e){return"SIM"===e}))}(e),i="video"===e.type;t.signalStreams(r,i,e),"video"===e.type&&(0,Pn.Z)(e.codecs.values()).filter((function(e){return"H264"===e.name})).forEach((function(e){e.fmtParams.set("max-mbps","".concat(244800)),e.fmtParams.set("max-fs","".concat(8160))}));var o=(0,Pn.Z)(n.sendTransceivers.keys()).find((function(t){var r;return(null===(r=n.sendTransceivers.get(t))||void 0===r?void 0:r.mid)===e.mid}));o&&n.customCodecParameters.has(o)&&(0,Pn.Z)(e.codecs.values()).filter((function(t){return t.name===("audio"===e.type?"opus":"H264")})).forEach((function(e){var t;null===(t=n.customCodecParameters.get(o))||void 0===t||t.forEach((function(t,n){null===t?e.fmtParams.delete(n):e.fmtParams.set(n,"".concat(t))}))}))})),"Firefox"!==zf().name&&Of(r,this.options.bundlePolicy,this.midMap),r.toString()}},{key:"prepareLocalOfferForRemoteServer",value:function(e){var t=ef(e),n=new(mr());this.sendTransceivers.forEach((function(e,t){n.set(e.mid,au(t))})),function(e,t){t.forEach((function(t,n){var r=e.media.find((function(e){return e.mid===n}));if(!r)throw new Error("Error trying to set content type for mid ".concat(n,": not found in SDP"));t===Xc.Slides&&r.addLine(new pl(["slides"]))}))}(t,n);var r,i,o=new(mr());return this.sendTransceivers.forEach((function(e,t){o.set(t,e.csi)})),Lf(t,o,this.options.streamSignalingMode),i=[],(r=t).media=r.media.filter((function(e){return(e instanceof Hl||e instanceof Kl&&"recvonly"!==e.direction)&&(i.push(e.mid),!0)})),r.session.groups.forEach((function(e){e.mids=e.mids.filter((function(e){return i.includes(e)}))})),t.avMedia.filter((function(e){return"sendrecv"===e.direction&&"video"===e.type})).forEach((function(e){var t=e.ssrcGroups.find((function(e){return"SIM"===e.semantics}));t&&t.ssrcs.forEach((function(t,n){e.addLine(new Fl(t,"fmtp","* max-fs=".concat(Nf[n])))}))})),t.toString()}},{key:"preProcessRemoteAnswer",value:function(e){var t,n=ef(e);return Af(ef(null===(t=this.pc.getLocalDescription())||void 0===t?void 0:t.sdp),n,this.streamSignalerManager),"Firefox"===zf().name&&Of(n,this.options.bundlePolicy,this.midMap),n.toString()}},{key:"getSendTransceiverOrThrow",value:function(e){var t=this.sendTransceivers.get(e);if(!t)throw new Error("Unable to find matching transceiver for media type ".concat(e));return t}},{key:"getPublishedTracks",value:function(){return(0,Pn.Z)(this.sendTransceivers.values()).map((function(e){return e.publishedTrack})).filter(Boolean)}},{key:"setCodecParameters",value:function(e,t){return vu(this,void 0,void 0,p().mark((function n(){var r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.customCodecParameters.get(e)||new(mr()),Un()(t).forEach((function(e){var t=(0,Nn.Z)(e,2),n=t[0],i=t[1];r.set(n,i)})),this.customCodecParameters.set(e,r),!this.pc.getRemoteDescription()){n.next=6;break}return n.next=6,this.doLocalOfferAnswer();case 6:case"end":return n.stop()}}),n,this)})))}},{key:"deleteCodecParameters",value:function(e,t){return vu(this,void 0,void 0,p().mark((function n(){var r;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.customCodecParameters.get(e)||new(mr()),t.forEach((function(e){r.set(e,null)})),this.customCodecParameters.set(e,r),!this.pc.getRemoteDescription()){n.next=6;break}return n.next=6,this.doLocalOfferAnswer();case 6:case"end":return n.stop()}}),n,this)})))}},{key:"requestMedia",value:function(e,t){var n,r=this,i=function(){var n,i=r.jmpSessions.get(e);if(i){var o=[];t.forEach((function(e){return e.receiveSlots.forEach((function(e){e.id?o.push(e.id):Kf.error("Running subscribe task, but ReceiveSlot ID is missing!")}))})),null===(n=r.recvTransceivers.get(e))||void 0===n||n.forEach((function(e){o.some((function(t){return cu(t,e.receiveSlot.id)}))||e.receiveSlot._updateSource("no source",void 0)})),i.sendRequests(t.map((function(e){return e._toJmpScrRequest()})))}else Kf.error("Unable to find jmp session for ".concat(e))};"open"===(null===(n=this.dataChannel)||void 0===n?void 0:n.readyState)?i():this.pendingJmpTasks.push(i)}},{key:"renewPeerConnection",value:function(e){var t=this;e&&(this.options=Rr()(Rr()({},td),e)),Kf.info("Renewing multistream connection with options ".concat(kt()(this.options))),this.clearMids(),this.initializePeerConnection(),this.streamSignalerManager=new Bf(this.options.streamSignalingMode);var n=nu();this.sendTransceivers.forEach((function(e,r){var i;t.addMid(r),e.replaceTransceiver(t.pc.addTransceiver(Yf(r),{direction:"sendrecv",sendEncodings:ou(r)===Jc.Video?t.getVideoEncodingOptions(au(r)):void 0})),e.csi=ru(ou(r),n),null===(i=t.jmpSessions.get(r))||void 0===i||i.close(),t.createJmpSession(r)})),this.recvTransceivers.forEach((function(e,n){e.forEach((function(e){t.addMid(n),e.replaceTransceiver(t.pc.addTransceiver(Yf(n),{direction:"recvonly"}))}))}))}},{key:"getReceiveSlotById",value:function(e){return(0,Pn.Z)(this.recvTransceivers.values()).flat().map((function(e){return e.receiveSlot})).find((function(t){var n=t.id||{};return xt()(n).length===xt()(e).length&&xt()(n).every((function(t){return Object.prototype.hasOwnProperty.call(e,t)&&n[t]===e[t]}))}))}},{key:"getStats",value:function(){return this.statsManager.getStats()}},{key:"getTransceiverStats",value:function(){return vu(this,void 0,void 0,p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vf(this.sendTransceivers,this.recvTransceivers));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"preProcessStats",value:function(e){return vu(this,void 0,void 0,p().mark((function t(){var n=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,It().all((0,Pn.Z)(this.sendTransceivers.entries()).map((function(t){var r=(0,Nn.Z)(t,2),i=r[0],o=r[1];return vu(n,void 0,void 0,p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.getStats();case 2:t.sent.forEach((function(t){var n;if("outbound-rtp"===t.type){var r=e.get(t.id);r.mid=o.mid,r.csi=o.csi,r.mediaType=i;var a=null===(n=o.publishedTrack)||void 0===n?void 0:n.underlyingTrack.getSettings();(null==a?void 0:a.frameRate)&&(r.targetFrameRate=null==a?void 0:a.frameRate),e.set(t.id,r)}}));case 3:case"end":return t.stop()}}),t)})))})));case 2:return t.next=4,It().all((0,Pn.Z)(this.recvTransceivers.entries()).map((function(t){var r=(0,Nn.Z)(t,2),i=r[0],o=r[1];return vu(n,void 0,void 0,p().mark((function t(){var n=this;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,It().all(o.map((function(t){return vu(n,void 0,void 0,p().mark((function n(){var r=this;return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getStats();case 2:n.sent.forEach((function(n){var o;if("inbound-rtp"===n.type){var a=e.get(n.id);a.mid=null===(o=t.receiveSlot.id)||void 0===o?void 0:o.mid,a.csi=t.receiveSlot.currentRxCsi,a.mediaType=i;var s=r.streamSignalerManager.getIngressStreamSignaler(a.mid);s&&Rr()(a,s.getReceiverId()),e.set(n.id,a)}}));case 3:case"end":return n.stop()}}),n)})))})));case 2:case"end":return t.stop()}}),t)})))})));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"attachMetricsObserver",value:function(){var e=this;Ku(this.pc.getUnderlyingRTCPeerConnection(),(function(t){return e.metricsCallback(t)}),5e3)}},{key:"setMetricsCallback",value:function(e){this.metricsCallback=e}},{key:"setOveruseUpdateCallback",value:function(e){this.overuseUpdateCallback=e}},{key:"getCsiByMediaType",value:function(e){var t;return null===(t=this.sendTransceivers.get(e))||void 0===t?void 0:t.csi}},{key:"getAllCsis",value:function(){return{audioMain:this.getCsiByMediaType(eu.AudioMain),audioSlides:this.getCsiByMediaType(eu.AudioSlides),videoMain:this.getCsiByMediaType(eu.VideoMain),videoSlides:this.getCsiByMediaType(eu.VideoSlides)}}}]),n}(bf);function rd(e,t){var n=xt()(e);if(lr()){var r=lr()(e);t&&(r=r.filter((function(t){return Wn()(e,t).enumerable}))),n.push.apply(n,r)}return n}function id(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rd(Object(n),!0).forEach((function(t){Nr(e,t,n[t])})):dr()?hr()(e,dr()(n)):rd(Object(n)).forEach((function(t){$n()(e,t,Wn()(n,t))}))}return e}!function(e){e.CONNECTION_STATE_CHANGED="connectionState:changed",e.REMOTE_TRACK_ADDED="remoteTrack:added",e.ROAP_MESSAGE_TO_SEND="roap:messageToSend",e.ROAP_STARTED="roap:started",e.ROAP_FAILURE="roap:failure",e.ROAP_DONE="roap:done",e.DTMF_TONE_CHANGED="dtmfTone:changed",e.ACTIVE_SPEAKERS_CHANGED="activeSpeakers:changed",e.VIDEO_SOURCES_COUNT_CHANGED="videoSourcesCount:changed",e.AUDIO_SOURCES_COUNT_CHANGED="audioSourcesCount:changed"}(Xf||(Xf={})),function(e){e.AUDIO="audio",e.VIDEO="video",e.SCREENSHARE_VIDEO="screenShareVideo"}(Qf||(Qf={})),function(e){e.DOUBLECONFLICT="DOUBLECONFLICT",e.CONFLICT="CONFLICT",e.FAILED="FAILED",e.INVALID_STATE="INVALID_STATE",e.NOMATCH="NOMATCH",e.OUT_OF_ORDER="OUT_OF_ORDER",e.REFUSED="REFUSED",e.RETRY="RETRY",e.TIMEOUT="TIMEOUT"}(ed||(ed={}));var od=[{type:"audio",kind:"audio"},{type:"video",kind:"video"},{type:"screenShareVideo",kind:"video"}],ad=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i){var a;return(0,o.Z)(this,n),a=t.call(this),Nr((0,At.Z)(a),"id",void 0),Nr((0,At.Z)(a),"config",void 0),Nr((0,At.Z)(a),"pc",void 0),Nr((0,At.Z)(a),"localTracks",void 0),Nr((0,At.Z)(a),"transceivers",void 0),Nr((0,At.Z)(a),"receiveOptions",void 0),Nr((0,At.Z)(a),"mediaConnectionState",void 0),Nr((0,At.Z)(a),"lastEmittedMediaConnectionState",void 0),a.config=e,a.receiveOptions=id({},r.receive),a.localTracks=id({},r.send),a.id=i||"MediaConnection",a.transceivers={},a.mediaConnectionState=Rs.New,a.pc=new window.RTCPeerConnection({iceServers:a.config.iceServers,bundlePolicy:"max-compat"}),a.pc.ontrack=a.onTrack.bind((0,At.Z)(a)),a.pc.oniceconnectionstatechange=a.onIceConnectionStateChange.bind((0,At.Z)(a)),a.pc.onconnectionstatechange=a.onConnectionStateChange.bind((0,At.Z)(a)),a}return(0,a.Z)(n,[{key:"log",value:function(e,t){Co().info("".concat(this.id,":").concat(e," ").concat(t))}},{key:"warn",value:function(e,t){Co().warn("".concat(this.id,":").concat(e," ").concat(t))}},{key:"error",value:function(e,t,n){Co().error("".concat(this.id,":").concat(e," ").concat(t," ").concat(ko(n)))}},{key:"createTransceivers",value:function(){var e=this;od.forEach((function(t){var n=t.type,r=n,i=n,o=Ca(t.kind,e.receiveOptions[r],e.localTracks[r]);e.config.skipInactiveTransceivers&&"inactive"===o.direction||(e.transceivers[i]=e.pc.addTransceiver(o.trackOrKind,{direction:o.direction}))})),this.setupTransceiverListeners()}},{key:"initializeTransceivers",value:function(e){if(this.pc.getTransceivers().length>0)throw this.error("initiateOffer()","SDP negotiation already started"),new Error("SDP negotiation already started");e?this.addLocalTracks():this.createTransceivers()}},{key:"close",value:function(){this.pc.close(),this.pc.ontrack=null,this.pc.oniceconnectionstatechange=null,this.pc.onconnectionstatechange=null,this.pc.onicegatheringstatechange=null,this.pc.onicecandidate=null,this.pc.onicecandidateerror=null}},{key:"getConfig",value:function(){return this.config}},{key:"getSendReceiveOptions",value:function(){return{send:this.localTracks,receive:this.receiveOptions}}},{key:"updateRemoteQualityLevel",value:function(e){return e!==this.receiveOptions.remoteQualityLevel&&(this.receiveOptions.remoteQualityLevel=e,!0)}},{key:"updateTransceivers",value:function(e){var t=this,n=!1;return this.receiveOptions.audio=e.receive.audio,this.receiveOptions.video=e.receive.video,this.receiveOptions.screenShareVideo=e.receive.screenShareVideo,this.identifyTransceivers(),od.forEach((function(r){var i=r.type,o=r.kind,a=i,s=i,c=e.send[a],u=t.transceivers[s];if(void 0!==c&&c!==t.localTracks[a]&&(t.localTracks[a]=c,u&&(t.log("updateTransceivers()",'replacing sender track on "'.concat(i,'" transceiver')),u.sender.replaceTrack(c))),u){var l=Ca(o,t.receiveOptions[a],t.localTracks[a]);u.direction!==l.direction&&(t.log("updateTransceivers()","updating direction to ".concat(l.direction,' on "').concat(i,'" transceiver')),u.direction=l.direction,n=!0)}})),n}},{key:"updateSendOptions",value:function(e){return this.updateTransceivers({send:e,receive:id({},this.receiveOptions)})}},{key:"updateReceiveOptions",value:function(e){var t=!1;return this.updateRemoteQualityLevel(e.remoteQualityLevel)&&(t=!0),this.updateTransceivers({send:this.localTracks,receive:e})&&(t=!0),t}},{key:"updateSendReceiveOptions",value:function(e){var t=!1;return this.updateRemoteQualityLevel(e.receive.remoteQualityLevel)&&(t=!0),this.updateTransceivers(e)&&(t=!0),t}},{key:"getConnectionState",value:function(){return this.log("getConnectionState()","called, returning ".concat(this.mediaConnectionState)),this.mediaConnectionState}},{key:"getStats",value:function(){return this.pc.getStats()}},{key:"getTransceiverStats",value:function(){var e=this;return Lr(p().mark((function t(){var n,r,i,o,a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={audio:{senders:[],receivers:[]},video:{senders:[],receivers:[]},screenShareAudio:{senders:[],receivers:[]},screenShareVideo:{senders:[],receivers:[]}},r=p().mark((function t(r){var i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=e.transceivers[r])){t.next=6;break}return t.next=4,i.sender.getStats().then((function(e){var t,o;n[r].senders.push({report:e,currentDirection:i.currentDirection,localTrackLabel:null===(t=i.sender)||void 0===t||null===(o=t.track)||void 0===o?void 0:o.label})}));case 4:return t.next=6,i.receiver.getStats().then((function(e){var t,o;n[r].receivers.push({report:e,currentDirection:i.currentDirection,localTrackLabel:null===(t=i.sender)||void 0===t||null===(o=t.track)||void 0===o?void 0:o.label})}));case 6:case"end":return t.stop()}}),t)})),i=0,o=od;case 3:if(!(i<o.length)){t.next=9;break}return a=o[i].type,t.delegateYield(r(a),"t0",6);case 6:i++,t.next=3;break;case 9:return t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)})))()}},{key:"insertDTMF",value:function(e,t,n){if(!this.transceivers.audio)throw new Error("audio transceiver missing");if(!this.transceivers.audio.sender)throw new Error("this.transceivers.audio.sender is null");if(!this.transceivers.audio.sender.dtmf)throw new Error("this.transceivers.audio.sender.dtmf is null");this.transceivers.audio.sender.dtmf.insertDTMF(e.toUpperCase(),t,n)}},{key:"setupTransceiverListeners",value:function(){var e,t;null!==(e=this.transceivers.audio)&&void 0!==e&&null!==(t=e.sender)&&void 0!==t&&t.dtmf&&(this.transceivers.audio.sender.dtmf.ontonechange=this.onToneChange.bind(this))}},{key:"onToneChange",value:function(e){this.log("onToneChange()",'emitting Event.DTMF_TONE_CHANGED with tone="'.concat(e.tone,'"')),this.emit(Xf.DTMF_TONE_CHANGED,{tone:e.tone})}},{key:"identifyTransceivers",value:function(){var e=this;if(!this.transceivers.audio&&!this.transceivers.video&&!this.transceivers.screenShareVideo){var t=this.pc.getTransceivers();this.log("identifyTransceivers()","transceivers.length=".concat(t.length)),t.forEach((function(t,n){e.log("identifyTransceivers()","transceiver[".concat(n,"].mid=").concat(t.mid))}));var n=(0,Nn.Z)(t,3);this.transceivers.audio=n[0],this.transceivers.video=n[1],this.transceivers.screenShareVideo=n[2],this.setupTransceiverListeners()}}},{key:"onTrack",value:function(e){var t,n,r,i,o,a,s,c,u,l;this.log("onTrack()","callback called: event=".concat(kt()(e)));var f="0",d="1",p="2",h=e.track,v=null;switch(this.identifyTransceivers(),null!==(t=e.transceiver)&&void 0!==t&&t.mid?(this.log("onTrack()","identifying track by event.transceiver.mid"),v=e.transceiver.mid):v=h.id===(null===(n=this.transceivers.audio)||void 0===n||null===(r=n.receiver)||void 0===r||null===(i=r.track)||void 0===i?void 0:i.id)?f:h.id===(null===(o=this.transceivers.video)||void 0===o||null===(a=o.receiver)||void 0===a||null===(s=a.track)||void 0===s?void 0:s.id)?d:h.id===(null===(c=this.transceivers.screenShareVideo)||void 0===c||null===(u=c.receiver)||void 0===u||null===(l=u.track)||void 0===l?void 0:l.id)?p:null,this.log("onTrack()","trackMediaID=".concat(v)),v){case f:this.log("onTrack()","emitting Event.REMOTE_TRACK_ADDED with type=AUDIO"),this.emit(Xf.REMOTE_TRACK_ADDED,{type:Qf.AUDIO,track:h});break;case d:this.log("onTrack()","emitting Event.REMOTE_TRACK_ADDED with type=VIDEO"),this.emit(Xf.REMOTE_TRACK_ADDED,{type:Qf.VIDEO,track:h});break;case p:this.log("onTrack()","emitting Event.REMOTE_TRACK_ADDED with type=SCREENSHARE_VIDEO"),this.emit(Xf.REMOTE_TRACK_ADDED,{type:Qf.SCREENSHARE_VIDEO,track:h});break;default:this.error("onTrack()","failed to match remote track media id: ".concat(v))}}},{key:"addLocalTracks",value:function(){this.log("addLocalTracks()","adding tracks ".concat(kt()(this.localTracks))),this.localTracks.audio&&this.pc.addTrack(this.localTracks.audio),this.localTracks.video&&this.pc.addTrack(this.localTracks.video),this.localTracks.screenShareVideo&&this.pc.addTrack(this.localTracks.screenShareVideo)}},{key:"onConnectionStateChange",value:function(){this.log("onConnectionStateChange()","callback called: connectionState=".concat(this.pc.connectionState)),this.evaluateMediaConnectionState()}},{key:"onIceConnectionStateChange",value:function(){this.log("onIceConnectionStateChange()","callback called: iceConnectionState=".concat(this.pc.iceConnectionState)),this.evaluateMediaConnectionState()}},{key:"evaluateMediaConnectionState",value:function(){var e=this.pc.connectionState,t=this.pc.iceConnectionState,n=[e,t];n.some((function(e){return"closed"===e}))?this.mediaConnectionState=Rs.Closed:n.some((function(e){return"failed"===e}))?this.mediaConnectionState=Rs.Failed:n.some((function(e){return"disconnected"===e}))?this.mediaConnectionState=Rs.Disconnected:n.every((function(e){return"connected"===e||"completed"===e}))?this.mediaConnectionState=Rs.Connected:this.mediaConnectionState=Rs.Connecting,this.log("evaluateConnectionState","iceConnectionState=".concat(t," rtcPcConnectionState=").concat(e," => mediaConnectionState=").concat(this.mediaConnectionState)),this.lastEmittedMediaConnectionState!==this.mediaConnectionState&&(this.emit(Xf.CONNECTION_STATE_CHANGED,{state:this.mediaConnectionState}),this.lastEmittedMediaConnectionState=this.mediaConnectionState)}},{key:"createSdpMungingConfig",value:function(){if(this.receiveOptions.remoteQualityLevel){var e={LOW:1620,MEDIUM:3600,HIGH:8192};if(!e[this.receiveOptions.remoteQualityLevel])throw new Error("invalid value for receiveOptions.remoteQualityLevel: ".concat(this.receiveOptions.remoteQualityLevel));return this.config.sdpMunging.h264MaxFs&&this.warn("createSdpMungingConfig","conflict: both config.sdpMunging.h264MaxFs and receiveOptions.remoteQualityLevel are set, remoteQualityLevel will override the config"),id(id({},this.config.sdpMunging),{},{h264MaxFs:e[this.receiveOptions.remoteQualityLevel]})}return this.config.sdpMunging}},{key:"createLocalOffer",value:function(){var e=this,t=this.createSdpMungingConfig();return this.pc.createOffer().then((function(n){e.log("createLocalOffer","local SDP offer created");var r={type:n.type,sdp:Oa(t,(null==n?void 0:n.sdp)||"")};return e.pc.setLocalDescription(r)})).then((function(){return e.waitForIceCandidates()})).then((function(){var n;return{sdp:Aa(t,(null===(n=e.pc.localDescription)||void 0===n?void 0:n.sdp)||"")}})).catch((function(e){throw e instanceof po||e instanceof lo?e:new go("createLocalOffer() failure: ".concat(e.message),{cause:e})}))}},{key:"handleRemoteOffer",value:function(e){var t=this;if(this.log("handleRemoteOffer","called"),!e)return It().reject(new wo("SDP missing"));var n=La(this.config.sdpMunging,e),r=this.createSdpMungingConfig();return this.pc.setRemoteDescription(new window.RTCSessionDescription({type:"offer",sdp:n})).then((function(){return t.pc.createAnswer()})).then((function(e){var n={type:e.type,sdp:Oa(r,(null==e?void 0:e.sdp)||"")};return t.pc.setLocalDescription(n)})).then((function(){return t.waitForIceCandidates()})).then((function(){var e;return{sdp:Aa(r,(null===(e=t.pc.localDescription)||void 0===e?void 0:e.sdp)||"")}})).catch((function(e){throw e instanceof po||e instanceof lo?e:new wo("handleRemoteOffer() failure: ".concat(e.message),{cause:e})}))}},{key:"handleRemoteAnswer",value:function(e){if(this.log("handleRemoteAnswer","called"),!e)return It().reject(new vo("SDP answer missing"));var t=La(this.config.sdpMunging,e);return this.pc.setRemoteDescription(new window.RTCSessionDescription({type:"answer",sdp:t})).catch((function(e){throw new vo("handleRemoteAnswer() failure: ".concat(e.message),{cause:e})}))}},{key:"waitForIceCandidates",value:function(){var e=this;return new(It())((function(t,n){var r=performance.now(),i=!1,o=function(){var t;return function(e,t){if(!t)return new Error("SDP is missing");var n,r=jr(xa(t).avMedia);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.iceInfo.candidates.length)return new po("ice candidates missing for m-line with mid=".concat(i.mid));if(!e.allowPort0&&0===i.port)return new lo("Found invalid port number 0 at m-line with mid=".concat(i.mid));if(!i.iceInfo.pwd||!i.iceInfo.ufrag)return new po("ice ufrag and password not found for m-line with mid=".concat(i.mid));if(e.requireH264&&"video"===i.type&&!ka(i))return new lo("H264 codec is missing for video media description with mid=".concat(i.mid))}}catch(e){r.e(e)}finally{r.f()}return!1}({allowPort0:!!e.config.sdpMunging.convertPort9to0,requireH264:!!e.config.requireH264},null===(t=e.pc.localDescription)||void 0===t?void 0:t.sdp)},a=function(){if(!i){var a=performance.now()-r;e.log("waitForIceCandidates()","checking SDP...");var s=o();s&&(e.error("waitForIceCandidates()","SDP not valid after waiting: ".concat(s.message)),n(s)),e.log("waitForIceCandidates()","It took ".concat(a," milliseconds to gather ice candidates")),i=!0,e.pc.onicegatheringstatechange=null,e.pc.onicecandidate=null,e.pc.onicecandidateerror=null,t()}};if("complete"===e.pc.iceGatheringState&&!1===o())return e.log("waitForIceCandidates()",'iceGatheringState is already "complete" and local SDP is valid'),void t();e.log("waitForIceCandidates()","waiting for ICE candidates to be gathered..."),e.pc.onicegatheringstatechange=function(){e.log("waitForIceCandidates()","iceGatheringState changed to ".concat(e.pc.iceGatheringState)),"complete"===e.pc.iceGatheringState&&a()},e.pc.onicecandidate=function(t){var n,r;null===t.candidate?(e.log("waitForIceCandidates()","evt.candidate === null received"),a()):e.log("waitForIceCandidates()","ICE Candidate(".concat(null===(n=t.candidate)||void 0===n?void 0:n.sdpMLineIndex,"): ").concat(null===(r=t.candidate)||void 0===r?void 0:r.candidate))},e.pc.onicecandidateerror=function(t){e.warn("waitForIceCandidates()","onicecandidateerror: ".concat(t))}}))}}]),n}(Eo),sd=!0,cd=!0;function ud(e,t,n){var r=e.match(t);return r&&r.length>=n&&Xn()(r[n],10)}function ld(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new(mr())),this._eventMap[t].set(r,o),i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===xt()(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},$n()(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function fd(e){return"boolean"!=typeof e?new Error("Argument type: "+(0,Gn.Z)(e)+". Please use a boolean."):(sd=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function dd(e){return"boolean"!=typeof e?new Error("Argument type: "+(0,Gn.Z)(e)+". Please use a boolean."):(cd=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function pd(){if("object"===("undefined"==typeof window?"undefined":(0,Gn.Z)(window))){if(sd)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function hd(e,t){cd&&console.warn(e+" is deprecated, please use "+t+" instead.")}function vd(e){return"[object Object]"===Object.prototype.toString.call(e)}function md(e){return vd(e)?xt()(e).reduce((function(t,n){var r=vd(e[n]),i=r?md(e[n]):e[n],o=r&&!xt()(i).length;return void 0===i||o?t:Rr()(t,(0,f.Z)({},n,i))}),{}):e}function gd(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),xt()(t).forEach((function(r){r.endsWith("Id")?gd(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){gd(e,e.get(t),n)}))})))}function yd(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new(mr());if(null===t)return i;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&gd(e,n,i)}))})),i}var bd=pd;function wd(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!==(0,Gn.Z)(e)||e.mandatory||e.optional)return e;var t={};return xt()(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===(0,Gn.Z)(e[n])?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),(o={})[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(kt()(e)))&&"object"===(0,Gn.Z)(e.audio)){var o=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};o((e=JSON.parse(kt()(e))).audio,"autoGainControl","googAutoGainControl"),o(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===(0,Gn.Z)(e.video)){var a=e.video.facingMode;a=a&&("object"===(0,Gn.Z)(a)?a:{ideal:a});var s,c=t.version<66;if(a&&("user"===a.exact||"environment"===a.exact||"user"===a.ideal||"environment"===a.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||c))if(delete e.video.facingMode,"environment"===a.exact||"environment"===a.ideal?s=["back","rear"]:"user"!==a.exact&&"user"!==a.ideal||(s=["front"]),s)return n.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return s.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&s.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=a.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),bd("chrome: "+kt()(e)),i(e)}));e.video=r(e.video)}return bd("chrome: "+kt()(e)),i(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){var a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return i(e,(function(e){return a(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return It().reject(o(e))}))}))}}}}function _d(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Ed(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){$n()(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var i;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else ld(e,"track",(function(e){return e.transceiver||$n()(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function Sd(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},$n()(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Rd(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],o=n[2];if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new(mr())(xt()(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){return t.apply(this,[function(e){i(s(a(e)))},r])}return new(It())((function(n,r){t.apply(e,[function(e){n(s(a(e)))},r])})).then(i,o)}}}function xd(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return yd(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),ld(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return yd(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,n,r,o=arguments[0];return this.getSenders().forEach((function(e){e.track===o&&(t?r=!0:t=e)})),this.getReceivers().forEach((function(e){return e.track===o&&(n?r=!0:n=e),e.track===o})),r||t&&n?It().reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():It().reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}}function Cd(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},xt()(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&xt()(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}function kd(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Cd(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),It().resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var a=new e.MediaStream([t]);this._streams[n.id]=a,this._reverseStreams[a.id]=n,this.addStream(a)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=(0,f.Z)({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var r=s(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return s(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){var n=t.sdp;return xt()(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var a=Wn()(e.RTCPeerConnection.prototype,"localDescription");$n()(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,n=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{},xt()(this._streams).forEach((function(r){n._streams[r].getTracks().find((function(t){return e.track===t}))&&(t=n._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var n=t.sdp;return xt()(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function Td(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=(0,f.Z)({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}))}function Id(e,t){ld(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var Od=v()({__proto__:null,shimMediaStream:_d,shimOnTrack:Ed,shimGetSendersWithDtmf:Sd,shimGetStats:Rd,shimSenderReceiverGetStats:xd,shimAddTrackRemoveTrackWithNative:Cd,shimAddTrackRemoveTrack:kd,shimPeerConnection:Td,fixNegotiationNeeded:Id,shimGetUserMedia:wd,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});function Ad(e,t){var n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){hd("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var i=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===(0,Gn.Z)(e)&&"object"===(0,Gn.Z)(e.audio)&&(e=JSON.parse(kt()(e)),i(e.audio,"autoGainControl","mozAutoGainControl"),i(e.audio,"noiseSuppression","mozNoiseSuppression")),o(e)},r&&r.prototype.getSettings){var a=r.prototype.getSettings;r.prototype.getSettings=function(){var e=a.apply(this,arguments);return i(e,"mozAutoGainControl","autoGainControl"),i(e,"mozNoiseSuppression","noiseSuppression"),e}}if(r&&r.prototype.applyConstraints){var s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(0,Gn.Z)(e)&&(e=JSON.parse(kt()(e)),i(e,"autoGainControl","mozAutoGainControl"),i(e,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[e])}}}}function Ld(e){"object"===(0,Gn.Z)(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&$n()(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function Md(e,t){if("object"===(0,Gn.Z)(e)&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=(0,f.Z)({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),i=e[0],o=e[1],a=e[2];return r.apply(this,[i||null]).then((function(e){if(t.version<53&&!o)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,r){e.set(r,Rr()({},t,{type:n[t.type]||t.type}))}))}return e})).then(o,a)}}}function Pd(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):It().resolve(new(mr()))}}}function Nd(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),ld(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function Dd(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;hd("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function Ud(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Zd(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]);var n=(e=(0,Pn.Z)(e)).length>0;n&&e.forEach((function(e){if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(Yn()(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(Yn()(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();(!("encodings"in o)||1===o.encodings.length&&0===xt()(o.encodings[0]).length)&&(o.encodings=e,i.sendEncodings=e,this.setParametersPromises.push(i.setParameters(o).then((function(){delete i.sendEncodings})).catch((function(){delete i.sendEncodings}))))}return r})}}function jd(e){if("object"===(0,Gn.Z)(e)&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function Fd(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?It().all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}function Bd(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?It().all(this.setParametersPromises).then((function(){return t.apply(n,e)})).finally((function(){n.setParametersPromises=[]})):t.apply(this,arguments)}}}var Vd=v()({__proto__:null,shimOnTrack:Ld,shimPeerConnection:Md,shimSenderGetStats:Pd,shimReceiverGetStats:Nd,shimRemoveStream:Dd,shimRTCDataChannel:Ud,shimAddTransceiver:Zd,shimGetParameters:jd,shimCreateOffer:Fd,shimCreateAnswer:Bd,shimGetUserMedia:Ad,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,It().reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}});function qd(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}}function Wd(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){$n()(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function zd(e){if("object"===(0,Gn.Z)(e)&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),It().resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),It().resolve()):i};var s=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),It().resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),It().resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),It().resolve()):r},t.addIceCandidate=s}}function Gd(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(Hd(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Hd(e){return e&&void 0!==e.video?Rr()({},e,{video:md(e.video)}):e}function $d(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(hd("RTCIceServer.url","RTCIceServer.urls"),(o=JSON.parse(kt()(o))).urls=o.url,delete o.url,r.push(o)):r.push(e.iceServers[i])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&$n()(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function Kd(e){"object"===(0,Gn.Z)(e)&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&$n()(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function Yd(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function Jd(e){"object"!==(0,Gn.Z)(e)||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var Xd=v()({__proto__:null,shimLocalStreamsAPI:qd,shimRemoteStreamsAPI:Wd,shimCallbacksAPI:zd,shimGetUserMedia:Gd,shimConstraints:Hd,shimRTCIceServerUrls:$d,shimTrackEventTransceiver:Kd,shimCreateOfferLegacy:Yd,shimAudioContext:Jd}),Qd={exports:{}};!function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:Xn()(t[3],10),ip:t[4],address:t[4],port:Xn()(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=Xn()(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation);var n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:Xn()(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=Xn()(t[1],10),n.channels=3===t.length?Xn()(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:Xn()(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&xt()(e.parameters).length){var r=[];xt()(e.parameters).forEach((function(t){void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:Xn()(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return Xn()(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:Xn()(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===(0,Gn.Z)(e.keyParams)?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substr(12),password:i.substr(10)}:null},t.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),i=3;i<r.length;i++){var o=r[i],a=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var s=t.parseRtpMap(a),c=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var i=0;return n.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],i=t.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return Xn()(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),i.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:Xn()(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),o&&((t=JSON.parse(kt()(t))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?Xn()(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*Xn()(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;var o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(n=i[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");i.length>0&&(n=Xn()(i[0].substr(19),10)),isNaN(n)&&(n=65536);var o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:Xn()(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};var a=t.matchPrefix(e,"a=sctpmap:");if(a.length>0){var s=a[0].substr(10).split(" ");return{port:Xn()(s[0],10),protocol:s[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var i=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){for(var r=t.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:Xn()(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:Xn()(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t}(Qd);var ep=Qd.exports,tp=Vr({__proto__:null,default:ep},[Qd.exports]);function np(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(0,Gn.Z)(e)&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(kt()(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),r=ep.parseCandidate(e.candidate),i=Rr()(n,r);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,ld(e,"icecandidate",(function(t){return t.candidate&&$n()(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function rp(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||$n()(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e,r;(this._sctp=null,"chrome"===t.browser&&t.version>=76)&&("plan-b"===this.getConfiguration().sdpSemantics&&$n()(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}));if(function(e){if(!e||!e.sdp)return!1;var t=ep.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=ep.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){var i,o=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=Xn()(t[1],10);return n!=n?-1:n}(arguments[0]),a=(e=o,r=65536,"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r),s=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=ep.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=Xn()(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],o);i=0===a&&0===s?Number.POSITIVE_INFINITY:0===a||0===s?Math.max(a,s):Math.min(a,s);var c={};$n()(c,"maxMessageSize",{get:function(){return i}}),this._sctp=c}return n.apply(this,arguments)}}}function ip(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},ld(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function op(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;$n()(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),$n()(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function ap(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}}function sp(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?It().resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),It().resolve())})}}function cp(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){var e=this,t=arguments[0]||{};if("object"!==(0,Gn.Z)(t)||t.type&&t.sdp)return n.apply(this,arguments);if(!(t={type:t.type,sdp:t.sdp}).type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":t.type="offer";break;default:t.type="answer"}return t.sdp||"offer"!==t.type&&"answer"!==t.type?n.apply(this,[t]):("offer"===t.type?this.createOffer:this.createAnswer).apply(this).then((function(t){return n.apply(e,[t])}))})}}var up=v()({__proto__:null,shimRTCIceCandidate:np,shimMaxMessageSize:rp,shimSendThrowTypeError:ip,shimConnectionState:op,removeExtmapAllowMixed:ap,shimAddIceCandidateNullOrEmpty:sp,shimParameterlessSetLocalDescription:cp});!function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},n=pd,r=function(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=ud(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=ud(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=ud(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),i={browserDetails:r,commonShim:up,extractVersion:ud,disableLog:fd,disableWarnings:dd,sdp:tp};switch(r.browser){case"chrome":if(!Od||!Td||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Od,sp(e,r),cp(e),wd(e,r),_d(e),Td(e,r),Ed(e),kd(e,r),Sd(e),Rd(e),xd(e),Id(e,r),np(e),op(e),rp(e,r),ip(e),ap(e,r);break;case"firefox":if(!Vd||!Md||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Vd,sp(e,r),cp(e),Ad(e,r),Md(e,r),Ld(e),Dd(e),Pd(e),Nd(e),Ud(e),Zd(e),jd(e),Fd(e),Bd(e),np(e),op(e),rp(e,r),ip(e);break;case"safari":if(!Xd||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Xd,sp(e,r),cp(e),$d(e),Yd(e),zd(e),qd(e),Wd(e),Kd(e),Gd(e),Jd(e),np(e),rp(e,r),ip(e),ap(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var lp,fp,dp=function(){return dp=Rr()||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},dp.apply(this,arguments)};function pp(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof lr()){var i=0;for(r=lr()(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function hp(e){var t="function"==typeof bt()&&_t(),n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function vp(e,t){var n="function"==typeof bt()&&e[_t()];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function mp(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}!function(e){e.Start="xstate.start",e.Stop="xstate.stop",e.Raise="xstate.raise",e.Send="xstate.send",e.Cancel="xstate.cancel",e.NullEvent="",e.Assign="xstate.assign",e.After="xstate.after",e.DoneState="done.state",e.DoneInvoke="done.invoke",e.Log="xstate.log",e.Init="xstate.init",e.Invoke="xstate.invoke",e.ErrorExecution="error.execution",e.ErrorCommunication="error.communication",e.ErrorPlatform="error.platform",e.ErrorCustom="xstate.error",e.Update="xstate.update",e.Pure="xstate.pure",e.Choose="xstate.choose"}(lp||(lp={})),function(e){e.Parent="#_parent",e.Internal="#_internal"}(fp||(fp={}));var gp=lp.Start,yp=lp.Stop,bp=lp.Raise,wp=lp.Send,_p=lp.Cancel,Ep=lp.NullEvent,Sp=lp.Assign;lp.After,lp.DoneState;var Rp=lp.Log,xp=lp.Init,Cp=lp.Invoke;lp.ErrorExecution;var kp,Tp=lp.ErrorPlatform,Ip=lp.ErrorCustom,Op=lp.Update,Ap=lp.Choose,Lp=lp.Pure,Mp=".",Pp={},Np="xstate.guard",Dp="",Up="production"===pi.env.NODE_ENV;function Zp(e,t,n){void 0===n&&(n=Mp);var r=Bp(e,n),i=Bp(t,n);return ih(i)?!!ih(r)&&i===r:ih(r)?r in i:xt()(r).every((function(e){return e in i&&Zp(r[e],i[e])}))}function jp(e){try{return ih(e)||"number"==typeof e?"".concat(e):e.type}catch(e){throw new Error("Events must be strings or objects with a string event.type property.")}}function Fp(e,t){try{return nh(e)?e:e.toString().split(t)}catch(t){throw new Error("'".concat(e,"' is not a valid state path."))}}function Bp(e,t){return n=e,"object"===(0,Gn.Z)(n)&&"value"in n&&"context"in n&&"event"in n&&"_event"in n?e.value:nh(e)?Vp(e):"string"!=typeof e?e:Vp(Fp(e,t));var n}function Vp(e){if(1===e.length)return e[0];for(var t={},n=t,r=0;r<e.length-1;r++)r===e.length-2?n[e[r]]=e[r+1]:(n[e[r]]={},n=n[e[r]]);return t}function qp(e,t){for(var n={},r=xt()(e),i=0;i<r.length;i++){var o=r[i];n[o]=t(e[o],o,e,i)}return n}function Wp(e,t,n){var r,i,o={};try{for(var a=hp(xt()(e)),s=a.next();!s.done;s=a.next()){var c=s.value,u=e[c];n(u)&&(o[c]=t(u,c,e))}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}var zp=function(e){return function(t){var n,r,i=t;try{for(var o=hp(e),a=o.next();!a.done;a=o.next()){i=i[a.value]}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}};function Gp(e){return e?ih(e)?[[e]]:Hp(xt()(e).map((function(t){var n=e[t];return"string"==typeof n||n&&xt()(n).length?Gp(e[t]).map((function(e){return[t].concat(e)})):[[t]]}))):[[]]}function Hp(e){var t;return(t=[]).concat.apply(t,mp([],vp(e),!1))}function $p(e){return nh(e)?e:[e]}function Kp(e){return void 0===e?[]:$p(e)}function Yp(e,t,n){var r,i;if(rh(e))return e(t,n.data);var o={};try{for(var a=hp(xt()(e)),s=a.next();!s.done;s=a.next()){var c=s.value,u=e[c];rh(u)?o[c]=u(t,n.data):o[c]=u}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}function Jp(e){return e instanceof It()||!(null===e||!rh(e)&&"object"!==(0,Gn.Z)(e)||!rh(e.then))}function Xp(e,t){var n,r,i=vp([[],[]],2),o=i[0],a=i[1];try{for(var s=hp(e),c=s.next();!c.done;c=s.next()){var u=c.value;t(u)?o.push(u):a.push(u)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return[o,a]}function Qp(e,t){return qp(e.states,(function(e,n){if(e){var r=(ih(t)?void 0:t[n])||(e?e.current:void 0);if(r)return{current:r,states:Qp(e,r)}}}))}function eh(e,t,n,r){Up||th(!!e,"Attempting to update undefined context");var i=e?n.reduce((function(e,n){var i,o,a=n.assignment,s={state:r,action:n,_event:t},c={};if(rh(a))c=a(e,t.data,s);else try{for(var u=hp(xt()(a)),l=u.next();!l.done;l=u.next()){var f=l.value,d=a[f];c[f]=rh(d)?d(e,t.data,s):d}}catch(e){i={error:e}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return Rr()({},e,c)}),e):e;return i}var th=function(){};function nh(e){return St()(e)}function rh(e){return"function"==typeof e}function ih(e){return"string"==typeof e}function oh(e,t){if(e)return ih(e)?{type:Np,name:e,predicate:t?t[e]:void 0}:rh(e)?{type:Np,name:e.name,predicate:e}:e}Up||(th=function(e,t){var n=e instanceof Error?e:void 0;if((n||!e)&&void 0!==console){var r=["Warning: ".concat(t)];n&&r.push(n),console.warn.apply(console,r)}});var ah=function(){return"function"==typeof bt()&&bt().observable||"@@observable"}();function sh(e){return!!e&&"__xstatenode"in e}function ch(e,t){return ih(e)||"number"==typeof e?dp({type:e},t):e}function uh(e,t){if(!ih(e)&&"$$type"in e&&"scxml"===e.$$type)return e;var n=ch(e);return dp({name:n.type,data:n,$$type:"scxml",type:"external"},t)}function lh(e,t){return $p(t).map((function(t){return void 0===t||"string"==typeof t||sh(t)?{target:t,event:e}:dp(dp({},t),{event:e})}))}function fh(e,t,n,r,i){var o=e.options.guards,a={state:i,cond:t,_event:r};if(t.type===Np)return((null==o?void 0:o[t.name])||t.predicate)(n,r.data,a);var s=null==o?void 0:o[t.type];if(!s)throw new Error("Guard '".concat(t.type,"' is not implemented on machine '").concat(e.id,"'."));return s(n,r.data,a)}function dh(e){return"string"==typeof e?{type:e}:e}function ph(e,t,n){var r=function(){},i="object"===(0,Gn.Z)(e),o=i?e:null;return{next:((i?e.next:e)||r).bind(o),error:((i?e.error:t)||r).bind(o),complete:((i?e.complete:n)||r).bind(o)}}function hh(e,t){return"".concat(e,":invocation[").concat(t,"]")}(kp={})[ah]=function(){return this},kp[bt().observable]=function(){return this};var vh=uh({type:xp});function mh(e,t){return t&&t[e]||void 0}function gh(e,t){var n;if(ih(e)||"number"==typeof e)n=rh(r=mh(e,t))?{type:e,exec:r}:r||{type:e,exec:void 0};else if(rh(e))n={type:e.name||e.toString(),exec:e};else{var r;if(rh(r=mh(e.type,t)))n=dp(dp({},e),{exec:r});else if(r){var i=r.type||e.type;n=dp(dp(dp({},r),e),{type:i})}else n=e}return n}var yh=function(e,t){return e?(nh(e)?e:[e]).map((function(e){return gh(e,t)})):[]};function bh(e){var t=gh(e);return dp(dp({id:ih(e)?e:t.id},t),{type:t.type})}function wh(e){return ih(e)?{type:bp,event:e}:_h(e,{to:fp.Internal})}function _h(e,t){return{to:t?t.to:void 0,type:wp,event:rh(e)?e:ch(e),delay:t?t.delay:void 0,id:t&&void 0!==t.id?t.id:rh(e)?e.name:jp(e)}}var Eh=function(e,t,n){return dp(dp({},e),{value:ih(e.expr)?e.expr:e.expr(t,n.data,{_event:n})})};function Sh(e,t){var n="".concat(lp.DoneState,".").concat(e),r={type:n,data:t,toString:function(){return n}};return r}function Rh(e,t){var n="".concat(lp.DoneInvoke,".").concat(e),r={type:n,data:t,toString:function(){return n}};return r}function xh(e,t){var n="".concat(lp.ErrorPlatform,".").concat(e),r={type:n,data:t,toString:function(){return n}};return r}function Ch(e,t,n,r,i,o,a){void 0===a&&(a=!1);var s=vp(a?[[],i]:Xp(i,(function(e){return e.type===Sp})),2),c=s[0],u=s[1],l=c.length?eh(n,r,c,t):n,f=a?[n]:void 0,d=Hp(u.map((function(n){var i;switch(n.type){case bp:return{type:bp,_event:uh(n.event)};case wp:var s=function(e,t,n,r){var i,o={_event:n},a=uh(rh(e.event)?e.event(t,n.data,o):e.event);if(ih(e.delay)){var s=r&&r[e.delay];i=rh(s)?s(t,n.data,o):s}else i=rh(e.delay)?e.delay(t,n.data,o):e.delay;var c=rh(e.to)?e.to(t,n.data,o):e.to;return dp(dp({},e),{to:c,_event:a,event:a.data,delay:i})}(n,l,r,e.options.delays);return Up||th(!ih(n.delay)||"number"==typeof s.delay,"No delay reference for delay expression '".concat(n.delay,"' was found on machine '").concat(e.id,"'")),s.to!==fp.Internal&&(null==o||o(s,l,r)),s;case Rp:var c=Eh(n,l,r);return null==o||o(c,l,r),c;case Ap:if(!(h=null===(i=n.conds.find((function(n){var i=oh(n.cond,e.options.guards);return!i||fh(e,i,l,r,o?void 0:t)})))||void 0===i?void 0:i.actions))return[];var u=vp(Ch(e,t,l,r,yh(Kp(h),e.options.actions),o,a),2),d=u[0],p=u[1];return l=p,null==f||f.push(l),d;case Lp:var h;if(!(h=n.get(l,r.data)))return[];var v=vp(Ch(e,t,l,r,yh(Kp(h),e.options.actions),o,a),2),m=v[0],g=v[1];return l=g,null==f||f.push(l),m;case yp:c=function(e,t,n){var r=rh(e.activity)?e.activity(t,n.data):e.activity,i="string"==typeof r?{id:r}:r;return{type:lp.Stop,activity:i}}(n,l,r);return null==o||o(c,l,r),c;case Sp:l=eh(l,r,[n],o?void 0:t),null==f||f.push(l);break;default:var y=gh(n,e.options.actions),b=y.exec;if(o)o(y,l,r);else if(b&&f){var w=f.length-1;y=dp(dp({},y),{exec:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];b.apply(void 0,mp([f[w]],vp(t),!1))}})}return y}})).filter((function(e){return!!e})));return[d,l]}var kh=function(e,t){return t(e)};function Th(e){var t;return(t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:e}}})[ah]=function(){return this},t}function Ih(e,t,n){var r=Th(t);if(r.deferred=!0,sh(e)){var i=r.state=kh(void 0,(function(){return(n?e.withContext(n):e).initialState}));r.getSnapshot=function(){return i}}return r}var Oh=function(e){return"atomic"===e.type||"final"===e.type};function Ah(e){return xt()(e.states).map((function(t){return e.states[t]}))}function Lh(e){return Ah(e).filter((function(e){return"history"!==e.type}))}function Mh(e){var t=[e];return Oh(e)?t:t.concat(Hp(Lh(e).map(Mh)))}function Ph(e,t){var n,r,i,o,a,s,c,u,l=Dh(new(cr())(e)),f=new(cr())(t);try{for(var d=hp(f),p=d.next();!p.done;p=d.next())for(var h=(S=p.value).parent;h&&!f.has(h);)f.add(h),h=h.parent}catch(e){n={error:e}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}var v=Dh(f);try{for(var m=hp(f),g=m.next();!g.done;g=m.next()){if("compound"!==(S=g.value).type||v.get(S)&&v.get(S).length){if("parallel"===S.type)try{for(var y=(a=void 0,hp(Lh(S))),b=y.next();!b.done;b=y.next()){var w=b.value;f.has(w)||(f.add(w),l.get(w)?l.get(w).forEach((function(e){return f.add(e)})):w.initialStateNodes.forEach((function(e){return f.add(e)})))}}catch(e){a={error:e}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}}else l.get(S)?l.get(S).forEach((function(e){return f.add(e)})):S.initialStateNodes.forEach((function(e){return f.add(e)}))}}catch(e){i={error:e}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}try{for(var _=hp(f),E=_.next();!E.done;E=_.next()){var S;for(h=(S=E.value).parent;h&&!f.has(h);)f.add(h),h=h.parent}}catch(e){c={error:e}}finally{try{E&&!E.done&&(u=_.return)&&u.call(_)}finally{if(c)throw c.error}}return f}function Nh(e,t){var n=t.get(e);if(!n)return{};if("compound"===e.type){var r=n[0];if(!r)return{};if(Oh(r))return r.key}var i={};return n.forEach((function(e){i[e.key]=Nh(e,t)})),i}function Dh(e){var t,n,r=new(mr());try{for(var i=hp(e),o=i.next();!o.done;o=i.next()){var a=o.value;r.has(a)||r.set(a,[]),a.parent&&(r.has(a.parent)||r.set(a.parent,[]),r.get(a.parent).push(a))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function Uh(e,t){return Nh(e,Dh(Ph([e],t)))}function Zh(e,t){return St()(e)?e.some((function(e){return e===t})):e instanceof cr()&&e.has(t)}function jh(e,t){return"compound"===t.type?Lh(t).some((function(t){return"final"===t.type&&Zh(e,t)})):"parallel"===t.type&&Lh(t).every((function(t){return jh(e,t)}))}function Fh(e){return new(cr())(Hp(e.map((function(e){return e.tags}))))}function Bh(e,t){if(e===t)return!0;if(void 0===e||void 0===t)return!1;if(ih(e)||ih(t))return e===t;var n=xt()(e),r=xt()(t);return n.length===r.length&&n.every((function(n){return Bh(e[n],t[n])}))}var Vh=function(){function e(e){var t,n,r=this;this.actions=[],this.activities=Pp,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||Pp,this.meta=(void 0===(n=e.configuration)&&(n=[]),n.reduce((function(e,t){return void 0!==t.meta&&(e[t.id]=t.meta),e}),{})),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=null!==(t=St()(e.tags)?new(cr())(e.tags):e.tags)&&void 0!==t?t:new(cr()),this.machine=e.machine,$n()(this,"nextEvents",{get:function(){return function(e){return mp([],vp(new(cr())(Hp(mp([],vp(e.map((function(e){return e.ownEvents}))),!1)))),!1)}(r.configuration)}})}return e.from=function(t,n){return t instanceof e?t.context!==n?new e({value:t.value,context:n,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t:new e({value:t,context:n,_event:vh,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,n){if(t instanceof e){if(!t.actions.length)return t;var r=vh;return new e({value:t.value,context:n,_event:r,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return e.from(t,n)},e.prototype.toStrings=function(e,t){var n=this;if(void 0===e&&(e=this.value),void 0===t&&(t="."),ih(e))return[e];var r=xt()(e);return r.concat.apply(r,mp([],vp(r.map((function(r){return n.toStrings(e[r],t).map((function(e){return r+t+e}))}))),!1))},e.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var t=e.tags;e.machine;var n=pp(e,["configuration","transitions","tags","machine"]);return dp(dp({},n),{tags:gt()(t)})},e.prototype.matches=function(e){return Zp(e,this.value)},e.prototype.hasTag=function(e){return this.tags.has(e)},e.prototype.can=function(e){var t;Up&&th(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var n=null===(t=this.machine)||void 0===t?void 0:t.getTransitionData(this,e);return!!(null==n?void 0:n.transitions.length)&&n.transitions.some((function(e){return void 0!==e.target||e.actions.length}))},e}(),qh={deferEvents:!1},Wh=function(){function e(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=dp(dp({},qh),e)}return e.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents)return void this.schedule(e);this.process(e)}this.flushEvents()},e.prototype.schedule=function(e){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()}else this.queue.push(e)},e.prototype.clear=function(){this.queue=[]},e.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},e.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(e){throw this.clear(),e}finally{this.processingEvent=!1}},e}(),zh=new(mr()),Gh=0,Hh=function(){return"x:".concat(Gh++)},$h=function(e,t){return zh.set(e,t),e},Kh=function(e){return zh.get(e)},Yh=function(e){zh.delete(e)};function Jh(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==qr?qr:void(Up||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues"))}function Xh(e){if(Jh()){var t=function(){var e=Jh();if(e&&"__xstate__"in e)return e.__xstate__}();t&&t.register(e)}}function Qh(e,t){void 0===t&&(t={});var n=e.initialState,r=new(cr()),i=[],o=!1,a=function(e){var t;return dp(((t={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}})[ah]=function(){return this},t),e)}({id:t.id,send:function(t){i.push(t),function(){if(!o){for(o=!0;i.length>0;){var t=i.shift();n=e.transition(n,t,s),r.forEach((function(e){return e.next(n)}))}o=!1}}()},getSnapshot:function(){return n},subscribe:function(e,t,i){var o=ph(e,t,i);return r.add(o),o.next(n),{unsubscribe:function(){r.delete(o)}}}}),s={parent:t.parent,self:a,id:t.id||"anonymous",observers:r};return n=e.start?e.start(s):n,a}var ev,tv={sync:!1,autoForward:!1};!function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(ev||(ev={}));var nv=function(){function e(t,n){var r=this;void 0===n&&(n=e.defaultOptions),this.machine=t,this.delayedEventsMap={},this.listeners=new(cr()),this.contextListeners=new(cr()),this.stopListeners=new(cr()),this.doneListeners=new(cr()),this.eventListeners=new(cr()),this.sendListeners=new(cr()),this.initialized=!1,this.status=ev.NotStarted,this.children=new(mr()),this.forwardTo=new(cr()),this.init=this.start,this.send=function(e,t){if(nh(e))return r.batch(e),r.state;var n=uh(ch(e,t));if(r.status===ev.Stopped)return Up||th(!1,'Event "'.concat(n.name,'" was sent to stopped service "').concat(r.machine.id,'". This service has already reached its final state, and will not transition.\nEvent: ').concat(kt()(n.data))),r.state;if(r.status!==ev.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(n.name,'" was sent to uninitialized service "').concat(r.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: ').concat(kt()(n.data)));return r.scheduler.schedule((function(){r.forward(n);var e=r.nextState(n);r.update(e,n)})),r._state},this.sendTo=function(e,t){var n,i=r.parent&&(t===fp.Parent||r.parent.id===t),o=i?r.parent:ih(t)?r.children.get(t)||Kh(t):(n=t)&&"function"==typeof n.send?t:void 0;if(o)"machine"in o?(r.status!==ev.Stopped||r.parent!==o||r.state.done)&&o.send(dp(dp({},e),{name:e.name===Ip?"".concat(xh(r.id)):e.name,origin:r.sessionId})):o.send(e.data);else{if(!i)throw new Error("Unable to send event to child '".concat(t,"' from service '").concat(r.id,"'."));Up||th(!1,"Service '".concat(r.id,"' has no parent: unable to send event ").concat(e.type))}},this._exec=function(e,t,n,i){void 0===i&&(i=r.machine.options.actions);var o=e.exec||mh(e.type,i),a=rh(o)?o:o?o.exec:e.exec;if(a)try{return a(t,n.data,r.machine.config.predictableActionArguments?{action:e,_event:n}:{action:e,state:r.state,_event:n})}catch(e){throw r.parent&&r.parent.send({type:"xstate.error",data:e}),e}switch(e.type){case wp:var s=e;if("number"==typeof s.delay)return void r.defer(s);s.to?r.sendTo(s._event,s.to):r.send(s._event);break;case _p:r.cancel(e.sendId);break;case gp:if(r.status!==ev.Running)return;var c=e.activity;if(!r.machine.config.predictableActionArguments&&!r.state.activities[c.id||c.type])break;if(c.type===lp.Invoke){var u=dh(c.src),l=r.machine.options.services?r.machine.options.services[u.type]:void 0,f=c.id,d=c.data;Up||th(!("forward"in c),"`forward` property is deprecated (found in invocation of '".concat(c.src,"' in in machine '").concat(r.machine.id,"'). ")+"Please use `autoForward` instead.");var p="autoForward"in c?c.autoForward:!!c.forward;if(!l)return void(Up||th(!1,"No service found for invocation '".concat(c.src,"' in machine '").concat(r.machine.id,"'.")));var h=d?Yp(d,t,n):void 0;if("string"==typeof l)return;var v=rh(l)?l(t,n.data,{data:h,src:u,meta:c.meta}):l;if(!v)return;var m=void 0;sh(v)&&(v=h?v.withContext(h):v,m={autoForward:p}),r.spawn(v,f,m)}else r.spawnActivity(c);break;case yp:r.stopChild(e.activity.id);break;case Rp:var g=e.label,y=e.value;g?r.logger(g,y):r.logger(y);break;default:Up||th(!1,"No implementation found for action type '".concat(e.type,"'"))}};var i=dp(dp({},e.defaultOptions),n),o=i.clock,a=i.logger,s=i.parent,c=i.id,u=void 0!==c?c:t.id;this.id=u,this.logger=a,this.clock=o,this.parent=s,this.options=i,this.scheduler=new Wh({deferEvents:this.options.deferEvents}),this.sessionId=Hh()}return $n()(e.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:kh(this,(function(){return e._initialState=e.machine.initialState,e._initialState}))},enumerable:!1,configurable:!0}),$n()(e.prototype,"state",{get:function(){return Up||th(this.status!==ev.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first.")),this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(e,t){var n,r;try{for(var i=hp(e.actions),o=i.next();!o.done;o=i.next()){var a=o.value;this.exec(a,e,t)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.update=function(e,t){var n,r,i,o,a,s,c,u,l=this;if(e._sessionid=this.sessionId,this._state=e,this.machine.config.predictableActionArguments&&t!==vh||!this.options.execute||this.execute(this.state),this.children.forEach((function(e){l.state.children[e.id]=e})),this.devTools&&this.devTools.send(t.data,e),e.event)try{for(var f=hp(this.eventListeners),d=f.next();!d.done;d=f.next()){(0,d.value)(e.event)}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}try{for(var p=hp(this.listeners),h=p.next();!h.done;h=p.next()){(0,h.value)(e,e.event)}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}try{for(var v=hp(this.contextListeners),m=v.next();!m.done;m=v.next()){(0,m.value)(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(e){a={error:e}}finally{try{m&&!m.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}if(this.state.done){var g=e.configuration.find((function(e){return"final"===e.type&&e.parent===l.machine})),y=g&&g.doneData?Yp(g.doneData,e.context,t):void 0;try{for(var b=hp(this.doneListeners),w=b.next();!w.done;w=b.next()){(0,w.value)(Rh(this.id,y))}}catch(e){c={error:e}}finally{try{w&&!w.done&&(u=b.return)&&u.call(b)}finally{if(c)throw c.error}}this._stop()}},e.prototype.onTransition=function(e){return this.listeners.add(e),this.status===ev.Running&&e(this.state,this.state.event),this},e.prototype.subscribe=function(e,t,n){var r=this,i=ph(e,t,n);this.listeners.add(i.next),this.status!==ev.NotStarted&&i.next(this.state);var o=function e(){r.doneListeners.delete(e),r.stopListeners.delete(e),i.complete()};return this.status===ev.Stopped?i.complete():(this.onDone(o),this.onStop(o)),{unsubscribe:function(){r.listeners.delete(i.next),r.doneListeners.delete(o),r.stopListeners.delete(o)}}},e.prototype.onEvent=function(e){return this.eventListeners.add(e),this},e.prototype.onSend=function(e){return this.sendListeners.add(e),this},e.prototype.onChange=function(e){return this.contextListeners.add(e),this},e.prototype.onStop=function(e){return this.stopListeners.add(e),this},e.prototype.onDone=function(e){return this.doneListeners.add(e),this},e.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},e.prototype.start=function(e){var t=this;if(this.status===ev.Running)return this;this.machine._init(),$h(this.sessionId,this),this.initialized=!0,this.status=ev.Running;var n=void 0===e?this.initialState:kh(this,(function(){return n=e,"object"===(0,Gn.Z)(n)&&null!==n&&"value"in n&&"_event"in n?t.machine.resolveState(e):t.machine.resolveState(Vh.from(e,t.machine.context));var n}));return this.options.devTools&&this.attachDev(),this.scheduler.initialize((function(){t.update(n,vh)})),this},e.prototype._stop=function(){var e,t,n,r,i,o,a,s,c,u;try{for(var l=hp(this.listeners),f=l.next();!f.done;f=l.next()){var d=f.value;this.listeners.delete(d)}}catch(t){e={error:t}}finally{try{f&&!f.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}try{for(var p=hp(this.stopListeners),h=p.next();!h.done;h=p.next()){(d=h.value)(),this.stopListeners.delete(d)}}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}try{for(var v=hp(this.contextListeners),m=v.next();!m.done;m=v.next()){d=m.value;this.contextListeners.delete(d)}}catch(e){i={error:e}}finally{try{m&&!m.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}try{for(var g=hp(this.doneListeners),y=g.next();!y.done;y=g.next()){d=y.value;this.doneListeners.delete(d)}}catch(e){a={error:e}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(a)throw a.error}}if(!this.initialized)return this;this.initialized=!1,this.status=ev.Stopped,this._initialState=void 0;try{for(var b=hp(xt()(this.delayedEventsMap)),w=b.next();!w.done;w=b.next()){var _=w.value;this.clock.clearTimeout(this.delayedEventsMap[_])}}catch(e){c={error:e}}finally{try{w&&!w.done&&(u=b.return)&&u.call(b)}finally{if(c)throw c.error}}this.scheduler.clear(),this.scheduler=new Wh({deferEvents:this.options.deferEvents})},e.prototype.stop=function(){var e=this,t=this.scheduler;return this._stop(),t.schedule((function(){var t=uh({type:"xstate.stop"}),n=kh(e,(function(){var n=Hp(mp([],vp(e.state.configuration),!1).sort((function(e,t){return t.order-e.order})).map((function(t){return yh(t.onExit,e.machine.options.actions)}))),r=vp(Ch(e.machine,e.state,e.state.context,t,n,e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),i=r[0],o=r[1],a=new Vh({value:e.state.value,context:o,_event:t,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:i.filter((function(e){return e.type!==bp&&(e.type!==wp||!!e.to&&e.to!==fp.Internal)})),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return a.changed=!0,a}));e.update(n,t),e.children.forEach((function(e){rh(e.stop)&&e.stop()})),e.children.clear(),Yh(e.sessionId)})),this},e.prototype.batch=function(e){var t=this;if(this.status===ev.NotStarted&&this.options.deferEvents)Up||th(!1,"".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'" and are deferred. Make sure .start() is called for this service.\nEvent: ').concat(kt()(event)));else if(this.status!==ev.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));this.scheduler.schedule((function(){var n,r,i=t.state,o=!1,a=[],s=function(e){var n=uh(e);t.forward(n),i=kh(t,(function(){return t.machine.transition(i,n)})),a.push.apply(a,mp([],vp(i.actions.map((function(e){return n=i,r=(t=e).exec,dp(dp({},t),{exec:void 0!==r?function(){return r(n.context,n.event,{action:t,state:n,_event:n._event})}:void 0});var t,n,r}))),!1)),o=o||!!i.changed};try{for(var c=hp(e),u=c.next();!u.done;u=c.next()){s(u.value)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}i.changed=o,i.actions=a,t.update(i,uh(e[e.length-1]))}))},e.prototype.sender=function(e){return this.send.bind(this,e)},e.prototype._nextState=function(e){var t=this,n=uh(e);if(0===n.name.indexOf(Tp)&&!this.state.nextEvents.some((function(e){return 0===e.indexOf(Tp)})))throw n.data.data;return kh(this,(function(){return t.machine.transition(t.state,n,void 0,t.machine.config.predictableActionArguments?t._exec:void 0)}))},e.prototype.nextState=function(e){return this._nextState(e)},e.prototype.forward=function(e){var t,n;try{for(var r=hp(this.forwardTo),i=r.next();!i.done;i=r.next()){var o=i.value,a=this.children.get(o);if(!a)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));a.send(e)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.defer=function(e){var t=this;this.delayedEventsMap[e.id]=this.clock.setTimeout((function(){e.to?t.sendTo(e._event,e.to):t.send(e._event)}),e.delay)},e.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},e.prototype.exec=function(e,t,n){void 0===n&&(n=this.machine.options.actions),this._exec(e,t.context,t._event,n)},e.prototype.removeChild=function(e){var t;this.children.delete(e),this.forwardTo.delete(e),null===(t=this.state)||void 0===t||delete t.children[e]},e.prototype.stopChild=function(e){var t=this.children.get(e);t&&(this.removeChild(e),rh(t.stop)&&t.stop())},e.prototype.spawn=function(e,t,n){if(this.status!==ev.Running)return Ih(e,t);if(Jp(e))return this.spawnPromise(It().resolve(e),t);if(rh(e))return this.spawnCallback(e,t);if(function(e){try{return"function"==typeof e.send}catch(e){return!1}}(i=e)&&"id"in i)return this.spawnActor(e,t);if(function(e){try{return"subscribe"in e&&rh(e.subscribe)}catch(e){return!1}}(e))return this.spawnObservable(e,t);if(sh(e))return this.spawnMachine(e,dp(dp({},n),{id:t}));if(null!==(r=e)&&"object"===(0,Gn.Z)(r)&&"transition"in r&&"function"==typeof r.transition)return this.spawnBehavior(e,t);throw new Error('Unable to spawn entity "'.concat(t,'" of type "').concat((0,Gn.Z)(e),'".'));var r,i},e.prototype.spawnMachine=function(t,n){var r=this;void 0===n&&(n={});var i=new e(t,dp(dp({},this.options),{parent:this,id:n.id||t.id})),o=dp(dp({},tv),n);o.sync&&i.onTransition((function(e){r.send(Op,{state:e,id:i.id})}));var a=i;return this.children.set(i.id,a),o.autoForward&&this.forwardTo.add(i.id),i.onDone((function(e){r.removeChild(i.id),r.send(uh(e,{origin:i.id}))})).start(),a},e.prototype.spawnBehavior=function(e,t){var n=Qh(e,{id:t,parent:this});return this.children.set(t,n),n},e.prototype.spawnPromise=function(e,t){var n,r,i=this,o=!1;e.then((function(e){o||(r=e,i.removeChild(t),i.send(uh(Rh(t,e),{origin:t})))}),(function(e){if(!o){i.removeChild(t);var n=xh(t,e);try{i.send(uh(n,{origin:t}))}catch(r){!function(e,t,n){if(!Up){var r=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";if(e===t)console.error("Missing onError handler for invocation '".concat(n,"', error was '").concat(e,"'.").concat(r));else{var i=t.stack?" Stacktrace was '".concat(t.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(n,"'. ")+"Original error: '".concat(e,"'. ").concat(r," Current error is '").concat(t,"'.").concat(i))}}}(e,r,t),i.devTools&&i.devTools.send(n,i.state),i.machine.strict&&i.stop()}}}));var a=((n={id:t,send:function(){},subscribe:function(t,n,r){var i=ph(t,n,r),o=!1;return e.then((function(e){o||(i.next(e),o||i.complete())}),(function(e){o||i.error(e)})),{unsubscribe:function(){return o=!0}}},stop:function(){o=!0},toJSON:function(){return{id:t}},getSnapshot:function(){return r}})[ah]=function(){return this},n);return this.children.set(t,a),a},e.prototype.spawnCallback=function(e,t){var n,r,i,o=this,a=!1,s=new(cr()),c=new(cr());try{i=e((function(e){r=e,c.forEach((function(t){return t(e)})),a||o.send(uh(e,{origin:t}))}),(function(e){s.add(e)}))}catch(e){this.send(xh(t,e))}if(Jp(i))return this.spawnPromise(i,t);var u=((n={id:t,send:function(e){return s.forEach((function(t){return t(e)}))},subscribe:function(e){var t=ph(e);return c.add(t.next),{unsubscribe:function(){c.delete(t.next)}}},stop:function(){a=!0,rh(i)&&i()},toJSON:function(){return{id:t}},getSnapshot:function(){return r}})[ah]=function(){return this},n);return this.children.set(t,u),u},e.prototype.spawnObservable=function(e,t){var n,r,i=this,o=e.subscribe((function(e){r=e,i.send(uh(e,{origin:t}))}),(function(e){i.removeChild(t),i.send(uh(xh(t,e),{origin:t}))}),(function(){i.removeChild(t),i.send(uh(Rh(t),{origin:t}))})),a=((n={id:t,send:function(){},subscribe:function(t,n,r){return e.subscribe(t,n,r)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return r},toJSON:function(){return{id:t}}})[ah]=function(){return this},n);return this.children.set(t,a),a},e.prototype.spawnActor=function(e,t){return this.children.set(t,e),e},e.prototype.spawnActivity=function(e){var t=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(t){var n=t(this.state.context,e);this.spawnEffect(e.id,n)}else Up||th(!1,"No implementation found for activity '".concat(e.type,"'"))},e.prototype.spawnEffect=function(e,t){var n;this.children.set(e,((n={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:t||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}})[ah]=function(){return this},n))},e.prototype.attachDev=function(){var e=Jh();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var t="object"===(0,Gn.Z)(this.options.devTools)?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(dp(dp({name:this.id,autoPause:!0,stateSanitizer:function(e){return{value:e.value,context:e.context,actions:e.actions}}},t),{features:dp({jump:!1,skip:!1},t?t.features:void 0)}),this.machine),this.devTools.init(this.state)}Xh(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[ah]=function(){return this},e.prototype.getSnapshot=function(){return this.status===ev.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return setTimeout(e,t)})),clearTimeout:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return clearTimeout(e)}))},logger:console.log.bind(console),devTools:!1},e.interpret=rv,e}();function rv(e,t){return new nv(e,t)}function iv(e){if("string"==typeof e){var t={type:e,toString:function(){return e}};return t}return e}function ov(e){return dp(dp({type:Cp},e),{toJSON:function(){e.onDone,e.onError;var t=pp(e,["onDone","onError"]);return dp(dp({},t),{type:Cp,src:iv(e.src)})}})}var av="",sv="*",cv={},uv=function(e){return"#"===e[0]},lv=function(){function e(t,n,r,i){var o,a=this;void 0===r&&(r="context"in t?t.context:void 0),this.config=t,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new(mr()),initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Rr()({actions:{},guards:{},services:{},activities:{},delays:{}},n),this.parent=null==i?void 0:i.parent,this.key=this.config.key||(null==i?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:Mp),this.id=this.config.id||mp([this.machine.key],vp(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&xt()(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(o=this.config.schema)&&void 0!==o?o:{},this.description=this.config.description,Up||th(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?qp(this.config.states,(function(t,n){var r,i=new e(t,{},void 0,{parent:a,key:n});return Rr()(a.idMap,dp(((r={})[i.id]=i,r),i.idMap)),i})):cv;var s=0;!function e(t){var n,r;t.order=s++;try{for(var i=hp(Ah(t)),o=i.next();!o.done;o=i.next()){e(o.value)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(St()(this.config.on)?this.config.on.some((function(e){return e.event===av})):av in this.config.on),this.strict=!!this.config.strict,this.onEntry=Kp(this.config.entry||this.config.onEntry).map((function(e){return gh(e)})),this.onExit=Kp(this.config.exit||this.config.onExit).map((function(e){return gh(e)})),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=Kp(this.config.invoke).map((function(e,t){var n,r;if(sh(e)){var i=hh(a.id,t);return a.machine.options.services=dp(((n={})[i]=e,n),a.machine.options.services),ov({src:i,id:i})}if(ih(e.src)){i=e.id||hh(a.id,t);return ov(dp(dp({},e),{id:i,src:e.src}))}if(sh(e.src)||rh(e.src)){i=e.id||hh(a.id,t);return a.machine.options.services=dp(((r={})[i]=e.src,r),a.machine.options.services),ov(dp(dp({id:i},e),{src:i}))}var o=e.src;return ov(dp(dp({id:hh(a.id,t)},e),{src:o}))})),this.activities=Kp(this.config.activities).concat(this.invoke).map((function(e){return bh(e)})),this.transition=this.transition.bind(this),this.tags=Kp(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||Mh(this).forEach((function(e){return e.on}))},e.prototype.withConfig=function(t,n){var r=this.options,i=r.actions,o=r.activities,a=r.guards,s=r.services,c=r.delays;return new e(this.config,{actions:dp(dp({},i),t.actions),activities:dp(dp({},o),t.activities),guards:dp(dp({},a),t.guards),services:dp(dp({},s),t.services),delays:dp(dp({},c),t.delays)},null!=n?n:this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},$n()(e.prototype,"context",{get:function(){return rh(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),$n()(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:qp(this.states,(function(e){return e.definition})),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},$n()(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce((function(e,t){return e[t.eventType]=e[t.eventType]||[],e[t.eventType].push(t),e}),{})},enumerable:!1,configurable:!0}),$n()(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),$n()(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var t=e===av,n=this.transitions.filter((function(n){var r=n.eventType===e;return t?r:r||n.eventType===sv}));return this.__cache.candidates[e]=n,n},e.prototype.getDelayedTransitions=function(){var e=this,t=this.config.after;if(!t)return[];var n=function(t,n){var r=function(e,t){var n=t?"#".concat(t):"";return"".concat(lp.After,"(").concat(e,")").concat(n)}(rh(t)?"".concat(e.id,":delay[").concat(n,"]"):t,e.id);return e.onEntry.push(_h(r,{delay:t})),e.onExit.push({type:_p,sendId:r}),r},r=nh(t)?t.map((function(e,t){var r=n(e.delay,t);return dp(dp({},e),{event:r})})):Hp(xt()(t).map((function(e,r){var i=t[e],o=ih(i)?{target:i}:i,a=isNaN(+e)?e:+e,s=n(a,r);return Kp(o).map((function(e){return dp(dp({},e),{event:s,delay:a})}))})));return r.map((function(t){var n=t.delay;return dp(dp({},e.formatTransition(t)),{delay:n})}))},e.prototype.getStateNodes=function(e){var t,n=this;if(!e)return[];var r=e instanceof Vh?e.value:Bp(e,this.delimiter);if(ih(r)){var i=this.getStateNode(r).initial;return void 0!==i?this.getStateNodes(((t={})[r]=i,t)):[this,this.states[r]]}var o=xt()(r),a=[this];return a.push.apply(a,mp([],vp(Hp(o.map((function(e){return n.getStateNode(e).getStateNodes(r[e])})))),!1)),a},e.prototype.handles=function(e){var t=jp(e);return this.events.includes(t)},e.prototype.resolveState=function(e){var t=e instanceof Vh?e:Vh.create(e),n=gt()(Ph([],this.getStateNodes(t.value)));return new Vh(dp(dp({},t),{value:this.resolve(t.value),configuration:n,done:jh(n,this),tags:Fh(n),machine:this.machine}))},e.prototype.transitionLeafNode=function(e,t,n){var r=this.getStateNode(e).next(t,n);return r&&r.transitions.length?r:this.next(t,n)},e.prototype.transitionCompoundNode=function(e,t,n){var r=xt()(e),i=this.getStateNode(r[0])._transition(e[r[0]],t,n);return i&&i.transitions.length?i:this.next(t,n)},e.prototype.transitionParallelNode=function(e,t,n){var r,i,o={};try{for(var a=hp(xt()(e)),s=a.next();!s.done;s=a.next()){var c=s.value,u=e[c];if(u){var l=this.getStateNode(c)._transition(u,t,n);l&&(o[c]=l)}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}var f=xt()(o).map((function(e){return o[e]})),d=Hp(f.map((function(e){return e.transitions})));if(!f.some((function(e){return e.transitions.length>0})))return this.next(t,n);var p=Hp(f.map((function(e){return e.entrySet}))),h=Hp(xt()(o).map((function(e){return o[e].configuration})));return{transitions:d,entrySet:p,exitSet:Hp(f.map((function(e){return e.exitSet}))),configuration:h,source:t,actions:Hp(xt()(o).map((function(e){return o[e].actions})))}},e.prototype._transition=function(e,t,n){return ih(e)?this.transitionLeafNode(e,t,n):1===xt()(e).length?this.transitionCompoundNode(e,t,n):this.transitionParallelNode(e,t,n)},e.prototype.getTransitionData=function(e,t){return this._transition(e.value,e,uh(t))},e.prototype.next=function(e,t){var n,r,i,o=this,a=t.name,s=[],c=[];try{for(var u=hp(this.getCandidates(a)),l=u.next();!l.done;l=u.next()){var f=l.value,d=f.cond,p=f.in,h=e.context,v=!p||(ih(p)&&uv(p)?e.matches(Bp(this.getStateNodeById(p).path,this.delimiter)):Zp(Bp(p,this.delimiter),zp(this.path.slice(0,-2))(e.value))),m=!1;try{m=!d||fh(this.machine,d,h,t,e)}catch(e){throw new Error("Unable to evaluate guard '".concat(d.name||d.type,"' in transition for event '").concat(a,"' in state node '").concat(this.id,"':\n").concat(e.message))}if(m&&v){void 0!==f.target&&(c=f.target),s.push.apply(s,mp([],vp(f.actions),!1)),i=f;break}}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}if(i){if(!c.length)return{transitions:[i],entrySet:[],exitSet:[],configuration:e.value?[this]:[],source:e,actions:s};var g=Hp(c.map((function(t){return o.getRelativeStateNodes(t,e.historyValue)}))),y=!!i.internal,b=[];return y||c.forEach((function(e){b.push.apply(b,mp([],vp(o.getExternalReentryNodes(e)),!1))})),{transitions:[i],entrySet:b,exitSet:y?[]:[this],configuration:g,source:e,actions:s}}},e.prototype.getExternalReentryNodes=function(e){for(var t=[],n=vp(e.order>this.order?[e,this]:[this,e],2),r=n[0],i=n[1];r&&r!==i;)t.push(r),r=r.parent;return r!==i?[]:(t.push(i),t)},e.prototype.getActions=function(e,t,n,r,i,o){var a,s,c,u,l=Ph([],o?this.getStateNodes(o.value):[this]);try{for(var f=hp(e),d=f.next();!d.done;d=f.next()){Zh(l,v=d.value)&&!Zh(n.entrySet,v.parent)||n.entrySet.push(v)}}catch(e){a={error:e}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}try{for(var p=hp(l),h=p.next();!h.done;h=p.next()){var v;Zh(e,v=h.value)&&!Zh(n.exitSet,v.parent)||n.exitSet.push(v)}}catch(e){c={error:e}}finally{try{h&&!h.done&&(u=p.return)&&u.call(p)}finally{if(c)throw c.error}}var m=Hp(n.entrySet.map((function(e){var t=[];if("final"!==e.type)return t;var o=e.parent;if(!o.parent)return t;t.push(Sh(e.id,e.doneData),Sh(o.id,e.doneData?Yp(e.doneData,r,i):void 0));var a=o.parent;return"parallel"===a.type&&Lh(a).every((function(e){return jh(n.configuration,e)}))&&t.push(Sh(a.id)),t})));n.exitSet.sort((function(e,t){return t.order-e.order})),n.entrySet.sort((function(e,t){return e.order-t.order}));var g=new(cr())(n.entrySet),y=new(cr())(n.exitSet),b=vp([Hp(gt()(g).map((function(e){return mp(mp([],vp(e.activities.map((function(e){return function(e){var t=bh(e);return{type:lp.Start,activity:t,exec:void 0}}(e)}))),!1),vp(e.onEntry),!1)}))).concat(m.map(wh)),Hp(gt()(y).map((function(e){return mp(mp([],vp(e.onExit),!1),vp(e.activities.map((function(e){return function(e){var t=rh(e)?e:bh(e);return{type:lp.Stop,activity:t,exec:void 0}}(e)}))),!1)})))],2),w=b[0],_=b[1],E=yh(_.concat(n.actions).concat(w),this.machine.options.actions);if(t){var S=yh(Hp(mp([],vp(e),!1).sort((function(e,t){return t.order-e.order})).map((function(e){return e.onExit}))),this.machine.options.actions).filter((function(e){return e.type!==bp&&(e.type!==wp||!!e.to&&e.to!==fp.Internal)}));return E.concat(S)}return E},e.prototype.transition=function(e,t,n,r){void 0===e&&(e=this.initialState);var i,o,a=uh(t);if(e instanceof Vh)i=void 0===n?e:this.resolveState(Vh.from(e,n));else{var s=ih(e)?this.resolve(Vp(this.getResolvedPath(e))):this.resolve(e),c=null!=n?n:this.machine.context;i=this.resolveState(Vh.from(s,c))}if(!Up&&a.name===sv)throw new Error("An event cannot have the wildcard type ('".concat(sv,"')"));if(this.strict&&!this.events.includes(a.name)&&(o=a.name,!/^(done|error)\./.test(o)))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(a.name,"'"));var u=this._transition(i.value,i,a)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:i,actions:[]},l=Ph([],this.getStateNodes(i.value)),f=u.configuration.length?Ph(l,u.configuration):l;return u.configuration=mp([],vp(f),!1),this.resolveTransition(u,i,i.context,r,a)},e.prototype.resolveRaisedTransition=function(e,t,n,r){var i,o=e.actions;return(e=this.transition(e,t,void 0,r))._event=n,e.event=n.data,(i=e.actions).unshift.apply(i,mp([],vp(o),!1)),e},e.prototype.resolveTransition=function(e,t,n,r,i){var o,a,s=this;void 0===i&&(i=vh);var c=e.configuration,u=!t||e.transitions.length>0,l=u?e.configuration:t?t.configuration:[],f=jh(l,this),d=u?Uh(this.machine,c):void 0,p=t?t.historyValue?t.historyValue:e.source?this.machine.historyValue(t.value):void 0:void 0,h=this.getActions(new(cr())(l),f,e,n,i,t),v=t?dp({},t.activities):{};try{for(var m=hp(h),g=m.next();!g.done;g=m.next()){var y=g.value;y.type===gp?v[y.activity.id||y.activity.type]=y:y.type===yp&&(v[y.activity.id||y.activity.type]=!1)}}catch(e){o={error:e}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}var b,w,_=vp(Ch(this,t,n,i,h,r,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),E=_[0],S=_[1],R=vp(Xp(E,(function(e){return e.type===bp||e.type===wp&&e.to===fp.Internal})),2),x=R[0],C=R[1],k=E.filter((function(e){var t;return e.type===gp&&(null===(t=e.activity)||void 0===t?void 0:t.type)===Cp})),T=k.reduce((function(e,t){return e[t.activity.id]=function(e,t,n,r){var i,o=dh(e.src),a=null===(i=null==t?void 0:t.options.services)||void 0===i?void 0:i[o.type],s=e.data?Yp(e.data,n,r):void 0,c=a?Ih(a,e.id,s):Th(e.id);return c.meta=e,c}(t.activity,s.machine,S,i),e}),t?dp({},t.children):{}),I=new Vh({value:d||t.value,context:S,_event:i,_sessionid:t?t._sessionid:null,historyValue:d?p?(b=p,w=d,{current:w,states:Qp(b,w)}):void 0:t?t.historyValue:void 0,history:!d||e.source?t:void 0,actions:d?C:[],activities:d?v:t?t.activities:{},events:[],configuration:l,transitions:e.transitions,children:T,done:f,tags:Fh(l),machine:this}),O=n!==S;I.changed=i.name===Op||O;var A=I.history;A&&delete A.history;var L=!f&&(this._transient||c.some((function(e){return e._transient})));if(!(u||L&&i.name!==av))return I;var M=I;if(!f)for(L&&(M=this.resolveRaisedTransition(M,{type:Ep},i,r));x.length;){var P=x.shift();M=this.resolveRaisedTransition(M,P._event,i,r)}var N=M.changed||(A?!!M.actions.length||O||(0,Gn.Z)(A.value)!==(0,Gn.Z)(M.value)||!Bh(M.value,A.value):void 0);return M.changed=N,M.history=A,M},e.prototype.getStateNode=function(e){if(uv(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var t=this.states[e];if(!t)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return t},e.prototype.getStateNodeById=function(e){var t=uv(e)?e.slice("#".length):e;if(t===this.id)return this;var n=this.machine.idMap[t];if(!n)throw new Error("Child state node '#".concat(t,"' does not exist on machine '").concat(this.id,"'"));return n},e.prototype.getStateNodeByPath=function(e){if("string"==typeof e&&uv(e))try{return this.getStateNodeById(e.slice(1))}catch(e){}for(var t=Fp(e,this.delimiter).slice(),n=this;t.length;){var r=t.shift();if(!r.length)break;n=n.getStateNode(r)}return n},e.prototype.resolve=function(e){var t,n=this;if(!e)return this.initialStateValue||cv;switch(this.type){case"parallel":return qp(this.initialStateValue,(function(t,r){return t?n.getStateNode(r).resolve(e[r]||t):cv}));case"compound":if(ih(e)){var r=this.getStateNode(e);return"parallel"===r.type||"compound"===r.type?((t={})[e]=r.initialStateValue,t):e}return xt()(e).length?qp(e,(function(e,t){return e?n.getStateNode(t).resolve(e):cv})):this.initialStateValue||{};default:return e||cv}},e.prototype.getResolvedPath=function(e){if(uv(e)){var t=this.machine.idMap[e.slice("#".length)];if(!t)throw new Error("Unable to find state node '".concat(e,"'"));return t.path}return Fp(e,this.delimiter)},$n()(e.prototype,"initialStateValue",{get:function(){var e,t;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)t=Wp(this.states,(function(e){return e.initialStateValue||cv}),(function(e){return!("history"===e.type)}));else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));t=Oh(this.states[this.initial])?this.initial:((e={})[this.initial]=this.states[this.initial].initialStateValue,e)}else t={};return this.__cache.initialStateValue=t,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(e,t){this._init();var n=this.getStateNodes(e);return this.resolveTransition({configuration:n,entrySet:mp([],vp(n),!1),exitSet:[],transitions:[],source:void 0,actions:[]},void 0,null!=t?t:this.machine.context,void 0)},$n()(e.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),$n()(e.prototype,"target",{get:function(){var e;if("history"===this.type){var t=this.config;e=ih(t.target)&&uv(t.target)?Vp(this.machine.getStateNodeById(t.target).path.slice(this.path.length-1)):t.target}return e},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(e,t,n){return void 0===n&&(n=!0),n?"history"===e.type?e.resolveHistory(t):e.initialStateNodes:[e]},$n()(e.prototype,"initialStateNodes",{get:function(){var e=this;return Oh(this)?[this]:"compound"!==this.type||this.initial?Hp(Gp(this.initialStateValue).map((function(t){return e.getFromRelativePath(t)}))):(Up||th(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this])},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var t=vp(e),n=t[0],r=t.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var i=this.getStateNode(n);if("history"===i.type)return i.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(r)},e.prototype.historyValue=function(e){if(xt()(this.states).length)return{current:e||this.initialStateValue,states:Wp(this.states,(function(t,n){if(!e)return t.historyValue();var r=ih(e)?void 0:e[n];return t.historyValue(r||t.initialStateValue)}),(function(e){return!e.history}))}},e.prototype.resolveHistory=function(e){var t=this;if("history"!==this.type)return[this];var n=this.parent;if(!e){var r=this.target;return r?Hp(Gp(r).map((function(e){return n.getFromRelativePath(e)}))):n.initialStateNodes}var i,o,a=(i=n.path,o="states",function(e){var t,n,r=e;try{for(var a=hp(i),s=a.next();!s.done;s=a.next()){var c=s.value;r=r[o][c]}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r})(e).current;return ih(a)?[n.getStateNode(a)]:Hp(Gp(a).map((function(e){return"deep"===t.history?n.getFromRelativePath(e):[n.states[e[0]]]})))},$n()(e.prototype,"stateIds",{get:function(){var e=this,t=Hp(xt()(this.states).map((function(t){return e.states[t].stateIds})));return[this.id].concat(t)},enumerable:!1,configurable:!0}),$n()(e.prototype,"events",{get:function(){var e,t,n,r;if(this.__cache.events)return this.__cache.events;var i=this.states,o=new(cr())(this.ownEvents);if(i)try{for(var a=hp(xt()(i)),s=a.next();!s.done;s=a.next()){var c=i[s.value];if(c.states)try{for(var u=(n=void 0,hp(c.events)),l=u.next();!l.done;l=u.next()){var f=l.value;o.add("".concat(f))}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return this.__cache.events=gt()(o)},enumerable:!1,configurable:!0}),$n()(e.prototype,"ownEvents",{get:function(){var e=new(cr())(this.transitions.filter((function(e){return!(!e.target&&!e.actions.length&&e.internal)})).map((function(e){return e.eventType})));return gt()(e)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(e){var t=this;if(void 0!==e)return e.map((function(e){if(!ih(e))return e;var n=e[0]===t.delimiter;if(n&&!t.parent)return t.getStateNodeByPath(e.slice(1));var r=n?t.key+e:e;if(!t.parent)return t.getStateNodeByPath(r);try{return t.parent.getStateNodeByPath(r)}catch(e){throw new Error("Invalid transition definition for state node '".concat(t.id,"':\n").concat(e.message))}}))},e.prototype.formatTransition=function(e){var t=this,n=function(e){if(void 0!==e&&e!==Dp)return Kp(e)}(e.target),r="internal"in e?e.internal:!n||n.some((function(e){return ih(e)&&e[0]===t.delimiter})),i=this.machine.options.guards,o=this.resolveTarget(n),a=dp(dp({},e),{actions:yh(Kp(e.actions)),cond:oh(e.cond,i),target:o,source:this,internal:r,eventType:e.event,toJSON:function(){return dp(dp({},a),{target:a.target?a.target.map((function(e){return"#".concat(e.id)})):void 0,source:"#".concat(t.id)})}});return a},e.prototype.formatTransitions=function(){var e,t,n,r=this;if(this.config.on)if(St()(this.config.on))n=this.config.on;else{var i=this.config.on,o=sv,a=i[o],s=void 0===a?[]:a,c=pp(i,["symbol"===(0,Gn.Z)(o)?o:"*"]);n=Hp(xt()(c).map((function(e){Up||e!==av||th(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(r.id,'".'));var t=lh(e,c[e]);return Up||function(e,t,n){var r=n.slice(0,-1).some((function(e){return!("cond"in e)&&!("in"in e)&&(ih(e.target)||sh(e.target))})),i=t===av?"the transient event":"event '".concat(t,"'");th(!r,"One or more transitions for ".concat(i," on state '").concat(e.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")}(r,e,t),t})).concat(lh(sv,s)))}else n=[];var u=this.config.always?lh("",this.config.always):[],l=this.config.onDone?lh(String(Sh(this.id)),this.config.onDone):[];Up||th(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var f=Hp(this.invoke.map((function(e){var t=[];return e.onDone&&t.push.apply(t,mp([],vp(lh(String(Rh(e.id)),e.onDone)),!1)),e.onError&&t.push.apply(t,mp([],vp(lh(String(xh(e.id)),e.onError)),!1)),t}))),d=this.after,p=Hp(mp(mp(mp(mp([],vp(l),!1),vp(f),!1),vp(n),!1),vp(u),!1).map((function(e){return Kp(e).map((function(e){return r.formatTransition(e)}))})));try{for(var h=hp(d),v=h.next();!v.done;v=h.next()){var m=v.value;p.push(m)}}catch(t){e={error:t}}finally{try{v&&!v.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}return p},e}(),fv=!1;var dv=function(e){return{type:Sp,assignment:e}};function pv(e,t){var n=xt()(e);if(lr()){var r=lr()(e);t&&(r=r.filter((function(t){return Wn()(e,t).enumerable}))),n.push.apply(n,r)}return n}function hv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pv(Object(n),!0).forEach((function(t){Nr(e,t,n[t])})):dr()?hr()(e,dr()(n)):pv(Object(n)).forEach((function(t){$n()(e,t,Wn()(n,t))}))}return e}var vv=4294967294,mv=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i,a,s){var c;(0,o.Z)(this,n),c=t.call(this),Nr((0,At.Z)(c),"id",void 0),Nr((0,At.Z)(c),"createLocalOfferCallback",void 0),Nr((0,At.Z)(c),"handleRemoteOfferCallback",void 0),Nr((0,At.Z)(c),"handleRemoteAnswerCallback",void 0),Nr((0,At.Z)(c),"stateMachine",void 0),Nr((0,At.Z)(c),"initiateOfferPromises",void 0),c.id=a||"ROAP",c.createLocalOfferCallback=e,c.handleRemoteOfferCallback=r,c.handleRemoteAnswerCallback=i,c.initiateOfferPromises=[];var u=function(e,t){return Up||e.predictableActionArguments||fv||(fv=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new lv(e,t)}({tsTypes:{},schema:{context:{},events:{},services:{}},preserveActionOrder:!0,id:"roap",initial:"idle",context:{seq:s||0,pendingLocalOffer:!1,isHandlingOfferRequest:!1,retryCounter:0},states:{browserError:{onEntry:function(e,t){c.error("FSM","browserError state onEntry: context=".concat(kt()(e),":"),t.data),c.emit(Xf.ROAP_FAILURE,t.data)}},remoteError:{onEntry:function(e,t){c.log("FSM","remoteError state onEntry called, emitting Event.ROAP_FAILURE"),c.emit(Xf.ROAP_FAILURE,t.data)}},idle:{always:{cond:"isPendingLocalOffer",actions:["increaseSeq","sendStartedEvent"],target:"creatingLocalOffer"},on:{INITIATE_OFFER:{actions:["increaseSeq","sendStartedEvent"],target:"creatingLocalOffer"},REMOTE_OFFER_ARRIVED:[{cond:"isSameSeq",actions:"sendOutOfOrderError"},{actions:["updateSeq","sendStartedEvent"],target:"settingRemoteOffer"}],REMOTE_OFFER_REQUEST_ARRIVED:[{cond:"isSameSeq",actions:"sendOutOfOrderError"},{actions:["updateSeq","setOfferRequestFlag","sendStartedEvent"],target:"creatingLocalOffer"}],REMOTE_ANSWER_ARRIVED:[{cond:"isSameSeq",actions:"ignoreDuplicate"},{actions:"sendInvalidStateError"}],REMOTE_OK_ARRIVED:{actions:"sendInvalidStateError"}}},creatingLocalOffer:{invoke:{src:"createLocalOffer",onDone:[{cond:"isPendingLocalOffer",target:"creatingLocalOffer"},{cond:"isHandlingOfferRequest",actions:["sendRoapOfferResponseMessage","resolvePendingInitiateOfferPromises"],target:"waitingForAnswer"},{actions:["sendRoapOfferMessage","resolvePendingInitiateOfferPromises"],target:"waitingForAnswer"}],onError:{actions:"rejectPendingInitiateOfferPromises",target:"browserError"}},onEntry:["resetPendingLocalOffer"],on:{INITIATE_OFFER:{actions:"enqueueNewOfferCreation"},REMOTE_OFFER_ARRIVED:[{actions:"handleGlare"}],REMOTE_OFFER_REQUEST_ARRIVED:[{cond:"isHandlingOfferRequest",actions:"ignoreDuplicate"},{actions:"handleGlare"}],REMOTE_ANSWER_ARRIVED:{actions:"sendInvalidStateError"},REMOTE_OK_ARRIVED:{actions:"sendInvalidStateError"}}},waitingForAnswer:{on:{REMOTE_ANSWER_ARRIVED:[{actions:["resetRetryCounter","updateSeq"],target:"settingRemoteAnswer"}],INITIATE_OFFER:{actions:"enqueueNewOfferCreation"},REMOTE_OFFER_ARRIVED:{actions:"handleGlare"},REMOTE_OFFER_REQUEST_ARRIVED:[{cond:"isHandlingOfferRequest",actions:"ignoreDuplicate"},{actions:"handleGlare"}],REMOTE_OK_ARRIVED:{actions:"sendInvalidStateError"},ERROR_ARRIVED:[{cond:"shouldErrorTriggerOfferRetry",actions:["increaseSeq","increaseRetryCounter"],target:"creatingLocalOffer"},{cond:"isSameSeq",target:"remoteError"}]}},settingRemoteAnswer:{invoke:{src:"handleRemoteAnswer",onDone:{actions:["sendRoapOKMessage","resetOfferRequestFlag","sendDoneEvent"],target:"idle"},onError:{actions:"sendGenericError",target:"browserError"}},on:{INITIATE_OFFER:{actions:"enqueueNewOfferCreation"},REMOTE_OFFER_ARRIVED:{actions:"sendInvalidStateError"},REMOTE_OFFER_REQUEST_ARRIVED:{actions:"sendInvalidStateError"},REMOTE_ANSWER_ARRIVED:[{cond:"isSameSeq",actions:"ignoreDuplicate"},{actions:"sendInvalidStateError"}],REMOTE_OK_ARRIVED:{actions:"sendInvalidStateError"}}},settingRemoteOffer:{invoke:{src:"handleRemoteOffer",onDone:{actions:["sendRoapAnswerMessage"],target:"waitingForOK"},onError:{actions:"sendGenericError",target:"browserError"}},on:{INITIATE_OFFER:{actions:"enqueueNewOfferCreation"},REMOTE_OFFER_ARRIVED:[{cond:"isSameSeq",actions:"ignoreDuplicate"},{actions:"sendRetryAfterError"}],REMOTE_OFFER_REQUEST_ARRIVED:{actions:"sendInvalidStateError"},REMOTE_ANSWER_ARRIVED:{actions:"sendInvalidStateError"},REMOTE_OK_ARRIVED:{actions:"sendInvalidStateError"}}},waitingForOK:{on:{REMOTE_OK_ARRIVED:[{actions:["updateSeq","sendDoneEvent"],target:"idle"}],INITIATE_OFFER:{actions:"enqueueNewOfferCreation"},REMOTE_OFFER_ARRIVED:[{cond:"isSameSeq",actions:"ignoreDuplicate"},{actions:"sendInvalidStateError"}],REMOTE_OFFER_REQUEST_ARRIVED:{actions:"sendInvalidStateError"},REMOTE_ANSWER_ARRIVED:{actions:"sendInvalidStateError"},ERROR_ARRIVED:{cond:"isSameSeq",target:"remoteError"}}}}},{services:{createLocalOffer:function(){return c.createLocalOfferCallback()},handleRemoteAnswer:function(e,t){return c.handleRemoteAnswerCallback(t.sdp)},handleRemoteOffer:function(e,t){return c.handleRemoteOfferCallback(t.sdp)}},actions:{enqueueNewOfferCreation:dv((function(e){return hv(hv({},e),{},{pendingLocalOffer:!0})})),resetPendingLocalOffer:dv((function(e){return hv(hv({},e),{},{pendingLocalOffer:!1})})),increaseSeq:dv((function(e){return hv(hv({},e),{},{seq:e.seq+1})})),updateSeq:dv((function(e,t){return hv(hv({},e),{},{seq:t.seq})})),increaseRetryCounter:dv((function(e){return hv(hv({},e),{},{retryCounter:e.retryCounter+1})})),resetRetryCounter:dv((function(e){return hv(hv({},e),{},{retryCounter:0})})),setOfferRequestFlag:dv((function(e){return hv(hv({},e),{},{isHandlingOfferRequest:!0})})),resetOfferRequestFlag:dv((function(e){return hv(hv({},e),{},{isHandlingOfferRequest:!1})})),handleGlare:function(e,t){t.tieBreaker===vv?c.sendErrorMessage(t.seq,ed.DOUBLECONFLICT):c.sendErrorMessage(t.seq,ed.CONFLICT)},sendRoapOfferMessage:function(e,t){return c.sendRoapOfferMessage(e.seq,t.data.sdp)},sendRoapOfferResponseMessage:function(e,t){return c.sendRoapOfferResponseMessage(e.seq,t.data.sdp)},sendRoapOKMessage:function(e){return c.sendRoapOkMessage(e.seq)},sendRoapAnswerMessage:function(e,t){return c.sendRoapAnswerMessage(e.seq,t.data.sdp)},sendStartedEvent:function(){return c.sendStartedEvent()},sendDoneEvent:function(){return c.sendDoneEvent()},sendGenericError:function(e){return c.sendErrorMessage(e.seq,ed.FAILED)},sendInvalidStateError:function(e,t){return c.sendErrorMessage(t.seq,ed.INVALID_STATE)},sendOutOfOrderError:function(e,t){return c.sendErrorMessage(t.seq,ed.OUT_OF_ORDER)},sendRetryAfterError:function(e,t){return c.sendErrorMessage(t.seq,ed.FAILED,{retryAfter:Math.floor(11*Math.random())})},ignoreDuplicate:function(e,t){return c.log("FSM","ignoring duplicate roap message ".concat(t.type," with seq=").concat(t.seq))},resolvePendingInitiateOfferPromises:function(){return c.resolvePendingInitiateOfferPromises()},rejectPendingInitiateOfferPromises:function(e,t){return c.rejectPendingInitiateOfferPromises(t.data)}},guards:{isPendingLocalOffer:function(e){return e.pendingLocalOffer},isHandlingOfferRequest:function(e){return e.isHandlingOfferRequest},isSameSeq:function(e,t){return t.seq===e.seq&&(c.log("FSM","incoming roap message seq is same as current context seq: ".concat(t.seq)),!0)},shouldErrorTriggerOfferRetry:function(e,t){if([ed.DOUBLECONFLICT,ed.INVALID_STATE,ed.OUT_OF_ORDER,ed.RETRY].includes(t.errorType)){if(t.seq===e.seq&&e.retryCounter<2)return c.log("FSM","retryable error message received with matching seq and retryCounter ".concat(e.retryCounter," < ").concat(2)),!0;t.seq!==e.seq?c.log("FSM","ignoring error message with wrong seq: ".concat(t.seq," !== ").concat(e.seq)):c.log("FSM","reached max retries: retryCounter=".concat(e.retryCounter))}return!1}}});return c.stateMachine=rv(u).onTransition((function(e,t){return c.log("onTransition","state=".concat(e.value,", event=").concat(kt()(t)))})).start(),c}return(0,a.Z)(n,[{key:"log",value:function(e,t){Co().info("".concat(this.id,":").concat(e," ").concat(t))}},{key:"error",value:function(e,t,n){Co().error("".concat(this.id,":").concat(e," ").concat(t," ").concat(ko(n)))}},{key:"sendRoapOfferMessage",value:function(e,t){this.log("sendRoapOfferMessage","emitting ROAP OFFER"),this.emit(Xf.ROAP_MESSAGE_TO_SEND,{roapMessage:{seq:e,messageType:"OFFER",sdp:t,tieBreaker:vv}})}},{key:"sendRoapOfferResponseMessage",value:function(e,t){this.log("sendRoapOfferResponseMessage","emitting ROAP OFFER RESPONSE"),this.emit(Xf.ROAP_MESSAGE_TO_SEND,{roapMessage:{seq:e,messageType:"OFFER_RESPONSE",sdp:t}})}},{key:"sendRoapOkMessage",value:function(e){this.log("sendRoapOkMessage","emitting ROAP OK"),this.emit(Xf.ROAP_MESSAGE_TO_SEND,{roapMessage:{seq:e,messageType:"OK"}})}},{key:"sendRoapAnswerMessage",value:function(e,t){this.log("sendRoapAnswerMessage","emitting ROAP ANSWER"),this.emit(Xf.ROAP_MESSAGE_TO_SEND,{roapMessage:{seq:e,messageType:"ANSWER",sdp:t}})}},{key:"sendDoneEvent",value:function(){this.log("sendDoneEvent","emitting ROAP DONE"),this.emit(Xf.ROAP_DONE)}},{key:"sendStartedEvent",value:function(){this.log("sendStartedEvent","emitting ROAP STARTED"),this.emit(Xf.ROAP_STARTED)}},{key:"sendErrorMessage",value:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).retryAfter;this.log("sendErrorMessage","emitting ROAP ERROR (".concat(t,")")),this.emit(Xf.ROAP_MESSAGE_TO_SEND,{roapMessage:{seq:e,messageType:"ERROR",errorType:t,retryAfter:n}})}},{key:"getStateMachine",value:function(){return this.stateMachine}},{key:"initiateOffer",value:function(){var e=this;return new(It())((function(t,n){e.initiateOfferPromises.push({resolve:t,reject:n}),e.stateMachine.send("INITIATE_OFFER")}))}},{key:"resolvePendingInitiateOfferPromises",value:function(){for(;this.initiateOfferPromises.length>0;){var e=this.initiateOfferPromises.shift();null==e||e.resolve()}}},{key:"rejectPendingInitiateOfferPromises",value:function(e){for(;this.initiateOfferPromises.length>0;){var t=this.initiateOfferPromises.shift();null==t||t.reject(e)}}},{key:"validateIncomingRoapMessage",value:function(e){var t,n=e.errorType,r=e.messageType,i=e.seq,o=!0;return i<this.stateMachine.state.context.seq&&(o=!1,"ERROR"!==r?(t=ed.OUT_OF_ORDER,this.error("validateIncomingRoapMessage","received roap message ".concat(r," with seq too low: ").concat(i," < ").concat(this.stateMachine.state.context.seq))):this.error("validateIncomingRoapMessage","received ERROR message ".concat(n," with seq too low: ").concat(i," < ").concat(this.stateMachine.state.context.seq,", ignoring it"))),{isValid:o,errorToSend:t}}},{key:"roapMessageReceived",value:function(e){var t=e.errorCause,n=e.errorType,r=e.messageType,i=e.sdp,o=e.seq,a=e.tieBreaker,s=this.validateIncomingRoapMessage(e),c=s.isValid,u=s.errorToSend;if(c)switch(r){case"ANSWER":this.stateMachine.send("REMOTE_ANSWER_ARRIVED",{sdp:i,seq:o});break;case"OFFER":this.stateMachine.send("REMOTE_OFFER_ARRIVED",{sdp:i,seq:o,tieBreaker:a});break;case"OFFER_REQUEST":this.stateMachine.send("REMOTE_OFFER_REQUEST_ARRIVED",{seq:o,tieBreaker:a});break;case"OK":this.stateMachine.send("REMOTE_OK_ARRIVED",{sdp:i,seq:o});break;case"ERROR":this.error("roapMessageReceived","Error received: seq=".concat(o," type=").concat(n," cause=").concat(t)),n===ed.CONFLICT&&this.error("roapMessageReceived","CONFLICT error type received - this should never happen, because we use the tieBreaker value ".concat(vv)),this.stateMachine.send("ERROR_ARRIVED",{seq:o,errorType:n});break;case"OFFER_RESPONSE":this.error("roapMessageReceived","Received unexpected OFFER_RESPONSE: seq=".concat(o));break;default:throw this.error("roapMessageReceived()","unsupported messageType: ".concat(r)),new Error("unhandled messageType")}else u&&this.sendErrorMessage(o,u)}},{key:"stop",value:function(){this.stateMachine.stop()}},{key:"getSeq",value:function(){return this.stateMachine.state.context.seq}}]),n}(Eo);function gv(e,t){var n=xt()(e);if(lr()){var r=lr()(e);t&&(r=r.filter((function(t){return Wn()(e,t).enumerable}))),n.push.apply(n,r)}return n}function yv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gv(Object(n),!0).forEach((function(t){Nr(e,t,n[t])})):dr()?hr()(e,dr()(n)):gv(Object(n)).forEach((function(t){$n()(e,t,Wn()(n,t))}))}return e}var bv=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r,i){var a;return(0,o.Z)(this,n),a=t.call(this),Nr((0,At.Z)(a),"id",void 0),Nr((0,At.Z)(a),"debugId",void 0),Nr((0,At.Z)(a),"mediaConnection",void 0),Nr((0,At.Z)(a),"roap",void 0),Nr((0,At.Z)(a),"sdpNegotiationStarted",void 0),a.debugId=i,a.id=i||"RoapMediaConnection",a.sdpNegotiationStarted=!1,a.log("constructor()","config: ".concat(kt()(e),", options: ").concat(kt()(r))),a.mediaConnection=a.createMediaConnection(e,r,i),a.roap=a.createRoap(i),a}return(0,a.Z)(n,[{key:"log",value:function(e,t){Co().info("".concat(this.id,":").concat(e," ").concat(t))}},{key:"error",value:function(e,t,n){Co().error("".concat(this.id,":").concat(e," ").concat(t," ").concat(ko(n)))}},{key:"createMediaConnection",value:function(e,t,n){var r=new ad(e,t,n);return r.on(Xf.REMOTE_TRACK_ADDED,this.onRemoteTrack.bind(this)),r.on(Xf.CONNECTION_STATE_CHANGED,this.onConnectionStateChanged.bind(this)),r.on(Xf.DTMF_TONE_CHANGED,this.onDtmfToneChanged.bind(this)),r}},{key:"createRoap",value:function(e,t){var n=this,r=new mv(this.createLocalOffer.bind(this),this.handleRemoteOffer.bind(this),this.handleRemoteAnswer.bind(this),e,t);return r.on(Xf.ROAP_MESSAGE_TO_SEND,(function(e){return n.emit(Xf.ROAP_MESSAGE_TO_SEND,e)})),r.on(Xf.ROAP_STARTED,(function(){return n.emit(Xf.ROAP_STARTED)})),r.on(Xf.ROAP_DONE,(function(){return n.emit(Xf.ROAP_DONE)})),r.on(Xf.ROAP_FAILURE,(function(e){return n.emit(Xf.ROAP_FAILURE,e)})),r}},{key:"initiateOffer",value:function(){return this.log("initiateOffer()","called"),this.sdpNegotiationStarted?(this.error("initiateOffer()","SDP negotiation already started"),It().reject(new Error("SDP negotiation already started"))):(this.mediaConnection.initializeTransceivers(!1),this.sdpNegotiationStarted=!0,this.roap.initiateOffer())}},{key:"close",value:function(){this.log("close()","called"),this.closeMediaConnection(),this.stopRoapSession()}},{key:"closeMediaConnection",value:function(){this.mediaConnection.close(),this.mediaConnection.removeAllListeners()}},{key:"stopRoapSession",value:function(){this.roap.stop(),this.roap.removeAllListeners()}},{key:"reconnect",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.log("reconnect()","iceServers: ".concat(kt()(e)));var n=yv(yv({},this.mediaConnection.getConfig()),{},{iceServers:e}),r=this.mediaConnection.getSendReceiveOptions(),i=this.roap.getSeq();return this.stopRoapSession(),this.closeMediaConnection(),this.sdpNegotiationStarted=!1,this.mediaConnection=this.createMediaConnection(n,r,this.debugId),this.roap=this.createRoap(this.debugId,i),t?this.initiateOffer():It().resolve()}},{key:"updateSendOptions",value:function(e){return this.log("updateSendOptions()","called with ".concat(kt()(e))),this.mediaConnection.updateSendOptions(e)?(this.log("updateSendOptions()","triggering offer..."),this.roap.initiateOffer()):It().resolve()}},{key:"updateReceiveOptions",value:function(e){return this.log("updateReceiveOptions()","called with ".concat(kt()(e))),this.mediaConnection.updateReceiveOptions(e)?(this.log("updateReceiveOptions()","triggering offer..."),this.roap.initiateOffer()):It().resolve()}},{key:"updateSendReceiveOptions",value:function(e){return this.log("updateSendReceiveOptions()","called with ".concat(kt()(e))),this.mediaConnection.updateSendReceiveOptions(e)?(this.log("updateSendReceiveOptions()","triggering offer..."),this.roap.initiateOffer()):It().resolve()}},{key:"getConnectionState",value:function(){return this.mediaConnection.getConnectionState()}},{key:"getStats",value:function(){return this.mediaConnection.getStats()}},{key:"getTransceiverStats",value:function(){return this.mediaConnection.getTransceiverStats()}},{key:"insertDTMF",value:function(e,t,n){this.log("insertDTMF()",'called with tones="'.concat(e,'", duration=').concat(t,", interToneGap=").concat(n)),this.mediaConnection.insertDTMF(e,t,n)}},{key:"roapMessageReceived",value:function(e){this.log("roapMessageReceived()","called with messageType=".concat(e.messageType,", seq=").concat(e.seq)),this.sdpNegotiationStarted||("OFFER"===e.messageType&&(this.sdpNegotiationStarted=!0,this.mediaConnection.initializeTransceivers(!0)),"OFFER_REQUEST"===e.messageType&&(this.sdpNegotiationStarted=!0,this.mediaConnection.initializeTransceivers(!1))),this.roap.roapMessageReceived(e)}},{key:"onRemoteTrack",value:function(e){this.emit(Xf.REMOTE_TRACK_ADDED,e)}},{key:"onConnectionStateChanged",value:function(e){this.emit(Xf.CONNECTION_STATE_CHANGED,e)}},{key:"onDtmfToneChanged",value:function(e){this.emit(Xf.DTMF_TONE_CHANGED,e)}},{key:"createLocalOffer",value:function(){return this.mediaConnection.createLocalOffer()}},{key:"handleRemoteOffer",value:function(e){return this.mediaConnection.handleRemoteOffer(e)}},{key:"handleRemoteAnswer",value:function(e){return this.mediaConnection.handleRemoteAnswer(e)}}]),n}(Eo),wv="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==qr?qr:"undefined"!=typeof self?self:{},_v={exports:{}};!function(e){!function(t){var n,r={};r.VERSION="1.6.1";var i={},o=function(e,t){return function(){return t.apply(e,arguments)}},a=function(){var e,t,n=arguments,r=n[0];for(t=1;t<n.length;t++)for(e in n[t])!(e in r)&&n[t].hasOwnProperty(e)&&(r[e]=n[t][e]);return r},s=function(e,t){return{value:e,name:t}};r.TRACE=s(1,"TRACE"),r.DEBUG=s(2,"DEBUG"),r.INFO=s(3,"INFO"),r.TIME=s(4,"TIME"),r.WARN=s(5,"WARN"),r.ERROR=s(8,"ERROR"),r.OFF=s(99,"OFF");var c=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};c.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},getLevel:function(){return this.context.filterLevel},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},trace:function(){this.invoke(r.TRACE,arguments)},debug:function(){this.invoke(r.DEBUG,arguments)},info:function(){this.invoke(r.INFO,arguments)},warn:function(){this.invoke(r.WARN,arguments)},error:function(){this.invoke(r.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(r.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(r.TIME,[e,"end"])},invoke:function(e,t){n&&this.enabledFor(e)&&n(t,a({level:e},this.context))}};var u,l=new c({filterLevel:r.OFF});(u=r).enabledFor=o(l,l.enabledFor),u.trace=o(l,l.trace),u.debug=o(l,l.debug),u.time=o(l,l.time),u.timeEnd=o(l,l.timeEnd),u.info=o(l,l.info),u.warn=o(l,l.warn),u.error=o(l,l.error),u.log=u.info,r.setHandler=function(e){n=e},r.setLevel=function(e){for(var t in l.setLevel(e),i)i.hasOwnProperty(t)&&i[t].setLevel(e)},r.getLevel=function(){return l.getLevel()},r.get=function(e){return i[e]||(i[e]=new c(a({name:e},l.context)))},r.createDefaultHandler=function(e){(e=e||{}).formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var t={},n=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(i,o){i=Array.prototype.slice.call(i);var a,s=console.log;o.level===r.TIME?(a=(o.name?"["+o.name+"] ":"")+i[0],"start"===i[1]?console.time?console.time(a):t[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):n(s,[a+": "+((new Date).getTime()-t[a])+"ms"])):(o.level===r.WARN&&console.warn?s=console.warn:o.level===r.ERROR&&console.error?s=console.error:o.level===r.INFO&&console.info?s=console.info:o.level===r.DEBUG&&console.debug?s=console.debug:o.level===r.TRACE&&console.trace&&(s=console.trace),e.formatter(i,o),n(s,i))}},r.useDefaults=function(e){r.setLevel(e&&e.defaultLevel||r.DEBUG),r.setHandler(r.createDefaultHandler(e))},r.setDefaults=r.useDefaults,e.exports?e.exports=r:(r._prevLogger=t.Logger,r.noConflict=function(){return t.Logger=r._prevLogger,r},t.Logger=r)}(wv)}(_v);var Ev=_v.exports;Ev.useDefaults({defaultLevel:Ev.DEBUG,formatter:function(e,t){e.unshift("[".concat(t.name,"] "))}});var Sv,Rv,xv=function(){function e(t,n,r,i){(0,o.Z)(this,e),this.priority=t,this.crossPriorityDuplication=n,this.crossPolicyDuplication=r,this.preferLiveVideo=i}return(0,a.Z)(e,[{key:"toString",value:function(){return"ActiveSpeakerInfo(priority=".concat(this.priority,", crossPriorityDuplication=").concat(this.crossPriorityDuplication,", crossPolicyDuplication=").concat(this.crossPolicyDuplication,", preferLiveVideo=").concat(this.preferLiveVideo,")")}}]),e}();!function(e){e.Multistream="multistream"}(Sv||(Sv={})),function(e){e.Scr="scr",e.ScrAck="scrAck",e.ActiveSpeakerNotification="activeSpeakerNotification",e.SourceIndication="sourceIndication",e.SourceIndicationAck="sourceIndicationAck"}(Rv||(Rv={}));var Cv,kv,Tv,Iv,Ov,Av=(0,a.Z)((function e(t,n){(0,o.Z)(this,e),this.payloadType=t,this.h264=n})),Lv=(0,a.Z)((function e(t,n,r,i,a){(0,o.Z)(this,e),this.maxFs=t,this.maxFps=n,this.maxMbps=r,this.maxWidth=i,this.maxHeight=a})),Mv=function(){function e(t){(0,o.Z)(this,e),this.csi=t}return(0,a.Z)(e,[{key:"toString",value:function(){return"ReceiverSelectedInfo(csi=".concat(this.csi,")")}}]),e}();function Pv(e){return[Iv.VideoMain,Iv.VideoSlides].includes(e)?Cv.Video:Cv.Audio}function Nv(e,t){var n=xt()(e);if(lr()){var r=lr()(e);t&&(r=r.filter((function(t){return Wn()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nv(Object(n),!0).forEach((function(t){Nr(e,t,n[t])})):dr()?hr()(e,dr()(n)):Nv(Object(n)).forEach((function(t){$n()(e,t,Wn()(n,t))}))}return e}!function(e){e.Audio="AUDIO",e.Video="VIDEO"}(Cv||(Cv={})),function(e){e.Main="MAIN",e.Slides="SLIDES"}(kv||(kv={})),function(e){e.ActiveSpeaker="active-speaker",e.ReceiverSelected="receiver-selected"}(Tv||(Tv={})),function(e){e.VideoMain="VIDEO-MAIN",e.VideoSlides="VIDEO-SLIDES",e.AudioMain="AUDIO-MAIN",e.AudioSlides="AUDIO-SLIDES"}(Iv||(Iv={})),function(e){e.SourceIndication="source-indication",e.ActiveSpeaker="active-speaker",e.ScrRequestReceived="scr-request-received"}(Ov||(Ov={}));var Uv=function(e){(0,s.Z)(n,e);var t=Br(n);function n(e,r){var i;return(0,o.Z)(this,n),i=t.call(this),Nr((0,At.Z)(i),"id",void 0),Nr((0,At.Z)(i),"debugId",void 0),Nr((0,At.Z)(i),"multistreamConnection",void 0),Nr((0,At.Z)(i),"roap",void 0),Nr((0,At.Z)(i),"sdpNegotiationStarted",!1),i.debugId=r,i.id=r||"MultistreamRoapMediaConnection",i.configureWcmeLogger(r),i.log("constructor()","config: ".concat(kt()(e))),i.multistreamConnection=i.createMultistreamConnection(e),i.roap=i.createRoap(r),i}return(0,a.Z)(n,[{key:"configureWcmeLogger",value:function(e){var t,n=Co();t=function(t,r){var i=gt()(t).map((function(e){return"object"===(0,Gn.Z)(e)?kt()(e):e}));switch(i.unshift("".concat(e||"",":[").concat(r.name,"]")),r.level.name){case"TRACE":n.trace.apply(n,(0,Pn.Z)(i));break;case"DEBUG":n.debug.apply(n,(0,Pn.Z)(i));break;case"INFO":n.info.apply(n,(0,Pn.Z)(i));break;case"WARN":n.warn.apply(n,(0,Pn.Z)(i));break;case"ERROR":n.error.apply(n,(0,Pn.Z)(i))}},$f.setHandler(t),Vc.setHandler(t)}},{key:"log",value:function(e,t){Co().info("".concat(this.id,":").concat(e," ").concat(t))}},{key:"error",value:function(e,t,n){Co().error("".concat(this.id,":").concat(e," ").concat(t," ").concat(ko(n)))}},{key:"createMultistreamConnection",value:function(e){var t=this;this.log("createMultistreamConnection()","creating MultistreamConnection with floorControlledPresentation: true");var n=new nd(Dv(Dv({},e),{},{floorControlledPresentation:!0}));return n.on(Hf.ActiveSpeakerNotification,(function(e){t.emit(Xf.ACTIVE_SPEAKERS_CHANGED,{csis:e.csis})})),n.on(Hf.AudioSourceCountUpdate,(function(e,n,r){t.emit(Xf.AUDIO_SOURCES_COUNT_CHANGED,e,n,r)})),n.on(Hf.VideoSourceCountUpdate,(function(e,n,r){t.emit(Xf.VIDEO_SOURCES_COUNT_CHANGED,e,n,r)})),n.on(Hf.ConnectionStateUpdate,(function(e){t.emit(Xf.CONNECTION_STATE_CHANGED,{state:e})})),n}},{key:"createRoap",value:function(e,t){var n=this,r=new mv(this.createLocalOffer.bind(this),this.handleRemoteOffer.bind(this),this.handleRemoteAnswer.bind(this),e,t);return r.on(Xf.ROAP_MESSAGE_TO_SEND,(function(e){return n.emit(Xf.ROAP_MESSAGE_TO_SEND,e)})),r.on(Xf.ROAP_STARTED,(function(){return n.emit(Xf.ROAP_STARTED)})),r.on(Xf.ROAP_DONE,(function(){return n.emit(Xf.ROAP_DONE)})),r.on(Xf.ROAP_FAILURE,(function(e){return n.emit(Xf.ROAP_FAILURE,e)})),r}},{key:"initiateOffer",value:function(){return this.log("initiateOffer()","called"),this.sdpNegotiationStarted?(this.error("initiateOffer()","SDP negotiation already started"),It().reject(new Error("SDP negotiation already started"))):(this.sdpNegotiationStarted=!0,this.roap.initiateOffer())}},{key:"close",value:function(){this.log("close()","called"),this.closeMediaConnection(),this.stopRoapSession()}},{key:"closeMediaConnection",value:function(){this.multistreamConnection.close(),this.multistreamConnection.removeAllListeners()}},{key:"stopRoapSession",value:function(){this.roap.stop(),this.roap.removeAllListeners()}},{key:"reconnect",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.log("reconnect()","iceServers: ".concat(kt()(e)));var n=this.roap.getSeq();return this.stopRoapSession(),this.sdpNegotiationStarted=!1,this.multistreamConnection.renewPeerConnection({iceServers:e}),this.roap=this.createRoap(this.debugId,n),t?this.initiateOffer():It().resolve()}},{key:"getConnectionState",value:function(){var e=this.multistreamConnection.getConnectionState();return this.log("getConnectionState()","called, returning ".concat(e)),e}},{key:"getStats",value:function(){return this.multistreamConnection.getStats()}},{key:"getTransceiverStats",value:function(){return this.multistreamConnection.getTransceiverStats()}},{key:"roapMessageReceived",value:function(e){if(this.log("roapMessageReceived()","called with messageType=".concat(e.messageType,", seq=").concat(e.seq)),!this.sdpNegotiationStarted&&"OFFER"===e.messageType)throw new Error("incoming first offer is not supported by MultistreamRoapMediaConnection");this.roap.roapMessageReceived(e)}},{key:"enableMultistreamAudio",value:function(e){return this.log("enableMultistreamAudio()","called"),this.multistreamConnection.enableMultistreamAudio(e)?this.roap.initiateOffer():It().resolve()}},{key:"publishTrack",value:function(e){return this.log("publishTrack()","called"),this.multistreamConnection.publishTrack(e)}},{key:"unpublishTrack",value:function(e){return this.log("unpublishTrack()","called"),this.multistreamConnection.unpublishTrack(e)}},{key:"createReceiveSlot",value:function(e){return this.log("createReceiveSlot()","called"),this.multistreamConnection.createReceiveSlot(e)}},{key:"requestMedia",value:function(e,t){return this.log("requestMedia()","called"),this.multistreamConnection.requestMedia(e,t)}},{key:"createLocalOffer",value:function(){return this.multistreamConnection.createOffer().then((function(e){return e.sdp?{sdp:e.sdp}:It().reject(new go("empty local SDP"))})).catch((function(e){throw new go("createLocalOffer() failure: ".concat(e.message),{cause:e})}))}},{key:"handleRemoteOffer",value:function(){return It().reject(new wo("remote offers not supported by WCME"))}},{key:"handleRemoteAnswer",value:function(e){if(e){var t=La({},e);return t=t.replace(/\r\nb=TIAS:.*\r\n/g,"\r\n"),this.multistreamConnection.setAnswer(t).catch((function(e){throw new vo("handleRemoteAnswer() failure: ".concat(e.message),{cause:e})}))}return It().reject(new vo("empty answer"))}}]),n}(Ti),Zv=_o;function jv(){var e=!1;return Si.info({mediaType:gi,action:"isBrowserSupported()",description:"Checking is current browser supported by webrtc"}),(vi.exports.browser.isChrome||vi.exports.browser.isFirefox||vi.exports.browser.isSafari||vi.exports.browser.isEdge)&&vi.exports.isWebRTCSupported&&(e=!0),e}var Fv={createAudioTrack:function(e){return Yi.apply(this,arguments)},createVideoTrack:function(e){return Ji.apply(this,arguments)},createContentTrack:function(e){return Xi.apply(this,arguments)},getCameras:Gi,getMicrophones:Hi,getSpeakers:$i,on:function(e,t){return to.apply(this,arguments)},off:function(e,t){Si.debug({mediaType:gi,action:"off()",description:"Called ".concat(e," with ").concat(t," listener")}),qi.off(e,t)},Effects:{BNR:{enableBNR:function(e){return so.apply(this,arguments)},disableBNR:function(){Si.debug({mediaType:bi,action:"disableBNR()",description:"Called"});try{if(Si.info({mediaType:bi,action:"disableBNR()",description:"Checking if BNR is enabled before disabling"}),!ro.isModuleAdded){var e=new Error("Can not disable as BNR is not enabled");throw Si.error({mediaType:bi,action:"disableBNR()",description:"Can not disable as BNR is not enabled"}),e}Si.info({mediaType:bi,action:"disableBNR()",description:"Using existing AudioWorkletNode for disabling BNR"}),ro.workletNode.port.postMessage("DISPOSE"),Si.info({mediaType:bi,action:"disableBNR()",description:"Obtaining raw media stream track and removing bnr context"});var t=ro.sourceNode.mediaStream,n=null==t?void 0:t.getAudioTracks(),r=(0,Nn.Z)(n,1)[0];return ro.isModuleAdded=!1,delete ro.workletNode,delete ro.audioContext,delete ro.sourceNode,delete ro.destinationStream,delete ro.destinationTrack,r}catch(e){throw Si.error({mediaType:bi,action:"disableBNR()",description:"Error in disableBNR",error:e}),e}}}},isBrowserSupported:jv};new Error("timeout while waiting for mutex to become available"),new Error("mutex already locked");const Bv=new Error("request for lock canceled");var Vv=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class qv{constructor(e,t=Bv){this._value=e,this._cancelError=t,this._weightedQueues=[],this._weightedWaiters=[]}acquire(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise(((t,n)=>{this._weightedQueues[e-1]||(this._weightedQueues[e-1]=[]),this._weightedQueues[e-1].push({resolve:t,reject:n}),this._dispatch()}))}runExclusive(e,t=1){return Vv(this,void 0,void 0,(function*(){const[n,r]=yield this.acquire(t);try{return yield e(n)}finally{r()}}))}waitForUnlock(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((t=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),this._weightedWaiters[e-1].push(t),this._dispatch()}))}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatch()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatch()}cancel(){this._weightedQueues.forEach((e=>e.forEach((e=>e.reject(this._cancelError))))),this._weightedQueues=[]}_dispatch(){var e;for(let t=this._value;t>0;t--){const n=null===(e=this._weightedQueues[t-1])||void 0===e?void 0:e.shift();if(!n)continue;const r=this._value,i=t;this._value-=t,t=this._value+1,n.resolve([r,this._newReleaser(i)])}this._drainUnlockWaiters()}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){for(let e=this._value;e>0;e--)this._weightedWaiters[e-1]&&(this._weightedWaiters[e-1].forEach((e=>e())),this._weightedWaiters[e-1]=[])}}var Wv=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};class zv{constructor(e){this._semaphore=new qv(1,e)}acquire(){return Wv(this,void 0,void 0,(function*(){const[,e]=yield this._semaphore.acquire();return e}))}runExclusive(e){return this._semaphore.runExclusive((()=>e()))}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}var Gv=__webpack_require__(17187),Hv=__webpack_require__.n(Gv);function $v(e){var t=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=i()(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var Kv,Yv,Jv,Xv,Qv,em,tm,nm,rm=function(e){(0,s.Z)(n,e);var t=$v(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"emit",value:function(e){for(var t,r=(new Date).toUTCString(),i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return Ie.log("".concat(r," ").concat(y.EVENT,": ").concat(e.toString()," - event emitted with parameters -> ").concat(o," = "),{file:"Events/impl/index.ts",method:"emit"}),(t=zn((0,u.Z)(n.prototype),"emit",this)).call.apply(t,[this,e].concat(o))}},{key:"on",value:function(e,t){return zn((0,u.Z)(n.prototype),"on",this).call(this,e,t)}},{key:"off",value:function(e,t){return zn((0,u.Z)(n.prototype),"off",this).call(this,e,t)}}]),n}(Hv());!function(e){e.ALERTING="call:alerting",e.CALL_ERROR="call:error",e.CALLER_ID="call:caller_id",e.CONNECT="call:connect",e.CONNECTING="callingClient: connecting",e.DISCONNECT="call:disconnect",e.ERROR="callingClient:error",e.ESTABLISHED="call:established",e.HELD="call:held",e.HOLD_ERROR="call:hold_error",e.INCOMING_CALL="callingClient:incoming_call",e.OUTGOING_CALL="callingClient:outgoing_call",e.PROGRESS="call:progress",e.RECONNECTED="callingClient:reconnected",e.RECONNECTING="callingClient:reconnecting",e.REGISTERED="callingClient:registered",e.REMOTE_MEDIA="call:remote_media",e.RESUME_ERROR="call:resume_error",e.RESUMED="call:resumed",e.TRANSFER_ERROR="call:transfer_error",e.UNREGISTERED="callingClient:unregistered",e.USER_SESSION_INFO="callingClient:user_recent_sessions",e.CB_VOICEMESSAGE_CONTENT_GET="call_back_voicemail_content_get",e.CALL_HISTORY_USER_SESSION_INFO="callHistory:user_recent_sessions",e.ALL_CALLS_CLEARED="callingClient:all_calls_cleared"}(Kv||(Kv={})),function(e){e.HOLD="hold",e.RESUME="resume",e.DIVERT="divert",e.TRANSFER="transfer",e.PARK="park"}(Yv||(Yv={})),function(e){e.HELD="HELD",e.CONNECTED="CONNECTED"}(Jv||(Jv={})),function(e){e.ANSWERED="Answered",e.CANCELED="Canceled",e.INITIATED="Initiated",e.MISSED="MISSED"}(Xv||(Xv={})),function(e){e.SPARK="SPARK",e.WEBEX_CALLING="WEBEXCALLING"}(Qv||(Qv={})),function(e){e.SERVER_EVENT_INCLUSIVE="event:mobius",e.CALL_SESSION_EVENT_INCLUSIVE="event:janus.user_recent_sessions"}(em||(em={})),function(e){e.ROAP_MESSAGE_TO_SEND="roap:messageToSend",e.MEDIA_TYPE_AUDIO="audio"}(tm||(tm={})),function(e){e.HELD="held",e.REMOTE_HELD="remoteheld",e.CONNECTED="connected"}(nm||(nm={}));var im,om;!function(e){e.CALL_PROGRESS="callprogress",e.CALL_CONNECTED="callconnected",e.CALL_DISCONNECTED="callconnected",e.CALL_INFO="callinfo",e.CALL="call",e.ROAP="ROAP"}(im||(im={}));var am=new Uint8Array(16);function sm(){if(!om&&!(om="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return om(am)}const cm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const um=function(e){return"string"==typeof e&&cm.test(e)};for(var lm=[],fm=0;fm<256;++fm)lm.push((fm+256).toString(16).substr(1));const dm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(lm[e[t+0]]+lm[e[t+1]]+lm[e[t+2]]+lm[e[t+3]]+"-"+lm[e[t+4]]+lm[e[t+5]]+"-"+lm[e[t+6]]+lm[e[t+7]]+"-"+lm[e[t+8]]+lm[e[t+9]]+"-"+lm[e[t+10]]+lm[e[t+11]]+lm[e[t+12]]+lm[e[t+13]]+lm[e[t+14]]+lm[e[t+15]]).toLowerCase();if(!um(n))throw TypeError("Stringified UUID is invalid");return n};const pm=function(e,t,n){var r=(e=e||{}).random||(e.rng||sm)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return dm(r)};var hm,vm,mm,gm,ym;!function(e){e.OPERATIONAL="operational",e.BEHAVIORAL="behavioral"}(hm||(hm={})),function(e){e.CALL="web-calling-sdk-callcontrol",e.CALL_ERROR="web-calling-sdk-callcontrol-error",e.MEDIA="web-calling-sdk-media",e.MEDIA_ERROR="web-calling-sdk-media-error",e.REGISTRATION="web-calling-sdk-registration",e.REGISTRATION_ERROR="web-calling-sdk-registration-error"}(vm||(vm={})),function(e){e.REGISTER="register",e.DEREGISTER="deregister",e.KEEPALIVE_FAILURE="keepaliveFailure"}(mm||(mm={})),function(e){e.BLIND_TRANSFER="Blind Transfer",e.CONSULT_TRANSFER="Consult Transfer"}(gm||(gm={}));var bm=function(){function e(t,n){(0,o.Z)(this,e),(0,f.Z)(this,"webex",void 0),(0,f.Z)(this,"deviceInfo",void 0),(0,f.Z)(this,"serviceIndicator",void 0),Ie.info("Initializing metric manager...",{file:B}),this.webex=t,this.serviceIndicator=n}return(0,a.Z)(e,[{key:"setDeviceInfo",value:function(e){this.deviceInfo=e}},{key:"submitRegistrationMetric",value:function(e,t,n,r){var i;switch(e){case vm.REGISTRATION:var o,a,s,c,u,l;i={tags:{action:t,device_id:null===(o=this.deviceInfo)||void 0===o||null===(a=o.device)||void 0===a?void 0:a.deviceId,service_indicator:this.serviceIndicator},fields:{device_url:null===(s=this.deviceInfo)||void 0===s||null===(c=s.device)||void 0===c?void 0:c.clientDeviceUri,mobius_url:null===(u=this.deviceInfo)||void 0===u||null===(l=u.device)||void 0===l?void 0:l.uri,calling_sdk_version:_},type:n};break;case vm.REGISTRATION_ERROR:var f,d,p,h,v,m;if(r)i={tags:{action:t,device_id:null===(f=this.deviceInfo)||void 0===f||null===(d=f.device)||void 0===d?void 0:d.deviceId,service_indicator:this.serviceIndicator},fields:{device_url:null===(p=this.deviceInfo)||void 0===p||null===(h=p.device)||void 0===h?void 0:h.clientDeviceUri,mobius_url:null===(v=this.deviceInfo)||void 0===v||null===(m=v.device)||void 0===m?void 0:m.uri,calling_sdk_version:_,error:r.getError().message,error_type:r.getError().type},type:n};break;default:Ie.warn("Invalid metric name received. Rejecting request to submit metric.",{file:B,method:this.submitRegistrationMetric.name})}i&&this.webex.internal.metrics.submitClientMetrics(e,i)}},{key:"submitCallMetric",value:function(e,t,n,r,i,o){var a;switch(e){case vm.CALL:var s,c,u,l,f,d;a={tags:{action:t,device_id:null===(s=this.deviceInfo)||void 0===s||null===(c=s.device)||void 0===c?void 0:c.deviceId,service_indicator:this.serviceIndicator},fields:{device_url:null===(u=this.deviceInfo)||void 0===u||null===(l=u.device)||void 0===l?void 0:l.clientDeviceUri,mobius_url:null===(f=this.deviceInfo)||void 0===f||null===(d=f.device)||void 0===d?void 0:d.uri,calling_sdk_version:_,call_id:r,correlation_id:i},type:n};break;case vm.CALL_ERROR:var p,h,v,m,g,y;if(o)a={tags:{action:t,device_id:null===(p=this.deviceInfo)||void 0===p||null===(h=p.device)||void 0===h?void 0:h.deviceId,service_indicator:this.serviceIndicator},fields:{device_url:null===(v=this.deviceInfo)||void 0===v||null===(m=v.device)||void 0===m?void 0:m.clientDeviceUri,mobius_url:null===(g=this.deviceInfo)||void 0===g||null===(y=g.device)||void 0===y?void 0:y.uri,calling_sdk_version:_,call_id:r,correlation_id:i,error:o.getCallError().message,error_type:o.getCallError().type},type:n};break;default:Ie.warn("Invalid metric name received. Rejecting request to submit metric.",{file:B,method:this.submitCallMetric.name})}a&&this.webex.internal.metrics.submitClientMetrics(e,a)}},{key:"submitMediaMetric",value:function(e,t,n,r,i,o,a,s){var c;switch(e){case vm.MEDIA:var u,l,f,d,p,h;c={tags:{action:t,device_id:null===(u=this.deviceInfo)||void 0===u||null===(l=u.device)||void 0===l?void 0:l.deviceId,service_indicator:this.serviceIndicator},fields:{device_url:null===(f=this.deviceInfo)||void 0===f||null===(d=f.device)||void 0===d?void 0:d.clientDeviceUri,mobius_url:null===(p=this.deviceInfo)||void 0===p||null===(h=p.device)||void 0===h?void 0:h.uri,calling_sdk_version:_,call_id:r,correlation_id:i,local_media_details:o,remote_media_details:a},type:n};break;case vm.MEDIA_ERROR:var v,m,g,y,b,w;if(s)c={tags:{action:t,device_id:null===(v=this.deviceInfo)||void 0===v||null===(m=v.device)||void 0===m?void 0:m.deviceId,service_indicator:this.serviceIndicator},fields:{device_url:null===(g=this.deviceInfo)||void 0===g||null===(y=g.device)||void 0===y?void 0:y.clientDeviceUri,mobius_url:null===(b=this.deviceInfo)||void 0===b||null===(w=b.device)||void 0===w?void 0:w.uri,calling_sdk_version:_,call_id:r,correlation_id:i,local_media_details:o,remote_media_details:a,error:s.getCallError().message,error_type:s.getCallError().type},type:n};break;default:Ie.warn("Invalid metric name received. Rejecting request to submit metric.",{file:B,method:this.submitMediaMetric.name})}c&&this.webex.internal.metrics.submitClientMetrics(e,c)}}]),e}(),wm=function(e,t){return ym||(ym=new bm(e,t)),ym},_m=function(){return _m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_m.apply(this,arguments)};function Em(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Sm(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rm(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function xm(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var Cm,km=".",Tm={},Im="xstate.guard",Om="",Am=!0;function Lm(e,t,n){void 0===n&&(n=km);var r=Nm(e,n),i=Nm(t,n);return Xm(i)?!!Xm(r)&&i===r:Xm(r)?r in i:Object.keys(r).every((function(e){return e in i&&Lm(r[e],i[e])}))}function Mm(e){try{return Xm(e)||"number"==typeof e?"".concat(e):e.type}catch(e){throw new Error("Events must be strings or objects with a string event.type property.")}}function Pm(e,t){try{return Ym(e)?e:e.toString().split(t)}catch(t){throw new Error("'".concat(e,"' is not a valid state path."))}}function Nm(e,t){return"object"==typeof(n=e)&&"value"in n&&"context"in n&&"event"in n&&"_event"in n?e.value:Ym(e)?Dm(e):"string"!=typeof e?e:Dm(Pm(e,t));var n}function Dm(e){if(1===e.length)return e[0];for(var t={},n=t,r=0;r<e.length-1;r++)r===e.length-2?n[e[r]]=e[r+1]:(n[e[r]]={},n=n[e[r]]);return t}function Um(e,t){for(var n={},r=Object.keys(e),i=0;i<r.length;i++){var o=r[i];n[o]=t(e[o],o,e,i)}return n}function Zm(e,t,n){var r,i,o={};try{for(var a=Sm(Object.keys(e)),s=a.next();!s.done;s=a.next()){var c=s.value,u=e[c];n(u)&&(o[c]=t(u,c,e))}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}var jm=function(e){return function(t){var n,r,i=t;try{for(var o=Sm(e),a=o.next();!a.done;a=o.next()){i=i[a.value]}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}};function Fm(e){return e?Xm(e)?[[e]]:Bm(Object.keys(e).map((function(t){var n=e[t];return"string"==typeof n||n&&Object.keys(n).length?Fm(e[t]).map((function(e){return[t].concat(e)})):[[t]]}))):[[]]}function Bm(e){var t;return(t=[]).concat.apply(t,xm([],Rm(e),!1))}function Vm(e){return Ym(e)?e:[e]}function qm(e){return void 0===e?[]:Vm(e)}function Wm(e,t,n){var r,i;if(Jm(e))return e(t,n.data);var o={};try{for(var a=Sm(Object.keys(e)),s=a.next();!s.done;s=a.next()){var c=s.value,u=e[c];Jm(u)?o[c]=u(t,n.data):o[c]=u}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o}function zm(e){return e instanceof Promise||!(null===e||!Jm(e)&&"object"!=typeof e||!Jm(e.then))}function Gm(e,t){var n,r,i=Rm([[],[]],2),o=i[0],a=i[1];try{for(var s=Sm(e),c=s.next();!c.done;c=s.next()){var u=c.value;t(u)?o.push(u):a.push(u)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return[o,a]}function Hm(e,t){return Um(e.states,(function(e,n){if(e){var r=(Xm(t)?void 0:t[n])||(e?e.current:void 0);if(r)return{current:r,states:Hm(e,r)}}}))}function $m(e,t,n,r){Am||Km(!!e,"Attempting to update undefined context");var i=e?n.reduce((function(e,n){var i,o,a=n.assignment,s={state:r,action:n,_event:t},c={};if(Jm(a))c=a(e,t.data,s);else try{for(var u=Sm(Object.keys(a)),l=u.next();!l.done;l=u.next()){var f=l.value,d=a[f];c[f]=Jm(d)?d(e,t.data,s):d}}catch(e){i={error:e}}finally{try{l&&!l.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return Object.assign({},e,c)}),e):e;return i}var Km=function(){};function Ym(e){return Array.isArray(e)}function Jm(e){return"function"==typeof e}function Xm(e){return"string"==typeof e}function Qm(e,t){if(e)return Xm(e)?{type:Im,name:e,predicate:t?t[e]:void 0}:Jm(e)?{type:Im,name:e.name,predicate:e}:e}Am||(Km=function(e,t){var n=e instanceof Error?e:void 0;if((n||!e)&&void 0!==console){var r=["Warning: ".concat(t)];n&&r.push(n),console.warn.apply(console,r)}});var eg=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();(Cm={})[eg]=function(){return this},Cm[Symbol.observable]=function(){return this};function tg(e){return!!e&&"__xstatenode"in e}var ng,rg;function ig(e,t){return Xm(e)||"number"==typeof e?_m({type:e},t):e}function og(e,t){if(!Xm(e)&&"$$type"in e&&"scxml"===e.$$type)return e;var n=ig(e);return _m({name:n.type,data:n,$$type:"scxml",type:"external"},t)}function ag(e,t){return Vm(t).map((function(t){return void 0===t||"string"==typeof t||tg(t)?{target:t,event:e}:_m(_m({},t),{event:e})}))}function sg(e,t,n,r,i){var o=e.options.guards,a={state:i,cond:t,_event:r};if(t.type===Im)return((null==o?void 0:o[t.name])||t.predicate)(n,r.data,a);var s=null==o?void 0:o[t.type];if(!s)throw new Error("Guard '".concat(t.type,"' is not implemented on machine '").concat(e.id,"'."));return s(n,r.data,a)}function cg(e){return"string"==typeof e?{type:e}:e}function ug(e,t,n){if("object"==typeof e)return e;var r=function(){};return{next:e,error:t||r,complete:n||r}}function lg(e,t){return"".concat(e,":invocation[").concat(t,"]")}!function(e){e.Start="xstate.start",e.Stop="xstate.stop",e.Raise="xstate.raise",e.Send="xstate.send",e.Cancel="xstate.cancel",e.NullEvent="",e.Assign="xstate.assign",e.After="xstate.after",e.DoneState="done.state",e.DoneInvoke="done.invoke",e.Log="xstate.log",e.Init="xstate.init",e.Invoke="xstate.invoke",e.ErrorExecution="error.execution",e.ErrorCommunication="error.communication",e.ErrorPlatform="error.platform",e.ErrorCustom="xstate.error",e.Update="xstate.update",e.Pure="xstate.pure",e.Choose="xstate.choose"}(ng||(ng={})),function(e){e.Parent="#_parent",e.Internal="#_internal"}(rg||(rg={}));var fg=function(e){return"atomic"===e.type||"final"===e.type};function dg(e){return Object.keys(e.states).map((function(t){return e.states[t]}))}function pg(e){var t=[e];return fg(e)?t:t.concat(Bm(dg(e).map(pg)))}function hg(e,t){var n,r,i,o,a,s,c,u,l=mg(new Set(e)),f=new Set(t);try{for(var d=Sm(f),p=d.next();!p.done;p=d.next())for(var h=(S=p.value).parent;h&&!f.has(h);)f.add(h),h=h.parent}catch(e){n={error:e}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}var v=mg(f);try{for(var m=Sm(f),g=m.next();!g.done;g=m.next()){if("compound"!==(S=g.value).type||v.get(S)&&v.get(S).length){if("parallel"===S.type)try{for(var y=(a=void 0,Sm(dg(S))),b=y.next();!b.done;b=y.next()){var w=b.value;"history"!==w.type&&(f.has(w)||(f.add(w),l.get(w)?l.get(w).forEach((function(e){return f.add(e)})):w.initialStateNodes.forEach((function(e){return f.add(e)}))))}}catch(e){a={error:e}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}}else l.get(S)?l.get(S).forEach((function(e){return f.add(e)})):S.initialStateNodes.forEach((function(e){return f.add(e)}))}}catch(e){i={error:e}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}try{for(var _=Sm(f),E=_.next();!E.done;E=_.next()){var S;for(h=(S=E.value).parent;h&&!f.has(h);)f.add(h),h=h.parent}}catch(e){c={error:e}}finally{try{E&&!E.done&&(u=_.return)&&u.call(_)}finally{if(c)throw c.error}}return f}function vg(e,t){var n=t.get(e);if(!n)return{};if("compound"===e.type){var r=n[0];if(!r)return{};if(fg(r))return r.key}var i={};return n.forEach((function(e){i[e.key]=vg(e,t)})),i}function mg(e){var t,n,r=new Map;try{for(var i=Sm(e),o=i.next();!o.done;o=i.next()){var a=o.value;r.has(a)||r.set(a,[]),a.parent&&(r.has(a.parent)||r.set(a.parent,[]),r.get(a.parent).push(a))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function gg(e,t){return vg(e,mg(hg([e],t)))}function yg(e,t){return Array.isArray(e)?e.some((function(e){return e===t})):e instanceof Set&&e.has(t)}function bg(e,t){return"compound"===t.type?dg(t).some((function(t){return"final"===t.type&&yg(e,t)})):"parallel"===t.type&&dg(t).every((function(t){return bg(e,t)}))}function wg(e){return new Set(Bm(e.map((function(e){return e.tags}))))}var _g=ng.Start,Eg=ng.Stop,Sg=ng.Raise,Rg=ng.Send,xg=ng.Cancel,Cg=ng.NullEvent,kg=ng.Assign,Tg=(ng.After,ng.DoneState,ng.Log),Ig=ng.Init,Og=ng.Invoke,Ag=(ng.ErrorExecution,ng.ErrorPlatform),Lg=ng.ErrorCustom,Mg=ng.Update,Pg=ng.Choose,Ng=ng.Pure,Dg=og({type:Ig});function Ug(e,t){return t&&t[e]||void 0}function Zg(e,t){var n;if(Xm(e)||"number"==typeof e)n=Jm(r=Ug(e,t))?{type:e,exec:r}:r||{type:e,exec:void 0};else if(Jm(e))n={type:e.name||e.toString(),exec:e};else{var r;if(Jm(r=Ug(e.type,t)))n=_m(_m({},e),{exec:r});else if(r){var i=r.type||e.type;n=_m(_m(_m({},r),e),{type:i})}else n=e}return n}var jg=function(e,t){return e?(Ym(e)?e:[e]).map((function(e){return Zg(e,t)})):[]};function Fg(e){var t=Zg(e);return _m(_m({id:Xm(e)?e:t.id},t),{type:t.type})}function Bg(e){return Xm(e)?{type:Sg,event:e}:Vg(e,{to:rg.Internal})}function Vg(e,t){return{to:t?t.to:void 0,type:Rg,event:Jm(e)?e:ig(e),delay:t?t.delay:void 0,id:t&&void 0!==t.id?t.id:Jm(e)?e.name:Mm(e)}}var qg=function(e,t,n){return _m(_m({},e),{value:Xm(e.expr)?e.expr:e.expr(t,n.data,{_event:n})})};function Wg(e,t){var n="".concat(ng.DoneState,".").concat(e),r={type:n,data:t,toString:function(){return n}};return r}function zg(e,t){var n="".concat(ng.DoneInvoke,".").concat(e),r={type:n,data:t,toString:function(){return n}};return r}function Gg(e,t){var n="".concat(ng.ErrorPlatform,".").concat(e),r={type:n,data:t,toString:function(){return n}};return r}function Hg(e,t,n,r,i,o){void 0===o&&(o=!1);var a=Rm(o?[[],i]:Gm(i,(function(e){return e.type===kg})),2),s=a[0],c=a[1],u=s.length?$m(n,r,s,t):n,l=o?[n]:void 0,f=Bm(c.map((function(n){var i;switch(n.type){case Sg:return{type:Sg,_event:og(n.event)};case Rg:var a=function(e,t,n,r){var i,o={_event:n},a=og(Jm(e.event)?e.event(t,n.data,o):e.event);if(Xm(e.delay)){var s=r&&r[e.delay];i=Jm(s)?s(t,n.data,o):s}else i=Jm(e.delay)?e.delay(t,n.data,o):e.delay;var c=Jm(e.to)?e.to(t,n.data,o):e.to;return _m(_m({},e),{to:c,_event:a,event:a.data,delay:i})}(n,u,r,e.options.delays);return Am||Km(!Xm(n.delay)||"number"==typeof a.delay,"No delay reference for delay expression '".concat(n.delay,"' was found on machine '").concat(e.id,"'")),a;case Tg:return qg(n,u,r);case Pg:if(!(d=null===(i=n.conds.find((function(n){var i=Qm(n.cond,e.options.guards);return!i||sg(e,i,u,r,t)})))||void 0===i?void 0:i.actions))return[];var s=Rm(Hg(e,t,u,r,jg(qm(d),e.options.actions),o),2),c=s[0],f=s[1];return u=f,null==l||l.push(u),c;case Ng:var d;if(!(d=n.get(u,r.data)))return[];var p=Rm(Hg(e,t,u,r,jg(qm(d),e.options.actions),o),2),h=p[0],v=p[1];return u=v,null==l||l.push(u),h;case Eg:return function(e,t,n){var r=Jm(e.activity)?e.activity(t,n.data):e.activity,i="string"==typeof r?{id:r}:r;return{type:ng.Stop,activity:i}}(n,u,r);case kg:u=$m(u,r,[n],t),null==l||l.push(u);break;default:var m=Zg(n,e.options.actions),g=m.exec;if(g&&l){var y=l.length-1;m=_m(_m({},m),{exec:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.apply(void 0,xm([l[y]],Rm(t),!1))}})}return m}})).filter((function(e){return!!e})));return[f,u]}function $g(e,t){if(e===t)return!0;if(void 0===e||void 0===t)return!1;if(Xm(e)||Xm(t))return e===t;var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&n.every((function(n){return $g(e[n],t[n])}))}function Kg(e){return"object"==typeof e&&null!==e&&("value"in e&&"_event"in e)}var Yg=function(){function e(e){var t,n,r=this;this.actions=[],this.activities=Tm,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||Tm,this.meta=(void 0===(n=e.configuration)&&(n=[]),n.reduce((function(e,t){return void 0!==t.meta&&(e[t.id]=t.meta),e}),{})),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=null!==(t=Array.isArray(e.tags)?new Set(e.tags):e.tags)&&void 0!==t?t:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return function(e){return xm([],Rm(new Set(Bm(xm([],Rm(e.map((function(e){return e.ownEvents}))),!1)))),!1)}(r.configuration)}})}return e.from=function(t,n){return t instanceof e?t.context!==n?new e({value:t.value,context:n,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t:new e({value:t,context:n,_event:Dg,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,n){if(t instanceof e){if(!t.actions.length)return t;var r=Dg;return new e({value:t.value,context:n,_event:r,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return e.from(t,n)},e.prototype.toStrings=function(e,t){var n=this;if(void 0===e&&(e=this.value),void 0===t&&(t="."),Xm(e))return[e];var r=Object.keys(e);return r.concat.apply(r,xm([],Rm(r.map((function(r){return n.toStrings(e[r],t).map((function(e){return r+t+e}))}))),!1))},e.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var t=e.tags;e.machine;var n=Em(e,["configuration","transitions","tags","machine"]);return _m(_m({},n),{tags:Array.from(t)})},e.prototype.matches=function(e){return Lm(e,this.value)},e.prototype.hasTag=function(e){return this.tags.has(e)},e.prototype.can=function(e){var t;Am&&Km(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var n=null===(t=this.machine)||void 0===t?void 0:t.getTransitionData(this,e);return!!(null==n?void 0:n.transitions.length)&&n.transitions.some((function(e){return void 0!==e.target||e.actions.length}))},e}(),Jg=[],Xg=function(e,t){Jg.push(e);var n=t(e);return Jg.pop(),n};function Qg(e){var t;return(t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:e}}})[eg]=function(){return this},t}function ey(e,t,n,r){var i,o=cg(e.src),a=null===(i=null==t?void 0:t.options.services)||void 0===i?void 0:i[o.type],s=e.data?Wm(e.data,n,r):void 0,c=a?function(e,t,n){var r=Qg(t);if(r.deferred=!0,tg(e)){var i=r.state=Xg(void 0,(function(){return(n?e.withContext(n):e).initialState}));r.getSnapshot=function(){return i}}return r}(a,e.id,s):Qg(e.id);return c.meta=e,c}function ty(e){if("string"==typeof e){var t={type:e,toString:function(){return e}};return t}return e}function ny(e){return _m(_m({type:Og},e),{toJSON:function(){e.onDone,e.onError;var t=Em(e,["onDone","onError"]);return _m(_m({},t),{type:Og,src:ty(e.src)})}})}var ry="",iy="*",oy={},ay=function(e){return"#"===e[0]},sy=function(){function e(t,n,r,i){var o,a=this;void 0===r&&(r="context"in t?t.context:void 0),this.config=t,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign({actions:{},guards:{},services:{},activities:{},delays:{}},n),this.parent=null==i?void 0:i.parent,this.key=this.config.key||(null==i?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:km),this.id=this.config.id||xm([this.machine.key],Rm(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(o=this.config.schema)&&void 0!==o?o:{},this.description=this.config.description,Am||Km(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?Um(this.config.states,(function(t,n){var r,i=new e(t,{},void 0,{parent:a,key:n});return Object.assign(a.idMap,_m(((r={})[i.id]=i,r),i.idMap)),i})):oy;var s=0;!function e(t){var n,r;t.order=s++;try{for(var i=Sm(dg(t)),o=i.next();!o.done;o=i.next()){e(o.value)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some((function(e){return e.event===ry})):ry in this.config.on),this.strict=!!this.config.strict,this.onEntry=qm(this.config.entry||this.config.onEntry).map((function(e){return Zg(e)})),this.onExit=qm(this.config.exit||this.config.onExit).map((function(e){return Zg(e)})),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=qm(this.config.invoke).map((function(e,t){var n,r;if(tg(e)){var i=lg(a.id,t);return a.machine.options.services=_m(((n={})[i]=e,n),a.machine.options.services),ny({src:i,id:i})}if(Xm(e.src)){i=e.id||lg(a.id,t);return ny(_m(_m({},e),{id:i,src:e.src}))}if(tg(e.src)||Jm(e.src)){i=e.id||lg(a.id,t);return a.machine.options.services=_m(((r={})[i]=e.src,r),a.machine.options.services),ny(_m(_m({id:i},e),{src:i}))}var o=e.src;return ny(_m(_m({id:lg(a.id,t)},e),{src:o}))})),this.activities=qm(this.config.activities).concat(this.invoke).map((function(e){return Fg(e)})),this.transition=this.transition.bind(this),this.tags=qm(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||pg(this).forEach((function(e){return e.on}))},e.prototype.withConfig=function(t,n){var r=this.options,i=r.actions,o=r.activities,a=r.guards,s=r.services,c=r.delays;return new e(this.config,{actions:_m(_m({},i),t.actions),activities:_m(_m({},o),t.activities),guards:_m(_m({},a),t.guards),services:_m(_m({},s),t.services),delays:_m(_m({},c),t.delays)},null!=n?n:this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},Object.defineProperty(e.prototype,"context",{get:function(){return Jm(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:Um(this.states,(function(e){return e.definition})),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce((function(e,t){return e[t.eventType]=e[t.eventType]||[],e[t.eventType].push(t),e}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var t=e===ry,n=this.transitions.filter((function(n){var r=n.eventType===e;return t?r:r||n.eventType===iy}));return this.__cache.candidates[e]=n,n},e.prototype.getDelayedTransitions=function(){var e=this,t=this.config.after;if(!t)return[];var n=function(t,n){var r=function(e,t){var n=t?"#".concat(t):"";return"".concat(ng.After,"(").concat(e,")").concat(n)}(Jm(t)?"".concat(e.id,":delay[").concat(n,"]"):t,e.id);return e.onEntry.push(Vg(r,{delay:t})),e.onExit.push({type:xg,sendId:r}),r},r=Ym(t)?t.map((function(e,t){var r=n(e.delay,t);return _m(_m({},e),{event:r})})):Bm(Object.keys(t).map((function(e,r){var i=t[e],o=Xm(i)?{target:i}:i,a=isNaN(+e)?e:+e,s=n(a,r);return qm(o).map((function(e){return _m(_m({},e),{event:s,delay:a})}))})));return r.map((function(t){var n=t.delay;return _m(_m({},e.formatTransition(t)),{delay:n})}))},e.prototype.getStateNodes=function(e){var t,n=this;if(!e)return[];var r=e instanceof Yg?e.value:Nm(e,this.delimiter);if(Xm(r)){var i=this.getStateNode(r).initial;return void 0!==i?this.getStateNodes(((t={})[r]=i,t)):[this,this.states[r]]}var o=Object.keys(r),a=[this];return a.push.apply(a,xm([],Rm(Bm(o.map((function(e){return n.getStateNode(e).getStateNodes(r[e])})))),!1)),a},e.prototype.handles=function(e){var t=Mm(e);return this.events.includes(t)},e.prototype.resolveState=function(e){var t=e instanceof Yg?e:Yg.create(e),n=Array.from(hg([],this.getStateNodes(t.value)));return new Yg(_m(_m({},t),{value:this.resolve(t.value),configuration:n,done:bg(n,this),tags:wg(n),machine:this.machine}))},e.prototype.transitionLeafNode=function(e,t,n){var r=this.getStateNode(e).next(t,n);return r&&r.transitions.length?r:this.next(t,n)},e.prototype.transitionCompoundNode=function(e,t,n){var r=Object.keys(e),i=this.getStateNode(r[0])._transition(e[r[0]],t,n);return i&&i.transitions.length?i:this.next(t,n)},e.prototype.transitionParallelNode=function(e,t,n){var r,i,o={};try{for(var a=Sm(Object.keys(e)),s=a.next();!s.done;s=a.next()){var c=s.value,u=e[c];if(u){var l=this.getStateNode(c)._transition(u,t,n);l&&(o[c]=l)}}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}var f=Object.keys(o).map((function(e){return o[e]})),d=Bm(f.map((function(e){return e.transitions})));if(!f.some((function(e){return e.transitions.length>0})))return this.next(t,n);var p=Bm(f.map((function(e){return e.entrySet}))),h=Bm(Object.keys(o).map((function(e){return o[e].configuration})));return{transitions:d,entrySet:p,exitSet:Bm(f.map((function(e){return e.exitSet}))),configuration:h,source:t,actions:Bm(Object.keys(o).map((function(e){return o[e].actions})))}},e.prototype._transition=function(e,t,n){return Xm(e)?this.transitionLeafNode(e,t,n):1===Object.keys(e).length?this.transitionCompoundNode(e,t,n):this.transitionParallelNode(e,t,n)},e.prototype.getTransitionData=function(e,t){return this._transition(e.value,e,og(t))},e.prototype.next=function(e,t){var n,r,i,o=this,a=t.name,s=[],c=[];try{for(var u=Sm(this.getCandidates(a)),l=u.next();!l.done;l=u.next()){var f=l.value,d=f.cond,p=f.in,h=e.context,v=!p||(Xm(p)&&ay(p)?e.matches(Nm(this.getStateNodeById(p).path,this.delimiter)):Lm(Nm(p,this.delimiter),jm(this.path.slice(0,-2))(e.value))),m=!1;try{m=!d||sg(this.machine,d,h,t,e)}catch(e){throw new Error("Unable to evaluate guard '".concat(d.name||d.type,"' in transition for event '").concat(a,"' in state node '").concat(this.id,"':\n").concat(e.message))}if(m&&v){void 0!==f.target&&(c=f.target),s.push.apply(s,xm([],Rm(f.actions),!1)),i=f;break}}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}if(i){if(!c.length)return{transitions:[i],entrySet:[],exitSet:[],configuration:e.value?[this]:[],source:e,actions:s};var g=Bm(c.map((function(t){return o.getRelativeStateNodes(t,e.historyValue)}))),y=!!i.internal;return{transitions:[i],entrySet:y?[]:Bm(g.map((function(e){return o.nodesFromChild(e)}))),exitSet:y?[]:[this],configuration:g,source:e,actions:s}}},e.prototype.nodesFromChild=function(e){if(e.escapes(this))return[];for(var t=[],n=e;n&&n!==this;)t.push(n),n=n.parent;return t.push(this),t},e.prototype.escapes=function(e){if(this===e)return!1;for(var t=this.parent;t;){if(t===e)return!1;t=t.parent}return!0},e.prototype.getActions=function(e,t,n,r){var i,o,a,s,c=hg([],r?this.getStateNodes(r.value):[this]),u=e.configuration.length?hg(c,e.configuration):c;try{for(var l=Sm(u),f=l.next();!f.done;f=l.next()){yg(c,h=f.value)||e.entrySet.push(h)}}catch(e){i={error:e}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}try{for(var d=Sm(c),p=d.next();!p.done;p=d.next()){var h;yg(u,h=p.value)&&!yg(e.exitSet,h.parent)||e.exitSet.push(h)}}catch(e){a={error:e}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}var v=Bm(e.entrySet.map((function(r){var i=[];if("final"!==r.type)return i;var o=r.parent;if(!o.parent)return i;i.push(Wg(r.id,r.doneData),Wg(o.id,r.doneData?Wm(r.doneData,t,n):void 0));var a=o.parent;return"parallel"===a.type&&dg(a).every((function(t){return bg(e.configuration,t)}))&&i.push(Wg(a.id)),i})));e.exitSet.sort((function(e,t){return t.order-e.order})),e.entrySet.sort((function(e,t){return e.order-t.order}));var m=new Set(e.entrySet),g=new Set(e.exitSet),y=Rm([Bm(Array.from(m).map((function(e){return xm(xm([],Rm(e.activities.map((function(e){return function(e){var t=Fg(e);return{type:ng.Start,activity:t,exec:void 0}}(e)}))),!1),Rm(e.onEntry),!1)}))).concat(v.map(Bg)),Bm(Array.from(g).map((function(e){return xm(xm([],Rm(e.onExit),!1),Rm(e.activities.map((function(e){return function(e){var t=Jm(e)?e:Fg(e);return{type:ng.Stop,activity:t,exec:void 0}}(e)}))),!1)})))],2),b=y[0],w=y[1];return jg(w.concat(e.actions).concat(b),this.machine.options.actions)},e.prototype.transition=function(e,t,n){void 0===e&&(e=this.initialState);var r,i,o=og(t);if(e instanceof Yg)r=void 0===n?e:this.resolveState(Yg.from(e,n));else{var a=Xm(e)?this.resolve(Dm(this.getResolvedPath(e))):this.resolve(e),s=null!=n?n:this.machine.context;r=this.resolveState(Yg.from(a,s))}if(!Am&&o.name===iy)throw new Error("An event cannot have the wildcard type ('".concat(iy,"')"));if(this.strict&&!this.events.includes(o.name)&&(i=o.name,!/^(done|error)\./.test(i)))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var c=this._transition(r.value,r,o)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:r,actions:[]},u=hg([],this.getStateNodes(r.value)),l=c.configuration.length?hg(u,c.configuration):u;return c.configuration=xm([],Rm(l),!1),this.resolveTransition(c,r,r.context,o)},e.prototype.resolveRaisedTransition=function(e,t,n){var r,i=e.actions;return(e=this.transition(e,t))._event=n,e.event=n.data,(r=e.actions).unshift.apply(r,xm([],Rm(i),!1)),e},e.prototype.resolveTransition=function(e,t,n,r){var i,o,a=this;void 0===r&&(r=Dg);var s=e.configuration,c=!t||e.transitions.length>0,u=c?gg(this.machine,s):void 0,l=t?t.historyValue?t.historyValue:e.source?this.machine.historyValue(t.value):void 0:void 0,f=this.getActions(e,n,r,t),d=t?_m({},t.activities):{};try{for(var p=Sm(f),h=p.next();!h.done;h=p.next()){var v=h.value;v.type===_g?d[v.activity.id||v.activity.type]=v:v.type===Eg&&(d[v.activity.id||v.activity.type]=!1)}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}var m,g,y=Rm(Hg(this,t,n,r,f,this.machine.config.preserveActionOrder),2),b=y[0],w=y[1],_=Rm(Gm(b,(function(e){return e.type===Sg||e.type===Rg&&e.to===rg.Internal})),2),E=_[0],S=_[1],R=b.filter((function(e){var t;return e.type===_g&&(null===(t=e.activity)||void 0===t?void 0:t.type)===Og})),x=R.reduce((function(e,t){return e[t.activity.id]=ey(t.activity,a.machine,w,r),e}),t?_m({},t.children):{}),C=c?e.configuration:t?t.configuration:[],k=bg(C,this),T=new Yg({value:u||t.value,context:w,_event:r,_sessionid:t?t._sessionid:null,historyValue:u?l?(m=l,g=u,{current:g,states:Hm(m,g)}):void 0:t?t.historyValue:void 0,history:!u||e.source?t:void 0,actions:u?S:[],activities:u?d:t?t.activities:{},events:[],configuration:C,transitions:e.transitions,children:x,done:k,tags:null==t?void 0:t.tags,machine:this}),I=n!==w;T.changed=r.name===Mg||I;var O=T.history;O&&delete O.history;var A=!k&&(this._transient||s.some((function(e){return e._transient})));if(!(c||A&&r.name!==ry))return T;var L=T;if(!k)for(A&&(L=this.resolveRaisedTransition(L,{type:Cg},r));E.length;){var M=E.shift();L=this.resolveRaisedTransition(L,M._event,r)}var P=L.changed||(O?!!L.actions.length||I||typeof O.value!=typeof L.value||!$g(L.value,O.value):void 0);return L.changed=P,L.history=O,L.tags=wg(L.configuration),L},e.prototype.getStateNode=function(e){if(ay(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var t=this.states[e];if(!t)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return t},e.prototype.getStateNodeById=function(e){var t=ay(e)?e.slice("#".length):e;if(t===this.id)return this;var n=this.machine.idMap[t];if(!n)throw new Error("Child state node '#".concat(t,"' does not exist on machine '").concat(this.id,"'"));return n},e.prototype.getStateNodeByPath=function(e){if("string"==typeof e&&ay(e))try{return this.getStateNodeById(e.slice(1))}catch(e){}for(var t=Pm(e,this.delimiter).slice(),n=this;t.length;){var r=t.shift();if(!r.length)break;n=n.getStateNode(r)}return n},e.prototype.resolve=function(e){var t,n=this;if(!e)return this.initialStateValue||oy;switch(this.type){case"parallel":return Um(this.initialStateValue,(function(t,r){return t?n.getStateNode(r).resolve(e[r]||t):oy}));case"compound":if(Xm(e)){var r=this.getStateNode(e);return"parallel"===r.type||"compound"===r.type?((t={})[e]=r.initialStateValue,t):e}return Object.keys(e).length?Um(e,(function(e,t){return e?n.getStateNode(t).resolve(e):oy})):this.initialStateValue||{};default:return e||oy}},e.prototype.getResolvedPath=function(e){if(ay(e)){var t=this.machine.idMap[e.slice("#".length)];if(!t)throw new Error("Unable to find state node '".concat(e,"'"));return t.path}return Pm(e,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var e,t;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)t=Zm(this.states,(function(e){return e.initialStateValue||oy}),(function(e){return!("history"===e.type)}));else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));t=fg(this.states[this.initial])?this.initial:((e={})[this.initial]=this.states[this.initial].initialStateValue,e)}else t={};return this.__cache.initialStateValue=t,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(e,t){this._init();var n=this.getStateNodes(e);return this.resolveTransition({configuration:n,entrySet:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,null!=t?t:this.machine.context,void 0)},Object.defineProperty(e.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var e;if("history"===this.type){var t=this.config;e=Xm(t.target)&&ay(t.target)?Dm(this.machine.getStateNodeById(t.target).path.slice(this.path.length-1)):t.target}return e},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(e,t,n){return void 0===n&&(n=!0),n?"history"===e.type?e.resolveHistory(t):e.initialStateNodes:[e]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var e=this;return fg(this)?[this]:"compound"!==this.type||this.initial?Bm(Fm(this.initialStateValue).map((function(t){return e.getFromRelativePath(t)}))):(Am||Km(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this])},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var t=Rm(e),n=t[0],r=t.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var i=this.getStateNode(n);if("history"===i.type)return i.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(r)},e.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:Zm(this.states,(function(t,n){if(!e)return t.historyValue();var r=Xm(e)?void 0:e[n];return t.historyValue(r||t.initialStateValue)}),(function(e){return!e.history}))}},e.prototype.resolveHistory=function(e){var t=this;if("history"!==this.type)return[this];var n=this.parent;if(!e){var r=this.target;return r?Bm(Fm(r).map((function(e){return n.getFromRelativePath(e)}))):n.initialStateNodes}var i,o,a=(i=n.path,o="states",function(e){var t,n,r=e;try{for(var a=Sm(i),s=a.next();!s.done;s=a.next()){var c=s.value;r=r[o][c]}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r})(e).current;return Xm(a)?[n.getStateNode(a)]:Bm(Fm(a).map((function(e){return"deep"===t.history?n.getFromRelativePath(e):[n.states[e[0]]]})))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var e=this,t=Bm(Object.keys(this.states).map((function(t){return e.states[t].stateIds})));return[this.id].concat(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){var e,t,n,r;if(this.__cache.events)return this.__cache.events;var i=this.states,o=new Set(this.ownEvents);if(i)try{for(var a=Sm(Object.keys(i)),s=a.next();!s.done;s=a.next()){var c=i[s.value];if(c.states)try{for(var u=(n=void 0,Sm(c.events)),l=u.next();!l.done;l=u.next()){var f=l.value;o.add("".concat(f))}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter((function(e){return!(!e.target&&!e.actions.length&&e.internal)})).map((function(e){return e.eventType})));return Array.from(e)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(e){var t=this;if(void 0!==e)return e.map((function(e){if(!Xm(e))return e;var n=e[0]===t.delimiter;if(n&&!t.parent)return t.getStateNodeByPath(e.slice(1));var r=n?t.key+e:e;if(!t.parent)return t.getStateNodeByPath(r);try{return t.parent.getStateNodeByPath(r)}catch(e){throw new Error("Invalid transition definition for state node '".concat(t.id,"':\n").concat(e.message))}}))},e.prototype.formatTransition=function(e){var t=this,n=function(e){if(void 0!==e&&e!==Om)return qm(e)}(e.target),r="internal"in e?e.internal:!n||n.some((function(e){return Xm(e)&&e[0]===t.delimiter})),i=this.machine.options.guards,o=this.resolveTarget(n),a=_m(_m({},e),{actions:jg(qm(e.actions)),cond:Qm(e.cond,i),target:o,source:this,internal:r,eventType:e.event,toJSON:function(){return _m(_m({},a),{target:a.target?a.target.map((function(e){return"#".concat(e.id)})):void 0,source:"#".concat(t.id)})}});return a},e.prototype.formatTransitions=function(){var e,t,n,r=this;if(this.config.on)if(Array.isArray(this.config.on))n=this.config.on;else{var i=this.config.on,o=iy,a=i[o],s=void 0===a?[]:a,c=Em(i,["*"]);n=Bm(Object.keys(c).map((function(e){Am||e!==ry||Km(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(r.id,'".'));var t=ag(e,c[e]);return Am||function(e,t,n){var r=n.slice(0,-1).some((function(e){return!("cond"in e)&&!("in"in e)&&(Xm(e.target)||tg(e.target))})),i=t===ry?"the transient event":"event '".concat(t,"'");Km(!r,"One or more transitions for ".concat(i," on state '").concat(e.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")}(r,e,t),t})).concat(ag(iy,s)))}else n=[];var u=this.config.always?ag("",this.config.always):[],l=this.config.onDone?ag(String(Wg(this.id)),this.config.onDone):[];Am||Km(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var f=Bm(this.invoke.map((function(e){var t=[];return e.onDone&&t.push.apply(t,xm([],Rm(ag(String(zg(e.id)),e.onDone)),!1)),e.onError&&t.push.apply(t,xm([],Rm(ag(String(Gg(e.id)),e.onError)),!1)),t}))),d=this.after,p=Bm(xm(xm(xm(xm([],Rm(l),!1),Rm(f),!1),Rm(n),!1),Rm(u),!1).map((function(e){return qm(e).map((function(e){return r.formatTransition(e)}))})));try{for(var h=Sm(d),v=h.next();!v.done;v=h.next()){var m=v.value;p.push(m)}}catch(t){e={error:t}}finally{try{v&&!v.done&&(t=h.return)&&t.call(h)}finally{if(e)throw e.error}}return p},e}();function cy(e,t){return new sy(e,t)}var uy={deferEvents:!1},ly=function(){function e(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=_m(_m({},uy),e)}return e.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents)return void this.schedule(e);this.process(e)}this.flushEvents()},e.prototype.schedule=function(e){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()}else this.queue.push(e)},e.prototype.clear=function(){this.queue=[]},e.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},e.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(e){throw this.clear(),e}finally{this.processingEvent=!1}},e}(),fy=new Map,dy=0,py=function(){return"x:".concat(dy++)},hy=function(e,t){return fy.set(e,t),e},vy=function(e){return fy.get(e)},my=function(e){fy.delete(e)};function gy(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:void(Am||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues"))}function yy(e){if(gy()){var t=function(){var e=gy();if(e&&"__xstate__"in e)return e.__xstate__}();t&&t.register(e)}}function by(e,t){void 0===t&&(t={});var n=e.initialState,r=new Set,i=[],o=!1,a=function(e){var t;return _m(((t={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}})[eg]=function(){return this},t),e)}({id:t.id,send:function(t){i.push(t),function(){if(!o){for(o=!0;i.length>0;){var t=i.shift();n=e.transition(n,t,s),r.forEach((function(e){return e.next(n)}))}o=!1}}()},getSnapshot:function(){return n},subscribe:function(e,t,i){var o=ug(e,t,i);return r.add(o),o.next(n),{unsubscribe:function(){r.delete(o)}}}}),s={parent:t.parent,self:a,id:t.id||"anonymous",observers:r};return n=e.start?e.start(s):n,a}var wy,_y={sync:!1,autoForward:!1};!function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(wy||(wy={}));var Ey,Sy,Ry,xy,Cy,ky,Ty,Iy,Oy=function(){function e(t,n){var r=this;void 0===n&&(n=e.defaultOptions),this.machine=t,this.scheduler=new ly,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=wy.NotStarted,this.children=new Map,this.forwardTo=new Set,this.init=this.start,this.send=function(e,t){if(Ym(e))return r.batch(e),r.state;var n=og(ig(e,t));if(r.status===wy.Stopped)return Am||Km(!1,'Event "'.concat(n.name,'" was sent to stopped service "').concat(r.machine.id,'". This service has already reached its final state, and will not transition.\nEvent: ').concat(JSON.stringify(n.data))),r.state;if(r.status!==wy.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(n.name,'" was sent to uninitialized service "').concat(r.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: ').concat(JSON.stringify(n.data)));return r.scheduler.schedule((function(){r.forward(n);var e=r.nextState(n);r.update(e,n)})),r._state},this.sendTo=function(e,t){var n,i=r.parent&&(t===rg.Parent||r.parent.id===t),o=i?r.parent:Xm(t)?r.children.get(t)||vy(t):(n=t)&&"function"==typeof n.send?t:void 0;if(o)"machine"in o?o.send(_m(_m({},e),{name:e.name===Lg?"".concat(Gg(r.id)):e.name,origin:r.sessionId})):o.send(e.data);else{if(!i)throw new Error("Unable to send event to child '".concat(t,"' from service '").concat(r.id,"'."));Am||Km(!1,"Service '".concat(r.id,"' has no parent: unable to send event ").concat(e.type))}};var i=_m(_m({},e.defaultOptions),n),o=i.clock,a=i.logger,s=i.parent,c=i.id,u=void 0!==c?c:t.id;this.id=u,this.logger=a,this.clock=o,this.parent=s,this.options=i,this.scheduler=new ly({deferEvents:this.options.deferEvents}),this.sessionId=py()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:Xg(this,(function(){return e._initialState=e.machine.initialState,e._initialState}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return Am||Km(this.status!==wy.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first.")),this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(e,t){var n,r;try{for(var i=Sm(e.actions),o=i.next();!o.done;o=i.next()){var a=o.value;this.exec(a,e,t)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.update=function(e,t){var n,r,i,o,a,s,c,u,l=this;if(e._sessionid=this.sessionId,this._state=e,this.options.execute&&this.execute(this.state),this.children.forEach((function(e){l.state.children[e.id]=e})),this.devTools&&this.devTools.send(t.data,e),e.event)try{for(var f=Sm(this.eventListeners),d=f.next();!d.done;d=f.next()){(0,d.value)(e.event)}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}try{for(var p=Sm(this.listeners),h=p.next();!h.done;h=p.next()){(0,h.value)(e,e.event)}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}try{for(var v=Sm(this.contextListeners),m=v.next();!m.done;m=v.next()){(0,m.value)(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(e){a={error:e}}finally{try{m&&!m.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}var g=bg(e.configuration||[],this.machine);if(this.state.configuration&&g){var y=e.configuration.find((function(e){return"final"===e.type&&e.parent===l.machine})),b=y&&y.doneData?Wm(y.doneData,e.context,t):void 0;try{for(var w=Sm(this.doneListeners),_=w.next();!_.done;_=w.next()){(0,_.value)(zg(this.id,b))}}catch(e){c={error:e}}finally{try{_&&!_.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}this.stop()}},e.prototype.onTransition=function(e){return this.listeners.add(e),this.status===wy.Running&&e(this.state,this.state.event),this},e.prototype.subscribe=function(e,t,n){var r,i=this;if(!e)return{unsubscribe:function(){}};var o=n;return"function"==typeof e?r=e:(r=e.next.bind(e),o=e.complete.bind(e)),this.listeners.add(r),this.status===wy.Running&&r(this.state),o&&this.onDone(o),{unsubscribe:function(){r&&i.listeners.delete(r),o&&i.doneListeners.delete(o)}}},e.prototype.onEvent=function(e){return this.eventListeners.add(e),this},e.prototype.onSend=function(e){return this.sendListeners.add(e),this},e.prototype.onChange=function(e){return this.contextListeners.add(e),this},e.prototype.onStop=function(e){return this.stopListeners.add(e),this},e.prototype.onDone=function(e){return this.doneListeners.add(e),this},e.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},e.prototype.start=function(e){var t=this;if(this.status===wy.Running)return this;this.machine._init(),hy(this.sessionId,this),this.initialized=!0,this.status=wy.Running;var n=void 0===e?this.initialState:Xg(this,(function(){return Kg(e)?t.machine.resolveState(e):t.machine.resolveState(Yg.from(e,t.machine.context))}));return this.options.devTools&&this.attachDev(),this.scheduler.initialize((function(){t.update(n,Dg)})),this},e.prototype.stop=function(){var e,t,n,r,i,o,a,s,c,u,l=this;try{for(var f=Sm(this.listeners),d=f.next();!d.done;d=f.next()){var p=d.value;this.listeners.delete(p)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=f.return)&&t.call(f)}finally{if(e)throw e.error}}try{for(var h=Sm(this.stopListeners),v=h.next();!v.done;v=h.next()){(p=v.value)(),this.stopListeners.delete(p)}}catch(e){n={error:e}}finally{try{v&&!v.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}try{for(var m=Sm(this.contextListeners),g=m.next();!g.done;g=m.next()){p=g.value;this.contextListeners.delete(p)}}catch(e){i={error:e}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}try{for(var y=Sm(this.doneListeners),b=y.next();!b.done;b=y.next()){p=b.value;this.doneListeners.delete(p)}}catch(e){a={error:e}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}if(!this.initialized)return this;xm([],Rm(this.state.configuration),!1).sort((function(e,t){return t.order-e.order})).forEach((function(e){var t,n;try{for(var r=Sm(e.definition.exit),i=r.next();!i.done;i=r.next()){var o=i.value;l.exec(o,l.state)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}})),this.children.forEach((function(e){Jm(e.stop)&&e.stop()}));try{for(var w=Sm(Object.keys(this.delayedEventsMap)),_=w.next();!_.done;_=w.next()){var E=_.value;this.clock.clearTimeout(this.delayedEventsMap[E])}}catch(e){c={error:e}}finally{try{_&&!_.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}return this.scheduler.clear(),this.initialized=!1,this.status=wy.Stopped,my(this.sessionId),this},e.prototype.batch=function(e){var t=this;if(this.status===wy.NotStarted&&this.options.deferEvents)Am||Km(!1,"".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'" and are deferred. Make sure .start() is called for this service.\nEvent: ').concat(JSON.stringify(event)));else if(this.status!==wy.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));this.scheduler.schedule((function(){var n,r,i=t.state,o=!1,a=[],s=function(e){var n=og(e);t.forward(n),i=Xg(t,(function(){return t.machine.transition(i,n)})),a.push.apply(a,xm([],Rm(i.actions.map((function(e){return n=i,r=(t=e).exec,_m(_m({},t),{exec:void 0!==r?function(){return r(n.context,n.event,{action:t,state:n,_event:n._event})}:void 0});var t,n,r}))),!1)),o=o||!!i.changed};try{for(var c=Sm(e),u=c.next();!u.done;u=c.next()){s(u.value)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}i.changed=o,i.actions=a,t.update(i,og(e[e.length-1]))}))},e.prototype.sender=function(e){return this.send.bind(this,e)},e.prototype.nextState=function(e){var t=this,n=og(e);if(0===n.name.indexOf(Ag)&&!this.state.nextEvents.some((function(e){return 0===e.indexOf(Ag)})))throw n.data.data;return Xg(this,(function(){return t.machine.transition(t.state,n)}))},e.prototype.forward=function(e){var t,n;try{for(var r=Sm(this.forwardTo),i=r.next();!i.done;i=r.next()){var o=i.value,a=this.children.get(o);if(!a)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));a.send(e)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.defer=function(e){var t=this;this.delayedEventsMap[e.id]=this.clock.setTimeout((function(){e.to?t.sendTo(e._event,e.to):t.send(e._event)}),e.delay)},e.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},e.prototype.exec=function(e,t,n){void 0===n&&(n=this.machine.options.actions);var r=t.context,i=t._event,o=e.exec||Ug(e.type,n),a=Jm(o)?o:o?o.exec:e.exec;if(a)try{return a(r,i.data,{action:e,state:this.state,_event:i})}catch(e){throw this.parent&&this.parent.send({type:"xstate.error",data:e}),e}switch(e.type){case Rg:var s=e;if("number"==typeof s.delay)return void this.defer(s);s.to?this.sendTo(s._event,s.to):this.send(s._event);break;case xg:this.cancel(e.sendId);break;case _g:if(this.status!==wy.Running)return;var c=e.activity;if(!this.state.activities[c.id||c.type])break;if(c.type===ng.Invoke){var u=cg(c.src),l=this.machine.options.services?this.machine.options.services[u.type]:void 0,f=c.id,d=c.data;Am||Km(!("forward"in c),"`forward` property is deprecated (found in invocation of '".concat(c.src,"' in in machine '").concat(this.machine.id,"'). ")+"Please use `autoForward` instead.");var p="autoForward"in c?c.autoForward:!!c.forward;if(!l)return void(Am||Km(!1,"No service found for invocation '".concat(c.src,"' in machine '").concat(this.machine.id,"'.")));var h=d?Wm(d,r,i):void 0;if("string"==typeof l)return;var v=Jm(l)?l(r,i.data,{data:h,src:u,meta:c.meta}):l;if(!v)return;var m=void 0;tg(v)&&(v=h?v.withContext(h):v,m={autoForward:p}),this.spawn(v,f,m)}else this.spawnActivity(c);break;case Eg:this.stopChild(e.activity.id);break;case Tg:var g=e.label,y=e.value;g?this.logger(g,y):this.logger(y);break;default:Am||Km(!1,"No implementation found for action type '".concat(e.type,"'"))}},e.prototype.removeChild=function(e){var t;this.children.delete(e),this.forwardTo.delete(e),null===(t=this.state)||void 0===t||delete t.children[e]},e.prototype.stopChild=function(e){var t=this.children.get(e);t&&(this.removeChild(e),Jm(t.stop)&&t.stop())},e.prototype.spawn=function(e,t,n){if(zm(e))return this.spawnPromise(Promise.resolve(e),t);if(Jm(e))return this.spawnCallback(e,t);if(function(e){try{return"function"==typeof e.send}catch(e){return!1}}(i=e)&&"id"in i)return this.spawnActor(e,t);if(function(e){try{return"subscribe"in e&&Jm(e.subscribe)}catch(e){return!1}}(e))return this.spawnObservable(e,t);if(tg(e))return this.spawnMachine(e,_m(_m({},n),{id:t}));if(null!==(r=e)&&"object"==typeof r&&"transition"in r&&"function"==typeof r.transition)return this.spawnBehavior(e,t);throw new Error('Unable to spawn entity "'.concat(t,'" of type "').concat(typeof e,'".'));var r,i},e.prototype.spawnMachine=function(t,n){var r=this;void 0===n&&(n={});var i=new e(t,_m(_m({},this.options),{parent:this,id:n.id||t.id})),o=_m(_m({},_y),n);o.sync&&i.onTransition((function(e){r.send(Mg,{state:e,id:i.id})}));var a=i;return this.children.set(i.id,a),o.autoForward&&this.forwardTo.add(i.id),i.onDone((function(e){r.removeChild(i.id),r.send(og(e,{origin:i.id}))})).start(),a},e.prototype.spawnBehavior=function(e,t){var n=by(e,{id:t,parent:this});return this.children.set(t,n),n},e.prototype.spawnPromise=function(e,t){var n,r,i=this,o=!1;e.then((function(e){o||(r=e,i.removeChild(t),i.send(og(zg(t,e),{origin:t})))}),(function(e){if(!o){i.removeChild(t);var n=Gg(t,e);try{i.send(og(n,{origin:t}))}catch(r){!function(e,t,n){if(!Am){var r=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";if(e===t)console.error("Missing onError handler for invocation '".concat(n,"', error was '").concat(e,"'.").concat(r));else{var i=t.stack?" Stacktrace was '".concat(t.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(n,"'. ")+"Original error: '".concat(e,"'. ").concat(r," Current error is '").concat(t,"'.").concat(i))}}}(e,r,t),i.devTools&&i.devTools.send(n,i.state),i.machine.strict&&i.stop()}}}));var a=((n={id:t,send:function(){},subscribe:function(t,n,r){var i=ug(t,n,r),o=!1;return e.then((function(e){o||(i.next(e),o||i.complete())}),(function(e){o||i.error(e)})),{unsubscribe:function(){return o=!0}}},stop:function(){o=!0},toJSON:function(){return{id:t}},getSnapshot:function(){return r}})[eg]=function(){return this},n);return this.children.set(t,a),a},e.prototype.spawnCallback=function(e,t){var n,r,i,o=this,a=!1,s=new Set,c=new Set;try{i=e((function(e){r=e,c.forEach((function(t){return t(e)})),a||o.send(og(e,{origin:t}))}),(function(e){s.add(e)}))}catch(e){this.send(Gg(t,e))}if(zm(i))return this.spawnPromise(i,t);var u=((n={id:t,send:function(e){return s.forEach((function(t){return t(e)}))},subscribe:function(e){var t=ug(e);return c.add(t.next),{unsubscribe:function(){c.delete(t.next)}}},stop:function(){a=!0,Jm(i)&&i()},toJSON:function(){return{id:t}},getSnapshot:function(){return r}})[eg]=function(){return this},n);return this.children.set(t,u),u},e.prototype.spawnObservable=function(e,t){var n,r,i=this,o=e.subscribe((function(e){r=e,i.send(og(e,{origin:t}))}),(function(e){i.removeChild(t),i.send(og(Gg(t,e),{origin:t}))}),(function(){i.removeChild(t),i.send(og(zg(t),{origin:t}))})),a=((n={id:t,send:function(){},subscribe:function(t,n,r){return e.subscribe(t,n,r)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return r},toJSON:function(){return{id:t}}})[eg]=function(){return this},n);return this.children.set(t,a),a},e.prototype.spawnActor=function(e,t){return this.children.set(t,e),e},e.prototype.spawnActivity=function(e){var t=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(t){var n=t(this.state.context,e);this.spawnEffect(e.id,n)}else Am||Km(!1,"No implementation found for activity '".concat(e.type,"'"))},e.prototype.spawnEffect=function(e,t){var n;this.children.set(e,((n={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:t||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}})[eg]=function(){return this},n))},e.prototype.attachDev=function(){var e=gy();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var t="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(_m(_m({name:this.id,autoPause:!0,stateSanitizer:function(e){return{value:e.value,context:e.context,actions:e.actions}}},t),{features:_m({jump:!1,skip:!1},t?t.features:void 0)}),this.machine),this.devTools.init(this.state)}yy(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[eg]=function(){return this},e.prototype.getSnapshot=function(){return this.status===wy.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,t){return setTimeout(e,t)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},e.interpret=Ay,e}();function Ay(e,t){return new Oy(e,t)}!function(e){e.CALL_SETUP="mobius.call",e.CALL_PROGRESS="mobius.callprogress",e.CALL_CONNECTED="mobius.callconnected",e.CALL_MEDIA="mobius.media",e.CALL_DISCONNECTED="mobius.calldisconnected"}(Ey||(Ey={})),function(e){e.OFFER="OFFER",e.ANSWER="ANSWER",e.OFFER_REQUEST="OFFER_REQUEST",e.OK="OK",e.ERROR="ERROR"}(Sy||(Sy={})),function(e){e[e.BUSY=115]="BUSY",e[e.NORMAL=0]="NORMAL",e[e.MEDIA_INACTIVITY=131]="MEDIA_INACTIVITY"}(Ry||(Ry={})),function(e){e.BUSY="User Busy.",e.NORMAL="Normal Disconnect.",e.MEDIA_INACTIVITY="Media Inactivity."}(xy||(xy={})),function(e){e.CALL_INFO="callInfo",e.CALL_STATE="callState"}(Cy||(Cy={})),function(e){e.ANSWER="ANSWER",e.OK="OK",e.OFFER="OFFER",e.ERROR="ERROR",e.OFFER_RESPONSE="OFFER_RESPONSE"}(ky||(ky={})),function(e){e.PROCEEDING="sig_proceeding",e.PROGRESS="sig_progress",e.ALERTING="sig_alerting",e.CONNECTED="sig_connected"}(Ty||(Ty={})),function(e){e.BLIND="BLIND",e.CONSULT="CONSULT"}(Iy||(Iy={}));var Ly=function(){function e(t,n){(0,o.Z)(this,e),(0,f.Z)(this,"webex",void 0),(0,f.Z)(this,"callerInfo",void 0),(0,f.Z)(this,"sdkConnector",void 0),(0,f.Z)(this,"emitter",void 0),this.sdkConnector=g,this.callerInfo={},this.sdkConnector.getWebex()||g.setWebex(t),this.webex=this.sdkConnector.getWebex(),this.emitter=n}var t,n;return(0,a.Z)(e,[{key:"resolveCallerId",value:(n=(0,l.Z)(p().mark((function e(t){var n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rn(t);case 2:n=e.sent,r=!1,n.name&&this.callerInfo.name!==n.name&&(Ie.info("Updating Name after resolution",{file:D,method:"resolveCallerId"}),this.callerInfo.name=n.name,r=!0),n.num&&this.callerInfo.num!==n.num&&(Ie.info("Updating Number after resolution",{file:D,method:"resolveCallerId"}),this.callerInfo.num=n.num,r=!0),this.callerInfo.avatarSrc&&this.callerInfo.avatarSrc===n.avatarSrc||(Ie.info("Updating Avatar Id after resolution",{file:D,method:"resolveCallerId"}),this.callerInfo.avatarSrc=n.avatarSrc,r=!0),this.callerInfo.id&&this.callerInfo.id===n.id||(Ie.info("Updating User Id after resolution",{file:D,method:"resolveCallerId"}),this.callerInfo.id=n.id,r=!0),r&&this.emitter(this.callerInfo);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"parseRemotePartyInfo",value:(t=(0,l.Z)(p().mark((function e(t){var n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.split(";").slice(-1)[0]).includes("externalId")?(r=n.split("=")[1],Ie.info("externalId retrieved: ".concat(r),{file:D,method:"parseRemotePartyInfo"}),this.resolveCallerId('id eq "'.concat(r,'"'))):Ie.warn("externalId not found!",{file:D,method:"parseRemotePartyInfo"});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"parseSipUri",value:function(e){var t={},n=e.split("@")[0].replace(/"/g,""),r=T.exec(n),i=n.substring(n.indexOf(":")+1,n.length);r?(t.name=r[0].trimEnd(),Ie.info("Parsed Name: ".concat(t.name),{file:D,method:"parseSipUri"})):Ie.warn("Name field not found!",{file:D,method:"parseSipUri"});var o=i.match(N);return o&&o[0].length===i.length?(t.num=i,Ie.info("Parsed Number: ".concat(t.num),{file:D,method:"parseSipUri"})):Ie.warn("Number field not found!",{file:D,method:"parseSipUri"}),t}},{key:"fetchCallerDetails",value:function(e){if(this.callerInfo.id=void 0,this.callerInfo.avatarSrc=void 0,this.callerInfo.name=void 0,this.callerInfo.num=void 0,"p-asserted-identity"in e){Ie.info("Parsing p-asserted-identity:- ".concat(e["p-asserted-identity"]),{file:D,method:"fetchCallerDetails"});var t=this.parseSipUri(e["p-asserted-identity"]);this.callerInfo.name=t.name,this.callerInfo.num=t.num,Ie.info("CallerId retrieved from p-asserted-identity: name: ".concat(this.callerInfo.name," , num: ").concat(this.callerInfo.num),{file:D,method:"fetchCallerDetails"})}if(e.from){Ie.info("Parsing from header:- ".concat(e.from),{file:D,method:"fetchCallerDetails"});var n=this.parseSipUri(e.from);Ie.info("CallerId retrieved from FROM: name: ".concat(n.name," , num: ").concat(n.num),{file:D,method:"fetchCallerDetails"}),!this.callerInfo.name&&n.name&&(Ie.info("Updating name field from From header",{file:D,method:"fetchCallerDetails"}),this.callerInfo.name=n.name),!this.callerInfo.num&&n.num&&(Ie.info("Updating number field from From header",{file:D,method:"fetchCallerDetails"}),this.callerInfo.num=n.num)}return(this.callerInfo.name||this.callerInfo.num)&&this.emitter(this.callerInfo),"x-broadworks-remote-party-info"in e&&(Ie.info("Parsing x-broadworks-remote-party-info:- ".concat(e["x-broadworks-remote-party-info"]),{file:D,method:"fetchCallerDetails"}),this.parseRemotePartyInfo(e["x-broadworks-remote-party-info"])),Ie.log("Intermediate callerId :- name: ".concat(this.callerInfo.name," , num: ").concat(this.callerInfo.num),{file:D,method:"fetchCallerDetails"}),this.callerInfo}}]),e}();function My(e){var t=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=i()(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var Py,Ny=function(e){(0,s.Z)(D,e);var t,n,r,i,c,u,d,h,v,m,y,b,w,_,E,k,T,I,A,L,P,N=My(D);function D(e,t,n,r,i,a,s){var c;(0,o.Z)(this,D),c=N.call(this),(0,f.Z)((0,At.Z)(c),"sdkConnector",void 0),(0,f.Z)((0,At.Z)(c),"webex",void 0),(0,f.Z)((0,At.Z)(c),"destination",void 0),(0,f.Z)((0,At.Z)(c),"direction",void 0),(0,f.Z)((0,At.Z)(c),"callId",void 0),(0,f.Z)((0,At.Z)(c),"correlationId",void 0),(0,f.Z)((0,At.Z)(c),"deviceId",void 0),(0,f.Z)((0,At.Z)(c),"disconnectReason",void 0),(0,f.Z)((0,At.Z)(c),"callStateMachine",void 0),(0,f.Z)((0,At.Z)(c),"mediaStateMachine",void 0),(0,f.Z)((0,At.Z)(c),"seq",void 0),(0,f.Z)((0,At.Z)(c),"mediaConnection",void 0),(0,f.Z)((0,At.Z)(c),"earlyMedia",void 0),(0,f.Z)((0,At.Z)(c),"connected",void 0),(0,f.Z)((0,At.Z)(c),"callerInfo",void 0),(0,f.Z)((0,At.Z)(c),"localRoapMessage",void 0),(0,f.Z)((0,At.Z)(c),"mobiusUrl",void 0),(0,f.Z)((0,At.Z)(c),"remoteRoapMessage",void 0),(0,f.Z)((0,At.Z)(c),"deleteCb",void 0),(0,f.Z)((0,At.Z)(c),"callerId",void 0),(0,f.Z)((0,At.Z)(c),"sessionTimer",void 0),(0,f.Z)((0,At.Z)(c),"supplementaryServicesTimer",void 0),(0,f.Z)((0,At.Z)(c),"muted",void 0),(0,f.Z)((0,At.Z)(c),"held",void 0),(0,f.Z)((0,At.Z)(c),"metricManager",void 0),(0,f.Z)((0,At.Z)(c),"broadworksCorrelationInfo",void 0),(0,f.Z)((0,At.Z)(c),"serviceIndicator",void 0),(0,f.Z)((0,At.Z)(c),"waitingForOK",void 0),(0,f.Z)((0,At.Z)(c),"getDirection",(function(){return c.direction})),(0,f.Z)((0,At.Z)(c),"getCallId",(function(){return c.callId})),(0,f.Z)((0,At.Z)(c),"getCorrelationId",(function(){return c.correlationId})),(0,f.Z)((0,At.Z)(c),"setCallId",(function(e){c.callId=e,Ie.info("Setting callId : ".concat(c.callId," for correlationId: ").concat(c.correlationId),{file:j,method:c.setCallId.name})})),(0,f.Z)((0,At.Z)(c),"getDisconnectReason",(function(){return c.disconnectReason})),(0,f.Z)((0,At.Z)(c),"post",function(){var e=(0,l.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.webex.request({uri:"".concat(c.mobiusUrl).concat(C,"/").concat(c.deviceId,"/").concat("call"),method:Ae.POST,service:Oe.MOBIUS,headers:(n={},(0,f.Z)(n,x,c.webex.internal.device.url),(0,f.Z)(n,M,S),n),body:{device:{deviceId:c.deviceId,correlationId:c.correlationId},callee:{type:c.destination.type,address:c.destination.address},localMedia:{roap:t,mediaId:pm()}}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,f.Z)((0,At.Z)(c),"getCallerInfo",(function(){return c.callerInfo})),(0,f.Z)((0,At.Z)(c),"end",(function(){c.sendCallStateMachineEvt({type:"E_SEND_CALL_DISCONNECT"})})),(0,f.Z)((0,At.Z)(c),"doHoldResume",(function(){c.held?c.sendCallStateMachineEvt({type:"E_CALL_RESUME"}):c.sendCallStateMachineEvt({type:"E_CALL_HOLD"})})),(0,f.Z)((0,At.Z)(c),"mute",(function(e){c.muted?(e.enabled=!0,c.muted=!1):(e.enabled=!1,c.muted=!0)})),c.destination=n,c.direction=r,c.sdkConnector=g,c.deviceId=i,c.serviceIndicator=s,c.sdkConnector.getWebex()||g.setWebex(t),c.webex=c.sdkConnector.getWebex(),c.metricManager=wm(c.webex,c.serviceIndicator),c.callId="".concat("DefaultLocalId","_").concat(pm()),c.correlationId=pm(),c.deleteCb=a,c.connected=!1,c.held=!1,c.earlyMedia=!1,c.callerInfo={},c.localRoapMessage={},c.mobiusUrl=e,c.waitingForOK=!1,Ie.info("Mobius Url:- ".concat(c.mobiusUrl),{file:j,method:"constructor"}),c.seq=1,c.callerId=function(e,t){return new Ly(e,t)}(t,(function(e){c.callerInfo=e;var t={correlationId:c.correlationId,callerId:c.callerInfo};c.emit(Kv.CALLER_ID,t)})),c.remoteRoapMessage=null,c.disconnectReason={code:Ry.NORMAL,cause:xy.NORMAL};var u=cy({schema:{context:{},events:{}},id:"call-state",initial:"S_IDLE",context:{},states:{S_IDLE:{on:{E_RECV_CALL_SETUP:{target:"S_RECV_CALL_SETUP",actions:["incomingCallSetup"]},E_SEND_CALL_SETUP:{target:"S_SEND_CALL_SETUP",actions:["outgoingCallSetup"]},E_RECV_CALL_DISCONNECT:{target:"S_RECV_CALL_DISCONNECT",actions:["incomingCallDisconnect"]},E_SEND_CALL_DISCONNECT:{target:"S_SEND_CALL_DISCONNECT",actions:["outgoingCallDisconnect"]},E_UNKNOWN:{target:"S_UNKNOWN",actions:["unknownState"]}}},S_RECV_CALL_SETUP:{on:{E_SEND_CALL_ALERTING:{target:"S_SEND_CALL_PROGRESS",actions:["outgoingCallAlerting"]},E_RECV_CALL_DISCONNECT:{target:"S_RECV_CALL_DISCONNECT",actions:["incomingCallDisconnect"]},E_SEND_CALL_DISCONNECT:{target:"S_SEND_CALL_DISCONNECT",actions:["outgoingCallDisconnect"]},E_UNKNOWN:{target:"S_UNKNOWN",actions:["unknownState"]}}},S_SEND_CALL_SETUP:{on:{E_RECV_CALL_PROGRESS:{target:"S_RECV_CALL_PROGRESS",actions:["incomingCallProgress"]},E_RECV_CALL_DISCONNECT:{target:"S_RECV_CALL_DISCONNECT",actions:["incomingCallDisconnect"]},E_SEND_CALL_DISCONNECT:{target:"S_SEND_CALL_DISCONNECT",actions:["outgoingCallDisconnect"]},E_UNKNOWN:{target:"S_UNKNOWN",actions:["unknownState"]}}},S_RECV_CALL_PROGRESS:{on:{E_RECV_CALL_CONNECT:{target:"S_RECV_CALL_CONNECT",actions:["incomingCallConnect"]},E_RECV_CALL_DISCONNECT:{target:"S_RECV_CALL_DISCONNECT",actions:["incomingCallDisconnect"]},E_SEND_CALL_DISCONNECT:{target:"S_SEND_CALL_DISCONNECT",actions:["outgoingCallDisconnect"]},E_RECV_CALL_PROGRESS:{target:"S_RECV_CALL_PROGRESS",actions:["incomingCallProgress"]},E_UNKNOWN:{target:"S_UNKNOWN",actions:["unknownState"]}}},S_SEND_CALL_PROGRESS:{on:{E_SEND_CALL_CONNECT:{target:"S_SEND_CALL_CONNECT",actions:["outgoingCallConnect"]},E_RECV_CALL_DISCONNECT:{target:"S_RECV_CALL_DISCONNECT",actions:["incomingCallDisconnect"]},E_SEND_CALL_DISCONNECT:{target:"S_SEND_CALL_DISCONNECT",actions:["outgoingCallDisconnect"]},E_UNKNOWN:{target:"S_UNKNOWN",actions:["unknownState"]}}},S_RECV_CALL_CONNECT:{on:{E_CALL_ESTABLISHED:{target:"S_CALL_ESTABLISHED",actions:["callEstablished"]},E_RECV_CALL_DISCONNECT:{target:"S_RECV_CALL_DISCONNECT",actions:["incomingCallDisconnect"]},E_SEND_CALL_DISCONNECT:{target:"S_SEND_CALL_DISCONNECT",actions:["outgoingCallDisconnect"]},E_UNKNOWN:{target:"S_UNKNOWN",actions:["unknownState"]}}},S_SEND_CALL_CONNECT:{on:{E_CALL_ESTABLISHED:{target:"S_CALL_ESTABLISHED",actions:["callEstablished"]},E_RECV_CALL_DISCONNECT:{target:"S_RECV_CALL_DISCONNECT",actions:["incomingCallDisconnect"]},E_SEND_CALL_DISCONNECT:{target:"S_SEND_CALL_DISCONNECT",actions:["outgoingCallDisconnect"]},E_UNKNOWN:{target:"S_UNKNOWN",actions:["unknownState"]}}},S_CALL_HOLD:{on:{E_RECV_CALL_DISCONNECT:{target:"S_RECV_CALL_DISCONNECT",actions:["incomingCallDisconnect"]},E_SEND_CALL_DISCONNECT:{target:"S_SEND_CALL_DISCONNECT",actions:["outgoingCallDisconnect"]},E_CALL_ESTABLISHED:{target:"S_CALL_ESTABLISHED",actions:["callEstablished"]},E_UNKNOWN:{target:"S_UNKNOWN",actions:["unknownState"]}}},S_CALL_RESUME:{on:{E_RECV_CALL_DISCONNECT:{target:"S_RECV_CALL_DISCONNECT",actions:["incomingCallDisconnect"]},E_SEND_CALL_DISCONNECT:{target:"S_SEND_CALL_DISCONNECT",actions:["outgoingCallDisconnect"]},E_CALL_ESTABLISHED:{target:"S_CALL_ESTABLISHED",actions:["callEstablished"]},E_UNKNOWN:{target:"S_UNKNOWN",actions:["unknownState"]}}},S_CALL_ESTABLISHED:{on:{E_CALL_HOLD:{target:"S_CALL_HOLD",actions:["initiateCallHold"]},E_CALL_RESUME:{target:"S_CALL_RESUME",actions:["initiateCallResume"]},E_RECV_CALL_DISCONNECT:{target:"S_RECV_CALL_DISCONNECT",actions:["incomingCallDisconnect"]},E_SEND_CALL_DISCONNECT:{target:"S_SEND_CALL_DISCONNECT",actions:["outgoingCallDisconnect"]},E_CALL_ESTABLISHED:{target:"S_CALL_ESTABLISHED",actions:["callEstablished"]},E_UNKNOWN:{target:"S_UNKNOWN",actions:["unknownState"]}}},S_RECV_CALL_DISCONNECT:{on:{E_CALL_CLEARED:"S_CALL_CLEARED"}},S_SEND_CALL_DISCONNECT:{on:{E_CALL_CLEARED:"S_CALL_CLEARED"}},S_UNKNOWN:{on:{E_CALL_CLEARED:"S_CALL_CLEARED"}},S_ERROR:{on:{E_CALL_CLEARED:"S_CALL_CLEARED"}},S_CALL_CLEARED:{type:"final"}}},{actions:{incomingCallSetup:function(e,t){return c.handleIncomingCallSetup(t)},outgoingCallSetup:function(e,t){return c.handleOutgoingCallSetup(t)},incomingCallProgress:function(e,t){return c.handleIncomingCallProgress(t)},outgoingCallAlerting:function(e,t){return c.handleOutgoingCallAlerting(t)},incomingCallConnect:function(e,t){return c.handleIncomingCallConnect(t)},outgoingCallConnect:function(e,t){return c.handleOutgoingCallConnect(t)},callEstablished:function(e,t){return c.handleCallEstablished(t)},initiateCallHold:function(e,t){return c.handleCallHold(t)},initiateCallResume:function(e,t){return c.handleCallResume(t)},incomingCallDisconnect:function(e,t){return c.handleIncomingCallDisconnect(t)},outgoingCallDisconnect:function(e,t){return c.handleOutgoingCallDisconnect(t)},unknownState:function(e,t){return c.handleUnknownState(t)}}}),d=cy({schema:{context:{},events:{}},id:"roap-state",initial:"S_ROAP_IDLE",context:{},states:{S_ROAP_IDLE:{on:{E_RECV_ROAP_OFFER_REQUEST:{target:"S_RECV_ROAP_OFFER_REQUEST",actions:["incomingRoapOfferRequest"]},E_RECV_ROAP_OFFER:{target:"S_RECV_ROAP_OFFER",actions:["incomingRoapOffer"]},E_SEND_ROAP_OFFER:{target:"S_SEND_ROAP_OFFER",actions:["outgoingRoapOffer"]}}},S_RECV_ROAP_OFFER_REQUEST:{on:{E_SEND_ROAP_OFFER:{target:"S_SEND_ROAP_OFFER",actions:["outgoingRoapOffer"]},E_ROAP_OK:{target:"S_ROAP_OK",actions:["roapEstablished"]},E_ROAP_ERROR:{target:"S_ROAP_ERROR",actions:["roapError"]}}},S_RECV_ROAP_OFFER:{on:{E_SEND_ROAP_ANSWER:{target:"S_SEND_ROAP_ANSWER",actions:["outgoingRoapAnswer"]},E_ROAP_OK:{target:"S_ROAP_OK",actions:["roapEstablished"]},E_ROAP_ERROR:{target:"S_ROAP_ERROR",actions:["roapError"]}}},S_SEND_ROAP_OFFER:{on:{E_RECV_ROAP_ANSWER:{target:"S_RECV_ROAP_ANSWER",actions:["incomingRoapAnswer"]},E_SEND_ROAP_ANSWER:{target:"S_SEND_ROAP_ANSWER",actions:["outgoingRoapAnswer"]},E_SEND_ROAP_OFFER:{target:"S_SEND_ROAP_OFFER",actions:["outgoingRoapOffer"]},E_ROAP_ERROR:{target:"S_ROAP_ERROR",actions:["roapError"]}}},S_RECV_ROAP_ANSWER:{on:{E_ROAP_OK:{target:"S_ROAP_OK",actions:["roapEstablished"]},E_ROAP_ERROR:{target:"S_ROAP_ERROR",actions:["roapError"]}}},S_SEND_ROAP_ANSWER:{on:{E_RECV_ROAP_OFFER_REQUEST:{target:"S_RECV_ROAP_OFFER_REQUEST",actions:["incomingRoapOfferRequest"]},E_RECV_ROAP_OFFER:{target:"S_RECV_ROAP_OFFER",actions:["incomingRoapOffer"]},E_ROAP_OK:{target:"S_ROAP_OK",actions:["roapEstablished"]},E_SEND_ROAP_ANSWER:{target:"S_SEND_ROAP_ANSWER",actions:["outgoingRoapAnswer"]},E_ROAP_ERROR:{target:"S_ROAP_ERROR",actions:["roapError"]}}},S_ROAP_OK:{on:{E_RECV_ROAP_OFFER_REQUEST:{target:"S_RECV_ROAP_OFFER_REQUEST",actions:["incomingRoapOfferRequest"]},E_RECV_ROAP_OFFER:{target:"S_RECV_ROAP_OFFER",actions:["incomingRoapOffer"]},E_ROAP_OK:{target:"S_ROAP_OK",actions:["roapEstablished"]},E_SEND_ROAP_OFFER:{target:"S_SEND_ROAP_OFFER",actions:["outgoingRoapOffer"]},E_ROAP_ERROR:{target:"S_ROAP_ERROR",actions:["roapError"]},E_ROAP_TEARDOWN:{target:"S_ROAP_TEARDOWN"}}},S_ROAP_ERROR:{on:{E_ROAP_TEARDOWN:{target:"S_ROAP_TEARDOWN"},E_RECV_ROAP_OFFER_REQUEST:{target:"S_RECV_ROAP_OFFER_REQUEST",actions:["incomingRoapOfferRequest"]},E_RECV_ROAP_OFFER:{target:"S_RECV_ROAP_OFFER",actions:["incomingRoapOffer"]},E_RECV_ROAP_ANSWER:{target:"S_RECV_ROAP_ANSWER",actions:["incomingRoapAnswer"]},E_ROAP_OK:{target:"S_ROAP_OK",actions:["roapEstablished"]}}},S_ROAP_TEARDOWN:{type:"final"}}},{actions:{incomingRoapOffer:function(e,t){return c.handleIncomingRoapOffer(e,t)},incomingRoapAnswer:function(e,t){return c.handleIncomingRoapAnswer(e,t)},incomingRoapOfferRequest:function(e,t){return c.handleIncomingRoapOfferRequest(e,t)},outgoingRoapOffer:function(e,t){return c.handleOutgoingRoapOffer(e,t)},outgoingRoapAnswer:function(e,t){return c.handleOutgoingRoapAnswer(e,t)},roapEstablished:function(e,t){return c.handleRoapEstablished(e,t)},roapError:function(e,t){return c.handleRoapError(e,t)}}});return c.callStateMachine=Ay(u).onTransition((function(e,t){Ie.log("Call StateMachine:- state=".concat(e.value,", event=").concat(kt()(t.type)),{}),"S_UNKNOWN"!==e.value&&c.metricManager.submitCallMetric(vm.CALL,e.value.toString(),hm.BEHAVIORAL,c.callId,c.correlationId,void 0)})).start(),c.mediaStateMachine=Ay(d).onTransition((function(e,t){var n;(Ie.log("Media StateMachine:- state=".concat(e.value,", event=").concat(kt()(t.type)),{}),"S_ROAP_ERROR"!==e.value)&&c.metricManager.submitMediaMetric(vm.MEDIA,e.value.toString(),hm.BEHAVIORAL,c.callId,c.correlationId,c.localRoapMessage.sdp,null===(n=c.remoteRoapMessage)||void 0===n?void 0:n.sdp,void 0)})).start(),c.muted=!1,c}return(0,a.Z)(D,[{key:"isMuted",value:function(){return this.muted}},{key:"isConnected",value:function(){return this.connected}},{key:"isHeld",value:function(){return this.held}},{key:"handleIncomingCallSetup",value:function(e){Ie.info("handleIncomingCallSetup: ".concat(this.getCorrelationId(),"  "),{file:j,method:this.handleIncomingCallSetup.name}),this.sendCallStateMachineEvt({type:"E_SEND_CALL_ALERTING"})}},{key:"handleOutgoingCallSetup",value:(P=(0,l.Z)(p().mark((function e(t){var n,r,i,o=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie.info("handleOutgoingCallSetup: ".concat(this.getCorrelationId(),"  "),{file:j,method:this.handleOutgoingCallSetup.name}),n=t.data,e.prev=2,e.next=5,this.post(n);case 5:r=e.sent,Ie.log("handleOutgoingCallSetup: Response code: ".concat(r.statusCode),{file:j,method:this.handleOutgoingCallSetup.name}),this.setCallId(r.body.callId),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(2),Ie.warn("Call setup failed with Mobius",{file:j,method:this.handleOutgoingCallSetup.name}),i=e.t0,hn((function(e){o.emit(Kv.CALL_ERROR,e),o.submitCallErrorMetric(e),o.sendCallStateMachineEvt({type:"E_UNKNOWN",data:i})}),je.CALL_CONTROL,(function(e){}),this.getCorrelationId(),i,this.handleOutgoingCallSetup.name,j);case 15:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(e){return P.apply(this,arguments)})},{key:"handleCallHold",value:(L=(0,l.Z)(p().mark((function e(t){var n,r,i=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie.info("handleCallHold: ".concat(this.getCorrelationId(),"  "),{file:j,method:this.handleCallHold.name}),e.prev=1,e.next=4,this.postSSRequest(void 0,Yv.HOLD);case 4:n=e.sent,Ie.log("Response code: ".concat(n.statusCode),{file:j,method:this.handleCallHold.name}),!1===this.isHeld()&&(this.supplementaryServicesTimer=setTimeout((0,l.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={file:j,method:i.handleCallHold.name},Ie.warn("Hold response timed out",{file:j,method:i.handleCallHold.name}),n=Ut("An error occurred while placing the call on hold. Wait a moment and try again.",t,Fe.TIMEOUT,i.getCorrelationId(),je.CALL_CONTROL),i.emit(Kv.HOLD_ERROR,n),i.submitCallErrorMetric(n);case 5:case"end":return e.stop()}}),e)}))),1e4)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),Ie.warn("Call Hold failed with Mobius",{file:j,method:this.handleCallHold.name}),r=e.t0,hn((function(e){i.emit(Kv.HOLD_ERROR,e),i.submitCallErrorMetric(e),i.sendCallStateMachineEvt({type:"E_CALL_ESTABLISHED",data:r})}),je.CALL_CONTROL,(function(e){}),this.getCorrelationId(),r,this.handleOutgoingCallSetup.name,j);case 14:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return L.apply(this,arguments)})},{key:"handleCallResume",value:(A=(0,l.Z)(p().mark((function e(t){var n,r,i=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie.info("handleCallResume: ".concat(this.getCorrelationId(),"  "),{file:j,method:this.handleCallResume.name}),e.prev=1,e.next=4,this.postSSRequest(void 0,Yv.RESUME);case 4:n=e.sent,Ie.log("Response code: ".concat(n.statusCode),{file:j,method:this.handleCallResume.name}),!0===this.isHeld()&&(this.supplementaryServicesTimer=setTimeout((0,l.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={file:j,method:i.handleCallResume.name},Ie.warn("Resume response timed out",{file:j,method:i.handleCallResume.name}),n=Ut("An error occurred while resuming the call. Wait a moment and try again.",t,Fe.TIMEOUT,i.getCorrelationId(),je.CALL_CONTROL),i.emit(Kv.RESUME_ERROR,n),i.submitCallErrorMetric(n);case 5:case"end":return e.stop()}}),e)}))),1e4)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),Ie.warn("Call Resume failed with Mobius",{file:j,method:this.handleCallResume.name}),r=e.t0,hn((function(e){i.emit(Kv.RESUME_ERROR,e),i.submitCallErrorMetric(e),i.sendCallStateMachineEvt({type:"E_CALL_ESTABLISHED",data:r})}),je.CALL_CONTROL,(function(e){}),this.getCorrelationId(),r,this.handleOutgoingCallSetup.name,j);case 14:case"end":return e.stop()}}),e,this,[[1,9]])}))),function(e){return A.apply(this,arguments)})},{key:"handleIncomingCallProgress",value:function(e){var t;Ie.info("handleIncomingCallProgress: ".concat(this.getCorrelationId(),"  "),{file:j,method:this.handleIncomingCallProgress.name});var n=e.data;null!=n&&null!==(t=n.callProgressData)&&void 0!==t&&t.inbandMedia?(Ie.log("Inband media present. Setting Early Media flag",{file:j,method:this.handleIncomingCallProgress.name}),this.earlyMedia=!0):Ie.log("Inband media not present.",{file:j,method:this.handleIncomingCallProgress.name}),null!=n&&n.callerId&&(Ie.info("Processing Caller-Id data",{file:j,method:this.handleIncomingCallProgress.name}),this.startCallerIdResolution(n.callerId)),this.emit(Kv.PROGRESS,this.correlationId)}},{key:"handleIncomingRoapOfferRequest",value:function(e,t){Ie.info("handleIncomingRoapOfferRequest: ".concat(this.getCorrelationId(),"  "),{file:j,method:this.handleIncomingRoapOfferRequest.name});var n=t.data;this.mediaConnection?this.waitingForOK?(Ie.info("Waiting for Roap OK, buffer the remote Offer Request for later handling",{file:j,method:this.handleIncomingRoapOfferRequest.name}),this.remoteRoapMessage=n):(n.seq=this.seq+1,this.seq=n.seq,this.mediaConnection.roapMessageReceived(n)):(Ie.info("Media connection is not up, buffer the remote Offer Request for later handling",{file:j,method:this.handleIncomingRoapOfferRequest.name}),this.seq=n.seq,Ie.info("Setting Sequence No: ".concat(this.seq),{file:j,method:this.handleIncomingRoapOfferRequest.name}),this.remoteRoapMessage=n)}},{key:"handleOutgoingCallAlerting",value:(I=(0,l.Z)(p().mark((function e(t){var n,r,i=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie.info("handleOutgoingCallAlerting: ".concat(this.getCorrelationId(),"  "),{file:j,method:this.handleOutgoingCallAlerting.name}),e.prev=1,e.next=4,this.patch(Ty.ALERTING);case 4:n=e.sent,Ie.log("PATCH response: ".concat(n.statusCode),{file:j,method:this.handleOutgoingCallAlerting.name}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),Ie.warn("Call Progress failed with Mobius",{file:j,method:this.handleOutgoingCallAlerting.name}),r=e.t0,hn((function(e){i.emit(Kv.CALL_ERROR,e),i.submitCallErrorMetric(e),i.sendCallStateMachineEvt({type:"E_UNKNOWN",data:r})}),je.CALL_CONTROL,(function(e){}),this.getCorrelationId(),r,this.handleOutgoingCallAlerting.name,j);case 13:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return I.apply(this,arguments)})},{key:"handleIncomingCallConnect",value:function(e){Ie.info("handleIncomingCallConnect: ".concat(this.getCorrelationId(),"  "),{file:j,method:this.handleIncomingCallConnect.name}),this.emit(Kv.CONNECT,this.correlationId),this.earlyMedia&&this.sendCallStateMachineEvt({type:"E_CALL_ESTABLISHED"})}},{key:"handleOutgoingCallConnect",value:(T=(0,l.Z)(p().mark((function e(t){var n,r,i=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ie.info("handleOutgoingCallConnect: ".concat(this.getCorrelationId(),"  "),{file:j,method:this.handleOutgoingCallConnect.name}),this.remoteRoapMessage){e.next=4;break}return Ie.warn("Offer not yet received from remote end... Exiting",{file:j,method:this.handleOutgoingCallConnect.name}),e.abrupt("return");case 4:return e.prev=4,e.next=7,this.patch(Ty.CONNECTED);case 7:n=e.sent,Ie.log("PATCH response: ".concat(n.statusCode),{file:j,method:this.handleOutgoingCallConnect.name}),this.mediaConnection.roapMessageReceived(this.remoteRoapMessage),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),Ie.warn("Call Connect failed with Mobius",{file:j,method:this.handleOutgoingCallConnect.name}),r=e.t0,hn((function(e){i.emit(Kv.CALL_ERROR,e),i.submitCallErrorMetric(e),i.sendCallStateMachineEvt({type:"E_UNKNOWN",data:r})}),je.CALL_CONTROL,(function(e){}),this.getCorrelationId(),r,this.handleOutgoingCallConnect.name,j);case 17:case"end":return e.stop()}}),e,this,[[4,12]])}))),function(e){return T.apply(this,arguments)})},{key:"handleIncomingCallDisconnect",value:(k=(0,l.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie.info("handleIncomingCallDisconnect: ".concat(this.getCorrelationId(),"  "),{file:j,method:this.handleIncomingCallDisconnect.name}),this.setDisconnectReason(),e.prev=2,e.next=5,this.delete();case 5:n=e.sent,Ie.log("handleOutgoingCallDisconnect: Response code: ".concat(n.statusCode),{file:j,method:this.handleIncomingCallDisconnect.name}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),Ie.warn("Delete Call failed with Mobius",{file:j,method:this.handleIncomingCallDisconnect.name});case 12:this.deleteCb(this.correlationId),this.sessionTimer&&clearInterval(this.sessionTimer),this.mediaConnection&&(this.mediaConnection.close(),Ie.info("Closing media channel",{file:j,method:"handleIncomingCallDisconnect"})),this.sendMediaStateMachineEvt({type:"E_ROAP_TEARDOWN"}),this.sendCallStateMachineEvt({type:"E_CALL_CLEARED"}),this.emit(Kv.DISCONNECT,this.correlationId);case 18:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e){return k.apply(this,arguments)})},{key:"handleOutgoingCallDisconnect",value:(E=(0,l.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setDisconnectReason(),e.prev=1,e.next=4,this.delete();case 4:n=e.sent,Ie.log("handleOutgoingCallDisconnect: Response code: ".concat(n.statusCode),{file:j,method:this.handleOutgoingCallDisconnect.name}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Ie.warn("Delete Call failed with Mobius",{file:j,method:this.handleOutgoingCallDisconnect.name});case 11:this.deleteCb(this.correlationId),this.sessionTimer&&clearInterval(this.sessionTimer),this.mediaConnection&&(this.mediaConnection.close(),Ie.info("Closing media channel",{file:j,method:"handleOutgoingCallDisconnect"})),this.sendMediaStateMachineEvt({type:"E_ROAP_TEARDOWN"}),this.sendCallStateMachineEvt({type:"E_CALL_CLEARED"});case 16:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return E.apply(this,arguments)})},{key:"handleCallEstablished",value:function(e){var t=this;Ie.info("handleCallEstablished: ".concat(this.getCorrelationId(),"  "),{file:j,method:this.handleCallEstablished.name}),this.emit(Kv.ESTABLISHED,this.correlationId),this.earlyMedia=!1,this.connected=!0,this.sessionTimer&&(Ie.log("Resetting session timer",{file:j,method:"handleCallEstablished"}),clearInterval(this.sessionTimer)),this.sessionTimer=setInterval((0,l.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.postStatus();case 3:e.sent,Ie.info("Session refresh successful",{file:j,method:"handleCallEstablished"}),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),n=e.t0,t.sessionTimer&&clearInterval(t.sessionTimer),hn((function(e){t.emit(Kv.CALL_ERROR,e),t.submitCallErrorMetric(e)}),je.CALL_CONTROL,(function(e){setTimeout((function(){t.postStatus(),t.sendCallStateMachineEvt({type:"E_CALL_ESTABLISHED"})}),1e3*e)}),t.getCorrelationId(),n,t.handleCallEstablished.name,j);case 12:case"end":return e.stop()}}),e,null,[[0,7]])}))),6e5)}},{key:"handleUnknownState",value:(_=(0,l.Z)(p().mark((function e(t){var n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie.info("handleUnknownState: ".concat(this.getCorrelationId(),"  "),{file:j,method:this.handleUnknownState.name}),null!=(n=t.data)&&n.media||Ie.warn("Call failed due to signalling issue",{file:j,method:this.handleUnknownState.name}),e.prev=3,this.setDisconnectReason(),e.next=7,this.delete();case 7:r=e.sent,Ie.log("handleOutgoingCallDisconnect: Response code: ".concat(r.statusCode),{file:j,method:this.handleUnknownState.name}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),Ie.warn("Delete Call failed with Mobius",{file:j,method:this.handleUnknownState.name});case 14:this.deleteCb(this.correlationId),this.sessionTimer&&clearInterval(this.sessionTimer),this.mediaConnection&&(this.mediaConnection.close(),Ie.info("Closing media channel",{file:j,method:this.handleUnknownState.name})),this.sendMediaStateMachineEvt({type:"E_ROAP_TEARDOWN"}),this.sendCallStateMachineEvt({type:"E_CALL_CLEARED"});case 19:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(e){return _.apply(this,arguments)})},{key:"getEmitterCallback",value:function(e){var t=this;return function(n){switch(t.callStateMachine.state.value){case"S_CALL_HOLD":return t.emit(Kv.HOLD_ERROR,n),t.supplementaryServicesTimer&&(clearTimeout(t.supplementaryServicesTimer),t.supplementaryServicesTimer=void 0),t.submitCallErrorMetric(n),void t.sendCallStateMachineEvt({type:"E_CALL_ESTABLISHED",data:e});case"S_CALL_RESUME":return t.emit(Kv.RESUME_ERROR,n),t.submitCallErrorMetric(n),void t.sendCallStateMachineEvt({type:"E_CALL_ESTABLISHED",data:e});default:t.emit(Kv.CALL_ERROR,n),t.submitCallErrorMetric(n),t.connected||t.sendMediaStateMachineEvt({type:"E_ROAP_ERROR",data:e})}}}},{key:"handleRoapEstablished",value:(w=(0,l.Z)(p().mark((function e(t,n){var r,i,o,a,s,c,u,l=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ie.info("handleRoapEstablished: ".concat(this.getCorrelationId(),"  "),{file:j,method:"handleRoapEstablished"}),this.waitingForOK=!1,r=n.data,i=r.received,o=r.message,i){e.next=21;break}return Ie.info("Sending Media Ok to the remote End",{file:j,method:"handleRoapEstablished"}),e.prev=5,o.seq=this.seq,e.next=9,this.postMedia(o);case 9:a=e.sent,Ie.log("handleRoapEstablished: Response code: ".concat(a.statusCode),{file:j,method:"handleRoapEstablished"}),this.earlyMedia||this.sendCallStateMachineEvt({type:"E_CALL_ESTABLISHED"}),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(5),Ie.warn("MediaOk failed with Mobius",{file:j,method:"handleRoapEstablished"}),s=e.t0,hn(this.getEmitterCallback(s),je.MEDIA,(function(e){l.connected&&setTimeout((function(){l.sendMediaStateMachineEvt({type:"E_ROAP_OK",data:n.data})}),1e3*e)}),this.getCorrelationId(),s,this.handleRoapEstablished.name,j);case 19:e.next=26;break;case 21:Ie.info("Notifying internal-media-core about ROAP OK message",{file:j,method:"handleRoapEstablished"}),o.seq=this.seq,this.mediaConnection&&this.mediaConnection.roapMessageReceived(o),this.earlyMedia||this.sendCallStateMachineEvt({type:"E_CALL_ESTABLISHED"}),("OFFER_REQUEST"===(null===(c=this.remoteRoapMessage)||void 0===c?void 0:c.messageType)||"OFFER"===(null===(u=this.remoteRoapMessage)||void 0===u?void 0:u.messageType)&&this.remoteRoapMessage.seq>this.seq)&&(this.seq=this.remoteRoapMessage.seq,this.mediaConnection.roapMessageReceived(this.remoteRoapMessage));case 26:case"end":return e.stop()}}),e,this,[[5,14]])}))),function(e,t){return w.apply(this,arguments)})},{key:"handleRoapError",value:(b=(0,l.Z)(p().mark((function e(t,n){var r,i,o,a=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ie.info("handleRoapError: ".concat(this.getCorrelationId()),{file:j,method:this.handleRoapError.name}),!(r=n.data)){e.next=15;break}return e.prev=3,e.next=6,this.postMedia(r);case 6:i=e.sent,Ie.info("Response code: ".concat(i.statusCode),{file:j,method:this.handleRoapError.name}),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),Ie.warn("Failed to communicate ROAP error with Mobius",{file:j,method:this.handleRoapError.name}),o=e.t0,hn((function(e){a.emit(Kv.CALL_ERROR,e),a.submitCallErrorMetric(e)}),je.MEDIA,(function(e){}),this.getCorrelationId(),o,this.handleRoapError.name,j);case 15:this.connected||(Ie.warn("Call failed due to media issue",{file:j,method:"handleRoapError"}),this.sendCallStateMachineEvt({type:"E_UNKNOWN",data:{media:!0}}));case 16:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e,t){return b.apply(this,arguments)})},{key:"handleOutgoingRoapOffer",value:(y=(0,l.Z)(p().mark((function e(t,n){var r,i,o,a=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ie.info("handleOutgoingRoapOffer: ".concat(this.getCorrelationId()),{file:j,method:this.handleOutgoingRoapOffer.name}),null!=(r=n.data)&&r.sdp){e.next=6;break}return Ie.info("Initializing Offer...",{file:j,method:this.handleOutgoingRoapOffer.name}),this.mediaConnection.initiateOffer(),e.abrupt("return");case 6:return e.prev=6,e.next=9,this.postMedia(r);case 9:i=e.sent,Ie.log("handleOutgoingRoapOffer: Response code: ".concat(i.statusCode),{file:j,method:this.handleOutgoingRoapOffer.name}),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(6),Ie.warn("MediaOk failed with Mobius",{file:j,method:this.handleOutgoingRoapOffer.name}),o=e.t0,hn(this.getEmitterCallback(o),je.MEDIA,(function(e){a.connected&&setTimeout((function(){a.sendMediaStateMachineEvt({type:"E_SEND_ROAP_OFFER",data:n.data})}),1e3*e)}),this.getCorrelationId(),o,this.handleOutgoingRoapOffer.name,j);case 18:case"end":return e.stop()}}),e,this,[[6,13]])}))),function(e,t){return y.apply(this,arguments)})},{key:"handleOutgoingRoapAnswer",value:(m=(0,l.Z)(p().mark((function e(t,n){var r,i,o,a=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie.info("handleOutgoingRoapAnswer: ".concat(this.getCorrelationId()),{file:j,method:this.handleOutgoingRoapAnswer.name}),r=n.data,e.prev=2,r.seq=this.seq,e.next=6,this.postMedia(r);case 6:i=e.sent,Ie.log("handleOutgoingRoapAnswer: Response code: ".concat(i.statusCode),{file:j,method:this.handleOutgoingRoapAnswer.name}),this.waitingForOK=!0,e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),Ie.warn("MediaAnswer failed with Mobius",{file:j,method:this.handleOutgoingRoapAnswer.name}),o=e.t0,hn(this.getEmitterCallback(o),je.MEDIA,(function(e){a.connected&&setTimeout((function(){a.sendMediaStateMachineEvt({type:"E_SEND_ROAP_ANSWER",data:n.data})}),1e3*e)}),this.getCorrelationId(),o,this.handleOutgoingRoapAnswer.name,j);case 16:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(e,t){return m.apply(this,arguments)})},{key:"handleIncomingRoapOffer",value:function(e,t){Ie.info("handleIncomingRoapOffer: ".concat(this.getCorrelationId()),{file:j,method:this.handleIncomingRoapOffer.name});var n=t.data;this.remoteRoapMessage=n,this.mediaConnection?this.waitingForOK?(Ie.info("Waiting for Roap OK, buffer the remote offer for later handling",{file:j,method:this.handleIncomingRoapOffer.name}),this.remoteRoapMessage=n):(Ie.info("Handling new offer...",{file:j,method:this.handleIncomingRoapOffer.name}),this.seq=n.seq,this.mediaConnection&&this.mediaConnection.roapMessageReceived(n)):(Ie.info("Media connection is not up, buffer the remote offer for later handling",{file:j,method:this.handleIncomingRoapOffer.name}),this.seq=n.seq,Ie.info("Setting Sequence No: ".concat(this.seq),{file:j,method:this.handleIncomingRoapOffer.name}))}},{key:"handleIncomingRoapAnswer",value:function(e,t){Ie.info("handleIncomingRoapAnswer: ".concat(this.getCorrelationId()),{file:j,method:this.handleIncomingRoapAnswer.name});var n=t.data;this.remoteRoapMessage=n,n.seq=this.seq,this.mediaConnection&&this.mediaConnection.roapMessageReceived(n)}},{key:"initMediaConnection",value:function(e){var t=new bv({skipInactiveTransceivers:!0,iceServers:[],sdpMunging:{convertPort9to0:!0,addContentSlides:!1}},{send:{audio:e.localAudioTrack},receive:{audio:!0,video:!1,screenShareVideo:!1}},e.debugId||"WebexCallSDK-".concat(this.correlationId));this.mediaConnection=t}},{key:"sendCallStateMachineEvt",value:function(e){this.callStateMachine.send(e)}},{key:"sendMediaStateMachineEvt",value:function(e){this.mediaStateMachine.send(e)}},{key:"setDisconnectReason",value:function(){this.connected||this.direction===Pe.OUTBOUND?(this.disconnectReason.code=Ry.NORMAL,this.disconnectReason.cause=xy.NORMAL):(this.disconnectReason.code=Ry.BUSY,this.disconnectReason.cause=xy.BUSY)}},{key:"answer",value:(v=(0,l.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.localAudioTrack.enabled=!0,this.mediaConnection||(this.initMediaConnection(t),this.mediaRoapEventsListener(),this.mediaTrackListener()),"S_SEND_CALL_PROGRESS"===this.callStateMachine.state.value?this.sendCallStateMachineEvt({type:"E_SEND_CALL_CONNECT"}):Ie.warn("Call cannot be answered because the state is : ".concat(this.callStateMachine.state.value),{file:j,method:"answer"});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"dial",value:(h=(0,l.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.localAudioTrack.enabled=!0,this.mediaConnection||(this.initMediaConnection(t),this.mediaRoapEventsListener(),this.mediaTrackListener()),"S_ROAP_IDLE"===this.mediaStateMachine.state.value?this.sendMediaStateMachineEvt({type:"E_SEND_ROAP_OFFER"}):Ie.warn("Call cannot be dialed because the state is already : ".concat(this.mediaStateMachine.state.value),{file:j,method:"dial"});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"patch",value:(d=(0,l.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie.info("Send a PATCH for ".concat(t," to mobius"),{file:j,method:this.patch.name}),e.abrupt("return",this.webex.request({uri:"".concat(this.mobiusUrl).concat(C,"/").concat(this.deviceId,"/").concat(R,"/").concat(this.callId),method:Ae.PATCH,service:Oe.MOBIUS,headers:(n={},(0,f.Z)(n,x,this.webex.internal.device.url),(0,f.Z)(n,M,S),n),body:{device:{deviceId:this.deviceId,correlationId:this.correlationId},callId:this.callId,callState:t,inbandMedia:!1}}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"postSSRequest",value:(u=(0,l.Z)(p().mark((function e(t,n){var r,i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={uri:"".concat(this.mobiusUrl).concat(ct),method:Ae.POST,service:Oe.MOBIUS,headers:(r={},(0,f.Z)(r,x,this.webex.internal.device.url),(0,f.Z)(r,M,S),r),body:{device:{deviceId:this.deviceId,correlationId:this.correlationId},callId:this.callId}},e.t0=n,e.next=e.t0===Yv.HOLD?4:e.t0===Yv.RESUME?6:e.t0===Yv.TRANSFER?8:12;break;case 4:return i.uri="".concat(i.uri,"/").concat(O,"/").concat("hold"),e.abrupt("break",13);case 6:return i.uri="".concat(i.uri,"/").concat(O,"/").concat("resume"),e.abrupt("break",13);case 8:return i.uri="".concat(i.uri,"/").concat("calltransfer","/").concat("commit"),(o=t).destination?(Rr()(i.body,{blindTransferContext:o}),Rr()(i.body,{transferType:Iy.BLIND})):o.transferToCallId&&(Rr()(i.body,{consultTransferContext:o}),Rr()(i.body,{transferType:Iy.CONSULT})),e.abrupt("break",13);case 12:Ie.warn("Unknown type for PUT request: ".concat(n),{file:j,method:this.postSSRequest.name});case 13:return e.abrupt("return",this.webex.request(i));case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"postStatus",value:(c=(0,l.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.webex.request({uri:"".concat(this.mobiusUrl).concat(C,"/").concat(this.deviceId,"/").concat(R,"/").concat(this.callId,"/").concat("status"),method:Ae.POST,service:Oe.MOBIUS,headers:(t={},(0,f.Z)(t,x,this.webex.internal.device.url),(0,f.Z)(t,M,S),t),body:{device:{deviceId:this.deviceId,correlationId:this.correlationId},callId:this.callId}}));case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"completeTransfer",value:(i=(0,l.Z)(p().mark((function e(t,n,r){var i,o,a,s,c=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==Iy.BLIND||!r){e.next=16;break}return Ie.info("Initiating Blind transfer with : ".concat(r),{file:j,method:this.completeTransfer.name}),i={transferorCallId:this.getCallId(),destination:r},e.prev=3,e.next=6,this.postSSRequest(i,Yv.TRANSFER);case 6:this.metricManager.submitCallMetric(vm.CALL,gm.BLIND_TRANSFER,hm.BEHAVIORAL,this.getCallId(),this.getCorrelationId(),void 0),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(3),Ie.warn("Blind Transfer failed for correlationId ".concat(this.getCorrelationId()),{file:j,method:this.completeTransfer.name}),o=e.t0,hn((function(e){c.emit(Kv.TRANSFER_ERROR,e),c.submitCallErrorMetric(e)}),je.CALL_CONTROL,(function(e){}),this.getCorrelationId(),o,this.completeTransfer.name,j);case 14:e.next=33;break;case 16:if(t!==Iy.CONSULT||!n){e.next=32;break}return Ie.info("Initiating Consult transfer between : ".concat(this.callId," and ").concat(n),{file:j,method:this.completeTransfer.name}),a={transferorCallId:this.getCallId(),transferToCallId:n},e.prev=19,e.next=22,this.postSSRequest(a,Yv.TRANSFER);case 22:this.metricManager.submitCallMetric(vm.CALL,gm.CONSULT_TRANSFER,hm.BEHAVIORAL,this.getCallId(),this.getCorrelationId(),void 0),e.next=30;break;case 25:e.prev=25,e.t1=e.catch(19),Ie.warn("Consult Transfer failed for correlationId ".concat(this.getCorrelationId()),{file:j,method:this.completeTransfer.name}),s=e.t1,hn((function(e){c.emit(Kv.TRANSFER_ERROR,e),c.submitCallErrorMetric(e)}),je.CALL_CONTROL,(function(e){}),this.getCorrelationId(),s,this.completeTransfer.name,j);case 30:e.next=33;break;case 32:Ie.warn("Invalid information received, transfer failed for correlationId: ".concat(this.getCorrelationId()),{file:j,method:this.completeTransfer.name});case 33:case"end":return e.stop()}}),e,this,[[3,9],[19,25]])}))),function(e,t,n){return i.apply(this,arguments)})},{key:"getCallStats",value:(r=(0,l.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.mediaConnection.getStats();case 3:t=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Ie.warn("Stats collection failed, using dummy stats",{file:j,method:this.getCallStats.name});case 9:return e.abrupt("return",yn(t));case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(){return r.apply(this,arguments)})},{key:"postMedia",value:(n=(0,l.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie.log("Posting message to mobius",{file:j,method:this.postMedia.name}),e.abrupt("return",this.webex.request({uri:"".concat(this.mobiusUrl).concat(C,"/").concat(this.deviceId,"/").concat(R,"/").concat(this.callId,"/").concat("media"),method:Ae.POST,service:Oe.MOBIUS,headers:(n={},(0,f.Z)(n,x,this.webex.internal.device.url),(0,f.Z)(n,M,S),n),body:{device:{deviceId:this.deviceId,correlationId:this.correlationId},callId:this.callId,localMedia:{roap:t,mediaId:pm()}}}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"mediaRoapEventsListener",value:function(){var e=this;this.mediaConnection.on(Xf.ROAP_MESSAGE_TO_SEND,function(){var t=(0,l.Z)(p().mark((function t(n){var r,i,o,a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Ie.info("ROAP message to send (rcv from MEDIA-SDK) :\n          \n type:  ".concat(null===(r=n.roapMessage)||void 0===r?void 0:r.messageType,", seq: ").concat(n.roapMessage.seq," , version: ").concat(n.roapMessage.version),{}),Ie.info("SDP message to send : \n ".concat(null===(i=n.roapMessage)||void 0===i?void 0:i.sdp),{file:j,method:e.mediaRoapEventsListener.name}),t.t0=n.roapMessage.messageType,t.next=t.t0===ky.OK?5:t.t0===ky.OFFER?8:t.t0===ky.ANSWER?13:t.t0===ky.ERROR?16:t.t0===ky.OFFER_RESPONSE?18:21;break;case 5:return o={received:!1,message:n.roapMessage},e.sendMediaStateMachineEvt({type:"E_ROAP_OK",data:o}),t.abrupt("break",21);case 8:return a=n.roapMessage.sdp.replace(/^m=(video) (?:\d+) /gim,"m=$1 0 "),n.roapMessage.sdp=a,e.localRoapMessage=n.roapMessage,e.sendCallStateMachineEvt({type:"E_SEND_CALL_SETUP",data:n.roapMessage}),t.abrupt("break",21);case 13:return e.localRoapMessage=n.roapMessage,e.sendMediaStateMachineEvt({type:"E_SEND_ROAP_ANSWER",data:n.roapMessage}),t.abrupt("break",21);case 16:return e.sendMediaStateMachineEvt({type:"E_ROAP_ERROR",data:n.roapMessage}),t.abrupt("break",21);case 18:return e.localRoapMessage=n.roapMessage,e.sendMediaStateMachineEvt({type:"E_SEND_ROAP_OFFER",data:n.roapMessage}),t.abrupt("break",21);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"mediaTrackListener",value:function(){var e=this;this.mediaConnection.on(Xf.REMOTE_TRACK_ADDED,(function(t){t.type===tm.MEDIA_TYPE_AUDIO&&e.emit(Kv.REMOTE_MEDIA,t.track)}))}},{key:"delete",value:(t=(0,l.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCallStats();case 2:return n=e.sent,e.abrupt("return",this.webex.request({uri:"".concat(this.mobiusUrl).concat(C,"/").concat(this.deviceId,"/").concat(R,"/").concat(this.callId),method:Ae.DELETE,service:Oe.MOBIUS,headers:(t={},(0,f.Z)(t,x,this.webex.internal.device.url),(0,f.Z)(t,M,S),t),body:{device:{deviceId:this.deviceId,correlationId:this.correlationId},callId:this.callId,metrics:n,causecode:this.disconnectReason.code,cause:this.disconnectReason.cause}}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"submitCallErrorMetric",value:function(e){var t;e.getCallError().errorLayer===je.CALL_CONTROL?this.metricManager.submitCallMetric(vm.CALL_ERROR,this.callStateMachine.state.value.toString(),hm.BEHAVIORAL,this.callId,this.correlationId,e):this.metricManager.submitMediaMetric(vm.MEDIA_ERROR,this.mediaStateMachine.state.value.toString(),hm.BEHAVIORAL,this.callId,this.correlationId,this.localRoapMessage.sdp,null===(t=this.remoteRoapMessage)||void 0===t?void 0:t.sdp,e)}},{key:"handleMidCallEvent",value:function(e){var t=e.eventType,n=e.eventData;switch(t){case Cy.CALL_INFO:Ie.log("Received Midcall CallInfo Event for correlationId : ".concat(this.correlationId),{file:j,method:"handleMidCallEvent"});var r=n;this.startCallerIdResolution(r.callerId);break;case Cy.CALL_STATE:Ie.log("Received Midcall call event for correlationId : ".concat(this.correlationId),{file:j,method:"handleMidCallEvent"});var i=n;switch(i.callState){case Jv.HELD:Ie.log("Call is successfully held : ".concat(this.correlationId),{file:j,method:"handleMidCallEvent"}),this.emit(Kv.HELD,this.correlationId),this.held=!0,this.supplementaryServicesTimer&&(clearTimeout(this.supplementaryServicesTimer),this.supplementaryServicesTimer=void 0);break;case Jv.CONNECTED:Ie.log("Call is successfully resumed : ".concat(this.correlationId),{file:j,method:"handleMidCallEvent"}),this.emit(Kv.RESUMED,this.correlationId),this.held=!1,this.supplementaryServicesTimer&&(clearTimeout(this.supplementaryServicesTimer),this.supplementaryServicesTimer=void 0);break;default:Ie.warn("Unknown Supplementary service state: ".concat(i.callState," for correlationId : ").concat(this.correlationId),{file:j,method:"handleMidCallEvent"})}break;default:Ie.warn("Unknown Midcall type: ".concat(t," for correlationId : ").concat(this.correlationId),{file:j,method:"handleMidCallEvent"})}}},{key:"startCallerIdResolution",value:function(e){this.callerInfo=this.callerId.fetchCallerDetails(e)}},{key:"sendDTMF",value:function(e){this.connected?(Ie.info("Sending DTMF : ".concat(e),{file:j,method:"sendDTMF"}),this.mediaConnection.insertDTMF(e)):Ie.warn("Can't send DTMF as call is not yet connected",{file:j,method:"sendDTMF"})}},{key:"setBroadworksCorrelationInfo",value:function(e){this.broadworksCorrelationInfo=e}},{key:"getBroadworksCorrelationInfo",value:function(){return this.broadworksCorrelationInfo}},{key:"getCallRtpStats",value:function(){return this.getCallStats()}}]),D}(rm);function Dy(e){var t=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=i()(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var Uy=function(e){(0,s.Z)(n,e);var t=Dy(n);function n(e,r){var i;return(0,o.Z)(this,n),i=t.call(this),(0,f.Z)((0,At.Z)(i),"sdkConnector",void 0),(0,f.Z)((0,At.Z)(i),"webex",void 0),(0,f.Z)((0,At.Z)(i),"callCollection",void 0),(0,f.Z)((0,At.Z)(i),"activeMobiusUrl",void 0),(0,f.Z)((0,At.Z)(i),"serviceIndicator",void 0),(0,f.Z)((0,At.Z)(i),"createCall",(function(e,t,n){Ie.log("Creating call object",{});var r=function(e,t,n,r,i,o,a){return new Ny(e,t,n,r,i,o,a)}(i.activeMobiusUrl,i.webex,e,t,n,(function(e){delete i.callCollection[e];var t=xt()(i.getActiveCalls()).length;Ie.info("DELETE:: Deleted corelationId: ".concat(r.getCorrelationId()," from CallManager, Number of call records :- ").concat(t),{}),0===t&&i.emit(Kv.ALL_CALLS_CLEARED)}),i.serviceIndicator);return i.callCollection[r.getCorrelationId()]=r,Ie.log("New call created with correlationId: ".concat(r.getCorrelationId()),{}),Ie.info("ADD:: Added corelationId: ".concat(r.getCorrelationId()," to CallManager , Number of call records now:- ").concat(xt()(i.getActiveCalls()).length),{}),r})),(0,f.Z)((0,At.Z)(i),"endCall",(function(e){var t=i.getCall(e);t&&t.end()})),(0,f.Z)((0,At.Z)(i),"getCall",(function(e){return i.callCollection[e]})),(0,f.Z)((0,At.Z)(i),"getActiveCalls",(function(){return i.callCollection})),i.sdkConnector=g,i.serviceIndicator=r,i.sdkConnector.getWebex()||g.setWebex(e),i.webex=i.sdkConnector.getWebex(),i.callCollection={},i.activeMobiusUrl="",i.listenForWsEvents(),i}return(0,a.Z)(n,[{key:"updateActiveMobius",value:function(e){this.activeMobiusUrl=e}},{key:"listenForWsEvents",value:function(){var e=this;this.sdkConnector.registerListener("event:mobius",function(){var t=(0,l.Z)(p().mark((function t(n){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.dequeueWsEvents(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"dequeueWsEvents",value:function(e){var t=this,n=e,r=n.data,i=r.callId,o=r.correlationId;switch(n.data.eventType){case Ey.CALL_SETUP:if(Ie.log("Received call Setup message for call: ".concat(i),{file:F,method:"dequeueWsEvents"}),n.data.midCallService)return void n.data.midCallService.forEach((function(e){var n=t.getCall(o);n?n.handleMidCallEvent(e):Ie.log("Dropping midcall event of type: ".concat(e.eventType," as it doesn't match with any existing call"),{file:F,method:"dequeueWsEvents"})}));var a,s=xt()(this.callCollection).find((function(e){return t.callCollection[e].getCallId()===i}));s?(Ie.info("Found the call Object with a matching callId: ".concat(i," from our records with correlationId: ").concat(s),{file:F,method:"dequeueWsEvents"}),a=this.getCall(s)):(a=this.createCall({},Pe.INBOUND,n.data.deviceId),Ie.log("New incoming call created with correlationId from Call Setup message: ".concat(a.getCorrelationId()),{file:F,method:"dequeueWsEvents"}),a.setCallId(i),n.data.broadworksCorrelationInfo&&(Ie.log("Found broadworksCorrelationInfo: ".concat(n.data.broadworksCorrelationInfo),{file:F,method:"dequeueWsEvents"}),a.setBroadworksCorrelationInfo(n.data.broadworksCorrelationInfo))),n.data.callerId&&(Ie.info("Processing Caller-Id data",{file:F,method:"dequeueWsEvents"}),a.startCallerIdResolution(n.data.callerId)),this.emit(Kv.INCOMING_CALL,a),a.sendCallStateMachineEvt({type:"E_RECV_CALL_SETUP",data:n.data});break;case Ey.CALL_PROGRESS:Ie.log("Received call progress mobiusEvent for call: ".concat(o),{file:F,method:"dequeueWsEvents"}),this.getCall(o).sendCallStateMachineEvt({type:"E_RECV_CALL_PROGRESS",data:n.data});break;case Ey.CALL_MEDIA:var c;if(Ie.log("Received call media mobiusEvent for call: ".concat(o),{file:F,method:"dequeueWsEvents"}),o)c=this.getCall(o);else{var u=xt()(this.callCollection).find((function(e){return t.callCollection[e].getCallId()===i}));u?(Ie.info("Found the call Object with a matching callId: ".concat(i," from our records with correlationId: ").concat(u),{file:F,method:"dequeueWsEvents"}),c=this.getCall(u)):(c=this.createCall({},Pe.INBOUND,n.data.deviceId),Ie.log("New incoming call created with correlationId from ROAP Message: ".concat(c.getCorrelationId()),{file:F,method:"dequeueWsEvents"}),c.setCallId(i))}if(c){var l,f,d,p,h;Ie.info("SDP from mobius ".concat(null===(l=n.data.message)||void 0===l?void 0:l.sdp),{file:F,method:"dequeueWsEvents"}),Ie.log("ROAP message from mobius with type:  ".concat(null===(f=n.data.message)||void 0===f?void 0:f.messageType,", seq: ").concat(null===(d=n.data.message)||void 0===d?void 0:d.seq," , version: ").concat(null===(p=n.data.message)||void 0===p?void 0:p.version),{file:F,method:"dequeueWsEvents"});var v=null===(h=n.data.message)||void 0===h?void 0:h.messageType;switch(v){case Sy.OFFER:Ie.log("Received OFFER",{file:F,method:"dequeueWsEvents"}),c.sendMediaStateMachineEvt({type:"E_RECV_ROAP_OFFER",data:n.data.message});break;case Sy.ANSWER:Ie.log("Received ANSWER",{file:F,method:"dequeueWsEvents"}),c.sendMediaStateMachineEvt({type:"E_RECV_ROAP_ANSWER",data:n.data.message});break;case Sy.OFFER_REQUEST:Ie.log("Received OFFER_REQUEST",{file:F,method:"dequeueWsEvents"}),c.sendMediaStateMachineEvt({type:"E_RECV_ROAP_OFFER_REQUEST",data:n.data.message});break;case Sy.OK:Ie.log("Received OK",{file:F,method:"dequeueWsEvents"});var m={received:!0,message:n.data.message};c.sendMediaStateMachineEvt({type:"E_ROAP_OK",data:m});break;case Sy.ERROR:Ie.log("Received Error...",{file:F,method:"dequeueWsEvents"});break;default:Ie.log("Unknown Media mobiusEvent: ".concat(v," "),{file:F,method:"dequeueWsEvents"})}}else Ie.log("CorrelationId: ".concat(o," doesn't exist , discarding.."),{file:F,method:"dequeueWsEvents"});break;case Ey.CALL_CONNECTED:Ie.log("Received call connect for call: ".concat(o),{file:F,method:"dequeueWsEvents"}),this.getCall(o).sendCallStateMachineEvt({type:"E_RECV_CALL_CONNECT",data:n.data});break;case Ey.CALL_DISCONNECTED:Ie.log("Received call disconnect for call: ".concat(o),{file:F,method:"dequeueWsEvents"});var g=this.getCall(o);g&&g.sendCallStateMachineEvt({type:"E_RECV_CALL_DISCONNECT"});break;default:Ie.log("Unknown Call Event mobiusEvent: ".concat(n.data.eventType),{file:F,method:"dequeueWsEvents"})}}}]),n}(rm),Zy=function(e,t){return Py||(Py=new Uy(e,t)),Py};function jy(e,t){var n=void 0!==bt()&&e[_t()]||e["@@iterator"];if(!n){if(St()(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Fy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return gt()(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fy(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Fy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var By=function(){function e(t,n,r,i,a){(0,o.Z)(this,e),(0,f.Z)(this,"sdkConnector",void 0),(0,f.Z)(this,"webex",void 0),(0,f.Z)(this,"userId",""),(0,f.Z)(this,"serviceData",void 0),(0,f.Z)(this,"failback429RetryAttempts",void 0),(0,f.Z)(this,"registrationStatus",void 0),(0,f.Z)(this,"failbackTimer",void 0),(0,f.Z)(this,"activeMobiusUrl",void 0),(0,f.Z)(this,"keepaliveTimer",void 0),(0,f.Z)(this,"rehomingIntervalMin",void 0),(0,f.Z)(this,"rehomingIntervalMax",void 0),(0,f.Z)(this,"mutex",void 0),(0,f.Z)(this,"metricManager",void 0),(0,f.Z)(this,"emitter",void 0),(0,f.Z)(this,"callManager",void 0),(0,f.Z)(this,"deviceInfo",{}),(0,f.Z)(this,"primaryMobiusUris",void 0),(0,f.Z)(this,"backupMobiusUris",void 0),(0,f.Z)(this,"registerRetry",!1),(0,f.Z)(this,"reconnectPending",!1),this.sdkConnector=g,this.serviceData=n,this.sdkConnector.getWebex()||g.setWebex(t),this.webex=this.sdkConnector.getWebex(),this.userId=this.webex.internal.device.userId,this.registrationStatus=Le.DEFAULT,this.failback429RetryAttempts=0,Ie.setLogger(a,V),this.rehomingIntervalMin=60,this.rehomingIntervalMax=120,this.mutex=r,this.callManager=Zy(this.webex,n.indicator),this.metricManager=wm(this.webex,n.indicator),this.emitter=i,this.primaryMobiusUris=[],this.backupMobiusUris=[],this.detectNetworkChange("class")}var t,n,r,i,s,c,u,d,h,v,m,y,b,w;return(0,a.Z)(e,[{key:"getActiveMobiusUrl",value:function(){return this.activeMobiusUrl}},{key:"setActiveMobiusUrl",value:function(e){Ie.info("ActiveMobiusUrl: ".concat(e),{method:"setActiveMobiusUrl",file:V}),this.activeMobiusUrl=e,this.callManager.updateActiveMobius(e)}},{key:"setMobiusServers",value:function(e,t){this.primaryMobiusUris=e,this.backupMobiusUris=t}},{key:"postKeepAlive",value:(w=(0,l.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.webex.request({uri:"".concat(t,"/status"),method:Ae.POST,headers:(n={},(0,f.Z)(n,x,this.webex.internal.device.url),(0,f.Z)(n,M,S),n),service:Oe.MOBIUS}));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"deleteRegistration",value:(b=(0,l.Z)(p().mark((function e(t,n,r){var i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.t1="".concat(t).concat(C,"/").concat(n),e.t2=Ae.DELETE,i={},(0,f.Z)(i,x,r),e.t3=f.Z,e.t4=i,e.next=9,this.webex.credentials.getUserToken();case 9:return e.t5=e.sent,(0,e.t3)(e.t4,"Authorization",e.t5),(0,f.Z)(i,"trackingId","".concat("webex-web-client","_").concat(pm())),(0,f.Z)(i,M,S),e.t6=i,e.t7={method:e.t2,headers:e.t6},e.next=17,(0,e.t0)(e.t1,e.t7);case 17:return o=e.sent,e.abrupt("return",o.json());case 19:case"end":return e.stop()}}),e,this)}))),function(e,t,n){return b.apply(this,arguments)})},{key:"postRegistration",value:(y=(0,l.Z)(p().mark((function e(t){var n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={userId:this.userId,clientDeviceUri:this.webex.internal.device.url,serviceData:this.serviceData},e.abrupt("return",this.webex.request({uri:"".concat(t,"device"),method:Ae.POST,headers:(n={},(0,f.Z)(n,x,r.clientDeviceUri),(0,f.Z)(n,M,S),n),body:r,service:Oe.MOBIUS}));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"restorePreviousRegistration",value:(m=(0,l.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,!this.activeMobiusUrl){e.next=5;break}return e.next=4,this.attemptRegistrationWithServers(t,[this.activeMobiusUrl]);case 4:n=e.sent;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"scheduleFailback429Retry",value:(v=(0,l.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.failback429RetryAttempts>=5)){e.next=2;break}return e.abrupt("return");case 2:return this.clearFailbackTimer(),this.failback429RetryAttempts+=1,Ie.log("Received 429 while rehoming, 429 retry count : ".concat(this.failback429RetryAttempts),{file:V,method:Re}),t=this.getRegRetryInterval(this.failback429RetryAttempts),this.startFailbackTimer(t),e.next=9,this.restorePreviousRegistration(Re);case 9:if(e.sent||this.isDeviceRegistered()){e.next=13;break}return e.next=13,this.restartRegistration(Re);case 13:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"getRegRetryInterval",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return 30+Math.pow(2,e)+Math.floor((9001*Math.random()+_e)/_e)}},{key:"startFailoverTimer",value:(h=(0,l.Z)(p().mark((function e(){var t,n,r,i,o,a,s=this,c=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:1,n=c.length>1&&void 0!==c[1]?c[1]:0,r={file:V,method:this.startFailoverTimer.name},i=this.getRegRetryInterval(t),n+i>1200&&(i-=n+i-1200),!(i>30)){e.next=11;break}a=Math.floor(Tr()()/1e3),setTimeout((0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.mutex.runExclusive((0,l.Z)(p().mark((function e(){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.attemptRegistrationWithServers(s.startFailoverTimer.name);case 2:if(o=e.sent,r=Math.floor(Tr()()/1e3),o||s.isDeviceRegistered()){e.next=7;break}return e.next=7,s.startFailoverTimer(t+1,n+(r-a));case 7:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)}))),i*_e),Ie.log("Scheduled retry with primary in ".concat(i," seconds, number of attempts : ").concat(t),r),e.next=20;break;case 11:if(!this.backupMobiusUris.length){e.next=19;break}return Ie.log("Failing over to backup servers.",r),e.next=15,this.attemptRegistrationWithServers(this.startFailoverTimer.name,this.backupMobiusUris);case 15:(o=e.sent)||this.isDeviceRegistered()||(i=this.getRegRetryInterval(),setTimeout((0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.mutex.runExclusive((0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.attemptRegistrationWithServers(s.startFailoverTimer.name,s.backupMobiusUris);case 2:(o=e.sent)||s.isDeviceRegistered()||fn((function(e){s.emitter(Kv.ERROR,void 0,e)}),r);case 4:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e)}))),i*_e),Ie.log("Scheduled retry with backup servers in ".concat(i," seconds."),r)),e.next=20;break;case 19:fn((function(e){s.emitter(Kv.ERROR,void 0,e)}),r);case 20:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"clearFailbackTimer",value:function(){this.failbackTimer&&(clearTimeout(this.failbackTimer),this.failbackTimer=void 0)}},{key:"isFailbackRequired",value:function(){return this.isDeviceRegistered()&&-1===this.primaryMobiusUris.indexOf(this.activeMobiusUrl)}},{key:"getFailbackInterval",value:function(){return Math.floor(Math.random()*(this.rehomingIntervalMax-this.rehomingIntervalMin+1)+this.rehomingIntervalMin)}},{key:"initiateFailback",value:function(){if(this.isFailbackRequired()){if(!this.failbackTimer){this.failback429RetryAttempts=0;var e=this.getFailbackInterval();this.startFailbackTimer(60*e)}}else this.failback429RetryAttempts=0,this.clearFailbackTimer()}},{key:"startFailbackTimer",value:function(e){var t=this;this.failbackTimer=setTimeout((0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.executeFailback());case 1:case"end":return e.stop()}}),e)}))),e*_e),Ie.log("Failback scheduled after ".concat(e," seconds."),{file:V,method:this.startFailbackTimer.name})}},{key:"executeFailback",value:(d=(0,l.Z)(p().mark((function e(){var t=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mutex.runExclusive((0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isFailbackRequired()){e.next=27;break}if(0!==xt()(t.callManager.getActiveCalls()).length){e.next=24;break}return Ie.info("Attempting failback to primary.",{file:V,method:t.executeFailback.name}),e.next=5,t.deregister();case 5:return e.next=7,t.attemptRegistrationWithServers(Se);case 7:if(e.sent||t.isDeviceRegistered()){e.next=22;break}return e.next=11,t.restorePreviousRegistration(Se);case 11:if(!e.sent){e.next=15;break}return t.clearFailbackTimer(),e.abrupt("return");case 15:if(t.isDeviceRegistered()){e.next=20;break}return e.next=18,t.restartRegistration(t.executeFailback.name);case 18:e.next=22;break;case 20:t.failbackTimer=void 0,t.initiateFailback();case 22:e.next=27;break;case 24:Ie.info("Active calls present, deferring failback to next cycle.",{file:V,method:t.executeFailback.name}),t.failbackTimer=void 0,t.initiateFailback();case 27:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"detectNetworkChange",value:(u=(0,l.Z)(p().mark((function e(){var t,n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!1,setInterval((0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.webex.internal.mercury.connected||t||0!==xt()(n.callManager.getActiveCalls()).length||(Ie.warn("Network has flapped, waiting for mercury connection to be up",{file:V,method:n.detectNetworkChange.name}),n.emitter(Kv.UNREGISTERED),n.clearKeepaliveTimer(),t=!0),!t||!n.webex.internal.mercury.connected){e.next=5;break}return e.next=4,n.handleConnectionRestoration(t);case 4:t=e.sent;case 5:case"end":return e.stop()}}),e)}))),2e3);case 3:case"end":return e.stop()}}),e)}))),function(){return u.apply(this,arguments)})},{key:"setIntervalValues",value:function(e){-1!==this.primaryMobiusUris.indexOf(this.activeMobiusUrl)&&(this.rehomingIntervalMin=null!=e&&e.rehomingIntervalMin?e.rehomingIntervalMin:60,this.rehomingIntervalMax=null!=e&&e.rehomingIntervalMax?e.rehomingIntervalMax:120)}},{key:"getDeviceInfo",value:function(){return this.deviceInfo}},{key:"isDeviceRegistered",value:function(){return this.registrationStatus===Le.ACTIVE}},{key:"getStatus",value:function(){return this.registrationStatus}},{key:"setStatus",value:function(e){this.registrationStatus=e}},{key:"restartRegistration",value:(c=(0,l.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearFailbackTimer(),this.failback429RetryAttempts=0,e.next=4,this.attemptRegistrationWithServers(t,this.primaryMobiusUris);case 4:if(e.sent||this.isDeviceRegistered()){e.next=8;break}return e.next=8,this.startFailoverTimer();case 8:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"handleConnectionRestoration",value:(s=(0,l.Z)(p().mark((function e(t){var n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mutex.runExclusive((0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}if(Ie.info("Mercury connection is up again, Re-registering with Mobius",{file:V,method:n.handleConnectionRestoration.name}),n.clearKeepaliveTimer(),!n.isDeviceRegistered()){e.next=6;break}return e.next=6,n.deregister();case 6:if(!n.activeMobiusUrl){e.next=13;break}return e.next=9,n.restorePreviousRegistration(n.handleConnectionRestoration.name);case 9:if(e.sent||n.isDeviceRegistered()){e.next=13;break}return e.next=13,n.restartRegistration(n.handleConnectionRestoration.name);case 13:t=!1;case 14:case"end":return e.stop()}}),e)}))));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"restoreRegistrationCallBack",value:function(){var e=this;return function(){var t=(0,l.Z)(p().mark((function t(n,r){var i,o;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i={file:V,method:r},e.isRegRetry()){t.next=17;break}if(Ie.info("Registration restoration in progress.",i),!e.getExistingDevice(n)){t.next=14;break}return e.setRegRetry(!0),t.next=8,e.deregister();case 8:return t.next=10,e.restorePreviousRegistration(r);case 10:return o=t.sent,e.setRegRetry(!1),e.isDeviceRegistered()&&Ie.info("Registration restored successfully.",i),t.abrupt("return",o);case 14:e.emitter(Kv.UNREGISTERED),t.next=18;break;case 17:e.emitter(Kv.UNREGISTERED);case 18:return t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},{key:"triggerRegistration",value:(i=(0,l.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.primaryMobiusUris.length>0)){e.next=7;break}return e.next=3,this.attemptRegistrationWithServers(this.triggerRegistration.name,this.primaryMobiusUris);case 3:if(t=e.sent,this.isDeviceRegistered()||t){e.next=7;break}return e.next=7,this.startFailoverTimer();case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"attemptRegistrationWithServers",value:(r=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s,c,u,l=this,f=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>1&&void 0!==f[1]?f[1]:this.primaryMobiusUris,r=!1,!this.isDeviceRegistered()){e.next=5;break}return Ie.log("[".concat(t,"] : Device already registered with : ").concat(this.activeMobiusUrl),{file:V,method:this.attemptRegistrationWithServers.name}),e.abrupt("return",r);case 5:i=jy(n),e.prev=6,i.s();case 8:if((o=i.n()).done){e.next=52;break}return a=o.value,e.prev=10,r=!1,this.registrationStatus=Le.DEFAULT,this.emitter(Kv.CONNECTING),Ie.log("[".concat(t,"] : Mobius url to contact: ").concat(a),{file:V,method:this.attemptRegistrationWithServers.name}),e.next=17,this.postRegistration(a);case 17:return c=e.sent,this.deviceInfo=c.body,this.emitter(Kv.REGISTERED,c.body),this.registrationStatus=Le.ACTIVE,this.setActiveMobiusUrl(a),this.setIntervalValues(this.deviceInfo),this.metricManager.setDeviceInfo(this.deviceInfo),this.metricManager.submitRegistrationMetric(vm.REGISTRATION,mm.REGISTER,hm.BEHAVIORAL,void 0),this.startKeepaliveTimer(null===(s=this.deviceInfo.device)||void 0===s?void 0:s.uri,this.deviceInfo.keepaliveInterval),this.initiateFailback(),e.abrupt("break",52);case 30:return e.prev=30,e.t0=e.catch(10),u=e.t0,e.next=35,dn(u,(function(e,t){t?l.emitter(Kv.ERROR,void 0,e):l.emitter(Kv.UNREGISTERED),l.sendMetric(vm.REGISTRATION_ERROR,mm.REGISTER,hm.BEHAVIORAL,e)}),{method:this.attemptRegistrationWithServers.name,file:V},this.restoreRegistrationCallBack());case 35:if(r=e.sent,this.registrationStatus!==Le.ACTIVE){e.next=39;break}return Ie.info("[".concat(t,"] : Device is already restored, active mobius url: ").concat(this.activeMobiusUrl),{file:V,method:this.attemptRegistrationWithServers.name}),e.abrupt("break",52);case 39:if(!r){e.next=43;break}return e.abrupt("break",52);case 43:if(t!==this.executeFailback.name){e.next=50;break}if(u.statusCode!==Be.TOO_MANY_REQUESTS){e.next=50;break}return e.next=48,this.scheduleFailback429Retry();case 48:return r=!0,e.abrupt("break",52);case 50:e.next=8;break;case 52:e.next=57;break;case 54:e.prev=54,e.t1=e.catch(6),i.e(e.t1);case 57:return e.prev=57,i.f(),e.finish(57);case 60:return e.abrupt("return",r);case 61:case"end":return e.stop()}}),e,this,[[6,54,57,60],[10,30]])}))),function(e){return r.apply(this,arguments)})},{key:"startKeepaliveTimer",value:function(e,t){var n=this,r=0;this.clearKeepaliveTimer(),this.keepaliveTimer=setInterval((0,l.Z)(p().mark((function t(){var i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={file:V,method:n.startKeepaliveTimer.name},t.next=3,n.mutex.runExclusive((0,l.Z)(p().mark((function t(){var o,a,s;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.isDeviceRegistered()&&r<5)){t.next=29;break}return t.prev=1,t.next=4,n.postKeepAlive(e);case 4:o=t.sent,Ie.info("Sent Keepalive, status: ".concat(o.statusCode),i),r>0&&n.emitter(Kv.RECONNECTED),r=0,t.next=29;break;case 10:return t.prev=10,t.t0=t.catch(1),r+=1,a=t.t0,Ie.warn("Keep-alive missed ".concat(r," times. Status -> ").concat(a.statusCode," "),i),t.next=17,dn(a,(function(e,t){t&&n.emitter(Kv.ERROR,void 0,e),n.sendMetric(vm.REGISTRATION,mm.KEEPALIVE_FAILURE,hm.BEHAVIORAL,e)}),{method:n.startKeepaliveTimer.name,file:V});case 17:if(!((s=t.sent)||r>=5)){t.next=28;break}if(n.setStatus(Le.DEFAULT),n.clearKeepaliveTimer(),n.clearFailbackTimer(),n.emitter(Kv.UNREGISTERED),s){t.next=26;break}return t.next=26,n.reconnectOnFailure(n.startKeepaliveTimer.name);case 26:t.next=29;break;case 28:n.emitter(Kv.RECONNECTING);case 29:case"end":return t.stop()}}),t,null,[[1,10]])}))));case 3:case"end":return t.stop()}}),t)}))),1e3*t)}},{key:"clearKeepaliveTimer",value:function(){this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=void 0)}},{key:"isReconnectPending",value:function(){return this.reconnectPending}},{key:"deregister",value:(n=(0,l.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.deleteRegistration(this.activeMobiusUrl,null===(t=this.deviceInfo.device)||void 0===t?void 0:t.deviceId,null===(n=this.deviceInfo.device)||void 0===n?void 0:n.clientDeviceUri);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Ie.warn("Delete failed with Mobius",{});case 8:this.clearKeepaliveTimer(),this.setStatus(Le.DEFAULT);case 10:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return n.apply(this,arguments)})},{key:"sendMetric",value:function(e,t,n,r){this.metricManager.submitRegistrationMetric(e,t,n,r)}},{key:"isRegRetry",value:function(){return this.registerRetry}},{key:"setRegRetry",value:function(e){this.registerRetry=e}},{key:"getExistingDevice",value:function(e){if(e.devices&&e.devices.length>0){this.deviceInfo={userId:e.userId,device:e.devices[0],keepaliveInterval:30,rehomingIntervalMax:120,rehomingIntervalMin:60};var t="".concat(C,"/").concat(e.devices[0].deviceId),n=e.devices[0].uri.replace(t,"");return this.setActiveMobiusUrl(n),this.registrationStatus=Le.ACTIVE,!0}return!1}},{key:"reconnectOnFailure",value:(t=(0,l.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reconnectPending=!1,this.isDeviceRegistered()){e.next=13;break}if(0!==xt()(this.callManager.getActiveCalls()).length){e.next=11;break}return e.next=5,this.restorePreviousRegistration(t);case 5:if(e.sent||this.isDeviceRegistered()){e.next=9;break}return e.next=9,this.restartRegistration(t);case 9:e.next=13;break;case 11:this.reconnectPending=!0,Ie.info("Active call(s) present, deferred reconnect till call cleanup.",{file:V,method:this.reconnectOnFailure.name});case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}();function Vy(e){var t=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=i()(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var qy=function(t){(0,s.Z)(h,t);var n,r,i,c,u,d=Vy(h);function h(t,n){var r,i,a,s,c;(0,o.Z)(this,h),c=d.call(this),(0,f.Z)((0,At.Z)(c),"sdkConnector",void 0),(0,f.Z)((0,At.Z)(c),"webex",void 0),(0,f.Z)((0,At.Z)(c),"deviceInfo",{}),(0,f.Z)((0,At.Z)(c),"mutex",void 0),(0,f.Z)((0,At.Z)(c),"registration",void 0),(0,f.Z)((0,At.Z)(c),"callManager",void 0),(0,f.Z)((0,At.Z)(c),"sdkConfig",void 0),(0,f.Z)((0,At.Z)(c),"primaryMobiusUris",void 0),(0,f.Z)((0,At.Z)(c),"backupMobiusUris",void 0),(0,f.Z)((0,At.Z)(c),"mediaEngine",void 0),(0,f.Z)((0,At.Z)(c),"callingClientEmitter",(function(e,t,n){switch(e){case Kv.REGISTERED:t&&c.emit(e,t);break;case Kv.UNREGISTERED:case Kv.RECONNECTED:case Kv.RECONNECTING:c.emit(e);break;case Kv.ERROR:n&&c.emit(e,n)}})),(0,f.Z)((0,At.Z)(c),"callsClearedHandler",(0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.registration.isDeviceRegistered()){e.next=3;break}return e.next=3,c.mutex.runExclusive((0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.registration.isReconnectPending()){e.next=4;break}return Ie.log("All calls cleared, reconnecting",{file:Z,method:xe}),e.next=4,c.registration.reconnectOnFailure(xe);case 4:case"end":return e.stop()}}),e)}))));case 3:case"end":return e.stop()}}),e)})))),(0,f.Z)((0,At.Z)(c),"getRegistrationStatus",(function(){return c.registration.getStatus()})),(0,f.Z)((0,At.Z)(c),"getDeviceId",(function(){var e;return null===(e=c.registration.getDeviceInfo().device)||void 0===e?void 0:e.deviceId})),(0,f.Z)((0,At.Z)(c),"getCall",(function(e){return c.callManager.getCall(e)})),(0,f.Z)((0,At.Z)(c),"makeCall",(function(e){var t;if(e){var n=e.address.match(N);if(n&&n[0].length===e.address.length){var r,i=e.address.replace(/[^[*+]\d#]/gi,"").replace(/\s+/gi,""),o={type:e.type,address:"tel:".concat(i)};t=c.callManager.createCall(o,Pe.OUTBOUND,null===(r=c.registration.getDeviceInfo().device)||void 0===r?void 0:r.deviceId),Ie.log("New call created, callId: ".concat(t.getCallId()),{})}else{Ie.warn("Invalid phone number detected",{});var a=new Ft("An invalid phone number was detected. Check the number and try again.",{},Fe.CALL_ERROR,Le.ACTIVE);c.emit(Kv.ERROR,a)}return t}})),c.sdkConnector=g,c.sdkConnector.getWebex()||g.setWebex(t),c.mutex=new zv,c.webex=c.sdkConnector.getWebex(),c.sdkConfig=n;var u=null!==(r=c.sdkConfig)&&void 0!==r&&null!==(i=r.serviceData)&&void 0!==i&&i.indicator?c.sdkConfig.serviceData:{indicator:Ue.CALLING,domain:""},v=null!==(a=c.sdkConfig)&&void 0!==a&&null!==(s=a.logger)&&void 0!==s&&s.level?c.sdkConfig.logger.level:w.ERROR;return c.validateServiceData(u),c.registration=function(e,t,n,r,i){return new By(e,t,n,r,i)}(c.webex,u,c.mutex,c.callingClientEmitter,v),c.callManager=Zy(c.webex,u.indicator),c.mediaEngine=e,c.primaryMobiusUris=[],c.backupMobiusUris=[],c.registration.setStatus(Le.DEFAULT),c.registerSessionsListener(),Ie.setLogger(v,Z),c.incomingCallListener(),c.registerCallsClearedListener(),c}return(0,a.Z)(h,[{key:"getActiveMobiusUrl",value:function(){return this.registration.getActiveMobiusUrl()}},{key:"validateServiceData",value:function(e){if(!this.isValidServiceIndicator(e.indicator))throw new Error("Invalid service indicator, Allowed values are: ".concat(Bn()(Ue)));if(!this.isValidServiceDomain(e))throw new Error("Invalid service domain.")}},{key:"isValidServiceIndicator",value:function(e){return Bn()(Ue).some((function(t){return t===e}))}},{key:"isValidServiceDomain",value:function(e){var t=e.domain;return t?/^[a-z0-9]+([-.]{1}[a-z0-9]+)*\.[a-z]{2,6}$/i.test(t):e.indicator===Ue.CALLING}},{key:"incomingCallListener",value:function(){var e=this,t={file:Z,method:this.incomingCallListener.name};Ie.log("Listening for incoming calls... ",t),this.callManager.on(Kv.INCOMING_CALL,(function(t){e.emit(Kv.INCOMING_CALL,t)}))}},{key:"getClientRegionInfo",value:(u=(0,l.Z)(p().mark((function e(){var t,n,r,i,o,a,s=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.prev=1,e.next=4,this.webex.request({uri:"".concat(this.webex.internal.services._serviceUrls.mobius).concat(P).concat("myip"),method:Ae.GET,headers:(n={},(0,f.Z)(n,x,this.webex.internal.device.url),(0,f.Z)(n,M,S),n),service:Oe.MOBIUS});case 4:return r=e.sent,i=r.body.ipv4,e.next=8,this.webex.request({uri:"".concat("https://ds.ciscospark.com/v1/region","/").concat(i),method:Ae.GET,addAuthHeader:!1,headers:(0,f.Z)({},M,null)});case 8:o=e.sent,a=o.body,t.clientRegion=null!=a&&a.clientRegion?a.clientRegion:"",t.countryCode=null!=a&&a.countryCode?a.countryCode:"",e.next=19;break;case 14:e.prev=14,e.t0=e.catch(1),dn(e.t0,(function(e){s.registration.sendMetric(vm.REGISTRATION_ERROR,mm.REGISTER,hm.BEHAVIORAL,e),s.emit(Kv.ERROR,e)}),{method:Ee,file:Z}),t.clientRegion="",t.countryCode="";case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(){return u.apply(this,arguments)})},{key:"getMobiusServers",value:(c=(0,l.Z)(p().mark((function e(){var t,n,r,i,o,a,s,c,u,l,d,h,v,m,g,y,b=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!1,null===(t=this.sdkConfig)||void 0===t||null===(n=t.discovery)||void 0===n||!n.country||null===(r=this.sdkConfig)||void 0===r||null===(i=r.discovery)||void 0===i||!i.region){e.next=7;break}Ie.info("Updating region and country from the SDK config",{file:Z,method:Ee}),a=null===(c=this.sdkConfig)||void 0===c||null===(u=c.discovery)||void 0===u?void 0:u.region,s=null===(l=this.sdkConfig)||void 0===l||null===(d=l.discovery)||void 0===d?void 0:d.country,e.next=13;break;case 7:return Ie.info("Updating region and country through Region discovery",{file:Z,method:Ee}),e.next=10,this.getClientRegionInfo();case 10:h=e.sent,a=h.clientRegion,s=h.countryCode;case 13:if(!a||!s){e.next=33;break}return Ie.log("Found Region: ".concat(a," and country: ").concat(s,", going to fetch Mobius server"),""),e.prev=15,e.next=18,this.webex.request({uri:"".concat(this.webex.internal.services._serviceUrls.mobius).concat(P,"?regionCode=").concat(a,"&countryCode=").concat(s),method:Ae.GET,headers:(v={},(0,f.Z)(v,x,this.webex.internal.device.url),(0,f.Z)(v,M,S),v),service:Oe.MOBIUS});case 18:m=e.sent,Ie.log("Mobius Server found for the region",""),g=m.body,y=cn(g,this.webex.internal.services._serviceUrls.mobius),this.primaryMobiusUris=y.primary,this.backupMobiusUris=y.backup,Ie.info("Final list of Mobius Servers, primary: ".concat(y.primary," and backup: ").concat(y.backup),""),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(15),dn(e.t0,(function(e){b.registration.sendMetric(vm.REGISTRATION_ERROR,mm.REGISTER,hm.BEHAVIORAL,e),b.emit(Kv.ERROR,e)}),{method:Ee,file:Z}),o=!0;case 31:e.next=34;break;case 33:o=!0;case 34:o&&(Ie.warn("Error in finding Mobius Servers. Will use the default URL.",""),this.primaryMobiusUris.push("".concat(this.webex.internal.services._serviceUrls.mobius).concat(P)));case 35:case"end":return e.stop()}}),e,this,[[15,27]])}))),function(){return c.apply(this,arguments)})},{key:"sendKeepAlive",value:(i=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=null===(n=t.device)||void 0===n?void 0:n.deviceId,o=t.keepaliveInterval,a=null===(r=t.device)||void 0===r?void 0:r.uri,s={file:Z,method:"startKeepaliveTimer"},this.registration.clearKeepaliveTimer(),Ie.info("Fetched details :-> deviceId: ".concat(i,", interval :-> ").concat(o,", url: ").concat(a),s),this.registration.isDeviceRegistered()?this.registration.startKeepaliveTimer(a,o):Ie.warn("Device is not active, exiting.",s);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"registerCallsClearedListener",value:function(){var e={file:Z,method:this.registerCallsClearedListener.name};Ie.log("Registering listener for all calls cleared event",e),this.callManager.on(Kv.ALL_CALLS_CLEARED,this.callsClearedHandler)}},{key:"register",value:(r=(0,l.Z)(p().mark((function e(){var t=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mutex.runExclusive((0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.registration.setStatus(Le.DEFAULT),t.emit(Kv.CONNECTING),e.next=4,t.getMobiusServers();case 4:return t.registration.setMobiusServers(t.primaryMobiusUris,t.backupMobiusUris),e.next=7,t.registration.triggerRegistration();case 7:case"end":return e.stop()}}),e)}))));case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getLoggingLevel",value:function(){return Ie.getLogLevel()}},{key:"setActiveMobiusUrl",value:function(e){this.callManager.updateActiveMobius(e),this.registration.setActiveMobiusUrl(e)}},{key:"deregister",value:(n=(0,l.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.registration.deregister();case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getSDKConnector",value:function(){return this.sdkConnector}},{key:"registerSessionsListener",value:function(){var e=this;this.sdkConnector.registerListener(em.CALL_SESSION_EVENT_INCLUSIVE,function(){var t=(0,l.Z)(p().mark((function t(n){var r,i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||!n.data.userSessions.userSessions){t.next=7;break}if(1!==(r=null==n?void 0:n.data.userSessions.userSessions).length){t.next=5;break}if(r[0].sessionType===Qv.WEBEX_CALLING){t.next=5;break}return t.abrupt("return");case 5:for(i=0;i<r.length;i+=1)r[i].sessionType!==Qv.WEBEX_CALLING&&r.splice(i,1);e.emit(Kv.USER_SESSION_INFO,n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}]),h}(rm),Wy="CallHistory";function zy(e){var t=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=i()(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var Gy=function(e){(0,s.Z)(r,e);var t,n=zy(r);function r(e,t){var i;return(0,o.Z)(this,r),i=n.call(this),(0,f.Z)((0,At.Z)(i),"sdkConnector",void 0),(0,f.Z)((0,At.Z)(i),"webex",void 0),(0,f.Z)((0,At.Z)(i),"janusUrl",""),(0,f.Z)((0,At.Z)(i),"fromDate",""),(0,f.Z)((0,At.Z)(i),"loggerContext",{file:Wy,method:"getCallHistoryData"}),(0,f.Z)((0,At.Z)(i),"userSessions",void 0),i.sdkConnector=g,i.sdkConnector.getWebex()||g.setWebex(e),i.webex=i.sdkConnector.getWebex(),i.janusUrl=i.webex.internal.services._serviceUrls.janus,i.registerSessionsListener(),Ie.setLogger(t.level,Wy),i}return(0,a.Z)(r,[{key:"getCallHistoryData",value:(t=(0,l.Z)(p().mark((function e(){var t,n,r,i,o,a,s,c,u,l,f,d,h=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:10,n=h.length>1&&void 0!==h[1]?h[1]:50,r=h.length>2&&void 0!==h[2]?h[2]:Ne.DEFAULT,i=h.length>3&&void 0!==h[3]?h[3]:De.DEFAULT,(o=new Date).setDate(o.getDate()-t),this.fromDate=o.toISOString(),a=Bn()(De).includes(i)?i:De.DEFAULT,s=Bn()(Ne).includes(r)?r:Ne.DEFAULT,Ie.log("Janus API URL ".concat(this.janusUrl),this.loggerContext),Ie.info("Call history from date : ".concat(this.fromDate),this.loggerContext),Ie.info("Call history sort type : ".concat(s),this.loggerContext),Ie.info("Call history sortby type : ".concat(a),this.loggerContext),c="".concat(this.janusUrl,"/").concat("history","/").concat(rt).concat("?from","=").concat(this.fromDate,"&limit=").concat(n,"&includeNewSessionTypes=true&sort=").concat(s),e.prev=14,e.next=17,this.webex.request({uri:"".concat(c),method:Ae.GET,service:Oe.JANUS});case 17:return u=e.sent,this.userSessions=u.body,a===De.START_TIME&&(s===Ne.DESC?this.userSessions[rt].sort((function(e,t){return new Date(t[a]).getTime()-new Date(e[a]).getTime()})):s===Ne.ASC&&this.userSessions[rt].sort((function(e,t){return new Date(e[a]).getTime()-new Date(t[a]).getTime()}))),l={statusCode:this.userSessions[Xe],data:{userSessions:this.userSessions[rt]},message:Qe},e.abrupt("return",l);case 24:return e.prev=24,e.t0=e.catch(14),f=e.t0,d=mn(f,this.loggerContext),e.abrupt("return",d);case 29:case"end":return e.stop()}}),e,this,[[14,24]])}))),function(){return t.apply(this,arguments)})},{key:"getSDKConnector",value:function(){return this.sdkConnector}},{key:"registerSessionsListener",value:function(){var e=this;this.sdkConnector.registerListener(em.CALL_SESSION_EVENT_INCLUSIVE,function(){var t=(0,l.Z)(p().mark((function t(n){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n&&n.data.userSessions.userSessions&&e.emit(Kv.CALL_HISTORY_USER_SESSION_INFO,n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}]),r}(rm),Hy=function(){function e(t,n){(0,o.Z)(this,e),(0,f.Z)(this,"xsiEndpoint",void 0),(0,f.Z)(this,"userId",void 0),(0,f.Z)(this,"context",void 0),(0,f.Z)(this,"sdkConnector",void 0),(0,f.Z)(this,"xsiVoiceMessageURI",void 0),(0,f.Z)(this,"webex",void 0),this.sdkConnector=g,this.sdkConnector.getWebex()||g.setWebex(t),this.context=Math.random().toString(36).substring(2),this.webex=this.sdkConnector.getWebex(),this.userId=this.webex.internal.device.userId,Ie.setLogger(n.level,on)}var t,n,r,i,s,c,u;return(0,a.Z)(e,[{key:"init",value:function(){var e={file:on,method:"init"};return Ie.info("Initializing Webex calling voicemail connector",e),this.setXsiVoiceMessageURI()}},{key:"getSDKConnector",value:function(){return this.sdkConnector}},{key:"setXsiVoiceMessageURI",value:(u=(0,l.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:on,method:"setXsiVoiceMessageURI"},e.next=3,bn(this.webex,n,jt.WXC);case 3:return this.xsiEndpoint=e.sent,Ie.info("XsiEndpoint is ".concat(this.xsiEndpoint),n),this.userId&&(this.xsiVoiceMessageURI="".concat(this.xsiEndpoint,"/").concat(qt,"/").concat(nt,"/").concat(this.userId,"/").concat(rn),t={statusCode:et,data:{},message:Qe}),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getVoicemailList",value:(c=(0,l.Z)(p().mark((function e(t,n,r,i){var o,a,s,c,u,l,f,d,h,v,m,g,y,b,w,_,E,S,R;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o={file:on,method:"getVoicemailList"},Ie.info("Offset: ".concat(t," Offset limit: ").concat(n," Sort type:").concat(r),o),!i){e.next=19;break}return s="".concat(this.xsiVoiceMessageURI).concat($t),c=Bn()(Ne).includes(r)?r:Ne.DEFAULT,e.prev=5,e.next=8,this.webex.request({uri:"".concat(s),method:Ae.GET});case 8:d=e.sent,h=d.body,a=0===xt()(null==h||null===(u=h.VoiceMessagingMessages)||void 0===u?void 0:u.messageInfoList).length?[]:St()(null==h||null===(l=h.VoiceMessagingMessages)||void 0===l||null===(f=l.messageInfoList)||void 0===f?void 0:f.messageInfo)?_n(a=null==h||null===(g=h.VoiceMessagingMessages)||void 0===g||null===(y=g.messageInfoList)||void 0===y?void 0:y.messageInfo,c):Array(null==h||null===(v=h.VoiceMessagingMessages)||void 0===v||null===(m=v.messageInfoList)||void 0===m?void 0:m.messageInfo),In(this.context,a),e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(5),b=e.t0,w=mn(b,o),e.abrupt("return",w);case 19:return _=On(this.context,t,n,o),E=_.messages,S=_.moreVMAvailable,R={statusCode:S?et:204,data:{voicemailList:E},message:S?Qe:en},e.abrupt("return",R);case 22:case"end":return e.stop()}}),e,this,[[5,14]])}))),function(e,t,n,r){return c.apply(this,arguments)})},{key:"getVoicemailContent",value:(s=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s,c,u,l,f,d,h,v;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:on,method:"getVoicemailContent"},e.prev=1,o="".concat(this.xsiEndpoint).concat(t),e.next=5,this.webex.request({uri:"".concat(o),method:Ae.GET});case 5:return a=e.sent,s=new DOMParser,c=s.parseFromString(a[Ye].response,ot),u=c.getElementsByTagName(Jt)[0],l=null===(r=u.childNodes[1])||void 0===r?void 0:r.textContent,f=null===(i=u.childNodes[2])||void 0===i?void 0:i.textContent,Ie.info("Media type is  ".concat(l),n),d={statusCode:a.statusCode,data:{voicemailContent:{type:l,content:f}},message:Qe},e.abrupt("return",d);case 16:return e.prev=16,e.t0=e.catch(1),h=e.t0,v=mn(h,n),Ie.info("Voice mail content error is ".concat(v),n),e.abrupt("return",v);case 22:case"end":return e.stop()}}),e,this,[[1,16]])}))),function(e){return s.apply(this,arguments)})},{key:"voicemailMarkAsRead",value:(i=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:on,method:"voicemailMarkAsRead"},e.prev=1,r="".concat(this.xsiEndpoint).concat(t,"/").concat(Kt),e.next=5,this.webex.request({uri:r,method:Ae.PUT});case 5:return i=e.sent,o={statusCode:i.statusCode,data:{},message:Qe},e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(1),a=e.t0,s=mn(a,n),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return i.apply(this,arguments)})},{key:"voicemailMarkAsUnread",value:(r=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:on,method:"voicemailMarkAsUnread"},e.prev=1,r="".concat(this.xsiEndpoint).concat(t,"/").concat(Yt),e.next=5,this.webex.request({uri:r,method:Ae.PUT});case 5:return i=e.sent,o={statusCode:i.statusCode,data:{},message:Qe},e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(1),a=e.t0,s=mn(a,n),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return r.apply(this,arguments)})},{key:"deleteVoicemail",value:(n=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:on,method:"deleteVoicemail"},e.prev=1,r="".concat(this.xsiEndpoint).concat(t),e.next=5,this.webex.request({uri:r,method:Ae.DELETE});case 5:return i=e.sent,o={statusCode:i.statusCode,data:{},message:Qe},e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(1),a=e.t0,s=mn(a,n),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return n.apply(this,arguments)})},{key:"getVMTranscript",value:(t=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s,c,u,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:on,method:"getVMTranscript"},e.prev=1,r="".concat(this.xsiEndpoint).concat(t,"/").concat("transcript"),e.next=5,this.webex.request({uri:r,method:Ae.GET});case 5:return i=e.sent,o=new DOMParser,a=o.parseFromString(i[Ye].response,ot),s=a.getElementsByTagName("content")[0],c={statusCode:i.statusCode,data:{voicemailTranscript:s.textContent},message:Qe},e.abrupt("return",c);case 13:return e.prev=13,e.t0=e.catch(1),u=e.t0,l=mn(u,n),e.abrupt("return",l);case 18:case"end":return e.stop()}}),e,this,[[1,13]])}))),function(e){return t.apply(this,arguments)})},{key:"resolveContact",value:function(e){return function(e){return Tn.apply(this,arguments)}(e)}}]),e}(),$y=function(){function e(t,n){(0,o.Z)(this,e),(0,f.Z)(this,"bwtoken",void 0),(0,f.Z)(this,"userId",void 0),(0,f.Z)(this,"xsiAccessToken",void 0),(0,f.Z)(this,"xsiEndpoint",void 0),(0,f.Z)(this,"context",void 0),(0,f.Z)(this,"sdkConnector",void 0),(0,f.Z)(this,"webex",void 0),(0,f.Z)(this,"xsiVoiceMessageURI",void 0),this.sdkConnector=g,this.sdkConnector.getWebex()||g.setWebex(t),this.webex=this.sdkConnector.getWebex(),this.context=Math.random().toString(36).substring(2),Ie.setLogger(n.level,Vt)}var t,n,r,i,s,c,u,d,h;return(0,a.Z)(e,[{key:"init",value:function(){var e={file:Vt,method:"init"};return Ie.info("Initializing Broadworks voicemail connector",e),this.setXsiVoiceMessageURI()}},{key:"getSDKConnector",value:function(){return this.sdkConnector}},{key:"getUserId",value:(h=(0,l.Z)(p().mark((function e(){var t,n,r,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={file:Vt,method:"getUserId"},e.prev=1,e.next=4,this.getBwToken();case 4:if(!(this.bwtoken&&this.bwtoken.split(".").length>1)){e.next=8;break}return n=Buffer.from(this.bwtoken.split(".")[1],"base64").toString("binary"),this.userId=JSON.parse(n).sub,e.abrupt("return",this.userId);case 8:throw r=Be.UNAUTHORIZED,new Error("".concat(r));case 12:return e.prev=12,e.t0=e.catch(1),i={statusCode:e.t0 instanceof Error?Number(e.t0.message):""},e.abrupt("return",mn(i,t));case 16:case"end":return e.stop()}}),e,this,[[1,12]])}))),function(){return h.apply(this,arguments)})},{key:"getBwToken",value:(d=(0,l.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.webex.request({uri:"".concat(this.webex.internal.services._serviceUrls.broadworksIdpProxy).concat("/idp/bwtoken/fetch"),method:Ae.GET});case 3:t=e.sent,n=t.body,this.bwtoken=n.token[We],e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),Ie.info("Broadworks token exception ".concat(e.t0),{});case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return d.apply(this,arguments)})},{key:"setXsiVoiceMessageURI",value:(u=(0,l.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={file:Vt,method:"setXsiVoiceMessageURI"},e.next=3,this.getUserId();case 3:return n=e.sent,e.next=6,bn(this.webex,t,jt.BWRKS);case 6:return this.xsiEndpoint=e.sent,this.xsiAccessToken="".concat(We," ").concat(this.bwtoken),Ie.info("XsiEndpoint is ".concat(this.xsiEndpoint),t),n&&"object"!==(0,Gn.Z)(n)&&(this.xsiVoiceMessageURI="".concat(this.xsiEndpoint,"/").concat(qt,"/").concat(nt,"/").concat(n,"/").concat(rn),n={statusCode:et,data:{},message:Qe}),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"getVoicemailList",value:(c=(0,l.Z)(p().mark((function e(t,n,r,i){var o,a,s,c,u,l,f,d,h,v,m,g,y,b,w,_,E,S,R;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o={file:Vt,method:"getVoicemailList"},Ie.info("Offset: ".concat(t," Offset limit: ").concat(n," Sort type:").concat(r),o),a="".concat(this.xsiVoiceMessageURI).concat($t),c=Bn()(Ne).includes(r)?r:Ne.DEFAULT,!i){e.next=23;break}return e.prev=5,e.next=8,fetch("".concat(a),{method:Ae.GET,headers:{Authorization:this.xsiAccessToken}});case 8:if((d=e.sent).ok){e.next=11;break}throw new Error("".concat(d.status));case 11:return e.next=13,d.json();case 13:h=e.sent,s=0===xt()(null==h||null===(u=h.VoiceMessagingMessages)||void 0===u?void 0:u.messageInfoList).length?[]:St()(null==h||null===(l=h.VoiceMessagingMessages)||void 0===l||null===(f=l.messageInfoList)||void 0===f?void 0:f.messageInfo)?_n(s=null==h||null===(g=h.VoiceMessagingMessages)||void 0===g||null===(y=g.messageInfoList)||void 0===y?void 0:y.messageInfo,c):Array(null==h||null===(v=h.VoiceMessagingMessages)||void 0===v||null===(m=v.messageInfoList)||void 0===m?void 0:m.messageInfo),In(this.context,s),e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(5),b={statusCode:e.t0 instanceof Error?Number(e.t0.message):""},w=mn(b,o),e.abrupt("return",w);case 23:return _=On(this.context,t,n,o),E=_.messages,S=_.moreVMAvailable,R={statusCode:S?et:204,data:{voicemailList:E},message:S?Qe:en},e.abrupt("return",R);case 26:case"end":return e.stop()}}),e,this,[[5,18]])}))),function(e,t,n,r){return c.apply(this,arguments)})},{key:"getVoicemailContent",value:(s=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s,c,u,l,f,d,h,v,m;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:Vt,method:"getVoicemailContent"},e.prev=1,o="".concat(this.xsiEndpoint).concat(t),e.next=5,fetch("".concat(o),{method:"GET",headers:{Authorization:this.xsiAccessToken}});case 5:if((a=e.sent).ok){e.next=8;break}throw new Error("".concat(a.status));case 8:return e.next=10,a.text();case 10:return s=e.sent,c=new DOMParser,u=c.parseFromString(s,ot),l=u.getElementsByTagName(Jt)[0],f=null===(r=l.childNodes[1])||void 0===r?void 0:r.textContent,d=null===(i=l.childNodes[2])||void 0===i?void 0:i.textContent,Ie.info("Media type is  ".concat(f),n),h={statusCode:null==a?void 0:a.status,data:{voicemailContent:{type:f,content:d}},message:Qe},e.abrupt("return",h);case 21:return e.prev=21,e.t0=e.catch(1),v={statusCode:e.t0 instanceof Error?Number(e.t0.message):""},m=mn(v,n),e.abrupt("return",m);case 26:case"end":return e.stop()}}),e,this,[[1,21]])}))),function(e){return s.apply(this,arguments)})},{key:"voicemailMarkAsRead",value:(i=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:Vt,method:"voicemailMarkAsRead"},e.prev=1,r="".concat(this.xsiEndpoint).concat(t,"/").concat(Kt),e.next=5,fetch(r,{method:Ae.PUT,headers:{Authorization:this.xsiAccessToken}});case 5:if((i=e.sent).ok){e.next=8;break}throw new Error("".concat(i.status));case 8:return o={statusCode:i.status,data:{},message:Qe},e.abrupt("return",o);case 12:return e.prev=12,e.t0=e.catch(1),a={statusCode:e.t0 instanceof Error?Number(e.t0.message):""},s=mn(a,n),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this,[[1,12]])}))),function(e){return i.apply(this,arguments)})},{key:"voicemailMarkAsUnread",value:(r=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:Vt,method:"voicemailMarkAsUnread"},e.prev=1,r="".concat(this.xsiEndpoint).concat(t,"/").concat(Yt),e.next=5,fetch(r,{method:Ae.PUT,headers:{Authorization:this.xsiAccessToken}});case 5:if((i=e.sent).ok){e.next=8;break}throw new Error("".concat(i.status));case 8:return o={statusCode:i.status,data:{},message:Qe},e.abrupt("return",o);case 12:return e.prev=12,e.t0=e.catch(1),a={statusCode:e.t0 instanceof Error?Number(e.t0.message):""},s=mn(a,n),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this,[[1,12]])}))),function(e){return r.apply(this,arguments)})},{key:"deleteVoicemail",value:(n=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:Vt,method:"deleteVoicemail"},e.prev=1,r="".concat(this.xsiEndpoint).concat(t),e.next=5,fetch(r,{method:Ae.DELETE,headers:{Authorization:this.xsiAccessToken}});case 5:if((i=e.sent).ok){e.next=8;break}throw new Error("".concat(i.status));case 8:return o={statusCode:i.status,data:{},message:Qe},e.abrupt("return",o);case 12:return e.prev=12,e.t0=e.catch(1),a=e.t0,s=mn(a,n),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this,[[1,12]])}))),function(e){return n.apply(this,arguments)})},{key:"getVMTranscript",value:(t=(0,l.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie.info("Message Id: ".concat(t),{}),e.abrupt("return",It().resolve(null));case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"resolveContact",value:function(e){return Ie.info("Calling Party Info: ".concat(e),{}),It().resolve(null)}}]),e}(),Ky=function(){function e(t,n){(0,o.Z)(this,e),(0,f.Z)(this,"vgEndpoint",void 0),(0,f.Z)(this,"userId",void 0),(0,f.Z)(this,"orgId",void 0),(0,f.Z)(this,"sdkConnector",void 0),(0,f.Z)(this,"webex",void 0),(0,f.Z)(this,"vgVoiceMessageURI",void 0),this.sdkConnector=g,this.sdkConnector.getWebex()||g.setWebex(t),this.webex=this.sdkConnector.getWebex(),this.userId=this.webex.internal.device.userId,this.orgId=this.webex.internal.device.orgId,Ie.setLogger(n.level,tn)}var t,n,r,i,s,c,u,d;return(0,a.Z)(e,[{key:"init",value:function(){var e={file:tn,method:"init"};return Ie.info("Initializing UCM calling voicemail connector",e),this.setUcmVoiceMessageBaseURI()}},{key:"getSDKConnector",value:function(){return this.sdkConnector}},{key:"setUcmVoiceMessageBaseURI",value:function(){return this.vgEndpoint=function(e,t){try{if(t&&t===jt.UCM)return e.internal.services._serviceUrls["ucmgmt-gateway"];throw new Error("Calling backend is not identified, exiting....")}catch(e){return e}}(this.webex,jt.UCM),this.vgVoiceMessageURI="".concat(this.vgEndpoint,"/").concat("vmgateway","/").concat("api/v1","/").concat("users","/").concat(this.userId,"/"),this.vgVoiceMessageURI}},{key:"getVoicemailList",value:(d=(0,l.Z)(p().mark((function e(t,n,r){var i,o,a,s,c,u,l,f,d=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={file:tn,method:"getVoicemailList"},Ie.info("Offset: ".concat(t," Offset limit: ").concat(n," Sort type:").concat(r),i),o="".concat(this.vgVoiceMessageURI).concat(nn,"/").concat("?offset","=").concat(t).concat("&limit","=").concat(n).concat("&sortOrder","=").concat(r),e.prev=3,e.next=6,this.webex.request({uri:"".concat(o),method:Ae.GET,headers:{orgId:this.orgId}});case 6:return a=e.sent,s=a.body,c=[],s.Message.forEach((function(e){var t={},n={},r={};n.$=e.Duration,t.duration=n,r.$=Number(e.ArrivalTime),t.time=r,(n={$:""}).$=e.MsgId,t.messageId=n,"true"===e.Read&&(t.read={});var i=e.CallerId,o={};(n={$:""}).$=i.CallerName,o.name=n,(n={$:""}).$=d.userId,o.userId=n,(n={$:""}).$=i.CallerNumber,o.address=n,t.callingPartyInfo=o,c.push(t)})),u={statusCode:a.statusCode,data:{voicemailList:c},message:Qe},e.abrupt("return",u);case 15:return e.prev=15,e.t0=e.catch(3),l=e.t0,f=mn(l,i),e.abrupt("return",f);case 20:case"end":return e.stop()}}),e,this,[[3,15]])}))),function(e,t,n){return d.apply(this,arguments)})},{key:"getVoicemailContent",value:(u=(0,l.Z)(p().mark((function e(t){var n,r,i,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:tn,method:"getVoicemailContent"},e.prev=1,e.next=4,this.getVoicemailContentUcm(t);case 4:return r=e.sent,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(1),i=e.t0,o=mn(i,n),Ie.info("Voice mail content error is ".concat(o),n),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e){return u.apply(this,arguments)})},{key:"getVoicemailContentUcm",value:(c=(0,l.Z)(p().mark((function e(t){var n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(It())((function(e,r){var i="".concat(n.vgVoiceMessageURI).concat(nn,"/").concat(t,"/").concat(ze),o="".concat(n.webex.internal.services._serviceUrls.mercuryApi);n.returnUcmPromise(i,o).then((function(t){200===t.statusCode?e(t):202===t.statusCode?n.sdkConnector.registerListener("event:ucm.voicemail_download_complete",function(){var t=(0,l.Z)(p().mark((function t(i){var a,s,c,u;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=i,c="".concat(n.vgVoiceMessageURI).concat(nn,"/").concat(null==s||null===(a=s.data)||void 0===a?void 0:a.messageId,"/").concat(ze),t.next=4,n.returnUcmPromise(c,o);case 4:200===(u=t.sent).statusCode?(n.sdkConnector.unregisterListener("event:ucm.voicemail_download_complete"),e(u)):(n.sdkConnector.unregisterListener("event:ucm.voicemail_download_complete"),r(u));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()):r(t)})).catch((function(e){r(e)}))})));case 1:case"end":return e.stop()}}),e)}))),function(e){return c.apply(this,arguments)})},{key:"returnUcmPromise",value:(s=(0,l.Z)(p().mark((function e(t,n){var r,i,o,a,s,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.webex.request({uri:"".concat(t),method:Ae.GET,headers:{orgId:this.orgId,deviceUrl:this.webex.internal.device.url,mercuryHostname:n}});case 2:return r=e.sent,i=null==r?void 0:r.body,o=r.headers,a=null==o?void 0:o.mediatype,s=i,c={statusCode:r.statusCode,data:{voicemailContent:{type:a,content:s}},message:Qe},e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"voicemailMarkAsRead",value:(i=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:tn,method:"voicemailMarkAsRead"},e.prev=1,r="".concat(this.vgVoiceMessageURI).concat(nn,"/").concat(t),e.next=5,this.webex.request({uri:r,method:Ae.PUT,headers:{orgId:this.orgId},body:{read:"true"}});case 5:return i=e.sent,o={statusCode:i.statusCode,data:{},message:Qe},e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(1),a=e.t0,s=mn(a,n),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return i.apply(this,arguments)})},{key:"voicemailMarkAsUnread",value:(r=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:tn,method:"voicemailMarkAsUnread"},e.prev=1,r="".concat(this.vgVoiceMessageURI).concat(nn,"/").concat(t),e.next=5,this.webex.request({uri:r,method:Ae.PUT,headers:{orgId:this.orgId},body:{read:"false"}});case 5:return i=e.sent,o={statusCode:i.statusCode,data:{},message:Qe},e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(1),a=e.t0,s=mn(a,n),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return r.apply(this,arguments)})},{key:"deleteVoicemail",value:(n=(0,l.Z)(p().mark((function e(t){var n,r,i,o,a,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={file:tn,method:"deleteVoicemail"},e.prev=1,r="".concat(this.vgVoiceMessageURI).concat(nn,"/").concat(t),e.next=5,this.webex.request({uri:r,method:Ae.DELETE,headers:{orgId:this.orgId}});case 5:return i=e.sent,o={statusCode:i.statusCode,data:{},message:Qe},e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(1),a=e.t0,s=mn(a,n),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return n.apply(this,arguments)})},{key:"getVMTranscript",value:(t=(0,l.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie.info("Message Id: ".concat(t),{}),e.abrupt("return",It().resolve(null));case 2:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"resolveContact",value:function(e){return Ie.info("Calling Party Info: ".concat(e),{}),It().resolve(null)}}]),e}();function Yy(e){var t=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=i()(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var Jy=function(e){(0,s.Z)(h,e);var t,n,r,i,c,u,d=Yy(h);function h(e,t){var n;return(0,o.Z)(this,h),n=d.call(this),(0,f.Z)((0,At.Z)(n),"logger",void 0),(0,f.Z)((0,At.Z)(n),"sdkConnector",void 0),(0,f.Z)((0,At.Z)(n),"webex",void 0),(0,f.Z)((0,At.Z)(n),"callingBackend",void 0),(0,f.Z)((0,At.Z)(n),"backendConnector",void 0),n.logger=t,n.sdkConnector=g,n.sdkConnector.getWebex()||g.setWebex(e),n.webex=n.sdkConnector.getWebex(),n.callingBackend=function(e){var t,n=e.internal.device.features.entitlement.models;if(e.internal.device.callingBehavior===Qt)for(var r=0;r<n.length;r+=1){if(n[r][it][$e]===zt||n[r][it][$e]===Ht){t=jt.WXC;break}if(n[r][it][$e]===Gt){t=jt.BWRKS;break}}else t=e.internal.device.callingBehavior===Xt?jt.UCM:jt.INVALID;return t}(n.webex),n.initializeBackendConnector(),Ie.setLogger(t.level,"VoicemailClient"),n}return(0,a.Z)(h,[{key:"init",value:function(){return this.backendConnector.init()}},{key:"initializeBackendConnector",value:function(){switch(this.callingBackend){case jt.WXC:this.backendConnector=new Hy(this.webex,this.logger);break;case jt.BWRKS:this.backendConnector=new $y(this.webex,this.logger);break;case jt.UCM:this.backendConnector=new Ky(this.webex,this.logger);break;default:throw new Error("Calling backend is not identified, exiting....")}}},{key:"getVoicemailList",value:(u=(0,l.Z)(p().mark((function e(t,n,r,i){var o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backendConnector.getVoicemailList(t,n,r,i);case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,n,r){return u.apply(this,arguments)})},{key:"getVoicemailContent",value:(c=(0,l.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backendConnector.getVoicemailContent(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"voicemailMarkAsRead",value:(i=(0,l.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backendConnector.voicemailMarkAsRead(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"voicemailMarkAsUnread",value:(r=(0,l.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backendConnector.voicemailMarkAsUnread(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"deleteVoicemail",value:(n=(0,l.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backendConnector.deleteVoicemail(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"getVMTranscript",value:(t=(0,l.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.backendConnector.getVMTranscript(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"resolveContact",value:function(e){return this.backendConnector.resolveContact(e)}},{key:"getSDKConnector",value:function(){return this.sdkConnector}}]),h}(rm);const Xy={createClient:function(e,t){return new qy(e,t)},createCallHistoryClient:function(e,t){return new Gy(e,t)},createVoicemailClient:function(e,t){return new Jy(e,t)},createContactsClient:function(e,t){return new jn(e,t)},createCallSettingsClient:function(e,t){return new Mn(e,t)},Logger:Ie};function Qy(e){var t=function(){if("undefined"==typeof Reflect||!i())return!1;if(i().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var o=(0,u.Z)(this).constructor;n=i()(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}__webpack_require__(25026),__webpack_require__(21408);var eb=__webpack_require__(82492),tb=__webpack_require__(21105).ZP,nb=__webpack_require__(90579),rb=tb.extend({webex:!0}),ib="Calling",ob={file:ib,method:"calling.register"},ab=function(e){(0,s.Z)(n,e);var t=Qy(n);function n(e){var r,i=e.webex,a=e.webexConfig,s=e.callingConfig;return(0,o.Z)(this,n),(r=t.call(this)).callingConfig=s,r.log=Xy.Logger,r.log.setLogger(s.logger.level,ib),i?(r.webex=i,r.initializeClients()):(a.config=eb({},nb,a.config),r.webex=new rb(a),r.webex.once("ready",(function(){r.emit("calling:ready")}))),r}return(0,a.Z)(n,[{key:"register",value:function(){var e=this;return this.webex.internal.device.register().then((function(){return e.log.info("Authentication: webex.internal.device.register successful",ob),e.webex.internal.mercury.connect().then((function(){e.log.info("Authentication: webex.internal.mercury.connect successful",ob);try{e.initializeClients()}catch(t){e.log.warn("Error occurred while initializing clients ".concat(t),ob)}})).catch((function(t){e.log.warn("Error occurred during mercury.connect() ".concat(t),ob)}))})).catch((function(t){e.log.warn("Error occurred during device.register() ".concat(t),ob)}))}},{key:"initializeClients",value:function(){var e=this.callingConfig,t=e.clientConfig,n=e.callingClientConfig,r=e.logger;this.callingClient=t.calling?Xy.createClient(this.webex,n):void 0,this.contactClient=t.contact?Xy.createContactsClient(this.webex,r):void 0,this.callHistoryClient=t.callHistory?Xy.createCallHistoryClient(this.webex,r):void 0,this.voicemailClient=t.voicemail?Xy.createVoicemailClient(this.webex,r):void 0,this.callSettingsClient=t.callSettings?Xy.createCallSettingsClient(this.webex,r):void 0}}]),n}(Hv());const sb=ab})(),__webpack_exports__=__webpack_exports__.default,__webpack_exports__})()));
//# sourceMappingURL=calling.min.js.map