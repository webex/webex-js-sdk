<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Webex JavaScript SDK Sample: Meetings Plugin</title>
    <link rel="stylesheet"
      href="https://unpkg.com/@momentum-ui/core@19.15.3/css/momentum-ui.min.css"
      />
    <style>
      body {
        background-color: #eee;
        padding: 1rem;
        font-family: "CiscoSansTT Regular","Helvetica Neue",Helvetica,Arial,sans-serif;
      }

      section {
        background-color: #fff;
        padding: 1rem;
       
      }

      .flex {
        display: flex;
        flex-wrap: wrap;
      }
      .flex-center {
        justify-content: center;
      }

      label {
        font-size: 0.8rem;
        margin-left: 0.2rem;
      }

      label:first-child {
        margin-left: 0;
      }

      pre {
        padding: 0.5rem;
        background-color: #eee;
        white-space: pre-wrap;
      }

      video {
        height: 30vh;
        width: 32vw;
      }

      #source-devices-controls select {
        width: 300px;
        margin-right: 5px;
      }

      .device-type-label {
        width: 125px;
        display: inline-block;
      }

      code {
        color: #f35d5d;
        background: #eaeaea;
        font-family: monospace;
        font-size: 1.2em;
      }

      form {
        margin-top: .5rem;
      }

      .context-info {
        width: 170px;
        display: inline-block;
      }
      
      .collapsible {
        display: flex;
        width: 100%;
        padding: .625rem;
        
        font-size: 1.3rem;
        font-weight: 400;
        cursor: pointer;
        margin-top: 1rem;
        border: none;
        background-color: #fff;
      }

      .active, .collapsible:hover {
        background-color: #ccc;
      }

      .content.hide {
        display: none;
        overflow: hidden;
      }

      .content.open{
        display: block;
      }

      .md-alert-banner--success {
        background-color: green;
      }

    </style>
  </head>
  <body>
    <main>
      <div class="row">
        <div class="columns large-6">
          large 6
        </div>
        <div class="columns large-6">
          large 6
        </div>
      </div>

      <div class="row">
        <section class="">
          <h1>Meetings Plugin</h1>
          <p>This is the meetings plugin sample for the Webex JS SDK.</p>
          <hr>
          <p class="md-mv">Each of the following sections within this sample
            perform specific actions that map to methods in the meetings plugin of
            the Webex JS SDK.</p>
  
          <div class="md-alert-banner md-alert-banner--info">
            <div class="md-alert-banner__text">
              To find the exact logic performed by an action, please inspect the
              browser's developer console.
            </div>
          </div>
        </section>
        <br>
  
        <section>
          <h2>Meeting Steps</h2>
          <ol class="md-mv">
            <li>Authenticate and register.</li>
            <li>Create a meeting.</li>
            <li>Get local media streams.</li>
            <li>Join the meeting.</li>
            <li>Add local media streams to the meeting.</li>
          </ol>
          <div class="md-alert-banner md-alert-banner--info">
            <div class="md-alert-banner__text">
              Listen for <code>media:ready</code> event within your code to know
              when to set the srcObjects.
            </div>
          </div>
        </section>
  
  
  
      </div>
      <!-- AUTH -->
      <button type="button" class="collapsible">Authentication</button>
      <div class="content open">
        <p class="md-mb">Before using the meetings functionality of the Webex
          JS SDK, the Webex JS SDK must be initialized using a valid token.</p>
        
          <section class="row">
          <div class="columns large-6">
            large 4
          </div>
          <div class="columns large-6">
            large 4
          </div>
          
          <div class="md-alert-banner md-alert-banner--info">
            <div class="md-alert-banner__text">
              You may get test access token from our <a
                href="https://developer.webex.com/docs/api/getting-started"
                target="_blank">developer portal</a>.
            </div>
          </div>

          <p class="md-mv">Once the JS SDK is has authenticated your token, it
            then must be registered as a device. Once these two steps have been
            performed, the meetings functionality of the Webex JS SDK should be
            available for usage.</p>

          <!-- CREDENTIALS -->
          <form id="credentials">
            <fieldset>
              <legend>Credentials</legend>
              <div class="md-mb">
                <input id="access-token" name="accessToken" placeholder="Access
                  Token" value="" type="text" class="md-input" />
              </div>
              <button id="access-token-save" type="button" onclick="initWebex()"
                class="md-button">Webex.init()</button>
              <div class="md-alert-banner md-mt md-alert-banner--warning">
                <div class="md-alert-banner__text" id="access-token-status">
                  No saved token!
                </div>
              </div>
            </fieldset>
          </form>

          <!-- REGISTRATION -->
          <form id="registration">
            <fieldset>
              <legend>Registration</legend>
              <button id="registration-register" type="button"
                onclick="register()" disabled class="md-button">webex.meetings.register()</button>
              <button id="registration-unregister" type="button"
                onclick="unregister()" disabled class="md-button">webex.meetings.unregister()</button>
              <div class="md-alert-banner md-mt md-alert-banner--warning">
                <div class="md-alert-banner__text" id="registration-status">Not
                  Registered!</div>
              </div>
            </fieldset>
          </form>
        </section>
      </div>


      <!-- MANAGEMENT -->
      <button type="button" class="collapsible">Management</button>
      <section class="content open">

        <div class="row">
          <div class="columns large-4">
            <!-- CREATE MEETINGS -->
            <form id="meetings-create">
              <fieldset>
                <legend>Create a Meeting</legend>
                <div class="md-input-group columns md-mb">
                  <input id="create-meeting-destination"
                    name="createMeetingDestination" placeholder="Destination"
                    value="" type="text" required class="md-input" />
                  <p class="md-input__help-text" id="helpText">
                    Common supported destination types: user email, person ID,
                    room ID, SIP URI
                  </p>
                </div>
                <button id="create-meeting-action" type="button"
                  onclick="createMeeting()" class="md-button">webex.meetings.create()</button>
              </fieldset>
            </form>
          </div>
          <div class="columns large-4">
            <!-- ACTIVE MEETINGS -->
            <form id="meetings-list-group">
              <fieldset>
                <legend>Active Meetings List</legend>
                <div class="md-alert-banner md-alert-banner--info md-mb">
                  <div class="md-alert-banner__text">
                    <div id="meetings-list">There are currently no meetings.</div>
                  </div>
                </div>
                <div class="md-mv">
                  <input id="meetings-join-pin" name="createMeetingHostpin"
                    placeholder="PIN" value="" type="text" />
                  <input id="meetings-join-moderator" type="checkbox" />
                  <label>Join as Moderator</label>
                </div>

                <button id="meetings-list-collect" type="button"
                  onclick="collectMeetings()" class="md-button">webex.meetings.syncMeetings()</button>
              </fieldset>
            </form>

          </div>
          <div class="columns large-4">

            <!-- CURRENT MEETINGS -->
            <form id="current-meeting">
              <fieldset>
                <legend>Current Joined Meeting</legend>
                <div class="md-alert-banner md-alert-banner--info md-mb">
                  <div class="md-alert-banner__text"
                    id="meetings-current-details">
                    Not currently in a meeting
                  </div>
                </div>
                <button id="sd-get-media-streams" type="button" class="md-button"
                onclick="getMediaStreams()">meeting.getMediaStreams()</button>
                <button id="meetings-add-media" type="button"
                  onclick="addMedia()" class="md-button">meeting.addMedia()</button>
                <button id="meetings-leave" type="button"
                  onclick="leaveMeeting()" class="md-button">meeting.leave()</button>
              </fieldset>
            </form>

          </div>
        </div>



        <fieldset id="incomingsection" style="visibility: hidden;">
          <legend>Incoming Call</legend>
          <button onclick="answerMeeting(this)" id="answer">answer</button>
          <button onclick="rejectMeeting(this)" id="reject">reject</button>
        </fieldset>
      </section>


      <!-- CONTROLS -->
      <button type="button" class="collapsible">Controls</button>
      <section class="content">
        <p>Once in a meeting utilize these controls to manipulate the meeting.</p>
        
          <div class="md-alert-banner md-alert-banner--info md-mb">
            <div class="md-alert-banner__text">
              Please note that you must be a meeting moderator in order to lock or
              record a meeting.
            </div>
          </div>

        <form id="general-controls">
          <fieldset>
            <legend>General Controls</legend>
            <div class="md-mv flex">
              <button id="gc-lock" type="button" onclick="lockMeeting()">meeting.lockMeeting()</button>
              <button id="gc-unlock" type="button" onclick="unlockMeeting()">meeting.unlockMeeting()</button>
              <label id="gc-lock-status"></label>
            </div>
            <div class="md-pv">
              <button id="gc-start-recording" type="button"
                onclick="startRecording()">meeting.startRecording()</button>
              <button id="gc-pause-recording" type="button"
                onclick="pauseRecording()">meeting.pauseRecording()</button>
              <button id="gc-resume-recording" type="button"
                onclick="resumeRecording()">meeting.resumeRecording()</button>
              <button id="gc-stop-recording" type="button"
                onclick="stopRecording()">meeting.stopRecording()</button>
              <label id="gc-recording-status"></label>
            </div>
            <div class="md-pv">
              <input id="gc-dtmf-tones" name="dtmfTones" placeholder="Enter DTMF
                tones" value="" type="text" />
              <button id="gc-dtmf-tones-send" type="button"
                onclick="sendDtmfTones()">meeting.sendDTMF()</button>
              <label id="gc-dtmf-status"></label>
            </div>
          </fieldset>
        </form>


        <hr>

        <form id="source-devices-controls">
          <fieldset>
            <legend>Get Media Devices</legend>
            <div class="md-pv">
              <label>Get media streams with default devices</label>
             
              <button id="sd-get-media-devices" type="button"
                onclick="clearMediaDeviceList(); getMediaDevices()">meeting.getDevices()</button>
              <p>
                The first time the browser loads the webpage, media access
                permissions have not been set.
                Therefore, using a valid <code>meeting</code> object, invoke the
                <code>getMediaStreams</code> function.
                This will ask the user for permission to their microphone and
                camera. Once permission has been granted, invoke the <code>getDevices</code>
                function to get a list of media devices.
              </p>
              <p>
                After the browser gets the user's permission to access their
                media devices, on subsequent web page loads any calls to <code>getDevices</code>
                will work as expected.
              </p>
              <div class="md-pv">
                <label>
                  <input type="checkbox" name="ts-media-direction"
                    value="receiveAudio" checked="">receiveAudio
                </label>
                <label>
                  <input type="checkbox" name="ts-media-direction"
                    value="receiveVideo" checked="">receiveVideo
                </label>
                <label>
                  <input type="checkbox" name="ts-media-direction"
                    value="receiveShare" checked="">receiveShare
                </label>
                <label>
                  <input type="checkbox" name="ts-media-direction"
                    value="sendAudio" checked="">sendAudio
                </label>
                <label>
                  <input type="checkbox" name="ts-media-direction"
                    value="sendVideo" checked="">sendVideo
                </label>
                <label>
                  <input type="checkbox" name="ts-media-direction"
                    value="sendShare" id="sendShareToggle">sendShare
                </label>
              </div>
            </div>
          </fieldset>

          <hr>
          <fieldset>
            <legend>Source Devices</legend>
            <div class="md-pv">
              <label class="context-info">Set Audio Input Device</label>
              <select id="sd-audio-input-devices"></select>
              <button type="button" onclick="setAudioInputDevice()">meeting.updateAudio()</button>
              <div class="md-alert-banner md-mt md-alert-banner--info">
                <div id="sd-audio-input-device-status" class="md-alert-banner__text"></div>
              </div>

            </div>
            <div class="md-pv">
              <label class="context-info">Set Audio Output Device</label>
              <select id="sd-audio-output-devices"></select>
              <button type="button" onclick="setAudioOutputDevice()">HTMLAudioElement.setSinkId()</button>
              <div class="md-alert-banner md-mt md-alert-banner--info">
                <div id="sd-audio-output-device-status"
                  class="md-alert-banner__text"></div>
              </div>
            </div>
            <div class="md-pv">
              <label class="context-info">Set Video Input Device</label>
              <select id="sd-video-input-devices"></select>
              <button type="button" onclick="setVideoInputDevice()">meeting.updateVideo()</button>
              <label id="sd-video-input-device-status"></label>
            </div>
          </fieldset>
        </form>

        <br />

        <!-- SOURCE CONTROLS-->
        <form id="toggling-sources-controls">
          <fieldset>
            <legend>Toggling Sources</legend>
            <div class="md-pb">
              <label class="context-info">Toggle Sending Audio</label>
              <button id="ts-toggle-audio" type="button"
                onclick="toggleSendAudio()">meeting.unmuteAudio() /
                meeting.muteAudio()</button>
              <label id="ts-toggle-audio-status"></label>
            </div>
            <div class="md-pb">
              <label class="context-info">Toggle Sending Video</label>
              <button id="ts-toggle-video" type="button"
                onclick="toggleSendVideo()">meeting.unmuteVideo() /
                meeting.muteVideo()</button>
              <label id="ts-toggle-video-status"></label>
            </div>
            <div class="md-pb">
              <label class="context-info">Sending Screenshare</label>
              <button id="ts-start-screenshare" type="button"
                onclick="startScreenShare()">meeting.shareScreen()</button>
              <button id="ts-stop-screenshare" type="button"
                onclick="stopScreenShare()">meeting.stopShare()</button>
              <label id="ts-screenshare-status"></label>
            </div>
            <div class="md-pb">
              
              <select id="ts-sending-qualities-list">
                <option value="LOW">LOW</option>
                <option value="MEDIUM">MEDIUM</option>
                <option value="HIGH">HIGH</option>
              </select>
              <button id="ts-set-local-meeting-quality" type="button"
                onclick="setLocalMeetingQuality()">meeting.setLocalVideoQuality()</button>
              <button id="ts-set-remote-meeting-quality" type="button"
                onclick="setRemoteMeetingQuality()">meeting.setRemoteQualityLevel()</button>
              <button id="ts-set-all-meeting-quality" type="button"
                onclick="setMeetingQuality()">meeting.setMeetingQuality()</button>
              <label id="ts-sending-quality-status"></label>
            </div>
          </fieldset>
        </form>

        <br />

        <form id="participants">
          <fieldset>
            <legend>Participants</legend>
            <div>
              <input id="add-participant-query" name="participantQuery"
                placeholder="Email Address" value="" type="email" />
              <button id="add-participant" onclick="inviteMember(this)"
                type="button">meeting.invite()</button>
            </div>
            <div class="particpantList"></div>
            <br />
            <button id="updated-participants" onclick="viewParticipants()"
              type="button">meeting.members.membersCollection</button>
          </fieldset>
        </form>
      </section>

      <button type="button" class="collapsible">Devices</button>
      <section class="content">
        <h2>Meetings Devices</h2>
        <form id="current-device">
          <fieldset>
            <legend>Current Device</legend>
            <dl>
              <dt>Device details:</dt>
              <dd><span id="current-device-details">No Device Selected</span></dd>
            </dl>
            <div class="md-mv">
            </div>
            <h4>Device Pairing</h4>
            <button id="device-request-pin" class="md-button" type="button" onclick="webex.devicemanager.requestPin(currentDevice)">requestPin()</button>
            <input id="device-pin-query" name="devicePinQuery" placeholder="PIN" value="" type="number" />
            <div class="flex">
              <button id="device-request-pair" class="md-button" type="button" onclick="deviceRequestPair()">pair()</button>
              <button id="device-request-unpair" class="md-button" type="button" onclick="deviceRequestUnpair()">unpair()</button>
            </div>

            <label id="device-pair-state">Not paired</label>
           

            <div class="md-mv">
              <h4>Device Audio State</h4>
              <pre id="current-device-audio-state">No Device Selected</pre>
            </div>


            <h4>Device Controls</h4>
            <div class="flex md-mv">
              <button id="device-get-audio-state" class="md-button"
                type="button" onclick="deviceGetAudioState()">getAudioState()</button>
              <button id="device-volume-up" class="md-button" type="button"
                onclick="webex.devicemanager.increaseVolume()">increaseVolume()</button>
              <button id="device-volume-down" class="md-button" type="button"
                onclick="webex.devicemanager.decreaseVolume()">decreaseVolume()</button>
              <button id="device-volume-mute" class="md-button" type="button"
                onclick="webex.devicemanager.mute()">mute()</button>
              <button id="device-volume-mute" class="md-button" type="button"
                onclick="webex.devicemanager.unmute()">unmute()</button>
            </div>


            <div class="md-alert-banner md-mt md-alert-banner--info">
              <div class="md-alert-banner__text">
                After making changes to a paired device's audio state, the
                <code>getAudioState()</code> must be called manually in order to
                view the most up-to-date device audio state details.
              </div>
            </div>

          </fieldset>
        </form>


        <div class="row">
          <form id="devices-list" class="columns large-4">
            <fieldset>
              <legend>Current Devices List</legend>
              <div id="devices-list-items">There are currently no meetings devices
                to display</div>
              <br />
              <button id="devices-list-refresh" type="button"
                onclick="refreshDevicesList()">webex.devicemanager.refresh()</button>
            </fieldset>
          </form>
  
  
          <form id="find-devices" class="columns large-4">
            <fieldset>
              <legend>Find Devices</legend>
              <div>
                <input id="find-devices-query" name="searchQuery"
                  placeholder="Device ID" value="" type="text" />
                <button id="find-devices-action" type="button"
                  onclick="searchForDevices()">webex.devicemanager.search()</button>
                <label id="find-devices-status"></label>
              </div>
              <br />
              <div id="find-devices-list"></div>
            </fieldset>
          </form>
  
      
  
          <form id="pmr-management" class="columns large-4">
            <fieldset>
              <legend>Personal Meeting Room</legend>
              <input id="pmr-id" name="PmrId" placeholder="PMR ID" value=""
                type="text" />
              <input id="pmr-pin" name="prmPin" placeholder="PMR PIN" value=""
                type="text" />
              <button id="pmr-claim" type="button"
                onclick="claimPersonalMeetingRoom()">webex.meetings.personalMeetingRoom.claim()</button>
              <pre id="pmr-details"></pre>
            </fieldset>
          </form>
        </div>
      </section>

      <button type="button" class="collapsible">Streams</button>
      <section class="content">
        <h2>Meeting Streams</h2>
        <form id="streams">
          <div class="flex">
            <fieldset>
              <legend>Local Video</legend>
              <video id="local-video" muted="true" autoplay playsinline></video>
            </fieldset>

            <fieldset>
              <legend>Local Screenshare</legend>
              <video id="local-screenshare" autoplay playsinline></video>
            </fieldset>

            <fieldset>
              <legend>Remote Video</legend>
              <video id="remote-video" autoplay playsinline></video>
              <audio id="remote-audio" autoplay></audio>
            </fieldset>

            <fieldset>
              <legend>Remote Screenshare</legend>
              <video id="remote-screenshare" autoplay playsinline></video>
            </fieldset>
          </div>
        </form>
      </section>

    </main>
    <script src="/webex.min.js"></script>
    <!-- app.js is your application code -->
    <script src="app.js"></script>

  </body>
</html>
