<!DOCTYPE html>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>
<html>
  <head>
    <style>
      .button {
        background-color: blue;
        border: none;
        color: white;
        padding: 4px 8px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
      }
    </style>
    <title>Sample: Meetings</title>
  </head>

  <body>
    <h1>Meetings</h1>
    <p>This is the start of the "kitchen sink" demo app for plugin-meetings.</p>

    <h2>Connect first:</h2>
    <form id="credentials">
      <fieldset>
        <legend>Credentials</legend>
        <input id="access-token" name="accessToken" placeholder="Your access token" value="" type="text" />
        <input id="connect" title="connect" type="submit" value="connect" />
        <p id="connection-status">disconnected</p>
      </fieldset>
    </form>
    <form id="disconnect">
      <fieldset>
        <legend>Unregister</legend>
        <input id="disconnecter" title="disconnect" type="submit" value="disconnect" />
      </fieldset>
    </form>

    <!-- Incoming meeting notification -->
    <fieldset id="incomingsection" style="display:none">
      <legend>Incoming Call</legend>
      <button id="answer">answer</button>
      <button id="reject">reject</button>
    </fieldset>

    <button id="device" name="device" title="Device" type="button">DEVICE</button>
    <div id='devices' style="display:none">
      <div id='notifications' style="float:right; text-align: right; font-size: 20px;">
      </div>
      <form id="deviceControls" name="deviceControls">
        <fieldset>
          <legend>Device Controls</legend>
          <div>
            <div id='refreshDiv' style="display:block; float:left">
              <button id="refresh" name="refresh" title="Refresh device list" type="button">refresh</button>
            </div>
            <div id='removeBtnDiv' style="display:none; float:left">
              <button id="remove" title="Remove" type="button">Remove</button>
            </div>
            <div id='requestPinDiv' style="display:none; float:left">
              <button id="requestPin" title="Request a PIN" type="button">Request PIN</button>
            </div>
            <div id='enterPinDiv' style="display:none; float:left">
              <input maxlength="4" id="pin" name="pin" placeholder="PIN" value="" type="text" />
            </div>
            <div id='requestPairingBtnDiv' style="display:none; float:left">
              <button id="requestPairing" title="Pair" type="button">Pair</button>
            </div>
            <div id='requestUnPairingBtnDiv' style="display:none; float:left">
              <button id="requestUnPairing" title="UnPair" type="button">UnPair</button>
            </div>
          </div>
          <div id='getAudioStateBtnDiv' style="display:none; float:left">
            <button id="getAudioState" title="getAudioState" type="button">getAudioState</button>
          </div>
          <div id='volumeUpBtnDiv' style="display:none; float:left">
            <button id="volumeUp" title="Volume Up" type="button">Up</button>
          </div>
          <div id='volumeDownBtnDiv' style="display:none; float:left">
            <button id="volumeDown" title="Volume Down" type="button">Down</button>
          </div>
          <div id='muteBtnDiv' style="display:none; float:left">
            <button id="mute" title="Mute" type="button">Mute</button>
          </div>
          <div id='unmuteBtnDiv' style="display:none; float:left">
            <button id="unmute" title="Unmute" type="button">UnMute</button>
          </div>
          <div id='wirelessShare' style="display:none; float:left">
            <button id="wirelessShare" title="share" type="button">StartShare</button>
          </div>
          <div id='stopWirelessShare' style="display:none; float:left">
            <button id="stopWirelessShare" title="unshare" type="button">StopShare</button>
          </div>

          <!-- <div> // Binding space to a device
              <div id='enterConvoIdDiv' style="display:none; float:left">
                <input id="convoId" name="convoId" placeholder="convo Id" value="" type="text" />
              </div>
              <div id='bindSpaceBtnDiv' style="display:none; float:left">
                <button id="bindSpace" title="Bind" type="button">Bind</button>
              </div>
              <div id='unbindSpaceBtnDiv' style="display:none; float:left">
                <button id="unbindSpace" title="Unbind" type="button">Unbind</button>
              </div>
          </div> -->

          <div id='getAudioStateContentsDiv' style="display:none; float:right">
          </div>
        </fieldset>
      </form>

      <div style="width:100%">
          <form id="deviceListing" name="deviceListing">
            <fieldset>
              <legend>Device Listing</legend>
              <div style="display:block; float:left">
                <form id="device-list">
                  <select id="device-list-dropdown">
                  </select>
                </form>
              </div>
            </fieldset>
          </form>
      </div>

      <div style="width:100%">
          <form id="deviceSearch" name="deviceSearch">
            <fieldset>
              <legend>Device Search</legend>
              <div style="display:block; float:left">
                <input id="searchQuery" name="searchQuery" placeholder="search query" value="" type="text" />
              </div>
              <div id='searchBtnDiv' style="display:block; float:left">
                <button id="search" title="Search" type="button">Search</button>
              </div>
              <div id='getDeviceSearchResultsDiv' style="display:none; float:right">
              </div>
            </fieldset>
          </form>
      </div>
    </div>

    <form id="Alerts">
        <fieldset>
          <legend>Alerts</legend>
          <div id="meeting-lock"></div>
          <div id="ringing-call"></div>
          <div id="alerted-call"></div>
          <div id="muted-by-others"></div>
        </fieldset>
      </form>

    <form id="in-meeting-actions">
      <fieldset>
        <legend>In Meeting Actions</legend>
        <div id="userCanLock"></div>
        <div id="userCanUnlock"></div>
        <div id="userCanTransfer"></div>
        <button id="check-in-meeting-actions-anytime" title="check-in-meeting-actions-status" type="button">Check In Meeting Actions Status</button>
      </fieldset>
    </form>

    <form id="PMR-edit">
      <fieldset>
        <legend>Claim Personal Meeting Room</legend>
        <input id="wbx-pmr-link" name="pmr-link-edit" value="" type="text" placeholder="Webex Personal Room Link">
        <input id="wbx-pmr-host-pin" name="pmr-host-pin-edit" value="" type="text" placeholder="Host PIN">
        <input title="wbx-pmr-edit" type="submit" value="save">
        <p id="pmr-edit-info"></p>
      </fieldset>
    </form>

    <form id="PMR">
      <fieldset>
        <legend>Personal Meeting Room</legend>
        <input title="pmr-get" type="submit" value="myPMR" />
        <p id="pmr-info"></p>
      </fieldset>
    </form>

    <h2>Then click:</h2>

    <ul id="meeting-list">

    </ul>
    <form id="meetings">
      <fieldset>
        <legend>Meeting Controls</legend>
        <button id="reachability" title="meetings object" type="button">Reachability</button>
        <button id="syncMeeting" title="meetings object" type="button">Sync Meeting</button>
        <button id="meetings-object" title="meetings object" type="button">Meetings</button>
      </fieldset>
    </form>

    <hr />

    <form id="move-call-section">
      <fieldset>
        <legend>
          Move Media Resource
        </legend>
        <button id="move-meeting-to-resource" title="move to resource" type="button">move to resource</button>
        <button id="move-meeting-from-resource" title="move from resource" type="button">move from resource</button>
        <button id="move-meeting-leave" title="leave with resource">End call on device and web</button>
        <button id="move-meeting-leave-web" title="leave with web">End call on web stay on device</button>
      </fieldset>
    </form>

    <form id="dialer">
      <fieldset>
        <legend>Dialer</legend>
        <p>
          sip uri example: 126707703@alpha.webex.com
          pstn number example: +18885550123
          convo url example: https://conv-a.wbx2.com/conversation/api/v1/b7ab0370-911c-11e8-b40c-e117f23f1f95
          meeting link example: https://alpha.webex.com/m/585b8b8f-5e73-4536-9147-f86cb70c8d81
          hydra room id example: Y2lzY29zcGFyazovL3VzL1JPT00vNWZhMWUzODAtZTkzZS0xMWU5LTgyZTEtOGRmYTg5ZTgzMjJm
          hydra people id example: Y2lzY29zcGFyazovL3VzL1BFT1BMRS8wMDAwMDAwMC0wMDAwLTAwMDAtMDAwMC0wMDAwMDAwMDAwMDAw
        </p>
        <input id="invitee" name="invitee" value="" type="text" />
        <label>sip uri, pstn number, convo url, hydra room id, hydra people id, or meeting link</label>
      </br>
        <input id="hostPin-join" title="hostPin" value="" type="text"/>
        <label>host pin</label>
        <input id="moderator-join" type="checkbox" name="moderator" value="0">
        <label>moderator</label>
        <div id="joinAsHostOrGuest" style="display:none">
          <p id="hostPin-moderator-required">MODERATOR AND/OR HOST PIN REQUIRED</p>
          <button id="joinAsHost" title="joinAsHost" type="button">join as host</button>
          <button id="joinAsGuest" title="joinAsGuest" type="button">join as guest</button>
        </div>
      </br>
        <input title="create" type="submit" value="create" />
      </br>
        <label>
          <input type="checkbox" name="mediadirection" value="receiveVideo" checked>receiveVideo</label>
        <label>
          <input type="checkbox" name="mediadirection" value="receiveAudio" checked >receiveAudio</label>
        <label>
          <input type="checkbox" name="mediadirection" value="receiveShare" checked>receiveShare</label>
        <label>
          <input type="checkbox" name="mediadirection" value="sendShare" >sendShare</label>
        <label>
          <input type="checkbox" name="mediadirection" value="sendVideo" checked>sendVideo</label>
        <label>
          <input type="checkbox" name="mediadirection" value="sendAudio" checked>sendAudio</label>
        </br>
          <button id="join" title="join" type="button">join</button>
        </br>
        <p id="time"></p>
        <p id="lobby-space"></p>
        <button id="getDevices" title="getDevices" type="button">getDevices</button>
        <div class="select">
          <label for="audioSource">Audio input source: </label><select id="audioSource"></select>
        </div>
        <div class="select">
            <label for="audioOutput">Audio output destination: </label><select id="audioOutput"></select>
        </div>
        <div class="select">
            <label for="videoSource">Video source: </label><select id="videoSource"></select>
        </div>
        </br>
        <button id="addDevicesMedia" title="addDevicesMedia" type="button">addDevicesMedia</button>
        <button id="addMedia" title="addMedia" disable type="button">addMedia</button>
        <button id="updateAudio" title="updateAudio" disable type="button">updateAudio</button>
        <button id="updateVideo" title="updateVideo" disable type="button">updateVideo</button>
        <button id="updateShare" title="updateShare" disable type="button">updateShare</button>
        <button id="updateMedia" title="updateMedia" disable type="button">updateMedia</button>
      </fieldset>
    </form>

    <form id="call-controls">
      <fieldset>
        <legend>Call Controls</legend>
        <button id="usermedia" title="getMedia" type="button">getaudioVideo</button>
        <button id="leave" title="disconnect" type="button">leave</button>

        <button id="lock-meeting" title="lockMeeting" type="button">lock meeting</button>
        <button id="unlock-meeting" title="unlockMeeting" type="button">unlock meeting</button>

        <button id="stop-sending-audio" title="stop sending audio" type="button">stop sending audio</button>
        <button id="start-sending-audio" title="start sending audio" type="button">start sending audio</button>
        <button id="stop-sending-video" title="stop sending video" type="button">stop sending video</button>
        <button id="start-sending-video" title="start sending video" type="button">start sending video</button> <br />
        <button id="stop-sending-share" title="stop sending share" type="button">stop sending share</button>

        <button id="start-recording" title="start recording" type="button">start recording</button>
        <button id="stop-recording" title="stop recording" type="button">stop recording</button>
        <button id="pause-recording" title="pause recording" type="button">pause recording</button>
        <button id="resume-recording" title="resume recording" type="button">resume recording</button>

        <button id="getStats" title="start filter getStats" type="button">start getStats</button>
        <button id="destroyStats" title="stop filter getStats" type="button">stop getStats</button>
        <p>
          <label for="sendDtmfInput">Send DTMF Tones</label>
          <input id="sendDtmfInput" name="sendDtmf" value="" placeholder="DTMF Numbers" type="number" />
          <button id="sendDtmf" title="Send DTMF" type="button">Send DTMF</button>
        </p>
        <p>
          <label for="setMeetingQualityLevel">Set Meeting Quality Level</label>
          <select id="setMeetingQualityLevel" name="setMeetingQualityLevel">
            <option value="LOW">LOW</option>
            <option value="MEDIUM">MEDIUM</option>
            <option value="HIGH">HIGH</option>
          </select>
          <button id="setMeetingQuality" title="meeting.setMeetingQuality()" type="button">meeting.setMeetingQuality()</button>
        </p>
        <p>
          <label for="setLocalVideoQualityLevel">Set Local Video Quality</label>
          <select id="setLocalVideoQualityLevel" name="setLocalVideoQualityLevel">
            <option value="LOW">LOW (320:180)</option>
            <option value="MEDIUM">MEDIUM (640:360)</option>
            <option value="HIGH">HIGH (1280:720)</option>
          </select>
          <button id="setLocalVideoQuality" title="meeting.setLocalVideoQuality()" type="button">meeting.setLocalVideoQuality()</button>
        </p>
        <p>
          <label for="setRemoteMeetingQualityLevel">Set Remote Quality Level</label>
          <select id="setRemoteMeetingQualityLevel" name="setRemoteMeetingQualityLevel">
            <option value="LOW">LOW</option>
            <option value="MEDIUM">MEDIUM</option>
            <option value="HIGH">HIGH</option>
          </select>
          <button id="setRemoteMeetingQuality" title="meeting.setRemoteQualityLevel()" type="button">meeting.setRemoteQualityLevel()</button>
        </p>
      </fieldset>
    </form>
    <button id="charting" title="charting" type="button">start charting getStats</button>
    <button id="addChartData" title="addChartData" type="button">add chart data</button>
    <div style="width:75%;">
      <canvas id="myChart"></canvas>
      <canvas id="myChart2"></canvas>
    </div>
        <h2>Extras</h2>
        <button id="reconnect-button" title="reconnect" type="button">reconnect</button>
        <div id="reconnection-status"></div>

        <form id="participants-info">
          <fieldset>
            <legend>Participant Lists</legend>
            <div id="participants-collection"></div>
          </fieldset>
        </form>

        <div id="participant-updates"></div>

        <form id="invite-participant">
          <fieldset>
            <legend>Invite Participant</legend>
            <input type="text" id="invite-invitee" placeholder="email address">
            <input type="submit" id="invite-submit" value="invite participant">
          </fieldset>
        </form>

        <form id="admit-participant">
          <fieldset>
            <legend>Admit Participant</legend>
            <input type="text" id="admit-invitee" placeholder="participant id">
            <input type="submit" id="admit-submit" value="admit participant">
          </fieldset>
        </form>

        <form id="remove-participant">
          <fieldset>
            <legend>Remove Participant</legend>
            <input type="text" id="remote-remove" placeholder="participant id">
            <input type="submit" id="remove-submit" value="remove participant">
          </fieldset>
        </form>

        <form id="transfer-host-to">
          <fieldset>
            <legend>Transfer Host To</legend>
            <div id="canMakeTransfer"></div>
            <input type="text" id="transfer-host" placeholder="participant id">
            <input type="submit" id="transfer-submit" value="transfer host">
          </fieldset>
        </form>

        <form id="mute-participant">
          <fieldset>
            <legend>Mute Participant</legend>
            <input type="text" id="remote-mute" placeholder="participant id">
            <label>
              <input type="checkbox" id="mute-audio-remote-check" name="mute-audio-remote" value="mute-audio-remote" checked>mute participant</label>
            <label>
            <input type="submit" id="mute-submit" value="mute participant">
          </fieldset>
        </form>

        <form id="mute-room-device">
          <fieldset>
            <legend>Mute Paired Room Device</legend>
            <input type="text" id="remote-mute-device" placeholder="device person id">
            <label>
              <input type="checkbox" id="mute-audio-remote-check" name="mute-lyra-remote" value="mute-lyra-remote" checked>mute device</label>
            <label>
            <input type="submit" id="mute-room-submit" value="mute room device">
          </fieldset>
        </form>

        <form id="scheduled-meetings">
          <fieldset>
            <legend>Scheduled Meetings</legend>
            <input title="scheduled-meetings" type="submit" value="getScheduledMeetings" />
            <p id="scheduled-meetings-div"></p>
          </fieldset>
        </form>

        <form id="scheduled-meetings-events">
          <fieldset>
            <legend>Scheduled Meetings Events</legend>
            <input title="scheduled-meetings" type="submit" value="getScheduledMeetings events" />
            <p id="scheduled-meetings-events-p"></p>
          </fieldset>
        </form>
    <div>
      <video style="--width: 20%;width: var(--width);height: calc(var(--width) * 0.75);" id="localvideo" muted="true" autoplay playsinline></video>
      <video style="--width: 35%;width: var(--width);height: calc(var(--width) * 0.75);" id="remotevideo" autoplay playsinline></video>
      <video style="--width: 35%;width: var(--width);height: calc(var(--width) * 0.75);" id="remoteaudio" autoplay playsinline></video>
      <video style="--width: 35%;width: var(--width);height: calc(var(--width) * 0.75);" id="sharevideo" autoplay playsinline></video>
      <video style="--width: 20%;width: var(--width);height: calc(var(--width) * 0.75);" id="localshare" autoplay playsinline></video>
    </div>

    <script src="/webex.min.js"></script>
    <!-- app.js is your application code -->
    <script src="app.js"></script>
    <script src="device.js"></script>
  </body>
</html>
