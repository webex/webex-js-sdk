/*!
 * Copyright (c) 2015-2017 Cisco Systems, Inc. See LICENSE file.
 */

'use strict';

require('whatwg-fetch');
var makeLocalUrl = require('@ciscospark/test-helper-make-local-url');

/* eslint-env browser */

module.exports = function createUser(options) {
  return fetch(makeLocalUrl('/jwt'), {
    method: 'POST',
    headers: new Headers({
      'content-type': 'application/json'
    }),
    body: JSON.stringify(options)
  })
    .then(function toJson(res) {
      return res.json();
    })
    .then(function toJwt(body) {
      return body.jwt;
    });
};
