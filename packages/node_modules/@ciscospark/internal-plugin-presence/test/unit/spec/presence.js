/*!
 * Copyright (c) 2015-2017 Cisco Systems, Inc. See LICENSE file.
 */

import {assert} from '@ciscospark/test-helper-chai';
import Presence from '@ciscospark/internal-plugin-presence';
import MockSpark from '@ciscospark/test-helper-mock-spark';

describe(`plugin-presence`, () => {
  describe(`Presence`, () => {
    let spark;

    beforeEach(() => {
      spark = new MockSpark({
        children: {
          presence: Presence
        }
      });
    });

    describe(`#get()`, () => {
      it(`requires a person id parameter`, () => {
        return assert.isRejected(spark.internal.presence.get(), /A person id is required/);
      });
    });

    describe(`#list()`, () => {
      it(`requires a parameter`, () => {
        return assert.isRejected(spark.internal.presence.list(), /An array of person ids is required/);
      });

      it(`requires a person array parameter`, () => {
        return assert.isRejected(spark.internal.presence.list(`abc`), /An array of person ids is required/);
      });
    });

    describe(`#subscribe()`, () => {
      it(`requires a person parameter`, () => {
        return assert.isRejected(spark.internal.presence.subscribe(), /A person id is required/);
      });
    });

    describe(`#unsubscribe()`, () => {
      it(`requires a person parameter`, () => {
        return assert.isRejected(spark.internal.presence.unsubscribe(), /A person id is required/);
      });
    });

    describe(`#setStatus()`, () => {
      it(`requires a status`, () => {
        return assert.isRejected(spark.internal.presence.setStatus(), /A status is required/);
      });
    });

  });

});
