# @ciscospark/internal-plugin-reaction

[![standard-readme compliant](https://img.shields.io/badge/readme%20style-standard-brightgreen.svg?style=flat-square)](https://github.com/RichardLitt/standard-readme)

> Plugin for the Reaction service

This is an internal Cisco Spark plugin. As such, it does not strictly adhere to semantic versioning. Use at your own risk. If you're not working on one of our first party clients, please look at our [developer api](https://developer.ciscospark.com/getting-started.html) and stick to our public plugins.

- [Install](#install)
- [Usage](#usage)
- [Contribute](#contribute)
- [Maintainers](#maintainers)
- [License](#license)

## Install

```bash
npm install --save @ciscospark/internal-plugin-reaction
```

## Usage


Wiki design: https://sqbu-github.cisco.com/WebExSquared/cloud-apps/wiki/Reactions(Design-&-Api-Spec)

```js

import '@ciscospark/internal-plugin-reaction';

import SparkCore from '@ciscospark/spark-core';

const spark = new SparkCore();
spark.internal.reaction.WHATEVER

```


1. Add Reaction:

  Usage:
  ```
  spark.internal.reaction.add({
    participant,
    activityID,
    convoID,
    targetURL
  })
  ```

  The only input will be a ReactionObject variable. The required values to be passed in this object are
  ```
  {
    participant,
    activityID,
    convoID,
    targetURL
  }
  ```

  the function will then call spark.request with
  ```
    {
      method: 'POST',
      service: 'conversation',
      resource: '/activities',
      body:
      {
        clientTempId: uuid.v4(),
        objectType: 'activity',
        verb: 'add',
        actor: {
          objectType: 'person',
          id: ReactionObject.participant.id,
          entryUUID: ReactionObject.participant.entryUUID
        },
        object: {
          objectType: 'messageProperty',
          tags: ['REACTIONS'],
          id: ReactionObject.activityID,
          reactionType: ''
        },
        target: {
          id: ReactionObject.convoID,
          url: ReactionObject.targetURL,
          objectType: 'conversation'
        }
      }
    }
  ```



2. Delete reaction

  Usage:
  ```
  spark.internal.reaction.delete({
    participant,
    activityID,
    reactionID,
    convoID,
    targetURL
  })
  ```

  The only input will be a ReactionObject variable. The required values to be passed in this object are
  ```
  {
    participant,
    activityID,
    reactionID
    convoID,
    targetURL
  }
  ```

  the function will then call spark.request with
  ```
    {
      method: 'POST',
      service: 'conversation',
      resource: '/activities',
      body:
      {
        clientTempId: uuid.v4(),
        objectType: 'activity',
        verb: 'delete',
        actor: {
          objectType: 'person',
          id: ReactionObject.participant.id,
          entryUUID: ReactionObject.participant.entryUUID
        },
        object: {
          objectType: 'messageProperty',
          tags: ['REACTIONS'],
          id: ReactionObject.activityID,
          reactionType: ReactionObject.reactionID
        },
        target: {
          id: ReactionObject.convoID,
          url: ReactionObject.targetURL,
          objectType: 'conversation'
        }
      }
    }
  ```



3. Update Reaction

4. Get Conversations

5. Get reactions id based on conversationId

6. Get reactions id based on conversationId and activityId



## Maintainers

This package is maintained by [Cisco Spark for Developers](https://developer.ciscospark.com/).

## Contribute

Pull requests welcome. Please see [CONTRIBUTING.md](../../CONTRIBUTING.md) for more details.

## License

Â© 2016-2018 Cisco and/or its affiliates. All Rights Reserved.
