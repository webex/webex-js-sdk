/*! Cisco Spark SDK v1.50.16 */
var CiscoSpark=function(){"use strict";var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var i=n(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),a={}.hasOwnProperty,o=function(e,t){return a.call(e,t)},s=function(e){try{return!!e()}catch(e){return!0}},c=!s(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),u=n(function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)}),l=(u.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),f=function(e){if(!l(e))throw TypeError(e+" is not an object!");return e},p=i.document,d=l(p)&&l(p.createElement),h=function(e){return d?p.createElement(e):{}},v=!c&&!s(function(){return 7!=Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a}),m=function(e,t){if(!l(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!l(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!l(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!l(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},g=Object.defineProperty,y={f:c?Object.defineProperty:function(e,t,r){if(f(e),t=m(t,!0),f(r),v)try{return g(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},b=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},w=c?function(e,t,r){return y.f(e,t,b(1,r))}:function(e,t,r){return e[t]=r,e},_=0,E=Math.random(),S=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++_+E).toString(36))},x=n(function(e){var t=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,r){return t[e]||(t[e]=void 0!==r?r:{})})("versions",[]).push({version:u.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),C=x("native-function-to-string",Function.toString),k=n(function(e){var t=S("src"),r=(""+C).split("toString");u.inspectSource=function(e){return C.call(e)},(e.exports=function(e,n,a,s){var c="function"==typeof a;c&&(o(a,"name")||w(a,"name",n)),e[n]!==a&&(c&&(o(a,t)||w(a,t,e[n]?""+e[n]:r.join(String(n)))),e===i?e[n]=a:s?e[n]?e[n]=a:w(e,n,a):(delete e[n],w(e,n,a)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[t]||C.call(this)})}),T=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},A=function(e,t,r){if(T(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},I=function(e,t,r){var n,a,o,s,c=e&I.F,l=e&I.G,f=e&I.S,p=e&I.P,d=e&I.B,h=l?i:f?i[t]||(i[t]={}):(i[t]||{}).prototype,v=l?u:u[t]||(u[t]={}),m=v.prototype||(v.prototype={});for(n in l&&(r=t),r)o=((a=!c&&h&&void 0!==h[n])?h:r)[n],s=d&&a?A(o,i):p&&"function"==typeof o?A(Function.call,o):o,h&&k(h,n,o,e&I.U),v[n]!=o&&w(v,n,s),p&&m[n]!=o&&(m[n]=o)};i.core=u,I.F=1,I.G=2,I.S=4,I.P=8,I.B=16,I.W=32,I.U=64,I.R=128;var P=I,O=n(function(e){var t=S("meta"),r=y.f,n=0,i=Object.isExtensible||function(){return!0},a=!s(function(){return i(Object.preventExtensions({}))}),c=function(e){r(e,t,{value:{i:"O"+ ++n,w:{}}})},u=e.exports={KEY:t,NEED:!1,fastKey:function(e,r){if(!l(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,t)){if(!i(e))return"F";if(!r)return"E";c(e)}return e[t].i},getWeak:function(e,r){if(!o(e,t)){if(!i(e))return!0;if(!r)return!1;c(e)}return e[t].w},onFreeze:function(e){return a&&u.NEED&&i(e)&&!o(e,t)&&c(e),e}}}),R=(O.KEY,O.NEED,O.fastKey,O.getWeak,O.onFreeze,n(function(e){var t=x("wks"),r=i.Symbol,n="function"==typeof r;(e.exports=function(e){return t[e]||(t[e]=n&&r[e]||(n?r:S)("Symbol."+e))}).store=t})),j=y.f,M=R("toStringTag"),N=function(e,t,r){e&&!o(e=r?e:e.prototype,M)&&j(e,M,{configurable:!0,value:t})},B={f:R},D=y.f,F=function(e){var t=u.Symbol||(u.Symbol=i.Symbol||{});"_"==e.charAt(0)||e in t||D(t,e,{value:B.f(e)})},L={}.toString,U=function(e){return L.call(e).slice(8,-1)},z=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==U(e)?e.split(""):Object(e)},V=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},q=function(e){return z(V(e))},K=Math.ceil,G=Math.floor,H=function(e){return isNaN(e=+e)?0:(e>0?G:K)(e)},W=Math.min,$=function(e){return e>0?W(H(e),9007199254740991):0},Y=Math.max,J=Math.min,Q=function(e,t){return(e=H(e))<0?Y(e+t,0):J(e,t)},Z=function(e){return function(t,r,n){var i,a=q(t),o=$(a.length),s=Q(n,o);if(e&&r!=r){for(;o>s;)if((i=a[s++])!=i)return!0}else for(;o>s;s++)if((e||s in a)&&a[s]===r)return e||s||0;return!e&&-1}},X=x("keys"),ee=function(e){return X[e]||(X[e]=S(e))},te=Z(!1),re=ee("IE_PROTO"),ne=function(e,t){var r,n=q(e),i=0,a=[];for(r in n)r!=re&&o(n,r)&&a.push(r);for(;t.length>i;)o(n,r=t[i++])&&(~te(a,r)||a.push(r));return a},ie="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ae=Object.keys||function(e){return ne(e,ie)},oe={f:Object.getOwnPropertySymbols},se={f:{}.propertyIsEnumerable},ce=Array.isArray||function(e){return"Array"==U(e)},ue=c?Object.defineProperties:function(e,t){f(e);for(var r,n=ae(t),i=n.length,a=0;i>a;)y.f(e,r=n[a++],t[r]);return e},le=i.document,fe=le&&le.documentElement,pe=ee("IE_PROTO"),de=function(){},he=function(){var e,t=h("iframe"),r=ie.length;for(t.style.display="none",fe.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),he=e.F;r--;)delete he.prototype[ie[r]];return he()},ve=Object.create||function(e,t){var r;return null!==e?(de.prototype=f(e),r=new de,de.prototype=null,r[pe]=e):r=he(),void 0===t?r:ue(r,t)},me=ie.concat("length","prototype"),ge={f:Object.getOwnPropertyNames||function(e){return ne(e,me)}},ye=ge.f,be={}.toString,we="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],_e={f:function(e){return we&&"[object Window]"==be.call(e)?function(e){try{return ye(e)}catch(e){return we.slice()}}(e):ye(q(e))}},Ee=Object.getOwnPropertyDescriptor,Se={f:c?Ee:function(e,t){if(e=q(e),t=m(t,!0),v)try{return Ee(e,t)}catch(e){}if(o(e,t))return b(!se.f.call(e,t),e[t])}},xe=O.KEY,Ce=Se.f,ke=y.f,Te=_e.f,Ae=i.Symbol,Ie=i.JSON,Pe=Ie&&Ie.stringify,Oe=R("_hidden"),Re=R("toPrimitive"),je={}.propertyIsEnumerable,Me=x("symbol-registry"),Ne=x("symbols"),Be=x("op-symbols"),De=Object.prototype,Fe="function"==typeof Ae,Le=i.QObject,Ue=!Le||!Le.prototype||!Le.prototype.findChild,ze=c&&s(function(){return 7!=ve(ke({},"a",{get:function(){return ke(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=Ce(De,t);n&&delete De[t],ke(e,t,r),n&&e!==De&&ke(De,t,n)}:ke,Ve=function(e){var t=Ne[e]=ve(Ae.prototype);return t._k=e,t},qe=Fe&&"symbol"==typeof Ae.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof Ae},Ke=function(e,t,r){return e===De&&Ke(Be,t,r),f(e),t=m(t,!0),f(r),o(Ne,t)?(r.enumerable?(o(e,Oe)&&e[Oe][t]&&(e[Oe][t]=!1),r=ve(r,{enumerable:b(0,!1)})):(o(e,Oe)||ke(e,Oe,b(1,{})),e[Oe][t]=!0),ze(e,t,r)):ke(e,t,r)},Ge=function(e,t){f(e);for(var r,n=function(e){var t=ae(e),r=oe.f;if(r)for(var n,i=r(e),a=se.f,o=0;i.length>o;)a.call(e,n=i[o++])&&t.push(n);return t}(t=q(t)),i=0,a=n.length;a>i;)Ke(e,r=n[i++],t[r]);return e},He=function(e){var t=je.call(this,e=m(e,!0));return!(this===De&&o(Ne,e)&&!o(Be,e))&&(!(t||!o(this,e)||!o(Ne,e)||o(this,Oe)&&this[Oe][e])||t)},We=function(e,t){if(e=q(e),t=m(t,!0),e!==De||!o(Ne,t)||o(Be,t)){var r=Ce(e,t);return!r||!o(Ne,t)||o(e,Oe)&&e[Oe][t]||(r.enumerable=!0),r}},$e=function(e){for(var t,r=Te(q(e)),n=[],i=0;r.length>i;)o(Ne,t=r[i++])||t==Oe||t==xe||n.push(t);return n},Ye=function(e){for(var t,r=e===De,n=Te(r?Be:q(e)),i=[],a=0;n.length>a;)!o(Ne,t=n[a++])||r&&!o(De,t)||i.push(Ne[t]);return i};Fe||(k((Ae=function(){if(this instanceof Ae)throw TypeError("Symbol is not a constructor!");var e=S(arguments.length>0?arguments[0]:void 0),t=function(r){this===De&&t.call(Be,r),o(this,Oe)&&o(this[Oe],e)&&(this[Oe][e]=!1),ze(this,e,b(1,r))};return c&&Ue&&ze(De,e,{configurable:!0,set:t}),Ve(e)}).prototype,"toString",function(){return this._k}),Se.f=We,y.f=Ke,ge.f=_e.f=$e,se.f=He,oe.f=Ye,c&&k(De,"propertyIsEnumerable",He,!0),B.f=function(e){return Ve(R(e))}),P(P.G+P.W+P.F*!Fe,{Symbol:Ae});for(var Je="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Qe=0;Je.length>Qe;)R(Je[Qe++]);for(var Ze=ae(R.store),Xe=0;Ze.length>Xe;)F(Ze[Xe++]);P(P.S+P.F*!Fe,"Symbol",{for:function(e){return o(Me,e+="")?Me[e]:Me[e]=Ae(e)},keyFor:function(e){if(!qe(e))throw TypeError(e+" is not a symbol!");for(var t in Me)if(Me[t]===e)return t},useSetter:function(){Ue=!0},useSimple:function(){Ue=!1}}),P(P.S+P.F*!Fe,"Object",{create:function(e,t){return void 0===t?ve(e):Ge(ve(e),t)},defineProperty:Ke,defineProperties:Ge,getOwnPropertyDescriptor:We,getOwnPropertyNames:$e,getOwnPropertySymbols:Ye}),Ie&&P(P.S+P.F*(!Fe||s(function(){var e=Ae();return"[null]"!=Pe([e])||"{}"!=Pe({a:e})||"{}"!=Pe(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(l(t)||void 0!==e)&&!qe(e))return ce(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!qe(t))return t}),n[1]=t,Pe.apply(Ie,n)}}),Ae.prototype[Re]||w(Ae.prototype,Re,Ae.prototype.valueOf),N(Ae,"Symbol"),N(Math,"Math",!0),N(i.JSON,"JSON",!0),P(P.S,"Object",{create:ve}),P(P.S+P.F*!c,"Object",{defineProperty:y.f}),P(P.S+P.F*!c,"Object",{defineProperties:ue});var et=function(e,t){var r=(u.Object||{})[e]||Object[e],n={};n[e]=t(r),P(P.S+P.F*s(function(){r(1)}),"Object",n)},tt=Se.f;et("getOwnPropertyDescriptor",function(){return function(e,t){return tt(q(e),t)}});var rt=function(e){return Object(V(e))},nt=ee("IE_PROTO"),it=Object.prototype,at=Object.getPrototypeOf||function(e){return e=rt(e),o(e,nt)?e[nt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?it:null};et("getPrototypeOf",function(){return function(e){return at(rt(e))}}),et("keys",function(){return function(e){return ae(rt(e))}}),et("getOwnPropertyNames",function(){return _e.f});var ot=O.onFreeze;et("freeze",function(e){return function(t){return e&&l(t)?e(ot(t)):t}});var st=O.onFreeze;et("seal",function(e){return function(t){return e&&l(t)?e(st(t)):t}});var ct=O.onFreeze;et("preventExtensions",function(e){return function(t){return e&&l(t)?e(ct(t)):t}}),et("isFrozen",function(e){return function(t){return!l(t)||!!e&&e(t)}}),et("isSealed",function(e){return function(t){return!l(t)||!!e&&e(t)}}),et("isExtensible",function(e){return function(t){return!!l(t)&&(!e||e(t))}});var ut=Object.assign,lt=!ut||s(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=ut({},e)[r]||Object.keys(ut({},t)).join("")!=n})?function(e,t){for(var r=rt(e),n=arguments.length,i=1,a=oe.f,o=se.f;n>i;)for(var s,c=z(arguments[i++]),u=a?ae(c).concat(a(c)):ae(c),l=u.length,f=0;l>f;)o.call(c,s=u[f++])&&(r[s]=c[s]);return r}:ut;P(P.S+P.F,"Object",{assign:lt});var ft=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};P(P.S,"Object",{is:ft});var pt=function(e,t){if(f(e),!l(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},dt={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=A(Function.call,Se.f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return pt(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:pt};P(P.S,"Object",{setPrototypeOf:dt.set});var ht=R("toStringTag"),vt="Arguments"==U(function(){return arguments}()),mt=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),ht))?r:vt?U(t):"Object"==(n=U(t))&&"function"==typeof t.callee?"Arguments":n},gt={};gt[R("toStringTag")]="z",gt+""!="[object z]"&&k(Object.prototype,"toString",function(){return"[object "+mt(this)+"]"},!0);var yt=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)},bt=[].slice,wt={},_t=Function.bind||function(e){var t=T(this),r=bt.call(arguments,1),n=function(){var i=r.concat(bt.call(arguments));return this instanceof n?function(e,t,r){if(!(t in wt)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";wt[t]=Function("F,a","return new F("+n.join(",")+")")}return wt[t](e,r)}(t,i.length,i):yt(t,i,e)};return l(t.prototype)&&(n.prototype=t.prototype),n};P(P.P,"Function",{bind:_t});var Et=y.f,St=Function.prototype,xt=/^\s*function ([^ (]*)/;"name"in St||c&&Et(St,"name",{configurable:!0,get:function(){try{return(""+this).match(xt)[1]}catch(e){return""}}});var Ct=R("hasInstance"),kt=Function.prototype;Ct in kt||y.f(kt,Ct,{value:function(e){if("function"!=typeof this||!l(e))return!1;if(!l(this.prototype))return e instanceof this;for(;e=at(e);)if(this.prototype===e)return!0;return!1}});var Tt="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",At="["+Tt+"]",It=RegExp("^"+At+At+"*"),Pt=RegExp(At+At+"*$"),Ot=function(e,t,r){var n={},i=s(function(){return!!Tt[e]()||"​"!="​"[e]()}),a=n[e]=i?t(Rt):Tt[e];r&&(n[r]=a),P(P.P+P.F*i,"String",n)},Rt=Ot.trim=function(e,t){return e=String(V(e)),1&t&&(e=e.replace(It,"")),2&t&&(e=e.replace(Pt,"")),e},jt=Ot,Mt=i.parseInt,Nt=jt.trim,Bt=/^[-+]?0[xX]/,Dt=8!==Mt(Tt+"08")||22!==Mt(Tt+"0x16")?function(e,t){var r=Nt(String(e),3);return Mt(r,t>>>0||(Bt.test(r)?16:10))}:Mt;P(P.G+P.F*(parseInt!=Dt),{parseInt:Dt});var Ft=i.parseFloat,Lt=jt.trim,Ut=1/Ft(Tt+"-0")!=-1/0?function(e){var t=Lt(String(e),3),r=Ft(t);return 0===r&&"-"==t.charAt(0)?-0:r}:Ft;P(P.G+P.F*(parseFloat!=Ut),{parseFloat:Ut});var zt=dt.set,Vt=function(e,t,r){var n,i=t.constructor;return i!==r&&"function"==typeof i&&(n=i.prototype)!==r.prototype&&l(n)&&zt&&zt(e,n),e},qt=ge.f,Kt=Se.f,Gt=y.f,Ht=jt.trim,Wt=i.Number,$t=Wt,Yt=Wt.prototype,Jt="Number"==U(ve(Yt)),Qt="trim"in String.prototype,Zt=function(e){var t=m(e,!1);if("string"==typeof t&&t.length>2){var r,n,i,a=(t=Qt?t.trim():Ht(t,3)).charCodeAt(0);if(43===a||45===a){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var o,s=t.slice(2),c=0,u=s.length;c<u;c++)if((o=s.charCodeAt(c))<48||o>i)return NaN;return parseInt(s,n)}}return+t};if(!Wt(" 0o1")||!Wt("0b1")||Wt("+0x1")){Wt=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof Wt&&(Jt?s(function(){Yt.valueOf.call(r)}):"Number"!=U(r))?Vt(new $t(Zt(t)),r,Wt):Zt(t)};for(var Xt,er=c?qt($t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),tr=0;er.length>tr;tr++)o($t,Xt=er[tr])&&!o(Wt,Xt)&&Gt(Wt,Xt,Kt($t,Xt));Wt.prototype=Yt,Yt.constructor=Wt,k(i,"Number",Wt)}var rr=function(e,t){if("number"!=typeof e&&"Number"!=U(e))throw TypeError(t);return+e},nr=function(e){var t=String(V(this)),r="",n=H(e);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(r+=t);return r},ir=1..toFixed,ar=Math.floor,or=[0,0,0,0,0,0],sr="Number.toFixed: incorrect invocation!",cr=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*or[r],or[r]=n%1e7,n=ar(n/1e7)},ur=function(e){for(var t=6,r=0;--t>=0;)r+=or[t],or[t]=ar(r/e),r=r%e*1e7},lr=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==or[e]){var r=String(or[e]);t=""===t?r:t+nr.call("0",7-r.length)+r}return t},fr=function(e,t,r){return 0===t?r:t%2==1?fr(e,t-1,r*e):fr(e*e,t/2,r)};P(P.P+P.F*(!!ir&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s(function(){ir.call({})})),"Number",{toFixed:function(e){var t,r,n,i,a=rr(this,sr),o=H(e),s="",c="0";if(o<0||o>20)throw RangeError(sr);if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return String(a);if(a<0&&(s="-",a=-a),a>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(a*fr(2,69,1))-69)<0?a*fr(2,-t,1):a/fr(2,t,1),r*=4503599627370496,(t=52-t)>0){for(cr(0,r),n=o;n>=7;)cr(1e7,0),n-=7;for(cr(fr(10,n,1),0),n=t-1;n>=23;)ur(1<<23),n-=23;ur(1<<n),cr(1,1),ur(2),c=lr()}else cr(0,r),cr(1<<-t,0),c=lr()+nr.call("0",o);return c=o>0?s+((i=c.length)<=o?"0."+nr.call("0",o-i)+c:c.slice(0,i-o)+"."+c.slice(i-o)):s+c}});var pr=1..toPrecision;P(P.P+P.F*(s(function(){return"1"!==pr.call(1,void 0)})||!s(function(){pr.call({})})),"Number",{toPrecision:function(e){var t=rr(this,"Number#toPrecision: incorrect invocation!");return void 0===e?pr.call(t):pr.call(t,e)}}),P(P.S,"Number",{EPSILON:Math.pow(2,-52)});var dr=i.isFinite;P(P.S,"Number",{isFinite:function(e){return"number"==typeof e&&dr(e)}});var hr=Math.floor,vr=function(e){return!l(e)&&isFinite(e)&&hr(e)===e};P(P.S,"Number",{isInteger:vr}),P(P.S,"Number",{isNaN:function(e){return e!=e}});var mr=Math.abs;P(P.S,"Number",{isSafeInteger:function(e){return vr(e)&&mr(e)<=9007199254740991}}),P(P.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),P(P.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991}),P(P.S+P.F*(Number.parseFloat!=Ut),"Number",{parseFloat:Ut}),P(P.S+P.F*(Number.parseInt!=Dt),"Number",{parseInt:Dt});var gr=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)},yr=Math.sqrt,br=Math.acosh;P(P.S+P.F*!(br&&710==Math.floor(br(Number.MAX_VALUE))&&br(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:gr(e-1+yr(e-1)*yr(e+1))}});var wr=Math.asinh;P(P.S+P.F*!(wr&&1/wr(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}});var _r=Math.atanh;P(P.S+P.F*!(_r&&1/_r(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}});var Er=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1};P(P.S,"Math",{cbrt:function(e){return Er(e=+e)*Math.pow(Math.abs(e),1/3)}}),P(P.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}});var Sr=Math.exp;P(P.S,"Math",{cosh:function(e){return(Sr(e=+e)+Sr(-e))/2}});var xr=Math.expm1,Cr=!xr||xr(10)>22025.465794806718||xr(10)<22025.465794806718||-2e-17!=xr(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:xr;P(P.S+P.F*(Cr!=Math.expm1),"Math",{expm1:Cr});var kr=Math.pow,Tr=kr(2,-52),Ar=kr(2,-23),Ir=kr(2,127)*(2-Ar),Pr=kr(2,-126),Or=Math.fround||function(e){var t,r,n=Math.abs(e),i=Er(e);return n<Pr?i*(n/Pr/Ar+1/Tr-1/Tr)*Pr*Ar:(r=(t=(1+Ar/Tr)*n)-(t-n))>Ir||r!=r?i*(1/0):i*r};P(P.S,"Math",{fround:Or});var Rr=Math.abs;P(P.S,"Math",{hypot:function(e,t){for(var r,n,i=0,a=0,o=arguments.length,s=0;a<o;)s<(r=Rr(arguments[a++]))?(i=i*(n=s/r)*n+1,s=r):i+=r>0?(n=r/s)*n:r;return s===1/0?1/0:s*Math.sqrt(i)}});var jr=Math.imul;P(P.S+P.F*s(function(){return-5!=jr(4294967295,5)||2!=jr.length}),"Math",{imul:function(e,t){var r=+e,n=+t,i=65535&r,a=65535&n;return 0|i*a+((65535&r>>>16)*a+i*(65535&n>>>16)<<16>>>0)}}),P(P.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}}),P(P.S,"Math",{log1p:gr}),P(P.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}}),P(P.S,"Math",{sign:Er});var Mr=Math.exp;P(P.S+P.F*s(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(Cr(e)-Cr(-e))/2:(Mr(e-1)-Mr(-e-1))*(Math.E/2)}});var Nr=Math.exp;P(P.S,"Math",{tanh:function(e){var t=Cr(e=+e),r=Cr(-e);return t==1/0?1:r==1/0?-1:(t-r)/(Nr(e)+Nr(-e))}}),P(P.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}});var Br=String.fromCharCode,Dr=String.fromCodePoint;P(P.S+P.F*(!!Dr&&1!=Dr.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,i=0;n>i;){if(t=+arguments[i++],Q(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?Br(t):Br(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}}),P(P.S,"String",{raw:function(e){for(var t=q(e.raw),r=$(t.length),n=arguments.length,i=[],a=0;r>a;)i.push(String(t[a++])),a<n&&i.push(String(arguments[a]));return i.join("")}}),jt("trim",function(e){return function(){return e(this,3)}});var Fr=function(e){return function(t,r){var n,i,a=String(V(t)),o=H(r),s=a.length;return o<0||o>=s?e?"":void 0:(n=a.charCodeAt(o))<55296||n>56319||o+1===s||(i=a.charCodeAt(o+1))<56320||i>57343?e?a.charAt(o):n:e?a.slice(o,o+2):i-56320+(n-55296<<10)+65536}},Lr={},Ur={};w(Ur,R("iterator"),function(){return this});var zr=function(e,t,r){e.prototype=ve(Ur,{next:b(1,r)}),N(e,t+" Iterator")},Vr=R("iterator"),qr=!([].keys&&"next"in[].keys()),Kr=function(){return this},Gr=function(e,t,r,n,i,a,o){zr(r,t,n);var s,c,u,l=function(e){if(!qr&&e in h)return h[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},f=t+" Iterator",p="values"==i,d=!1,h=e.prototype,v=h[Vr]||h["@@iterator"]||i&&h[i],m=v||l(i),g=i?p?l("entries"):m:void 0,y="Array"==t&&h.entries||v;if(y&&(u=at(y.call(new e)))!==Object.prototype&&u.next&&(N(u,f,!0),"function"!=typeof u[Vr]&&w(u,Vr,Kr)),p&&v&&"values"!==v.name&&(d=!0,m=function(){return v.call(this)}),(qr||d||!h[Vr])&&w(h,Vr,m),Lr[t]=m,Lr[f]=Kr,i)if(s={values:p?m:l("values"),keys:a?m:l("keys"),entries:g},o)for(c in s)c in h||k(h,c,s[c]);else P(P.P+P.F*(qr||d),t,s);return s},Hr=Fr(!0);Gr(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=Hr(t,r),this._i+=e.length,{value:e,done:!1})});var Wr=Fr(!1);P(P.P,"String",{codePointAt:function(e){return Wr(this,e)}});var $r=R("match"),Yr=function(e){var t;return l(e)&&(void 0!==(t=e[$r])?!!t:"RegExp"==U(e))},Jr=function(e,t,r){if(Yr(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(V(e))},Qr=R("match"),Zr=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[Qr]=!1,!"/./"[e](t)}catch(e){}}return!0},Xr="".endsWith;P(P.P+P.F*Zr("endsWith"),"String",{endsWith:function(e){var t=Jr(this,e,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=$(t.length),i=void 0===r?n:Math.min($(r),n),a=String(e);return Xr?Xr.call(t,a,i):t.slice(i-a.length,i)===a}});P(P.P+P.F*Zr("includes"),"String",{includes:function(e){return!!~Jr(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}}),P(P.P,"String",{repeat:nr});var en="".startsWith;P(P.P+P.F*Zr("startsWith"),"String",{startsWith:function(e){var t=Jr(this,e,"startsWith"),r=$(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return en?en.call(t,n,r):t.slice(r,r+n.length)===n}});var tn=/"/g,rn=function(e,t,r,n){var i=String(V(e)),a="<"+t;return""!==r&&(a+=" "+r+'="'+String(n).replace(tn,"&quot;")+'"'),a+">"+i+"</"+t+">"},nn=function(e,t){var r={};r[e]=t(rn),P(P.P+P.F*s(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",r)};nn("anchor",function(e){return function(t){return e(this,"a","name",t)}}),nn("big",function(e){return function(){return e(this,"big","","")}}),nn("blink",function(e){return function(){return e(this,"blink","","")}}),nn("bold",function(e){return function(){return e(this,"b","","")}}),nn("fixed",function(e){return function(){return e(this,"tt","","")}}),nn("fontcolor",function(e){return function(t){return e(this,"font","color",t)}}),nn("fontsize",function(e){return function(t){return e(this,"font","size",t)}}),nn("italics",function(e){return function(){return e(this,"i","","")}}),nn("link",function(e){return function(t){return e(this,"a","href",t)}}),nn("small",function(e){return function(){return e(this,"small","","")}}),nn("strike",function(e){return function(){return e(this,"strike","","")}}),nn("sub",function(e){return function(){return e(this,"sub","","")}}),nn("sup",function(e){return function(){return e(this,"sup","","")}}),P(P.S,"Date",{now:function(){return(new Date).getTime()}}),P(P.P+P.F*s(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=rt(this),r=m(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}});var an=Date.prototype.getTime,on=Date.prototype.toISOString,sn=function(e){return e>9?e:"0"+e},cn=s(function(){return"0385-07-25T07:06:39.999Z"!=on.call(new Date(-5e13-1))})||!s(function(){on.call(new Date(NaN))})?function(){if(!isFinite(an.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+sn(e.getUTCMonth()+1)+"-"+sn(e.getUTCDate())+"T"+sn(e.getUTCHours())+":"+sn(e.getUTCMinutes())+":"+sn(e.getUTCSeconds())+"."+(r>99?r:"0"+sn(r))+"Z"}:on;P(P.P+P.F*(Date.prototype.toISOString!==cn),"Date",{toISOString:cn});var un=Date.prototype,ln=un.toString,fn=un.getTime;new Date(NaN)+""!="Invalid Date"&&k(un,"toString",function(){var e=fn.call(this);return e==e?ln.call(this):"Invalid Date"});var pn=R("toPrimitive"),dn=Date.prototype;pn in dn||w(dn,pn,function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return m(f(this),"number"!=e)}),P(P.S,"Array",{isArray:ce});var hn=function(e,t,r,n){try{return n?t(f(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&f(i.call(e)),t}},vn=R("iterator"),mn=Array.prototype,gn=function(e){return void 0!==e&&(Lr.Array===e||mn[vn]===e)},yn=function(e,t,r){t in e?y.f(e,t,b(0,r)):e[t]=r},bn=R("iterator"),wn=u.getIteratorMethod=function(e){if(null!=e)return e[bn]||e["@@iterator"]||Lr[mt(e)]},_n=R("iterator"),En=!1;try{[7][_n]().return=function(){En=!0}}catch(e){}var Sn=function(e,t){if(!t&&!En)return!1;var r=!1;try{var n=[7],i=n[_n]();i.next=function(){return{done:r=!0}},n[_n]=function(){return i},e(n)}catch(e){}return r};P(P.S+P.F*!Sn(function(e){}),"Array",{from:function(e){var t,r,n,i,a=rt(e),o="function"==typeof this?this:Array,s=arguments.length,c=s>1?arguments[1]:void 0,u=void 0!==c,l=0,f=wn(a);if(u&&(c=A(c,s>2?arguments[2]:void 0,2)),null==f||o==Array&&gn(f))for(r=new o(t=$(a.length));t>l;l++)yn(r,l,u?c(a[l],l):a[l]);else for(i=f.call(a),r=new o;!(n=i.next()).done;l++)yn(r,l,u?hn(i,c,[n.value,l],!0):n.value);return r.length=l,r}}),P(P.S+P.F*s(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)yn(r,e,arguments[e++]);return r.length=t,r}});var xn=function(e,t){return!!e&&s(function(){t?e.call(null,function(){},1):e.call(null)})},Cn=[].join;P(P.P+P.F*(z!=Object||!xn(Cn)),"Array",{join:function(e){return Cn.call(q(this),void 0===e?",":e)}});var kn=[].slice;P(P.P+P.F*s(function(){fe&&kn.call(fe)}),"Array",{slice:function(e,t){var r=$(this.length),n=U(this);if(t=void 0===t?r:t,"Array"==n)return kn.call(this,e,t);for(var i=Q(e,r),a=Q(t,r),o=$(a-i),s=new Array(o),c=0;c<o;c++)s[c]="String"==n?this.charAt(i+c):this[i+c];return s}});var Tn=[].sort,An=[1,2,3];P(P.P+P.F*(s(function(){An.sort(void 0)})||!s(function(){An.sort(null)})||!xn(Tn)),"Array",{sort:function(e){return void 0===e?Tn.call(rt(this)):Tn.call(rt(this),T(e))}});var In=R("species"),Pn=function(e,t){return new(function(e){var t;return ce(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!ce(t.prototype)||(t=void 0),l(t)&&null===(t=t[In])&&(t=void 0)),void 0===t?Array:t}(e))(t)},On=function(e,t){var r=1==e,n=2==e,i=3==e,a=4==e,o=6==e,s=5==e||o,c=t||Pn;return function(t,u,l){for(var f,p,d=rt(t),h=z(d),v=A(u,l,3),m=$(h.length),g=0,y=r?c(t,m):n?c(t,0):void 0;m>g;g++)if((s||g in h)&&(p=v(f=h[g],g,d),e))if(r)y[g]=p;else if(p)switch(e){case 3:return!0;case 5:return f;case 6:return g;case 2:y.push(f)}else if(a)return!1;return o?-1:i||a?a:y}},Rn=On(0),jn=xn([].forEach,!0);P(P.P+P.F*!jn,"Array",{forEach:function(e){return Rn(this,e,arguments[1])}});var Mn=On(1);P(P.P+P.F*!xn([].map,!0),"Array",{map:function(e){return Mn(this,e,arguments[1])}});var Nn=On(2);P(P.P+P.F*!xn([].filter,!0),"Array",{filter:function(e){return Nn(this,e,arguments[1])}});var Bn=On(3);P(P.P+P.F*!xn([].some,!0),"Array",{some:function(e){return Bn(this,e,arguments[1])}});var Dn=On(4);P(P.P+P.F*!xn([].every,!0),"Array",{every:function(e){return Dn(this,e,arguments[1])}});var Fn=function(e,t,r,n,i){T(t);var a=rt(e),o=z(a),s=$(a.length),c=i?s-1:0,u=i?-1:1;if(r<2)for(;;){if(c in o){n=o[c],c+=u;break}if(c+=u,i?c<0:s<=c)throw TypeError("Reduce of empty array with no initial value")}for(;i?c>=0:s>c;c+=u)c in o&&(n=t(n,o[c],c,a));return n};P(P.P+P.F*!xn([].reduce,!0),"Array",{reduce:function(e){return Fn(this,e,arguments.length,arguments[1],!1)}}),P(P.P+P.F*!xn([].reduceRight,!0),"Array",{reduceRight:function(e){return Fn(this,e,arguments.length,arguments[1],!0)}});var Ln=Z(!1),Un=[].indexOf,zn=!!Un&&1/[1].indexOf(1,-0)<0;P(P.P+P.F*(zn||!xn(Un)),"Array",{indexOf:function(e){return zn?Un.apply(this,arguments)||0:Ln(this,e,arguments[1])}});var Vn=[].lastIndexOf,qn=!!Vn&&1/[1].lastIndexOf(1,-0)<0;P(P.P+P.F*(qn||!xn(Vn)),"Array",{lastIndexOf:function(e){if(qn)return Vn.apply(this,arguments)||0;var t=q(this),r=$(t.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,H(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}});var Kn=[].copyWithin||function(e,t){var r=rt(this),n=$(r.length),i=Q(e,n),a=Q(t,n),o=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===o?n:Q(o,n))-a,n-i),c=1;for(a<i&&i<a+s&&(c=-1,a+=s-1,i+=s-1);s-- >0;)a in r?r[i]=r[a]:delete r[i],i+=c,a+=c;return r},Gn=R("unscopables"),Hn=Array.prototype;null==Hn[Gn]&&w(Hn,Gn,{});var Wn=function(e){Hn[Gn][e]=!0};P(P.P,"Array",{copyWithin:Kn}),Wn("copyWithin");var $n=function(e){for(var t=rt(this),r=$(t.length),n=arguments.length,i=Q(n>1?arguments[1]:void 0,r),a=n>2?arguments[2]:void 0,o=void 0===a?r:Q(a,r);o>i;)t[i++]=e;return t};P(P.P,"Array",{fill:$n}),Wn("fill");var Yn=On(5),Jn=!0;"find"in[]&&Array(1).find(function(){Jn=!1}),P(P.P+P.F*Jn,"Array",{find:function(e){return Yn(this,e,arguments.length>1?arguments[1]:void 0)}}),Wn("find");var Qn=On(6),Zn=!0;"findIndex"in[]&&Array(1).findIndex(function(){Zn=!1}),P(P.P+P.F*Zn,"Array",{findIndex:function(e){return Qn(this,e,arguments.length>1?arguments[1]:void 0)}}),Wn("findIndex");var Xn=R("species"),ei=function(e){var t=i[e];c&&t&&!t[Xn]&&y.f(t,Xn,{configurable:!0,get:function(){return this}})};ei("Array");var ti=function(e,t){return{value:t,done:!!e}},ri=Gr(Array,"Array",function(e,t){this._t=q(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,ti(1)):ti(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values");Lr.Arguments=Lr.Array,Wn("keys"),Wn("values"),Wn("entries");var ni=function(){var e=f(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},ii=y.f,ai=ge.f,oi=i.RegExp,si=oi,ci=oi.prototype,ui=/a/g,li=/a/g,fi=new oi(ui)!==ui;if(c&&(!fi||s(function(){return li[R("match")]=!1,oi(ui)!=ui||oi(li)==li||"/a/i"!=oi(ui,"i")}))){oi=function(e,t){var r=this instanceof oi,n=Yr(e),i=void 0===t;return!r&&n&&e.constructor===oi&&i?e:Vt(fi?new si(n&&!i?e.source:e,t):si((n=e instanceof oi)?e.source:e,n&&i?ni.call(e):t),r?this:ci,oi)};for(var pi=function(e){e in oi||ii(oi,e,{configurable:!0,get:function(){return si[e]},set:function(t){si[e]=t}})},di=ai(si),hi=0;di.length>hi;)pi(di[hi++]);ci.constructor=oi,oi.prototype=ci,k(i,"RegExp",oi)}ei("RegExp");var vi=RegExp.prototype.exec,mi=String.prototype.replace,gi=vi,yi=function(){var e=/a/,t=/b*/g;return vi.call(e,"a"),vi.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),bi=void 0!==/()??/.exec("")[1];(yi||bi)&&(gi=function(e){var t,r,n,i,a=this;return bi&&(r=new RegExp("^"+a.source+"$(?!\\s)",ni.call(a))),yi&&(t=a.lastIndex),n=vi.call(a,e),yi&&n&&(a.lastIndex=a.global?n.index+n[0].length:t),bi&&n&&n.length>1&&mi.call(n[0],r,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)}),n});var wi=gi;P({target:"RegExp",proto:!0,forced:wi!==/./.exec},{exec:wi}),c&&"g"!=/./g.flags&&y.f(RegExp.prototype,"flags",{configurable:!0,get:ni});var _i=/./.toString,Ei=function(e){k(RegExp.prototype,"toString",e,!0)};s(function(){return"/a/b"!=_i.call({source:"a",flags:"b"})})?Ei(function(){var e=f(this);return"/".concat(e.source,"/","flags"in e?e.flags:!c&&e instanceof RegExp?ni.call(e):void 0)}):"toString"!=_i.name&&Ei(function(){return _i.call(this)});var Si=Fr(!0),xi=function(e,t,r){return t+(r?Si(e,t).length:1)},Ci=RegExp.prototype.exec,ki=function(e,t){var r=e.exec;if("function"==typeof r){var n=r.call(e,t);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==mt(e))throw new TypeError("RegExp#exec called on incompatible receiver");return Ci.call(e,t)},Ti=R("species"),Ai=!s(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),Ii=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}(),Pi=function(e,t,r){var n=R(e),i=!s(function(){var t={};return t[n]=function(){return 7},7!=""[e](t)}),a=i?!s(function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[Ti]=function(){return r}),r[n](""),!t}):void 0;if(!i||!a||"replace"===e&&!Ai||"split"===e&&!Ii){var o=/./[n],c=r(V,n,""[e],function(e,t,r,n,a){return t.exec===wi?i&&!a?{done:!0,value:o.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),u=c[0],l=c[1];k(String.prototype,e,u),w(RegExp.prototype,n,2==t?function(e,t){return l.call(e,this,t)}:function(e){return l.call(e,this)})}};Pi("match",1,function(e,t,r,n){return[function(r){var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=n(r,e,this);if(t.done)return t.value;var i=f(e),a=String(this);if(!i.global)return ki(i,a);var o=i.unicode;i.lastIndex=0;for(var s,c=[],u=0;null!==(s=ki(i,a));){var l=String(s[0]);c[u]=l,""===l&&(i.lastIndex=xi(a,$(i.lastIndex),o)),u++}return 0===u?null:c}]});var Oi=Math.max,Ri=Math.min,ji=Math.floor,Mi=/\$([$&`']|\d\d?|<[^>]*>)/g,Ni=/\$([$&`']|\d\d?)/g;Pi("replace",2,function(e,t,r,n){return[function(n,i){var a=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,a,i):r.call(String(a),n,i)},function(e,t){var a=n(r,e,this,t);if(a.done)return a.value;var o=f(e),s=String(this),c="function"==typeof t;c||(t=String(t));var u=o.global;if(u){var l=o.unicode;o.lastIndex=0}for(var p=[];;){var d=ki(o,s);if(null===d)break;if(p.push(d),!u)break;""===String(d[0])&&(o.lastIndex=xi(s,$(o.lastIndex),l))}for(var h,v="",m=0,g=0;g<p.length;g++){d=p[g];for(var y=String(d[0]),b=Oi(Ri(H(d.index),s.length),0),w=[],_=1;_<d.length;_++)w.push(void 0===(h=d[_])?h:String(h));var E=d.groups;if(c){var S=[y].concat(w,b,s);void 0!==E&&S.push(E);var x=String(t.apply(void 0,S))}else x=i(y,s,b,w,E,t);b>=m&&(v+=s.slice(m,b)+x,m=b+y.length)}return v+s.slice(m)}];function i(e,t,n,i,a,o){var s=n+e.length,c=i.length,u=Ni;return void 0!==a&&(a=rt(a),u=Mi),r.call(o,u,function(r,o){var u;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(s);case"<":u=a[o.slice(1,-1)];break;default:var l=+o;if(0===l)return r;if(l>c){var f=ji(l/10);return 0===f?r:f<=c?void 0===i[f-1]?o.charAt(1):i[f-1]+o.charAt(1):r}u=i[l-1]}return void 0===u?"":u})}}),Pi("search",1,function(e,t,r,n){return[function(r){var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=n(r,e,this);if(t.done)return t.value;var i=f(e),a=String(this),o=i.lastIndex;ft(o,0)||(i.lastIndex=0);var s=ki(i,a);return ft(i.lastIndex,o)||(i.lastIndex=o),null===s?-1:s.index}]});var Bi=R("species"),Di=function(e,t){var r,n=f(e).constructor;return void 0===n||null==(r=f(n)[Bi])?t:T(r)},Fi=Math.min,Li=[].push,Ui=!s(function(){});Pi("split",2,function(e,t,r,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!Yr(e))return r.call(n,e,t);for(var i,a,o,s=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,l=void 0===t?4294967295:t>>>0,f=new RegExp(e.source,c+"g");(i=wi.call(f,n))&&!((a=f.lastIndex)>u&&(s.push(n.slice(u,i.index)),i.length>1&&i.index<n.length&&Li.apply(s,i.slice(1)),o=i[0].length,u=a,s.length>=l));)f.lastIndex===i.index&&f.lastIndex++;return u===n.length?!o&&f.test("")||s.push(""):s.push(n.slice(u)),s.length>l?s.slice(0,l):s}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,n){var a=e(this),o=null==r?void 0:r[t];return void 0!==o?o.call(r,a,n):i.call(String(a),r,n)},function(e,t){var a=n(i,e,this,t,i!==r);if(a.done)return a.value;var o=f(e),s=String(this),c=Di(o,RegExp),u=o.unicode,l=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(Ui?"y":"g"),p=new c(Ui?o:"^(?:"+o.source+")",l),d=void 0===t?4294967295:t>>>0;if(0===d)return[];if(0===s.length)return null===ki(p,s)?[s]:[];for(var h=0,v=0,m=[];v<s.length;){p.lastIndex=Ui?v:0;var g,y=ki(p,Ui?s:s.slice(v));if(null===y||(g=Fi($(p.lastIndex+(Ui?0:v)),s.length))===h)v=xi(s,v,u);else{if(m.push(s.slice(h,v)),m.length===d)return m;for(var b=1;b<=y.length-1;b++)if(m.push(y[b]),m.length===d)return m;v=h=g}}return m.push(s.slice(h)),m}]});var zi,Vi,qi,Ki=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e},Gi=n(function(e){var t={},r={},n=e.exports=function(e,n,i,a,o){var s,c,u,l,p=o?function(){return e}:wn(e),d=A(i,a,n?2:1),h=0;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(gn(p)){for(s=$(e.length);s>h;h++)if((l=n?d(f(c=e[h])[0],c[1]):d(e[h]))===t||l===r)return l}else for(u=p.call(e);!(c=u.next()).done;)if((l=hn(u,d,c.value,n))===t||l===r)return l};n.BREAK=t,n.RETURN=r}),Hi=i.process,Wi=i.setImmediate,$i=i.clearImmediate,Yi=i.MessageChannel,Ji=i.Dispatch,Qi=0,Zi={},Xi=function(){var e=+this;if(Zi.hasOwnProperty(e)){var t=Zi[e];delete Zi[e],t()}},ea=function(e){Xi.call(e.data)};Wi&&$i||(Wi=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return Zi[++Qi]=function(){yt("function"==typeof e?e:Function(e),t)},zi(Qi),Qi},$i=function(e){delete Zi[e]},"process"==U(Hi)?zi=function(e){Hi.nextTick(A(Xi,e,1))}:Ji&&Ji.now?zi=function(e){Ji.now(A(Xi,e,1))}:Yi?(qi=(Vi=new Yi).port2,Vi.port1.onmessage=ea,zi=A(qi.postMessage,qi,1)):i.addEventListener&&"function"==typeof postMessage&&!i.importScripts?(zi=function(e){i.postMessage(e+"","*")},i.addEventListener("message",ea,!1)):zi="onreadystatechange"in h("script")?function(e){fe.appendChild(h("script")).onreadystatechange=function(){fe.removeChild(this),Xi.call(e)}}:function(e){setTimeout(A(Xi,e,1),0)});var ta={set:Wi,clear:$i},ra=ta.set,na=i.MutationObserver||i.WebKitMutationObserver,ia=i.process,aa=i.Promise,oa="process"==U(ia),sa=function(){var e,t,r,n=function(){var n,i;for(oa&&(n=ia.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(oa)r=function(){ia.nextTick(n)};else if(!na||i.navigator&&i.navigator.standalone)if(aa&&aa.resolve){var a=aa.resolve(void 0);r=function(){a.then(n)}}else r=function(){ra.call(i,n)};else{var o=!0,s=document.createTextNode("");new na(n).observe(s,{characterData:!0}),r=function(){s.data=o=!o}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}};function ca(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=T(t),this.reject=T(r)}var ua,la,fa,pa,da={f:function(e){return new ca(e)}},ha=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},va=i.navigator,ma=va&&va.userAgent||"",ga=function(e,t){if(f(e),l(t)&&t.constructor===e)return t;var r=da.f(e);return(0,r.resolve)(t),r.promise},ya=function(e,t,r){for(var n in t)k(e,n,t[n],r);return e},ba=ta.set,wa=sa(),_a=i.TypeError,Ea=i.process,Sa=Ea&&Ea.versions,xa=Sa&&Sa.v8||"",Ca=i.Promise,ka="process"==mt(Ea),Ta=function(){},Aa=la=da.f,Ia=!!function(){try{var e=Ca.resolve(1),t=(e.constructor={})[R("species")]=function(e){e(Ta,Ta)};return(ka||"function"==typeof PromiseRejectionEvent)&&e.then(Ta)instanceof t&&0!==xa.indexOf("6.6")&&-1===ma.indexOf("Chrome/66")}catch(e){}}(),Pa=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},Oa=function(e,t){if(!e._n){e._n=!0;var r=e._c;wa(function(){for(var n=e._v,i=1==e._s,a=0,o=function(t){var r,a,o,s=i?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{s?(i||(2==e._h&&Ma(e),e._h=1),!0===s?r=n:(l&&l.enter(),r=s(n),l&&(l.exit(),o=!0)),r===t.promise?u(_a("Promise-chain cycle")):(a=Pa(r))?a.call(r,c,u):c(r)):u(n)}catch(e){l&&!o&&l.exit(),u(e)}};r.length>a;)o(r[a++]);e._c=[],e._n=!1,t&&!e._h&&Ra(e)})}},Ra=function(e){ba.call(i,function(){var t,r,n,a=e._v,o=ja(e);if(o&&(t=ha(function(){ka?Ea.emit("unhandledRejection",a,e):(r=i.onunhandledrejection)?r({promise:e,reason:a}):(n=i.console)&&n.error&&n.error("Unhandled promise rejection",a)}),e._h=ka||ja(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},ja=function(e){return 1!==e._h&&0===(e._a||e._c).length},Ma=function(e){ba.call(i,function(){var t;ka?Ea.emit("rejectionHandled",e):(t=i.onrejectionhandled)&&t({promise:e,reason:e._v})})},Na=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),Oa(t,!0))},Ba=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw _a("Promise can't be resolved itself");(t=Pa(e))?wa(function(){var n={_w:r,_d:!1};try{t.call(e,A(Ba,n,1),A(Na,n,1))}catch(e){Na.call(n,e)}}):(r._v=e,r._s=1,Oa(r,!1))}catch(e){Na.call({_w:r,_d:!1},e)}}};Ia||(Ca=function(e){Ki(this,Ca,"Promise","_h"),T(e),ua.call(this);try{e(A(Ba,this,1),A(Na,this,1))}catch(e){Na.call(this,e)}},(ua=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=ya(Ca.prototype,{then:function(e,t){var r=Aa(Di(this,Ca));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=ka?Ea.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&Oa(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),fa=function(){var e=new ua;this.promise=e,this.resolve=A(Ba,e,1),this.reject=A(Na,e,1)},da.f=Aa=function(e){return e===Ca||e===pa?new fa(e):la(e)}),P(P.G+P.W+P.F*!Ia,{Promise:Ca}),N(Ca,"Promise"),ei("Promise"),pa=u.Promise,P(P.S+P.F*!Ia,"Promise",{reject:function(e){var t=Aa(this);return(0,t.reject)(e),t.promise}}),P(P.S+P.F*!Ia,"Promise",{resolve:function(e){return ga(this,e)}}),P(P.S+P.F*!(Ia&&Sn(function(e){Ca.all(e).catch(Ta)})),"Promise",{all:function(e){var t=this,r=Aa(t),n=r.resolve,i=r.reject,a=ha(function(){var r=[],a=0,o=1;Gi(e,!1,function(e){var s=a++,c=!1;r.push(void 0),o++,t.resolve(e).then(function(e){c||(c=!0,r[s]=e,--o||n(r))},i)}),--o||n(r)});return a.e&&i(a.v),r.promise},race:function(e){var t=this,r=Aa(t),n=r.reject,i=ha(function(){Gi(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}});var Da=function(e,t){if(!l(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e},Fa=y.f,La=O.fastKey,Ua=c?"_s":"size",za=function(e,t){var r,n=La(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r},Va={getConstructor:function(e,t,r,n){var i=e(function(e,a){Ki(e,i,t,"_i"),e._t=t,e._i=ve(null),e._f=void 0,e._l=void 0,e[Ua]=0,null!=a&&Gi(a,r,e[n],e)});return ya(i.prototype,{clear:function(){for(var e=Da(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[Ua]=0},delete:function(e){var r=Da(this,t),n=za(r,e);if(n){var i=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=i),i&&(i.p=a),r._f==n&&(r._f=i),r._l==n&&(r._l=a),r[Ua]--}return!!n},forEach:function(e){Da(this,t);for(var r,n=A(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!za(Da(this,t),e)}}),c&&Fa(i.prototype,"size",{get:function(){return Da(this,t)[Ua]}}),i},def:function(e,t,r){var n,i,a=za(e,t);return a?a.v=r:(e._l=a={i:i=La(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[Ua]++,"F"!==i&&(e._i[i]=a)),e},getEntry:za,setStrong:function(e,t,r){Gr(e,t,function(e,r){this._t=Da(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?ti(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,ti(1))},r?"entries":"values",!r,!0),ei(t)}},qa=function(e,t,r,n,a,o){var c=i[e],u=c,f=a?"set":"add",p=u&&u.prototype,d={},h=function(e){var t=p[e];k(p,e,"delete"==e?function(e){return!(o&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return o&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof u&&(o||p.forEach&&!s(function(){(new u).entries().next()}))){var v=new u,m=v[f](o?{}:-0,1)!=v,g=s(function(){v.has(1)}),y=Sn(function(e){new u(e)}),b=!o&&s(function(){for(var e=new u,t=5;t--;)e[f](t,t);return!e.has(-0)});y||((u=t(function(t,r){Ki(t,u,e);var n=Vt(new c,t,u);return null!=r&&Gi(r,a,n[f],n),n})).prototype=p,p.constructor=u),(g||b)&&(h("delete"),h("has"),a&&h("get")),(b||m)&&h(f),o&&p.clear&&delete p.clear}else u=n.getConstructor(t,e,a,f),ya(u.prototype,r),O.NEED=!0;return N(u,e),d[e]=u,P(P.G+P.W+P.F*(u!=c),d),o||n.setStrong(u,e,a),u},Ka=qa("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=Va.getEntry(Da(this,"Map"),e);return t&&t.v},set:function(e,t){return Va.def(Da(this,"Map"),0===e?0:e,t)}},Va,!0),Ga=qa("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return Va.def(Da(this,"Set"),e=0===e?0:e,e)}},Va),Ha=O.getWeak,Wa=On(5),$a=On(6),Ya=0,Ja=function(e){return e._l||(e._l=new Qa)},Qa=function(){this.a=[]},Za=function(e,t){return Wa(e.a,function(e){return e[0]===t})};Qa.prototype={get:function(e){var t=Za(this,e);if(t)return t[1]},has:function(e){return!!Za(this,e)},set:function(e,t){var r=Za(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=$a(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}};var Xa={getConstructor:function(e,t,r,n){var i=e(function(e,a){Ki(e,i,t,"_i"),e._t=t,e._i=Ya++,e._l=void 0,null!=a&&Gi(a,r,e[n],e)});return ya(i.prototype,{delete:function(e){if(!l(e))return!1;var r=Ha(e);return!0===r?Ja(Da(this,t)).delete(e):r&&o(r,this._i)&&delete r[this._i]},has:function(e){if(!l(e))return!1;var r=Ha(e);return!0===r?Ja(Da(this,t)).has(e):r&&o(r,this._i)}}),i},def:function(e,t,r){var n=Ha(f(t),!0);return!0===n?Ja(e).set(t,r):n[e._i]=r,e},ufstore:Ja},eo=n(function(e){var t,r=On(0),n=Da,a=!i.ActiveXObject&&"ActiveXObject"in i,o=O.getWeak,s=Object.isExtensible,c=Xa.ufstore,u=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},f={get:function(e){if(l(e)){var t=o(e);return!0===t?c(Da(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return Xa.def(Da(this,"WeakMap"),e,t)}},p=e.exports=qa("WeakMap",u,f,Xa,!0,!0);n&&a&&(t=Xa.getConstructor(u,"WeakMap"),lt(t.prototype,f),O.NEED=!0,r(["delete","has","get","set"],function(e){var r=p.prototype,n=r[e];k(r,e,function(r,i){if(l(r)&&!s(r)){this._f||(this._f=new t);var a=this._f[e](r,i);return"set"==e?this:a}return n.call(this,r,i)})}))});qa("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return Xa.def(Da(this,"WeakSet"),e,!0)}},Xa,!1,!0);for(var to,ro=S("typed_array"),no=S("view"),io=!(!i.ArrayBuffer||!i.DataView),ao=io,oo=0,so="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");oo<9;)(to=i[so[oo++]])?(w(to.prototype,ro,!0),w(to.prototype,no,!0)):ao=!1;var co={ABV:io,CONSTR:ao,TYPED:ro,VIEW:no},uo=function(e){if(void 0===e)return 0;var t=H(e),r=$(t);if(t!==r)throw RangeError("Wrong length!");return r},lo=n(function(e,t){var r=ge.f,n=y.f,a="prototype",o="Wrong index!",u=i.ArrayBuffer,l=i.DataView,f=i.Math,p=i.RangeError,d=i.Infinity,h=u,v=f.abs,m=f.pow,g=f.floor,b=f.log,_=f.LN2,E=c?"_b":"buffer",S=c?"_l":"byteLength",x=c?"_o":"byteOffset";function C(e,t,r){var n,i,a,o=new Array(r),s=8*r-t-1,c=(1<<s)-1,u=c>>1,l=23===t?m(2,-24)-m(2,-77):0,f=0,p=e<0||0===e&&1/e<0?1:0;for((e=v(e))!=e||e===d?(i=e!=e?1:0,n=c):(n=g(b(e)/_),e*(a=m(2,-n))<1&&(n--,a*=2),(e+=n+u>=1?l/a:l*m(2,1-u))*a>=2&&(n++,a/=2),n+u>=c?(i=0,n=c):n+u>=1?(i=(e*a-1)*m(2,t),n+=u):(i=e*m(2,u-1)*m(2,t),n=0));t>=8;o[f++]=255&i,i/=256,t-=8);for(n=n<<t|i,s+=t;s>0;o[f++]=255&n,n/=256,s-=8);return o[--f]|=128*p,o}function k(e,t,r){var n,i=8*r-t-1,a=(1<<i)-1,o=a>>1,s=i-7,c=r-1,u=e[c--],l=127&u;for(u>>=7;s>0;l=256*l+e[c],c--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;n=256*n+e[c],c--,s-=8);if(0===l)l=1-o;else{if(l===a)return n?NaN:u?-d:d;n+=m(2,t),l-=o}return(u?-1:1)*n*m(2,l-t)}function T(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function A(e){return[255&e]}function I(e){return[255&e,e>>8&255]}function P(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function O(e){return C(e,52,8)}function R(e){return C(e,23,4)}function j(e,t,r){n(e[a],t,{get:function(){return this[r]}})}function M(e,t,r,n){var i=uo(+r);if(i+t>e[S])throw p(o);var a=e[E]._b,s=i+e[x],c=a.slice(s,s+t);return n?c:c.reverse()}function B(e,t,r,n,i,a){var s=uo(+r);if(s+t>e[S])throw p(o);for(var c=e[E]._b,u=s+e[x],l=n(+i),f=0;f<t;f++)c[u+f]=l[a?f:t-f-1]}if(co.ABV){if(!s(function(){u(1)})||!s(function(){new u(-1)})||s(function(){return new u,new u(1.5),new u(NaN),"ArrayBuffer"!=u.name})){for(var D,F=(u=function(e){return Ki(this,u),new h(uo(e))})[a]=h[a],L=r(h),U=0;L.length>U;)(D=L[U++])in u||w(u,D,h[D]);F.constructor=u}var z=new l(new u(2)),V=l[a].setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),!z.getInt8(0)&&z.getInt8(1)||ya(l[a],{setInt8:function(e,t){V.call(this,e,t<<24>>24)},setUint8:function(e,t){V.call(this,e,t<<24>>24)}},!0)}else u=function(e){Ki(this,u,"ArrayBuffer");var t=uo(e);this._b=$n.call(new Array(t),0),this[S]=t},l=function(e,t,r){Ki(this,l,"DataView"),Ki(e,u,"DataView");var n=e[S],i=H(t);if(i<0||i>n)throw p("Wrong offset!");if(i+(r=void 0===r?n-i:$(r))>n)throw p("Wrong length!");this[E]=e,this[x]=i,this[S]=r},c&&(j(u,"byteLength","_l"),j(l,"buffer","_b"),j(l,"byteLength","_l"),j(l,"byteOffset","_o")),ya(l[a],{getInt8:function(e){return M(this,1,e)[0]<<24>>24},getUint8:function(e){return M(this,1,e)[0]},getInt16:function(e){var t=M(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=M(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return T(M(this,4,e,arguments[1]))},getUint32:function(e){return T(M(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return k(M(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return k(M(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){B(this,1,e,A,t)},setUint8:function(e,t){B(this,1,e,A,t)},setInt16:function(e,t){B(this,2,e,I,t,arguments[2])},setUint16:function(e,t){B(this,2,e,I,t,arguments[2])},setInt32:function(e,t){B(this,4,e,P,t,arguments[2])},setUint32:function(e,t){B(this,4,e,P,t,arguments[2])},setFloat32:function(e,t){B(this,4,e,R,t,arguments[2])},setFloat64:function(e,t){B(this,8,e,O,t,arguments[2])}});N(u,"ArrayBuffer"),N(l,"DataView"),w(l[a],co.VIEW,!0),t.ArrayBuffer=u,t.DataView=l}),fo=i.ArrayBuffer,po=lo.ArrayBuffer,ho=lo.DataView,vo=co.ABV&&fo.isView,mo=po.prototype.slice,go=co.VIEW;P(P.G+P.W+P.F*(fo!==po),{ArrayBuffer:po}),P(P.S+P.F*!co.CONSTR,"ArrayBuffer",{isView:function(e){return vo&&vo(e)||l(e)&&go in e}}),P(P.P+P.U+P.F*s(function(){return!new po(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==mo&&void 0===t)return mo.call(f(this),e);for(var r=f(this).byteLength,n=Q(e,r),i=Q(void 0===t?r:t,r),a=new(Di(this,po))($(i-n)),o=new ho(this),s=new ho(a),c=0;n<i;)s.setUint8(c++,o.getUint8(n++));return a}}),ei("ArrayBuffer"),P(P.G+P.W+P.F*!co.ABV,{DataView:lo.DataView});var yo=n(function(e){if(c){var t=i,r=s,n=P,a=co,u=lo,f=A,p=Ki,d=b,h=w,v=ya,g=H,_=$,E=uo,x=Q,C=m,k=o,T=mt,I=l,O=rt,j=gn,M=ve,N=at,B=ge.f,D=wn,F=S,L=R,U=On,z=Z,V=Di,q=ri,K=Lr,G=Sn,W=ei,Y=$n,J=Kn,X=y,ee=Se,te=X.f,re=ee.f,ne=t.RangeError,ie=t.TypeError,ae=t.Uint8Array,oe=Array.prototype,se=u.ArrayBuffer,ce=u.DataView,ue=U(0),le=U(2),fe=U(3),pe=U(4),de=U(5),he=U(6),me=z(!0),ye=z(!1),be=q.values,we=q.keys,_e=q.entries,Ee=oe.lastIndexOf,xe=oe.reduce,Ce=oe.reduceRight,ke=oe.join,Te=oe.sort,Ae=oe.slice,Ie=oe.toString,Pe=oe.toLocaleString,Oe=L("iterator"),Re=L("toStringTag"),je=F("typed_constructor"),Me=F("def_constructor"),Ne=a.CONSTR,Be=a.TYPED,De=a.VIEW,Fe=U(1,function(e,t){return qe(V(e,e[Me]),t)}),Le=r(function(){return 1===new ae(new Uint16Array([1]).buffer)[0]}),Ue=!!ae&&!!ae.prototype.set&&r(function(){new ae(1).set({})}),ze=function(e,t){var r=g(e);if(r<0||r%t)throw ne("Wrong offset!");return r},Ve=function(e){if(I(e)&&Be in e)return e;throw ie(e+" is not a typed array!")},qe=function(e,t){if(!(I(e)&&je in e))throw ie("It is not a typed array constructor!");return new e(t)},Ke=function(e,t){return Ge(V(e,e[Me]),t)},Ge=function(e,t){for(var r=0,n=t.length,i=qe(e,n);n>r;)i[r]=t[r++];return i},He=function(e,t,r){te(e,t,{get:function(){return this._d[r]}})},We=function(e){var t,r,n,i,a,o,s=O(e),c=arguments.length,u=c>1?arguments[1]:void 0,l=void 0!==u,p=D(s);if(null!=p&&!j(p)){for(o=p.call(s),n=[],t=0;!(a=o.next()).done;t++)n.push(a.value);s=n}for(l&&c>2&&(u=f(u,arguments[2],2)),t=0,r=_(s.length),i=qe(this,r);r>t;t++)i[t]=l?u(s[t],t):s[t];return i},$e=function(){for(var e=0,t=arguments.length,r=qe(this,t);t>e;)r[e]=arguments[e++];return r},Ye=!!ae&&r(function(){Pe.call(new ae(1))}),Je=function(){return Pe.apply(Ye?Ae.call(Ve(this)):Ve(this),arguments)},Qe={copyWithin:function(e,t){return J.call(Ve(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return pe(Ve(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return Y.apply(Ve(this),arguments)},filter:function(e){return Ke(this,le(Ve(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return de(Ve(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return he(Ve(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){ue(Ve(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ye(Ve(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return me(Ve(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ke.apply(Ve(this),arguments)},lastIndexOf:function(e){return Ee.apply(Ve(this),arguments)},map:function(e){return Fe(Ve(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return xe.apply(Ve(this),arguments)},reduceRight:function(e){return Ce.apply(Ve(this),arguments)},reverse:function(){for(var e,t=Ve(this).length,r=Math.floor(t/2),n=0;n<r;)e=this[n],this[n++]=this[--t],this[t]=e;return this},some:function(e){return fe(Ve(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return Te.call(Ve(this),e)},subarray:function(e,t){var r=Ve(this),n=r.length,i=x(e,n);return new(V(r,r[Me]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,_((void 0===t?n:x(t,n))-i))}},Ze=function(e,t){return Ke(this,Ae.call(Ve(this),e,t))},Xe=function(e){Ve(this);var t=ze(arguments[1],1),r=this.length,n=O(e),i=_(n.length),a=0;if(i+t>r)throw ne("Wrong length!");for(;a<i;)this[t+a]=n[a++]},et={entries:function(){return _e.call(Ve(this))},keys:function(){return we.call(Ve(this))},values:function(){return be.call(Ve(this))}},tt=function(e,t){return I(e)&&e[Be]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},nt=function(e,t){return tt(e,t=C(t,!0))?d(2,e[t]):re(e,t)},it=function(e,t,r){return!(tt(e,t=C(t,!0))&&I(r)&&k(r,"value"))||k(r,"get")||k(r,"set")||r.configurable||k(r,"writable")&&!r.writable||k(r,"enumerable")&&!r.enumerable?te(e,t,r):(e[t]=r.value,e)};Ne||(ee.f=nt,X.f=it),n(n.S+n.F*!Ne,"Object",{getOwnPropertyDescriptor:nt,defineProperty:it}),r(function(){Ie.call({})})&&(Ie=Pe=function(){return ke.call(this)});var ot=v({},Qe);v(ot,et),h(ot,Oe,et.values),v(ot,{slice:Ze,set:Xe,constructor:function(){},toString:Ie,toLocaleString:Je}),He(ot,"buffer","b"),He(ot,"byteOffset","o"),He(ot,"byteLength","l"),He(ot,"length","e"),te(ot,Re,{get:function(){return this[Be]}}),e.exports=function(e,i,o,s){var c=e+((s=!!s)?"Clamped":"")+"Array",u="get"+e,l="set"+e,f=t[c],d=f||{},v=f&&N(f),m=!f||!a.ABV,g={},y=f&&f.prototype,b=function(e,t){te(e,t,{get:function(){return function(e,t){var r=e._d;return r.v[u](t*i+r.o,Le)}(this,t)},set:function(e){return function(e,t,r){var n=e._d;s&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),n.v[l](t*i+n.o,r,Le)}(this,t,e)},enumerable:!0})};m?(f=o(function(e,t,r,n){p(e,f,c,"_d");var a,o,s,u,l=0,d=0;if(I(t)){if(!(t instanceof se||"ArrayBuffer"==(u=T(t))||"SharedArrayBuffer"==u))return Be in t?Ge(f,t):We.call(f,t);a=t,d=ze(r,i);var v=t.byteLength;if(void 0===n){if(v%i)throw ne("Wrong length!");if((o=v-d)<0)throw ne("Wrong length!")}else if((o=_(n)*i)+d>v)throw ne("Wrong length!");s=o/i}else s=E(t),a=new se(o=s*i);for(h(e,"_d",{b:a,o:d,l:o,e:s,v:new ce(a)});l<s;)b(e,l++)}),y=f.prototype=M(ot),h(y,"constructor",f)):r(function(){f(1)})&&r(function(){new f(-1)})&&G(function(e){new f,new f(null),new f(1.5),new f(e)},!0)||(f=o(function(e,t,r,n){var a;return p(e,f,c),I(t)?t instanceof se||"ArrayBuffer"==(a=T(t))||"SharedArrayBuffer"==a?void 0!==n?new d(t,ze(r,i),n):void 0!==r?new d(t,ze(r,i)):new d(t):Be in t?Ge(f,t):We.call(f,t):new d(E(t))}),ue(v!==Function.prototype?B(d).concat(B(v)):B(d),function(e){e in f||h(f,e,d[e])}),f.prototype=y,y.constructor=f);var w=y[Oe],S=!!w&&("values"==w.name||null==w.name),x=et.values;h(f,je,!0),h(y,Be,c),h(y,De,!0),h(y,Me,f),(s?new f(1)[Re]==c:Re in y)||te(y,Re,{get:function(){return c}}),g[c]=f,n(n.G+n.W+n.F*(f!=d),g),n(n.S,c,{BYTES_PER_ELEMENT:i}),n(n.S+n.F*r(function(){d.of.call(f,1)}),c,{from:We,of:$e}),"BYTES_PER_ELEMENT"in y||h(y,"BYTES_PER_ELEMENT",i),n(n.P,c,Qe),W(c),n(n.P+n.F*Ue,c,{set:Xe}),n(n.P+n.F*!S,c,et),y.toString!=Ie&&(y.toString=Ie),n(n.P+n.F*r(function(){new f(1).slice()}),c,{slice:Ze}),n(n.P+n.F*(r(function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()})||!r(function(){y.toLocaleString.call([1,2])})),c,{toLocaleString:Je}),K[c]=S?w:x,S||h(y,Oe,x)}}else e.exports=function(){}});yo("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}}),yo("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}}),yo("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0),yo("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}}),yo("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}}),yo("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}}),yo("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}}),yo("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}}),yo("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}});var bo=(i.Reflect||{}).apply,wo=Function.apply;P(P.S+P.F*!s(function(){bo(function(){})}),"Reflect",{apply:function(e,t,r){var n=T(e),i=f(r);return bo?bo(n,t,i):wo.call(n,t,i)}});var _o=(i.Reflect||{}).construct,Eo=s(function(){function e(){}return!(_o(function(){},[],e)instanceof e)}),So=!s(function(){_o(function(){})});P(P.S+P.F*(Eo||So),"Reflect",{construct:function(e,t){T(e),f(t);var r=arguments.length<3?e:T(arguments[2]);if(So&&!Eo)return _o(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(_t.apply(e,n))}var i=r.prototype,a=ve(l(i)?i:Object.prototype),o=Function.apply.call(e,a,t);return l(o)?o:a}}),P(P.S+P.F*s(function(){Reflect.defineProperty(y.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){f(e),t=m(t,!0),f(r);try{return y.f(e,t,r),!0}catch(e){return!1}}});var xo=Se.f;P(P.S,"Reflect",{deleteProperty:function(e,t){var r=xo(f(e),t);return!(r&&!r.configurable)&&delete e[t]}});var Co=function(e){this._t=f(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};zr(Co,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),P(P.S,"Reflect",{enumerate:function(e){return new Co(e)}}),P(P.S,"Reflect",{get:function e(t,r){var n,i,a=arguments.length<3?t:arguments[2];return f(t)===a?t[r]:(n=Se.f(t,r))?o(n,"value")?n.value:void 0!==n.get?n.get.call(a):void 0:l(i=at(t))?e(i,r,a):void 0}}),P(P.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return Se.f(f(e),t)}}),P(P.S,"Reflect",{getPrototypeOf:function(e){return at(f(e))}}),P(P.S,"Reflect",{has:function(e,t){return t in e}});var ko=Object.isExtensible;P(P.S,"Reflect",{isExtensible:function(e){return f(e),!ko||ko(e)}});var To=i.Reflect,Ao=To&&To.ownKeys||function(e){var t=ge.f(f(e)),r=oe.f;return r?t.concat(r(e)):t};P(P.S,"Reflect",{ownKeys:Ao});var Io=Object.preventExtensions;P(P.S,"Reflect",{preventExtensions:function(e){f(e);try{return Io&&Io(e),!0}catch(e){return!1}}}),P(P.S,"Reflect",{set:function e(t,r,n){var i,a,s=arguments.length<4?t:arguments[3],c=Se.f(f(t),r);if(!c){if(l(a=at(t)))return e(a,r,n,s);c=b(0)}if(o(c,"value")){if(!1===c.writable||!l(s))return!1;if(i=Se.f(s,r)){if(i.get||i.set||!1===i.writable)return!1;i.value=n,y.f(s,r,i)}else y.f(s,r,b(0,n));return!0}return void 0!==c.set&&(c.set.call(s,n),!0)}}),dt&&P(P.S,"Reflect",{setPrototypeOf:function(e,t){dt.check(e,t);try{return dt.set(e,t),!0}catch(e){return!1}}});var Po=Z(!0);P(P.P,"Array",{includes:function(e){return Po(this,e,arguments.length>1?arguments[1]:void 0)}}),Wn("includes");var Oo=R("isConcatSpreadable");var Ro=function e(t,r,n,i,a,o,s,c){for(var u,f,p=a,d=0,h=!!s&&A(s,c,3);d<i;){if(d in n){if(u=h?h(n[d],d,r):n[d],f=!1,l(u)&&(f=void 0!==(f=u[Oo])?!!f:ce(u)),f&&o>0)p=e(t,r,u,$(u.length),p,o-1)-1;else{if(p>=9007199254740991)throw TypeError();t[p]=u}p++}d++}return p};P(P.P,"Array",{flatMap:function(e){var t,r,n=rt(this);return T(e),t=$(n.length),r=Pn(n,0),Ro(r,n,n,t,0,1,e,arguments[1]),r}}),Wn("flatMap"),P(P.P,"Array",{flatten:function(){var e=arguments[0],t=rt(this),r=$(t.length),n=Pn(t,0);return Ro(n,t,t,r,0,void 0===e?1:H(e)),n}}),Wn("flatten");var jo=Fr(!0);P(P.P,"String",{at:function(e){return jo(this,e)}});var Mo=function(e,t,r,n){var i=String(V(e)),a=i.length,o=void 0===r?" ":String(r),s=$(t);if(s<=a||""==o)return i;var c=s-a,u=nr.call(o,Math.ceil(c/o.length));return u.length>c&&(u=u.slice(0,c)),n?u+i:i+u},No=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(ma);P(P.P+P.F*No,"String",{padStart:function(e){return Mo(this,e,arguments.length>1?arguments[1]:void 0,!0)}});var Bo=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(ma);P(P.P+P.F*Bo,"String",{padEnd:function(e){return Mo(this,e,arguments.length>1?arguments[1]:void 0,!1)}}),jt("trimLeft",function(e){return function(){return e(this,1)}},"trimStart"),jt("trimRight",function(e){return function(){return e(this,2)}},"trimEnd");var Do=RegExp.prototype,Fo=function(e,t){this._r=e,this._s=t};zr(Fo,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),P(P.P,"String",{matchAll:function(e){if(V(this),!Yr(e))throw TypeError(e+" is not a regexp!");var t=String(this),r="flags"in Do?String(e.flags):ni.call(e),n=new RegExp(e.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=$(e.lastIndex),new Fo(n,t)}}),F("asyncIterator"),F("observable"),P(P.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=q(e),i=Se.f,a=Ao(n),o={},s=0;a.length>s;)void 0!==(r=i(n,t=a[s++]))&&yn(o,t,r);return o}});var Lo=se.f,Uo=function(e){return function(t){for(var r,n=q(t),i=ae(n),a=i.length,o=0,s=[];a>o;)Lo.call(n,r=i[o++])&&s.push(e?[r,n[r]]:n[r]);return s}},zo=Uo(!1);P(P.S,"Object",{values:function(e){return zo(e)}});var Vo=Uo(!0);P(P.S,"Object",{entries:function(e){return Vo(e)}});var qo=!s(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete i[e]});c&&P(P.P+qo,"Object",{__defineGetter__:function(e,t){y.f(rt(this),e,{get:T(t),enumerable:!0,configurable:!0})}}),c&&P(P.P+qo,"Object",{__defineSetter__:function(e,t){y.f(rt(this),e,{set:T(t),enumerable:!0,configurable:!0})}});var Ko=Se.f;c&&P(P.P+qo,"Object",{__lookupGetter__:function(e){var t,r=rt(this),n=m(e,!0);do{if(t=Ko(r,n))return t.get}while(r=at(r))}});var Go=Se.f;c&&P(P.P+qo,"Object",{__lookupSetter__:function(e){var t,r=rt(this),n=m(e,!0);do{if(t=Go(r,n))return t.set}while(r=at(r))}});var Ho=function(e,t){var r=[];return Gi(e,!1,r.push,r,t),r},Wo=function(e){return function(){if(mt(this)!=e)throw TypeError(e+"#toJSON isn't generic");return Ho(this)}};P(P.P+P.R,"Map",{toJSON:Wo("Map")}),P(P.P+P.R,"Set",{toJSON:Wo("Set")});var $o=function(e){P(P.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})};$o("Map"),$o("Set"),$o("WeakMap"),$o("WeakSet");var Yo=function(e){P(P.S,e,{from:function(e){var t,r,n,i,a=arguments[1];return T(this),(t=void 0!==a)&&T(a),null==e?new this:(r=[],t?(n=0,i=A(a,arguments[2],2),Gi(e,!1,function(e){r.push(i(e,n++))})):Gi(e,!1,r.push,r),new this(r))}})};Yo("Map"),Yo("Set"),Yo("WeakMap"),Yo("WeakSet"),P(P.G,{global:i}),P(P.S,"System",{global:i}),P(P.S,"Error",{isError:function(e){return"Error"===U(e)}}),P(P.S,"Math",{clamp:function(e,t,r){return Math.min(r,Math.max(t,e))}}),P(P.S,"Math",{DEG_PER_RAD:Math.PI/180});var Jo=180/Math.PI;P(P.S,"Math",{degrees:function(e){return e*Jo}});var Qo=Math.scale||function(e,t,r,n,i){return 0===arguments.length||e!=e||t!=t||r!=r||n!=n||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-n)/(r-t)+n};P(P.S,"Math",{fscale:function(e,t,r,n,i){return Or(Qo(e,t,r,n,i))}}),P(P.S,"Math",{iaddh:function(e,t,r,n){var i=e>>>0,a=r>>>0;return(t>>>0)+(n>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}}),P(P.S,"Math",{isubh:function(e,t,r,n){var i=e>>>0,a=r>>>0;return(t>>>0)-(n>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}}),P(P.S,"Math",{imulh:function(e,t){var r=+e,n=+t,i=65535&r,a=65535&n,o=r>>16,s=n>>16,c=(o*a>>>0)+(i*a>>>16);return o*s+(c>>16)+((i*s>>>0)+(65535&c)>>16)}}),P(P.S,"Math",{RAD_PER_DEG:180/Math.PI});var Zo=Math.PI/180;P(P.S,"Math",{radians:function(e){return e*Zo}}),P(P.S,"Math",{scale:Qo}),P(P.S,"Math",{umulh:function(e,t){var r=+e,n=+t,i=65535&r,a=65535&n,o=r>>>16,s=n>>>16,c=(o*a>>>0)+(i*a>>>16);return o*s+(c>>>16)+((i*s>>>0)+(65535&c)>>>16)}}),P(P.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}}),P(P.P+P.R,"Promise",{finally:function(e){var t=Di(this,u.Promise||i.Promise),r="function"==typeof e;return this.then(r?function(r){return ga(t,e()).then(function(){return r})}:e,r?function(r){return ga(t,e()).then(function(){throw r})}:e)}}),P(P.S,"Promise",{try:function(e){var t=da.f(this),r=ha(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}});var Xo=x("metadata"),es=Xo.store||(Xo.store=new eo),ts=function(e,t,r){var n=es.get(e);if(!n){if(!r)return;es.set(e,n=new Ka)}var i=n.get(t);if(!i){if(!r)return;n.set(t,i=new Ka)}return i},rs={store:es,map:ts,has:function(e,t,r){var n=ts(t,r,!1);return void 0!==n&&n.has(e)},get:function(e,t,r){var n=ts(t,r,!1);return void 0===n?void 0:n.get(e)},set:function(e,t,r,n){ts(r,n,!0).set(e,t)},keys:function(e,t){var r=ts(e,t,!1),n=[];return r&&r.forEach(function(e,t){n.push(t)}),n},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){P(P.S,"Reflect",e)}},ns=rs.key,is=rs.set;rs.exp({defineMetadata:function(e,t,r,n){is(e,t,f(r),ns(n))}});var as=rs.key,os=rs.map,ss=rs.store;rs.exp({deleteMetadata:function(e,t){var r=arguments.length<3?void 0:as(arguments[2]),n=os(f(t),r,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;var i=ss.get(t);return i.delete(r),!!i.size||ss.delete(t)}});var cs=rs.has,us=rs.get,ls=rs.key,fs=function(e,t,r){if(cs(e,t,r))return us(e,t,r);var n=at(t);return null!==n?fs(e,n,r):void 0};rs.exp({getMetadata:function(e,t){return fs(e,f(t),arguments.length<3?void 0:ls(arguments[2]))}});var ps=rs.keys,ds=rs.key,hs=function(e,t){var r=ps(e,t),n=at(e);if(null===n)return r;var i=hs(n,t);return i.length?r.length?Ho(new Ga(r.concat(i))):i:r};rs.exp({getMetadataKeys:function(e){return hs(f(e),arguments.length<2?void 0:ds(arguments[1]))}});var vs=rs.get,ms=rs.key;rs.exp({getOwnMetadata:function(e,t){return vs(e,f(t),arguments.length<3?void 0:ms(arguments[2]))}});var gs=rs.keys,ys=rs.key;rs.exp({getOwnMetadataKeys:function(e){return gs(f(e),arguments.length<2?void 0:ys(arguments[1]))}});var bs=rs.has,ws=rs.key,_s=function(e,t,r){if(bs(e,t,r))return!0;var n=at(t);return null!==n&&_s(e,n,r)};rs.exp({hasMetadata:function(e,t){return _s(e,f(t),arguments.length<3?void 0:ws(arguments[2]))}});var Es=rs.has,Ss=rs.key;rs.exp({hasOwnMetadata:function(e,t){return Es(e,f(t),arguments.length<3?void 0:Ss(arguments[2]))}});var xs=rs.key,Cs=rs.set;rs.exp({metadata:function(e,t){return function(r,n){Cs(e,t,(void 0!==n?f:T)(r),xs(n))}}});var ks=sa(),Ts=i.process,As="process"==U(Ts);P(P.G,{asap:function(e){var t=As&&Ts.domain;ks(t?t.bind(e):e)}});var Is=sa(),Ps=R("observable"),Os=Gi.RETURN,Rs=function(e){return null==e?void 0:T(e)},js=function(e){var t=e._c;t&&(e._c=void 0,t())},Ms=function(e){return void 0===e._o},Ns=function(e){Ms(e)||(e._o=void 0,js(e))},Bs=function(e,t){f(e),this._c=void 0,this._o=e,e=new Ds(this);try{var r=t(e),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:T(r),this._c=r)}catch(t){return void e.error(t)}Ms(this)&&js(this)};Bs.prototype=ya({},{unsubscribe:function(){Ns(this)}});var Ds=function(e){this._s=e};Ds.prototype=ya({},{next:function(e){var t=this._s;if(!Ms(t)){var r=t._o;try{var n=Rs(r.next);if(n)return n.call(r,e)}catch(e){try{Ns(t)}finally{throw e}}}},error:function(e){var t=this._s;if(Ms(t))throw e;var r=t._o;t._o=void 0;try{var n=Rs(r.error);if(!n)throw e;e=n.call(r,e)}catch(e){try{js(t)}finally{throw e}}return js(t),e},complete:function(e){var t=this._s;if(!Ms(t)){var r=t._o;t._o=void 0;try{var n=Rs(r.complete);e=n?n.call(r,e):void 0}catch(e){try{js(t)}finally{throw e}}return js(t),e}}});var Fs=function(e){Ki(this,Fs,"Observable","_f")._f=T(e)};ya(Fs.prototype,{subscribe:function(e){return new Bs(e,this._f)},forEach:function(e){var t=this;return new(u.Promise||i.Promise)(function(r,n){T(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:r})})}}),ya(Fs,{from:function(e){var t="function"==typeof this?this:Fs,r=Rs(f(e)[Ps]);if(r){var n=f(r.call(e));return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}return new t(function(t){var r=!1;return Is(function(){if(!r){try{if(Gi(e,!1,function(e){if(t.next(e),r)return Os})===Os)return}catch(e){if(r)throw e;return void t.error(e)}t.complete()}}),function(){r=!0}})},of:function(){for(var e=0,t=arguments.length,r=new Array(t);e<t;)r[e]=arguments[e++];return new("function"==typeof this?this:Fs)(function(e){var t=!1;return Is(function(){if(!t){for(var n=0;n<r.length;++n)if(e.next(r[n]),t)return;e.complete()}}),function(){t=!0}})}}),w(Fs.prototype,Ps,function(){return this}),P(P.G,{Observable:Fs}),ei("Observable");var Ls=[].slice,Us=/MSIE .\./.test(ma),zs=function(e){return function(t,r){var n=arguments.length>2,i=!!n&&Ls.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,r)}};P(P.G+P.B+P.F*Us,{setTimeout:zs(i.setTimeout),setInterval:zs(i.setInterval)}),P(P.G+P.B,{setImmediate:ta.set,clearImmediate:ta.clear});for(var Vs=R("iterator"),qs=R("toStringTag"),Ks=Lr.Array,Gs={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Hs=ae(Gs),Ws=0;Ws<Hs.length;Ws++){var $s,Ys=Hs[Ws],Js=Gs[Ys],Qs=i[Ys],Zs=Qs&&Qs.prototype;if(Zs&&(Zs[Vs]||w(Zs,Vs,Ks),Zs[qs]||w(Zs,qs,Ys),Lr[Ys]=Ks,Js))for($s in ri)Zs[$s]||k(Zs,$s,ri[$s],!0)}n(function(t){!function(e){var r,n=Object.prototype,i=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag",u=e.regeneratorRuntime;if(u)t.exports=u;else{(u=e.regeneratorRuntime=t.exports).wrap=b;var l="suspendedStart",f="suspendedYield",p="executing",d="completed",h={},v={};v[o]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(P([])));g&&g!==n&&i.call(g,o)&&(v=g);var y=S.prototype=_.prototype=Object.create(v);E.prototype=y.constructor=S,S.constructor=E,S[c]=E.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(y),e},u.awrap=function(e){return{__await:e}},x(C.prototype),C.prototype[s]=function(){return this},u.AsyncIterator=C,u.async=function(e,t,r,n){var i=new C(b(e,t,r,n));return u.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},x(y),y[c]="Generator",y[o]=function(){return this},y.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},u.values=P,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return s.type="throw",s.arg=e,t.next=n,i&&(t.method="next",t.arg=r),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;A(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:P(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),h}}}function b(e,t,r,n){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),o=new I(n||[]);return a._invoke=function(e,t,r){var n=l;return function(i,a){if(n===p)throw new Error("Generator is already running");if(n===d){if("throw"===i)throw a;return O()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=k(o,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var c=w(e,t,r);if("normal"===c.type){if(n=r.done?d:f,c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=d,r.method="throw",r.arg=c.arg)}}}(e,r,o),a}function w(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function _(){}function E(){}function S(){}function x(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function C(t){function r(e,n,a,o){var s=w(t[e],t,n);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then(function(e){r("next",e,a,o)},function(e){r("throw",e,a,o)}):Promise.resolve(u).then(function(e){c.value=e,a(c)},o)}o(s.arg)}var n;"object"==typeof e.process&&e.process.domain&&(r=e.process.domain.bind(r)),this._invoke=function(e,t){function i(){return new Promise(function(n,i){r(e,t,n,i)})}return n=n?n.then(i,i):i()}}function k(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,k(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=w(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return a.next=a}}return{next:O}}function O(){return{value:r,done:!0}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:e)});var Xs=function(e,t){var r=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,r)}}(/[\\^$*+?.()|[\]{}]/g,"\\$&");P(P.S,"RegExp",{escape:function(e){return Xs(e)}});u.RegExp.escape;if(e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var ec="defineProperty";function tc(e,t,r){e[t]||Object[ec](e,t,{writable:!0,configurable:!0,value:r})}tc(String.prototype,"padLeft","".padStart),tc(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&tc(Array,e,Function.call.bind([][e]))});var rc="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function nc(){throw new Error("setTimeout has not been defined")}function ic(){throw new Error("clearTimeout has not been defined")}var ac=nc,oc=ic;function sc(e){if(ac===setTimeout)return setTimeout(e,0);if((ac===nc||!ac)&&setTimeout)return ac=setTimeout,setTimeout(e,0);try{return ac(e,0)}catch(t){try{return ac.call(null,e,0)}catch(t){return ac.call(this,e,0)}}}"function"==typeof rc.setTimeout&&(ac=setTimeout),"function"==typeof rc.clearTimeout&&(oc=clearTimeout);var cc,uc=[],lc=!1,fc=-1;function pc(){lc&&cc&&(lc=!1,cc.length?uc=cc.concat(uc):fc=-1,uc.length&&dc())}function dc(){if(!lc){var e=sc(pc);lc=!0;for(var t=uc.length;t;){for(cc=uc,uc=[];++fc<t;)cc&&cc[fc].run();fc=-1,t=uc.length}cc=null,lc=!1,function(e){if(oc===clearTimeout)return clearTimeout(e);if((oc===ic||!oc)&&clearTimeout)return oc=clearTimeout,clearTimeout(e);try{oc(e)}catch(t){try{return oc.call(null,e)}catch(t){return oc.call(this,e)}}}(e)}}function hc(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];uc.push(new vc(e,t)),1!==uc.length||lc||sc(dc)}function vc(e,t){this.fun=e,this.array=t}vc.prototype.run=function(){this.fun.apply(null,this.array)};function mc(){}var gc=mc,yc=mc,bc=mc,wc=mc,_c=mc,Ec=mc,Sc=mc;var xc=rc.performance||{},Cc=xc.now||xc.mozNow||xc.msNow||xc.oNow||xc.webkitNow||function(){return(new Date).getTime()};var kc=new Date;var Tc={nextTick:hc,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:gc,addListener:yc,once:bc,off:wc,removeListener:_c,removeAllListeners:Ec,emit:Sc,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Cc.call(xc),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-kc)/1e3}},Ac={}.toString,Ic=function(e){return Ac.call(e).slice(8,-1)},Pc=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==Ic(e)?e.split(""):Object(e)},Oc=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},Rc=function(e){return Pc(Oc(e))},jc={f:{}.propertyIsEnumerable},Mc=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Nc=function(e){return"object"==typeof e?null!==e:"function"==typeof e},Bc=function(e,t){if(!Nc(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!Nc(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!Nc(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!Nc(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},Dc={}.hasOwnProperty,Fc=function(e,t){return Dc.call(e,t)},Lc=function(e){try{return!!e()}catch(e){return!0}},Uc=!Lc(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),zc=n(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),Vc=zc.document,qc=Nc(Vc)&&Nc(Vc.createElement),Kc=function(e){return qc?Vc.createElement(e):{}},Gc=!Uc&&!Lc(function(){return 7!=Object.defineProperty(Kc("div"),"a",{get:function(){return 7}}).a}),Hc=Object.getOwnPropertyDescriptor,Wc={f:Uc?Hc:function(e,t){if(e=Rc(e),t=Bc(t,!0),Gc)try{return Hc(e,t)}catch(e){}if(Fc(e,t))return Mc(!jc.f.call(e,t),e[t])}},$c=n(function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)}),Yc=($c.version,function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}),Jc=function(e,t,r){if(Yc(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},Qc=function(e){if(!Nc(e))throw TypeError(e+" is not an object!");return e},Zc=Object.defineProperty,Xc={f:Uc?Object.defineProperty:function(e,t,r){if(Qc(e),t=Bc(t,!0),Qc(r),Gc)try{return Zc(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},eu=Uc?function(e,t,r){return Xc.f(e,t,Mc(1,r))}:function(e,t,r){return e[t]=r,e},tu=function(e,t,r){var n,i,a,o=e&tu.F,s=e&tu.G,c=e&tu.S,u=e&tu.P,l=e&tu.B,f=e&tu.W,p=s?$c:$c[t]||($c[t]={}),d=p.prototype,h=s?zc:c?zc[t]:(zc[t]||{}).prototype;for(n in s&&(r=t),r)(i=!o&&h&&void 0!==h[n])&&Fc(p,n)||(a=i?h[n]:r[n],p[n]=s&&"function"!=typeof h[n]?r[n]:l&&i?Jc(a,zc):f&&h[n]==a?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(a):u&&"function"==typeof a?Jc(Function.call,a):a,u&&((p.virtual||(p.virtual={}))[n]=a,e&tu.R&&d&&!d[n]&&eu(d,n,a)))};tu.F=1,tu.G=2,tu.S=4,tu.P=8,tu.B=16,tu.W=32,tu.U=64,tu.R=128;var ru=tu,nu=function(e,t){var r=($c.Object||{})[e]||Object[e],n={};n[e]=t(r),ru(ru.S+ru.F*Lc(function(){r(1)}),"Object",n)},iu=Wc.f;nu("getOwnPropertyDescriptor",function(){return function(e,t){return iu(Rc(e),t)}});var au=$c.Object,ou=function(e,t){return au.getOwnPropertyDescriptor(e,t)},su=n(function(e){e.exports={default:ou,__esModule:!0}});r(su);var cu=Wc.f;ru(ru.S,"Reflect",{deleteProperty:function(e,t){var r=cu(Qc(e),t);return!(r&&!r.configurable)&&delete e[t]}});var uu=$c.Reflect.deleteProperty,lu=n(function(e){e.exports={default:uu,__esModule:!0}});r(lu);var fu,pu=Math.ceil,du=Math.floor,hu=function(e){return isNaN(e=+e)?0:(e>0?du:pu)(e)},vu=eu,mu={},gu=Math.min,yu=function(e){return e>0?gu(hu(e),9007199254740991):0},bu=Math.max,wu=Math.min,_u=n(function(e){var t=zc["__core-js_shared__"]||(zc["__core-js_shared__"]={});(e.exports=function(e,r){return t[e]||(t[e]=void 0!==r?r:{})})("versions",[]).push({version:$c.version,mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),Eu=0,Su=Math.random(),xu=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++Eu+Su).toString(36))},Cu=_u("keys"),ku=function(e){return Cu[e]||(Cu[e]=xu(e))},Tu=(fu=!1,function(e,t,r){var n,i=Rc(e),a=yu(i.length),o=function(e,t){return(e=hu(e))<0?bu(e+t,0):wu(e,t)}(r,a);if(fu&&t!=t){for(;a>o;)if((n=i[o++])!=n)return!0}else for(;a>o;o++)if((fu||o in i)&&i[o]===t)return fu||o||0;return!fu&&-1}),Au=ku("IE_PROTO"),Iu=function(e,t){var r,n=Rc(e),i=0,a=[];for(r in n)r!=Au&&Fc(n,r)&&a.push(r);for(;t.length>i;)Fc(n,r=t[i++])&&(~Tu(a,r)||a.push(r));return a},Pu="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Ou=Object.keys||function(e){return Iu(e,Pu)},Ru=Uc?Object.defineProperties:function(e,t){Qc(e);for(var r,n=Ou(t),i=n.length,a=0;i>a;)Xc.f(e,r=n[a++],t[r]);return e},ju=zc.document,Mu=ju&&ju.documentElement,Nu=ku("IE_PROTO"),Bu=function(){},Du=function(){var e,t=Kc("iframe"),r=Pu.length;for(t.style.display="none",Mu.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Du=e.F;r--;)delete Du.prototype[Pu[r]];return Du()},Fu=Object.create||function(e,t){var r;return null!==e?(Bu.prototype=Qc(e),r=new Bu,Bu.prototype=null,r[Nu]=e):r=Du(),void 0===t?r:Ru(r,t)},Lu=n(function(e){var t=_u("wks"),r=zc.Symbol,n="function"==typeof r;(e.exports=function(e){return t[e]||(t[e]=n&&r[e]||(n?r:xu)("Symbol."+e))}).store=t}),Uu=Xc.f,zu=Lu("toStringTag"),Vu=function(e,t,r){e&&!Fc(e=r?e:e.prototype,zu)&&Uu(e,zu,{configurable:!0,value:t})},qu={};eu(qu,Lu("iterator"),function(){return this});var Ku=function(e){return Object(Oc(e))},Gu=ku("IE_PROTO"),Hu=Object.prototype,Wu=Object.getPrototypeOf||function(e){return e=Ku(e),Fc(e,Gu)?e[Gu]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Hu:null},$u=Lu("iterator"),Yu=!([].keys&&"next"in[].keys()),Ju=function(){return this},Qu=function(e,t,r,n,i,a,o){!function(e,t,r){e.prototype=Fu(qu,{next:Mc(1,r)}),Vu(e,t+" Iterator")}(r,t,n);var s,c,u,l=function(e){if(!Yu&&e in h)return h[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},f=t+" Iterator",p="values"==i,d=!1,h=e.prototype,v=h[$u]||h["@@iterator"]||i&&h[i],m=v||l(i),g=i?p?l("entries"):m:void 0,y="Array"==t&&h.entries||v;if(y&&(u=Wu(y.call(new e)))!==Object.prototype&&u.next&&Vu(u,f,!0),p&&v&&"values"!==v.name&&(d=!0,m=function(){return v.call(this)}),o&&(Yu||d||!h[$u])&&eu(h,$u,m),mu[t]=m,mu[f]=Ju,i)if(s={values:p?m:l("values"),keys:a?m:l("keys"),entries:g},o)for(c in s)c in h||vu(h,c,s[c]);else ru(ru.P+ru.F*(Yu||d),t,s);return s},Zu=function(e){return function(t,r){var n,i,a=String(Oc(t)),o=hu(r),s=a.length;return o<0||o>=s?e?"":void 0:(n=a.charCodeAt(o))<55296||n>56319||o+1===s||(i=a.charCodeAt(o+1))<56320||i>57343?e?a.charAt(o):n:e?a.slice(o,o+2):i-56320+(n-55296<<10)+65536}}(!0);Qu(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=Zu(t,r),this._i+=e.length,{value:e,done:!1})});var Xu=function(e,t){return{value:t,done:!!e}};Qu(Array,"Array",function(e,t){this._t=Rc(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,Xu(1)):Xu(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values");mu.Arguments=mu.Array;for(var el=Lu("toStringTag"),tl="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),rl=0;rl<tl.length;rl++){var nl=tl[rl],il=zc[nl],al=il&&il.prototype;al&&!al[el]&&eu(al,el,nl),mu[nl]=mu.Array}var ol,sl,cl,ul=Lu("toStringTag"),ll="Arguments"==Ic(function(){return arguments}()),fl=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),ul))?r:ll?Ic(t):"Object"==(n=Ic(t))&&"function"==typeof t.callee?"Arguments":n},pl=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e},dl=function(e,t,r,n){try{return n?t(Qc(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&Qc(i.call(e)),t}},hl=Lu("iterator"),vl=Array.prototype,ml=function(e){return void 0!==e&&(mu.Array===e||vl[hl]===e)},gl=Lu("iterator"),yl=$c.getIteratorMethod=function(e){if(null!=e)return e[gl]||e["@@iterator"]||mu[fl(e)]},bl=n(function(e){var t={},r={},n=e.exports=function(e,n,i,a,o){var s,c,u,l,f=o?function(){return e}:yl(e),p=Jc(i,a,n?2:1),d=0;if("function"!=typeof f)throw TypeError(e+" is not iterable!");if(ml(f)){for(s=yu(e.length);s>d;d++)if((l=n?p(Qc(c=e[d])[0],c[1]):p(e[d]))===t||l===r)return l}else for(u=f.call(e);!(c=u.next()).done;)if((l=dl(u,p,c.value,n))===t||l===r)return l};n.BREAK=t,n.RETURN=r}),wl=Lu("species"),_l=function(e,t){var r,n=Qc(e).constructor;return void 0===n||null==(r=Qc(n)[wl])?t:Yc(r)},El=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)},Sl=zc.process,xl=zc.setImmediate,Cl=zc.clearImmediate,kl=zc.MessageChannel,Tl=zc.Dispatch,Al=0,Il={},Pl=function(){var e=+this;if(Il.hasOwnProperty(e)){var t=Il[e];delete Il[e],t()}},Ol=function(e){Pl.call(e.data)};xl&&Cl||(xl=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return Il[++Al]=function(){El("function"==typeof e?e:Function(e),t)},ol(Al),Al},Cl=function(e){delete Il[e]},"process"==Ic(Sl)?ol=function(e){Sl.nextTick(Jc(Pl,e,1))}:Tl&&Tl.now?ol=function(e){Tl.now(Jc(Pl,e,1))}:kl?(cl=(sl=new kl).port2,sl.port1.onmessage=Ol,ol=Jc(cl.postMessage,cl,1)):zc.addEventListener&&"function"==typeof postMessage&&!zc.importScripts?(ol=function(e){zc.postMessage(e+"","*")},zc.addEventListener("message",Ol,!1)):ol="onreadystatechange"in Kc("script")?function(e){Mu.appendChild(Kc("script")).onreadystatechange=function(){Mu.removeChild(this),Pl.call(e)}}:function(e){setTimeout(Jc(Pl,e,1),0)});var Rl={set:xl,clear:Cl},jl=Rl.set,Ml=zc.MutationObserver||zc.WebKitMutationObserver,Nl=zc.process,Bl=zc.Promise,Dl="process"==Ic(Nl);function Fl(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=Yc(t),this.reject=Yc(r)}var Ll={f:function(e){return new Fl(e)}},Ul=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},zl=zc.navigator,Vl=zl&&zl.userAgent||"",ql=function(e,t){if(Qc(e),Nc(t)&&t.constructor===e)return t;var r=Ll.f(e);return(0,r.resolve)(t),r.promise},Kl=function(e,t,r){for(var n in t)r&&e[n]?e[n]=t[n]:eu(e,n,t[n]);return e},Gl=Lu("species"),Hl=function(e){var t="function"==typeof $c[e]?$c[e]:zc[e];Uc&&t&&!t[Gl]&&Xc.f(t,Gl,{configurable:!0,get:function(){return this}})},Wl=Lu("iterator"),$l=!1;try{[7][Wl]().return=function(){$l=!0}}catch(e){}var Yl,Jl,Ql,Zl,Xl=function(e,t){if(!t&&!$l)return!1;var r=!1;try{var n=[7],i=n[Wl]();i.next=function(){return{done:r=!0}},n[Wl]=function(){return i},e(n)}catch(e){}return r},ef=Rl.set,tf=function(){var e,t,r,n=function(){var n,i;for(Dl&&(n=Nl.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(Dl)r=function(){Nl.nextTick(n)};else if(!Ml||zc.navigator&&zc.navigator.standalone)if(Bl&&Bl.resolve){var i=Bl.resolve(void 0);r=function(){i.then(n)}}else r=function(){jl.call(zc,n)};else{var a=!0,o=document.createTextNode("");new Ml(n).observe(o,{characterData:!0}),r=function(){o.data=a=!a}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}(),rf=zc.TypeError,nf=zc.process,af=nf&&nf.versions,of=af&&af.v8||"",sf=zc.Promise,cf="process"==fl(nf),uf=function(){},lf=Jl=Ll.f,ff=!!function(){try{var e=sf.resolve(1),t=(e.constructor={})[Lu("species")]=function(e){e(uf,uf)};return(cf||"function"==typeof PromiseRejectionEvent)&&e.then(uf)instanceof t&&0!==of.indexOf("6.6")&&-1===Vl.indexOf("Chrome/66")}catch(e){}}(),pf=function(e){var t;return!(!Nc(e)||"function"!=typeof(t=e.then))&&t},df=function(e,t){if(!e._n){e._n=!0;var r=e._c;tf(function(){for(var n=e._v,i=1==e._s,a=0,o=function(t){var r,a,o,s=i?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{s?(i||(2==e._h&&mf(e),e._h=1),!0===s?r=n:(l&&l.enter(),r=s(n),l&&(l.exit(),o=!0)),r===t.promise?u(rf("Promise-chain cycle")):(a=pf(r))?a.call(r,c,u):c(r)):u(n)}catch(e){l&&!o&&l.exit(),u(e)}};r.length>a;)o(r[a++]);e._c=[],e._n=!1,t&&!e._h&&hf(e)})}},hf=function(e){ef.call(zc,function(){var t,r,n,i=e._v,a=vf(e);if(a&&(t=Ul(function(){cf?nf.emit("unhandledRejection",i,e):(r=zc.onunhandledrejection)?r({promise:e,reason:i}):(n=zc.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=cf||vf(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},vf=function(e){return 1!==e._h&&0===(e._a||e._c).length},mf=function(e){ef.call(zc,function(){var t;cf?nf.emit("rejectionHandled",e):(t=zc.onrejectionhandled)&&t({promise:e,reason:e._v})})},gf=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),df(t,!0))},yf=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw rf("Promise can't be resolved itself");(t=pf(e))?tf(function(){var n={_w:r,_d:!1};try{t.call(e,Jc(yf,n,1),Jc(gf,n,1))}catch(e){gf.call(n,e)}}):(r._v=e,r._s=1,df(r,!1))}catch(e){gf.call({_w:r,_d:!1},e)}}};ff||(sf=function(e){pl(this,sf,"Promise","_h"),Yc(e),Yl.call(this);try{e(Jc(yf,this,1),Jc(gf,this,1))}catch(e){gf.call(this,e)}},(Yl=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=Kl(sf.prototype,{then:function(e,t){var r=lf(_l(this,sf));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=cf?nf.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&df(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),Ql=function(){var e=new Yl;this.promise=e,this.resolve=Jc(yf,e,1),this.reject=Jc(gf,e,1)},Ll.f=lf=function(e){return e===sf||e===Zl?new Ql(e):Jl(e)}),ru(ru.G+ru.W+ru.F*!ff,{Promise:sf}),Vu(sf,"Promise"),Hl("Promise"),Zl=$c.Promise,ru(ru.S+ru.F*!ff,"Promise",{reject:function(e){var t=lf(this);return(0,t.reject)(e),t.promise}}),ru(ru.S+!0*ru.F,"Promise",{resolve:function(e){return ql(this===Zl?sf:this,e)}}),ru(ru.S+ru.F*!(ff&&Xl(function(e){sf.all(e).catch(uf)})),"Promise",{all:function(e){var t=this,r=lf(t),n=r.resolve,i=r.reject,a=Ul(function(){var r=[],a=0,o=1;bl(e,!1,function(e){var s=a++,c=!1;r.push(void 0),o++,t.resolve(e).then(function(e){c||(c=!0,r[s]=e,--o||n(r))},i)}),--o||n(r)});return a.e&&i(a.v),r.promise},race:function(e){var t=this,r=lf(t),n=r.reject,i=Ul(function(){bl(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}}),ru(ru.P+ru.R,"Promise",{finally:function(e){var t=_l(this,$c.Promise||zc.Promise),r="function"==typeof e;return this.then(r?function(r){return ql(t,e()).then(function(){return r})}:e,r?function(r){return ql(t,e()).then(function(){throw r})}:e)}}),ru(ru.S,"Promise",{try:function(e){var t=Ll.f(this),r=Ul(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}});var bf=$c.Promise,wf=n(function(e){e.exports={default:bf,__esModule:!0}});r(wf);var _f={f:Object.getOwnPropertySymbols},Ef=Object.assign,Sf=!Ef||Lc(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=Ef({},e)[r]||Object.keys(Ef({},t)).join("")!=n})?function(e,t){for(var r=Ku(e),n=arguments.length,i=1,a=_f.f,o=jc.f;n>i;)for(var s,c=Pc(arguments[i++]),u=a?Ou(c).concat(a(c)):Ou(c),l=u.length,f=0;l>f;)o.call(c,s=u[f++])&&(r[s]=c[s]);return r}:Ef;ru(ru.S+ru.F,"Object",{assign:Sf});var xf=$c.Object.assign,Cf=n(function(e){e.exports={default:xf,__esModule:!0}});r(Cf);var kf=(zc.Reflect||{}).apply,Tf=Function.apply;ru(ru.S+ru.F*!Lc(function(){kf(function(){})}),"Reflect",{apply:function(e,t,r){var n=Yc(e),i=Qc(r);return kf?kf(n,t,i):Tf.call(n,t,i)}});var Af=$c.Reflect.apply,If=n(function(e){e.exports={default:Af,__esModule:!0}});r(If);var Pf=$c.JSON||($c.JSON={stringify:JSON.stringify}),Of=function(e){return Pf.stringify.apply(Pf,arguments)},Rf=n(function(e){e.exports={default:Of,__esModule:!0}});r(Rf);var jf=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i};var Mf=function(){this.__data__=[],this.size=0};var Nf=function(e,t){return e===t||e!=e&&t!=t};var Bf=function(e,t){for(var r=e.length;r--;)if(Nf(e[r][0],t))return r;return-1},Df=Array.prototype.splice;var Ff=function(e){var t=this.__data__,r=Bf(t,e);return!(r<0||(r==t.length-1?t.pop():Df.call(t,r,1),--this.size,0))};var Lf=function(e){var t=this.__data__,r=Bf(t,e);return r<0?void 0:t[r][1]};var Uf=function(e){return Bf(this.__data__,e)>-1};var zf=function(e,t){var r=this.__data__,n=Bf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Vf(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Vf.prototype.clear=Mf,Vf.prototype.delete=Ff,Vf.prototype.get=Lf,Vf.prototype.has=Uf,Vf.prototype.set=zf;var qf=Vf;var Kf=function(){this.__data__=new qf,this.size=0};var Gf=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var Hf=function(e){return this.__data__.get(e)};var Wf=function(e){return this.__data__.has(e)},$f="object"==typeof e&&e&&e.Object===Object&&e,Yf="object"==typeof self&&self&&self.Object===Object&&self,Jf=$f||Yf||Function("return this")(),Qf=Jf.Symbol,Zf=Object.prototype,Xf=Zf.hasOwnProperty,ep=Zf.toString,tp=Qf?Qf.toStringTag:void 0;var rp=function(e){var t=Xf.call(e,tp),r=e[tp];try{e[tp]=void 0;var n=!0}catch(e){}var i=ep.call(e);return n&&(t?e[tp]=r:delete e[tp]),i},np=Object.prototype.toString;var ip=function(e){return np.call(e)},ap="[object Null]",op="[object Undefined]",sp=Qf?Qf.toStringTag:void 0;var cp=function(e){return null==e?void 0===e?op:ap:sp&&sp in Object(e)?rp(e):ip(e)};var up=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},lp="[object AsyncFunction]",fp="[object Function]",pp="[object GeneratorFunction]",dp="[object Proxy]";var hp,vp=function(e){if(!up(e))return!1;var t=cp(e);return t==fp||t==pp||t==lp||t==dp},mp=Jf["__core-js_shared__"],gp=(hp=/[^.]+$/.exec(mp&&mp.keys&&mp.keys.IE_PROTO||""))?"Symbol(src)_1."+hp:"";var yp=function(e){return!!gp&&gp in e},bp=Function.prototype.toString;var wp=function(e){if(null!=e){try{return bp.call(e)}catch(e){}try{return e+""}catch(e){}}return""},_p=/^\[object .+?Constructor\]$/,Ep=Function.prototype,Sp=Object.prototype,xp=Ep.toString,Cp=Sp.hasOwnProperty,kp=RegExp("^"+xp.call(Cp).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Tp=function(e){return!(!up(e)||yp(e))&&(vp(e)?kp:_p).test(wp(e))};var Ap=function(e,t){return null==e?void 0:e[t]};var Ip=function(e,t){var r=Ap(e,t);return Tp(r)?r:void 0},Pp=Ip(Jf,"Map"),Op=Ip(Object,"create");var Rp=function(){this.__data__=Op?Op(null):{},this.size=0};var jp=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Mp="__lodash_hash_undefined__",Np=Object.prototype.hasOwnProperty;var Bp=function(e){var t=this.__data__;if(Op){var r=t[e];return r===Mp?void 0:r}return Np.call(t,e)?t[e]:void 0},Dp=Object.prototype.hasOwnProperty;var Fp=function(e){var t=this.__data__;return Op?void 0!==t[e]:Dp.call(t,e)},Lp="__lodash_hash_undefined__";var Up=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Op&&void 0===t?Lp:t,this};function zp(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}zp.prototype.clear=Rp,zp.prototype.delete=jp,zp.prototype.get=Bp,zp.prototype.has=Fp,zp.prototype.set=Up;var Vp=zp;var qp=function(){this.size=0,this.__data__={hash:new Vp,map:new(Pp||qf),string:new Vp}};var Kp=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var Gp=function(e,t){var r=e.__data__;return Kp(t)?r["string"==typeof t?"string":"hash"]:r.map};var Hp=function(e){var t=Gp(this,e).delete(e);return this.size-=t?1:0,t};var Wp=function(e){return Gp(this,e).get(e)};var $p=function(e){return Gp(this,e).has(e)};var Yp=function(e,t){var r=Gp(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Jp(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Jp.prototype.clear=qp,Jp.prototype.delete=Hp,Jp.prototype.get=Wp,Jp.prototype.has=$p,Jp.prototype.set=Yp;var Qp=Jp,Zp=200;var Xp=function(e,t){var r=this.__data__;if(r instanceof qf){var n=r.__data__;if(!Pp||n.length<Zp-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Qp(n)}return r.set(e,t),this.size=r.size,this};function ed(e){var t=this.__data__=new qf(e);this.size=t.size}ed.prototype.clear=Kf,ed.prototype.delete=Gf,ed.prototype.get=Hf,ed.prototype.has=Wf,ed.prototype.set=Xp;var td=ed;var rd=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},nd=function(){try{var e=Ip(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var id=function(e,t,r){"__proto__"==t&&nd?nd(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},ad=Object.prototype.hasOwnProperty;var od=function(e,t,r){var n=e[t];ad.call(e,t)&&Nf(n,r)&&(void 0!==r||t in e)||id(e,t,r)};var sd=function(e,t,r,n){var i=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],c=n?n(r[s],e[s],s,r,e):void 0;void 0===c&&(c=e[s]),i?id(r,s,c):od(r,s,c)}return r};var cd=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var ud=function(e){return null!=e&&"object"==typeof e},ld="[object Arguments]";var fd=function(e){return ud(e)&&cp(e)==ld},pd=Object.prototype,dd=pd.hasOwnProperty,hd=pd.propertyIsEnumerable,vd=fd(function(){return arguments}())?fd:function(e){return ud(e)&&dd.call(e,"callee")&&!hd.call(e,"callee")},md=Array.isArray;var gd=function(){return!1},yd=n(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?Jf.Buffer:void 0,a=(i?i.isBuffer:void 0)||gd;e.exports=a}),bd=9007199254740991,wd=/^(?:0|[1-9]\d*)$/;var _d=function(e,t){var r=typeof e;return!!(t=null==t?bd:t)&&("number"==r||"symbol"!=r&&wd.test(e))&&e>-1&&e%1==0&&e<t},Ed=9007199254740991;var Sd=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ed},xd={};xd["[object Float32Array]"]=xd["[object Float64Array]"]=xd["[object Int8Array]"]=xd["[object Int16Array]"]=xd["[object Int32Array]"]=xd["[object Uint8Array]"]=xd["[object Uint8ClampedArray]"]=xd["[object Uint16Array]"]=xd["[object Uint32Array]"]=!0,xd["[object Arguments]"]=xd["[object Array]"]=xd["[object ArrayBuffer]"]=xd["[object Boolean]"]=xd["[object DataView]"]=xd["[object Date]"]=xd["[object Error]"]=xd["[object Function]"]=xd["[object Map]"]=xd["[object Number]"]=xd["[object Object]"]=xd["[object RegExp]"]=xd["[object Set]"]=xd["[object String]"]=xd["[object WeakMap]"]=!1;var Cd=function(e){return ud(e)&&Sd(e.length)&&!!xd[cp(e)]};var kd=function(e){return function(t){return e(t)}},Td=n(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r&&$f.process,a=function(){try{var e=n&&n.require&&n.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}),Ad=Td&&Td.isTypedArray,Id=Ad?kd(Ad):Cd,Pd=Object.prototype.hasOwnProperty;var Od=function(e,t){var r=md(e),n=!r&&vd(e),i=!r&&!n&&yd(e),a=!r&&!n&&!i&&Id(e),o=r||n||i||a,s=o?cd(e.length,String):[],c=s.length;for(var u in e)!t&&!Pd.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||_d(u,c))||s.push(u);return s},Rd=Object.prototype;var jd=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Rd)};var Md=function(e,t){return function(r){return e(t(r))}},Nd=Md(Object.keys,Object),Bd=Object.prototype.hasOwnProperty;var Dd=function(e){if(!jd(e))return Nd(e);var t=[];for(var r in Object(e))Bd.call(e,r)&&"constructor"!=r&&t.push(r);return t};var Fd=function(e){return null!=e&&Sd(e.length)&&!vp(e)};var Ld=function(e){return Fd(e)?Od(e):Dd(e)};var Ud=function(e,t){return e&&sd(t,Ld(t),e)};var zd=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},Vd=Object.prototype.hasOwnProperty;var qd=function(e){if(!up(e))return zd(e);var t=jd(e),r=[];for(var n in e)("constructor"!=n||!t&&Vd.call(e,n))&&r.push(n);return r};var Kd=function(e){return Fd(e)?Od(e,!0):qd(e)};var Gd=function(e,t){return e&&sd(t,Kd(t),e)},Hd=n(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?Jf.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}});var Wd=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t};var $d=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a};var Yd=function(){return[]},Jd=Object.prototype.propertyIsEnumerable,Qd=Object.getOwnPropertySymbols,Zd=Qd?function(e){return null==e?[]:(e=Object(e),$d(Qd(e),function(t){return Jd.call(e,t)}))}:Yd;var Xd=function(e,t){return sd(e,Zd(e),t)};var eh=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e},th=Md(Object.getPrototypeOf,Object),rh=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)eh(t,Zd(e)),e=th(e);return t}:Yd;var nh=function(e,t){return sd(e,rh(e),t)};var ih=function(e,t,r){var n=t(e);return md(e)?n:eh(n,r(e))};var ah=function(e){return ih(e,Ld,Zd)};var oh=function(e){return ih(e,Kd,rh)},sh=Ip(Jf,"DataView"),ch=Ip(Jf,"Promise"),uh=Ip(Jf,"Set"),lh=Ip(Jf,"WeakMap"),fh=wp(sh),ph=wp(Pp),dh=wp(ch),hh=wp(uh),vh=wp(lh),mh=cp;(sh&&"[object DataView]"!=mh(new sh(new ArrayBuffer(1)))||Pp&&"[object Map]"!=mh(new Pp)||ch&&"[object Promise]"!=mh(ch.resolve())||uh&&"[object Set]"!=mh(new uh)||lh&&"[object WeakMap]"!=mh(new lh))&&(mh=function(e){var t=cp(e),r="[object Object]"==t?e.constructor:void 0,n=r?wp(r):"";if(n)switch(n){case fh:return"[object DataView]";case ph:return"[object Map]";case dh:return"[object Promise]";case hh:return"[object Set]";case vh:return"[object WeakMap]"}return t});var gh=mh,yh=Object.prototype.hasOwnProperty;var bh=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&yh.call(e,"index")&&(r.index=e.index,r.input=e.input),r},wh=Jf.Uint8Array;var _h=function(e){var t=new e.constructor(e.byteLength);return new wh(t).set(new wh(e)),t};var Eh=function(e,t){var r=t?_h(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},Sh=/\w*$/;var xh=function(e){var t=new e.constructor(e.source,Sh.exec(e));return t.lastIndex=e.lastIndex,t},Ch=Qf?Qf.prototype:void 0,kh=Ch?Ch.valueOf:void 0;var Th=function(e){return kh?Object(kh.call(e)):{}};var Ah=function(e,t){var r=t?_h(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},Ih="[object Boolean]",Ph="[object Date]",Oh="[object Map]",Rh="[object Number]",jh="[object RegExp]",Mh="[object Set]",Nh="[object String]",Bh="[object Symbol]",Dh="[object ArrayBuffer]",Fh="[object DataView]",Lh="[object Float32Array]",Uh="[object Float64Array]",zh="[object Int8Array]",Vh="[object Int16Array]",qh="[object Int32Array]",Kh="[object Uint8Array]",Gh="[object Uint8ClampedArray]",Hh="[object Uint16Array]",Wh="[object Uint32Array]";var $h=function(e,t,r){var n=e.constructor;switch(t){case Dh:return _h(e);case Ih:case Ph:return new n(+e);case Fh:return Eh(e,r);case Lh:case Uh:case zh:case Vh:case qh:case Kh:case Gh:case Hh:case Wh:return Ah(e,r);case Oh:return new n;case Rh:case Nh:return new n(e);case jh:return xh(e);case Mh:return new n;case Bh:return Th(e)}},Yh=Object.create,Jh=function(){function e(){}return function(t){if(!up(t))return{};if(Yh)return Yh(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();var Qh=function(e){return"function"!=typeof e.constructor||jd(e)?{}:Jh(th(e))},Zh="[object Map]";var Xh=function(e){return ud(e)&&gh(e)==Zh},ev=Td&&Td.isMap,tv=ev?kd(ev):Xh,rv="[object Set]";var nv=function(e){return ud(e)&&gh(e)==rv},iv=Td&&Td.isSet,av=iv?kd(iv):nv,ov=1,sv=2,cv=4,uv="[object Arguments]",lv="[object Function]",fv="[object GeneratorFunction]",pv="[object Object]",dv={};dv[uv]=dv["[object Array]"]=dv["[object ArrayBuffer]"]=dv["[object DataView]"]=dv["[object Boolean]"]=dv["[object Date]"]=dv["[object Float32Array]"]=dv["[object Float64Array]"]=dv["[object Int8Array]"]=dv["[object Int16Array]"]=dv["[object Int32Array]"]=dv["[object Map]"]=dv["[object Number]"]=dv[pv]=dv["[object RegExp]"]=dv["[object Set]"]=dv["[object String]"]=dv["[object Symbol]"]=dv["[object Uint8Array]"]=dv["[object Uint8ClampedArray]"]=dv["[object Uint16Array]"]=dv["[object Uint32Array]"]=!0,dv["[object Error]"]=dv[lv]=dv["[object WeakMap]"]=!1;var hv=function e(t,r,n,i,a,o){var s,c=r&ov,u=r&sv,l=r&cv;if(n&&(s=a?n(t,i,a,o):n(t)),void 0!==s)return s;if(!up(t))return t;var f=md(t);if(f){if(s=bh(t),!c)return Wd(t,s)}else{var p=gh(t),d=p==lv||p==fv;if(yd(t))return Hd(t,c);if(p==pv||p==uv||d&&!a){if(s=u||d?{}:Qh(t),!c)return u?nh(t,Gd(s,t)):Xd(t,Ud(s,t))}else{if(!dv[p])return a?t:{};s=$h(t,p,c)}}o||(o=new td);var h=o.get(t);if(h)return h;if(o.set(t,s),av(t))return t.forEach(function(i){s.add(e(i,r,n,i,t,o))}),s;if(tv(t))return t.forEach(function(i,a){s.set(a,e(i,r,n,a,t,o))}),s;var v=l?u?oh:ah:u?keysIn:Ld,m=f?void 0:v(t);return rd(m||t,function(i,a){m&&(i=t[a=i]),od(s,a,e(i,r,n,a,t,o))}),s},vv="[object Symbol]";var mv=function(e){return"symbol"==typeof e||ud(e)&&cp(e)==vv},gv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yv=/^\w*$/;var bv=function(e,t){if(md(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!mv(e))||yv.test(e)||!gv.test(e)||null!=t&&e in Object(t)},wv="Expected a function";function _v(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(wv);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(_v.Cache||Qp),r}_v.Cache=Qp;var Ev=_v,Sv=500;var xv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Cv=/\\(\\)?/g,kv=function(e){var t=Ev(e,function(e){return r.size===Sv&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(xv,function(e,r,n,i){t.push(n?i.replace(Cv,"$1"):r||e)}),t}),Tv=1/0,Av=Qf?Qf.prototype:void 0,Iv=Av?Av.toString:void 0;var Pv=function e(t){if("string"==typeof t)return t;if(md(t))return jf(t,e)+"";if(mv(t))return Iv?Iv.call(t):"";var r=t+"";return"0"==r&&1/t==-Tv?"-0":r};var Ov=function(e){return null==e?"":Pv(e)};var Rv=function(e,t){return md(e)?e:bv(e,t)?[e]:kv(Ov(e))};var jv=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},Mv=1/0;var Nv=function(e){if("string"==typeof e||mv(e))return e;var t=e+"";return"0"==t&&1/e==-Mv?"-0":t};var Bv=function(e,t){for(var r=0,n=(t=Rv(t,e)).length;null!=e&&r<n;)e=e[Nv(t[r++])];return r&&r==n?e:void 0};var Dv=function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a};var Fv=function(e,t){return t.length<2?e:Bv(e,Dv(t,0,-1))};var Lv=function(e,t){return t=Rv(t,e),null==(e=Fv(e,t))||delete e[Nv(jv(t))]},Uv="[object Object]",zv=Function.prototype,Vv=Object.prototype,qv=zv.toString,Kv=Vv.hasOwnProperty,Gv=qv.call(Object);var Hv=function(e){if(!ud(e)||cp(e)!=Uv)return!1;var t=th(e);if(null===t)return!0;var r=Kv.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&qv.call(r)==Gv};var Wv=function(e){return Hv(e)?void 0:e},$v=Qf?Qf.isConcatSpreadable:void 0;var Yv=function(e){return md(e)||vd(e)||!!($v&&e&&e[$v])};var Jv=function e(t,r,n,i,a){var o=-1,s=t.length;for(n||(n=Yv),a||(a=[]);++o<s;){var c=t[o];r>0&&n(c)?r>1?e(c,r-1,n,i,a):eh(a,c):i||(a[a.length]=c)}return a};var Qv=function(e){return null!=e&&e.length?Jv(e,1):[]};var Zv=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},Xv=Math.max;var em=function(e,t,r){return t=Xv(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=Xv(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),Zv(e,this,s)}};var tm=function(e){return function(){return e}};var rm=function(e){return e},nm=nd?function(e,t){return nd(e,"toString",{configurable:!0,enumerable:!1,value:tm(t),writable:!0})}:rm,im=800,am=16,om=Date.now;var sm=function(e){var t=0,r=0;return function(){var n=om(),i=am-(n-r);if(r=n,i>0){if(++t>=im)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},cm=sm(nm);var um=function(e){return cm(em(e,void 0,Qv),e+"")},lm=um(function(e,t){var r={};if(null==e)return r;var n=!1;t=jf(t,function(t){return t=Rv(t,e),n||(n=t.length>1),t}),sd(e,oh(e),r),n&&(r=hv(r,7,Wv));for(var i=t.length;i--;)Lv(r,t[i]);return r}),fm="[object Map]",pm="[object Set]",dm=Object.prototype.hasOwnProperty;var hm=function(e){if(null==e)return!0;if(Fd(e)&&(md(e)||"string"==typeof e||"function"==typeof e.splice||yd(e)||Id(e)||vd(e)))return!e.length;var t=gh(e);if(t==fm||t==pm)return!e.size;if(jd(e))return!Dd(e).length;for(var r in e)if(dm.call(e,r))return!1;return!0},vm=1,mm=4;var gm=function(e){return hv(e,vm|mm)};function ym(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var bm=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function wm(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function _m(e,t,r,n){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Em(Sm(e),function(n){var i=encodeURIComponent(wm(n))+r;return bm(e[n])?Em(e[n],function(e){return i+encodeURIComponent(wm(e))}).join(t):i+encodeURIComponent(wm(e[n]))}).join(t):n?encodeURIComponent(wm(n))+r+encodeURIComponent(wm(e)):""}function Em(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var Sm=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function xm(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var o=1e3;n&&"number"==typeof n.maxKeys&&(o=n.maxKeys);var s=e.length;o>0&&s>o&&(s=o);for(var c=0;c<s;++c){var u,l,f,p,d=e[c].replace(a,"%20"),h=d.indexOf(r);h>=0?(u=d.substr(0,h),l=d.substr(h+1)):(u=d,l=""),f=decodeURIComponent(u),p=decodeURIComponent(l),ym(i,f)?bm(i[f])?i[f].push(p):i[f]=[i[f],p]:i[f]=p}return i}var Cm={encode:_m,stringify:_m,decode:xm,parse:xm},km=2147483647,Tm=36,Am=1,Im=26,Pm=38,Om=700,Rm=72,jm=128,Mm="-",Nm=/[^\x20-\x7E]/,Bm=/[\x2E\u3002\uFF0E\uFF61]/g,Dm={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Fm=Tm-Am,Lm=Math.floor,Um=String.fromCharCode;function zm(e){throw new RangeError(Dm[e])}function Vm(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function qm(e,t,r){var n=0;for(e=r?Lm(e/Om):e>>1,e+=Lm(e/t);e>Fm*Im>>1;n+=Tm)e=Lm(e/Fm);return Lm(n+(Fm+1)*e/(e+Pm))}function Km(e){return function(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}((e=e.replace(Bm,".")).split("."),t).join(".");return n+i}(e,function(e){return Nm.test(e)?"xn--"+function(e){var t,r,n,i,a,o,s,c,u,l,f,p,d,h,v,m=[];for(p=(e=function(e){for(var t,r,n=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}(e)).length,t=jm,r=0,a=Rm,o=0;o<p;++o)(f=e[o])<128&&m.push(Um(f));for(n=i=m.length,i&&m.push(Mm);n<p;){for(s=km,o=0;o<p;++o)(f=e[o])>=t&&f<s&&(s=f);for(s-t>Lm((km-r)/(d=n+1))&&zm("overflow"),r+=(s-t)*d,t=s,o=0;o<p;++o)if((f=e[o])<t&&++r>km&&zm("overflow"),f==t){for(c=r,u=Tm;!(c<(l=u<=a?Am:u>=a+Im?Im:u-a));u+=Tm)v=c-l,h=Tm-l,m.push(Um(Vm(l+v%h,0))),c=Lm(v/h);m.push(Um(Vm(c,0))),a=qm(r,d,n==i),r=0,++n}++r,++t}return m.join("")}(e):e})}var Gm=[],Hm=[],Wm="undefined"!=typeof Uint8Array?Uint8Array:Array,$m=!1;function Ym(){$m=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)Gm[t]=e[t],Hm[e.charCodeAt(t)]=t;Hm["-".charCodeAt(0)]=62,Hm["_".charCodeAt(0)]=63}function Jm(e,t,r){for(var n,i,a=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],a.push(Gm[(i=n)>>18&63]+Gm[i>>12&63]+Gm[i>>6&63]+Gm[63&i]);return a.join("")}function Qm(e){var t;$m||Ym();for(var r=e.length,n=r%3,i="",a=[],o=0,s=r-n;o<s;o+=16383)a.push(Jm(e,o,o+16383>s?s:o+16383));return 1===n?(t=e[r-1],i+=Gm[t>>2],i+=Gm[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=Gm[t>>10],i+=Gm[t>>4&63],i+=Gm[t<<2&63],i+="="),a.push(i),a.join("")}function Zm(e,t,r,n,i){var a,o,s=8*i-n-1,c=(1<<s)-1,u=c>>1,l=-7,f=r?i-1:0,p=r?-1:1,d=e[t+f];for(f+=p,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=256*a+e[t+f],f+=p,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=n;l>0;o=256*o+e[t+f],f+=p,l-=8);if(0===a)a=1-u;else{if(a===c)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=u}return(d?-1:1)*o*Math.pow(2,a-n)}function Xm(e,t,r,n,i,a){var o,s,c,u=8*a-i-1,l=(1<<u)-1,f=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:a-1,h=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+f>=1?p/c:p*Math.pow(2,1-f))*c>=2&&(o++,c/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*c-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&s,d+=h,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[r+d]=255&o,d+=h,o/=256,u-=8);e[r+d-h]|=128*v}var eg={}.toString,tg=Array.isArray||function(e){return"[object Array]"==eg.call(e)};function rg(){return ig.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ng(e,t){if(rg()<t)throw new RangeError("Invalid typed array length");return ig.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=ig.prototype:(null===e&&(e=new ig(t)),e.length=t),e}function ig(e,t,r){if(!(ig.TYPED_ARRAY_SUPPORT||this instanceof ig))return new ig(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return sg(this,e)}return ag(this,e,t,r)}function ag(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);ig.TYPED_ARRAY_SUPPORT?(e=t).__proto__=ig.prototype:e=cg(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!ig.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|fg(t,r),i=(e=ng(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(lg(t)){var r=0|ug(t.length);return 0===(e=ng(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?ng(e,0):cg(e,t);if("Buffer"===t.type&&tg(t.data))return cg(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function og(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function sg(e,t){if(og(t),e=ng(e,t<0?0:0|ug(t)),!ig.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function cg(e,t){var r=t.length<0?0:0|ug(t.length);e=ng(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function ug(e){if(e>=rg())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+rg().toString(16)+" bytes");return 0|e}function lg(e){return!(null==e||!e._isBuffer)}function fg(e,t){if(lg(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Dg(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Fg(e).length;default:if(n)return Dg(e).length;t=(""+t).toLowerCase(),n=!0}}function pg(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function dg(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=ig.from(t,n)),lg(t))return 0===t.length?-1:hg(e,t,r,n,i);if("number"==typeof t)return t&=255,ig.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):hg(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function hg(e,t,r,n,i){var a,o=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,c/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=r;a<s;a++)if(u(e,a)===u(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===c)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(r+c>s&&(r=s-c),a=r;a>=0;a--){for(var f=!0,p=0;p<c;p++)if(u(e,a+p)!==u(t,p)){f=!1;break}if(f)return a}return-1}function vg(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function mg(e,t,r,n){return Lg(Dg(t,e.length-r),e,r,n)}function gg(e,t,r,n){return Lg(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function yg(e,t,r,n){return gg(e,t,r,n)}function bg(e,t,r,n){return Lg(Fg(t),e,r,n)}function wg(e,t,r,n){return Lg(function(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function _g(e,t,r){return 0===t&&r===e.length?Qm(e):Qm(e.slice(t,r))}function Eg(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,o,s,c,u=e[i],l=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=r)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(a=e[i+1]))&&(c=(31&u)<<6|63&a)>127&&(l=c);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(c=(15&u)<<12|(63&a)<<6|63&o)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(c=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(e){var t=e.length;if(t<=Sg)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Sg));return r}(n)}ig.TYPED_ARRAY_SUPPORT=void 0===rc.TYPED_ARRAY_SUPPORT||rc.TYPED_ARRAY_SUPPORT,ig.poolSize=8192,ig._augment=function(e){return e.__proto__=ig.prototype,e},ig.from=function(e,t,r){return ag(null,e,t,r)},ig.TYPED_ARRAY_SUPPORT&&(ig.prototype.__proto__=Uint8Array.prototype,ig.__proto__=Uint8Array),ig.alloc=function(e,t,r){return function(e,t,r,n){return og(t),t<=0?ng(e,t):void 0!==r?"string"==typeof n?ng(e,t).fill(r,n):ng(e,t).fill(r):ng(e,t)}(null,e,t,r)},ig.allocUnsafe=function(e){return sg(null,e)},ig.allocUnsafeSlow=function(e){return sg(null,e)},ig.isBuffer=Ug,ig.compare=function(e,t){if(!lg(e)||!lg(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},ig.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ig.concat=function(e,t){if(!tg(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return ig.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=ig.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!lg(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},ig.byteLength=fg,ig.prototype._isBuffer=!0,ig.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)pg(this,t,t+1);return this},ig.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)pg(this,t,t+3),pg(this,t+1,t+2);return this},ig.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)pg(this,t,t+7),pg(this,t+1,t+6),pg(this,t+2,t+5),pg(this,t+3,t+4);return this},ig.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Eg(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return kg(this,t,r);case"utf8":case"utf-8":return Eg(this,t,r);case"ascii":return xg(this,t,r);case"latin1":case"binary":return Cg(this,t,r);case"base64":return _g(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Tg(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},ig.prototype.equals=function(e){if(!lg(e))throw new TypeError("Argument must be a Buffer");return this===e||0===ig.compare(this,e)},ig.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},ig.prototype.compare=function(e,t,r,n,i){if(!lg(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(a,o),c=this.slice(n,i),u=e.slice(t,r),l=0;l<s;++l)if(c[l]!==u[l]){a=c[l],o=u[l];break}return a<o?-1:o<a?1:0},ig.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},ig.prototype.indexOf=function(e,t,r){return dg(this,e,t,r,!0)},ig.prototype.lastIndexOf=function(e,t,r){return dg(this,e,t,r,!1)},ig.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return vg(this,e,t,r);case"utf8":case"utf-8":return mg(this,e,t,r);case"ascii":return gg(this,e,t,r);case"latin1":case"binary":return yg(this,e,t,r);case"base64":return bg(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wg(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},ig.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Sg=4096;function xg(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function Cg(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function kg(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=Bg(e[a]);return i}function Tg(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function Ag(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function Ig(e,t,r,n,i,a){if(!lg(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function Pg(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function Og(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function Rg(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function jg(e,t,r,n,i){return i||Rg(e,0,r,4),Xm(e,t,r,n,23,4),r+4}function Mg(e,t,r,n,i){return i||Rg(e,0,r,8),Xm(e,t,r,n,52,8),r+8}ig.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),ig.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=ig.prototype;else{var i=t-e;r=new ig(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},ig.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||Ag(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},ig.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||Ag(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},ig.prototype.readUInt8=function(e,t){return t||Ag(e,1,this.length),this[e]},ig.prototype.readUInt16LE=function(e,t){return t||Ag(e,2,this.length),this[e]|this[e+1]<<8},ig.prototype.readUInt16BE=function(e,t){return t||Ag(e,2,this.length),this[e]<<8|this[e+1]},ig.prototype.readUInt32LE=function(e,t){return t||Ag(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ig.prototype.readUInt32BE=function(e,t){return t||Ag(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ig.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||Ag(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},ig.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||Ag(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},ig.prototype.readInt8=function(e,t){return t||Ag(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},ig.prototype.readInt16LE=function(e,t){t||Ag(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},ig.prototype.readInt16BE=function(e,t){t||Ag(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},ig.prototype.readInt32LE=function(e,t){return t||Ag(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ig.prototype.readInt32BE=function(e,t){return t||Ag(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ig.prototype.readFloatLE=function(e,t){return t||Ag(e,4,this.length),Zm(this,e,!0,23,4)},ig.prototype.readFloatBE=function(e,t){return t||Ag(e,4,this.length),Zm(this,e,!1,23,4)},ig.prototype.readDoubleLE=function(e,t){return t||Ag(e,8,this.length),Zm(this,e,!0,52,8)},ig.prototype.readDoubleBE=function(e,t){return t||Ag(e,8,this.length),Zm(this,e,!1,52,8)},ig.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||Ig(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},ig.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||Ig(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},ig.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||Ig(this,e,t,1,255,0),ig.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},ig.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||Ig(this,e,t,2,65535,0),ig.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Pg(this,e,t,!0),t+2},ig.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||Ig(this,e,t,2,65535,0),ig.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Pg(this,e,t,!1),t+2},ig.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||Ig(this,e,t,4,4294967295,0),ig.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Og(this,e,t,!0),t+4},ig.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||Ig(this,e,t,4,4294967295,0),ig.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Og(this,e,t,!1),t+4},ig.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Ig(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},ig.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Ig(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},ig.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||Ig(this,e,t,1,127,-128),ig.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},ig.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||Ig(this,e,t,2,32767,-32768),ig.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Pg(this,e,t,!0),t+2},ig.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||Ig(this,e,t,2,32767,-32768),ig.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Pg(this,e,t,!1),t+2},ig.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||Ig(this,e,t,4,2147483647,-2147483648),ig.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Og(this,e,t,!0),t+4},ig.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||Ig(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),ig.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Og(this,e,t,!1),t+4},ig.prototype.writeFloatLE=function(e,t,r){return jg(this,e,t,!0,r)},ig.prototype.writeFloatBE=function(e,t,r){return jg(this,e,t,!1,r)},ig.prototype.writeDoubleLE=function(e,t,r){return Mg(this,e,t,!0,r)},ig.prototype.writeDoubleBE=function(e,t,r){return Mg(this,e,t,!1,r)},ig.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!ig.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},ig.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!ig.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var o=lg(e)?e:Dg(new ig(e,n).toString()),s=o.length;for(a=0;a<r-t;++a)this[a+t]=o[a%s]}return this};var Ng=/[^+\/0-9A-Za-z-_]/g;function Bg(e){return e<16?"0"+e.toString(16):e.toString(16)}function Dg(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function Fg(e){return function(e){var t,r,n,i,a,o;$m||Ym();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a="="===e[s-2]?2:"="===e[s-1]?1:0,o=new Wm(3*s/4-a),n=a>0?s-4:s;var c=0;for(t=0,r=0;t<n;t+=4,r+=3)i=Hm[e.charCodeAt(t)]<<18|Hm[e.charCodeAt(t+1)]<<12|Hm[e.charCodeAt(t+2)]<<6|Hm[e.charCodeAt(t+3)],o[c++]=i>>16&255,o[c++]=i>>8&255,o[c++]=255&i;return 2===a?(i=Hm[e.charCodeAt(t)]<<2|Hm[e.charCodeAt(t+1)]>>4,o[c++]=255&i):1===a&&(i=Hm[e.charCodeAt(t)]<<10|Hm[e.charCodeAt(t+1)]<<4|Hm[e.charCodeAt(t+2)]>>2,o[c++]=i>>8&255,o[c++]=255&i),o}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(Ng,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Lg(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Ug(e){return null!=e&&(!!e._isBuffer||zg(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&zg(e.slice(0,0))}(e))}function zg(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var Vg="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},qg=/%[sdj%]/g;function Kg(e){if(!oy(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(Yg(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(qg,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),o=n[r];r<i;o=n[++r])ny(o)||!uy(o)?a+=" "+o:a+=" "+Yg(o);return a}function Gg(e,t){if(sy(rc.process))return function(){return Gg(e,t).apply(this,arguments)};if(!0===Tc.noDeprecation)return e;var r=!1;return function(){if(!r){if(Tc.throwDeprecation)throw new Error(t);Tc.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}}var Hg,Wg={};function $g(e){if(sy(Hg)&&(Hg=Tc.env.NODE_DEBUG||""),e=e.toUpperCase(),!Wg[e])if(new RegExp("\\b"+e+"\\b","i").test(Hg)){Wg[e]=function(){var t=Kg.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else Wg[e]=function(){};return Wg[e]}function Yg(e,t){var r={seen:[],stylize:Qg};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),ry(t)?r.showHidden=t:t&&gy(r,t),sy(r.showHidden)&&(r.showHidden=!1),sy(r.depth)&&(r.depth=2),sy(r.colors)&&(r.colors=!1),sy(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Jg),Zg(r,e,r.depth)}function Jg(e,t){var r=Yg.styles[t];return r?"["+Yg.colors[r][0]+"m"+e+"["+Yg.colors[r][1]+"m":e}function Qg(e,t){return e}function Zg(e,t,r){if(e.customInspect&&t&&py(t.inspect)&&t.inspect!==Yg&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return oy(n)||(n=Zg(e,n,r)),n}var i=function(e,t){if(sy(t))return e.stylize("undefined","undefined");if(oy(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(ay(t))return e.stylize(""+t,"number");if(ry(t))return e.stylize(""+t,"boolean");if(ny(t))return e.stylize("null","null")}(e,t);if(i)return i;var a=Object.keys(t),o=function(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),fy(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return Xg(t);if(0===a.length){if(py(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(cy(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(ly(t))return e.stylize(Date.prototype.toString.call(t),"date");if(fy(t))return Xg(t)}var c,u="",l=!1,f=["{","}"];(ty(t)&&(l=!0,f=["[","]"]),py(t))&&(u=" [Function"+(t.name?": "+t.name:"")+"]");return cy(t)&&(u=" "+RegExp.prototype.toString.call(t)),ly(t)&&(u=" "+Date.prototype.toUTCString.call(t)),fy(t)&&(u=" "+Xg(t)),0!==a.length||l&&0!=t.length?r<0?cy(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=l?function(e,t,r,n,i){for(var a=[],o=0,s=t.length;o<s;++o)yy(t,String(o))?a.push(ey(e,t,r,n,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(ey(e,t,r,n,i,!0))}),a}(e,t,r,o,a):a.map(function(n){return ey(e,t,r,o,n,l)}),e.seen.pop(),function(e,t,r){if(e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(c,u,f)):f[0]+u+f[1]}function Xg(e){return"["+Error.prototype.toString.call(e)+"]"}function ey(e,t,r,n,i,a){var o,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),yy(n,i)||(o="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=ny(r)?Zg(e,c.value,null):Zg(e,c.value,r-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),sy(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function ty(e){return Array.isArray(e)}function ry(e){return"boolean"==typeof e}function ny(e){return null===e}function iy(e){return null==e}function ay(e){return"number"==typeof e}function oy(e){return"string"==typeof e}function sy(e){return void 0===e}function cy(e){return uy(e)&&"[object RegExp]"===hy(e)}function uy(e){return"object"==typeof e&&null!==e}function ly(e){return uy(e)&&"[object Date]"===hy(e)}function fy(e){return uy(e)&&("[object Error]"===hy(e)||e instanceof Error)}function py(e){return"function"==typeof e}function dy(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function hy(e){return Object.prototype.toString.call(e)}function vy(e){return e<10?"0"+e.toString(10):e.toString(10)}Yg.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Yg.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var my=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function gy(e,t){if(!t||!uy(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function yy(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var by={inherits:Vg,_extend:gy,log:function(){var e,t;console.log("%s - %s",(e=new Date,t=[vy(e.getHours()),vy(e.getMinutes()),vy(e.getSeconds())].join(":"),[e.getDate(),my[e.getMonth()],t].join(" ")),Kg.apply(null,arguments))},isBuffer:function(e){return Ug(e)},isPrimitive:dy,isFunction:py,isError:fy,isDate:ly,isObject:uy,isRegExp:cy,isUndefined:sy,isSymbol:function(e){return"symbol"==typeof e},isString:oy,isNumber:ay,isNullOrUndefined:iy,isNull:ny,isBoolean:ry,isArray:ty,inspect:Yg,deprecate:Gg,format:Kg,debuglog:$g},wy={parse:Ny,resolve:function(e,t){return Ny(e,!1,!0).resolve(t)},resolveObject:function(e,t){return e?Ny(e,!1,!0).resolveObject(t):t},format:function(e){oy(e)&&(e=By({},e));return Dy(e)},Url:_y};function _y(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Ey=/^([a-z0-9.+-]+:)/i,Sy=/:[0-9]*$/,xy=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Cy=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),ky=["'"].concat(Cy),Ty=["%","/","?",";","#"].concat(ky),Ay=["/","?","#"],Iy=255,Py=/^[+a-z0-9A-Z_-]{0,63}$/,Oy=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Ry={javascript:!0,"javascript:":!0},jy={javascript:!0,"javascript:":!0},My={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Ny(e,t,r){if(e&&uy(e)&&e instanceof _y)return e;var n=new _y;return n.parse(e,t,r),n}function By(e,t,r,n){if(!oy(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),a=-1!==i&&i<t.indexOf("#")?"?":"#",o=t.split(a);o[0]=o[0].replace(/\\/g,"/");var s=t=o.join(a);if(s=s.trim(),!n&&1===t.split("#").length){var c=xy.exec(s);if(c)return e.path=s,e.href=s,e.pathname=c[1],c[2]?(e.search=c[2],e.query=r?xm(e.search.substr(1)):e.search.substr(1)):r&&(e.search="",e.query={}),e}var u,l,f,p,d=Ey.exec(s);if(d){var h=(d=d[0]).toLowerCase();e.protocol=h,s=s.substr(d.length)}if(n||d||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var v="//"===s.substr(0,2);!v||d&&jy[d]||(s=s.substr(2),e.slashes=!0)}if(!jy[d]&&(v||d&&!My[d])){var m,g,y=-1;for(u=0;u<Ay.length;u++)-1!==(l=s.indexOf(Ay[u]))&&(-1===y||l<y)&&(y=l);for(-1!==(g=-1===y?s.lastIndexOf("@"):s.lastIndexOf("@",y))&&(m=s.slice(0,g),s=s.slice(g+1),e.auth=decodeURIComponent(m)),y=-1,u=0;u<Ty.length;u++)-1!==(l=s.indexOf(Ty[u]))&&(-1===y||l<y)&&(y=l);-1===y&&(y=s.length),e.host=s.slice(0,y),s=s.slice(y),Fy(e),e.hostname=e.hostname||"";var b="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!b){var w=e.hostname.split(/\./);for(u=0,f=w.length;u<f;u++){var _=w[u];if(_&&!_.match(Py)){for(var E="",S=0,x=_.length;S<x;S++)_.charCodeAt(S)>127?E+="x":E+=_[S];if(!E.match(Py)){var C=w.slice(0,u),k=w.slice(u+1),T=_.match(Oy);T&&(C.push(T[1]),k.unshift(T[2])),k.length&&(s="/"+k.join(".")+s),e.hostname=C.join(".");break}}}}e.hostname.length>Iy?e.hostname="":e.hostname=e.hostname.toLowerCase(),b||(e.hostname=Km(e.hostname)),p=e.port?":"+e.port:"";var A=e.hostname||"";e.host=A+p,e.href+=e.host,b&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!Ry[h])for(u=0,f=ky.length;u<f;u++){var I=ky[u];if(-1!==s.indexOf(I)){var P=encodeURIComponent(I);P===I&&(P=escape(I)),s=s.split(I).join(P)}}var O=s.indexOf("#");-1!==O&&(e.hash=s.substr(O),s=s.slice(0,O));var R=s.indexOf("?");if(-1!==R?(e.search=s.substr(R),e.query=s.substr(R+1),r&&(e.query=xm(e.query)),s=s.slice(0,R)):r&&(e.search="",e.query={}),s&&(e.pathname=s),My[h]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){p=e.pathname||"";var j=e.search||"";e.path=p+j}return e.href=Dy(e),e}function Dy(e){var t=e.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var r=e.protocol||"",n=e.pathname||"",i=e.hash||"",a=!1,o="";e.host?a=t+e.host:e.hostname&&(a=t+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(a+=":"+e.port)),e.query&&uy(e.query)&&Object.keys(e.query).length&&(o=_m(e.query));var s=e.search||o&&"?"+o||"";return r&&":"!==r.substr(-1)&&(r+=":"),e.slashes||(!r||My[r])&&!1!==a?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),r+a+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+i}function Fy(e){var t=e.host,r=Sy.exec(t);r&&(":"!==(r=r[0])&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}_y.prototype.parse=function(e,t,r){return By(this,e,t,r)},_y.prototype.format=function(){return Dy(this)},_y.prototype.resolve=function(e){return this.resolveObject(Ny(e,!1,!0)).format()},_y.prototype.resolveObject=function(e){if(oy(e)){var t=new _y;t.parse(e,!1,!0),e=t}for(var r,n=new _y,i=Object.keys(this),a=0;a<i.length;a++){var o=i[a];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),c=0;c<s.length;c++){var u=s[c];"protocol"!==u&&(n[u]=e[u])}return My[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!My[e.protocol]){for(var l=Object.keys(e),f=0;f<l.length;f++){var p=l[f];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||jy[e.protocol])n.pathname=e.pathname;else{for(r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var d=n.pathname||"",h=n.search||"";n.path=d+h}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v,m=n.pathname&&"/"===n.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=g||m||n.host&&e.pathname,b=y,w=n.pathname&&n.pathname.split("/")||[],_=n.protocol&&!My[n.protocol];if(r=e.pathname&&e.pathname.split("/")||[],_&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=null),y=y&&(""===r[0]||""===w[0])),g)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=r;else if(r.length)w||(w=[]),w.pop(),w=w.concat(r),n.search=e.search,n.query=e.query;else if(!iy(e.search))return _&&(n.hostname=n.host=w.shift(),(v=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=v.shift(),n.host=n.hostname=v.shift())),n.search=e.search,n.query=e.query,ny(n.pathname)&&ny(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=w.slice(-1)[0],S=(n.host||e.host||w.length>1)&&("."===E||".."===E)||""===E,x=0,C=w.length;C>=0;C--)"."===(E=w[C])?w.splice(C,1):".."===E?(w.splice(C,1),x++):x&&(w.splice(C,1),x--);if(!y&&!b)for(;x--;x)w.unshift("..");!y||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),S&&"/"!==w.join("/").substr(-1)&&w.push("");var k=""===w[0]||w[0]&&"/"===w[0].charAt(0);return _&&(n.hostname=n.host=k?"":w.length?w.shift():"",(v=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=v.shift(),n.host=n.hostname=v.shift())),(y=y||n.host&&w.length)&&!k&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),ny(n.pathname)&&ny(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},_y.prototype.parseHost=function(){return Fy(this)};var Ly={version:"1.0.0",encode:function(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},decode:function(e){return new ig(e=(e+=Array(5-e.length%4).join("=")).replace(/\-/g,"+").replace(/\_/g,"/"),"base64")},validate:function(e){return/^[A-Za-z0-9\-_]+$/.test(e)}},Uy=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fromBase64url=i,t.toBase64Url=a,t.encode=o,t.decode=s,t.validate=c;var r,n=(r=Ly)&&r.__esModule?r:{default:r};function i(e){return n.default.decode(e).toString()}function a(e){var t=e;return Ug(t)||(t=ig.from(t)),n.default.encode(t)}function o(e){return a(e)}function s(e){return i(e)}function c(e){return n.default.validate(e)}t.default={fromBase64url:i,toBase64Url:a,encode:o,decode:s,validate:c}});r(Uy);Uy.fromBase64url,Uy.toBase64Url,Uy.encode,Uy.decode,Uy.validate;var zy=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=If)&&r.__esModule?r:{default:r};t.default=function(e,t,r){if(!e)throw new Error("`fn` must be a function");if(!t)throw new Error("`wait` is required");if(!(r=r||{}).maxWait)throw new Error("`options.maxWait` is required");if(!r.maxCalls)throw new Error("`options.maxCalls` is required");var i=r,a=i.maxCalls,o=i.maxWait,s=0,c=void 0,u=void 0;return function(){s+=1,clearTimeout(u),u=setTimeout(function(){return l()},t),c||(c=setTimeout(function(){return l()},o)),s>=a&&(0,n.default)(l,this,[])};function l(){clearTimeout(u),u=null,clearTimeout(c),c=null,s=0,(0,n.default)(e,this,[])}}});r(zy);var Vy=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.forEach(function(e){if(!t[e])throw new Error("missing required property "+e+" from "+t)})}});r(Vy);var qy=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=wf)&&r.__esModule?r:{default:r};t.default=function(){var e=this;this.promise=new n.default(function(t,r){e.resolve=t,e.reject=r})}});r(qy);var Ky=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e||!t)throw new Error("missing parameter for makeStateDataType");return{dataType:{set:function(r){return r instanceof e?(r.parent=this,{val:r,type:t}):{val:r?new e(r,{parent:this}):void 0,type:t}},compare:function(e,t){return e===t},onChange:function(e,t,r){t&&this.stopListening(t,"all",this._getCachedEventBubblingHandler(r)),e&&this.listenTo(e,"all",this._getCachedEventBubblingHandler(r))}},prop:{test:function(e){return!!e&&(e.parent=this,!1)},type:t}}}});r(Ky);var Gy=n(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}});r(Gy),ru(ru.S+ru.F*!Uc,"Object",{defineProperty:Xc.f});var Hy=$c.Object,Wy=function(e,t,r){return Hy.defineProperty(e,t,r)},$y=n(function(e){e.exports={default:Wy,__esModule:!0}});r($y);var Yy=n(function(e,t){t.__esModule=!0;var r,n=(r=$y)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,n.default)(e,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()});r(Yy);var Jy=Array.isArray||function(e){return"Array"==Ic(e)},Qy=Lu("species"),Zy=function(e,t){return new(function(e){var t;return Jy(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!Jy(t.prototype)||(t=void 0),Nc(t)&&null===(t=t[Qy])&&(t=void 0)),void 0===t?Array:t}(e))(t)},Xy=function(e,t){var r=1==e,n=2==e,i=3==e,a=4==e,o=6==e,s=5==e||o,c=t||Zy;return function(t,u,l){for(var f,p,d=Ku(t),h=Pc(d),v=Jc(u,l,3),m=yu(h.length),g=0,y=r?c(t,m):n?c(t,0):void 0;m>g;g++)if((s||g in h)&&(p=v(f=h[g],g,d),e))if(r)y[g]=p;else if(p)switch(e){case 3:return!0;case 5:return f;case 6:return g;case 2:y.push(f)}else if(a)return!1;return o?-1:i||a?a:y}},eb=n(function(e){var t=xu("meta"),r=Xc.f,n=0,i=Object.isExtensible||function(){return!0},a=!Lc(function(){return i(Object.preventExtensions({}))}),o=function(e){r(e,t,{value:{i:"O"+ ++n,w:{}}})},s=e.exports={KEY:t,NEED:!1,fastKey:function(e,r){if(!Nc(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Fc(e,t)){if(!i(e))return"F";if(!r)return"E";o(e)}return e[t].i},getWeak:function(e,r){if(!Fc(e,t)){if(!i(e))return!0;if(!r)return!1;o(e)}return e[t].w},onFreeze:function(e){return a&&s.NEED&&i(e)&&!Fc(e,t)&&o(e),e}}}),tb=(eb.KEY,eb.NEED,eb.fastKey,eb.getWeak,eb.onFreeze,function(e,t){if(!Nc(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}),rb=eb.getWeak,nb=Xy(5),ib=Xy(6),ab=0,ob=function(e){return e._l||(e._l=new sb)},sb=function(){this.a=[]},cb=function(e,t){return nb(e.a,function(e){return e[0]===t})};sb.prototype={get:function(e){var t=cb(this,e);if(t)return t[1]},has:function(e){return!!cb(this,e)},set:function(e,t){var r=cb(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=ib(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}};var ub={getConstructor:function(e,t,r,n){var i=e(function(e,a){pl(e,i,t,"_i"),e._t=t,e._i=ab++,e._l=void 0,null!=a&&bl(a,r,e[n],e)});return Kl(i.prototype,{delete:function(e){if(!Nc(e))return!1;var r=rb(e);return!0===r?ob(tb(this,t)).delete(e):r&&Fc(r,this._i)&&delete r[this._i]},has:function(e){if(!Nc(e))return!1;var r=rb(e);return!0===r?ob(tb(this,t)).has(e):r&&Fc(r,this._i)}}),i},def:function(e,t,r){var n=rb(Qc(t),!0);return!0===n?ob(e).set(t,r):n[e._i]=r,e},ufstore:ob},lb=Xc.f,fb=Xy(0),pb=function(e,t,r,n,i,a){var o=zc[e],s=o,c=i?"set":"add",u=s&&s.prototype,l={};return Uc&&"function"==typeof s&&(a||u.forEach&&!Lc(function(){(new s).entries().next()}))?(s=t(function(t,r){pl(t,s,e,"_c"),t._c=new o,null!=r&&bl(r,i,t[c],t)}),fb("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in u&&(!a||"clear"!=e)&&eu(s.prototype,e,function(r,n){if(pl(this,s,e),!t&&a&&!Nc(r))return"get"==e&&void 0;var i=this._c[e](0===r?0:r,n);return t?this:i})}),a||lb(s.prototype,"size",{get:function(){return this._c.size}})):(s=n.getConstructor(t,e,i,c),Kl(s.prototype,r),eb.NEED=!0),Vu(s,e),l[e]=s,ru(ru.G+ru.W+ru.F,l),a||n.setStrong(s,e,i),s},db=(n(function(e){var t,r=Xy(0),n=tb,i=!zc.ActiveXObject&&"ActiveXObject"in zc,a=eb.getWeak,o=Object.isExtensible,s=ub.ufstore,c=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},u={get:function(e){if(Nc(e)){var t=a(e);return!0===t?s(tb(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return ub.def(tb(this,"WeakMap"),e,t)}},l=e.exports=pb("WeakMap",c,u,ub,!0,!0);n&&i&&(t=ub.getConstructor(c,"WeakMap"),Sf(t.prototype,u),eb.NEED=!0,r(["delete","has","get","set"],function(e){var r=l.prototype,n=r[e];vu(r,e,function(r,i){if(Nc(r)&&!o(r)){this._f||(this._f=new t);var a=this._f[e](r,i);return"set"==e?this:a}return n.call(this,r,i)})}))}),function(e){ru(ru.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})});db("WeakMap");var hb=function(e){ru(ru.S,e,{from:function(e){var t,r,n,i,a=arguments[1];return Yc(this),(t=void 0!==a)&&Yc(a),null==e?new this:(r=[],t?(n=0,i=Jc(a,arguments[2],2),bl(e,!1,function(e){r.push(i(e,n++))})):bl(e,!1,r.push,r),new this(r))}})};hb("WeakMap");var vb=$c.WeakMap,mb=n(function(e){e.exports={default:vb,__esModule:!0}});r(mb);var gb=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(Gy),n=o(Yy),i=o(mb),a=o(by);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(e.add)e.add.apply(e,r);else if(e.set)e.set.apply(e,r);else{if(!e.push)throw new TypeError("Could not determine how to insert into the specified container");e.push.apply(e,r)}}t.default=function e(){for(var t=arguments.length,o=Array(t),c=0;c<t;c++)o[c]=arguments[c];var u=o.shift(),l=new i.default,f=new i.default,p=o.length>1?e.apply(void 0,o):o[0],d="("+[u.name].concat(o.map(function(e){return e.name})).join(", ")+")";return function(){function e(){(0,r.default)(this,e);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];l.set(this,new(Function.prototype.bind.apply(u,[null].concat(n)))),f.set(this,0)}return(0,n.default)(e,[{key:"add",value:function(){return this.set.apply(this,arguments)}},{key:"clear",value:function(){var e=l.get(this).clear();return f.set(this,0),e}},{key:"delete",value:function(e){for(var t=l.get(this),r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(!n.length)return t.delete(e);var a=t.get(e);if(!a)return!1;var o=a.delete.apply(a,n);return o&&f.set(this,f.get(this)-1),0===a.size&&t.delete(e),o}},{key:"get",value:function(e){var t=l.get(this);if(!t.get)return t;for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(!n.length)return t.get(e);var a=t.get(e);return a?a.get?a.get.apply(a,n):a:void 0}},{key:"has",value:function(){return void 0!==this.get.apply(this,arguments)}},{key:"set",value:function(){for(var e=!1,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];this.has.apply(this,r)&&(e=!0);var i=l.get(this),a=r.shift();if(!i.get)return s.apply(void 0,[i,a].concat(r)),this;var o=i.get(a);if(!o){if(!p)return s.apply(void 0,[i,a].concat(r)),this;s(i,a,o=new p)}return s.apply(void 0,[o].concat(r)),e||f.set(this,f.get(this)+1),this}},{key:"inspect",value:function(){return"Container"+d+" {\n  "+a.default.inspect(l.get(this),{depth:null})+"\n}"}},{key:"size",get:function(){return f.get(this)}}]),e}()}});r(gb);var yb={f:Lu},bb=yb.f("iterator"),wb=n(function(e){e.exports={default:bb,__esModule:!0}});r(wb);var _b=Xc.f,Eb=function(e){var t=$c.Symbol||($c.Symbol={});"_"==e.charAt(0)||e in t||_b(t,e,{value:yb.f(e)})},Sb=Pu.concat("length","prototype"),xb={f:Object.getOwnPropertyNames||function(e){return Iu(e,Sb)}},Cb=xb.f,kb={}.toString,Tb="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ab={f:function(e){return Tb&&"[object Window]"==kb.call(e)?function(e){try{return Cb(e)}catch(e){return Tb.slice()}}(e):Cb(Rc(e))}},Ib=eb.KEY,Pb=Wc.f,Ob=Xc.f,Rb=Ab.f,jb=zc.Symbol,Mb=zc.JSON,Nb=Mb&&Mb.stringify,Bb=Lu("_hidden"),Db=Lu("toPrimitive"),Fb={}.propertyIsEnumerable,Lb=_u("symbol-registry"),Ub=_u("symbols"),zb=_u("op-symbols"),Vb=Object.prototype,qb="function"==typeof jb,Kb=zc.QObject,Gb=!Kb||!Kb.prototype||!Kb.prototype.findChild,Hb=Uc&&Lc(function(){return 7!=Fu(Ob({},"a",{get:function(){return Ob(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=Pb(Vb,t);n&&delete Vb[t],Ob(e,t,r),n&&e!==Vb&&Ob(Vb,t,n)}:Ob,Wb=function(e){var t=Ub[e]=Fu(jb.prototype);return t._k=e,t},$b=qb&&"symbol"==typeof jb.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof jb},Yb=function(e,t,r){return e===Vb&&Yb(zb,t,r),Qc(e),t=Bc(t,!0),Qc(r),Fc(Ub,t)?(r.enumerable?(Fc(e,Bb)&&e[Bb][t]&&(e[Bb][t]=!1),r=Fu(r,{enumerable:Mc(0,!1)})):(Fc(e,Bb)||Ob(e,Bb,Mc(1,{})),e[Bb][t]=!0),Hb(e,t,r)):Ob(e,t,r)},Jb=function(e,t){Qc(e);for(var r,n=function(e){var t=Ou(e),r=_f.f;if(r)for(var n,i=r(e),a=jc.f,o=0;i.length>o;)a.call(e,n=i[o++])&&t.push(n);return t}(t=Rc(t)),i=0,a=n.length;a>i;)Yb(e,r=n[i++],t[r]);return e},Qb=function(e){var t=Fb.call(this,e=Bc(e,!0));return!(this===Vb&&Fc(Ub,e)&&!Fc(zb,e))&&(!(t||!Fc(this,e)||!Fc(Ub,e)||Fc(this,Bb)&&this[Bb][e])||t)},Zb=function(e,t){if(e=Rc(e),t=Bc(t,!0),e!==Vb||!Fc(Ub,t)||Fc(zb,t)){var r=Pb(e,t);return!r||!Fc(Ub,t)||Fc(e,Bb)&&e[Bb][t]||(r.enumerable=!0),r}},Xb=function(e){for(var t,r=Rb(Rc(e)),n=[],i=0;r.length>i;)Fc(Ub,t=r[i++])||t==Bb||t==Ib||n.push(t);return n},ew=function(e){for(var t,r=e===Vb,n=Rb(r?zb:Rc(e)),i=[],a=0;n.length>a;)!Fc(Ub,t=n[a++])||r&&!Fc(Vb,t)||i.push(Ub[t]);return i};qb||(vu((jb=function(){if(this instanceof jb)throw TypeError("Symbol is not a constructor!");var e=xu(arguments.length>0?arguments[0]:void 0),t=function(r){this===Vb&&t.call(zb,r),Fc(this,Bb)&&Fc(this[Bb],e)&&(this[Bb][e]=!1),Hb(this,e,Mc(1,r))};return Uc&&Gb&&Hb(Vb,e,{configurable:!0,set:t}),Wb(e)}).prototype,"toString",function(){return this._k}),Wc.f=Zb,Xc.f=Yb,xb.f=Ab.f=Xb,jc.f=Qb,_f.f=ew,yb.f=function(e){return Wb(Lu(e))}),ru(ru.G+ru.W+ru.F*!qb,{Symbol:jb});for(var tw="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rw=0;tw.length>rw;)Lu(tw[rw++]);for(var nw=Ou(Lu.store),iw=0;nw.length>iw;)Eb(nw[iw++]);ru(ru.S+ru.F*!qb,"Symbol",{for:function(e){return Fc(Lb,e+="")?Lb[e]:Lb[e]=jb(e)},keyFor:function(e){if(!$b(e))throw TypeError(e+" is not a symbol!");for(var t in Lb)if(Lb[t]===e)return t},useSetter:function(){Gb=!0},useSimple:function(){Gb=!1}}),ru(ru.S+ru.F*!qb,"Object",{create:function(e,t){return void 0===t?Fu(e):Jb(Fu(e),t)},defineProperty:Yb,defineProperties:Jb,getOwnPropertyDescriptor:Zb,getOwnPropertyNames:Xb,getOwnPropertySymbols:ew}),Mb&&ru(ru.S+ru.F*(!qb||Lc(function(){var e=jb();return"[null]"!=Nb([e])||"{}"!=Nb({a:e})||"{}"!=Nb(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(Nc(t)||void 0!==e)&&!$b(e))return Jy(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!$b(t))return t}),n[1]=t,Nb.apply(Mb,n)}}),jb.prototype[Db]||eu(jb.prototype,Db,jb.prototype.valueOf),Vu(jb,"Symbol"),Vu(Math,"Math",!0),Vu(zc.JSON,"JSON",!0),Eb("asyncIterator"),Eb("observable");var aw=$c.Symbol,ow=n(function(e){e.exports={default:aw,__esModule:!0}});r(ow);var sw=n(function(e,t){t.__esModule=!0;var r=a(wb),n=a(ow),i="function"==typeof n.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof n.default&&"symbol"===i(r.default)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":void 0===e?"undefined":i(e)}});r(sw);var cw=Xc.f,uw=eb.fastKey,lw=Uc?"_s":"size",fw=function(e,t){var r,n=uw(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r},pw={getConstructor:function(e,t,r,n){var i=e(function(e,a){pl(e,i,t,"_i"),e._t=t,e._i=Fu(null),e._f=void 0,e._l=void 0,e[lw]=0,null!=a&&bl(a,r,e[n],e)});return Kl(i.prototype,{clear:function(){for(var e=tb(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[lw]=0},delete:function(e){var r=tb(this,t),n=fw(r,e);if(n){var i=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=i),i&&(i.p=a),r._f==n&&(r._f=i),r._l==n&&(r._l=a),r[lw]--}return!!n},forEach:function(e){tb(this,t);for(var r,n=Jc(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!fw(tb(this,t),e)}}),Uc&&cw(i.prototype,"size",{get:function(){return tb(this,t)[lw]}}),i},def:function(e,t,r){var n,i,a=fw(e,t);return a?a.v=r:(e._l=a={i:i=uw(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[lw]++,"F"!==i&&(e._i[i]=a)),e},getEntry:fw,setStrong:function(e,t,r){Qu(e,t,function(e,r){this._t=tb(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?Xu(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,Xu(1))},r?"entries":"values",!r,!0),Hl(t)}},dw=(pb("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=pw.getEntry(tb(this,"Map"),e);return t&&t.v},set:function(e,t){return pw.def(tb(this,"Map"),0===e?0:e,t)}},pw,!0),function(e){return function(){if(fl(this)!=e)throw TypeError(e+"#toJSON isn't generic");return bl(this,!1,(r=[]).push,r,t),r;var t,r}});ru(ru.P+ru.R,"Map",{toJSON:dw("Map")}),db("Map"),hb("Map");var hw=$c.Map,vw=n(function(e){e.exports={default:hw,__esModule:!0}});r(vw);var mw=function(e){return"function"==typeof e?e:rm};var gw=function(e,t){return cm(em(e,t,rm),e+"")},yw=lh&&new lh,bw=yw?function(e,t){return yw.set(e,t),e}:rm;var ww=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Jh(e.prototype),n=e.apply(r,t);return up(n)?n:r}},_w=1;var Ew=function(e,t,r){var n=t&_w,i=ww(e);return function t(){return(this&&this!==Jf&&this instanceof t?i:e).apply(n?r:this,arguments)}},Sw=Math.max;var xw=function(e,t,r,n){for(var i=-1,a=e.length,o=r.length,s=-1,c=t.length,u=Sw(a-o,0),l=Array(c+u),f=!n;++s<c;)l[s]=t[s];for(;++i<o;)(f||i<a)&&(l[r[i]]=e[i]);for(;u--;)l[s++]=e[i++];return l},Cw=Math.max;var Tw=function(e,t,r,n){for(var i=-1,a=e.length,o=-1,s=r.length,c=-1,u=t.length,l=Cw(a-s,0),f=Array(l+u),p=!n;++i<l;)f[i]=e[i];for(var d=i;++c<u;)f[d+c]=t[c];for(;++o<s;)(p||i<a)&&(f[d+r[o]]=e[i++]);return f};var Aw=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n};var Iw=function(){},Pw=4294967295;function Ow(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Pw,this.__views__=[]}Ow.prototype=Jh(Iw.prototype),Ow.prototype.constructor=Ow;var Rw=Ow;var jw=function(){},Mw=yw?function(e){return yw.get(e)}:jw,Nw={},Bw=Object.prototype.hasOwnProperty;var Dw=function(e){for(var t=e.name+"",r=Nw[t],n=Bw.call(Nw,t)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==e)return i.name}return t};function Fw(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Fw.prototype=Jh(Iw.prototype),Fw.prototype.constructor=Fw;var Lw=Fw;var Uw=function(e){if(e instanceof Rw)return e.clone();var t=new Lw(e.__wrapped__,e.__chain__);return t.__actions__=Wd(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},zw=Object.prototype.hasOwnProperty;function Vw(e){if(ud(e)&&!md(e)&&!(e instanceof Rw)){if(e instanceof Lw)return e;if(zw.call(e,"__wrapped__"))return Uw(e)}return new Lw(e)}Vw.prototype=Iw.prototype,Vw.prototype.constructor=Vw;var qw=Vw;var Kw=function(e){var t=Dw(e),r=qw[t];if("function"!=typeof r||!(t in Rw.prototype))return!1;if(e===r)return!0;var n=Mw(r);return!!n&&e===n[0]},Gw=sm(bw),Hw=/\{\n\/\* \[wrapped with (.+)\] \*/,Ww=/,? & /;var $w=function(e){var t=e.match(Hw);return t?t[1].split(Ww):[]},Yw=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var Jw=function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(Yw,"{\n/* [wrapped with "+t+"] */\n")};var Qw=function(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1};var Zw=function(e){return e!=e};var Xw=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1};var e_=function(e,t,r){return t==t?Xw(e,t,r):Qw(e,Zw,r)};var t_=function(e,t){return!(null==e||!e.length)&&e_(e,t,0)>-1},r_=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var n_=function(e,t){return rd(r_,function(r){var n="_."+r[0];t&r[1]&&!t_(e,n)&&e.push(n)}),e.sort()};var i_=function(e,t,r){var n=t+"";return cm(e,Jw(n,n_($w(n),r)))},a_=1,o_=2,s_=4,c_=8,u_=32,l_=64;var f_=function(e,t,r,n,i,a,o,s,c,u){var l=t&c_;t|=l?u_:l_,(t&=~(l?l_:u_))&s_||(t&=~(a_|o_));var f=[e,t,i,l?a:void 0,l?o:void 0,l?void 0:a,l?void 0:o,s,c,u],p=r.apply(void 0,f);return Kw(e)&&Gw(p,f),p.placeholder=n,i_(p,e,t)};var p_=function(e){return e.placeholder},d_=Math.min;var h_=function(e,t){for(var r=e.length,n=d_(t.length,r),i=Wd(e);n--;){var a=t[n];e[n]=_d(a,r)?i[a]:void 0}return e},v_="__lodash_placeholder__";var m_=function(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r];o!==t&&o!==v_||(e[r]=v_,a[i++]=r)}return a},g_=1,y_=2,b_=8,w_=16,__=128,E_=512;var S_=function e(t,r,n,i,a,o,s,c,u,l){var f=r&__,p=r&g_,d=r&y_,h=r&(b_|w_),v=r&E_,m=d?void 0:ww(t);return function g(){for(var y=arguments.length,b=Array(y),w=y;w--;)b[w]=arguments[w];if(h)var _=p_(g),E=Aw(b,_);if(i&&(b=xw(b,i,a,h)),o&&(b=Tw(b,o,s,h)),y-=E,h&&y<l){var S=m_(b,_);return f_(t,r,e,g.placeholder,n,b,S,c,u,l-y)}var x=p?n:this,C=d?x[t]:t;return y=b.length,c?b=h_(b,c):v&&y>1&&b.reverse(),f&&u<y&&(b.length=u),this&&this!==Jf&&this instanceof g&&(C=m||ww(C)),C.apply(x,b)}};var x_=function(e,t,r){var n=ww(e);return function i(){for(var a=arguments.length,o=Array(a),s=a,c=p_(i);s--;)o[s]=arguments[s];var u=a<3&&o[0]!==c&&o[a-1]!==c?[]:m_(o,c);return(a-=u.length)<r?f_(e,t,S_,i.placeholder,void 0,o,u,void 0,void 0,r-a):Zv(this&&this!==Jf&&this instanceof i?n:e,this,o)}},C_=1;var k_=function(e,t,r,n){var i=t&C_,a=ww(e);return function t(){for(var o=-1,s=arguments.length,c=-1,u=n.length,l=Array(u+s),f=this&&this!==Jf&&this instanceof t?a:e;++c<u;)l[c]=n[c];for(;s--;)l[c++]=arguments[++o];return Zv(f,i?r:this,l)}},T_="__lodash_placeholder__",A_=1,I_=2,P_=4,O_=8,R_=128,j_=256,M_=Math.min;var N_=function(e,t){var r=e[1],n=t[1],i=r|n,a=i<(A_|I_|R_),o=n==R_&&r==O_||n==R_&&r==j_&&e[7].length<=t[8]||n==(R_|j_)&&t[7].length<=t[8]&&r==O_;if(!a&&!o)return e;n&A_&&(e[2]=t[2],i|=r&A_?0:P_);var s=t[3];if(s){var c=e[3];e[3]=c?xw(c,s,t[4]):s,e[4]=c?m_(e[3],T_):t[4]}return(s=t[5])&&(c=e[5],e[5]=c?Tw(c,s,t[6]):s,e[6]=c?m_(e[5],T_):t[6]),(s=t[7])&&(e[7]=s),n&R_&&(e[8]=null==e[8]?t[8]:M_(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e},B_=NaN,D_=/^\s+|\s+$/g,F_=/^[-+]0x[0-9a-f]+$/i,L_=/^0b[01]+$/i,U_=/^0o[0-7]+$/i,z_=parseInt;var V_=function(e){if("number"==typeof e)return e;if(mv(e))return B_;if(up(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=up(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(D_,"");var r=L_.test(e);return r||U_.test(e)?z_(e.slice(2),r?2:8):F_.test(e)?B_:+e},q_=1/0,K_=1.7976931348623157e308;var G_=function(e){return e?(e=V_(e))===q_||e===-q_?(e<0?-1:1)*K_:e==e?e:0:0===e?e:0};var H_=function(e){var t=G_(e),r=t%1;return t==t?r?t-r:t:0},W_="Expected a function",$_=1,Y_=2,J_=8,Q_=16,Z_=32,X_=64,eE=Math.max;var tE=function(e,t,r,n,i,a,o,s){var c=t&Y_;if(!c&&"function"!=typeof e)throw new TypeError(W_);var u=n?n.length:0;if(u||(t&=~(Z_|X_),n=i=void 0),o=void 0===o?o:eE(H_(o),0),s=void 0===s?s:H_(s),u-=i?i.length:0,t&X_){var l=n,f=i;n=i=void 0}var p=c?void 0:Mw(e),d=[e,t,r,n,i,l,f,a,o,s];if(p&&N_(d,p),e=d[0],t=d[1],r=d[2],n=d[3],i=d[4],!(s=d[9]=void 0===d[9]?c?0:e.length:eE(d[9]-u,0))&&t&(J_|Q_)&&(t&=~(J_|Q_)),t&&t!=$_)h=t==J_||t==Q_?x_(e,t,s):t!=Z_&&t!=($_|Z_)||i.length?S_.apply(void 0,d):k_(e,t,r,n);else var h=Ew(e,t,r);return i_((p?bw:Gw)(h,d),e,t)},rE=gw(function(e,t){var r=m_(t,p_(rE));return tE(e,32,void 0,t,r)});rE.placeholder={};var nE=rE;var iE=function(e,t){return nE(mw(t),e)},aE=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=u(sw),n=u(wf),i=u(If),a=u(vw),o=u(mb),s=u(iE);t.default=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];if(3===t.length)return(0,i.default)(f,null,t);var o=t[0]||{},c=o.cacheFailures,u=o.cacheSuccesses,l=o.keyFactory;return f;function f(e,t,a){var o=t;return a.value=(0,s.default)(a.value,function(t){for(var r=this,a=o,s=arguments.length,f=Array(s>1?s-1:0),d=1;d<s;d++)f[d-1]=arguments[d];l&&(a=a+"_"+l.apply(void 0,f));var h=p.get(this,e,a);return h||(h=(0,i.default)(t,this,f),!c&&h&&h.catch&&(h=h.catch(function(t){return p.delete(r,e,a),n.default.reject(t)})),!u&&h&&h.then&&(h=h.then(function(t){return p.delete(r,e,a),t})),p.set(this,e,a,h),h)}),"object"!==(void 0===e?"undefined":(0,r.default)(e))||e.prototype||(e[t]=a.value),a}};var c=u(gb);function u(e){return e&&e.__esModule?e:{default:e}}var l=o.default,f=a.default,p=new((0,c.default)(l,f,f))});r(aE);var oE=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={email:/^[^\s]+?@[^\s]+?$/,uuid:/^[a-f\d]{8}(?:-[a-f\d]{4}){3}-[a-f\d]{12}$/,execEmail:/[^\s]+?@[^\s]+?/,execUuid:/[a-f\d]{8}(?:-[a-f\d]{4}){3}-[a-f\d]{12}/}});r(oE);var sE=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(If),n=i(md);function i(e){return e&&e.__esModule?e:{default:e}}t.proxyEvents=function(e,t){return["on","once"].forEach(function(r){t[r]=function(){return e[r].apply(e,arguments),t}}),e},t.transferEvents=function(e,t,i){(e=(0,n.default)(e)?e:[e]).forEach(function(e){t.on&&t.on(e,function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return function(e){var t=e.trigger||e.emit;if(!t)throw new Error("count not determine emit method");for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return(0,r.default)(t,e,i)}.apply(void 0,[i,e].concat(n))})})}});r(sE);sE.proxyEvents,sE.transferEvents;var cE=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=wf)&&r.__esModule?r:{default:r};t.default=function(e){return function(){return n.default.resolve(e)}}});r(cE);var uE=function(e,t,r){if(!up(r))return!1;var n=typeof t;return!!("number"==n?Fd(r)&&_d(t,r.length):"string"==n&&t in r)&&Nf(r[t],e)},lE=Object.prototype,fE=lE.hasOwnProperty,pE=gw(function(e,t){e=Object(e);var r=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&uE(t[0],t[1],i)&&(n=1);++r<n;)for(var a=t[r],o=Kd(a),s=-1,c=o.length;++s<c;){var u=o[s],l=e[u];(void 0===l||Nf(l,lE[u])&&!fE.call(e,u))&&(e[u]=a[u])}return e});function dE(){}function hE(){hE.init.call(this)}function vE(e){return void 0===e._maxListeners?hE.defaultMaxListeners:e._maxListeners}function mE(e,t,r,n){var i,a,o,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),o=a[t]):(a=e._events=new dE,e._eventsCount=0),o){if("function"==typeof o?o=a[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),!o.warned&&(i=vE(e))&&i>0&&o.length>i){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else o=a[t]=r,++e._eventsCount;return e}function gE(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}function yE(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function bE(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}function wE(e){Error.call(this,e),this.message=e}function _E(e){Error.call(this,e),this.message=e}dE.prototype=Object.create(null),hE.EventEmitter=hE,hE.usingDomains=!1,hE.prototype.domain=void 0,hE.prototype._events=void 0,hE.prototype._maxListeners=void 0,hE.defaultMaxListeners=10,hE.init=function(){this.domain=null,hE.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new dE,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},hE.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},hE.prototype.getMaxListeners=function(){return vE(this)},hE.prototype.emit=function(e){var t,r,n,i,a,o,s,c="error"===e;if(o=this._events)c=c&&null==o.error;else if(!c)return!1;if(s=this.domain,c){if(t=arguments[1],!s){if(t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(r=o[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:!function(e,t,r){if(t)e.call(r);else for(var n=e.length,i=bE(e,n),a=0;a<n;++a)i[a].call(r)}(r,l,this);break;case 2:!function(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,a=bE(e,i),o=0;o<i;++o)a[o].call(r,n)}(r,l,this,arguments[1]);break;case 3:!function(e,t,r,n,i){if(t)e.call(r,n,i);else for(var a=e.length,o=bE(e,a),s=0;s<a;++s)o[s].call(r,n,i)}(r,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,r,n,i,a){if(t)e.call(r,n,i,a);else for(var o=e.length,s=bE(e,o),c=0;c<o;++c)s[c].call(r,n,i,a)}(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),a=1;a<n;a++)i[a-1]=arguments[a];!function(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,a=bE(e,i),o=0;o<i;++o)a[o].apply(r,n)}(r,l,this,i)}return!0},hE.prototype.addListener=function(e,t){return mE(this,e,t,!1)},hE.prototype.on=hE.prototype.addListener,hE.prototype.prependListener=function(e,t){return mE(this,e,t,!0)},hE.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,gE(this,e,t)),this},hE.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,gE(this,e,t)),this},hE.prototype.removeListener=function(e,t){var r,n,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new dE:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,a=r.length;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){o=r[a].listener,i=a;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new dE,this;delete n[e]}else!function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,i);n.removeListener&&this.emit("removeListener",e,o||t)}return this},hE.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new dE,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new dE:delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),a=0;a<i.length;++a)"removeListener"!==(n=i[a])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new dE,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},hE.prototype.listeners=function(e){var t,r=this._events;return r&&(t=r[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):[]},hE.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):yE.call(e,t)},hE.prototype.listenerCount=yE,hE.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},by.inherits(wE,Error),wE.prototype.name="IllegalArgumentError",by.inherits(_E,Error),_E.prototype.name="IllegalStateError";var EE={IllegalStateError:_E,IllegalArgumentError:wE},SE=n(function(e){var t=e.exports=EE;function r(e,t,r,n){r=r||"";var i=new e(by.format.apply(this,[r].concat(n)));throw Error.captureStackTrace(i,t),i}function n(e,n,i){r(t.IllegalArgumentError,e,n,i)}function i(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array"}return t}function a(e){return function(t,r){var a=i(t);if(a==e)return t;n(arguments.callee,r||'Expected "'+e+'" but got "'+a+'".',Array.prototype.slice.call(arguments,2))}}e.exports.checkArgument=function(e,t){e||n(arguments.callee,t,Array.prototype.slice.call(arguments,2))},e.exports.checkState=function(e,n){e||function(e,n,i){r(t.IllegalStateError,e,n,i)}(arguments.callee,n,Array.prototype.slice.call(arguments,2))},e.exports.checkIsDef=function(e,t){if(void 0!==e)return e;n(arguments.callee,t||"Expected value to be defined but was undefined.",Array.prototype.slice.call(arguments,2))},e.exports.checkIsDefAndNotNull=function(e,t){if(null!=e)return e;n(arguments.callee,t||'Expected value to be defined and not null but got "'+i(e)+'".',Array.prototype.slice.call(arguments,2))},e.exports.checkIsString=a("string"),e.exports.checkIsArray=a("array"),e.exports.checkIsNumber=a("number"),e.exports.checkIsBoolean=a("boolean"),e.exports.checkIsFunction=a("function"),e.exports.checkIsObject=a("object")}),xE=(SE.checkArgument,SE.checkState,SE.checkIsDef,SE.checkIsDefAndNotNull,SE.checkIsString,SE.checkIsArray,SE.checkIsNumber,SE.checkIsBoolean,SE.checkIsFunction,SE.checkIsObject,SE);function CE(e){hE.EventEmitter.call(this),this.backoffStrategy_=e,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}by.inherits(CE,hE.EventEmitter),CE.prototype.failAfter=function(e){xE.checkArgument(e>0,"Expected a maximum number of retry greater than 0 but got %s.",e),this.maxNumberOfRetry_=e},CE.prototype.backoff=function(e){xE.checkState(-1===this.timeoutID_,"Backoff in progress."),this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",e),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,e))},CE.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},CE.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1};var kE=CE;function TE(e){return null!=e}function AE(e){if(TE((e=e||{}).initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(TE(e.maxDelay)&&e.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=e.initialDelay||100,this.maxDelay_=e.maxDelay||1e4,this.maxDelay_<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(TE(e.randomisationFactor)&&(e.randomisationFactor<0||e.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=e.randomisationFactor||0}AE.prototype.getMaxDelay=function(){return this.maxDelay_},AE.prototype.getInitialDelay=function(){return this.initialDelay_},AE.prototype.next=function(){var e=this.next_(),t=1+Math.random()*this.randomisationFactor_;return Math.round(e*t)},AE.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},AE.prototype.reset=function(){this.reset_()},AE.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")};var IE=AE;function PE(e){IE.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay(),this.factor_=PE.DEFAULT_FACTOR,e&&void 0!==e.factor&&(xE.checkArgument(e.factor>1,"Exponential factor should be greater than 1 but got %s.",e.factor),this.factor_=e.factor)}by.inherits(PE,IE),PE.DEFAULT_FACTOR=2,PE.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=this.backoffDelay_*this.factor_,this.backoffDelay_},PE.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()};var OE=PE;function RE(e){IE.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}by.inherits(RE,IE),RE.prototype.next_=function(){var e=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=e,e},RE.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0};var jE=RE;function ME(e,t,r){hE.EventEmitter.call(this),xE.checkIsFunction(e,"Expected fn to be a function."),xE.checkIsArray(t,"Expected args to be an array."),xE.checkIsFunction(r,"Expected callback to be a function."),this.function_=e,this.arguments_=t,this.callback_=r,this.lastResult_=[],this.numRetries_=0,this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.retryPredicate_=ME.DEFAULT_RETRY_PREDICATE_,this.state_=ME.State_.PENDING}by.inherits(ME,hE.EventEmitter),ME.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},ME.DEFAULT_RETRY_PREDICATE_=function(e){return!0},ME.prototype.isPending=function(){return this.state_==ME.State_.PENDING},ME.prototype.isRunning=function(){return this.state_==ME.State_.RUNNING},ME.prototype.isCompleted=function(){return this.state_==ME.State_.COMPLETED},ME.prototype.isAborted=function(){return this.state_==ME.State_.ABORTED},ME.prototype.setStrategy=function(e){return xE.checkState(this.isPending(),"FunctionCall in progress."),this.strategy_=e,this},ME.prototype.retryIf=function(e){return xE.checkState(this.isPending(),"FunctionCall in progress."),this.retryPredicate_=e,this},ME.prototype.getLastResult=function(){return this.lastResult_.concat()},ME.prototype.getNumRetries=function(){return this.numRetries_},ME.prototype.failAfter=function(e){return xE.checkState(this.isPending(),"FunctionCall in progress."),this.failAfter_=e,this},ME.prototype.abort=function(){this.isCompleted()||this.isAborted()||(this.isRunning()&&this.backoff_.reset(),this.state_=ME.State_.ABORTED,this.lastResult_=[new Error("Backoff aborted.")],this.emit("abort"),this.doCallback_())},ME.prototype.start=function(e){xE.checkState(!this.isAborted(),"FunctionCall is aborted."),xE.checkState(this.isPending(),"FunctionCall already started.");var t=this.strategy_||new jE;this.backoff_=e?e(t):new kE(t),this.backoff_.on("ready",this.doCall_.bind(this,!0)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),this.failAfter_>0&&this.backoff_.failAfter(this.failAfter_),this.state_=ME.State_.RUNNING,this.doCall_(!1)},ME.prototype.doCall_=function(e){e&&this.numRetries_++;var t=["call"].concat(this.arguments_);hE.EventEmitter.prototype.emit.apply(this,t);var r=this.handleFunctionCallback_.bind(this);this.function_.apply(null,this.arguments_.concat(r))},ME.prototype.doCallback_=function(){this.callback_.apply(null,this.lastResult_)},ME.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var e=Array.prototype.slice.call(arguments);this.lastResult_=e,hE.EventEmitter.prototype.emit.apply(this,["callback"].concat(e));var t=e[0];t&&this.retryPredicate_(t)?this.backoff_.backoff(t):(this.state_=ME.State_.COMPLETED,this.doCallback_())}},ME.prototype.handleBackoff_=function(e,t,r){this.emit("backoff",e,t,r)};var NE=ME,BE={Backoff:kE,FunctionCall:NE,FibonacciStrategy:jE,ExponentialStrategy:OE,fibonacci:function(e){return new kE(new jE(e))},exponential:function(e){return new kE(new OE(e))},call:function(e,t,r){var n=Array.prototype.slice.call(arguments);return e=n[0],t=n.slice(1,n.length-1),r=n[n.length-1],new NE(e,t,r)}},DE=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(sw),n=l(wf),i=l(If),a=l(Cf),o=l(iE),s=l(vp),c=l(pE);t.default=function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];var f=t[0]||{};f=(0,a.default)({},f),(0,c.default)(f,{backoff:!0,delay:1,maxAttempts:3});var p=void 0;p=f.backoff?{initialDelay:f.delay,maxDelay:f.maxDelay}:{initialDelay:1,maxDelay:1};if(3===t.length)return(0,i.default)(d,null,t);return d;function d(e,t,a){return a.value=(0,o.default)(a.value,function(e){for(var t=this,r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];var c=new hE.EventEmitter,l=new n.default(function(r,n){var o=u.default.call(function(r){var n=(0,i.default)(e,t,a);return(0,s.default)(n.on)&&(n.on("progress",c.emit.bind(c,"progress")),n.on("upload-progress",c.emit.bind(c,"upload-progress")),n.on("download-progress",c.emit.bind(c,"download-progress"))),n.then(function(e){r(null,e)}).catch(function(e){e||(e=new Error("retryable method failed without providing an error object")),r(e)})},function(e,t){return e?n(e):r(t)});o.setStrategy(new u.default.ExponentialStrategy(p)),f.maxAttempts&&o.failAfter(f.maxAttempts-1),o.start()});return l.on=function(e,t){return c.on(e,t),l},l}),"object"!==(void 0===e?"undefined":(0,r.default)(e))||e.prototype||(e[t]=a.value),a}};var u=l(BE);function l(e){return e&&e.__esModule?e:{default:e}}});r(DE);var FE=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=wf)&&r.__esModule?r:{default:r};t.default=function(e){return function(t){return new n.default(function(r){r(e(t))}).then(function(){return t}).catch(function(){return t})}}});r(FE);var LE=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(If),n=o(wf),i=o(iE);t.default=function(e){return function(t,o,s){s.value=(0,i.default)(s.value,function(t){for(var i=this,o=arguments.length,s=Array(o>1?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];return new n.default(function(o){i[e]=!0,o((0,r.default)(t,i,s).then((0,a.default)(function(){i[e]=!1})).catch(function(t){return i[e]=!1,n.default.reject(t)}))})})}};var a=o(FE);function o(e){return e&&e.__esModule?e:{default:e}}});r(LE),ru(ru.S,"Object",{create:Fu});var UE=$c.Object,zE=function(e,t){return UE.create(e,t)},VE=n(function(e){e.exports={default:zE,__esModule:!0}});r(VE);var qE=function(e,t){if(Qc(e),!Nc(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},KE={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=Jc(Function.call,Wc.f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return qE(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:qE};ru(ru.S,"Object",{setPrototypeOf:KE.set});var GE=$c.Object.setPrototypeOf,HE=n(function(e){e.exports={default:GE,__esModule:!0}});r(HE);var WE=function(e,t,r){t in e?Xc.f(e,t,Mc(0,r)):e[t]=r};ru(ru.S+ru.F*!Xl(function(e){}),"Array",{from:function(e){var t,r,n,i,a=Ku(e),o="function"==typeof this?this:Array,s=arguments.length,c=s>1?arguments[1]:void 0,u=void 0!==c,l=0,f=yl(a);if(u&&(c=Jc(c,s>2?arguments[2]:void 0,2)),null==f||o==Array&&ml(f))for(r=new o(t=yu(a.length));t>l;l++)WE(r,l,u?c(a[l],l):a[l]);else for(i=f.call(a),r=new o;!(n=i.next()).done;l++)WE(r,l,u?dl(i,c,[n.value,l],!0):n.value);return r.length=l,r}});var $E=$c.Array.from,YE=n(function(e){e.exports={default:$E,__esModule:!0}});r(YE);var JE=[].slice,QE={},ZE=Function.bind||function(e){var t=Yc(this),r=JE.call(arguments,1),n=function(){var i=r.concat(JE.call(arguments));return this instanceof n?function(e,t,r){if(!(t in QE)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";QE[t]=Function("F,a","return new F("+n.join(",")+")")}return QE[t](e,r)}(t,i.length,i):El(t,i,e)};return Nc(t.prototype)&&(n.prototype=t.prototype),n},XE=(zc.Reflect||{}).construct,eS=Lc(function(){function e(){}return!(XE(function(){},[],e)instanceof e)}),tS=!Lc(function(){XE(function(){})});ru(ru.S+ru.F*(eS||tS),"Reflect",{construct:function(e,t){Yc(e),Qc(t);var r=arguments.length<3?e:Yc(arguments[2]);if(tS&&!eS)return XE(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(ZE.apply(e,n))}var i=r.prototype,a=Fu(Nc(i)?i:Object.prototype),o=Function.apply.call(e,a,t);return Nc(o)?o:a}});var rS=$c.Reflect.construct,nS=n(function(e){e.exports={default:rS,__esModule:!0}});r(nS),nu("getPrototypeOf",function(){return function(e){return Wu(Ku(e))}});var iS=$c.Object.getPrototypeOf,aS=n(function(e){e.exports={default:iS,__esModule:!0}});r(aS);var oS=n(function(e,t){t.__esModule=!0;var r,n=(r=sw)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,n.default)(t))&&"function"!=typeof t?e:t}});r(oS);var sS=n(function(e,t){t.__esModule=!0;var r=a(HE),n=a(VE),i=a(sw);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,i.default)(t)));e.prototype=(0,n.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}});r(sS);var cS=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,i=d(VE),a=d(HE),o=d(YE),s=d(nS),c=d(aS),u=d(Gy),l=d(Yy),f=d(oS),p=d(sS);function d(e){return e&&e.__esModule?e:{default:e}}var h=(n=r=function(e){function t(){var e;(0,u.default)(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,f.default)(this,(e=t.__proto__||(0,c.default)(t)).call.apply(e,[this].concat(n))),o=void 0;if(a.parse)o=a.parse.apply(a,n);else if(a.constructor.parse){var s;o=(s=a.constructor).parse.apply(s,n)}return o||(o=a.constructor.defaultMessage),a.name=a.constructor.name,a.message=o,a}return(0,p.default)(t,e),(0,l.default)(t,null,[{key:"parse",value:function(){return arguments.length<=0?void 0:arguments[0]}}]),t}(function(e){function t(){var t=(0,s.default)(e,(0,o.default)(arguments));return(0,a.default)(t,(0,c.default)(this)),t}return t.prototype=(0,i.default)(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a.default?(0,a.default)(t,e):t.__proto__=e,t}(Error)),r.defaultMessage="An error occurred",n);t.default=h});r(cS);var uS=Object.defineProperty;function lS(e,t,r){var n=r.configurable,i=r.enumerable,a=r.initializer,o=r.value;return{configurable:n,enumerable:i,get:function(){if(this!==e){var r=a?a.call(this):o;return uS(this,t,{configurable:n,enumerable:i,writable:!0,value:r}),r}},set:RS(t)}}function fS(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return kS(lS,t)}var pS,dS,hS,vS,mS,gS,yS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function bS(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function wS(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function _S(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var ES=Object.defineProperty,SS=Object.getOwnPropertyDescriptor,xS=Object.getOwnPropertyNames,CS=Object.getOwnPropertySymbols;function kS(e,t){return function(e){if(!e||!e.hasOwnProperty)return!1;for(var t=["value","initializer","get","set"],r=0,n=t.length;r<n;r++)if(e.hasOwnProperty(t[r]))return!0;return!1}(t[t.length-1])?e.apply(void 0,_S(t).concat([[]])):function(){return e.apply(void 0,_S(Array.prototype.slice.call(arguments)).concat([t]))}}var TS=(dS=wS((pS=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),bS(this,"debounceTimeoutIds",dS,this),bS(this,"throttleTimeoutIds",hS,this),bS(this,"throttlePreviousTimestamps",vS,this),bS(this,"throttleTrailingArgs",mS,this),bS(this,"profileLastRan",gS,this)}).prototype,"debounceTimeoutIds",[fS],{enumerable:!0,initializer:function(){return{}}}),hS=wS(pS.prototype,"throttleTimeoutIds",[fS],{enumerable:!0,initializer:function(){return{}}}),vS=wS(pS.prototype,"throttlePreviousTimestamps",[fS],{enumerable:!0,initializer:function(){return{}}}),mS=wS(pS.prototype,"throttleTrailingArgs",[fS],{enumerable:!0,initializer:function(){return null}}),gS=wS(pS.prototype,"profileLastRan",[fS],{enumerable:!0,initializer:function(){return null}}),pS),AS="function"==typeof Symbol?Symbol("__core_decorators__"):"__core_decorators__";function IS(e){return!1===e.hasOwnProperty(AS)&&ES(e,AS,{value:new TS}),e[AS]}var PS=CS?function(e){return xS(e).concat(CS(e))}:xS;function OS(e){var t={};return PS(e).forEach(function(r){return t[r]=SS(e,r)}),t}function RS(e){return function(t){return Object.defineProperty(this,e,{configurable:!0,writable:!0,enumerable:!0,value:t}),t}}function jS(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}}var MS="object"===("undefined"==typeof console?"undefined":yS(console))&&console&&"function"==typeof console.warn?jS(console.warn,console):function(){},NS={};function BS(e){!0!==NS[e]&&(NS[e]=!0,MS("DEPRECATION: "+e))}var DS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FS=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var LS=/^function ([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?(\([^\)]*\))[\s\S]+$/,US=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentKlass=t,this.childKlass=r,this.parentDescriptor=n,this.childDescriptor=i}return FS(e,[{key:"_getTopic",value:function(e){return void 0===e?null:"value"in e?e.value:"get"in e?e.get:"set"in e?e.set:void 0}},{key:"_extractTopicSignature",value:function(e){switch(void 0===e?"undefined":DS(e)){case"function":return this._extractFunctionSignature(e);default:return this.key}}},{key:"_extractFunctionSignature",value:function(e){var t=this;return e.toString().replace(LS,function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.key)+arguments[2]})}},{key:"key",get:function(){return this.childDescriptor.key}},{key:"parentNotation",get:function(){return this.parentKlass.constructor.name+"#"+this.parentPropertySignature}},{key:"childNotation",get:function(){return this.childKlass.constructor.name+"#"+this.childPropertySignature}},{key:"parentTopic",get:function(){return this._getTopic(this.parentDescriptor)}},{key:"childTopic",get:function(){return this._getTopic(this.childDescriptor)}},{key:"parentPropertySignature",get:function(){return this._extractTopicSignature(this.parentTopic)}},{key:"childPropertySignature",get:function(){return this._extractTopicSignature(this.childTopic)}}]),FS(e,[{key:"assert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!0!==e&&this.error("{child} does not properly override {parent}"+t)}},{key:"error",value:function(e){var t=this;throw e=e.replace("{parent}",function(e){return t.parentNotation}).replace("{child}",function(e){return t.childNotation}),new SyntaxError(e)}}]),e}();function zS(e){return e.hasOwnProperty("value")?"data":e.hasOwnProperty("get")||e.hasOwnProperty("set")?"accessor":"data"}function VS(e,t,r){r.assert(e.length===t.length)}function qS(e,t,r){var n=zS(e),i=zS(t);switch(n!==i&&r.error('descriptor types do not match. {parent} is "'+n+'", {child} is "'+i+'"'),i){case"data":!function(e,t,r){var n=DS(e.value),i=DS(t.value);switch("undefined"===n&&"undefined"===i&&r.error("descriptor values are both undefined. (class properties are are not currently supported)'"),n!==i&&("function"===i&&void 0===n||void 0!==n)&&r.error('value types do not match. {parent} is "'+n+'", {child} is "'+i+'"'),i){case"function":VS(e.value,t.value,r);break;default:r.error('Unexpected error. Please file a bug with: {parent} is "'+n+'", {child} is "'+i+'"')}}(e,t,r);break;case"accessor":!function(e,t,r){var n="function"==typeof e.get,i="function"==typeof t.get,a="function"==typeof e.set,o="function"==typeof t.set;(n||i)&&(!n&&a&&r.error("{parent} is setter but {child} is getter"),!i&&o&&r.error("{parent} is getter but {child} is setter"),VS(e.get,t.get,r)),(a||o)&&(!a&&n&&r.error("{parent} is getter but {child} is setter"),!o&&i&&r.error("{parent} is setter but {child} is getter"),VS(e.set,t.set,r))}(e,t,r)}}var KS=[function(e){return e.toLowerCase()},function(e){return e.toUpperCase()},function(e){return e+"s"},function(e){return e.slice(0,-1)},function(e){return e.slice(1,e.length)}];function GS(e,t,r){r.key=t;var n=Object.getPrototypeOf(e),i=Object.getOwnPropertyDescriptor(n,t),a=new US(n,e,i,r);if(void 0===i){var o=function(e,t){for(var r=0,n=KS.length;r<n;r++){var i=(0,KS[r])(t);if(i in e)return i}return null}(n,t),s=o?'\n\n  Did you mean "'+o+'"?':"";a.error("No descriptor matching {child} was found on the prototype chain."+s)}return qS(i,r,a),r}var HS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WS=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),$S="This function will be removed in future versions.";function YS(e,t,r,n){var i=WS(n,2),a=i[0],o=void 0===a?$S:a,s=i[1],c=void 0===s?{}:s;if("function"!=typeof r.value)throw new SyntaxError("Only functions can be marked as deprecated");var u=e.constructor.name+"#"+t;return c.url&&(o+="\n\n    See "+c.url+" for more details.\n\n"),HS({},r,{value:function(){return MS("DEPRECATION "+u+": "+o),r.value.apply(this,arguments)}})}function JS(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return kS(YS,t)}var QS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function XS(){}function ex(e,t,r){return QS({},r,{value:function(){return function(e,t,r){if("object"===("undefined"==typeof console?"undefined":ZS(console))){var n=console.warn;console.warn=XS;var i=t.apply(e,r);return console.warn=n,i}return t.apply(e,r)}(this,r.value,arguments)}})}var tx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function rx(e,t,r){var n=function(e){var t=void 0,r=void 0;return e.value?(t=e.value,r="value"):e.get?(t=e.get,r="get"):e.set&&(t=e.set,r="set"),{fn:t,wrapKey:r}}(r),i=n.fn,a=n.wrapKey,o=new WeakMap,s=Object.create(null),c=Object.create(null),u=0;return tx({},r,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},a,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n,a,l="0",f=0,p=t.length;f<p;f++){var d=t[f],h=(n=c,(a=d)===Object(a)?a:n[a]||(n[a]={})),v=o.get(h);void 0===v&&(v=++u,o.set(h,v)),l+=v}return s[l]||function(e,t,r,n,i){var a=t.apply(e,r);return n[i]=a,a}(this,i,arguments,s,l)}))}function nx(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var ix=Object.defineProperty,ax=Object.getPrototypeOf,ox=void 0;function sx(e,t,r){var n=r.value,i=r.configurable,a=r.enumerable;if("function"!=typeof n)throw new SyntaxError("@autobind can only be used on functions, not: "+n);var o=e.constructor;return{configurable:i,enumerable:a,get:function(){if(this===e)return n;if(this.constructor!==o&&ax(this).constructor===o)return n;if(this.constructor!==o&&t in this.constructor.prototype)return function(e,t){if("undefined"==typeof WeakMap)throw new Error("Using @autobind on "+t.name+"() requires WeakMap support due to its use of super."+t.name+"()\n      See https://github.com/jayphelps/core-decorators.js/issues/20");ox||(ox=new WeakMap),!1===ox.has(e)&&ox.set(e,new WeakMap);var r=ox.get(e);return!1===r.has(t)&&r.set(t,jS(t,e)),r.get(t)}(this,n);var r=jS(n,this);return ix(this,t,{configurable:!0,writable:!0,enumerable:!1,value:r}),r},set:RS(t)}}function cx(e){return 1===e.length?function(e){for(var t=OS(e.prototype),r=PS(t),n=0,i=r.length;n<i;n++){var a=r[n],o=t[a];"function"==typeof o.value&&"constructor"!==a&&ix(e.prototype,a,sx(e.prototype,a,o))}}.apply(void 0,nx(e)):sx.apply(void 0,nx(e))}function ux(e,t,r){return r.writable=!1,r}function lx(e,t,r){return r.enumerable=!0,r}function fx(e,t,r){return r.enumerable=!1,r}function px(e,t,r){return r.configurable=!1,r}var dx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hx=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),vx=300;function mx(e,t,r,n){var i=hx(n,2),a=i[0],o=void 0===a?vx:a,s=i[1],c=void 0!==s&&s,u=r.value;if("function"!=typeof u)throw new SyntaxError("Only functions can be debounced");return dx({},r,{value:function(){var e=this,r=IS(this).debounceTimeoutIds,n=r[t],i=c&&!n,a=arguments;clearTimeout(n),r[t]=setTimeout(function(){delete r[t],c||u.apply(e,a)},o),i&&u.apply(this,a)}})}var gx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yx=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),bx=300;function wx(e,t,r,n){var i=yx(n,2),a=i[0],o=void 0===a?bx:a,s=i[1],c=void 0===s?{}:s,u=r.value;if("function"!=typeof u)throw new SyntaxError("Only functions can be throttled");return!1!==c.leading&&(c.leading=!0),!1!==c.trailing&&(c.trailing=!0),gx({},r,{value:function(){var e=this,r=IS(this),n=r.throttleTimeoutIds,i=r.throttlePreviousTimestamps,a=n[t],s=i[t]||0,l=Date.now();c.trailing&&(r.throttleTrailingArgs=arguments),s||!1!==c.leading||(s=l);var f=o-(l-s);f<=0?(clearTimeout(a),delete n[t],i[t]=l,u.apply(this,arguments)):!a&&c.trailing&&(n[t]=setTimeout(function(){i[t]=!1===c.leading?0:Date.now(),delete n[t],u.apply(e,r.throttleTrailingArgs),r.throttleTrailingArgs=null},f))}})}var _x=Object.defineProperty;function Ex(e,t,r,n){var i,a=(i=n,Array.isArray(i)?i:Array.from(i)),o=a[0],s=a.slice(1),c=r.configurable,u=r.enumerable,l=r.writable,f=r.get,p=r.set,d=r.value,h=!!f;return{configurable:c,enumerable:u,get:function(){var e=h?f.call(this):d,r=o.call.apply(o,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(s)));if(h)return r;var n={configurable:c,enumerable:u};return n.value=r,n.writable=l,_x(this,t,n),r},set:h?p:RS()}}var Sx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xx=Object.defineProperty,Cx=Object.getPrototypeOf;function kx(e,t){if(r=e,"[object Symbol]"===Object.prototype.toString.call(r)&&"object"===(void 0===r?"undefined":Sx(r))){do{if(t===Object.prototype)return void 0!==t[e];if(t.hasOwnProperty(e))return!0}while(t=Cx(t));return!1}return e in t;var r}function Tx(e,t){if(!t.length)throw new SyntaxError("@mixin() class "+e.name+" requires at least one mixin as an argument");for(var r=0,n=t.length;r<n;r++)for(var i=OS(t[r]),a=PS(i),o=0,s=a.length;o<s;o++){var c=a[o];kx(c,e.prototype)||xx(e.prototype,c,i[c])}}function Ax(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return BS("@mixin is deprecated and will be removed shortly. Use @mixin from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators"),"function"==typeof t[0]?Tx(t[0],[]):function(e){return Tx(e,t)}}var Ix=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Px=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ox={},Rx={time:console.time?console.time.bind(console):function(e){Ox[e]=new Date},timeEnd:console.timeEnd?console.timeEnd.bind(console):function(e){var t=new Date-Ox[e];delete Ox[e],console.log(e+": "+t+"ms")}},jx=0;function Mx(e,t,r,n){var i=Px(n,2),a=i[0],o=void 0===a?null:a,s=i[1],c=void 0===s?Rx:s,u=r.value;if(null===o&&(o=e.constructor.name+"."+t),"function"!=typeof u)throw new SyntaxError("@time can only be used on functions, not: "+u);return Ix({},r,{value:function(){var e=o+"-"+jx;jx++,c.time(e);try{return u.apply(this,arguments)}finally{c.timeEnd(e)}}})}var Nx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bx=Object.getPrototypeOf,Dx=Object.getOwnPropertyDescriptor;function Fx(e,t,r){var n=Bx(e),i=Dx(n,t);return Nx({},i,{value:r.value,initializer:r.initializer,get:r.get||i.get,set:r.set||i.set})}var Lx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ux=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),zx={profile:console.profile?jS(console.profile,console):function(){},profileEnd:console.profileEnd?jS(console.profileEnd,console):function(){},warn:MS};function Vx(e,t,r,n){var i=Ux(n,3),a=i[0],o=void 0===a?null:a,s=i[1],c=void 0!==s&&s,u=i[2],l=void 0===u?zx:u;if(!qx.__enabled)return qx.__warned||(l.warn("console.profile is not supported. All @profile decorators are disabled."),qx.__warned=!0),r;var f=r.value;if(null===o&&(o=e.constructor.name+"."+t),"function"!=typeof f)throw new SyntaxError("@profile can only be used on functions, not: "+f);return Lx({},r,{value:function(){var e=Date.now(),t=IS(this);(!0===c&&!t.profileLastRan||!1===c||"number"==typeof c&&e-t.profileLastRan>c||"function"==typeof c&&c.apply(this,arguments))&&(l.profile(o),t.profileLastRan=e);try{return f.apply(this,arguments)}finally{l.profileEnd(o)}}})}function qx(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return kS(Vx,t)}qx.__enabled=!!console.profile,qx.__warned=!1;var Kx=Object.defineProperty,Gx=Object.getOwnPropertyDescriptor;var Hx=Object.freeze({override:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return kS(GS,t)},deprecate:JS,deprecated:JS,suppressWarnings:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return kS(ex,t)},memoize:function(){BS("@memoize is deprecated and will be removed shortly. Use @memoize from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators");for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return kS(rx,t)},autobind:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(){return cx(arguments)}:cx(t)},readonly:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return kS(ux,t)},enumerable:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return kS(lx,t)},nonenumerable:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return kS(fx,t)},nonconfigurable:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return kS(px,t)},debounce:function(){BS("@debounce is deprecated and will be removed shortly. Use @debounce from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators");for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return kS(mx,t)},throttle:function(){BS("@throttle is deprecated and will be removed shortly. Use @throttle from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators");for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return kS(wx,t)},decorate:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return kS(Ex,t)},mixin:Ax,mixins:Ax,lazyInitialize:fS,time:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return kS(Mx,t)},extendDescriptor:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return kS(Fx,t)},profile:qx,applyDecorators:function(e,t){var r=e.prototype;for(var n in t)for(var i=t[n],a=0,o=i.length;a<o;a++){var s=i[a];Kx(r,n,s(r,n,Gx(r,n)))}return e}}),Wx=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="production"===Tc.env.NODE_ENV?function(){return function(){}}:Hx.deprecated;t.default=r});r(Wx);var $x=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=!0});r($x);var Yx=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=$x,e&&e.__esModule?e:{default:e}).default;var e}})});r(Yx);var Jx=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.API_ACTIVITY_TYPE={REPLY:"reply"},t.API_ACTIVITY_VERB={ACKNOWLEDGE:"acknowledge",POST:"post",SHARE:"share"},t.hydraTypes={MESSAGE:"MESSAGE",PEOPLE:"PEOPLE",ROOM:"ROOM",TEAM:"TEAM"}});r(Jx);Jx.API_ACTIVITY_TYPE,Jx.API_ACTIVITY_VERB,Jx.hydraTypes;var Qx=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.constructHydraId=function(e,t){return(0,Uy.encode)("ciscospark://us/"+e.toUpperCase()+"/"+t)},t.deconstructHydraId=function(e){var t=(0,Uy.decode)(e).split("/");return{id:t.pop(),type:t.pop()}}});r(Qx);Qx.constructHydraId,Qx.deconstructHydraId;var Zx=n(function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"base64",{enumerable:!0,get:function(){return r(Uy).default}}),Object.defineProperty(t,"cappedDebounce",{enumerable:!0,get:function(){return r(zy).default}}),Object.defineProperty(t,"checkRequired",{enumerable:!0,get:function(){return r(Vy).default}}),Object.defineProperty(t,"Defer",{enumerable:!0,get:function(){return r(qy).default}}),Object.defineProperty(t,"makeStateDataType",{enumerable:!0,get:function(){return r(Ky).default}}),Object.defineProperty(t,"make",{enumerable:!0,get:function(){return r(gb).default}}),Object.defineProperty(t,"oneFlight",{enumerable:!0,get:function(){return r(aE).default}}),Object.defineProperty(t,"patterns",{enumerable:!0,get:function(){return r(oE).default}}),Object.defineProperty(t,"proxyEvents",{enumerable:!0,get:function(){return sE.proxyEvents}}),Object.defineProperty(t,"transferEvents",{enumerable:!0,get:function(){return sE.transferEvents}}),Object.defineProperty(t,"resolveWith",{enumerable:!0,get:function(){return r(cE).default}}),Object.defineProperty(t,"retry",{enumerable:!0,get:function(){return r(DE).default}}),Object.defineProperty(t,"tap",{enumerable:!0,get:function(){return r(FE).default}}),Object.defineProperty(t,"whileInFlight",{enumerable:!0,get:function(){return r(LE).default}}),Object.defineProperty(t,"Exception",{enumerable:!0,get:function(){return r(cS).default}}),Object.defineProperty(t,"deprecated",{enumerable:!0,get:function(){return r(Wx).default}}),Object.defineProperty(t,"inBrowser",{enumerable:!0,get:function(){return r(Yx).default}}),Object.defineProperty(t,"API_ACTIVITY_VERB",{enumerable:!0,get:function(){return Jx.API_ACTIVITY_VERB}}),Object.defineProperty(t,"API_ACTIVITY_TYPE",{enumerable:!0,get:function(){return Jx.API_ACTIVITY_TYPE}}),Object.defineProperty(t,"hydraTypes",{enumerable:!0,get:function(){return Jx.hydraTypes}}),Object.defineProperty(t,"constructHydraId",{enumerable:!0,get:function(){return Qx.constructHydraId}}),Object.defineProperty(t,"deconstructHydraId",{enumerable:!0,get:function(){return Qx.deconstructHydraId}})});r(Zx),nu("keys",function(){return function(e){return Ou(Ku(e))}});var Xx=$c.Object.keys,eC=n(function(e){e.exports={default:Xx,__esModule:!0}});r(eC);var tC=4;var rC=function(e){return hv(e,tC)},nC=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.safeSetTimeout=function(){var e=setTimeout.apply(void 0,arguments);e.unref&&e.unref();return e},t.safeSetInterval=function(){var e=setInterval.apply(void 0,arguments);e.unref&&e.unref();return e}});r(nC);nC.safeSetTimeout,nC.safeSetInterval;var iC=0;var aC=function(e){var t=++iC;return Ov(e)+t};var oC=function(e){return gw(function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,o&&uE(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,a)}return t})},sC=Object.prototype.hasOwnProperty,cC=oC(function(e,t){if(jd(t)||Fd(t))sd(t,Ld(t),e);else for(var r in t)sC.call(t,r)&&od(e,r,t[r])});var uC=function(e){return function(t){return null==e?void 0:e[t]}},lC=uC({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),fC=/[&<>"']/g,pC=RegExp(fC.source);var dC=function(e){return(e=Ov(e))&&pC.test(e)?e.replace(fC,lC):e};var hC=function(e){return function(t,r,n){for(var i=-1,a=Object(t),o=n(t),s=o.length;s--;){var c=o[e?s:++i];if(!1===r(a[c],c,a))break}return t}},vC=hC();var mC=function(e,t){return e&&vC(e,t,Ld)};var gC=function(e,t){return e&&mC(e,mw(t))},yC="[object String]";var bC=function(e){return"string"==typeof e||!md(e)&&ud(e)&&cp(e)==yC};var wC=function(e,t){return jf(t,function(t){return e[t]})};var _C=function(e){return null==e?[]:wC(e,Ld(e))},EC=Math.max;var SC=function(e,t,r,n){e=Fd(e)?e:_C(e),r=r&&!n?H_(r):0;var i=e.length;return r<0&&(r=EC(i+r,0)),bC(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&e_(e,t,r)>-1},xC="[object Date]";var CC=function(e){return ud(e)&&cp(e)==xC},kC=Td&&Td.isDate,TC=kC?kd(kC):CC,AC="__lodash_hash_undefined__";var IC=function(e){return this.__data__.set(e,AC),this};var PC=function(e){return this.__data__.has(e)};function OC(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Qp;++t<r;)this.add(e[t])}OC.prototype.add=OC.prototype.push=IC,OC.prototype.has=PC;var RC=OC;var jC=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var MC=function(e,t){return e.has(t)},NC=1,BC=2;var DC=function(e,t,r,n,i,a){var o=r&NC,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var l=-1,f=!0,p=r&BC?new RC:void 0;for(a.set(e,t),a.set(t,e);++l<s;){var d=e[l],h=t[l];if(n)var v=o?n(h,d,l,t,e,a):n(d,h,l,e,t,a);if(void 0!==v){if(v)continue;f=!1;break}if(p){if(!jC(t,function(e,t){if(!MC(p,t)&&(d===e||i(d,e,r,n,a)))return p.push(t)})){f=!1;break}}else if(d!==h&&!i(d,h,r,n,a)){f=!1;break}}return a.delete(e),a.delete(t),f};var FC=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r};var LC=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},UC=1,zC=2,VC="[object Boolean]",qC="[object Date]",KC="[object Error]",GC="[object Map]",HC="[object Number]",WC="[object RegExp]",$C="[object Set]",YC="[object String]",JC="[object Symbol]",QC="[object ArrayBuffer]",ZC="[object DataView]",XC=Qf?Qf.prototype:void 0,ek=XC?XC.valueOf:void 0;var tk=function(e,t,r,n,i,a,o){switch(r){case ZC:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case QC:return!(e.byteLength!=t.byteLength||!a(new wh(e),new wh(t)));case VC:case qC:case HC:return Nf(+e,+t);case KC:return e.name==t.name&&e.message==t.message;case WC:case YC:return e==t+"";case GC:var s=FC;case $C:var c=n&UC;if(s||(s=LC),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=zC,o.set(e,t);var l=DC(s(e),s(t),n,i,a,o);return o.delete(e),l;case JC:if(ek)return ek.call(e)==ek.call(t)}return!1},rk=1,nk=Object.prototype.hasOwnProperty;var ik=function(e,t,r,n,i,a){var o=r&rk,s=ah(e),c=s.length;if(c!=ah(t).length&&!o)return!1;for(var u=c;u--;){var l=s[u];if(!(o?l in t:nk.call(t,l)))return!1}var f=a.get(e);if(f&&a.get(t))return f==t;var p=!0;a.set(e,t),a.set(t,e);for(var d=o;++u<c;){var h=e[l=s[u]],v=t[l];if(n)var m=o?n(v,h,l,t,e,a):n(h,v,l,e,t,a);if(!(void 0===m?h===v||i(h,v,r,n,a):m)){p=!1;break}d||(d="constructor"==l)}if(p&&!d){var g=e.constructor,y=t.constructor;g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y)&&(p=!1)}return a.delete(e),a.delete(t),p},ak=1,ok="[object Arguments]",sk="[object Array]",ck="[object Object]",uk=Object.prototype.hasOwnProperty;var lk=function(e,t,r,n,i,a){var o=md(e),s=md(t),c=o?sk:gh(e),u=s?sk:gh(t),l=(c=c==ok?ck:c)==ck,f=(u=u==ok?ck:u)==ck,p=c==u;if(p&&yd(e)){if(!yd(t))return!1;o=!0,l=!1}if(p&&!l)return a||(a=new td),o||Id(e)?DC(e,t,r,n,i,a):tk(e,t,c,r,n,i,a);if(!(r&ak)){var d=l&&uk.call(e,"__wrapped__"),h=f&&uk.call(t,"__wrapped__");if(d||h){var v=d?e.value():e,m=h?t.value():t;return a||(a=new td),i(v,m,r,n,a)}}return!!p&&(a||(a=new td),ik(e,t,r,n,i,a))};var fk=function e(t,r,n,i,a){return t===r||(null==t||null==r||!ud(t)&&!ud(r)?t!=t&&r!=r:lk(t,r,n,i,e,a))};var pk=function(e,t){return fk(e,t)},dk=Object.prototype.hasOwnProperty;var hk=function(e,t){return null!=e&&dk.call(e,t)};var vk=function(e,t,r){for(var n=-1,i=(t=Rv(t,e)).length,a=!1;++n<i;){var o=Nv(t[n]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&Sd(i)&&_d(o,i)&&(md(e)||vd(e))};var mk=function(e,t){return null!=e&&vk(e,t,hk)};var gk=function(e,t,r){var n=-1,i=(t=Rv(t,e)).length;for(i||(i=1,e=void 0);++n<i;){var a=null==e?void 0:e[Nv(t[n])];void 0===a&&(n=i,a=r),e=vp(a)?a.call(e):a}return e};var yk=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1},bk=uh&&1/LC(new uh([,-0]))[1]==1/0?function(e){return new uh(e)}:jw,wk=200;var _k=function(e,t,r){var n=-1,i=t_,a=e.length,o=!0,s=[],c=s;if(r)o=!1,i=yk;else if(a>=wk){var u=t?null:bk(e);if(u)return LC(u);o=!1,i=MC,c=new RC}else c=t?[]:s;e:for(;++n<a;){var l=e[n],f=t?t(l):l;if(l=r||0!==l?l:0,o&&f==f){for(var p=c.length;p--;)if(c[p]===f)continue e;t&&c.push(f),s.push(l)}else i(c,f,r)||(c!==s&&c.push(f),s.push(l))}return s};var Ek=function(e){return ud(e)&&Fd(e)},Sk=gw(function(e){return _k(Jv(e,1,Ek,!0))}),xk="Expected a function";var Ck=function(e,t){var r;if("function"!=typeof t)throw new TypeError(xk);return e=H_(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}};var kk=function(e){return Ck(2,e)};var Tk=function(e,t){return function(r,n){if(null==r)return r;if(!Fd(r))return e(r,n);for(var i=r.length,a=t?i:-1,o=Object(r);(t?a--:++a<i)&&!1!==n(o[a],a,o););return r}},Ak=Tk(mC);var Ik=function(e,t){return(md(e)?rd:Ak)(e,mw(t))},Pk=/\s+/,Ok=function(e,t){var r,n=-1,i=e.length,a=t[0],o=t[1],s=t[2];switch(t.length){case 0:for(;++n<i;)(r=e[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=e[n]).callback.call(r.ctx,a);return;case 2:for(;++n<i;)(r=e[n]).callback.call(r.ctx,a,o);return;case 3:for(;++n<i;)(r=e[n]).callback.call(r.ctx,a,o,s);return;default:for(;++n<i;)(r=e[n]).callback.apply(r.ctx,t);return}},Rk=function(e,t,r,n){if(!r)return!0;if("object"==typeof r){for(var i in r)e[t].apply(e,[i,r[i]].concat(n));return!1}if(Pk.test(r)){for(var a=r.split(Pk),o=0,s=a.length;o<s;o++)e[t].apply(e,[a[o]].concat(n));return!1}return!0},jk=function(e){return function(t,r,n){if(!t)throw new Error("Trying to listenTo event: '"+r+"' but the target object is undefined");if((this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=aC("l"))]=t,n||"object"!=typeof r||(n=this),"function"!=typeof t[e])throw new Error("Trying to listenTo event: '"+r+"' on object: "+t.toString()+" but it does not have an 'on' method so is unbindable");return t[e](r,n,this),this}},Mk=Array.prototype.slice,Nk={on:function(e,t,r){return Rk(this,"on",e,[t,r])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:r,ctx:r||this}),this):this},once:function(e,t,r){if(!Rk(this,"once",e,[t,r])||!t)return this;var n=this,i=kk(function(){n.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,r)},off:function(e,t,r){var n,i,a,o,s,c,u,l;if(!this._events||!Rk(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;for(s=0,c=(o=e?[e]:Ld(this._events)).length;s<c;s++)if(e=o[s],a=this._events[e]){if(this._events[e]=n=[],t||r)for(u=0,l=a.length;u<l;u++)i=a[u],(t&&t!==i.callback&&t!==i.callback._callback||r&&r!==i.context)&&n.push(i);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=Mk.call(arguments,1);if(!Rk(this,"trigger",e,t))return this;var r=this._events[e],n=this._events.all;return r&&Ok(r,t),n&&Ok(n,arguments),this},stopListening:function(e,t,r){var n=this._listeningTo;if(!n)return this;var i=!t&&!r;r||"object"!=typeof t||(r=this),e&&((n={})[e._listenId]=e);var a=this;return Ik(n,function(e,n){e.off(t,r,a),(i||hm(e._events))&&delete a._listeningTo[n]}),this},createEmitter:function(e){return cC(e||{},Nk)},listenTo:jk("on"),listenToOnce:jk("once"),listenToAndRun:function(e,t,r){return this.listenTo.apply(this,arguments),r||"object"!=typeof t||(r=this),r.apply(this),this}};Nk.bind=Nk.on,Nk.unbind=Nk.off,Nk.removeListener=Nk.off,Nk.removeAllListeners=Nk.off,Nk.emit=Nk.trigger;var Bk=Nk,Dk=Array.prototype.slice;function Fk(e){if("object"!=typeof(e=e||{}))throw new TypeError("Options must be an object");this.storage={},this.separator=e.separator||"."}Fk.prototype.add=function(e,t){(this.storage[e]||(this.storage[e]=[])).push(t)},Fk.prototype.remove=function(e){var t,r;for(t in this.storage)(r=this.storage[t]).some(function(t,n){if(t===e)return r.splice(n,1),!0})},Fk.prototype.get=function(e){var t,r=[];for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+this.separator)||(r=r.concat(this.storage[t]));return r},Fk.prototype.getGrouped=function(e){var t,r={};for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+this.separator)||(r[t]=Dk.call(this.storage[t]));return r},Fk.prototype.getAll=function(e){var t,r={};for(t in this.storage)e!==t&&0!==t.indexOf(e+this.separator)||(r[t]=Dk.call(this.storage[t]));return r},Fk.prototype.run=function(e,t){var r=Dk.call(arguments,2);this.get(e).forEach(function(e){e.apply(t||this,r)})};var Lk=Fk,Uk=function(e){return cC({},e)},zk=/^change:/,Vk=function(){};function qk(e,t){t||(t={}),this.cid||(this.cid=aC("state")),this._events={},this._values={},this._eventBubblingHandlerCache={},this._definition=Object.create(this._definition),t.parse&&(e=this.parse(e,t)),this.parent=t.parent,this.collection=t.collection,this._keyTree=new Lk,this._initCollections(),this._initChildren(),this._cache={},this._previousAttributes={},e&&this.set(e,cC({silent:!0,initial:!0},t)),this._changed={},this._derived&&this._initDerived(),!1!==t.init&&this.initialize.apply(this,arguments)}function Kk(e,t,r,n){var i,a,o=e._definition[t]={};if(bC(r))(i=e._ensureValidType(r))&&(o.type=i);else{if(Array.isArray(r)&&(r={type:(a=r)[0],required:a[1],default:a[2]}),(i=e._ensureValidType(r.type))&&(o.type=i),r.required&&(o.required=!0),r.default&&"object"==typeof r.default)throw new TypeError("The default value for "+t+" cannot be an object/array, must be a value or a function which returns a value/object/array");o.default=r.default,o.allowNull=!!r.allowNull&&r.allowNull,r.setOnce&&(o.setOnce=!0),o.required&&void 0===o.default&&!o.setOnce&&(o.default=e._getDefaultForType(i)),o.test=r.test,o.values=r.values}return n&&(o.session=!0),i||(i=bC(r)?r:r.type,console.warn("Invalid data type of `"+i+"` for `"+t+"` property. Use one of the default types or define your own")),Object.defineProperty(e,t,{set:function(e){this.set(t,e)},get:function(){if(!this._values)throw Error('You may be trying to `extend` a state object with "'+t+'" which has been defined in `props` on the object being extended');var e=this._values[t],r=this._dataTypes[o.type];if(void 0!==e)return r&&r.get&&(e=r.get(e)),e;var n=gk(o,"default");(this._values[t]=n,void 0!==n)&&this._getOnChangeForType(o.type)(n,e,t);return n}}),o}function Gk(e,t,r){(e._derived[t]={fn:vp(r)?r:r.fn,cache:!1!==r.cache,depList:r.deps||[]}).depList.forEach(function(r){e._deps[r]=Sk(e._deps[r]||[],[t])}),Object.defineProperty(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError("`"+t+"` is a derived property, it can't be set directly.")}})}cC(qk.prototype,Bk,{extraProperties:"ignore",idAttribute:"id",namespaceAttribute:"namespace",typeAttribute:"modelType",initialize:function(){return this},getId:function(){return this[this.idAttribute]},getNamespace:function(){return this[this.namespaceAttribute]},getType:function(){return this[this.typeAttribute]},isNew:function(){return null==this.getId()},escape:function(e){return dC(this.get(e))},isValid:function(e){return this._validate({},cC(e||{},{validate:!0}))},parse:function(e,t){return e},serialize:function(e){var t=cC({props:!0},e),r=this.getAttributes(t,!0),n=function(e,t){r[t]=this[t].serialize()}.bind(this);return gC(this._children,n),gC(this._collections,n),r},set:function(e,t,r){var n,i,a,o,s,c,u,l,f,p,d,h,v,m,g,y,b,w=this,_=this.extraProperties;if(up(e)||null===e?(f=e,r=t):(f={})[e]=t,r=r||{},!this._validate(f,r))return!1;h=r.unset,d=r.silent,m=r.initial,n=this._changing,this._changing=!0,i=[],m?this._previousAttributes={}:n||(this._previousAttributes=this.attributes,this._changed={});for(var E=0,S=Object.keys(f),x=S.length;E<x;E++){if(a=typeof(o=f[l=S[E]]),v=this._values[l],!(s=this._definition[l])){if(this._children[l]||this._collections[l]){up(o)||(o={}),this[l].set(o,r);continue}if("ignore"===_)continue;if("reject"===_)throw new TypeError('No "'+l+'" property defined on '+(this.type||"this")+' model and extraProperties not set to "ignore" or "allow"');if("allow"===_)s=this._createPropertyDefinition(l,"any");else if(_)throw new TypeError('Invalid value for extraProperties: "'+_+'"')}if(y=this._getCompareForType(s.type),b=this._getOnChangeForType(s.type),(p=this._dataTypes[s.type])&&p.set&&(o=(c=p.set(o)).val,a=c.type),s.test&&(u=s.test.call(this,o,a)))throw new TypeError("Property '"+l+"' failed validation with error: "+u);if(void 0===o&&s.required)throw new TypeError("Required property '"+l+"' must be of type "+s.type+". Tried to set "+o);if(null===o&&s.required&&!s.allowNull)throw new TypeError("Property '"+l+"' must be of type "+s.type+" (cannot be null). Tried to set "+o);if(s.type&&"any"!==s.type&&s.type!==a&&null!=o)throw new TypeError("Property '"+l+"' must be of type "+s.type+". Tried to set "+o);if(s.values&&!SC(s.values,o)){var C=gk(s,"default");if(h&&void 0!==C)o=C;else if(!h||h&&void 0!==o)throw new TypeError("Property '"+l+"' must be one of values: "+s.values.join(", ")+". Tried to set "+o)}if(g=m||!y(v,o,l),s.setOnce&&void 0!==v&&g)throw new TypeError("Property '"+l+"' can only be set once.");g?(b(o,v,l),m||(this._changed[l]=o,this._previousAttributes[l]=v,h&&delete this._values[l],d||i.push({prev:v,val:o,key:l})),h||(this._values[l]=o)):delete this._changed[l]}if(i.length&&(this._pending=!0),i.forEach(function(e){w.trigger("change:"+e.key,w,e.val,r)}),n)return this;for(;this._pending;)this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},get:function(e){return this[e]},toggle:function(e){var t,r,n,i,a=this._definition[e];if("boolean"===a.type)this[e]=!this[e];else{if(!a||!a.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.");this[e]=(t=a.values,r=this[e],n=t.length,(i=t.indexOf(r)+1)>n-1&&(i=0),t[i])}return this},previousAttributes:function(){return Uk(this._previousAttributes)},hasChanged:function(e){return null==e?!!Object.keys(this._changed).length:mk(this._derived,e)?this._derived[e].depList.some(function(e){return this.hasChanged(e)},this):mk(this._changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&Uk(this._changed);var t,r,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var a in e)(r=this._definition[a])&&(this._getCompareForType(r.type)(i[a],t=e[a])||((n||(n={}))[a]=t));return n},toJSON:function(){return this.serialize()},unset:function(e,t){var r=this;(e=Array.isArray(e)?e:[e]).forEach(function(e){var n,i=r._definition[e];if(i)return i.required?(n=gk(i,"default"),r.set(e,n,t)):r.set(e,n,cC({},t,{unset:!0}))})},clear:function(e){var t=this;return Object.keys(this.attributes).forEach(function(r){t.unset(r,e)}),this},previous:function(e){return null!=e&&Object.keys(this._previousAttributes).length?this._previousAttributes[e]:null},_getDefaultForType:function(e){var t=this._dataTypes[e];return t&&t.default},_getCompareForType:function(e){var t=this._dataTypes[e];return t&&t.compare?t.compare.bind(this):pk},_getOnChangeForType:function(e){var t=this._dataTypes[e];return t&&t.onChange?t.onChange.bind(this):Vk},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=cC({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,cC(t||{},{validationError:r})),!1)},_createPropertyDefinition:function(e,t,r){return Kk(this,e,t,r)},_ensureValidType:function(e){return SC(["string","number","boolean","array","object","date","state","any"].concat(Object.keys(this._dataTypes)),e)?e:void 0},getAttributes:function(e,t){e=cC({session:!1,props:!1,derived:!1},e||{});var r,n,i={};for(var a in this._definition)n=this._definition[a],(e.session&&n.session||e.props&&!n.session)&&(r=t?this._values[a]:this[a],t&&r&&vp(r.serialize)&&(r=r.serialize()),void 0===r&&(r=gk(n,"default")),void 0!==r&&(i[a]=r));if(e.derived)for(var o in this._derived)i[o]=this[o];return i},_initDerived:function(){var e=this;gC(this._derived,function(t,r){var n=e._derived[r];n.deps=n.depList;var i=function(){var t=n.fn.call(e);e._cache[r]===t&&n.cache||(n.cache&&(e._previousAttributes[r]=e._cache[r]),e._cache[r]=t,e.trigger("change:"+r,e,e._cache[r]))};n.deps.forEach(function(t){e._keyTree.add(t,i)})}),this.on("all",function(t){zk.test(t)&&e._keyTree.get(t.split(":")[1]).forEach(function(e){e()})},this)},_getDerivedProperty:function(e,t){return this._derived[e].cache?(!t&&this._cache.hasOwnProperty(e)||(this._cache[e]=this._derived[e].fn.apply(this)),this._cache[e]):this._derived[e].fn.apply(this)},_initCollections:function(){var e;if(this._collections)for(e in this._collections)this._safeSet(e,new this._collections[e](null,{parent:this}))},_initChildren:function(){var e;if(this._children)for(e in this._children)this._safeSet(e,new this._children[e]({},{parent:this})),this.listenTo(this[e],"all",this._getCachedEventBubblingHandler(e))},_getCachedEventBubblingHandler:function(e){return this._eventBubblingHandlerCache[e]||(this._eventBubblingHandlerCache[e]=function(t,r,n){zk.test(t)?this.trigger("change:"+e+"."+t.split(":")[1],r,n):"change"===t&&this.trigger("change",this)}.bind(this)),this._eventBubblingHandlerCache[e]},_verifyRequired:function(){var e=this.attributes;for(var t in this._definition)if(this._definition[t].required&&void 0===e[t])return!1;return!0},_safeSet:function(e,t){if(e in this)throw new Error("Encountered namespace collision while setting instance property `"+e+"`");return this[e]=t,this}}),Object.defineProperties(qk.prototype,{attributes:{get:function(){return this.getAttributes({props:!0,session:!0})}},all:{get:function(){return this.getAttributes({session:!0,props:!0,derived:!0})}},isState:{get:function(){return!0},set:function(){}}});var Hk={string:{default:function(){return""}},date:{set:function(e){var t;if(null==e)t="object";else if(TC(e))t="date",e=e.valueOf();else{var r=null,n=new Date(e).valueOf();isNaN(n)&&(n=new Date(parseInt(e,10)).valueOf(),isNaN(n)&&(r=!0)),e=n,t="date",r&&(t=typeof e)}return{val:e,type:t}},get:function(e){return null==e?e:new Date(e)},default:function(){return new Date}},array:{set:function(e){return{val:e,type:Array.isArray(e)?"array":typeof e}},default:function(){return[]}},object:{set:function(e){var t=typeof e;return"object"!==t&&void 0===e&&(e=null,t="object"),{val:e,type:t}},default:function(){return{}}},state:{set:function(e){return e instanceof qk||e&&e.isState?{val:e,type:"state"}:{val:e,type:typeof e}},compare:function(e,t){return e===t},onChange:function(e,t,r){t&&this.stopListening(t,"all",this._getCachedEventBubblingHandler(r)),null!=e&&this.listenTo(e,"all",this._getCachedEventBubblingHandler(r))}}};qk.extend=function(e){var t,r=this;t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return r.apply(this,arguments)},cC(t,r);var n=function(){this.constructor=t};if(n.prototype=r.prototype,t.prototype=new n,t.prototype._derived=cC({},r.prototype._derived),t.prototype._deps=cC({},r.prototype._deps),t.prototype._definition=cC({},r.prototype._definition),t.prototype._collections=cC({},r.prototype._collections),t.prototype._children=cC({},r.prototype._children),t.prototype._dataTypes=cC({},r.prototype._dataTypes||Hk),e)for(var i=["dataTypes","props","session","derived","collections","children"],a=0;a<arguments.length;a++){var o=arguments[a];o.dataTypes&&gC(o.dataTypes,function(e,r){t.prototype._dataTypes[r]=e}),o.props&&gC(o.props,function(e,r){Kk(t.prototype,r,e)}),o.session&&gC(o.session,function(e,r){Kk(t.prototype,r,e,!0)}),o.derived&&gC(o.derived,function(e,r){Gk(t.prototype,r,e)}),o.collections&&gC(o.collections,function(e,r){t.prototype._collections[r]=e}),o.children&&gC(o.children,function(e,r){t.prototype._children[r]=e}),cC(t.prototype,lm(o,i))}return t.__super__=r.prototype,t};var Wk=qk,$k=n(function(e,t){t.__esModule=!0;var r,n=(r=$y)&&r.__esModule?r:{default:r};t.default=function(e,t,r){return t in e?(0,n.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}});r($k);var Yk=n(function(e,t){t.__esModule=!0;var r,n=(r=YE)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,n.default)(e)}});r(Yk);pb("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return pw.def(tb(this,"Set"),e=0===e?0:e,e)}},pw);ru(ru.P+ru.R,"Set",{toJSON:dw("Set")}),db("Set"),hb("Set");var Jk=$c.Set,Qk=n(function(e){e.exports={default:Jk,__esModule:!0}});r(Qk);var Zk=function(){return Jf.Date.now()},Xk="Expected a function",eT=Math.max,tT=Math.min;var rT=function(e,t,r){var n,i,a,o,s,c,u=0,l=!1,f=!1,p=!0;if("function"!=typeof e)throw new TypeError(Xk);function d(t){var r=n,a=i;return n=i=void 0,u=t,o=e.apply(a,r)}function h(e){var r=e-c;return void 0===c||r>=t||r<0||f&&e-u>=a}function v(){var e=Zk();if(h(e))return m(e);s=setTimeout(v,function(e){var r=t-(e-c);return f?tT(r,a-(e-u)):r}(e))}function m(e){return s=void 0,p&&n?d(e):(n=i=void 0,o)}function g(){var e=Zk(),r=h(e);if(n=arguments,i=this,c=e,r){if(void 0===s)return function(e){return u=e,s=setTimeout(v,t),l?d(e):o}(c);if(f)return s=setTimeout(v,t),d(c)}return void 0===s&&(s=setTimeout(v,t)),o}return t=V_(t)||0,up(r)&&(l=!!r.leading,a=(f="maxWait"in r)?eT(V_(r.maxWait)||0,t):a,p="trailing"in r?!!r.trailing:p),g.cancel=function(){void 0!==s&&clearTimeout(s),u=0,n=c=i=s=void 0},g.flush=function(){return void 0===s?o:m(Zk())},g},nT=8;function iT(e,t,r){var n=tE(e,nT,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=iT.placeholder,n}iT.placeholder={};var aT=iT,oT=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NotFoundError=t.StorageError=void 0;var r=o(aS),n=o(Gy),i=o(oS),a=o(sS);function o(e){return e&&e.__esModule?e:{default:e}}var s=t.StorageError=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(Zx.Exception);t.NotFoundError=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(s)});r(oT);oT.NotFoundError,oT.StorageError;var sT=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=h($k),n=h(sw),i=h(Yk),a=h(Qk),o=h(vw),s=h(wf),c=h(If),u=h(iE),l=h(gk),f=h(rm),p=h(rT),d=h(aT);function h(e){return e&&e.__esModule?e:{default:e}}t.persist=function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(3===r.length)return e("@").apply(void 0,r);var i=r[0],a=r[1];return function(e,t,r){if("initialize"!==t)throw new TypeError("@persist can only currently be applied to AmpersandState objects or their derivatives and must be applied to the initialize method");r.value=(0,u.default)(r.value,function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var u=(0,c.default)(e,this,n),l="@"===i?"change":"change:"+i;return this.on(l,(0,p.default)(function(){var e=!a||c.default.apply(Reflect,[a,t].concat(n));return e?"@"===i?t.boundedStorage.put(i,t):t.boundedStorage.put(i,t[i]):s.default.resolve()},0)),u}),w(e,t)}},t.waitForValue=function(e){if(!e)throw new Error("`key` is required");return function(t,r,a){return g.add(t,r,e),a.value=(0,u.default)(a.value,function(e){for(var n=this,a=arguments.length,o=Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];var l=g.get(t,r);return s.default.all([].concat((0,i.default)(l)).map(function(e){return n.boundedStorage.waitFor(e)})).then(function(){return(0,c.default)(e,n,o)})}),"object"!==(void 0===t?"undefined":(0,n.default)(t))||t.prototype||(t[r]=a.value),w(t,r),a}};var v=o.default,m=a.default,g=new((0,Zx.make)(v,v,m));var y=new a.default;var b=new a.default;function w(e,t){var n=function(e){return e.namespace?e.namespace:e}(e);if(!y.has(n)){if(y.add(n),e.initialize)return void(e.initialize=(0,u.default)(e.initialize,function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=(0,c.default)(e,this,r);return(0,c.default)(i,this,r),a}));e.initialize=i}function i(){var n=this,i=this.getNamespace();this.spark.initialize=(0,u.default)(this.spark.initialize||f.default,function(a){var o=this;b.add(i);for(var u=arguments.length,f=Array(u>1?u-1:0),p=1;p<u;p++)f[p-1]=arguments[p];(0,c.default)(a,this,f);var h=(0,d.default)(function(e,t){o.logger.debug("storage:("+i+"): got `"+e+"` for first time"),"@"===e?n.parent.set((0,r.default)({},i.toLowerCase(),t)):(0,l.default)(n[e],"isState")?n[e].set(t):n.set(e,t),o.logger.debug("storage:("+i+"): set `"+e+"` for first time")}),v=(0,d.default)(function(e,t){return t instanceof oT.NotFoundError||"production"!==Tc.env.NODE_ENV&&t.toString().includes("MockNotFoundError")?(o.logger.debug("storage("+i+"): no data for `"+e+"`, continuing"),s.default.resolve()):(o.logger.error("storage("+i+"): failed to init `"+e+"`",t),s.default.reject(t))}),m=g.get(e,t),y=[];m.forEach(function(e){y.push(o.boundedStorage.get(i,e).then(h(e)).catch(v(e)))}),s.default.all(y).then(function(){b.delete(i),0===b.size&&(o.loaded=!0)})})}}});r(sT);sT.persist,sT.waitForValue;var cT=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(Cf),n=l(su),i=l(wf),a=l(vw),o=l(Gy),s=l(Yy),c=l(mb);t.default=function(e,t){var c,l,p=(c=(0,Zx.oneFlight)({keyFactory:function(e){return e}}),function(e,t,r,n,i){var a={};Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0);a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0);void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}((l=function(){function r(){(0,o.default)(this,r),t.logger.debug("spark-store: constructing "+e+"Storage"),f.set(this,new a.default)}return(0,s.default)(r,[{key:"clear",value:function(){var e=[];return this.bindings.forEach(function(t){e.push(t.clear())}),i.default.all(e)}},{key:"del",value:function(e,r){return t.logger.debug("spark-store: removing "+e+":"+r),this._getBinding(e).then(function(e){return e.del(r)})}},{key:"get",value:function(e,r){return t.logger.debug("spark-store: retrieving "+e+":"+r),this._getBinding(e).then(function(e){return e.get(r)})}},{key:"put",value:function(e,r,n){return void 0===n?this.del(e,r):(t.logger.debug("spark-store: setting "+e+":"+r),this._getBinding(e).then(function(e){return e.put(r,n.serialize?n.serialize():n)}).then(function(){return n}))}},{key:"_getBinding",value:function(e){var r=this;return new i.default(function(n){t.logger.debug("storage: getting binding for `"+e+"`");var i=r.bindings.get(e);return i?(t.logger.debug("storage: found binding for `"+e+"`"),n(i)):n(r.adapter.bind(e,{logger:t.logger}).then(function(n){return t.logger.debug("storage: made binding for `"+e+"`"),r.bindings.set(e,n),n}))})}},{key:"adapter",get:function(){return t.config.storage[e+"Adapter"]}},{key:"bindings",get:function(){return f.get(this)}}]),r}()).prototype,"_getBinding",[c],(0,n.default)(l.prototype,"_getBinding"),l.prototype),l);return(0,r.default)(p.prototype,u.default),new p};var u=l(Bk);function l(e){return e&&e.__esModule?e:{default:e}}var f=new c.default});r(cT);var uT=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=f(su),n=f(vw),i=f(Gy),a=f(Yy),o=f(eC),s=f(mb),c=f(gk),u=f(up),l=f(md);function f(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var o,s;return new(o=(0,Zx.oneFlight)({keyFactory:function(e){return"initValue-"+e}}),function(e,t,r,n,i){var a={};Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0);a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0);void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}((s=function(){function r(){(0,i.default)(this,r),p.set(this,new n.default)}return(0,a.default)(r,[{key:"clear",value:function(){return t.spark[e+"Storage"].del(t.getNamespace())}},{key:"del",value:function(){for(var r,n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return(r=t.spark[e+"Storage"]).del.apply(r,[t.getNamespace()].concat(i))}},{key:"get",value:function(r){var n=p.get(this).get(r);return n||(n=new Zx.Defer,p.get(this).set(r,n)),t.spark[e+"Storage"].get(t.getNamespace(),r).then(function(e){return n.resolve(),e})}},{key:"put",value:function(r,n){return t.spark[e+"Storage"].put(t.getNamespace(),r,d(n))}},{key:"waitFor",value:function(e){t.logger.debug("plugin-storage("+t.getNamespace()+"): waiting to init key `"+e+"`");var r=p.get(this).get(e);return r?(t.logger.debug("plugin-storage("+t.getNamespace()+"): already inited `"+e+"`"),r.promise):(t.logger.debug("plugin-storage("+t.getNamespace()+"): initing `"+e+"`"),this.initValue(e))}},{key:"initValue",value:function(r){var n=new Zx.Defer;return p.get(this).set(r,n),t.spark[e+"Storage"].get(t.getNamespace(),r).then(function(e){t.logger.debug("plugin-storage("+t.getNamespace()+"): got `"+r+"` for first time"),"@"===r?t.parent.set(e):(0,c.default)(t[r],"isState")?t[r].set(e):t.set(r,e),t.logger.debug("plugin-storage("+t.getNamespace()+"): set `"+r+"` for first time"),n.resolve(),t.logger.debug("plugin-storage("+t.getNamespace()+"): inited `"+r+"`")}).catch(function(e){return e instanceof oT.NotFoundError||"production"!==Tc.env.NODE_ENV&&e.toString().includes("MockNotFoundError")?(t.logger.debug("plugin-storage("+t.getNamespace()+"): no data for `"+r+"`, continuing"),n.resolve()):(t.logger.warn("plugin-storage("+t.getNamespace()+"): failed to init `"+r+"`",e),n.reject(e))}),n.promise}}]),r}()).prototype,"initValue",[o],(0,r.default)(s.prototype,"initValue"),s.prototype),s)};var p=new s.default;function d(e){if(!(0,u.default)(e))return e;var t=e.serialize?e.serialize():e;return(0,o.default)(t).forEach(function(e){var r=t[e];(0,l.default)(r)?0===r.length?t[e]=void 0:t[e]=r.map(d):(0,u.default)(r)&&(0,o.default)(r).forEach(function(e){r[e]=d(r[e])})}),(0,o.default)(t).reduce(function(e,r){return e&&!t[r]},!0)?void 0:t}});r(uT);var lT=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(eC),n=a(vw),i=a(wf);function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=t||{},!e)return i.default.reject(new Error("`namespace` is required"));if(!t.logger)return i.default.reject(new Error("`options.logger` is required"));var a=t.logger,o=new n.default;return t.data&&(0,r.default)(t.data).forEach(function(e){o.set(e,t.data[e])}),a.debug("memory-store-adapter: returning binding"),i.default.resolve({clear:function(){return a.debug("memory-store-adapter: clearing the binding"),i.default.resolve(o.clear())},del:function(e){return a.debug("memory-store-adapter: deleting `"+e+"`"),i.default.resolve(o.delete(e))},get:function(e){a.debug("memory-store-adapter: reading `"+e+"`");var t=o.get(e);return void 0===t?i.default.reject(new oT.NotFoundError):i.default.resolve(t)},put:function(e,t){return a.debug("memory-store-adapter: writing `"+e+"`"),i.default.resolve(o.set(e,t))}})}t.default={bind:o,preload:function(e){return{bind:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[t]&&(r.data=e[t]),o(t,r)}}}}});r(lT);var fT=n(function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"persist",{enumerable:!0,get:function(){return sT.persist}}),Object.defineProperty(t,"waitForValue",{enumerable:!0,get:function(){return sT.waitForValue}}),Object.defineProperty(t,"makeSparkStore",{enumerable:!0,get:function(){return r(cT).default}}),Object.defineProperty(t,"makeSparkPluginStore",{enumerable:!0,get:function(){return r(uT).default}}),Object.defineProperty(t,"MemoryStoreAdapter",{enumerable:!0,get:function(){return r(lT).default}}),Object.defineProperty(t,"StorageError",{enumerable:!0,get:function(){return oT.StorageError}}),Object.defineProperty(t,"NotFoundError",{enumerable:!0,get:function(){return oT.NotFoundError}})});r(fT);var pT=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(wf),n=l(If),i=l(eC),a=l(lm),o=l(up),s=l(gm),c=l(by),u=l(Wk);function l(e){return e&&e.__esModule?e:{default:e}}var f=u.default.extend({derived:{boundedStorage:{deps:[],fn:function(){return(0,fT.makeSparkPluginStore)("bounded",this)}},unboundedStorage:{deps:[],fn:function(){return(0,fT.makeSparkPluginStore)("unbounded",this)}},config:{cache:!1,deps:["spark","spark.config"],fn:function(){if(this.spark&&this.spark.config){var e=this.getNamespace();return e?this.spark.config[e.toLowerCase()]:this.spark.config}return{}}},logger:{deps:["spark","spark.logger"],fn:function(){return this.spark.logger||console}},spark:{deps:["parent"],fn:function(){if(!this.parent&&!this.collection)throw new Error("Cannot determine `this.spark` without `this.parent` or `this.collection`. Please initialize `this` via `children` or `collection` or set `this.parent` manually");for(var e=this;e.parent||e.collection;)e=e.parent||e.collection;return e}}},session:{parent:{type:"any"},ready:{default:!0,type:"boolean"}},clear:function(e){var t=this;return(0,i.default)(this.attributes).forEach(function(r){"parent"!==r&&t.unset(r,e)}),(0,i.default)(this._children).forEach(function(e){t[e].clear()}),(0,i.default)(this._collections).forEach(function(e){t[e].reset()}),this},initialize:function(){for(var e=this,t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];(0,n.default)(u.default.prototype.initialize,this,r),this._dataTypes=(0,s.default)(this._dataTypes),(0,i.default)(this._dataTypes).forEach(function(t){e._dataTypes[t].set&&(e._dataTypes[t].set=e._dataTypes[t].set.bind(e))}),this.on("change",function(t,r){e.parent&&e.parent.trigger("change:"+e.getNamespace().toLowerCase(),e.parent,e,r)})},inspect:function(e){return c.default.inspect((0,a.default)(this.serialize({props:!0,session:!0,derived:!0}),"boundedStorage","unboundedStorage","config","logger","spark","parent"),{depth:e})},request:function(){var e;return(e=this.spark).request.apply(e,arguments)},upload:function(){var e;return(e=this.spark).upload.apply(e,arguments)},when:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];if(i&&i.length>0)throw new Error("#when() does not accept a callback, you must attach to its promise");return new r.default(function(r){t.once(e,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(t)})})},_filterSetParameters:function(e,t,r){var n=void 0;return(0,o.default)(e)||null===e?(n=e,r=t):(n={})[e]=t,[n,r=r||{}]}});t.default=f});r(pT),ru(ru.S+ru.F*!Uc,"Object",{defineProperties:Ru});var dT=$c.Object,hT=function(e,t){return dT.defineProperties(e,t)},vT=n(function(e){e.exports={default:hT,__esModule:!0}});r(vT);var mT=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthError=void 0;var r=c(vT),n=c(aS),i=c(Gy),a=c(Yy),o=c(oS),s=c(sS);function c(e){return e&&e.__esModule?e:{default:e}}var u=t.OAuthError=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"parse",value:function(e){var t=e.body||e;return(0,r.default)(this,{error:{enumerable:!0,value:t.error},errorDescription:{enumerable:!0,value:t.error_description},errorUri:{enumerable:!0,value:t.error_uri},res:{enumerable:!1,value:e}}),this.errorDescription}}]),t}(Zx.Exception),l=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),t}(u),f=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),t}(u),p=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),t}(u),d=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),t}(u),h=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),t}(u),v=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),t}(u),m={OAuthError:u,InvalidRequestError:l,InvalidClientError:f,InvalidGrantError:p,UnauthorizedClientError:d,UnsupportGrantTypeError:h,InvalidScopeError:v,invalid_request:l,invalid_client:f,invalid_grant:p,unauthorized_client:d,unsupported_grant_type:h,invalid_scope:v,select:function(e){return m[e]||u}};t.default=m});r(mT);mT.OAuthError;var gT=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.sortScope=function(e){if(!e)return"";return e.split(" ").sort().join(" ")},t.filterScope=function(e,t){if(!t)return"";return t.split(" ").filter(function(t){return t!==e}).sort().join(" ")}});r(gT);gT.sortScope,gT.filterScope;var yT=Lu("iterator"),bT=$c.isIterable=function(e){var t=Object(e);return void 0!==t[yT]||"@@iterator"in t||mu.hasOwnProperty(fl(t))},wT=n(function(e){e.exports={default:bT,__esModule:!0}});r(wT);var _T=$c.getIterator=function(e){var t=yl(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return Qc(t.call(e))},ET=n(function(e){e.exports={default:_T,__esModule:!0}});r(ET);var ST=n(function(e,t){t.__esModule=!0;var r=i(wT),n=i(ET);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var r=[],i=!0,a=!1,o=void 0;try{for(var s,c=(0,n.default)(e);!(i=(s=c.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()});r(ST);var xT=function(e,t,r,n){if(!up(e))return e;for(var i=-1,a=(t=Rv(t,e)).length,o=a-1,s=e;null!=s&&++i<a;){var c=Nv(t[i]),u=r;if(i!=o){var l=s[c];void 0===(u=n?n(l,c,s):void 0)&&(u=up(l)?l:_d(t[i+1])?[]:{})}od(s,c,u),s=s[c]}return e};var CT=function(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=Bv(e,o);r(s,o)&&xT(a,Rv(o,e),s)}return a};var kT=function(e,t){return null!=e&&t in Object(e)};var TT=function(e,t){return null!=e&&vk(e,t,kT)};var AT=function(e,t){return CT(e,t,function(t,r){return TT(e,r)})},IT=um(function(e,t){return null==e?{}:AT(e,t)});ru(ru.S+ru.F*Lc(function(){Reflect.defineProperty(Xc.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){Qc(e),t=Bc(t,!0),Qc(r);try{return Xc.f(e,t,r),!0}catch(e){return!1}}});var PT=$c.Reflect.defineProperty,OT=n(function(e){e.exports={default:PT,__esModule:!0}});r(OT),ru(ru.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return Wc.f(Qc(e),t)}});var RT=$c.Reflect.getOwnPropertyDescriptor,jT=n(function(e){e.exports={default:RT,__esModule:!0}});r(jT),ru(ru.S,"Number",{isNaN:function(e){return e!=e}});var MT=$c.Number.isNaN,NT=n(function(e){e.exports={default:MT,__esModule:!0}});r(NT);var BT="[object Number]";var DT=function(e){return"number"==typeof e||ud(e)&&cp(e)==BT},FT=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(NT),n=a(vT),i=a(DT);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){(0,n.default)(this,{loaded:{enumerable:!0,value:e,writable:!1},total:{enumerable:!0,value:t,writable:!1},lengthComputable:{enumerable:!0,value:(0,i.default)(e)&&!(0,r.default)(e)&&(0,i.default)(t)&&!(0,r.default)(t)&&t>0,writable:!1}})}});r(FT);var LT=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(wf),n=s(OT),i=s(eC),a=s(Gy),o=s(Yy);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){var r=this;(0,a.default)(this,e),t&&(0,i.default)(t).forEach(function(e){var i=t[e];(0,n.default)(r,e,{enumerable:!0,value:i})})}return(0,o.default)(e,[{key:"onRequest",value:function(e){return r.default.resolve(e)}},{key:"onRequestError",value:function(e,t){return r.default.reject(t)}},{key:"onResponse",value:function(e,t){return r.default.resolve(t)}},{key:"onResponseError",value:function(e,t){return r.default.reject(t)}}],[{key:"create",value:function(){throw new Error("`Interceptor.create()` must be defined")}}]),e}();t.default=c});r(LT);var UT=jc.f,zT=function(e){return function(t){for(var r,n=Rc(t),i=Ou(n),a=i.length,o=0,s=[];a>o;)UT.call(n,r=i[o++])&&s.push(e?[r,n[r]]:n[r]);return s}},VT=zT(!1);ru(ru.S,"Object",{values:function(e){return VT(e)}});var qT=$c.Object.values,KT=n(function(e){e.exports={default:qT,__esModule:!0}});r(KT);var GT=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s(Cf),n=s(aS),i=s(Gy),a=s(oS),o=s(sS);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(e),s=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(e),c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),u=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),l=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),f=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),p=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),d=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),h=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),v=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),m=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),g=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),y=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),b=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),w=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),_=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),E=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),S=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),x=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),C=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),k=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(e),T=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(k),A=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(k),I=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(k),P=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(k),O=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(k);(0,r.default)(e,{0:t,NetworkOrCORSError:t,400:s,BadRequest:s,401:c,Unauthorized:c,402:u,PaymentRequired:u,403:l,Forbidden:l,404:f,NotFound:f,405:p,MethodNotAllowed:p,406:d,NotAcceptable:d,407:h,ProxyAuthenticationRequired:h,408:v,RequestTimeout:v,409:m,Conflict:m,410:g,Gone:g,411:y,LengthRequired:y,412:b,PreconditionFailed:b,413:w,RequestEntityTooLarge:w,414:_,RequestUriTooLong:_,415:E,UnsupportedMediaType:E,416:S,RequestRangeNotSatisfiable:S,417:x,ExpectationFailed:x,429:C,TooManyRequests:C,500:k,InternalServerError:k,501:T,NotImplemented:T,502:A,BadGateway:A,503:I,ServiceUnavailable:I,504:P,GatewayTimeout:P,505:O,HttpVersionNotSupported:O,select:function(t){if(null==t)return e;t=t.statusCode||t;var r=e[t];return r||(t=t.toString().split("").shift()+"00",t=parseInt(t,10),e[t]||e)}})}});r(GT);var HT=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,i=v(Rf),a=v(KT),o=v(vT),s=v(sw),c=v(aS),u=v(Gy),l=v(Yy),f=v(oS),p=v(sS),d=v(IT),h=v(GT);function v(e){return e&&e.__esModule?e:{default:e}}var m=(n=r=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,l.default)(t,[{key:"parse",value:function(e){var t=e.body,r=void 0;switch(void 0===t?"undefined":(0,s.default)(t)){case"string":try{t=JSON.parse(t),r=this.parseObject(t)}catch(e){r=t}break;case"object":r=this.parseObject(t)}return r||(r=this.defaultMessage),(0,o.default)(this,{body:{enumerable:!1,value:t},httpVersion:{enumerable:!1,value:e.httpVersion},headers:{enumerable:!1,value:e.headers||{}},rawHeaders:{enumerable:!1,value:e.rawHeaders||[]},trailers:{enumerable:!1,value:e.trailers||{}},rawTrailers:{enumerable:!1,value:e.rawTrailers||[]},method:{enumerable:!1,value:e.method},url:{enumerable:!1,value:e.url},statusCode:{enumerable:!1,value:e.statusCode},statusMessage:{enumerable:!1,value:e.statusMessage},socket:{enumerable:!1,value:e.socket},_res:{enumerable:!1,value:e}}),r}},{key:"parseObject",value:function(e){var r=(0,a.default)((0,d.default)(e,t.errorKeys));if(0===r.length)return(0,i.default)(e,null,2);var n=r[0];return"object"===(void 0===n?"undefined":(0,s.default)(n))?this.parseObject(n):n}}]),t}(Zx.Exception),r.errorKeys=["error","errorString","response","errorResponse","message","msg"],r.defaultMessage="An error was received while trying to fulfill the request",n);t.default=m,(0,h.default)(m),m.makeSubTypes=h.default});r(HT);var WT=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(wf),n=f(vT),i=f(aS),a=f(Gy),o=f(Yy),s=f(oS),c=f(sS),u=f(HT),l=f(LT);function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e,r){(0,a.default)(this,t);var o=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e)),c=r&&(r.error||r.ErrorConstructor)||u.default;return(0,n.default)(o,{ErrorConstructor:{value:c}}),o}return(0,c.default)(t,e),(0,o.default)(t,[{key:"onResponse",value:function(e,t){if(t.statusCode){if(t.statusCode<400)return r.default.resolve(t);if(404===t.statusCode&&t.body&&2000002===t.body.errorCode)return r.default.resolve(t)}return r.default.reject(new(this.ErrorConstructor.select(t.statusCode))(t))}}],[{key:"create",value:function(e){return new t(this,e)}}]),t}(l.default);t.default=p});r(WT);var $T=function(e){return e&&e.length>1?255===e[0]&&216===e[1]&&255===e[2]?{ext:"jpg",mime:"image/jpeg"}:137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]?{ext:"png",mime:"image/png"}:71===e[0]&&73===e[1]&&70===e[2]?{ext:"gif",mime:"image/gif"}:87===e[8]&&69===e[9]&&66===e[10]&&80===e[11]?{ext:"webp",mime:"image/webp"}:70===e[0]&&76===e[1]&&73===e[2]&&70===e[3]?{ext:"flif",mime:"image/flif"}:(73===e[0]&&73===e[1]&&42===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&42===e[3])&&67===e[8]&&82===e[9]?{ext:"cr2",mime:"image/x-canon-cr2"}:73===e[0]&&73===e[1]&&42===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&42===e[3]?{ext:"tif",mime:"image/tiff"}:66===e[0]&&77===e[1]?{ext:"bmp",mime:"image/bmp"}:73===e[0]&&73===e[1]&&188===e[2]?{ext:"jxr",mime:"image/vnd.ms-photo"}:56===e[0]&&66===e[1]&&80===e[2]&&83===e[3]?{ext:"psd",mime:"image/vnd.adobe.photoshop"}:80===e[0]&&75===e[1]&&3===e[2]&&4===e[3]&&109===e[30]&&105===e[31]&&109===e[32]&&101===e[33]&&116===e[34]&&121===e[35]&&112===e[36]&&101===e[37]&&97===e[38]&&112===e[39]&&112===e[40]&&108===e[41]&&105===e[42]&&99===e[43]&&97===e[44]&&116===e[45]&&105===e[46]&&111===e[47]&&110===e[48]&&47===e[49]&&101===e[50]&&112===e[51]&&117===e[52]&&98===e[53]&&43===e[54]&&122===e[55]&&105===e[56]&&112===e[57]?{ext:"epub",mime:"application/epub+zip"}:80===e[0]&&75===e[1]&&3===e[2]&&4===e[3]&&77===e[30]&&69===e[31]&&84===e[32]&&65===e[33]&&45===e[34]&&73===e[35]&&78===e[36]&&70===e[37]&&47===e[38]&&109===e[39]&&111===e[40]&&122===e[41]&&105===e[42]&&108===e[43]&&108===e[44]&&97===e[45]&&46===e[46]&&114===e[47]&&115===e[48]&&97===e[49]?{ext:"xpi",mime:"application/x-xpinstall"}:80!==e[0]||75!==e[1]||3!==e[2]&&5!==e[2]&&7!==e[2]||4!==e[3]&&6!==e[3]&&8!==e[3]?117===e[257]&&115===e[258]&&116===e[259]&&97===e[260]&&114===e[261]?{ext:"tar",mime:"application/x-tar"}:82!==e[0]||97!==e[1]||114!==e[2]||33!==e[3]||26!==e[4]||7!==e[5]||0!==e[6]&&1!==e[6]?31===e[0]&&139===e[1]&&8===e[2]?{ext:"gz",mime:"application/gzip"}:66===e[0]&&90===e[1]&&104===e[2]?{ext:"bz2",mime:"application/x-bzip2"}:55===e[0]&&122===e[1]&&188===e[2]&&175===e[3]&&39===e[4]&&28===e[5]?{ext:"7z",mime:"application/x-7z-compressed"}:120===e[0]&&1===e[1]?{ext:"dmg",mime:"application/x-apple-diskimage"}:0===e[0]&&0===e[1]&&0===e[2]&&(24===e[3]||32===e[3])&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]||51===e[0]&&103===e[1]&&112===e[2]&&53===e[3]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&109===e[8]&&112===e[9]&&52===e[10]&&50===e[11]&&109===e[16]&&112===e[17]&&52===e[18]&&49===e[19]&&109===e[20]&&112===e[21]&&52===e[22]&&50===e[23]&&105===e[24]&&115===e[25]&&111===e[26]&&109===e[27]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&105===e[8]&&115===e[9]&&111===e[10]&&109===e[11]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&109===e[8]&&112===e[9]&&52===e[10]&&50===e[11]&&0===e[12]&&0===e[13]&&0===e[14]&&0===e[15]?{ext:"mp4",mime:"video/mp4"}:0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&77===e[8]&&52===e[9]&&86===e[10]?{ext:"m4v",mime:"video/x-m4v"}:77===e[0]&&84===e[1]&&104===e[2]&&100===e[3]?{ext:"mid",mime:"audio/midi"}:109===e[31]&&97===e[32]&&116===e[33]&&114===e[34]&&111===e[35]&&115===e[36]&&107===e[37]&&97===e[38]?{ext:"mkv",mime:"video/x-matroska"}:26===e[0]&&69===e[1]&&223===e[2]&&163===e[3]?{ext:"webm",mime:"video/webm"}:0===e[0]&&0===e[1]&&0===e[2]&&20===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]?{ext:"mov",mime:"video/quicktime"}:82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&65===e[8]&&86===e[9]&&73===e[10]?{ext:"avi",mime:"video/x-msvideo"}:48===e[0]&&38===e[1]&&178===e[2]&&117===e[3]&&142===e[4]&&102===e[5]&&207===e[6]&&17===e[7]&&166===e[8]&&217===e[9]?{ext:"wmv",mime:"video/x-ms-wmv"}:0===e[0]&&0===e[1]&&1===e[2]&&"b"===e[3].toString(16)[0]?{ext:"mpg",mime:"video/mpeg"}:73===e[0]&&68===e[1]&&51===e[2]||255===e[0]&&251===e[1]?{ext:"mp3",mime:"audio/mpeg"}:102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&77===e[8]&&52===e[9]&&65===e[10]||77===e[0]&&52===e[1]&&65===e[2]&&32===e[3]?{ext:"m4a",mime:"audio/m4a"}:79===e[28]&&112===e[29]&&117===e[30]&&115===e[31]&&72===e[32]&&101===e[33]&&97===e[34]&&100===e[35]?{ext:"opus",mime:"audio/opus"}:79===e[0]&&103===e[1]&&103===e[2]&&83===e[3]?{ext:"ogg",mime:"audio/ogg"}:102===e[0]&&76===e[1]&&97===e[2]&&67===e[3]?{ext:"flac",mime:"audio/x-flac"}:82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&87===e[8]&&65===e[9]&&86===e[10]&&69===e[11]?{ext:"wav",mime:"audio/x-wav"}:35===e[0]&&33===e[1]&&65===e[2]&&77===e[3]&&82===e[4]&&10===e[5]?{ext:"amr",mime:"audio/amr"}:37===e[0]&&80===e[1]&&68===e[2]&&70===e[3]?{ext:"pdf",mime:"application/pdf"}:77===e[0]&&90===e[1]?{ext:"exe",mime:"application/x-msdownload"}:67!==e[0]&&70!==e[0]||87!==e[1]||83!==e[2]?123===e[0]&&92===e[1]&&114===e[2]&&116===e[3]&&102===e[4]?{ext:"rtf",mime:"application/rtf"}:119===e[0]&&79===e[1]&&70===e[2]&&70===e[3]&&(0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]||79===e[4]&&84===e[5]&&84===e[6]&&79===e[7])?{ext:"woff",mime:"application/font-woff"}:119===e[0]&&79===e[1]&&70===e[2]&&50===e[3]&&(0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]||79===e[4]&&84===e[5]&&84===e[6]&&79===e[7])?{ext:"woff2",mime:"application/font-woff"}:76===e[34]&&80===e[35]&&(0===e[8]&&0===e[9]&&1===e[10]||1===e[8]&&0===e[9]&&2===e[10]||2===e[8]&&0===e[9]&&2===e[10])?{ext:"eot",mime:"application/octet-stream"}:0===e[0]&&1===e[1]&&0===e[2]&&0===e[3]&&0===e[4]?{ext:"ttf",mime:"application/font-sfnt"}:79===e[0]&&84===e[1]&&84===e[2]&&79===e[3]&&0===e[4]?{ext:"otf",mime:"application/font-sfnt"}:0===e[0]&&0===e[1]&&1===e[2]&&0===e[3]?{ext:"ico",mime:"image/x-icon"}:70===e[0]&&76===e[1]&&86===e[2]&&1===e[3]?{ext:"flv",mime:"video/x-flv"}:37===e[0]&&33===e[1]?{ext:"ps",mime:"application/postscript"}:253===e[0]&&55===e[1]&&122===e[2]&&88===e[3]&&90===e[4]&&0===e[5]?{ext:"xz",mime:"application/x-xz"}:83===e[0]&&81===e[1]&&76===e[2]&&105===e[3]?{ext:"sqlite",mime:"application/x-sqlite3"}:78===e[0]&&69===e[1]&&83===e[2]&&26===e[3]?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:67===e[0]&&114===e[1]&&50===e[2]&&52===e[3]?{ext:"crx",mime:"application/x-google-chrome-extension"}:77===e[0]&&83===e[1]&&67===e[2]&&70===e[3]||73===e[0]&&83===e[1]&&99===e[2]&&40===e[3]?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:33===e[0]&&60===e[1]&&97===e[2]&&114===e[3]&&99===e[4]&&104===e[5]&&62===e[6]&&10===e[7]&&100===e[8]&&101===e[9]&&98===e[10]&&105===e[11]&&97===e[12]&&110===e[13]&&45===e[14]&&98===e[15]&&105===e[16]&&110===e[17]&&97===e[18]&&114===e[19]&&121===e[20]?{ext:"deb",mime:"application/x-deb"}:33===e[0]&&60===e[1]&&97===e[2]&&114===e[3]&&99===e[4]&&104===e[5]&&62===e[6]?{ext:"ar",mime:"application/x-unix-archive"}:237===e[0]&&171===e[1]&&238===e[2]&&219===e[3]?{ext:"rpm",mime:"application/x-rpm"}:31===e[0]&&160===e[1]||31===e[0]&&157===e[1]?{ext:"Z",mime:"application/x-compress"}:76===e[0]&&90===e[1]&&73===e[2]&&80===e[3]?{ext:"lz",mime:"application/x-lzip"}:208===e[0]&&207===e[1]&&17===e[2]&&224===e[3]&&161===e[4]&&177===e[5]&&26===e[6]&&225===e[7]?{ext:"msi",mime:"application/x-msi"}:null:{ext:"swf",mime:"application/x-shockwave-flash"}:{ext:"rar",mime:"application/x-rar-compressed"}:{ext:"zip",mime:"application/zip"}:null},YT=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.detect=void 0;var r=i(wf);t.default=a,t.detectSync=o;var n=i($T);function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return new r.default(function(t){t(o(e))})}function o(e){var t=e;if(Zx.inBrowser){if(e instanceof Blob)return e.type;if(e instanceof ArrayBuffer)t=new Uint8Array(e);else if(!(e instanceof Uint8Array))throw new Error("`detect` requires a buffer of type Blob, ArrayBuffer, or Uint8Array")}var r=(0,n.default)(t);return r?r.mime:"application/octet-stream"}t.detect=a});r(YT);YT.detect,YT.detectSync;var JT=Object.prototype.hasOwnProperty,QT=Array.isArray,ZT=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),XT=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},eA={arrayToObject:XT,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],o=Object.keys(a),s=0;s<o.length;++s){var c=o[s],u=a[c];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:c}),r.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(QT(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var n="string"==typeof e?e:String(e);if("iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var i="",a=0;a<n.length;++a){var o=n.charCodeAt(a);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?i+=n.charAt(a):o<128?i+=ZT[o]:o<2048?i+=ZT[192|o>>6]+ZT[128|63&o]:o<55296||o>=57344?i+=ZT[224|o>>12]+ZT[128|o>>6&63]+ZT[128|63&o]:(a+=1,o=65536+((1023&o)<<10|1023&n.charCodeAt(a)),i+=ZT[240|o>>18]+ZT[128|o>>12&63]+ZT[128|o>>6&63]+ZT[128|63&o])}return i},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(QT(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!JT.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var i=t;return QT(t)&&!QT(r)&&(i=XT(t,n)),QT(t)&&QT(r)?(r.forEach(function(r,i){if(JT.call(t,i)){var a=t[i];a&&"object"==typeof a&&r&&"object"==typeof r?t[i]=e(a,r,n):t.push(r)}else t[i]=r}),t):Object.keys(r).reduce(function(t,i){var a=r[i];return JT.call(t,i)?t[i]=e(t[i],a,n):t[i]=a,t},i)}},tA=String.prototype.replace,rA=/%20/g,nA={default:"RFC3986",formatters:{RFC1738:function(e){return tA.call(e,rA,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},iA=Object.prototype.hasOwnProperty,aA={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},oA=Array.isArray,sA=Array.prototype.push,cA=function(e,t){sA.apply(e,oA(t)?t:[t])},uA=Date.prototype.toISOString,lA={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:eA.encode,encodeValuesOnly:!1,formatter:nA.formatters[nA.default],indices:!1,serializeDate:function(e){return uA.call(e)},skipNulls:!1,strictNullHandling:!1},fA=function e(t,r,n,i,a,o,s,c,u,l,f,p,d){var h=t;if("function"==typeof s?h=s(r,h):h instanceof Date?h=l(h):"comma"===n&&oA(h)&&(h=h.join(",")),null===h){if(i)return o&&!p?o(r,lA.encoder,d):r;h=""}if("string"==typeof h||"number"==typeof h||"boolean"==typeof h||eA.isBuffer(h))return o?[f(p?r:o(r,lA.encoder,d))+"="+f(o(h,lA.encoder,d))]:[f(r)+"="+f(String(h))];var v,m=[];if(void 0===h)return m;if(oA(s))v=s;else{var g=Object.keys(h);v=c?g.sort(c):g}for(var y=0;y<v.length;++y){var b=v[y];a&&null===h[b]||(oA(h)?cA(m,e(h[b],"function"==typeof n?n(r,b):r,n,i,a,o,s,c,u,l,f,p,d)):cA(m,e(h[b],r+(u?"."+b:"["+b+"]"),n,i,a,o,s,c,u,l,f,p,d)))}return m},pA=Object.prototype.hasOwnProperty,dA={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:eA.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},hA=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},vA=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(n),o=a?n.slice(0,a.index):n,s=[];if(o){if(!r.plainObjects&&pA.call(Object.prototype,o)&&!r.allowPrototypes)return;s.push(o)}for(var c=0;null!==(a=i.exec(n))&&c<r.depth;){if(c+=1,!r.plainObjects&&pA.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;s.push(a[1])}return a&&s.push("["+n.slice(a.index)+"]"),function(e,t,r){for(var n=t,i=e.length-1;i>=0;--i){var a,o=e[i];if("[]"===o&&r.parseArrays)a=[].concat(n);else{a=r.plainObjects?Object.create(null):{};var s="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,c=parseInt(s,10);r.parseArrays||""!==s?!isNaN(c)&&o!==s&&String(c)===s&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(a=[])[c]=n:a[s]=n:a={0:n}}n=a}return n}(s,t,r)}},mA={formats:nA,parse:function(e,t){var r=function(e){if(!e)return dA;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?dA.charset:e.charset;return{allowDots:void 0===e.allowDots?dA.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:dA.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:dA.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:dA.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:dA.comma,decoder:"function"==typeof e.decoder?e.decoder:dA.decoder,delimiter:"string"==typeof e.delimiter||eA.isRegExp(e.delimiter)?e.delimiter:dA.delimiter,depth:"number"==typeof e.depth?e.depth:dA.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:dA.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:dA.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:dA.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:dA.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?function(e,t){var r,n={},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=t.parameterLimit===1/0?void 0:t.parameterLimit,o=i.split(t.delimiter,a),s=-1,c=t.charset;if(t.charsetSentinel)for(r=0;r<o.length;++r)0===o[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===o[r]?c="utf-8":"utf8=%26%2310003%3B"===o[r]&&(c="iso-8859-1"),s=r,r=o.length);for(r=0;r<o.length;++r)if(r!==s){var u,l,f=o[r],p=f.indexOf("]="),d=-1===p?f.indexOf("="):p+1;-1===d?(u=t.decoder(f,dA.decoder,c),l=t.strictNullHandling?null:""):(u=t.decoder(f.slice(0,d),dA.decoder,c),l=t.decoder(f.slice(d+1),dA.decoder,c)),l&&t.interpretNumericEntities&&"iso-8859-1"===c&&(l=hA(l)),l&&t.comma&&l.indexOf(",")>-1&&(l=l.split(",")),pA.call(n,u)?n[u]=eA.combine(n[u],l):n[u]=l}return n}(e,r):e,i=r.plainObjects?Object.create(null):{},a=Object.keys(n),o=0;o<a.length;++o){var s=a[o],c=vA(s,n[s],r);i=eA.merge(i,c,r)}return eA.compact(i)},stringify:function(e,t){var r,n=e,i=function(e){if(!e)return lA;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||lA.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=nA.default;if(void 0!==e.format){if(!iA.call(nA.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=nA.formatters[r],i=lA.filter;return("function"==typeof e.filter||oA(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:lA.addQueryPrefix,allowDots:void 0===e.allowDots?lA.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:lA.charsetSentinel,delimiter:void 0===e.delimiter?lA.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:lA.encode,encoder:"function"==typeof e.encoder?e.encoder:lA.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:lA.encodeValuesOnly,filter:i,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:lA.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:lA.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:lA.strictNullHandling}}(t);"function"==typeof i.filter?n=(0,i.filter)("",n):oA(i.filter)&&(r=i.filter);var a,o=[];if("object"!=typeof n||null===n)return"";a=t&&t.arrayFormat in aA?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var s=aA[a];r||(r=Object.keys(n)),i.sort&&r.sort(i.sort);for(var c=0;c<r.length;++c){var u=r[c];i.skipNulls&&null===n[u]||cA(o,fA(n[u],u,s,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.formatter,i.encodeValuesOnly,i.charset))}var l=o.join(i.delimiter),f=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&("iso-8859-1"===i.charset?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),l.length>0?f+l:""}},gA="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},yA=function(e){var t=bA.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},bA=Object.prototype.toString;var wA,_A=Array.prototype.slice,EA=Object.prototype.toString,SA=Function.prototype.bind||function(e){var t=this;if("function"!=typeof t||"[object Function]"!==EA.call(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var r,n=_A.call(arguments,1),i=Math.max(0,t.length-n.length),a=[],o=0;o<i;o++)a.push("$"+o);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof r){var i=t.apply(this,n.concat(_A.call(arguments)));return Object(i)===i?i:this}return t.apply(e,n.concat(_A.call(arguments)))}),t.prototype){var s=function(){};s.prototype=t.prototype,r.prototype=new s,s.prototype=null}return r},xA=Object.prototype.toString,CA=function(e){var t=xA.call(e),r="[object Arguments]"===t;return r||(r="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===xA.call(e.callee)),r};if(!Object.keys){var kA=Object.prototype.hasOwnProperty,TA=Object.prototype.toString,AA=CA,IA=Object.prototype.propertyIsEnumerable,PA=!IA.call({toString:null},"toString"),OA=IA.call(function(){},"prototype"),RA=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],jA=function(e){var t=e.constructor;return t&&t.prototype===e},MA={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},NA=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!MA["$"+e]&&kA.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{jA(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();wA=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===TA.call(e),n=AA(e),i=t&&"[object String]"===TA.call(e),a=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var o=OA&&r;if(i&&e.length>0&&!kA.call(e,0))for(var s=0;s<e.length;++s)a.push(String(s));if(n&&e.length>0)for(var c=0;c<e.length;++c)a.push(String(c));else for(var u in e)o&&"prototype"===u||!kA.call(e,u)||a.push(String(u));if(PA)for(var l=function(e){if("undefined"==typeof window||!NA)return jA(e);try{return jA(e)}catch(e){return!1}}(e),f=0;f<RA.length;++f)l&&"constructor"===RA[f]||!kA.call(e,RA[f])||a.push(RA[f]);return a}}var BA=wA,DA=Array.prototype.slice,FA=Object.keys,LA=FA?function(e){return FA(e)}:BA,UA=Object.keys;LA.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return CA(e)?UA(DA.call(e)):UA(e)}):Object.keys=LA;return Object.keys||LA};var zA=LA,VA="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),qA=Object.prototype.toString,KA=Array.prototype.concat,GA=Object.defineProperty,HA=GA&&function(){var e={};try{for(var t in GA(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),WA=function(e,t,r,n){var i;t in e&&("function"!=typeof(i=n)||"[object Function]"!==qA.call(i)||!n())||(HA?GA(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},$A=function(e,t){var r=arguments.length>2?arguments[2]:{},n=zA(t);VA&&(n=KA.call(n,Object.getOwnPropertySymbols(t)));for(var i=0;i<n.length;i+=1)WA(e,n[i],t[n[i]],r[n[i]])};$A.supportsDescriptors=!!HA;var YA=$A,JA=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},QA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,ZA=Object.getPrototypeOf||function(e){return e.__proto__},XA="undefined"==typeof Uint8Array?void 0:ZA(Uint8Array),eI={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":QA?ZA([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":void 0,"$ %Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?void 0:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":QA?ZA(ZA([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&QA?ZA((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&QA?ZA((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":QA?ZA(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":QA?Symbol:void 0,"$ %SymbolPrototype%":QA?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":JA,"$ %TypedArray%":XA,"$ %TypedArrayPrototype%":XA?XA.prototype:void 0,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},tI=function(e,t){if(arguments.length>1&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean');var r="$ "+e;if(!(r in eI))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===eI[r]&&!t)throw new TypeError("intrinsic "+e+" exists, but is not available. Please file an issue!");return eI[r]},rI=SA.call(Function.call,Object.prototype.hasOwnProperty),nI=tI("%TypeError%"),iI=tI("%SyntaxError%"),aI={"Property Descriptor":function(e,t){if("Object"!==e.Type(t))return!1;var r={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in t)if(rI(t,n)&&!r[n])return!1;var i=rI(t,"[[Value]]"),a=rI(t,"[[Get]]")||rI(t,"[[Set]]");if(i&&a)throw new nI("Property Descriptors may not be both accessor and data descriptors");return!0}},oI=function(e,t,r,n){var i=aI[t];if("function"!=typeof i)throw new iI("unknown record type: "+t);if(!i(e,n))throw new nI(r+" must be a "+t);console.log(i(e,n),n)},sI=Number.isNaN||function(e){return e!=e},cI=Number.isNaN||function(e){return e!=e},uI=Number.isFinite||function(e){return"number"==typeof e&&!cI(e)&&e!==1/0&&e!==-1/0},lI=function(e){return e>=0?1:-1},fI=Function.prototype.toString,pI=/^\s*class\b/,dI=function(e){try{var t=fI.call(e);return pI.test(t)}catch(e){return!1}},hI=Object.prototype.toString,vI="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,mI=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(vI)return function(e){try{return!dI(e)&&(fI.call(e),!0)}catch(e){return!1}}(e);if(dI(e))return!1;var t=hI.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t},gI=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e},yI=Object.prototype.toString,bI=function(e){var t;if((t=arguments.length>1?arguments[1]:"[object Date]"===yI.call(e)?String:Number)===String||t===Number){var r,n,i=t===String?["toString","valueOf"]:["valueOf","toString"];for(n=0;n<i.length;++n)if(mI(e[i[n]])&&(r=e[i[n]](),gI(r)))return r;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")},wI=tI("%Object%"),_I=tI("%TypeError%"),EI=tI("%String%"),SI={ToPrimitive:function(e){return gI(e)?e:arguments.length>1?bI(e,arguments[1]):bI(e)},ToBoolean:function(e){return!!e},ToNumber:function(e){return+e},ToInteger:function(e){var t=this.ToNumber(e);return sI(t)?0:0!==t&&uI(t)?lI(t)*Math.floor(Math.abs(t)):t},ToInt32:function(e){return this.ToNumber(e)>>0},ToUint32:function(e){return this.ToNumber(e)>>>0},ToUint16:function(e){var t=this.ToNumber(e);return sI(t)||0===t||!uI(t)?0:function(e,t){var r=e%t;return Math.floor(r>=0?r:r+t)}(lI(t)*Math.floor(Math.abs(t)),65536)},ToString:function(e){return EI(e)},ToObject:function(e){return this.CheckObjectCoercible(e),wI(e)},CheckObjectCoercible:function(e,t){if(null==e)throw new _I(t||"Cannot call method on "+e);return e},IsCallable:mI,SameValue:function(e,t){return e===t?0!==e||1/e==1/t:sI(e)&&sI(t)},Type:function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0},IsPropertyDescriptor:function(e){if("Object"!==this.Type(e))return!1;var t={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in e)if(rI(e,r)&&!t[r])return!1;var n=rI(e,"[[Value]]"),i=rI(e,"[[Get]]")||rI(e,"[[Set]]");if(n&&i)throw new _I("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(e){return void 0!==e&&(oI(this,"Property Descriptor","Desc",e),!(!rI(e,"[[Get]]")&&!rI(e,"[[Set]]")))},IsDataDescriptor:function(e){return void 0!==e&&(oI(this,"Property Descriptor","Desc",e),!(!rI(e,"[[Value]]")&&!rI(e,"[[Writable]]")))},IsGenericDescriptor:function(e){return void 0!==e&&(oI(this,"Property Descriptor","Desc",e),!this.IsAccessorDescriptor(e)&&!this.IsDataDescriptor(e))},FromPropertyDescriptor:function(e){if(void 0===e)return e;if(oI(this,"Property Descriptor","Desc",e),this.IsDataDescriptor(e))return{value:e["[[Value]]"],writable:!!e["[[Writable]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};if(this.IsAccessorDescriptor(e))return{get:e["[[Get]]"],set:e["[[Set]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};throw new _I("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(e){if("Object"!==this.Type(e))throw new _I("ToPropertyDescriptor requires an object");var t={};if(rI(e,"enumerable")&&(t["[[Enumerable]]"]=this.ToBoolean(e.enumerable)),rI(e,"configurable")&&(t["[[Configurable]]"]=this.ToBoolean(e.configurable)),rI(e,"value")&&(t["[[Value]]"]=e.value),rI(e,"writable")&&(t["[[Writable]]"]=this.ToBoolean(e.writable)),rI(e,"get")){var r=e.get;if(void 0!==r&&!this.IsCallable(r))throw new TypeError("getter must be a function");t["[[Get]]"]=r}if(rI(e,"set")){var n=e.set;if(void 0!==n&&!this.IsCallable(n))throw new _I("setter must be a function");t["[[Set]]"]=n}if((rI(t,"[[Get]]")||rI(t,"[[Set]]"))&&(rI(t,"[[Value]]")||rI(t,"[[Writable]]")))throw new _I("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t}},xI=SA.call(Function.call,String.prototype.replace),CI=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,kI=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,TI=function(){var e=SI.ToString(SI.CheckObjectCoercible(this));return xI(xI(e,CI,""),kI,"")},AI=function(){return String.prototype.trim&&"​"==="​".trim()?String.prototype.trim:TI},II=SA.call(Function.call,AI());YA(II,{getPolyfill:AI,implementation:TI,shim:function(){var e=AI();return YA(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}});var PI=II,OI=Object.prototype.toString,RI=Object.prototype.hasOwnProperty,jI=function(e,t,r){if(!mI(t))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=r),"[object Array]"===OI.call(e)?function(e,t,r){for(var n=0,i=e.length;n<i;n++)RI.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,n):"string"==typeof e?function(e,t,r){for(var n=0,i=e.length;n<i;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)}(e,t,n):function(e,t,r){for(var n in e)RI.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,n)},MI=function(e){if(!e)return{};var t={};return jI(PI(e).split("\n"),function(e){var r,n=e.indexOf(":"),i=PI(e.slice(0,n)).toLowerCase(),a=PI(e.slice(n+1));void 0===t[i]?t[i]=a:(r=t[i],"[object Array]"===Object.prototype.toString.call(r)?t[i].push(a):t[i]=[t[i],a])}),t},NI=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)BI.call(r,n)&&(e[n]=r[n])}return e},BI=Object.prototype.hasOwnProperty;var DI=n(function(e){var t,r=(t=Rf)&&t.__esModule?t:{default:t};function n(e,t,r){var n=e;return yA(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=NI(t,{uri:e}),n.callback=r,n}function i(e,t,r){return a(t=n(e,t,r))}function a(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(r,n,i){t||(t=!0,e.callback(r,n,i))};function a(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML;return null}(l),g)try{e=JSON.parse(e)}catch(e){}return e}function o(e){return clearTimeout(f),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,y)}function s(){if(!u){var t;clearTimeout(f),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=y,i=null;return 0!==t?(r={body:a(),statusCode:t,method:d,headers:{},url:p,rawRequest:l},l.getAllResponseHeaders&&(r.headers=MI(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),n(i,r,r.body)}}var c,u,l=e.xhr||null;l||(l=e.cors||e.useXDR?new i.XDomainRequest:new i.XMLHttpRequest);var f,p=e.uri||e.url,d=e.method||"GET",h=e.body||e.data,v=e.headers||{},m=!!e.sync,g=!1,y={body:void 0,headers:{},statusCode:0,method:d,url:p,rawRequest:l};if("json"in e&&!1!==e.json&&(g=!0,v.accept||v.Accept||(v.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(v["content-type"]||v["Content-Type"]||(v["Content-Type"]="application/json"),h=(0,r.default)(!0===e.json?h:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(s,0)},l.onload=s,l.onerror=o,l.onprogress=function(){},l.onabort=function(){u=!0},l.ontimeout=o,l.open(d,p,!m,e.username,e.password),m||(l.withCredentials=!!e.withCredentials),!m&&e.timeout>0&&(f=setTimeout(function(){if(!u){u=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",o(e)}},e.timeout)),l.setRequestHeader)for(c in v)v.hasOwnProperty(c)&&l.setRequestHeader(c,v[c]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(h||null),l}e.exports=i,i.XMLHttpRequest=gA.XMLHttpRequest||function(){},i.XDomainRequest="withCredentials"in new i.XMLHttpRequest?i.XMLHttpRequest:gA.XDomainRequest,function(e,t){for(var r=0;r<e.length;r+=1)t(e[r])}(["get","put","post","patch","head","delete"],function(e){i["delete"===e?"del":e]=function(t,r,i){return(r=n(t,r,i)).method=e.toUpperCase(),a(r)}})});r(DI);var FI=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=p(sw),n=p(lu),i=p(ET),a=p(eC),o=p(wf),s=p(IT),c=p(md),u=p(pE);t.default=function(e){return new o.default(function(t){var o=(0,s.default)(e,"method","uri","withCredentials","headers","timeout","responseType");o.response=!0,function(e,t){e.method&&["PATCH","POST","PUT"].includes(e.method.toUpperCase())&&(e.xhr=new XMLHttpRequest,e.xhr.upload.onprogress=t.upload.emit.bind(t.upload,"progress"))}(o,e),function(e,t){if(t.auth)if(t.auth.bearer)e.headers.authorization="Bearer "+t.auth.bearer;else{var r=t.auth.user||t.auth.username,n=t.auth.pass||t.auth.password,i=btoa(r+":"+n);e.headers.authorization="Basic "+i}}(o,e),function(e,t){t.jar&&(e.withCredentials=!0)}(o,e),function(e,t){var r={cors:!0,withCredentials:!1,timeout:0};(0,u.default)(e,(0,s.default)(t,(0,a.default)(r)),r)}(o,e),function(e,t){"buffer"===t.responseType&&(e.responseType="arraybuffer")}(o,e),function(e,t){(t.body instanceof Blob||t.body instanceof ArrayBuffer)&&(t.json=e.json=!1,e.headers["content-type"]=e.headers["content-type"]||(0,YT.detectSync)(t.body))}(o,e),function(e,t){"json"in t&&!0!==t.json||!t.body?t.form?(e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=l.default.stringify(t.form),(0,n.default)(e,"json")):t.formData?e.body=(0,a.default)(t.formData).reduce(function(e,r){var n=t.formData[r];return function e(t,r,n){if((0,c.default)(n)){var a=!0,o=!1,s=void 0;try{for(var u,l=(0,i.default)(n);!(a=(u=l.next()).done);a=!0){var f=u.value;e(t,r,f)}}catch(e){o=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw s}}return}n=function(e){if(e instanceof ArrayBuffer){var t=e.type?new Blob([e],{type:e.type}):new Blob([e]);return t.filename=e.filename||e.name||"untitled",t}return e}(n);n.name?(n.filename=n.name,t.append(r,n,n.name)):t.append(r,n)}(e,r,n),e},new FormData):(e.body=t.body,(0,n.default)(e,"json")):e.json=t.body}(o,e),function(e,t){t.qs&&(e.uri+="?"+l.default.stringify(t.qs))}(o,e);var p=(0,f.default)(o,function(n,i){n&&e.logger.warn(n),i?(i.options=e,function(e,t){if(!t.json&&"object"!==(0,r.default)(e.body))try{e.body=JSON.parse(e.body)}catch(e){}}(i,o),t(i)):t({statusCode:0,options:e,headers:e.headers,method:e.method,url:e.uri,body:n})});p.onprogress=e.download.emit.bind(e.download,"progress")}).catch(function(t){return{statusCode:0,options:e,headers:e.headers,method:e.method,url:e.uri,body:t}})};var l=p(mA),f=p(DI);function p(e){return e&&e.__esModule?e:{default:e}}});r(FI);var LI=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(wf);t.default=function(e){e.url&&(e.uri=e.url,e.url=null);e.headers=e.headers||{},Zx.inBrowser||e.headers["user-agent"]||(e.headers["user-agent"]="@ciscospark/http-core");return e.download=new hE.EventEmitter,e.upload=new hE.EventEmitter,t(e.interceptors,"Request").then(function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return n.default.apply(void 0,[e].concat(r))}).then(function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.apply(void 0,[e.interceptors.slice().reverse(),"Response"].concat(n))});function t(t,n,i){var a="on"+n,o="on"+n+"Error";return t.reduce(function(t,n){return t.then(function(t){return n[a]?n[a](e,t):r.default.resolve(t)},function(t){return n[o]?n[o](e,t):r.default.reject(t)})},r.default.resolve(i))}};var n=i(FI);function i(e){return e&&e.__esModule?e:{default:e}}});r(LI);var UI=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.detectSync=t.detect=t.HttpStatusInterceptor=t.HttpError=t.Interceptor=t.ProgressEvent=t.request=t.defaults=void 0;var r=f(lu),n=f(OT),i=f(jT),a=f(bC),o=f(pE),s=f(aT),c=f(cC);Object.defineProperty(t,"ProgressEvent",{enumerable:!0,get:function(){return f(FT).default}}),Object.defineProperty(t,"Interceptor",{enumerable:!0,get:function(){return f(LT).default}}),Object.defineProperty(t,"HttpError",{enumerable:!0,get:function(){return f(HT).default}}),Object.defineProperty(t,"HttpStatusInterceptor",{enumerable:!0,get:function(){return f(WT).default}}),Object.defineProperty(t,"detect",{enumerable:!0,get:function(){return YT.detect}}),Object.defineProperty(t,"detectSync",{enumerable:!0,get:function(){return YT.detectSync}});var u=f(WT),l=f(LI);function f(e){return e&&e.__esModule?e:{default:e}}var p=(0,s.default)(function(e,t){if((0,a.default)(t)){var s=t;(t=arguments[2]||{}).uri=s}return["download","interceptors","logger","upload"].forEach(function(e){var r=(0,i.default)(t,e);r=(0,c.default)({},r,{enumerable:!1,writable:!0}),(0,n.default)(t,e,r)}),(0,o.default)(t,e),t.json||(0,r.default)(t,"json"),t.logger=t.logger||console,(0,l.default)(t)}),d={json:!0,interceptors:[u.default.create()]};t.defaults=p,t.request=p(d)});r(UI);UI.detectSync,UI.detect,UI.HttpStatusInterceptor,UI.HttpError,UI.Interceptor,UI.ProgressEvent,UI.request,UI.defaults;var zI=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(OT),n=u(If),i=u(aS),a=u(Gy),o=u(Yy),s=u(oS),c=u(sS);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,o.default)(t,[{key:"parse",value:function(e){var t=(0,n.default)(UI.HttpError.prototype.parse,this,[e]);return(0,r.default)(this,"options",{enumerable:!1,value:e.options}),this.options.url?t+="\n"+this.options.method+" "+this.options.url:this.options.uri?t+="\n"+this.options.method+" "+this.options.uri:t+="\n"+this.options.method+" "+this.options.service.toUpperCase()+"/"+this.options.resource,t+="\nWEBEX_TRACKING_ID: "+this.options.headers.trackingid,this.options.headers&&this.options.headers["x-trans-id"]&&(t+="\nX-Trans-Id: "+this.options.headers["x-trans-id"]),this.headers["retry-after"]&&((0,r.default)(this,"retryAfter",{enumerable:!0,value:this.headers["retry-after"],writeable:!1}),t+="\nRETRY-AFTER: "+this.retryAfter),t+="\n"}}]),t}(UI.HttpError);t.default=l,UI.HttpError.makeSubTypes(l);var f=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),t}(UI.HttpError.BadRequest);UI.HttpError[429]=f,UI.HttpError.TooManyRequests=f});r(zI);var VI=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=p(su),i=p(ST),a=p(If),o=p(Cf),s=p(wf),c=p(IT),u=p(zI),l=p(pT),f=p(mT);function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function h(e){if(400!==e.statusCode)return s.default.reject(e);var t=f.default.select(e.body.error);return t===mT.OAuthError&&e instanceof u.default?s.default.reject(e):t?s.default.reject(new t(e._res||e)):s.default.reject(e)}var v=l.default.extend((d(r={derived:{canAuthorize:{deps:["access_token","isExpired"],fn:function(){return!!this.access_token&&!this.isExpired}},canDownscope:{deps:["canAuthorize"],fn:function(){return this.canAuthorize&&!!this.config.client_id}},canRefresh:{deps:["refresh_token"],fn:function(){return Zx.inBrowser?!!this.refresh_token&&!!this.config.refreshCallback:!!this.refresh_token&&!!this.config.client_secret}},isExpired:{deps:["expires","_isExpired"],fn:function(){return!!this.expires&&this._isExpired}},_string:{deps:["access_token","token_type"],fn:function(){return this.access_token&&this.token_type?this.token_type+" "+this.access_token:""}}},namespace:"Credentials",props:{scope:"string",access_token:"string",expires:"number",expires_in:"number",refresh_token:"string",refresh_token_expires:"number",refresh_token_expires_in:"number",token_type:{default:"Bearer",type:"string"}},session:{_isExpired:{default:!1,type:"boolean"},previousToken:{type:"state"}},downscope:function(e){var t=this;return this.logger.info("token: downscoping token to "+e),this.isExpired?(this.logger.info("token: request received to downscope expired access_token"),s.default.reject(new Error("cannot downscope expired access token"))):this.canDownscope?(e&&(e=(0,gT.sortScope)(e)),e===(0,gT.sortScope)(this.config.scope)?s.default.reject(new Error("token: scope reduction requires a reduced scope")):this.spark.request({method:"POST",uri:this.config.tokenUrl,addAuthHeader:!1,form:{grant_type:"urn:cisco:oauth:grant-type:scope-reduction",token:this.access_token,scope:e,client_id:this.config.client_id}}).then(function(r){return t.logger.info("token: downscoped token to "+e),new v((0,o.default)(r.body,{scope:e}),{parent:t.parent})})):(this.config.client_id?this.logger.info("token: request received to downscope invalid access_token"):this.logger.warn("token: cannot downscope without client_id"),s.default.reject(new Error("cannot downscope access token")))},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,a.default)(l.default.prototype.initialize,this,[t,r]),"string"==typeof t&&(this.access_token=t),!this.access_token)throw new Error("`access_token` is required");this.expires&&(this.expires<Date.now()?this._isExpired=!0:(0,nC.safeSetTimeout)(function(){e._isExpired=!0},this.expires-Date.now()))},refresh:function(){var e=this;if(!this.canRefresh)throw new Error("Not enough information available to refresh this access token");var t=void 0;if(Zx.inBrowser){if(!this.config.refreshCallback)throw new Error("Cannot refresh access token without refreshCallback");t=s.default.resolve(this.config.refreshCallback(this.spark,this))}return(t||this.spark.request({method:"POST",uri:this.config.tokenUrl,form:{grant_type:"refresh_token",redirect_uri:this.config.redirect_uri,refresh_token:this.refresh_token},auth:{user:this.config.client_id,pass:this.config.client_secret,sendImmediately:!0},shouldRefreshAccessToken:!1}).then(function(e){return e.body})).then(function(t){if(!t)throw new Error("token: refreshCallback() did not produce an object");return t.refresh_token||(0,o.default)(t,(0,c.default)(e,"refresh_token","refresh_token_expires","refresh_token_expires_in")),e.access_token===t.access_token?(e.logger.error("token: new token matches current token"),"production"!==Tc.env.NODE_ENV&&(e.logger.error("token: current token:",e.access_token),e.logger.error("token: new token:",t.access_token)),s.default.reject(new Error("new token matches current token"))):(e.previousToken&&(e.previousToken.revoke(),e.unset("previousToken")),t.previousToken=e,t.scope=e.scope,new v(t,{parent:e.parent}))}).catch(h)},revoke:function(){var e=this;return this.isExpired?(this.logger.info("token: already expired, not making making revocation request"),s.default.resolve()):this.canAuthorize?this.config.client_secret?(this.logger.info("token: revoking access token"),this.spark.request({method:"POST",uri:this.config.revokeUrl,form:{token:this.access_token,token_type_hint:"access_token"},auth:{user:this.config.client_id,pass:this.config.client_secret,sendImmediately:!0},shouldRefreshAccessToken:!1}).then(function(){e.unset(["access_token","expires","expires_in","token_type"]),e.logger.info("token: access token revoked")}).catch(h)):(this.logger.info("token: no client secret available, not making revocation request"),s.default.resolve()):(this.logger.info("token: no longer valid, not making revocation request"),s.default.resolve())},set:function(){var e=this._filterSetParameters.apply(this,arguments),t=(0,i.default)(e,2),r=t[0],n=t[1];if(!r.token_type&&r.access_token&&r.access_token.includes(" ")){var s=r.access_token.split(" "),c=(0,i.default)(s,2),u=c[0],f=c[1];r=(0,o.default)({},r,{access_token:f,token_type:u})}var p=Date.now();return!r.expires&&r.expires_in&&(r.expires=p+1e3*r.expires_in),!r.refresh_token_expires&&r.refresh_token_expires_in&&(r.refresh_token_expires=p+1e3*r.refresh_token_expires_in),r.scope&&(r.scope=(0,gT.sortScope)(r.scope)),(0,a.default)(l.default.prototype.set,this,[r,n])},toString:function(){if(!this._string)throw new Error("cannot stringify Token");return this._string},validate:function(){var e=this;if("production"===Tc.env.NODE_ENV)throw new Error("Token#validate() must not be used in production");return this.spark.request({method:"POST",service:"conversation",resource:"users/validateAuthToken",body:{token:this.access_token}}).catch(function(t){if("statusCode"in t)return s.default.reject(t);e.logger.info("REMINDER: If you're investigating a network error here, it's normal");var r=Tc.env.CONVERSATION_SERVICE||Tc.env.CONVERSATION_SERVICE_URL||"https://conv-a.wbx2.com/conversation/api/v1";return e.spark.request({method:"POST",uri:r+"/users/validateAuthToken",body:{token:e.access_token},headers:{authorization:"Bearer "+e.access_token}})}).then(function(e){return e.body})},version:"1.50.15"},"downscope",[(0,Zx.oneFlight)({keyFactory:function(e){return e}})],(0,n.default)(r,"downscope"),r),d(r,"refresh",[Zx.oneFlight],(0,n.default)(r,"refresh"),r),d(r,"revoke",[Zx.oneFlight],(0,n.default)(r,"revoke"),r),r));t.default=v});r(VI);var qI=function(e){var t,r=this,n=[].slice.call(arguments);t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return r.apply(this,arguments)},cC(t,r);var i=function(){this.constructor=t};return i.prototype=r.prototype,t.prototype=new i,e&&(n.unshift(t.prototype),cC.apply(null,n)),t.__super__=r.prototype,t},KI=gw(function(e,t,r){var n=1;if(r.length){var i=m_(r,p_(KI));n|=32}return tE(e,n,t,r,i)});KI.placeholder={};var GI=KI,HI=[].slice;function WI(e,t){if(t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),t.parent&&(this.parent=t.parent),!this.mainIndex){var r=this.model&&this.model.prototype&&this.model.prototype.idAttribute;this.mainIndex=r||"id"}this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,cC({silent:!0},t))}cC(WI.prototype,Bk,{initialize:function(){},isModel:function(e){return this.model&&e instanceof this.model},add:function(e,t){return this.set(e,cC({merge:!1,add:!0,remove:!1},t))},parse:function(e,t){return e},serialize:function(){return this.map(function(e){if(e.serialize)return e.serialize();var t={};return cC(t,e),delete t.collection,t})},toJSON:function(){return this.serialize()},set:function(e,t){(t=cC({add:!0,remove:!0,merge:!0},t)).parse&&(e=this.parse(e,t));var r,n,i,a,o,s,c,u=!md(e);e=u?e?[e]:[]:e.slice();var l=t.at,f=this.comparator&&null==l&&!1!==t.sort,p="string"==typeof this.comparator?this.comparator:null,d=[],h=[],v={},m=t.add,g=t.merge,y=t.remove,b=!(f||!m||!y)&&[],w=this.model&&this.model.prototype||Object.prototype;for(s=0,c=e.length;s<c;s++){if(i=e[s]||{},this.isModel(i)?r=n=i:w.generateId?r=w.generateId(i):void 0===(r=i[this.mainIndex])&&this._isDerivedIndex(w)&&(r=w._derived[this.mainIndex].fn.call(i)),a=this.get(r))y&&(v[a.cid||a[this.mainIndex]]=!0),g&&(i=i===n?n.attributes:i,t.parse&&(i=a.parse(i,t)),a.set?(a.set(i,t),f&&!o&&a.hasChanged(p)&&(o=!0)):cC(a,i)),e[s]=a;else if(m){if(!(n=e[s]=this._prepareModel(i,t)))continue;d.push(n),this._addReference(n,t)}(n=a||n)&&(b&&(n.isNew&&n.isNew()||!n[this.mainIndex]||!v[n.cid||n[this.mainIndex]])&&b.push(n),v[n[this.mainIndex]]=!0)}if(y){for(s=0,c=this.length;s<c;s++)v[(n=this.models[s]).cid||n[this.mainIndex]]||h.push(n);for(h.length&&this.remove(h,t),s=0,c=d.length;s<c;s++)this._index(d[s])}if(d.length||b&&b.length)if(f&&(o=!0),null!=l)for(s=0,c=d.length;s<c;s++)this.models.splice(l+s,0,d[s]);else{var _=b||d;for(s=0,c=_.length;s<c;s++)this.models.push(_[s])}if(o&&this.sort({silent:!0}),!t.silent){for(s=0,c=d.length;s<c;s++)(n=d[s]).trigger?n.trigger("add",n,this,t):this.trigger("add",n,this,t);(o||b&&b.length)&&this.trigger("sort",this,t)}return u?e[0]:e},get:function(e,t){if(null!=e){var r=this.mainIndex,n=this._indexes[t||r];return n&&(n[e]||void 0!==e[r]&&n[e[r]])||this._indexes.cid[e]||this._indexes.cid[e.cid]}},at:function(e){return this.models[e]},remove:function(e,t){var r,n,i,a,o=!md(e);for(t||(t={}),r=0,n=(e=o?[e]:HI.call(e)).length;r<n;r++)(i=e[r]=this.get(e[r]))&&(this._deIndex(i),a=this.models.indexOf(i),this.models.splice(a,1),t.silent||(t.index=a,i.trigger?i.trigger("remove",i,this,t):this.trigger("remove",i,this,t)),this._removeReference(i,t));return o?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,n=this.models.length;r<n;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,cC({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},sort:function(e){var t=this;if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),"string"==typeof this.comparator?this.models.sort(function(e,r){return e.get?(e=e.get(t.comparator),r=r.get(t.comparator)):(e=e[t.comparator],r=r[t.comparator]),e>r||void 0===e?1:e<r||void 0===r?-1:0}):1===this.comparator.length?this.models.sort(function(e,r){return(e=t.comparator(e))>(r=t.comparator(r))||void 0===e?1:e<r||void 0===r?-1:0}):this.models.sort(GI(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},_reset:function(){var e=HI.call(this.indexes||[]),t=0;e.push(this.mainIndex),e.push("cid");var r=e.length;for(this.models=[],this._indexes={};t<r;t++)this._indexes[e[t]]={}},_prepareModel:function(e,t){if(!this.model)return e;if(this.isModel(e))return e.collection||(e.collection=this),e;(t=t?cC({},t):{}).collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_deIndex:function(e,t,r){var n;if(void 0===t)for(var i in this._indexes)n=e.hasOwnProperty(i)?e[i]:e.get&&e.get(i),delete this._indexes[i][n];else{if(void 0===this._indexes[t])throw new Error("Given attribute is not an index");delete this._indexes[t][r]}},_index:function(e,t){var r;if(void 0===t)for(var n in this._indexes)null!=(r=e.hasOwnProperty(n)?e[n]:e.get&&e.get(n))&&(this._indexes[n][r]=e);else{if(void 0===this._indexes[t])throw new Error("Given attribute is not an index");(r=e[t]||e.get&&e.get(t))&&(this._indexes[t][r]=e)}},_isDerivedIndex:function(e){return!(!e||"object"!=typeof e._derived)&&Object.keys(e._derived).indexOf(this.mainIndex)>=0},_addReference:function(e,t){this._index(e),e.collection||(e.collection=this),e.on&&e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,this._deIndex(e),e.off&&e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,r,n){var i=e.split(":")[0],a=e.split(":")[1];("add"!==i&&"remove"!==i||r===this)&&("destroy"===i&&this.remove(t,n),t&&"change"===i&&a&&this._indexes[a]&&(this._deIndex(t,a,t.previousAttributes()[a]),this._index(t,a)),this.trigger.apply(this,arguments))}}),Object.defineProperties(WI.prototype,{length:{get:function(){return this.models.length}},isCollection:{get:function(){return!0}}});["indexOf","lastIndexOf","every","some","forEach","map","filter","reduce","reduceRight"].forEach(function(e){WI.prototype[e]=function(){return this.models[e].apply(this.models,arguments)}}),WI.prototype.each=WI.prototype.forEach,WI.extend=qI;var $I=WI,YI=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i($I),n=i(VI);function i(e){return e&&e.__esModule?e:{default:e}}var a=r.default.extend({mainIndex:"scope",model:n.default,namespace:"Credentials"});t.default=a});r(YI);var JI=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,a,o,s,c,u=k(su),l=k(wf),f=k(If),p=k(eC),d=k(Cf),h=k(Rf),v=k(lu),m=k(hm),g=k(up),y=k(gm),b=k(rC),w=k(Cm),_=k(wy),E=k(pT),S=k(mT),x=k(VI),C=k(YI);function k(e){return e&&e.__esModule?e:{default:e}}function T(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var A=E.default.extend((r=(0,Zx.oneFlight)({keyFactory:function(e){return e}}),n=(0,sT.waitForValue)("@"),i=(0,sT.persist)("@"),a=(0,sT.waitForValue)("@"),o=(0,Zx.whileInFlight)("isRefreshing"),s=(0,sT.waitForValue)("@"),T(c={collections:{userTokens:C.default},dataTypes:{token:(0,Zx.makeStateDataType)(x.default,"token").dataType},derived:{canAuthorize:{deps:["supertoken","supertoken.canAuthorize","canRefresh"],fn:function(){return Boolean(this.supertoken&&this.supertoken.canAuthorize||this.canRefresh)}},canRefresh:{deps:["supertoken","supertoken.canRefresh"],fn:function(){return!!this.config.jwtRefreshCallback||Boolean(this.supertoken&&this.supertoken.canRefresh)}}},props:{supertoken:(0,Zx.makeStateDataType)(x.default,"token").prop},namespace:"Credentials",session:{isRefreshing:{default:!1,type:"boolean"},ready:{default:!1,type:"boolean"},refreshTimer:{default:void 0,type:"any"}},buildLoginUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clientType:"public"};if(e.state&&!(0,g.default)(e.state))throw new Error("if specified, `options.state` must be an object");return e.client_id=this.config.client_id,e.redirect_uri=this.config.redirect_uri,e.scope=this.config.scope,(e=(0,y.default)(e)).response_type||(e.response_type="public"===e.clientType?"token":"code"),(0,v.default)(e,"clientType"),e.state&&((0,m.default)(e.state)?delete e.state:e.state=Zx.base64.toBase64Url((0,h.default)(e.state))),this.config.authorizeUrl+"?"+w.default.stringify(e)},buildLogoutUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.config.logoutUrl+"?"+w.default.stringify((0,d.default)({cisService:this.config.service,goto:this.config.redirect_uri},e))},calcRefreshTimeout:function(e){return Math.floor((Math.floor(4*Math.random())+6)/10*e)},constructor:function(){var e=this;this._dataTypes=(0,y.default)(this._dataTypes),(0,p.default)(this._dataTypes).forEach(function(t){e._dataTypes[t].set&&(e._dataTypes[t].set=e._dataTypes[t].set.bind(e))});for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(0,f.default)(E.default,this,r)},downscope:function(e){var t=this;return this.supertoken.downscope(e).catch(function(r){return t.logger.error("credentials: failed to downscope supertoken to "+e,r),t.logger.error("credentials: falling back to supertoken for "+e),l.default.resolve(new x.default((0,d.default)({scope:e},t.supertoken.serialize())),{parent:t})})},getClientToken:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.logger.info("credentials: requesting client credentials grant"),(t=t||{}).scope=t.scope||"webexsquare:admin",this.spark.request({method:"POST",uri:this.config.tokenUrl,form:{grant_type:"client_credentials",scope:t.scope,self_contained_token:!0},auth:{user:this.config.client_id,pass:this.config.client_secret,sendImmediately:!0},shouldRefreshAccessToken:!1}).then(function(t){return new x.default(t.body,{parent:e})}).catch(function(e){if(400!==e.statusCode)return l.default.reject(e);var t=S.default.select(e.body.error);return l.default.reject(new t(e._res||e))})},getUserToken:function(e){var t=this;return l.default.resolve(!this.isRefreshing||new l.default(function(e){t.logger.info("credentials: token refresh inflight; delaying getUserToken until refresh completes"),t.once("change:isRefreshing",function(){t.logger.info("credentials: token refresh complete; reinvoking getUserToken"),e()})})).then(function(){if(!t.canAuthorize)return t.logger.info("credentials: cannot produce an access token from current state"),l.default.reject(new Error("Current state cannot produce an access token"));if(e||(e=(0,gT.filterScope)("spark:kms",t.config.scope)),(e=(0,gT.sortScope)(e))===(0,gT.sortScope)(t.config.scope))return l.default.resolve(t.supertoken);var r=t.userTokens.get(e);return r&&r.access_token?l.default.resolve(r):t.downscope(e).then((0,Zx.tap)(function(e){return t.userTokens.add(e)}))})},initialize:function(e,t){var r=this;e&&("string"==typeof e&&(this.supertoken=e),e.access_token&&(this.supertoken=e),e.authorization&&(e.authorization.supertoken?this.supertoken=e.authorization.supertoken:this.supertoken=e.authorization),this.supertoken&&this.supertoken.expires&&this.scheduleRefresh(this.supertoken.expires)),(0,f.default)(E.default.prototype.initialize,this,[e,t]),this.listenToOnce(this.parent,"change:config",function(){if(r.config.authorizationString){var e=_.default.parse(r.config.authorizationString,!0);r.config.client_id=e.query.client_id,r.config.redirect_uri=e.query.redirect_uri,r.config.scope=e.query.scope,r.config.authorizeUrl=e.href.substr(0,e.href.indexOf("?"))}}),this.spark.once("loaded",function(){r.ready=!0})},invalidate:function(){this.logger.info("credentials: invalidating tokens"),this.refreshTimer&&(clearTimeout(this.refreshTimer),this.unset("refreshTimer"));try{this.unset("supertoken")}catch(e){this.logger.warn("credentials: failed to clear supertoken",e)}for(;this.userTokens.models.length;)try{this.userTokens.remove(this.userTokens.models[0])}catch(e){this.logger.warn("credentials: failed to remove user token",e)}return this.logger.info("credentials: finished removing tokens"),l.default.resolve()},refresh:function(){var e=this;this.logger.info("credentials: refresh requested");var t=this.supertoken,r=(0,b.default)(this.userTokens.models);return this.config.jwtRefreshCallback?this.config.jwtRefreshCallback(this.spark).then(function(t){return e.spark.authorization.requestAccessTokenFromJwt({jwt:t})}):t.refresh().then(function(t){return e.refreshTimer&&(clearTimeout(e.refreshTimer),e.unset("refreshTimer")),e.supertoken=t,l.default.all(r.map(function(t){return e.downscope(t.scope).then(function(r){return e.logger.info("credentials: revoking token for "+t.scope),t.revoke().catch(function(t){e.logger.warn("credentials: failed to revoke user token",t)}).then(function(){e.userTokens.remove(t.scope),e.userTokens.add(r)})})}))}).then(function(){e.scheduleRefresh(e.supertoken.expires)}).catch(function(t){if(t instanceof S.default.InvalidRequestError){for(e.unset("supertoken");e.userTokens.models.length;)try{e.userTokens.remove(e.userTokens.models[0])}catch(t){e.logger.warn("credentials: failed to remove user token",t)}e.spark.trigger("client:InvalidRequestError")}return l.default.reject(t)})},scheduleRefresh:function(e){var t=this,r=e-Date.now();if(r>0){var n=this.calcRefreshTimeout(r);this.refreshTimer=(0,nC.safeSetTimeout)(function(){return t.refresh()},n)}else this.refresh()},version:"1.50.15"},"getUserToken",[r,n],(0,u.default)(c,"getUserToken"),c),T(c,"initialize",[i],(0,u.default)(c,"initialize"),c),T(c,"invalidate",[Zx.oneFlight,a],(0,u.default)(c,"invalidate"),c),T(c,"refresh",[Zx.oneFlight,o,s],(0,u.default)(c,"refresh"),c),c));t.default=A});r(JI);var QI=function(e,t){return null==e||Lv(e,t)};var ZI=function(e,t,r){return null==e?e:xT(e,t,r)};var XI=function(e,t,r){(void 0===r||Nf(e[t],r))&&(void 0!==r||t in e)||id(e,t,r)};var eP=function(e,t){if("__proto__"!=t)return e[t]};var tP=function(e){return sd(e,Kd(e))};var rP=function(e,t,r,n,i,a,o){var s=eP(e,r),c=eP(t,r),u=o.get(c);if(u)XI(e,r,u);else{var l=a?a(s,c,r+"",e,t,o):void 0,f=void 0===l;if(f){var p=md(c),d=!p&&yd(c),h=!p&&!d&&Id(c);l=c,p||d||h?md(s)?l=s:Ek(s)?l=Wd(s):d?(f=!1,l=Hd(c,!0)):h?(f=!1,l=Ah(c,!0)):l=[]:Hv(c)||vd(c)?(l=s,vd(s)?l=tP(s):up(s)&&!vp(s)||(l=Qh(c))):f=!1}f&&(o.set(c,l),i(l,c,n,a,o),o.delete(c)),XI(e,r,l)}};var nP=function e(t,r,n,i,a){t!==r&&vC(r,function(o,s){if(up(o))a||(a=new td),rP(t,r,s,n,e,i,a);else{var c=i?i(eP(t,s),o,s+"",t,r,a):void 0;void 0===c&&(c=o),XI(t,s,c)}},Kd)},iP=oC(function(e,t,r){nP(e,t,r)});for(var aP=function(e,t,r){var n=null==e?void 0:Bv(e,t);return void 0===n?r:n},oP=n(function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}}),sP=[],cP=0;cP<256;++cP)sP[cP]=(cP+256).toString(16).substr(1);var uP,lP,fP=function(e,t){var r=t||0,n=sP;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")},pP=0,dP=0;var hP=function(e,t,r){var n=t&&r||0,i=t||[],a=(e=e||{}).node||uP,o=void 0!==e.clockseq?e.clockseq:lP;if(null==a||null==o){var s=oP();null==a&&(a=uP=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==o&&(o=lP=16383&(s[6]<<8|s[7]))}var c=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:dP+1,l=c-pP+(u-dP)/1e4;if(l<0&&void 0===e.clockseq&&(o=o+1&16383),(l<0||c>pP)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");pP=c,dP=u,lP=o;var f=(1e4*(268435455&(c+=122192928e5))+u)%4294967296;i[n++]=f>>>24&255,i[n++]=f>>>16&255,i[n++]=f>>>8&255,i[n++]=255&f;var p=c/4294967296*1e4&268435455;i[n++]=p>>>8&255,i[n++]=255&p,i[n++]=p>>>24&15|16,i[n++]=p>>>16&255,i[n++]=o>>>8|128,i[n++]=255&o;for(var d=0;d<6;++d)i[n+d]=a[d];return t||fP(i)};var vP=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||oP)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;++a)t[n+a]=i[a];return t||fP(i)},mP=vP;mP.v1=hP,mP.v4=vP;var gP=mP,yP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(wf),n=u(lu),i=u(aS),a=u(Gy),o=u(Yy),s=u(oS),c=u(sS);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){var t=this;return e.headers=e.headers||{},"authorization"in e.headers||"auth"in e?(e.headers.authorization||(0,n.default)(e.headers,"authorization"),r.default.resolve(e)):this.requiresCredentials(e).then(function(r){return r?t.spark.credentials.getUserToken().then(function(t){return e.headers.authorization=t.toString(),e}):e})}},{key:"requiresCredentials",value:function(e){var t=this;return e.uri&&(e.uri.includes(this.spark.config.device.preDiscoveryServices.hydra)||e.uri.includes(this.spark.config.device.preDiscoveryServices.hydraServiceUrl))?r.default.resolve(!0):this.spark.internal.device?this.spark.internal.device.isSpecificService("hydra",e.uri).then(function(n){return!!n||(e.service?t.spark.internal.device.isService(e.service):!!e.uri&&t.spark.internal.device.isServiceUrl(e.uri).then(function(n){if(n)return!0;if((void 0===e.addAuthHeader&&t.spark.config.device.validateDomains&&(e.addAuthHeader=!0),e.addAuthHeader)&&t.spark.config.device.whitelistedServiceDomains.filter(function(t){return e.uri.includes(t)}).length)return r.default.resolve(!0);return!1}))}):r.default.resolve(!1)}},{key:"onResponseError",value:function(e,t){var i=this;return this.shouldAttemptReauth(t,e).then(function(a){return a&&(i.spark.logger.info("auth: received 401, attempting to reauthenticate"),t.options.headers&&(0,n.default)(t.options.headers,"authorization"),i.spark.credentials.canRefresh)?i.spark.credentials.refresh().then(function(){return i.replay(e)}):r.default.reject(t)})}},{key:"replay",value:function(e){return e.replayCount?e.replayCount+=1:e.replayCount=1,e.replayCount>this.spark.config.maxAuthenticationReplays?(this.spark.logger.error("auth: failed after "+this.spark.config.maxAuthenticationReplays+" replay attempts"),r.default.reject(new Error("Failed after "+this.spark.config.maxAuthenticationReplays+" replay attempts"))):(this.spark.logger.info("auth: replaying request "+e.replayCount+" time"),this.spark.request(e))}},{key:"shouldAttemptReauth",value:function(e,t){return t&&!1===t.shouldRefreshAccessToken?r.default.resolve(!1):401===e.statusCode?r.default.resolve(!0):r.default.resolve(!1)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(UI.Interceptor);t.default=l});r(yP);var bP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(wf),n=c(aS),i=c(Gy),a=c(Yy),o=c(oS),s=c(sS);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){return e.$timings=e.$timings||{},e.$timings.networkStart=Date.now(),e}},{key:"onResponse",value:function(e,t){return e.$timings.networkEnd=Date.now(),t}},{key:"onResponseError",value:function(e,t){return e.$timings.networkEnd=Date.now(),r.default.reject(t)}}],[{key:"create",value:function(e){return new t(this,e)}}]),t}(UI.Interceptor);t.default=u});r(bP);var wP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(wf),n=c(aS),i=c(Gy),a=c(Yy),o=c(oS),s=c(sS);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){return e.noTransform?e:this.spark.transform("outbound",e)}},{key:"onResponse",value:function(e,t){return this.spark.transform("inbound",t)}},{key:"onResponseError",value:function(e,t){return this.spark.transform("inbound",t).then(function(e){return r.default.reject(e||t)})}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(UI.Interceptor);t.default=u});r(wP);var _P=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(wf),n=l(lu),i=l(aS),a=l(Gy),o=l(Yy),s=l(oS),c=l(sS),u=l(rC);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){return e.uri.includes(this.spark.config.credentials.samlUrl)||e.uri.includes(this.spark.config.credentials.tokenUrl)||e.uri.includes(this.spark.config.credentials.authorizeUrl)?e:"cisco-no-http-redirect"in e.headers?(e.headers["cisco-no-http-redirect"]||(0,n.default)(e.headers,"cisco-no-http-redirect"),e):(e.headers["cisco-no-http-redirect"]=!0,e.$redirectCount=e.$redirectCount||0,e)}},{key:"onResponse",value:function(e,t){if(t.headers&&t.headers["cisco-location"])return(e=(0,u.default)(e)).uri=t.headers["cisco-location"],e.$redirectCount+=1,e.$redirectCount>this.spark.config.maxAppLevelRedirects?r.default.reject(new Error("Maximum redirects exceeded")):this.spark.request(e);if(t.headers&&t.body&&2000002===t.body.errorCode&&t.body.location){if(e=(0,u.default)(e),t.options&&t.options.qs){var n=t.body.location.split("?");e.uri=n[0]}else e.uri=t.body.location;return e.$redirectCount+=1,e.$redirectCount>this.spark.config.maxLocusRedirects?r.default.reject(new Error("Maximum redirects exceeded")):this.spark.request(e)}return t}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(UI.Interceptor);t.default=f});r(_P);var EP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(wf),n=u(aS),i=u(Gy),a=u(Yy),o=u(oS),s=u(sS),c=u(aP);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){var t=(0,c.default)(this,"spark.logger",console);try{this.spark.trigger("request:start",e)}catch(e){t.warn("event handler for request:start failed ",e)}return r.default.resolve(e)}},{key:"onRequestError",value:function(e,t){var n=(0,c.default)(this,"spark.logger",console);try{this.spark.trigger("request:end",e,t),this.spark.trigger("request:failure",e,t)}catch(e){n.warn("event handler for request:end failed ",e)}return r.default.reject(t)}},{key:"onResponse",value:function(e,t){var n=(0,c.default)(this,"spark.logger",console);try{this.spark.trigger("request:success",t.options,t)}catch(e){n.warn("event handler for request:success failed ",e)}return r.default.resolve(t)}},{key:"onResponseError",value:function(e,t){var n=(0,c.default)(this,"spark.logger",console);try{this.spark.trigger("request:end",e,t),this.spark.trigger("request:failure",e,t)}catch(e){n.warn("event handler for request:failure failed ",e)}return r.default.reject(t)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(UI.Interceptor);t.default=l});r(EP);var SP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=h(wf),n=h(aS),i=h(Gy),a=h(Yy),o=h(oS),s=h(sS),c=h(lm),u=h(bC),l=h(md),f=h(mk),p=h(aP),d=h(by);function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){var t=(0,p.default)(this,"spark.logger",console);t.info("/**********************************************************************\\ "),t.info("Request:",e.method||"GET",e.uri),t.info("WEBEX_TRACKINGID: ",(0,p.default)(e,"headers.trackingid")),(0,f.default)(e,"headers.x-trans-id")&&t.info("X-Trans-ID: ",(0,p.default)(e,"headers.x-trans-id")),(0,f.default)(this,"spark.internal.device.userId")&&t.info("User ID:",(0,p.default)(this,"spark.internal.device.userId"));var n=new Date;if(Tc.env.ENABLE_VERBOSE_NETWORK_LOGGING){t.info("timestamp (start): ",n.getTime(),n.toISOString());try{e.body&&e.body.length&&!(0,l.default)(e.body)&&!(0,u.default)(e.body)?t.info("Request Options:",d.default.inspect((0,c.default)(e,"body"),{depth:null})):t.info("Request Options:",d.default.inspect(e,{depth:null}))}catch(e){t.warn("Could not stringify request options:",e)}}return r.default.resolve(e)}},{key:"onRequestError",value:function(e,t){this.onRequest(e);var n=(0,p.default)(this,"spark.logger",console);return n.error("Request Failed: ",t.stack),n.info("\\**********************************************************************/"),r.default.reject(t)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(UI.Interceptor);t.default=v});r(SP);var xP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(wf),n=c(aS),i=c(Gy),a=c(Yy),o=c(oS),s=c(sS);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){return e.$timings=e.$timings||{},e.$timings.requestStart=Date.now(),e}},{key:"onRequestError",value:function(e){return e.$timings.requestEnd=e.$timings.requestFail=Date.now(),r.default.reject(e)}},{key:"onResponse",value:function(e,t){return e.$timings.requestEnd=Date.now(),r.default.resolve(t)}},{key:"onResponseError",value:function(e,t){return e.$timings.requestEnd=e.$timings.requestFail=Date.now(),r.default.reject(t)}}],[{key:"create",value:function(e){return new t(this,e)}}]),t}(UI.Interceptor);t.default=u});r(xP);var CP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=p(wf),n=p(sw),i=p(aS),a=p(Gy),o=p(Yy),s=p(oS),c=p(sS),u=p(lm),l=p(aP),f=p(by);function p(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,o.default)(t,[{key:"onResponse",value:function(e,t){var r=new Date;this.printResponseHeader(e,t);var i=(0,l.default)(this,"spark.logger",console);if(Tc.env.ENABLE_VERBOSE_NETWORK_LOGGING)if(i.info("timestamp (end): ",r.getTime(),r.toISOString()),"string"==typeof t.body||Ug(t.body))i.info("Response: ","Not printed, it`s probably a file");else if("object"===(0,n.default)(t.body))try{i.info("Response: ",f.default.inspect((0,u.default)(t.body,"features"),{depth:null}))}catch(e){i.info("Response: ","[Not Serializable]",e)}return i.info("\\**********************************************************************/"),t}},{key:"onResponseError",value:function(e,t){var n=new Date;this.printResponseHeader(e,t);var i=(0,l.default)(this,"spark.logger",console);if(Tc.env.ENABLE_VERBOSE_NETWORK_LOGGING){i.info("timestamp (end): ",n.getTime(),n.toISOString());try{i.error("Response: ",f.default.inspect(t.body,{depth:null}))}catch(e){i.error("Response: ",t.body)}}return i.info("\\**********************************************************************/"),r.default.reject(t)}},{key:"printResponseHeader",value:function(e,t){var r=(0,l.default)(this,"spark.logger",console);r.info("Status Code:",t.statusCode),r.info("WEBEX_TRACKINGID:",(0,l.default)(e,"headers.trackingid")||(0,l.default)(t,"headers.trackingid")),r.info("Network duration:",e.$timings.networkEnd-e.$timings.networkStart),r.info("Processing duration:",e.$timings.requestEnd-e.$timings.requestStart)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(UI.Interceptor);t.default=d});r(CP);var kP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(lu),n=c(aS),i=c(Gy),a=c(Yy),o=c(oS),s=c(sS);function c(e){return e&&e.__esModule?e:{default:e}}var u=new(c(mb).default),l=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){if(e.headers=e.headers||{},"trackingid"in e.headers)return e.headers.trackingid||(0,r.default)(e.headers,"trackingid"),e;if(this.requiresTrackingId(e)&&(e.headers.trackingid=this.spark.sessionId+"_"+this.sequence),e.headers.trackingid&&e.replayCount){var t=e.headers.trackingid.split("+");t[1]=e.replayCount,e.headers.trackingid=t.join("+")}return e}},{key:"requiresTrackingId",value:function(e){return!e.headers.trackingid}},{key:"sequence",get:function(){var e=u.get(this)||0;return e+=1,u.set(this,e),e}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(UI.Interceptor);t.default=l});r(kP);var TP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(lu),n=l(aS),i=l(Gy),a=l(Yy),o=l(oS),s=l(sS),c=l(mb),u=l(aP);function l(e){return e&&e.__esModule?e:{default:e}}var f=new c.default,p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t);var r=(0,u.default)(e,"spark.config.appName"),a=(0,u.default)(e,"spark.config.appVersion"),s=(0,u.default)(e,"spark.ciscospark",!1)?"ciscospark":"spark-js-sdk",c=(0,u.default)(e,"spark.version","development"),l=(0,o.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return r&&a?f.set(l,r+"/"+a+" ("+(Zx.inBrowser?"web":"node")+") "+s+"/"+c):f.set(l,s+"/"+c+" ("+(Zx.inBrowser?"web":"node")+")"),l}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){return e.headers=e.headers||{},e.uri&&(e.uri.includes(this.spark.config.credentials.samlUrl)||e.uri.includes(this.spark.config.credentials.tokenUrl)||e.uri.includes(this.spark.config.credentials.authorizeUrl))?e:"spark-user-agent"in e.headers?(e.headers["spark-user-agent"]||(0,r.default)(e.headers,"spark-user-agent"),e):(e.headers["spark-user-agent"]=f.get(this),e)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(UI.Interceptor);t.default=p});r(TP);var AP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(wf),n=u(vw),i=u(aS),a=u(Gy),o=u(oS),s=u(Yy),c=u(sS);function u(e){return e&&e.__esModule?e:{default:e}}var l=new(u(mb).default),f=/.*(idbroker|identity)(bts)?.webex.com\/([^\/]+)/,p=function(e){function t(){var e;(0,a.default)(this,t);for(var r=arguments.length,s=Array(r),c=0;c<r;c++)s[c]=arguments[c];var u=(0,o.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(s)));return l.set(u,new n.default),u}return(0,c.default)(t,e),(0,s.default)(t,null,[{key:"create",value:function(){return new t({spark:this})}}]),(0,s.default)(t,[{key:"onRequest",value:function(e){return this.isRateLimited(e.uri)?r.default.reject(new Error("API rate limited "+e.uri)):r.default.resolve(e)}},{key:"onResponseError",value:function(e,t){return 429===t.statusCode&&(e.uri.includes("idbroker")||e.uri.includes("identity"))&&this.setRateLimitExpiry(e.uri,this.extractRetryAfterTime(e)),r.default.reject(t)}},{key:"extractRetryAfterTime",value:function(e){var t=e.headers["retry-after"]||null;return null===t||t<=0?6e4:t>3600?36e5:1e3*t}},{key:"setRateLimitExpiry",value:function(e,t){var r=this.getApiName(e);if(!r)return!1;var n=(new Date).getTime()+t;return l.get(this).set(r,n)}},{key:"getRateLimitStatus",value:function(e){var t=this.getApiName(e);if(!t)return!1;var r=(new Date).getTime(),n=l.get(this);return void 0!==n.get(t)&&r<n.get(t)}},{key:"getApiName",value:function(e){if(!e)return null;var t=e.match(f);return t?t[2]:null}},{key:"isRateLimited",value:function(e){return!(!e||!e.includes("idbroker")&&!e.includes("identity"))&&this.getRateLimitStatus(e)}}]),t}(UI.Interceptor);t.default=p});r(AP);var IP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=Wk)&&r.__esModule?r:{default:r};var i=Tc.env.IDBROKER_BASE_URL||"https://idbroker.webex.com",a=n.default.extend({props:{url:["string",!1,i],defaultUrl:["string",!1,i]}}),o=n.default.extend({props:{url:["string",!1,Tc.env.IDENTITY_BASE_URL],defaultUrl:["string",!1,Tc.env.IDENTITY_BASE_URL]}}),s=n.default.extend({extraProperties:"allow",children:{idbroker:a,identity:o},props:{authorizationString:["string",!1,Tc.env.CISCOSPARK_AUTHORIZATION_STRING||Tc.env.AUTHORIZATION_STRING],client_id:["string",!1,Tc.env.CISCOSPARK_CLIENT_ID||Tc.env.COMMON_IDENTITY_CLIENT_ID||Tc.env.CLIENT_ID],client_secret:["string",!1,Tc.env.CISCOSPARK_CLIENT_SECRET||Tc.env.COMMON_IDENTITY_CLIENT_SECRET||Tc.env.CLIENT_SECRET],redirect_uri:["string",!1,Tc.env.CISCOSPARK_REDIRECT_URI||Tc.env.COMMON_IDENTITY_REDIRECT_URI||Tc.env.REDIRECT_URI],scope:["string",!1,Tc.env.CISCOSPARK_SCOPE||Tc.env.CISCOSPARK_SCOPES||Tc.env.COMMON_IDENTITY_SCOPE||Tc.env.SCOPE],cisService:["string",!1,"spark"]},derived:{activationUrl:{deps:["idbroker.url"],fn:function(){return(this.idbroker.url||"https://idbroker.webex.com")+"/idb/token/v1/actions/UserActivation/invoke"}},authorizeUrl:{deps:["idbroker.url"],fn:function(){return Tc.env.AUTHORIZE_URL||this.idbroker.url+"/idb/oauth2/v1/authorize"}},tokenUrl:{deps:["idbroker.url"],fn:function(){return Tc.env.TOKEN_URL||this.idbroker.url+"/idb/oauth2/v1/access_token"}},revokeUrl:{deps:["idbroker.url"],fn:function(){return Tc.env.REVOKE_URL||this.idbroker.url+"/idb/oauth2/v1/revoke"}},logoutUrl:{deps:["idbroker.url"],fn:function(){return this.idbroker.url+"/idb/oauth2/v1/logout"}},setPasswordUrl:{deps:["identity.url"],fn:function(){return(this.identity.url||"https://identity.webex.com")+"/identity/scim/v1/Users"}}}});t.default=s});r(IP);var PP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=IP)&&r.__esModule?r:{default:r};t.default={maxAppLevelRedirects:10,maxLocusRedirects:5,maxAuthenticationReplays:1,maxReconnectAttempts:1,onBeforeLogout:[],trackingIdPrefix:"spark-js-sdk",trackingIdSuffix:"",AlternateLogger:void 0,credentials:new n.default,device:{preDiscoveryServices:{hydra:Tc.env.HYDRA_SERVICE_URL||"https://api.ciscospark.com/v1",hydraServiceUrl:Tc.env.HYDRA_SERVICE_URL||"https://api.ciscospark.com/v1"},validateDomains:"true"===Tc.env.VALIDATE_DOMAINS||!1,whitelistedServiceDomains:["webexkubed.com","wbx3.com","wbx2.com","ciscospark.com","webex.com"]},payloadTransformer:{predicates:[],transforms:[]},storage:{boundedAdapter:fT.MemoryStoreAdapter,unboundedAdapter:fT.MemoryStoreAdapter}}});r(PP);var OP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(OT),n=l(eC),i=l(Sk),a=l(iP),o=l(vp),s=l(md),c=l(mk),u=l(aP);function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){(e._derived[t]={fn:(0,o.default)(n)?n:n.fn,cache:!1!==n.cache,depList:n.deps||[]}).depList.forEach(function(r){e._deps[r]=(0,i.default)(e._deps[r]||[],[t])}),(0,r.default)(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError("`"+t+"` is a derived property, it can't be set directly.")}})}t.default=function(e,t,r){return e.registerPlugin=function(i,o){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if((!e.prototype._children[i]||l.replace)&&(e.prototype._children[i]=o,l.proxies&&l.proxies.forEach(function(t){f(e.prototype,t,{deps:[i+"."+t],fn:function(){return this[i][t]}})}),l.interceptors&&(0,n.default)(l.interceptors).forEach(function(e){r[e]=l.interceptors[e]}),l.config&&(0,a.default)(t,l.config),(0,c.default)(l,"payloadTransformer.predicates")&&(t.payloadTransformer.predicates=t.payloadTransformer.predicates.concat((0,u.default)(l,"payloadTransformer.predicates"))),(0,c.default)(l,"payloadTransformer.transforms")&&(t.payloadTransformer.transforms=t.payloadTransformer.transforms.concat((0,u.default)(l,"payloadTransformer.transforms"))),l.onBeforeLogout&&(t.onBeforeLogout=t.onBeforeLogout||[],((0,s.default)(l.onBeforeLogout)?l.onBeforeLogout:[l.onBeforeLogout]).forEach(function(e){return t.onBeforeLogout.push({plugin:i,fn:e})})),o.prototype._definition&&o.prototype._definition.ready)){var p=e.prototype._derived.ready,d=p.fn,h={deps:p.depList.concat(i+".ready"),fn:d};f(e.prototype,"ready",h)}},e}});r(OP);var RP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(OT),n=l(eC),i=l(Sk),a=l(iP),o=l(vp),s=l(md),c=l(mk),u=l(aP);function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,l){return e.registerPlugin=function(f,p){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.prototype._children[f]||d.replace){if(e.prototype._children[f]=p,d.proxies)throw new Error("Proxies are not currently supported for private plugins");if(d.interceptors&&(0,n.default)(d.interceptors).forEach(function(e){l[e]=d.interceptors[e]}),d.config&&(0,a.default)(t,d.config),(0,c.default)(d,"payloadTransformer.predicates")&&(t.payloadTransformer.predicates=t.payloadTransformer.predicates.concat((0,u.default)(d,"payloadTransformer.predicates"))),(0,c.default)(d,"payloadTransformer.transforms")&&(t.payloadTransformer.transforms=t.payloadTransformer.transforms.concat((0,u.default)(d,"payloadTransformer.transforms"))),d.onBeforeLogout&&(t.onBeforeLogout=t.onBeforeLogout||[],((0,s.default)(d.onBeforeLogout)?d.onBeforeLogout:[d.onBeforeLogout]).forEach(function(e){return t.onBeforeLogout.push({plugin:f,fn:e})})),p.prototype._definition&&p.prototype._definition.ready){var h=e.prototype._derived.ready,v=h.fn,m={deps:h.depList.concat(f+".ready"),fn:v};!function(e,t,n){(e._derived[t]={fn:(0,o.default)(n)?n:n.fn,cache:!1!==n.cache,depList:n.deps||[]}).depList.forEach(function(r){e._deps[r]=(0,i.default)(e._deps[r]||[],[t])}),(0,r.default)(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError("`"+t+"` is a derived property, it can't be set directly.")}})}(e.prototype,"ready",m)}}},e}});r(RP);var jP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(eC),n=a(Wk),i=a(by);function a(e){return e&&e.__esModule?e:{default:e}}var o=n.default.extend({derived:{ready:{deps:[],fn:function(){var e=this;return(0,r.default)(this._children).reduce(function(t,r){return t&&e[r]&&!1!==e[r].ready},!0)}}},inspect:function(e){return i.default.inspect(this.serialize({props:!0,session:!0,derived:!0}),{depth:e})}});t.default=o});r(jP);var MP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=L(su),i=L(lu),a=L(Cf),o=L(Yk),s=L(wf),c=L(eC),u=L(If),l=L(QI),f=L(ZI),p=L(lm),d=L(iP),h=L(jv),v=L(bC),m=L(vp),g=L(mk),y=L(aP),b=L(pE);t.registerPlugin=function(e,t,r){Y.registerPlugin(e,t,r)},t.registerInternalPlugin=function(e,t,r){F.default.registerPlugin(e,t,r)};var w=L(by),_=L(Wk),E=L(gP),S=L(yP),x=L(bP),C=L(wP),k=L(_P),T=L(EP),A=L(SP),I=L(xP),P=L(CP),O=L(zI),R=L(kP),j=L(TP),M=L(AP),N=L(PP),B=L(OP),D=L(RP),F=L(jP);function L(e){return e&&e.__esModule?e:{default:e}}var U,z,V,q,K,G,H={SparkTrackingIdInterceptor:R.default.create,RequestEventInterceptor:T.default.create,RateLimitInterceptor:M.default.create,RequestLoggerInterceptor:Tc.env.ENABLE_NETWORK_LOGGING||Tc.env.ENABLE_VERBOSE_NETWORK_LOGGING?A.default.create:void 0,ResponseLoggerInterceptor:Tc.env.ENABLE_NETWORK_LOGGING||Tc.env.ENABLE_VERBOSE_NETWORK_LOGGING?P.default.create:void 0,RequestTimingInterceptor:I.default.create,UrlInterceptor:void 0,SparkUserAgentInterceptor:j.default.create,AuthInterceptor:S.default.create,KmsDryErrorInterceptor:void 0,PayloadTransformerInterceptor:C.default.create,ConversationInterceptor:void 0,RedirectInterceptor:k.default.create,HttpStatusInterceptor:function(){return UI.HttpStatusInterceptor.create({error:O.default})},NetworkTimingInterceptor:x.default.create},W=["ResponseLoggerInterceptor","RequestTimingInterceptor","RequestEventInterceptor","SparkTrackingIdInterceptor","RateLimitInterceptor"],$=["HttpStatusInterceptor","NetworkTimingInterceptor","RequestLoggerInterceptor","RateLimitInterceptor"],Y=_.default.extend((r={version:"1.50.15",children:{internal:F.default},constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return"string"==typeof e?e={credentials:{supertoken:{access_token:e}}}:(["credentials.authorization","authorization","credentials.supertoken.supertoken","supertoken","access_token","credentials.authorization.supertoken"].forEach(function(t){var r=(0,y.default)(e,t);r&&((0,l.default)(e,t),(0,f.default)(e,"credentials.supertoken",r))}),["credentials","credentials.authorization"].forEach(function(t){var r=(0,y.default)(e,t);"string"==typeof r&&((0,l.default)(e,t),(0,f.default)(e,"credentials.supertoken",r))}),"string"==typeof(0,y.default)(e,"credentials.access_token")&&((0,f.default)(e,"credentials.access_token",this.bearerValidator((0,y.default)(e,"credentials.access_token").trim())),(0,f.default)(e,"credentials.supertoken",e.credentials))),(0,u.default)(_.default,this,[e,t])},derived:{boundedStorage:{deps:[],fn:function(){return(0,fT.makeSparkStore)("bounded",this)}},unboundedStorage:{deps:[],fn:function(){return(0,fT.makeSparkStore)("unbounded",this)}},ready:{deps:["loaded","internal.ready"],fn:function(){var e=this;return this.loaded&&(0,c.default)(this._children).reduce(function(t,r){return t&&e[r]&&!1!==e[r].ready},!0)}}},session:{config:{type:"object"},loaded:{default:!1,type:"boolean"},request:{setOnce:!0,type:"any"},sessionId:{setOnce:!0,type:"string"}},refresh:function(){var e;return(e=this.credentials).refresh.apply(e,arguments)},transform:function(e,t){var r=this,n=this.config.payloadTransformer.predicates.filter(function(t){return!t.direction||t.direction===e}),i={spark:this};return s.default.all(n.map(function(e){return e.test(i,t).then(function(r){if(r)return e.extract(t).then(function(t){return{name:e.name,target:t}})})})).then(function(t){return t.filter(function(e){return Boolean(e)}).reduce(function(t,n){var i=n.name,a=n.target,o=n.alias;return t.then(function(){return o?r.applyNamedTransform(e,o,a):r.applyNamedTransform(e,i,a)})},s.default.resolve())}).then(function(){return t})},applyNamedTransform:function(e,t,r){for(var n=arguments.length,i=Array(n>3?n-3:0),a=3;a<n;a++)i[a-3]=arguments[a];var c=this;return(0,v.default)(t)&&(i.unshift(r),r=t,t={spark:this,transform:function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return c.applyNamedTransform.apply(c,[e,t].concat(n))}}),t.spark.config.payloadTransformer.transforms.filter(function(t){return t.name===r&&(!t.direction||t.direction===e)}).reduce(function(e,r){return e.then(function(){var e;return r.alias?(e=t).transform.apply(e,[r.alias].concat((0,o.default)(i))):s.default.resolve(r.fn.apply(r,[t].concat((0,o.default)(i))))})},s.default.resolve()).then(function(){return(0,h.default)(i)})},getWindow:function(){return window},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};delete N.default.credentials.federation,this.config=(0,d.default)({},N.default,t.config),this.trigger("change:config");var r=function t(){e.loaded&&(e.trigger("loaded"),e.stopListening(e,"change:loaded",t))};hc(function(){e.listenToAndRun(e,"change:loaded",r)});var n=function t(){e.ready&&(e.trigger("ready"),e.stopListening(e,"change:ready",t))};hc(function(){e.listenToAndRun(e,"change:ready",n)}),(0,c.default)(this.constructor.prototype._children).forEach(function(t){e.listenTo(e[t],"change",function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];n.unshift("change:"+t),e.trigger.apply(e,n)})});var i=function(t,r){var n=H[r];return(0,m.default)(n)?(t.push((0,u.default)(n,e,[])),t):t},a=[];a=W.reduce(i,a),a=(0,c.default)(H).filter(function(e){return!(W.includes(e)||$.includes(e))}).reduce(i,a),a=$.reduce(i,a),this.request=(0,UI.defaults)({json:!0,interceptors:a});var o=(0,y.default)(this,"config.trackingIdPrefix","spark-js-sdk")+"_"+(0,y.default)(this,"config.trackingIdBase",E.default.v4());(0,g.default)(this,"config.trackingIdPrefix")&&(o+="_"+(0,y.default)(this,"config.trackingIdPrefix")),this.sessionId=o},setConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=(0,d.default)({},this.config,e)},bearerValidator:function(e){return e.includes("Bearer")&&e.split(" ").length-1==0?(console.warn("Your access token does not have a space between 'Bearer' and the token, please add a space to it or replace it with this already fixed version:\n\n"+e.replace("Bearer","Bearer ").replace(/\s+/g," ")),console.info("Tip: You don't need to add 'Bearer' to the access_token field. The token by itself is fine"),e.replace("Bearer","Bearer ").replace(/\s+/g," ")):e.split(" ").length-1>1?(console.warn("Your access token has "+(e.split(" ").length-2)+" too many spaces, please use this format:\n\n"+e.replace(/\s+/g," ")),console.info("Tip: You don't need to add 'Bearer' to the access_token field, the token by itself is fine"),e.replace(/\s+/g," ")):e.replace(/\s+/g," ")},inspect:function(e){return w.default.inspect((0,p.default)(this.serialize({props:!0,session:!0,derived:!0}),"boundedStorage","unboundedStorage","request","config"),{depth:e})},logout:function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var c=this.credentials.supertoken&&(this.credentials.supertoken.refresh_token||this.credentials.supertoken.access_token);return e=(0,a.default)({token:c},e),this.config.onBeforeLogout.reverse().reduce(function(r,i){var a=i.plugin,c=i.fn;return r.then(function(){return s.default.resolve((0,u.default)(c,t[a]||t.internal[a],[e].concat((0,o.default)(n)))).catch(function(e){t.logger.warn("onBeforeLogout from plugin "+a+": failed",e)})})},s.default.resolve()).then(function(){return s.default.all([t.boundedStorage.clear(),t.unboundedStorage.clear()])}).then(function(){var e;return(e=t.credentials).invalidate.apply(e,(0,o.default)(n))}).then(function(){var r;return t.authorization&&t.authorization.logout&&(r=t.authorization).logout.apply(r,[e].concat((0,o.default)(n)))}).then(function(){return t.trigger("client:logout")})},measure:function(){var e;return this.metrics?(e=this.metrics).sendUnstructured.apply(e,arguments):s.default.resolve()},upload:function(e){var t=this;if(!e.file)return s.default.reject(new Error("`options.file` is required"));e.phases=e.phases||{},e.phases.initialize=e.phases.initialize||{},e.phases.upload=e.phases.upload||{},e.phases.finalize=e.phases.finalize||{},(0,b.default)(e.phases.initialize,{method:"POST"},(0,p.default)(e,"file","phases")),(0,b.default)(e.phases.upload,{method:"PUT",json:!1,withCredentials:!1,body:e.file,headers:{"x-trans-id":E.default.v4(),authorization:void 0}}),(0,b.default)(e.phases.finalize,{method:"POST"},(0,p.default)(e,"file","phases"));var r=new hE.EventEmitter,n=this._uploadPhaseInitialize(e).then(function(){var n=t._uploadPhaseUpload(e);return(0,Zx.transferEvents)("progress",n,r),n}).then(function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return t._uploadPhaseFinalize.apply(t,[e].concat(n))}).then(function(e){return e.body});return(0,Zx.proxyEvents)(r,n),n},_uploadPhaseInitialize:function(e){var t=this;return this.logger.debug("client: initiating upload session"),this.request(e.phases.initialize).then(function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return t._uploadApplySession.apply(t,[e].concat(n))}).then(function(e){return t.logger.debug("client: initiated upload session"),e})},_uploadApplySession:function(e,t){var r=t.body;["upload","finalize"].reduce(function(e,t){return e[t]=(0,c.default)(e[t]).reduce(function(e,t){return t.startsWith("$")&&(e[t.substr(1)]=e[t](r),(0,i.default)(e,t)),e},e[t]),e},e.phases)},_uploadPhaseUpload:function(e){var t=this;this.logger.debug("client: uploading file");var r=this.request(e.phases.upload).then(function(e){return t.logger.debug("client: uploaded file"),e});return(0,Zx.proxyEvents)(e.phases.upload.upload,r),"test"===Tc.env.NODE_ENV&&r.on("progress",function(e){t.logger.info("upload progress",e.loaded,e.total)}),r},_uploadPhaseFinalize:function(e){var t=this;return this.logger.debug("client: finalizing upload session"),this.request(e.phases.finalize).then(function(e){return t.logger.debug("client: finalized upload session"),e})}},U=r,z="_uploadPhaseUpload",V=[Zx.retry],q=(0,n.default)(r,"_uploadPhaseUpload"),K=r,G={},Object.keys(q).forEach(function(e){G[e]=q[e]}),G.enumerable=!!G.enumerable,G.configurable=!!G.configurable,("value"in G||G.initializer)&&(G.writable=!0),G=V.slice().reverse().reduce(function(e,t){return t(U,z,e)||e},G),K&&void 0!==G.initializer&&(G.value=G.initializer?G.initializer.call(K):void 0,G.initializer=void 0),void 0===G.initializer&&(Object.defineProperty(U,z,G),G=null),r));Y.version="1.50.15",(0,D.default)(F.default,N.default,H),(0,B.default)(Y,N.default,H),t.default=Y});r(MP);MP.registerPlugin,MP.registerInternalPlugin;var NP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.grantErrors=t.Token=t.sortScope=t.filterScope=t.Credentials=void 0,Object.defineProperty(t,"Credentials",{enumerable:!0,get:function(){return n(JI).default}}),Object.defineProperty(t,"filterScope",{enumerable:!0,get:function(){return gT.filterScope}}),Object.defineProperty(t,"sortScope",{enumerable:!0,get:function(){return gT.sortScope}}),Object.defineProperty(t,"Token",{enumerable:!0,get:function(){return n(VI).default}}),Object.defineProperty(t,"grantErrors",{enumerable:!0,get:function(){return n(mT).default}});var r=n(JI);function n(e){return e&&e.__esModule?e:{default:e}}(0,MP.registerPlugin)("credentials",r.default,{proxies:["canAuthorize","canRefresh"]})});r(NP);NP.grantErrors,NP.Token,NP.sortScope,NP.filterScope,NP.Credentials;var BP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,i=l(Cf),a=l($y),o=l(Gy),s=l(Yy),c=l(mb),u=l(Bk);function l(e){return e&&e.__esModule?e:{default:e}}var f,p,d,h,v,m,g=new c.default,y=(r=function(){function e(){var t,r,i,s,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,e),t=this,r="ready",s=this,(i=n)&&(0,a.default)(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0});var l=c.spark||u.parent;if(!l)throw new Error("One of `attrs.spark` or `options.parent` must be supplied when initializing a StatelessSparkPlugin");for(;l.parent||l.collection;)l=l.parent||l.collection;g.set(this,l)}return(0,s.default)(e,[{key:"config",get:function(){var e=this.getNamespace?this.getNamespace():this.namespace;return e?(e=e.toLowerCase(),this.spark.config[e]):this.spark.config}},{key:"logger",get:function(){return this.spark.logger}},{key:"spark",get:function(){return g.get(this)}}]),(0,s.default)(e,[{key:"request",value:function(){var e;return(e=this.spark).request.apply(e,arguments)}},{key:"upload",value:function(){var e;return(e=this.spark).upload.apply(e,arguments)}}]),e}(),f=r.prototype,p="ready",d=[Hx.readonly],h={enumerable:!0,initializer:function(){return!0}},m={},Object.keys(h).forEach(function(e){m[e]=h[e]}),m.enumerable=!!m.enumerable,m.configurable=!!m.configurable,("value"in m||m.initializer)&&(m.writable=!0),m=d.slice().reverse().reduce(function(e,t){return t(f,p,e)||e},m),v&&void 0!==m.initializer&&(m.value=m.initializer?m.initializer.call(v):void 0,m.initializer=void 0),void 0===m.initializer&&(Object.defineProperty(f,p,m),m=null),n=m,r);t.default=y,(0,i.default)(y.prototype,u.default)});r(BP);var DP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s(wf),n=s(vw),i=s(mk),a=s(pT),o=s(zI);function s(e){return e&&e.__esModule?e:{default:e}}var c=a.default.extend({session:{deferreds:{type:"object",default:function(){return new n.default}},queue:{type:"array",default:function(){return[]}}},derived:{bounce:{fn:function(){var e=this;return(0,Zx.cappedDebounce)(function(){return e.executeQueue.apply(e,arguments)},this.config.batcherWait,{maxCalls:this.config.batcherMaxCalls,maxWait:this.config.batcherMaxWait})}}},request:function(e){var t=this,n=new Zx.Defer;return this.fingerprintRequest(e).then(function(i){t.deferreds.has(i)?n.resolve(t.deferreds.get(i).promise):(t.deferreds.set(i,n),t.prepareItem(e).then(function(e){n.promise=n.promise.then((0,Zx.tap)(function(){return t.deferreds.delete(i)})).catch(function(e){return t.deferreds.delete(i),r.default.reject(e)}),t.enqueue(e).then(function(){return t.bounce()}).catch(function(e){return n.reject(e)})}).catch(function(e){return n.reject(e)}))}).catch(function(e){return n.reject(e)}),n.promise},enqueue:function(e){return this.queue.push(e),r.default.resolve()},prepareItem:function(e){return r.default.resolve(e)},executeQueue:function(){var e=this,t=this.queue.splice(0,this.config.batcherMaxCalls);return new r.default(function(n){n(e.prepareRequest(t).then(function(t){return e.submitHttpRequest(t).then(function(t){return e.handleHttpSuccess(t)})}).catch(function(n){return n instanceof o.default?e.handleHttpError(n):r.default.all(t.map(function(t){return e.getDeferredForRequest(t).then(function(e){e.reject(n)})}))}))}).catch(function(t){return e.logger.error("production"===Tc.env.NODE_ENV?t:t.stack),r.default.reject(t)})},prepareRequest:function(e){return r.default.resolve(e)},submitHttpRequest:function(e){throw new Error("request() must be implemented")},handleHttpSuccess:function(e){var t=this;return r.default.all((e.body&&e.body.items||e.body).map(function(e){return t.acceptItem(e)}))},handleHttpError:function(e){var t=this;return e instanceof o.default&&(0,i.default)(e,"options.body.map")?r.default.all(e.options.body.map(function(r){return t.getDeferredForRequest(r).then(function(t){t.reject(e)})})):(this.logger.error("http error handler called without a SparkHttpError object",e),r.default.reject(e))},acceptItem:function(e){var t=this;return this.didItemFail(e).then(function(r){return r?t.handleItemFailure(e):t.handleItemSuccess(e)})},didItemFail:function(e){return r.default.resolve(!1)},handleItemFailure:function(e){return this.getDeferredForResponse(e).then(function(t){t.reject(e)})},handleItemSuccess:function(e){return this.getDeferredForResponse(e).then(function(t){t.resolve(e)})},getDeferredForRequest:function(e){var t=this;return this.fingerprintRequest(e).then(function(e){var r=t.deferreds.get(e);if(!r)throw new Error("Could not find pending request for received response");return r})},getDeferredForResponse:function(e){var t=this;return this.fingerprintResponse(e).then(function(e){var r=t.deferreds.get(e);if(!r)throw new Error("Could not find pending request for received response");return r})},fingerprintRequest:function(e){throw new Error("fingerprintRequest() must be implemented")},fingerprintResponse:function(e){throw new Error("fingerprintResponse() must be implemented")},version:"1.50.15"});t.default=c});r(DP);var FP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(wb),n=o(Gy),i=o(Yy),a=o(mb);function o(e){return e&&e.__esModule?e:{default:e}}var s=new a.default,c=new a.default,u=new a.default,l=function(){function e(t,r){return(0,n.default)(this,e),s.set(this,t.body.items),c.set(this,e.parseLinkHeaders(t.headers.link)),u.set(this,r),this}return(0,i.default)(e,[{key:"items",get:function(){return s.get(this)}},{key:"length",get:function(){return this.items.length}},{key:"links",get:function(){return c.get(this)}},{key:"spark",get:function(){return u.get(this)}}]),(0,i.default)(e,[{key:"next",value:function(){return this.getLink("next")}},{key:"hasNext",value:function(){return this.hasLink("next")}},{key:"previous",value:function(){return this.getLink("previous")}},{key:"hasPrevious",value:function(){return this.hasLink("previous")}},{key:"getLink",value:function(t){var r=this;return this.spark.request({uri:this.links[t]}).then(function(t){return new e(t,r.spark)})}},{key:"hasLink",value:function(e){return Boolean(this.links[e])}},{key:r.default,value:function(){var e=this,t=-1;return{next:function(){return(t+=1)<e.length?{value:e.items[t]}:{done:!0}}}}}],[{key:"parseLinkHeaders",value:function(e){return e?(e=Array.isArray(e)?e:[e]).reduce(function(e,t){var r=(t=t.split(";"))[0].replace("<","").replace(">","");return e[t[1].split("=")[1].replace(/"/g,"")]=r,e},{}):{}}}]),e}();t.default=l});r(FP),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={error:["log"],warn:["error","log"],info:["log"],debug:["info","log"],trace:["debug","info","log"]};function n(e){var t=r[e];if(t)for(t=t.slice();!console[e];)e=t.pop();return function(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];"test"===Tc.env.NODE_ENV&&this.spark&&this.spark.internal.device&&this.spark.internal.device.url&&n.unshift(this.spark.internal.device.url.slice(-3)),(t=console)[e].apply(t,n)}}var i=LP.SparkPlugin.extend({namespace:"Logger",error:n("error"),warn:n("warn"),log:n("log"),info:n("info"),debug:n("debug"),trace:n("trace"),version:"1.50.15"});(0,LP.registerPlugin)("logger",i),t.default=i}));var LP=n(function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.Page=t.Batcher=t.RateLimitInterceptor=t.SparkUserAgentInterceptor=t.SparkTrackingIdInterceptor=t.RequestTimingInterceptor=t.RequestLoggerInterceptor=t.RequestEventInterceptor=t.ResponseLoggerInterceptor=t.RedirectInterceptor=t.PayloadTransformerInterceptor=t.NetworkTimingInterceptor=t.AuthInterceptor=t.SparkPlugin=t.StatelessSparkPlugin=t.SparkHttpError=t.registerInternalPlugin=t.registerPlugin=t.default=t.children=t.waitForValue=t.StorageError=t.persist=t.NotFoundError=t.MemoryStoreAdapter=t.makeSparkPluginStore=t.makeSparkStore=t.Token=t.sortScope=t.grantErrors=t.filterScope=t.Credentials=void 0,Object.defineProperty(t,"Credentials",{enumerable:!0,get:function(){return NP.Credentials}}),Object.defineProperty(t,"filterScope",{enumerable:!0,get:function(){return NP.filterScope}}),Object.defineProperty(t,"grantErrors",{enumerable:!0,get:function(){return NP.grantErrors}}),Object.defineProperty(t,"sortScope",{enumerable:!0,get:function(){return NP.sortScope}}),Object.defineProperty(t,"Token",{enumerable:!0,get:function(){return NP.Token}}),Object.defineProperty(t,"makeSparkStore",{enumerable:!0,get:function(){return fT.makeSparkStore}}),Object.defineProperty(t,"makeSparkPluginStore",{enumerable:!0,get:function(){return fT.makeSparkPluginStore}}),Object.defineProperty(t,"MemoryStoreAdapter",{enumerable:!0,get:function(){return fT.MemoryStoreAdapter}}),Object.defineProperty(t,"NotFoundError",{enumerable:!0,get:function(){return fT.NotFoundError}}),Object.defineProperty(t,"persist",{enumerable:!0,get:function(){return fT.persist}}),Object.defineProperty(t,"StorageError",{enumerable:!0,get:function(){return fT.StorageError}}),Object.defineProperty(t,"waitForValue",{enumerable:!0,get:function(){return fT.waitForValue}}),Object.defineProperty(t,"children",{enumerable:!0,get:function(){return MP.children}}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(MP).default}}),Object.defineProperty(t,"registerPlugin",{enumerable:!0,get:function(){return MP.registerPlugin}}),Object.defineProperty(t,"registerInternalPlugin",{enumerable:!0,get:function(){return MP.registerInternalPlugin}}),Object.defineProperty(t,"SparkHttpError",{enumerable:!0,get:function(){return r(zI).default}}),Object.defineProperty(t,"StatelessSparkPlugin",{enumerable:!0,get:function(){return r(BP).default}}),Object.defineProperty(t,"SparkPlugin",{enumerable:!0,get:function(){return r(pT).default}}),Object.defineProperty(t,"AuthInterceptor",{enumerable:!0,get:function(){return r(yP).default}}),Object.defineProperty(t,"NetworkTimingInterceptor",{enumerable:!0,get:function(){return r(bP).default}}),Object.defineProperty(t,"PayloadTransformerInterceptor",{enumerable:!0,get:function(){return r(wP).default}}),Object.defineProperty(t,"RedirectInterceptor",{enumerable:!0,get:function(){return r(_P).default}}),Object.defineProperty(t,"ResponseLoggerInterceptor",{enumerable:!0,get:function(){return r(CP).default}}),Object.defineProperty(t,"RequestEventInterceptor",{enumerable:!0,get:function(){return r(EP).default}}),Object.defineProperty(t,"RequestLoggerInterceptor",{enumerable:!0,get:function(){return r(SP).default}}),Object.defineProperty(t,"RequestTimingInterceptor",{enumerable:!0,get:function(){return r(xP).default}}),Object.defineProperty(t,"SparkTrackingIdInterceptor",{enumerable:!0,get:function(){return r(kP).default}}),Object.defineProperty(t,"SparkUserAgentInterceptor",{enumerable:!0,get:function(){return r(TP).default}}),Object.defineProperty(t,"RateLimitInterceptor",{enumerable:!0,get:function(){return r(AP).default}}),Object.defineProperty(t,"Batcher",{enumerable:!0,get:function(){return r(DP).default}}),Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return r(FP).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return r(PP).default}})});r(LP);LP.config,LP.Page,LP.Batcher,LP.RateLimitInterceptor,LP.SparkUserAgentInterceptor,LP.SparkTrackingIdInterceptor,LP.RequestTimingInterceptor,LP.RequestLoggerInterceptor,LP.RequestEventInterceptor,LP.ResponseLoggerInterceptor,LP.RedirectInterceptor,LP.PayloadTransformerInterceptor,LP.NetworkTimingInterceptor,LP.AuthInterceptor,LP.SparkPlugin,LP.StatelessSparkPlugin,LP.SparkHttpError,LP.registerInternalPlugin,LP.registerPlugin,LP.children,LP.waitForValue,LP.StorageError,LP.persist,LP.NotFoundError,LP.MemoryStoreAdapter,LP.makeSparkPluginStore,LP.makeSparkStore,LP.Token,LP.sortScope,LP.grantErrors,LP.filterScope,LP.Credentials;var UP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,a=g(su),o=g(lu),s=g(wf),c=g(Cf),u=g(If),l=g(Rf),f=g(lm),p=g(hm),d=g(gm),h=g(Cm),v=g(wy),m=g(gP);function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b=Zx.base64.encode((0,l.default)({})),w=LP.SparkPlugin.extend((r=(0,Zx.whileInFlight)("isAuthorizing"),n=(0,Zx.whileInFlight)("isAuthorizing"),y(i={derived:{isAuthenticating:{deps:["isAuthorizing"],fn:function(){return this.isAuthorizing}}},session:{isAuthorizing:{default:!1,type:"boolean"},ready:{default:!1,type:"boolean"}},namespace:"Credentials",initialize:function(e,t){var r=this,n=(0,u.default)(LP.SparkPlugin.prototype.initialize,this,[e,t]);if(!1===e.parse)return this.ready=!0,n;var i=v.default.parse(this.spark.getWindow().location.href,!0);this._checkForErrors(i);var a=i.hash;if(!a)return this.ready=!0,n;a.includes("#")&&(a=a.substr(1)),i.hash=h.default.parse(a),i.hash.state&&(i.hash.state=JSON.parse(Zx.base64.decode(i.hash.state)));var o=this._parseHash(i);return o?(this._cleanUrl(i),hc(function(){r.spark.credentials.set({supertoken:o}),r.ready=!0}),n):n},initiateLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.state=e.state||{},e.state.csrf_token=this._generateSecurityToken(),"confidential"===this.config.clientType?this.initiateAuthorizationCodeGrant(e):this.initiateImplicitGrant(e)},initiateImplicitGrant:function(e){return this.logger.info("authorization: initiating implicit grant flow"),this.spark.getWindow().location=this.spark.credentials.buildLoginUrl((0,c.default)({response_type:"token"},e)),s.default.resolve()},initiateAuthorizationCodeGrant:function(e){return this.logger.info("authorization: initiating authorization code grant flow"),this.spark.getWindow().location=this.spark.credentials.buildLoginUrl((0,c.default)({response_type:"code"},e)),s.default.resolve()},requestAccessTokenFromJwt:function(e){var t=this,r=e.jwt;return this.spark.request({method:"POST",service:"hydra",resource:"jwt/login",headers:{authorization:r}}).then(function(e){var t=e.body;return{access_token:t.token,token_type:"Bearer",expires_in:t.expiresIn}}).then(function(e){t.spark.credentials.set({supertoken:e})})},logout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.noRedirect||(this.spark.getWindow().location=this.spark.credentials.buildLogoutUrl(e))},_checkForErrors:function(e){var t=e.query;if(t&&t.error)throw new(LP.grantErrors.select(t.error))(t)},_cleanUrl:function(e){e=(0,d.default)(e),this.spark.getWindow().history&&this.spark.getWindow().history.replaceState&&(["access_token","token_type","expires_in","refresh_token","refresh_token_expires_in"].forEach(function(t){return(0,o.default)(e.hash,t)}),(0,p.default)(e.hash.state)?(0,o.default)(e.hash,"state"):(e.hash.state=Zx.base64.encode((0,l.default)((0,f.default)(e.hash.state,"csrf_token"))),e.hash.state===b&&(0,o.default)(e.hash,"state")),e.hash=h.default.stringify(e.hash),this.spark.getWindow().history.replaceState({},null,v.default.format(e)))},_generateSecurityToken:function(){this.logger.info("authorization: generating csrf token");var e=m.default.v4();return this.spark.getWindow().sessionStorage.setItem("oauth2-csrf-token",e),e},_parseHash:function(e){var t=(0,d.default)(e.hash);if(t&&this._verifySecurityToken(t),t.access_token)return t.expires_in&&(t.expires_in=parseInt(t.expires_in,10)),t.refresh_token_expires_in&&(t.refresh_token_expires_in=parseInt(t.refresh_token_expires_in,10)),t;this.ready=!0},_verifySecurityToken:function(e){var t=this.spark.getWindow().sessionStorage.getItem("oauth2-csrf-token");if(this.spark.getWindow().sessionStorage.removeItem("oauth2-csrf-token"),t){if(!e.state)throw new Error("Expected CSRF token "+t+", but not found in redirect hash");if(!e.state.csrf_token)throw new Error("Expected CSRF token "+t+", but not found in redirect hash");var r=e.state.csrf_token;if(r!==t)throw new Error("CSRF token "+r+" does not match stored token "+t)}},version:"1.50.15"},"initiateImplicitGrant",[r],(0,a.default)(i,"initiateImplicitGrant"),i),y(i,"initiateAuthorizationCodeGrant",[n],(0,a.default)(i,"initiateAuthorizationCodeGrant"),i),y(i,"requestAccessTokenFromJwt",[Zx.oneFlight],(0,a.default)(i,"requestAccessTokenFromJwt"),i),i));t.default=w});r(UP);var zP=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={credentials:{clientType:"public"}}});r(zP);var VP=1,qP=2;var KP=function(e,t,r,n){var i=r.length,a=i,o=!n;if(null==e)return!a;for(e=Object(e);i--;){var s=r[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var c=(s=r[i])[0],u=e[c],l=s[1];if(o&&s[2]){if(void 0===u&&!(c in e))return!1}else{var f=new td;if(n)var p=n(u,l,c,e,t,f);if(!(void 0===p?fk(l,u,VP|qP,n,f):p))return!1}}return!0};var GP=function(e){return e==e&&!up(e)};var HP=function(e){for(var t=Ld(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,GP(i)]}return t};var WP=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}};var $P=function(e){var t=HP(e);return 1==t.length&&t[0][2]?WP(t[0][0],t[0][1]):function(r){return r===e||KP(r,e,t)}},YP=1,JP=2;var QP=function(e,t){return bv(e)&&GP(t)?WP(Nv(e),t):function(r){var n=aP(r,e);return void 0===n&&n===t?TT(r,e):fk(t,n,YP|JP)}};var ZP=function(e){return function(t){return null==t?void 0:t[e]}};var XP=function(e){return function(t){return Bv(t,e)}};var eO=function(e){return bv(e)?ZP(Nv(e)):XP(e)};var tO=function(e){return"function"==typeof e?e:null==e?rm:"object"==typeof e?md(e)?QP(e[0],e[1]):$P(e):eO(e)};var rO=function(e){return function(t,r,n){var i=Object(t);if(!Fd(t)){var a=tO(r,3);t=Ld(t),r=function(e){return a(i[e],e,i)}}var o=e(t,r,n);return o>-1?i[a?t[o]:o]:void 0}},nO=Math.max;var iO=rO(function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:H_(r);return i<0&&(i=nO(n+i,0)),Qw(e,tO(t,3),i)}),aO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s(NT),n=s(If),i=s(up),a=s(pE),o=s(Wk);function s(e){return e&&e.__esModule?e:{default:e}}var c=o.default.extend({props:{key:"string",lastModified:"date",mutable:"boolean",type:"string",val:"string",value:"any"},constructor:function(e,t){return t=t||{},(0,a.default)(t,{parse:!0}),(0,n.default)(o.default.prototype.constructor,this,[e,t])},idAttribute:"key",parse:function(e){if(!e)return{};var t=Number(e.val);return e.val&&!(0,r.default)(t)?(e.value=t,e.type="number"):"true"===e.val?(e.value=!0,e.type="boolean"):"false"===e.val?(e.value=!1,e.type="boolean"):(e.value=e.val,e.type="string"),e},serialize:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=(0,n.default)(o.default.prototype.serialize,this,t);return i.lastModified&&(i.lastModified=new Date(i.lastModified).toISOString()),i},set:function(e,t,r){var a=void 0;return(0,i.default)(e)||null===e?(a=e,r=t):(a={})[e]=t,a=this.parse(a,r),(0,n.default)(o.default.prototype.set,this,[a,r])}});t.default=c});r(aO);var oO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i($I),n=i(aO);function i(e){return e&&e.__esModule?e:{default:e}}var a=r.default.extend({mainIndex:"key",model:n.default});t.default=a});r(oO);var sO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(eC),n=a(Wk),i=a(oO);function a(e){return e&&e.__esModule?e:{default:e}}var o=n.default.extend({collections:{developer:i.default,entitlement:i.default,user:i.default},clear:function(e){var t=this;return(0,r.default)(this.attributes).forEach(function(r){t.unset(r,e)}),(0,r.default)(this._children).forEach(function(e){t[e].clear()}),(0,r.default)(this._collections).forEach(function(e){t[e].reset()}),this},initialize:function(){var e=this;["change:value","add","remove"].forEach(function(t){["developer","entitlement","user"].forEach(function(r){e[r].on(t,function(t,n){e.trigger("change:"+r,e,e[r],n)})})})}});t.default=o});r(sO);var cO=function(e,t){var r;return Ak(e,function(e,n,i){return!(r=t(e,n,i))}),!!r};var uO=function(e,t,r){var n=md(e)?jC:cO;return r&&uE(e,t,r)&&(t=void 0),n(e,tO(t,3))},lO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(wf),n=l(If),i=l(iO),a=l(uO),o=l(up),s=l(pE),c=l(Wk),u=l(wy);function l(e){return e&&e.__esModule?e:{default:e}}var f=c.default.extend({props:{service:"string",defaultUrl:"string",availableHosts:{type:"array",default:function(){return[]}}},session:{currentHostIndex:{type:"number",default:0}},derived:{url:{deps:["defaultUrl","availableHosts","currentHostIndex"],fn:function(){if(0===this.availableHosts.length)return this.defaultUrl;var e=void 0;return e=this.currentHostIndex>=this.availableHosts.length?this.availableHosts[this.availableHosts.length-1]:this.availableHosts[this.currentHostIndex],this._changeUrlHost(this.defaultUrl,e.host)}}},constructor:function(e,t){return t=t||{},(0,s.default)(t,{parse:!0}),(0,n.default)(c.default.prototype.constructor,this,[e,t])},idAttribute:"service",serialize:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=(0,n.default)(c.default.prototype.serialize,this,t);return i.url=this.url,i},parse:function(e){return e?(e.availableHosts&&e.availableHosts.sort(function(e,t){return e.priority-t.priority}),e):{}},set:function(e,t,r){var i=void 0;return(0,o.default)(e)||null===e?(i=e,r=t):(i={})[e]=t,i=this.parse(i,r),(0,n.default)(c.default.prototype.set,this,[i,r])},markHostFailed:function(e){var t=this.getCurrentHost();if(e){var r=u.default.parse(e);t=(0,i.default)(this.availableHosts,function(e){return e.host===r.host})}t&&(t.failed=!0)},cycleNextHost:function(){for(var e=0;e<this.availableHosts.length;e+=1){var t=this.availableHosts[e];if(!t.failed&&this.currentHostIndex!==e)return this.currentHostIndex=e,r.default.resolve(t)}return this.currentHostIndex=0,r.default.reject(new Error("All hosts have failed for "+this.service))},doesUrlBelongToService:function(e){var t=u.default.parse(e),r=this.availableHosts.map(function(e){return e.host});return r.push(u.default.parse(this.defaultUrl).host),(0,a.default)(r,function(e){return e===t.host})},getCurrentHost:function(){return this.availableHosts[this.currentHostIndex]},resetAllHosts:function(){this.availableHosts.forEach(function(e){e.failed=!1})},replaceUrlWithCurrentHost:function(e){return this._changeUrlHost(e,this.getCurrentHost().host)},_changeUrlHost:function(e,t){var r=u.default.parse(e);return r.host=t,u.default.format(r)}});t.default=f});r(lO);var fO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(wf),n=a($I),i=a(lO);function a(e){return e&&e.__esModule?e:{default:e}}var o=n.default.extend({mainIndex:"service",model:i.default,markFailedAndCycleUrl:function(e){return e?this.inferServiceFromUrl(e).then(function(t){return t.markHostFailed(e),t.cycleNextHost().then(function(){return t.url})}):r.default.reject(new Error("`uri` is a required parameter"))},resetAllAndRetry:function(e){return e?this.inferServiceFromUrl(e).then(function(e){return e.resetAllHosts(),e.url}):r.default.reject(new Error("`uri` is a required parameter"))},inferServiceFromUrl:function(e){var t=this.filter(function(t){return t.doesUrlBelongToService(e)});return t.length>=1?r.default.resolve(t[0]):r.default.reject(new Error("Unable to infer service for this url "+e))},inferServiceNameFromUrl:function(e){return this.inferServiceFromUrl(e).then(function(e){return e.service})}});t.default=o});r(fO);var pO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,a,o,s,c,u,l,f,p=x(su),d=x(KT),h=x(If),v=x(wf),m=x(eC),g=x(ET),y=x(iO),b=x(lm),w=x(by),_=x(sO),E=x(fO),S=x(wy);function x(e){return e&&e.__esModule?e:{default:e}}function C(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var k=LP.SparkPlugin.extend((r=(0,LP.waitForValue)("@"),n=(0,LP.waitForValue)("@"),i=(0,LP.persist)("@",function(){return!this.config.ephemeral}),a=(0,LP.waitForValue)("@"),o=(0,LP.waitForValue)("@"),s=(0,LP.waitForValue)("@"),c=(0,LP.waitForValue)("@"),u=(0,LP.waitForValue)("@"),l=(0,LP.waitForValue)("@"),C(f={children:{features:_.default},collections:{serviceCatalog:E.default},idAttribute:"url",namespace:"Device",props:{clientMessagingGiphy:"string",customerCompanyName:"string",customerLogoUrl:"string",deviceType:"string",helpUrl:"string",intranetInactivityDuration:"number",intranetInactivityCheckUrl:"string",ecmEnabledForAllUsers:{type:"boolean",default:function(){return!1}},ecmSupportedStorageProviders:{type:"array",default:function(){return[]}},modificationTime:"string",partnerCompanyName:"string",partnerLogoUrl:"string",reportingSiteDesc:"string",reportingSiteUrl:"string",searchEncryptionKeyUrl:"string",services:{default:function(){return{}},type:"object"},serviceHostMap:{default:function(){return{serviceLinks:{},hostCatalog:{}}},type:"object"},showSupportText:"boolean",supportProviderCompanyName:"string",supportProviderLogoUrl:"string",url:"string",userId:"string",webFileShareControl:"string",webSocketUrl:"string",whiteboardFileShareControl:"string"},derived:{registered:{deps:["url"],fn:function(){return Boolean(this.url)}}},session:{logoutTimer:"any",lastUserActivityDate:"number"},determineService:function(e){var t=this.features.developer.get("web-ha-messaging");if(t&&t.value){var r=!0,n=!1,i=void 0;try{for(var a,o=(0,g.default)((0,m.default)(this.serviceHostMap.serviceLinks));!(r=(a=o.next()).done);r=!0){var s=a.value,c=this.serviceHostMap.serviceLinks[s];if(e.startsWith(c))return v.default.resolve(s)}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}}else{var u=!0,l=!1,f=void 0;try{for(var p,d=(0,g.default)((0,m.default)(this.services));!(u=(p=d.next()).done);u=!0){var h=p.value,y=this.services[h];if(e.startsWith(y))return v.default.resolve(h.substr(0,h.length-10))}}catch(e){l=!0,f=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw f}}}return v.default.reject(new Error(e+" does not reflect a known service"))},getServiceUrl:function(e){var t=this,r=this.features.developer.get("web-ha-messaging");return r&&r.value?this._getServiceUrl(this.serviceHostMap.serviceLinks,e).then(function(r){return r||t.getPreDiscoveryServiceUrl(e)}):this._getServiceUrl(this.services,e).then(function(r){return r||t.getPreDiscoveryServiceUrl(e)})},getPreDiscoveryServiceUrl:function(e){return v.default.resolve(this._getServiceUrl(this.config.preDiscoveryServices,e))},getWebSocketUrl:function(){return this.useServiceCatalogUrl(this.webSocketUrl)},useServiceCatalogUrl:function(e){return this.serviceCatalog.inferServiceFromUrl(e).then(function(t){return t.replaceUrlWithCurrentHost(e)})},markUrlFailedAndGetNew:function(e){var t=this;return e?(this.logger.info("device: marking "+e+" as failed"),this.serviceCatalog.markFailedAndCycleUrl(e).then(function(r){return t.spark.internal.metrics.submitClientMetrics("web-ha",{tags:{action:"replace_url",failedUrl:e,newUrl:r}}),r}).catch(function(){return t._resetAllAndRetry(e)})):v.default.reject(new Error("`url` is a required parameter"))},_resetAllAndRetry:function(e){return e?(this.logger.info("device: reset available hosts and retry "+e),this.serviceCatalog.resetAllAndRetry(e)):v.default.reject(new Error("`url` is a required parameter"))},fetchNewUrls:function(e){var t=this;return new v.default(function(r){return t.serviceCatalog.inferServiceFromUrl(e).then(function(e){t.logger.info("device: refresh to "+e.service+" get new urls"),t.refresh(),t.on("serviceCatalogUpdated",function(){return r(e.url)})})})},initialize:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(0,h.default)(LP.SparkPlugin.prototype.initialize,this,r),["developer","entitlement","user"].forEach(function(t){e.features.on("change:"+t,function(t,r,n){e.trigger("change",e,n),e.trigger("change:features",e,e.features,n)})}),this.on("change:serviceHostMap",this._updateServiceCatalog),this.listenToAndRun(this,"change:intranetInactivityCheckUrl",function(){return e._resetLogoutTimer()}),this.listenToAndRun(this,"change:intranetInactivityDuration",function(){return e._resetLogoutTimer()}),this.listenTo(this.spark,"user-activity",function(){e.lastUserActivityDate=Date.now()})},inspect:function(e){return w.default.inspect((0,b.default)(this.serialize(),"features"),{depth:e})},isPreDiscoveryService:function(e){return v.default.resolve(this._isService(this.config.preDiscoveryServices,e))},isPreDiscoveryServiceUrl:function(e){return e?v.default.resolve(this._isServiceUrl(this.config.preDiscoveryServices,e)):v.default.reject(new Error("`uri` is a required parameter"))},isService:function(e){var t=this;if("idbroker"===e)return v.default.resolve(!1);var r=this.features.developer.get("web-ha-messaging");return r&&r.value?this._isService(this.serviceHostMap.serviceLinks,e).then(function(r){return r||t.isPreDiscoveryService(e)}):this._isService(this.services,e).then(function(r){return r||t.isPreDiscoveryService(e)})},isServiceUrl:function(e){if(!e)return v.default.reject(new Error("`uri` is a required parameter"));var t=this.features.developer.get("web-ha-messaging");return t&&t.value?this._isServiceUrl(this.serviceHostMap.serviceLinks,e)||this._isServiceUrlFromCatalog(this.serviceHostMap.hostCatalog,e)?v.default.resolve(!0):v.default.resolve(!1):v.default.resolve(this._isServiceUrl(this.services,e))},isSpecificService:function(e,t){return t===e?v.default.resolve(!0):this.getServiceUrl(e).then(function(e){return t.includes(e)})},_getServiceUrl:function(e,t){if(!t)return v.default.reject(new Error("`service` is a required parameter"));var r=this.features.developer.get("web-ha-messaging");if(r&&r.value){var n=this.serviceCatalog.get(t);if(n)return v.default.resolve(n.url)}return e?v.default.resolve(e[t+"ServiceUrl"]):v.default.reject(new Error("`target` is a required parameter"))},_isService:function(e,t){return this._getServiceUrl(e,t).then(function(e){return Boolean(e)})},_isServiceUrl:function(e,t){var r=this.features.developer.get("web-ha-messaging");if(r&&r.value){var n=!0,i=!1,a=void 0;try{for(var o,s=(0,g.default)((0,m.default)(e));!(n=(o=s.next()).done);n=!0){var c=o.value,u=e[c];if("idbroker"!==c&&t.startsWith(u))return!0}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}}else{var l=!0,f=!1,p=void 0;try{for(var h,y=(0,g.default)((0,d.default)(e));!(l=(h=y.next()).done);l=!0){var b=h.value;if(b&&t.startsWith(b))return v.default.resolve(!0)}}catch(e){f=!0,p=e}finally{try{!l&&y.return&&y.return()}finally{if(f)throw p}}}return!1},_isServiceUrlFromCatalog:function(e,t){var r=S.default.parse(t).hostname;return!(!r||r.includes("idbroker")||!(0,y.default)(e,function(e){return(0,y.default)(e,function(e){return e.host===r})}))},refresh:function(){var e=this;if(this.logger.info("device: refreshing"),!this.registered)return this.logger.info("device: device not registered, registering"),this.register();var t=(0,b.default)(this.serialize(),"features","mediaClusters");return this.config.ephemeral&&(t.ttl=this.config.ephemeralDeviceTTL),this.request({method:"PUT",uri:this.url,body:t}).then(function(t){return e._processRegistrationSuccess(t)}).catch(function(t){return 404===t.statusCode?(e.logger.info("device: refresh failed with 404, attempting to register new device"),e.clear(),e.register()):v.default.reject(t)})},register:function(){var e=this;if(this.logger.info("device: registering"),this.registered)return this.logger.info("device: device already registered, refreshing"),this.refresh();var t=this.config.defaults;return this.config.ephemeral&&(t.ttl=this.config.ephemeralDeviceTTL),this.request({method:"POST",service:"wdm",resource:"devices",body:t}).then(function(t){return e._processRegistrationSuccess(t)})},unregister:function(){var e=this;return this.logger.info("device: unregistering"),this.url?this.request({uri:this.url,method:"DELETE"}).then(function(){return e.clear()}):(this.logger.warn("device: not registered"),v.default.resolve())},clear:function(){clearTimeout(this.refreshTimer);for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];(0,h.default)(LP.SparkPlugin.prototype.clear,this,t)},_processRegistrationSuccess:function(e){var t=this;if(this.logger.info("device: received registration payload"),this.set(e.body),this.config.ephemeral){this.logger.info("device: enqueing device refresh");var r=1e3*(this.config.ephemeralDeviceTTL/2+60);this.refreshTimer=(0,nC.safeSetTimeout)(function(){return t.refresh()},r)}},_updateServiceCatalog:function(e){var t=this,r=this.features.developer.get("web-ha-messaging");r&&r.value&&(e.serviceHostMap&&e.serviceHostMap.serviceLinks&&e.serviceHostMap.hostCatalog?((0,m.default)(e.serviceHostMap.serviceLinks).forEach(function(r){var n=S.default.parse(e.serviceHostMap.serviceLinks[r]).hostname,i=e.serviceHostMap.hostCatalog[n];t.serviceCatalog.set({service:r,defaultUrl:e.serviceHostMap.serviceLinks[r],availableHosts:i||[]},{remove:!1})}),this.trigger("serviceCatalogUpdated")):this.refresh())},_resetLogoutTimer:function(){var e=this;if(clearTimeout(this.logoutTimer),this.off("change:lastUserActivityDate"),this.unset("logoutTimer"),this.config.enableInactivityEnforcement&&this.intranetInactivityCheckUrl&&this.intranetInactivityDuration){this.on("change:lastUserActivityDate",function(){return e._resetLogoutTimer()});var t=(0,nC.safeSetTimeout)(function(){e.spark.request({headers:{"cisco-no-http-redirect":null,"spark-user-agent":null,trackingid:null},method:"GET",uri:e.intranetInactivityCheckUrl}).catch(function(){return e.logger.info("device: did not reach internal ping endpoint; logging out after inactivity on a public network"),e.spark.logout()}).catch(function(t){e.logger.warn("device: logout failed",t)})},1e3*this.intranetInactivityDuration);this.logoutTimer=t}},version:"1.50.15"},"determineService",[r],(0,p.default)(f,"determineService"),f),C(f,"getServiceUrl",[n],(0,p.default)(f,"getServiceUrl"),f),C(f,"initialize",[i],(0,p.default)(f,"initialize"),f),C(f,"isService",[a],(0,p.default)(f,"isService"),f),C(f,"isServiceUrl",[o],(0,p.default)(f,"isServiceUrl"),f),C(f,"isSpecificService",[s],(0,p.default)(f,"isSpecificService"),f),C(f,"refresh",[Zx.oneFlight,c],(0,p.default)(f,"refresh"),f),C(f,"register",[Zx.oneFlight,u],(0,p.default)(f,"register"),f),C(f,"unregister",[Zx.oneFlight,l],(0,p.default)(f,"unregister"),f),f));t.default=k});r(pO);var dO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=pO,e&&e.__esModule?e:{default:e}).default;var e}})});r(dO);var hO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(wf),n=c(aS),i=c(Gy),a=c(Yy),o=c(oS),s=c(sS);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onResponseError",value:function(e,t){return 451===t.statusCode&&(this.spark.internal.device.clear(),this.spark.credentials.clear(),this.spark.logger.info("Received `HTTP 451 Unavailable For Legal Reasons`, discarding credentials and device registration")),r.default.reject(t)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(UI.Interceptor);t.default=u});r(hO);var vO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(lu),n=l(Cf),i=l(wf),a=l(aS),o=l(Gy),s=l(Yy),c=l(oS),u=l(sS);function l(e){return e&&e.__esModule?e:{default:e}}var f=/(?:^\/)|(?:\/$)/,p=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"onRequest",value:function(e){return e.uri?e:(this.checkOptions(e),this.normalizeOptions(e),this.spark.internal.device.getServiceUrl(e.service).then(function(t){return t?(e.resource&&(t=t.replace(f,"")+"/"+e.resource.replace(f,"")),e.uri=t,e):i.default.reject(new Error("`"+e.service+"` is not a known service"))}))}},{key:"checkOptions",value:function(e){if(!e.api&&!e.service)throw new Error("A `service` or `uri` parameter is required");if(!e.resource)throw new Error("A `resource` parameter is required")}},{key:"normalizeOptions",value:function(e){e.service||((0,n.default)(e,{service:e.service||e.api}),(0,r.default)(e,"api"))}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(UI.Interceptor);t.default=p});r(vO);var mO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(wf),n=u(aS),i=u(Gy),a=u(Yy),o=u(oS),s=u(sS),c=u(ZI);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){var t=this;return!this.spark.internal.device.url||e.headers&&"cisco-device-url"in e.headers&&!e.headers["cisco-device-url"]?r.default.resolve(e):r.default.resolve(e.service||this.spark.internal.device.determineService(e.uri)).then(function(r){return r&&"oauth"!==r&&"saml"!==r&&"idbroker"!==r&&(0,c.default)(e,"headers['cisco-device-url']",t.spark.internal.device.url),e}).catch(function(t){if(t.message.match(/does not reflect a known service/))return e;throw t})}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(UI.Interceptor);t.default=l});r(mO);var gO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(wf),n=c(aS),i=c(Gy),a=c(Yy),o=c(oS),s=c(sS);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onResponseError",value:function(e,t){if(t instanceof LP.SparkHttpError.InternalServerError&&e.uri){var n=this.spark.internal.device.features.developer.get("web-ha-messaging");if(n&&n.value)return this.spark.internal.metrics.submitClientMetrics("web-ha",{fields:{success:!1},tags:{action:"failed",error:t.message,url:e.uri}}),this.spark.internal.device.markUrlFailedAndGetNew(e.uri).then(function(){return r.default.reject(t)})}return r.default.reject(t)}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(UI.Interceptor);t.default=u});r(gO);var yO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={device:{preDiscoveryServices:{wdmServiceUrl:Tc.env.WDM_SERVICE_URL||"https://wdm-a.wbx2.com/wdm/api/v1",hydraServiceUrl:Tc.env.HYDRA_SERVICE_URL||"https://api.ciscospark.com/v1",wdm:Tc.env.WDM_SERVICE_URL||"https://wdm-a.wbx2.com/wdm/api/v1",hydra:Tc.env.HYDRA_SERVICE_URL||"https://api.ciscospark.com/v1"},defaults:{name:Tc.title||Zx.inBrowser&&"browser"||"javascript",deviceType:"WEB",model:"web-js-sdk",localizedModel:"webex-js-sdk",systemName:"WEBEX_JS_SDK",systemVersion:"1.0.0"},enableInactivityEnforcement:!1,ephemeral:!1,ephemeralDeviceTTL:1800}}});r(yO);var bO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.ServerErrorInterceptor=t.DeviceUrlInterceptor=t.UrlInterceptor=t.EmbargoInterceptor=t.ServiceModel=t.ServiceCollection=t.FeatureModel=t.FeatureCollection=t.FeaturesModel=t.Device=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c(dO).default}}),Object.defineProperty(t,"Device",{enumerable:!0,get:function(){return c(dO).default}}),Object.defineProperty(t,"FeaturesModel",{enumerable:!0,get:function(){return c(sO).default}}),Object.defineProperty(t,"FeatureCollection",{enumerable:!0,get:function(){return c(oO).default}}),Object.defineProperty(t,"FeatureModel",{enumerable:!0,get:function(){return c(aO).default}}),Object.defineProperty(t,"ServiceCollection",{enumerable:!0,get:function(){return c(fO).default}}),Object.defineProperty(t,"ServiceModel",{enumerable:!0,get:function(){return c(lO).default}}),Object.defineProperty(t,"EmbargoInterceptor",{enumerable:!0,get:function(){return c(hO).default}}),Object.defineProperty(t,"UrlInterceptor",{enumerable:!0,get:function(){return c(vO).default}}),Object.defineProperty(t,"DeviceUrlInterceptor",{enumerable:!0,get:function(){return c(mO).default}}),Object.defineProperty(t,"ServerErrorInterceptor",{enumerable:!0,get:function(){return c(gO).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return c(yO).default}});var r=c(dO),n=c(yO),i=c(vO),a=c(mO),o=c(hO),s=c(gO);function c(e){return e&&e.__esModule?e:{default:e}}(0,LP.registerInternalPlugin)("device",r.default,{interceptors:{UrlInterceptor:i.default.create,DeviceUrlInterceptor:a.default.create,EmbargoInterceptor:o.default.create,ServerErrorInterceptor:s.default.create},config:n.default,onBeforeLogout:function(){return this.unregister()}})});r(bO);bO.config,bO.ServerErrorInterceptor,bO.DeviceUrlInterceptor,bO.UrlInterceptor,bO.EmbargoInterceptor,bO.ServiceModel,bO.ServiceCollection,bO.FeatureModel,bO.FeatureCollection,bO.FeaturesModel,bO.Device;var wO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(UP).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return i(zP).default}});var r=i(UP),n=i(zP);function i(e){return e&&e.__esModule?e:{default:e}}(0,LP.registerPlugin)("authorization",r.default,{config:n.default,proxies:["isAuthorizing","isAuthenticating"]})});r(wO);wO.config;r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=wO,e&&e.__esModule?e:{default:e}).default;var e}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return wO.config}})}));var _O=zT(!0);ru(ru.S,"Object",{entries:function(e){return _O(e)}});var EO=$c.Object.entries,SO=n(function(e){e.exports={default:EO,__esModule:!0}});r(SO);var xO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.levels=void 0;var r=d(Yk),n=d(lu),i=d(SO),a=d(ET),o=d(ST),s=d(eC),c=d(bC),u=d(up),l=d(md),f=d(mk),p=d(gm);function d(e){return e&&e.__esModule?e:{default:e}}var h={silent:0,error:1,warn:2,log:3,info:4,debug:5,trace:6},v=t.levels=(0,s.default)(h).filter(function(e){return"silent"!==e}),m={error:["log"],warn:["error","log"],info:["log"],debug:["info","log"],trace:["debug","info","log"]},g=/[Aa]uthorization/;function y(e){if((0,l.default)(e))return e.map(y);if(!(0,u.default)(e))return(0,c.default)(e)&&Zx.patterns.email.test(e)?"-- REDACTED --":e;var t=!0,r=!1,s=void 0;try{for(var f,p=(0,a.default)((0,i.default)(e));!(t=(f=p.next()).done);t=!0){var d=f.value,h=(0,o.default)(d,2),v=h[0],m=h[1];g.test(v)?(0,n.default)(e,v):e[v]=y(m)}}catch(e){r=!0,s=e}finally{try{!t&&p.return&&p.return()}finally{if(r)throw s}}return e}var b=LP.SparkPlugin.extend({namespace:"Logger",derived:{level:{cache:!1,fn:function(){return this.getCurrentLevel()}}},session:{buffer:{type:"array",default:function(){return[]}}},filter:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.map(function(e){if(e instanceof Error){if("test"===Tc.env.NODE_ENV&&Zx.inBrowser){var t=e.toString();return t+="BEGIN STACK",t+=e.stack,t+="END STACK"}return e}return y(e=(0,p.default)(e))})},shouldPrint:function(e){return h[e]<=h[this.getCurrentLevel()]},shouldBuffer:function(e){return h[e]<=h.info},getCurrentLevel:function(){if(this.config.level)return this.config.level;if(v.includes(Tc.env.CISCOSPARK_LOG_LEVEL))return Tc.env.CISCOSPARK_LOG_LEVEL;if("test"===Tc.env.NODE_ENV)return"trace";var e=this.spark.internal.device&&this.spark.internal.device.features.developer.get("log-level");return e&&v.includes(e)?e:"error"},version:"1.50.15"});v.forEach(function(e){var t=m[e],n=e;if(t)for(t=t.slice();!console[n];)n=t.pop();b.prototype[e]=function(){try{var t=this.shouldPrint(e),i=this.shouldBuffer(e);if(!i&&!t)return;var a=this.filter.apply(this,arguments),o=a.map(function(e){return e instanceof LP.SparkHttpError?e.toString():e});if(t){var s,c=Zx.inBrowser?o:a;"test"===Tc.env.NODE_ENV&&(0,f.default)(this,"spark.internal.device.url")&&c.unshift(this.spark.internal.device.url.slice(-3)),(s=console)[n].apply(s,(0,r.default)(c))}i&&(o.unshift(Date.now()),this.buffer.push(o),this.buffer.length>this.config.historyLength&&this.buffer.shift())}catch(t){console.warn("failed to execute Logger#"+e,t)}}}),t.default=b});r(xO);xO.levels;var CO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={logger:{level:Tc.env.LOGGER_LEVEL,historyLength:1e3}}});r(CO);var kO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.levels=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(xO).default}}),Object.defineProperty(t,"levels",{enumerable:!0,get:function(){return xO.levels}});var r=i(xO),n=i(CO);function i(e){return e&&e.__esModule?e:{default:e}}(0,LP.registerPlugin)("logger",r.default,{config:n.default,replace:!0})});r(kO);kO.levels;var TO=n(function(t){var r,n;r=e,n=function(){var e=!0;function t(t){function r(e){var r=t.match(e);return r&&r.length>1&&r[1]||""}function n(e){var r=t.match(e);return r&&r.length>1&&r[2]||""}var i,o=r(/(ipod|iphone|ipad)/i).toLowerCase(),s=!/like android/i.test(t)&&/android/i.test(t),c=/nexus\s*[0-6]\s*/i.test(t),u=!c&&/nexus\s*[0-9]+/i.test(t),l=/CrOS/.test(t),f=/silk/i.test(t),p=/sailfish/i.test(t),d=/tizen/i.test(t),h=/(web|hpw)(o|0)s/i.test(t),v=/windows phone/i.test(t),m=(/SamsungBrowser/i.test(t),!v&&/windows/i.test(t)),g=!o&&!f&&/macintosh/i.test(t),y=!s&&!p&&!d&&!h&&/linux/i.test(t),b=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),w=r(/version\/(\d+(\.\d+)?)/i),_=/tablet/i.test(t)&&!/tablet pc/i.test(t),E=!_&&/[^-]mobi/i.test(t),S=/xbox/i.test(t);/opera/i.test(t)?i={name:"Opera",opera:e,version:w||r(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?i={name:"Opera",opera:e,version:r(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||w}:/SamsungBrowser/i.test(t)?i={name:"Samsung Internet for Android",samsungBrowser:e,version:w||r(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(t)?i={name:"NAVER Whale browser",whale:e,version:r(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(t)?i={name:"MZ Browser",mzbrowser:e,version:r(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(t)?i={name:"Opera Coast",coast:e,version:w||r(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(t)?i={name:"Focus",focus:e,version:r(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(t)?i={name:"Yandex Browser",yandexbrowser:e,version:w||r(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?i={name:"UC Browser",ucbrowser:e,version:r(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?i={name:"Maxthon",maxthon:e,version:r(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?i={name:"Epiphany",epiphany:e,version:r(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?i={name:"Puffin",puffin:e,version:r(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?i={name:"Sleipnir",sleipnir:e,version:r(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?i={name:"K-Meleon",kMeleon:e,version:r(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:v?(i={name:"Windows Phone",osname:"Windows Phone",windowsphone:e},b?(i.msedge=e,i.version=b):(i.msie=e,i.version=r(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?i={name:"Internet Explorer",msie:e,version:r(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?i={name:"Chrome",osname:"Chrome OS",chromeos:e,chromeBook:e,chrome:e,version:r(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?i={name:"Microsoft Edge",msedge:e,version:b}:/vivaldi/i.test(t)?i={name:"Vivaldi",vivaldi:e,version:r(/vivaldi\/(\d+(\.\d+)?)/i)||w}:p?i={name:"Sailfish",osname:"Sailfish OS",sailfish:e,version:r(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?i={name:"SeaMonkey",seamonkey:e,version:r(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(i={name:"Firefox",firefox:e,version:r(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(i.firefoxos=e,i.osname="Firefox OS")):f?i={name:"Amazon Silk",silk:e,version:r(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?i={name:"PhantomJS",phantom:e,version:r(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?i={name:"SlimerJS",slimer:e,version:r(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?i={name:"BlackBerry",osname:"BlackBerry OS",blackberry:e,version:w||r(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:h?(i={name:"WebOS",osname:"WebOS",webos:e,version:w||r(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(i.touchpad=e)):/bada/i.test(t)?i={name:"Bada",osname:"Bada",bada:e,version:r(/dolfin\/(\d+(\.\d+)?)/i)}:d?i={name:"Tizen",osname:"Tizen",tizen:e,version:r(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||w}:/qupzilla/i.test(t)?i={name:"QupZilla",qupzilla:e,version:r(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||w}:/chromium/i.test(t)?i={name:"Chromium",chromium:e,version:r(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||w}:/chrome|crios|crmo/i.test(t)?i={name:"Chrome",chrome:e,version:r(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?i={name:"Android",version:w}:/safari|applewebkit/i.test(t)?(i={name:"Safari",safari:e},w&&(i.version=w)):o?(i={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},w&&(i.version=w)):i=/googlebot/i.test(t)?{name:"Googlebot",googlebot:e,version:r(/googlebot\/(\d+(\.\d+))/i)||w}:{name:r(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(i.name=i.name||"Blink",i.blink=e):(i.name=i.name||"Webkit",i.webkit=e),!i.version&&w&&(i.version=w)):!i.opera&&/gecko\//i.test(t)&&(i.name=i.name||"Gecko",i.gecko=e,i.version=i.version||r(/gecko\/(\d+(\.\d+)?)/i)),i.windowsphone||!s&&!i.silk?!i.windowsphone&&o?(i[o]=e,i.ios=e,i.osname="iOS"):g?(i.mac=e,i.osname="macOS"):S?(i.xbox=e,i.osname="Xbox"):m?(i.windows=e,i.osname="Windows"):y&&(i.linux=e,i.osname="Linux"):(i.android=e,i.osname="Android");var x="";i.windows?x=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(r(/Windows ((NT|XP)( \d\d?.\d)?)/i)):i.windowsphone?x=r(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?x=(x=r(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):o?x=(x=r(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):s?x=r(/android[ \/-](\d+(\.\d+)*)/i):i.webos?x=r(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?x=r(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?x=r(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(x=r(/tizen[\/\s](\d+(\.\d+)*)/i)),x&&(i.osversion=x);var C=!i.windows&&x.split(".")[0];return _||u||"ipad"==o||s&&(3==C||C>=4&&!E)||i.silk?i.tablet=e:(E||"iphone"==o||"ipod"==o||s||c||i.blackberry||i.webos||i.bada)&&(i.mobile=e),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.whale&&1===a([i.version,"1.0"])||i.mzbrowser&&1===a([i.version,"6.0"])||i.focus&&1===a([i.version,"1.0"])||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=e:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=e:i.x=e,i}var r=t("undefined"!=typeof navigator&&navigator.userAgent||"");function n(e){return e.split(".").length}function i(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r++)n.push(t(e[r]));return n}function a(e){for(var t=Math.max(n(e[0]),n(e[1])),r=i(e,function(e){var r=t-n(e);return i((e+=new Array(r+1).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--t>=0;){if(r[0][t]>r[1][t])return 1;if(r[0][t]!==r[1][t])return-1;if(0===t)return 0}}function o(e,n,i){var o=r;"string"==typeof n&&(i=n,n=void 0),void 0===n&&(n=!1),i&&(o=t(i));var s=""+o.version;for(var c in e)if(e.hasOwnProperty(c)&&o[c]){if("string"!=typeof e[c])throw new Error("Browser version in the minVersion map should be a string: "+c+": "+String(e));return a([s,e[c]])<0}return n}return r.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in r)return!0}return!1},r.isUnsupportedBrowser=o,r.compareVersions=a,r.check=function(e,t,r){return!o(e,t,r)},r._detect=t,r.detect=t,r},t.exports?t.exports=n():r.bowser=n()}),AO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t,r){void 0===r&&(r={}),this.execute=e,this.applicator=t,this.options=r}return Object.defineProperty(e.prototype,"bound",{get:function(){return null!=this.options.bound&&this.options.bound},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setter",{get:function(){return null!=this.options.setter&&this.options.setter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getter",{get:function(){return null!=this.options.getter&&this.options.getter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"property",{get:function(){return null!=this.options.property&&this.options.property},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){return null==this.options.method||this.options.method},enumerable:!0,configurable:!0}),e}();t.DecoratorConfig=r});r(AO);AO.DecoratorConfig;var IO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(e){return void 0===e&&(e=""),"lodash-decorators -> "+e}});r(IO);IO.log;var PO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.resolveFunction=function(e,t,r,n){if(void 0===n&&(n=!0),vp(e))return e;if(bC(e)){if(t&&vp(t[e]))return t[e];if(r&&vp(r[e]))return r[e]}if(n)throw new ReferenceError(IO.log("Can not resolve method "+e+" on any target Objects"))}});r(PO);PO.resolveFunction;var OO=function(e){return void 0===e},RO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._weakMap=new WeakMap}return e.prototype.set=function(e,t){for(var r=this._weakMap,n=0,i=e.length-1;n<i;n++){var a=e[n],o=r.get(a);o||(o=new Map,r.set(a,o)),r=o}r.set(e[e.length-1],t)},e.prototype.get=function(e){for(var t=this._weakMap,r=0,n=e.length;r<n&&(t=t.get(e[r]),!OO(t));r++);return t},e.prototype.has=function(e){return!OO(this.get(e))},e}();t.CompositeKeyWeakMap=r});r(RO);RO.CompositeKeyWeakMap;var jO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.returnAtIndex=function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.call.apply(e,[this].concat(r)),r[t]}}});r(jO);jO.returnAtIndex;var MO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.copyMetadata=function(e,t){return gC(t,function(t,r){return e[r]=t}),e}});r(MO);MO.copyMetadata;var NO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.bind=function(e,t){return MO.copyMetadata(e.bind(t),e)}});r(NO);NO.bind;var BO=200;var DO=function(e,t,r,n){var i=-1,a=t_,o=!0,s=e.length,c=[],u=t.length;if(!s)return c;r&&(t=jf(t,kd(r))),n?(a=yk,o=!1):t.length>=BO&&(a=MC,o=!1,t=new RC(t));e:for(;++i<s;){var l=e[i],f=null==r?l:r(l);if(l=n||0!==l?l:0,o&&f==f){for(var p=u;p--;)if(t[p]===f)continue e;c.push(l)}else a(t,f,n)||c.push(l)}return c},FO=gw(function(e,t){return Ek(e)?DO(e,t):[]}),LO="[object DOMException]",UO="[object Error]";var zO=function(e){if(!ud(e))return!1;var t=cp(e);return t==UO||t==LO||"string"==typeof e.message&&"string"==typeof e.name&&!Hv(e)},VO=gw(function(e,t){try{return Zv(e,void 0,t)}catch(e){return zO(e)?e:new Error(e)}}),qO=n(function(e,t){function r(e,t,r){var n=Object.getOwnPropertyDescriptor(e,r);if(!n||n.configurable){var i=Object.getOwnPropertyDescriptor(t,r);up(i)?Object.defineProperty(e,r,i):e[r]=t[r]}}Object.defineProperty(t,"__esModule",{value:!0}),t.assignAll=function(e,t,n){void 0===n&&(n=[]);for(var i=0,a=FO.apply(void 0,[Object.getOwnPropertyNames(t)].concat(n));i<a.length;i++){var o=a[i];VO(r,e,t,o)}return e},t.assignProperty=r});r(qO);qO.assignAll,qO.assignProperty;var KO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=["length","name","arguments","called","prototype"];t.wrapConstructor=function(e,t){function n(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.call.apply(t,[this,e].concat(r))}return n.prototype=e.prototype,Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:e.name,writable:!1}),qO.assignAll(n,e,r)}});r(KO);KO.wrapConstructor;var GO=n(function(e,t){function r(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(IO),r(PO),r(RO),r(jO),r(MO),r(NO),r(KO),r(qO)});r(GO);var HO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.InstanceChainMap=new GO.CompositeKeyWeakMap});r(HO);HO.InstanceChainMap;var WO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.createDecorator=function(e){var t=this,r=e.applicator;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return function(i,a,o){var s=t._resolveDescriptor(i,a,o),c=s.value,u=s.get,l=s.set;return HO.InstanceChainMap.has([i,a])||(vp(c)?s.value=GO.copyMetadata(r.apply({config:e,target:i,value:c,args:n}),c):vp(u)&&e.getter?s.get=GO.copyMetadata(r.apply({config:e,target:i,value:u,args:n}),u):vp(l)&&e.setter&&(s.set=GO.copyMetadata(r.apply({config:e,target:i,value:l,args:n}),u))),s}}},e.prototype.createInstanceDecorator=function(e){var t=this,r=e.applicator,n=e.bound;return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return function(a,o,s){var c=t._resolveDescriptor(a,o,s),u=c.value,l=c.writable,f=c.enumerable,p=c.configurable,d=c.get,h=c.set,v=!HO.InstanceChainMap.has([a,o]),m=HO.InstanceChainMap.get([a,o])||{fns:[],properties:[]},g=v&&vp(d),y=v&&vp(h),b=v&&vp(u),w=v&&!g&&!y&&!b;if(m.properties.push(o),m.fns.push(function(o,s,c){return t._isApplicable(c,e)?(n&&(o=GO.bind(o,s)),GO.copyMetadata(r.apply({args:i,target:a,instance:s,value:o,config:e}),o)):o}),HO.InstanceChainMap.set([a,o],m),!v)return c;m.isSetter=y,m.isGetter=g,m.isMethod=b,m.isProperty=w;var _=function(e,t,r){return m.fns.reduce(function(e,n){return n(e,r,t)},e)},E=function(e){var t=d||void 0,r=h||void 0;if(g||y)g&&(t=_(d,{value:d,getter:!0},e)),y&&(r=_(h,{value:h,setter:!0},e)),Object.defineProperty(e,o,{enumerable:f,configurable:p,get:t,set:r});else if(b||w){var n=_(u,b?{value:u,method:!0}:{value:u,property:!0},e);Object.defineProperty(e,o,{writable:l,enumerable:f,configurable:p,value:n})}};return(b||w)&&(delete c.value,delete c.writable),c.get=function(){E(this);var e=Object.getOwnPropertyDescriptor(this,o);return e.get?e.get.call(this):e.value},c.set=function(e){E(this);var t=Object.getOwnPropertyDescriptor(this,o);t.set?t.set.call(this,e):(w||b)&&(this[o]=e)},c}}},e.prototype._isApplicable=function(e,t){return!Boolean(e.getter&&!t.getter||e.setter&&!t.setter||e.method&&!t.method||e.property&&!t.property)},e.prototype._resolveDescriptor=function(e,t,r){return r||(Object.getOwnPropertyDescriptor(e,t)||{})},e}();t.InternalDecoratorFactory=r,t.DecoratorFactory=new r});r(WO);WO.InternalDecoratorFactory,WO.DecoratorFactory;var $O=n(function(e,t){function r(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(AO),r(WO),r(HO)});r($O);var YO="Expected a function";var JO=function(e,t){if("function"!=typeof t)throw new TypeError(YO);return e=H_(e),function(){if(--e<1)return t.apply(this,arguments)}},QO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(){}}();t.Applicator=r});r(QO);QO.Applicator;var ZO=function(e,t){return(ZO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};var XO=function(){return(XO=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function eR(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function tR(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o}function rR(e){return this instanceof rR?(this.v=e,this):new rR(e)}var nR=Object.freeze({__extends:function(e,t){function r(){this.constructor=e}ZO(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},get __assign(){return XO},__rest:function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&(r[n[i]]=e[n[i]])}return r},__decorate:function(e,t,r,n){var i,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,r,o):i(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},__param:function(e,t){return function(r,n){t(r,n,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,r,n){return new(r||(r=Promise))(function(i,a){function o(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,s)}c((n=n.apply(e,t||[])).next())})},__generator:function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},__exportStar:function(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])},__values:eR,__read:tR,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(tR(arguments[t]));return e},__await:rR,__asyncGenerator:function(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),a=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){a.push([e,t,r,n])>1||s(e,t)})})}function s(e,t){try{(r=i[e](t)).value instanceof rR?Promise.resolve(r.value.v).then(c,u):l(a[0][2],r)}catch(e){l(a[0][3],e)}var r}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}},__asyncDelegator:function(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:rR(e[n](t)),done:"return"===n}:i?i(t):t}:i}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=eR(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,i,(t=e[r](t)).done,t.value)})}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}}}),iR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t){void 0===t&&(t={});var r=e.call(this)||this;return r._config=t,r}return nR.__extends(t,e),Object.defineProperty(t.prototype,"post",{get:function(){return!0===this._config.post},enumerable:!0,configurable:!0}),t.prototype.apply=function(e){var t=e.config.execute,r=e.value,n=void 0===r?rm:r,i=e.args,a=e.target,o=this;return function(){for(var e=this,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var c=i.map(function(t){return GO.resolveFunction(t,e,a)}).slice();return o.post?c.push(n):c.unshift(n),t.apply(void 0,c).apply(this,r)}},t}(QO.Applicator);t.ComposeApplicator=r});r(iR);iR.ComposeApplicator;var aR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nR.__extends(t,e),t.prototype.apply=function(e){var t=e.args,r=e.target,n=e.config.execute;return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return n.apply(void 0,[GO.resolveFunction(t[0],this,r)].concat(t.slice(1))).apply(this,e)}},t}(QO.Applicator);t.PartialApplicator=r});r(aR);aR.PartialApplicator;var oR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nR.__extends(t,e),t.prototype.apply=function(e){var t=e.config.execute,r=e.value,n=e.args;return nE.apply(void 0,[t,r].concat(n))},t}(QO.Applicator);t.PartialedApplicator=r});r(oR);oR.PartialedApplicator;var sR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nR.__extends(t,e),t.prototype.apply=function(e){var t=e.args,r=e.target,n=e.value,i=e.config.execute;return function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];var o=n,s=0;return vp(o)||(o=GO.resolveFunction(t[0],this,r),s=1),i.apply(void 0,[o].concat(t.slice(s))).apply(this,e)}},t}(QO.Applicator);t.PartialValueApplicator=r});r(sR);sR.PartialValueApplicator;var cR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nR.__extends(t,e),t.prototype.apply=function(e){var t=e.config,r=t.execute,n=(t.bound,e.args),i=e.value;return r.apply(void 0,n.concat([i]))},t}(QO.Applicator);t.PostValueApplicator=r});r(cR);cR.PostValueApplicator;var uR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nR.__extends(t,e),t.prototype.apply=function(e){var t=e.value,r=e.config.execute,n=e.args;return r.apply(void 0,[t].concat(n))},t}(QO.Applicator);t.PreValueApplicator=r});r(uR);uR.PreValueApplicator;var lR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nR.__extends(t,e),t.prototype.apply=function(e){var t=e.args,r=e.config.execute,n=e.target,i=e.value;return function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return r(GO.resolveFunction(t[0],this,n),i).apply(this,e)}},t}(QO.Applicator);t.WrapApplicator=r});r(lR);lR.WrapApplicator;var fR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nR.__extends(t,e),t.prototype.apply=function(e){var t=e.value,r=e.config.execute,n=e.args,i=e.instance;e.target;return i?r.apply(void 0,[t,i].concat(n)):t},t}(QO.Applicator);t.BindApplicator=r});r(fR);fR.BindApplicator;var pR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nR.__extends(t,e),t.prototype.apply=function(e){var t=e.args,r=(e.target,e.config.execute),n=e.value;return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return r.apply(void 0,[n.bind(this)].concat(e,t))}},t}(QO.Applicator);t.InvokeApplicator=r});r(pR);pR.InvokeApplicator;var dR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nR.__extends(t,e),t.prototype.apply=function(e){var t=e.value,r=e.instance,n=e.config.execute,i=e.args,a=e.target,o=GO.resolveFunction(vp(i[0])?i[0]:up(i[0])?i[0].resolver:i[0],r,a,!1);o&&r&&(o=o.bind(r));var s=o?n(t,o):n(t);if(up(i[0])){var c=i[0],u=c.cache,l=c.type;u?s.cache=u:vp(l)&&(s.cache=new l)}return s},t}(QO.Applicator);t.MemoizeApplicator=r});r(dR);dR.MemoizeApplicator;var hR=n(function(e,t){function r(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r(QO),r(iR),r(aR),r(oR),r(sR),r(cR),r(uR),r(lR),r(fR),r(pR),r(dR)});r(hR);var vR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(JO,new hR.PostValueApplicator,{setter:!0}));function n(e){return r(e)}t.After=n,t.after=n,t.default=r});r(vR);vR.After,vR.after;var mR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(JO,new hR.PostValueApplicator,{setter:!0}));function n(e){return r(e)}t.AfterAll=n,t.afterAll=n,t.default=r});r(mR);mR.AfterAll,mR.afterAll;var gR=128;var yR=function(e,t,r){return t=r?void 0:t,t=e&&null==t?e.length:t,tE(e,gR,void 0,void 0,void 0,void 0,t)},bR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(yR,new hR.PreValueApplicator));function n(e){return r(e)}t.Ary=n,t.ary=n,t.default=r});r(bR);bR.Ary,bR.ary;var wR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(function(e){return nE(VO,e)},new hR.PreValueApplicator));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.Attempt=n,t.attempt=n,t.default=r});r(wR);wR.Attempt,wR.attempt;var _R=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(Ck,new hR.PostValueApplicator,{setter:!0}));function n(e){return r(e)}t.Before=n,t.before=n,t.default=r});r(_R);_R.Before,_R.before;var ER=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(Ck,new hR.PostValueApplicator,{setter:!0}));function n(e){return r(e)}t.BeforeAll=n,t.beforeAll=n,t.default=r});r(ER);ER.BeforeAll,ER.beforeAll;var SR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(GI,new hR.BindApplicator));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.Bind=n,t.bind=n,t.default=r});r(SR);SR.Bind,SR.bind;var xR=n(function(e,t){function r(e){return void 0===e&&(e=[]),function(t){return GO.wrapConstructor(t,function(r){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];!function(e,t,r){void 0===r&&(r=[]);var n=e.prototype;for(;n&&n!==Object.prototype;){for(var i=0,a=Object.getOwnPropertyNames(n);i<a.length;i++){var o=a[i],s=!r.length||-1!==r.indexOf(o),c=Object.getOwnPropertyDescriptor(n,o);if(s&&"constructor"!==o&&!t.hasOwnProperty(o)){if(c.get){var u=$O.InstanceChainMap.get([n,o]);if(!u||!u.isMethod)continue}var l=t[o];vp(l)&&Object.defineProperty(t,o,{configurable:!0,enumerable:c.enumerable,value:GO.copyMetadata(l.bind(t),l),writable:c.writable})}}n=Object.getPrototypeOf(n)}}(t,this,e),r.apply(this,n)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.BindAll=r,t.bindAll=r,t.default=r});r(xR);xR.BindAll,xR.bindAll;var CR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(aT,new hR.PreValueApplicator,{bound:!0}));function n(e){return r(e)}t.Curry=n,t.curry=n,t.default=r});r(CR);CR.Curry,CR.curry;var kR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(aT,new hR.PreValueApplicator));function n(e){return r(e)}t.CurryAll=n,t.curryAll=n,t.default=r});r(kR);kR.CurryAll,kR.curryAll;var TR=16;function AR(e,t,r){var n=tE(e,TR,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=AR.placeholder,n}AR.placeholder={};var IR=AR,PR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(IR,new hR.PreValueApplicator,{bound:!0}));function n(e){return r(e)}t.CurryRight=n,t.curryRight=n,t.default=r});r(PR);PR.CurryRight,PR.curryRight;var OR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(IR,new hR.PreValueApplicator));function n(e){return r(e)}t.CurryRightAll=n,t.curryRightAll=n,t.default=r});r(OR);OR.CurryRightAll,OR.curryRightAll;var RR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(rT,new hR.PreValueApplicator,{setter:!0}));function n(e,t){return r(e,t)}t.Debounce=n,t.debounce=n,t.default=r});r(RR);RR.Debounce,RR.debounce;var jR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(rT,new hR.PreValueApplicator));function n(e,t){return r(e,t)}t.DebounceAll=n,t.debounceAll=n,t.default=r});r(jR);jR.DebounceAll,jR.debounceAll;var MR="Expected a function";var NR=function(e,t,r){if("function"!=typeof e)throw new TypeError(MR);return setTimeout(function(){e.apply(void 0,r)},t)},BR=gw(function(e,t){return NR(e,1,t)}),DR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(BR,new hR.InvokeApplicator,{setter:!0}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.Defer=n,t.defer=n,t.default=r});r(DR);DR.Defer,DR.defer;var FR=gw(function(e,t,r){return NR(e,V_(t)||0,r)}),LR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return FR.apply(void 0,[e.bind(this),t].concat(n,r))}},new hR.PreValueApplicator,{setter:!0}));function n(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.apply(void 0,[e].concat(t))}t.Delay=n,t.delay=n,t.default=r});r(LR);LR.Delay,LR.delay;var UR=512;var zR=function(e){return tE(e,UR)},VR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(zR,new hR.PartialValueApplicator,{property:!0}));function n(e){return r(e)}t.Flip=n,t.flip=n,t.default=r});r(VR);VR.Flip,VR.flip;var qR="Expected a function",KR=8,GR=32,HR=128,WR=256;var $R=function(e){return um(function(t){var r=t.length,n=r,i=Lw.prototype.thru;for(e&&t.reverse();n--;){var a=t[n];if("function"!=typeof a)throw new TypeError(qR);if(i&&!o&&"wrapper"==Dw(a))var o=new Lw([],!0)}for(n=o?n:r;++n<r;){a=t[n];var s=Dw(a),c="wrapper"==s?Mw(a):void 0;o=c&&Kw(c[0])&&c[1]==(HR|KR|GR|WR)&&!c[4].length&&1==c[9]?o[Dw(c[0])].apply(o,c[3]):1==a.length&&Kw(a)?o[s]():o.thru(a)}return function(){var e=arguments,n=e[0];if(o&&1==e.length&&md(n))return o.plant(n).value();for(var i=0,a=r?t[i].apply(this,e):n;++i<r;)a=t[i].call(this,a);return a}})},YR=$R(),JR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(YR,new hR.ComposeApplicator({post:!0}),{property:!0}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.Flow=n,t.flow=n,t.default=r});r(JR);JR.Flow,JR.flow;var QR=$R(!0),ZR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(QR,new hR.ComposeApplicator({post:!1}),{property:!0}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.FlowRight=n,t.flowRight=n,t.default=r});r(ZR);ZR.FlowRight,ZR.flowRight;var XR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(Ev,new hR.MemoizeApplicator));function n(e){return r(e)}t.Memoize=n,t.memoize=n,t.default=r});r(XR);XR.Memoize,XR.memoize;var ej=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(Ev,new hR.MemoizeApplicator));function n(e){return r(e)}t.MemoizeAll=n,t.memoizeAll=n,t.default=r});r(ej);ej.MemoizeAll,ej.memoizeAll;var tj=n(function(e,t){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return cC.apply(void 0,[t.prototype].concat(e)),t}}Object.defineProperty(t,"__esModule",{value:!0}),t.Mixin=r,t.mixin=r,t.default=r});r(tj);tj.Mixin,tj.mixin;var rj="Expected a function";var nj=function(e){if("function"!=typeof e)throw new TypeError(rj);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}},ij=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(nj,new hR.PartialValueApplicator,{property:!0}));function n(e){return r(e)}t.Negate=n,t.negate=n,t.default=r});r(ij);ij.Negate,ij.negate;var aj=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(kk,new hR.PreValueApplicator,{setter:!0}));function n(){return r()}t.Once=n,t.once=n,t.default=r});r(aj);aj.Once,aj.once;var oj=gw,sj=Math.min,cj=oj(function(e,t){var r=(t=1==t.length&&md(t[0])?jf(t[0],kd(tO)):jf(Jv(t,1),kd(tO))).length;return gw(function(n){for(var i=-1,a=sj(n.length,r);++i<a;)n[i]=t[i].call(this,n[i]);return Zv(e,this,n)})}),uj=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(cj,new hR.PreValueApplicator,{setter:!0}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.OverArgs=n,t.overArgs=n,t.default=r});r(uj);uj.OverArgs,uj.overArgs;var lj=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(nE,new hR.PartialApplicator,{property:!0,method:!1}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.Partial=n,t.partial=n,t.default=r});r(lj);lj.Partial,lj.partial;var fj=gw(function(e,t){var r=m_(t,p_(fj));return tE(e,64,void 0,t,r)});fj.placeholder={};var pj=fj,dj=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(pj,new hR.PartialApplicator,{property:!0,method:!1}));function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e)}t.PartialRight=n,t.partialRight=n,t.default=r});r(dj);dj.PartialRight,dj.partialRight;var hj=um(function(e,t){return tE(e,256,void 0,void 0,void 0,t)}),vj=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(hj,new hR.PartialValueApplicator,{property:!0}));function n(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.apply(void 0,[e].concat(t))}t.Rearg=n,t.rearg=n,t.default=r});r(vj);vj.Rearg,vj.rearg;var mj="Expected a function";var gj=function(e,t){if("function"!=typeof e)throw new TypeError(mj);return t=void 0===t?t:H_(t),gw(e,t)},yj=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(gj,new hR.PreValueApplicator));function n(e){return r(e)}t.Rest=n,t.rest=n,t.default=r});r(yj);yj.Rest,yj.rest;var bj=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:Dv(e,t,r)},wj="Expected a function",_j=Math.max;var Ej=function(e,t){if("function"!=typeof e)throw new TypeError(wj);return t=null==t?0:_j(H_(t),0),gw(function(r){var n=r[t],i=bj(r,0,t);return n&&eh(i,n),Zv(e,this,i)})},Sj=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(Ej,new hR.PreValueApplicator));function n(e){return r(e)}t.Spread=n,t.spread=n,t.default=r});r(Sj);Sj.Spread,Sj.spread;var xj=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(function(e){return GO.returnAtIndex(e,0)},new hR.PreValueApplicator));function n(){return r()}t.Tap=n,t.tap=n,t.default=r});r(xj);xj.Tap,xj.tap;var Cj="Expected a function";var kj=function(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new TypeError(Cj);return up(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),rT(e,t,{leading:n,maxWait:t,trailing:i})},Tj=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(kj,new hR.PreValueApplicator,{setter:!0,getter:!0})),n=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(kj,new hR.PreValueApplicator,{getter:!0})),i=$O.DecoratorFactory.createInstanceDecorator(new $O.DecoratorConfig(kj,new hR.PreValueApplicator,{setter:!0}));function a(e,t){return r(e,t)}function o(e,t){return n(e,t)}function s(e,t){return i(e,t)}t.Throttle=a,t.throttle=a,t.ThrottleGetter=o,t.throttleGetter=o,t.ThrottleSetter=s,t.throttleSetter=s,t.default=r});r(Tj);Tj.Throttle,Tj.throttle,Tj.ThrottleGetter,Tj.throttleGetter,Tj.ThrottleSetter,Tj.throttleSetter;var Aj=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(kj,new hR.PreValueApplicator,{setter:!0}));function n(e,t){return r(e,t)}t.ThrottleAll=n,t.throttleAll=n,t.default=r});r(Aj);Aj.ThrottleAll,Aj.throttleAll;var Ij=function(e){return yR(e,1)},Pj=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(Ij,new hR.PreValueApplicator));function n(){return r()}t.Unary=n,t.unary=n,t.default=r});r(Pj);Pj.Unary,Pj.unary;var Oj=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=$O.DecoratorFactory.createDecorator(new $O.DecoratorConfig(iE,new hR.WrapApplicator));function n(e){return r(e)}t.Wrap=n,t.wrap=n,t.default=r});r(Oj);Oj.Wrap,Oj.wrap;var Rj=n(function(e,t){function r(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),r($O),r(vR),r(mR),r(bR),r(wR),r(_R),r(ER),r(SR),r(xR),r(CR),r(kR),r(PR),r(OR),r(RR),r(jR),r(DR),r(LR),r(VR),r(JR),r(ZR),r(XR),r(ej),r(tj),r(ij),r(aj),r(uj),r(lj),r(dj),r(vj),r(yj),r(Sj),r(xj),r(Tj),r(Aj),r(Pj),r(Oj)});r(Rj);var jj=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(lu),n=a(vw),i=a(mb);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){var i=n.initializer&&n.initializer();(0,r.default)(n,"value"),(0,r.default)(n,"initializer"),(0,r.default)(n,"writable"),n.get=function(){var e=o.get(this,t);return void 0!==e?e:i},n.set=function(e){var r=this[t];r!==e&&(o.set(this,t,e),this.trigger("change:"+t,e,r),this.trigger("change"))}};var o=new((0,Zx.make)(i.default,n.default))});r(jj);var Mj=n(function(e){var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,names:["value","direction","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+" %s"+(e.config?" %s":"")}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach(function(e){t[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})}),Nj=(Mj.v,Mj.o,Mj.s,Mj.i,Mj.u,Mj.e,Mj.p,Mj.z,Mj.r,Mj.t,Mj.c,Mj.b,Mj.m,Mj.a,n(function(e,t){var r=function(e){return String(Number(e))===e?Number(e):e},n=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var a=e.push?{}:i?t[e.name]:t;!function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var a=0;a<n.length;a+=1)null!=e[a+1]&&(t[n[a]]=r(e[a+1]))}(n.match(e.reg),a,e.names,e.name),e.push&&t[e.push].push(a)},i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},r=[],a=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach(function(e){var t=e[0],i=e.slice(2);"m"===t&&(r.push({rtp:[],fmtp:[]}),a=r[r.length-1]);for(var o=0;o<(Mj[t]||[]).length;o+=1){var s=Mj[t][o];if(s.reg.test(i))return n(s,a,i)}}),t.media=r,t};var a=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=r(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/\;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(a,{})})},t.parseSimulcastStreamList=function(e){return e.split(";").map(function(e){return e.split(",").map(function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}})})}})),Bj=(Nj.parse,Nj.parseParams,Nj.parseFmtpConfig,Nj.parsePayloads,Nj.parseRemoteCandidates,Nj.parseImageAttributes,Nj.parseSimulcastStreamList,/%[sdv%]/g),Dj=function(e,t,r){var n=[e+"="+(t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var a=t.names[i];t.name?n.push(r[t.name][a]):n.push(r[t.names[i]])}else n.push(r[t.name]);return function(e){var t=1,r=arguments,n=r.length;return e.replace(Bj,function(e){if(t>=n)return e;var i=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})}.apply(null,n)},Fj=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Lj=["i","c","b","a"],Uj={write:function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var r=t.outerOrder||Fj,n=t.innerOrder||Lj,i=[];return r.forEach(function(t){Mj[t].forEach(function(r){r.name in e&&null!=e[r.name]?i.push(Dj(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach(function(e){i.push(Dj(t,r,e))})})}),e.media.forEach(function(e){i.push(Dj("m",Mj.m[0],e)),n.forEach(function(t){Mj[t].forEach(function(r){r.name in e&&null!=e[r.name]?i.push(Dj(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach(function(e){i.push(Dj(t,r,e))})})})}),i.join("\r\n")+"\r\n"},parse:Nj.parse,parseFmtpConfig:Nj.parseFmtpConfig,parseParams:Nj.parseParams,parsePayloads:Nj.parsePayloads,parseRemoteCandidates:Nj.parseRemoteCandidates,parseImageAttributes:Nj.parseImageAttributes,parseSimulcastStreamList:Nj.parseSimulcastStreamList};var zj=function(e,t){var r=[];return Ak(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r};var Vj=function(e,t){return(md(e)?$d:zj)(e,tO(t,3))},qj=!0,Kj=!0;function Gj(e,t,r){var n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}var Hj={extractVersion:Gj,wrapPeerConnectionEvent:function(e,t,r){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return i.apply(this,arguments);var a=function(e){var t=r(e);t&&n(t)};return this._eventMap=this._eventMap||{},this._eventMap[n]=a,i.apply(this,[e,a])};var a=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[r])return a.apply(this,arguments);var n=this._eventMap[r];return delete this._eventMap[r],a.apply(this,[e,n])},Object.defineProperty(n,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(qj=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Kj=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){if("object"==typeof window){if(qj)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},deprecated:function(e,t){Kj&&console.warn(e+" is deprecated, please use "+t+" instead.")},detectBrowser:function(e){var t=e&&e.navigator,r={browser:null,version:null};if(void 0===e||!e.navigator)return r.browser="Not a browser.",r;if(t.mozGetUserMedia)r.browser="firefox",r.version=Gj(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)r.browser="chrome",r.version=Gj(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))r.browser="edge",r.version=Gj(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return r.browser="Not a supported browser.",r;r.browser="safari",r.version=Gj(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return r}},Wj=Hj.log,$j=Hj.log;function Yj(e,t,r){var n=r?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var a=[];return e.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&a.push(e)}),a.forEach(function(t){e.forEach(function(r){r.type===n&&r.trackId===t.id&&function e(t,r,n){r&&!n.has(r.id)&&(n.set(r.id,r),Object.keys(r).forEach(function(i){i.endsWith("Id")?e(t,t.get(r[i]),n):i.endsWith("Ids")&&r[i].forEach(function(r){e(t,t.get(r),n)})}))}(e,r,i)})}),i}var Jj={shimGetUserMedia:function(e){var t=Hj.detectBrowser(e),r=e&&e.navigator,n=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n="object"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var a={};"number"==typeof n.ideal?(a[i("min",r)]=n.ideal,t.optional.push(a),(a={})[i("max",r)]=n.ideal,t.optional.push(a)):(a[i("",r)]=n.ideal,t.optional.push(a))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",r)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,r)]=n[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){var a=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};a((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=n(e.audio)}if(e&&"object"==typeof e.video){var o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});var s,c=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||c)&&(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?s=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(s=["front"]),s))return r.mediaDevices.enumerateDevices().then(function(t){var r=(t=t.filter(function(e){return"videoinput"===e.kind})).find(function(e){return s.some(function(t){return-1!==e.label.toLowerCase().indexOf(t)})});return!r&&t.length&&-1!==s.indexOf("back")&&(r=t[t.length-1]),r&&(e.video.deviceId=o.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=n(e.video),Wj("chrome: "+JSON.stringify(e)),i(e)});e.video=n(e.video)}return Wj("chrome: "+JSON.stringify(e)),i(e)},a=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};r.getUserMedia=function(e,t,n){i(e,function(e){r.webkitGetUserMedia(e,t,function(e){n&&n(a(e))})})};var o=function(e){return new Promise(function(t,n){r.getUserMedia(e,t,n)})};if(r.mediaDevices||(r.mediaDevices={getUserMedia:o,enumerateDevices:function(){return new Promise(function(t){var r={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources(function(e){t(e.map(function(e){return{label:e.label,kind:r[e.kind],deviceId:e.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),r.mediaDevices.getUserMedia){var s=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return i(e,function(e){return s(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return t},function(e){return Promise.reject(a(e))})})}}else r.mediaDevices.getUserMedia=function(e){return o(e)};void 0===r.mediaDevices.addEventListener&&(r.mediaDevices.addEventListener=function(){Wj("Dummy mediaDevices.addEventListener called.")}),void 0===r.mediaDevices.removeEventListener&&(r.mediaDevices.removeEventListener=function(){Wj("Dummy mediaDevices.removeEventListener called.")})},shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(e){if("object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype)Hj.wrapPeerConnectionEvent(e,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return r._ontrackpoly||(r._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(n){var i;i=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===n.track.id}):{track:n.track};var a=new Event("track");a.track=n.track,a.receiver=i,a.transceiver={receiver:i},a.streams=[t.stream],r.dispatchEvent(a)}),t.stream.getTracks().forEach(function(n){var i;i=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===n.id}):{track:n};var a=new Event("track");a.track=n,a.receiver=i,a.transceiver={receiver:i},a.streams=[t.stream],r.dispatchEvent(a)})},r.addEventListener("addstream",r._ontrackpoly)),t.apply(r,arguments)}}},shimGetSendersWithDtmf:function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;r._senders=r._senders||[],i.apply(r,[e]),e.getTracks().forEach(function(e){r._senders.push(t(r,e))})};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._senders=t._senders||[],a.apply(t,[e]),e.getTracks().forEach(function(e){var r=t._senders.find(function(t){return t.track===e});r&&t._senders.splice(t._senders.indexOf(r),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var o=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=o.apply(e,[]);return t.forEach(function(t){t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSenderReceiverGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(e,[]);return r.forEach(function(t){t._pc=e}),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return Yj(t,e.track,!0)})}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=n.apply(e,[]);return t.forEach(function(t){t._pc=e}),t}),Hj.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return Yj(t,e.track,!1)})}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t,r,n,a=arguments[0];return this.getSenders().forEach(function(e){e.track===a&&(t?n=!0:t=e)}),this.getReceivers().forEach(function(e){return e.track===a&&(r?n=!0:r=e),e.track===a}),n||t&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}}},shimSourceObject:function(e){var t=e&&e.URL;"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var r=this;this._srcObject=e,this.src&&t.revokeObjectURL(this.src),e?(this.src=t.createObjectURL(e),e.addEventListener("addtrack",function(){r.src&&t.revokeObjectURL(r.src),r.src=t.createObjectURL(e)}),e.addEventListener("removetrack",function(){r.src&&t.revokeObjectURL(r.src),r.src=t.createObjectURL(e)})):this.src=""}}))},shimAddTrackRemoveTrackWithNative:function(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")});var n=t.getSenders();r.apply(this,arguments);var i=t.getSenders().filter(function(e){return-1===n.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]}),i.apply(this,arguments)}},shimAddTrackRemoveTrack:function(e){if(e.RTCPeerConnection){var t=Hj.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return this.shimAddTrackRemoveTrackWithNative(e);var r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=r.apply(this);return e._reverseStreams=e._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(r._streams=r._streams||{},r._reverseStreams=r._reverseStreams||{},t.getTracks().forEach(function(e){if(r.getSenders().find(function(t){return t.track===e}))throw new DOMException("Track already exists.","InvalidAccessError")}),!r._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());r._streams[t.id]=i,r._reverseStreams[i.id]=t,t=i}n.apply(r,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{},t._reverseStreams=t._reverseStreams||{},i.apply(t,[t._streams[e.id]||e]),delete t._reverseStreams[t._streams[e.id]?t._streams[e.id].id:e.id],delete t._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var n=this;if("closed"===n.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");n._streams=n._streams||{},n._reverseStreams=n._reverseStreams||{};var a=n._streams[r.id];if(a)a.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))});else{var o=new e.MediaStream([t]);n._streams[r.id]=o,n._reverseStreams[o.id]=r,n.addStream(o)}return n.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(e,[function(r){var n=s(e,r);t[0].apply(null,[n])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):r.apply(e,arguments).then(function(t){return s(e,t)})}});var a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:r})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};var o=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=o.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t,r=this;if("closed"===r.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===r))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");r._streams=r._streams||{},Object.keys(r._streams).forEach(function(n){r._streams[n].getTracks().find(function(t){return e.track===t})&&(t=r._streams[n])}),t&&(1===t.getTracks().length?r.removeStream(r._reverseStreams[t.id]):t.removeTrack(e.track),r.dispatchEvent(new Event("negotiationneeded")))}}function s(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,"g"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}},shimPeerConnection:function(e){var t=Hj.detectBrowser(e);if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=function(t,r){return $j("PeerConnection"),t&&t.iceTransportPolicy&&(t.iceTransports=t.iceTransportPolicy),new e.webkitRTCPeerConnection(t,r)},e.RTCPeerConnection.prototype=e.webkitRTCPeerConnection.prototype,e.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.webkitRTCPeerConnection.generateCertificate}})),e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,t,n){var i=this,a=arguments;if(arguments.length>0&&"function"==typeof e)return r.apply(this,arguments);if(0===r.length&&(0===arguments.length||"function"!=typeof arguments[0]))return r.apply(this,[]);var o=function(e){var t={};return e.result().forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(function(t){r[t]=e.stat(t)}),t[r.id]=r}),t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){return r.apply(this,[function(e){a[1](s(o(e)))},arguments[0]])}return new Promise(function(e,t){r.apply(i,[function(t){e(s(o(t)))},t])}).then(t,n)},t.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=arguments,t=this,n=new Promise(function(n,i){r.apply(t,[e[0],n,i])});return e.length<2?n:n.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),t.version<52&&["createOffer","createAnswer"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var t=1===arguments.length?arguments[0]:void 0;return new Promise(function(n,i){r.apply(e,[n,i,t])})}return r.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}});var n=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},fixNegotiationNeeded:function(e){Hj.wrapPeerConnectionEvent(e,"negotiationneeded",function(e){if("stable"===e.target.signalingState)return e})},shimGetDisplayMedia:function(e,t){!e.navigator||!e.navigator.mediaDevices||"getDisplayMedia"in e.navigator.mediaDevices||("function"==typeof t?(e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(function(t){var n=r.video&&r.video.width,i=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:a||3}},n&&(r.video.mandatory.maxWidth=n),i&&(r.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(r)})},e.navigator.getDisplayMedia=function(t){return Hj.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),e.navigator.mediaDevices.getDisplayMedia(t)}):console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},Qj=n(function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},t.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},t.getDescription=function(e){var r=t.splitSections(e);return r&&r[0]},t.getMediaSections=function(e){var r=t.splitSections(e);return r.shift(),r},t.matchPrefix=function(e,r){return t.splitLines(e).filter(function(e){return 0===e.indexOf(r)})},t.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case"raddr":r.relatedAddress=t[n+1];break;case"rport":r.relatedPort=parseInt(t[n+1],10);break;case"tcptype":r.tcpType=t[n+1];break;case"ufrag":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:r[t[n]]=t[n+1]}return r},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,r={},n=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<n.length;i++)r[(t=n[i].trim().split("="))[0].trim()]=t[1];return r},t.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach(function(t){e.parameters[t]?n.push(t+"="+e.parameters[t]):n.push(t)}),t+="a=fmtp:"+r+" "+n.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(":",t);return n>-1?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},t.getMid=function(e){var r=t.matchPrefix(e,"a=mid:")[0];if(r)return r.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,r){return{role:"auto",fingerprints:t.matchPrefix(e+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),r},t.getIceParameters=function(e,r){var n=t.splitLines(e);return{usernameFragment:(n=n.concat(t.splitLines(r))).filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=t.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var a=n[i],o=t.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(o){var s=t.parseRtpMap(o),c=t.matchPrefix(e,"a=fmtp:"+a+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(t.parseRtcpFb),r.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach(function(e){r.headerExtensions.push(t.parseExtmap(e))}),r},t.writeRtpDescription=function(e,r){var n="";n+="m="+e+" ",n+=r.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=r.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",r.codecs.forEach(function(e){n+=t.writeRtpMap(e),n+=t.writeFmtp(e),n+=t.writeRtcpFb(e)});var i=0;return r.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(n+="a=maxptime:"+i+"\r\n"),n+="a=rtcp-mux\r\n",r.headerExtensions&&r.headerExtensions.forEach(function(e){n+=t.writeExtmap(e)}),n},t.parseRtpEncodingParameters=function(e){var r,n=[],i=t.parseRtpParameters(e),a=-1!==i.fecMechanisms.indexOf("RED"),o=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map(function(e){return t.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=s.length>0&&s[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(r=u[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&r&&(t.rtx={ssrc:r}),n.push(t),a&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},n.push(t))}}),0===n.length&&c&&n.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,n.forEach(function(e){e.maxBitrate=l})),n},t.parseRtcpParameters=function(e){var r={},n=t.matchPrefix(e,"a=ssrc:").map(function(e){return t.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];n&&(r.cname=n.value,r.ssrc=n.ssrc);var i=t.matchPrefix(e,"a=rtcp-rsize");r.reducedSize=i.length>0,r.compound=0===i.length;var a=t.matchPrefix(e,"a=rtcp-mux");return r.mux=a.length>0,r},t.parseMsid=function(e){var r,n=t.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(r=n[0].substr(7).split(" "))[0],track:r[1]};var i=t.matchPrefix(e,"a=ssrc:").map(function(e){return t.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return i.length>0?{stream:(r=i[0].value.split(" "))[0],track:r[1]}:void 0},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,r,n){var i=void 0!==r?r:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,r,n,i){var a=t.writeRtpDescription(e.kind,r);if(a+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),a+="a=mid:"+e.mid+"\r\n",e.direction?a+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var o="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";a+="a="+o,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),a},t.getDirection=function(e,r){for(var n=t.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var r=t.splitLines(e)[0].substr(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},t.parseOLine=function(e){var r=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var r=t.splitLines(e),n=0;n<r.length;n++)if(r[n].length<2||"="!==r[n].charAt(1))return!1;return!0},e.exports=t});function Zj(e,t,r,n,i){var a=Qj.writeRtpDescription(e.kind,t);if(a+=Qj.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=Qj.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":i||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var o=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=o;var s="msid:"+(n?n.id:"-")+" "+o+"\r\n";a+="a="+s,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+Qj.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+Qj.localCName+"\r\n"),a}function Xj(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},i=function(e,t,r,i){var a=n(e.parameters.apt,r),o=n(t.parameters.apt,i);return a&&o&&a.name.toLowerCase()===o.name.toLowerCase()};return e.codecs.forEach(function(n){for(var a=0;a<t.codecs.length;a++){var o=t.codecs[a];if(n.name.toLowerCase()===o.name.toLowerCase()&&n.clockRate===o.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&o.parameters.apt&&!i(n,o,e.codecs,t.codecs))continue;(o=JSON.parse(JSON.stringify(o))).numChannels=Math.min(n.numChannels,o.numChannels),r.codecs.push(o),o.rtcpFeedback=o.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var n=0;n<t.headerExtensions.length;n++){var i=t.headerExtensions[n];if(e.uri===i.uri){r.headerExtensions.push(i);break}}}),r}function eM(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function tM(e,t){var r=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return r||e.addRemoteCandidate(t),!r}function rM(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}var nM=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function n(t,r,n,i){var a=new Event("track");a.track=r,a.receiver=n,a.transceiver={receiver:n},a.streams=i,e.setTimeout(function(){t._dispatchEvent("track",a)})}var i=function(r){var n=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){n[e]=i[e].bind(i)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw rM("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var i="string"==typeof n;return i&&(n=[n]),n=n.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||r?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(r=!0,!0)}),delete e.url,e.urls=i?n[0]:n,!!n.length}})}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var a=r.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=Qj.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(i.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(i.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),i.prototype.onicecandidate=null,i.prototype.onaddstream=null,i.prototype.ontrack=null,i.prototype.onremovestream=null,i.prototype.onsignalingstatechange=null,i.prototype.oniceconnectionstatechange=null,i.prototype.onconnectionstatechange=null,i.prototype.onicegatheringstatechange=null,i.prototype.onnegotiationneeded=null,i.prototype.ondatachannel=null,i.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},i.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},i.prototype.getConfiguration=function(){return this._config},i.prototype.getLocalStreams=function(){return this.localStreams},i.prototype.getRemoteStreams=function(){return this.remoteStreams},i.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();n.iceTransport=i.iceTransport,n.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(n),n},i.prototype.addTrack=function(t,r){if(this._isClosed)throw rM("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find(function(e){return e.track===t}))throw rM("InvalidAccessError","Track already exists.");for(var i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(n=this.transceivers[i]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),n.track=t,n.stream=r,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},i.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach(function(t){r.addTrack(t,e)});else{var n=e.clone();e.getTracks().forEach(function(e,t){var r=n.getTracks()[t];e.addEventListener("enabled",function(e){r.enabled=e.enabled})}),n.getTracks().forEach(function(e){r.addTrack(e,n)})}},i.prototype.removeTrack=function(t){if(this._isClosed)throw rM("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find(function(e){return e.rtpSender===t});if(!r)throw rM("InvalidAccessError","Sender was not created by this connection.");var n=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},i.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e});r&&t.removeTrack(r)})},i.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},i.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},i.prototype._createIceGatherer=function(t,r){var n=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;i.state=r?"completed":"gathering",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),i},i.prototype._gather=function(t,r){var n=this,i=this.transceivers[r].iceGatherer;if(!i.onlocalcandidate){var a=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),i.onlocalcandidate=function(e){if(!(n.usingBundle&&r>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:r};var o=e.candidate,s=!o||0===Object.keys(o).length;if(s)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),o.component=1,o.ufrag=i.getLocalParameters().usernameFragment;var c=Qj.writeCandidate(o);a.candidate=Object.assign(a.candidate,Qj.parseCandidate(c)),a.candidate.candidate=c,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var u=Qj.getMediaSections(n._localDescription.sdp);u[a.candidate.sdpMLineIndex]+=s?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",n._localDescription.sdp=Qj.getDescription(n._localDescription.sdp)+u.join("");var l=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==n.iceGatheringState&&(n.iceGatheringState="gathering",n._emitGatheringStateChange()),s||n._dispatchEvent("icecandidate",a),l&&(n._dispatchEvent("icecandidate",new Event("icecandidate")),n.iceGatheringState="complete",n._emitGatheringStateChange())}},e.setTimeout(function(){a.forEach(function(e){i.onlocalcandidate(e)})},0)}},i.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(r);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:n}},i.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},i.prototype._transceive=function(e,r,n){var i=Xj(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:Qj.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&i.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?i.encodings=e.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},i.prototype.setLocalDescription=function(e){var t,r,n=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(rM("TypeError",'Unsupported type "'+e.type+'"'));if(!eM("setLocalDescription",e.type,n.signalingState)||n._isClosed)return Promise.reject(rM("InvalidStateError","Can not set local "+e.type+" in state "+n.signalingState));if("offer"===e.type)t=Qj.splitSections(e.sdp),r=t.shift(),t.forEach(function(e,t){var r=Qj.parseRtpParameters(e);n.transceivers[t].localCapabilities=r}),n.transceivers.forEach(function(e,t){n._gather(e.mid,t)});else if("answer"===e.type){t=Qj.splitSections(n._remoteDescription.sdp),r=t.shift();var i=Qj.matchPrefix(r,"a=ice-lite").length>0;t.forEach(function(e,t){var a=n.transceivers[t],o=a.iceGatherer,s=a.iceTransport,c=a.dtlsTransport,u=a.localCapabilities,l=a.remoteCapabilities;if(!(Qj.isRejected(e)&&0===Qj.matchPrefix(e,"a=bundle-only").length)&&!a.rejected){var f=Qj.getIceParameters(e,r),p=Qj.getDtlsParameters(e,r);i&&(p.role="server"),n.usingBundle&&0!==t||(n._gather(a.mid,t),"new"===s.state&&s.start(o,f,i?"controlling":"controlled"),"new"===c.state&&c.start(p));var d=Xj(u,l);n._transceive(a,d.codecs.length>0,!1)}})}return n._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?n._updateSignalingState("have-local-offer"):n._updateSignalingState("stable"),Promise.resolve()},i.prototype.setRemoteDescription=function(i){var a=this;if(-1===["offer","answer"].indexOf(i.type))return Promise.reject(rM("TypeError",'Unsupported type "'+i.type+'"'));if(!eM("setRemoteDescription",i.type,a.signalingState)||a._isClosed)return Promise.reject(rM("InvalidStateError","Can not set remote "+i.type+" in state "+a.signalingState));var o={};a.remoteStreams.forEach(function(e){o[e.id]=e});var s=[],c=Qj.splitSections(i.sdp),u=c.shift(),l=Qj.matchPrefix(u,"a=ice-lite").length>0,f=Qj.matchPrefix(u,"a=group:BUNDLE ").length>0;a.usingBundle=f;var p=Qj.matchPrefix(u,"a=ice-options:")[0];return a.canTrickleIceCandidates=!!p&&p.substr(14).split(" ").indexOf("trickle")>=0,c.forEach(function(n,c){var p=Qj.splitLines(n),d=Qj.getKind(n),h=Qj.isRejected(n)&&0===Qj.matchPrefix(n,"a=bundle-only").length,v=p[0].substr(2).split(" ")[2],m=Qj.getDirection(n,u),g=Qj.parseMsid(n),y=Qj.getMid(n)||Qj.generateIdentifier();if(h||"application"===d&&("DTLS/SCTP"===v||"UDP/DTLS/SCTP"===v))a.transceivers[c]={mid:y,kind:d,protocol:v,rejected:!0};else{var b,w,_,E,S,x,C,k,T;!h&&a.transceivers[c]&&a.transceivers[c].rejected&&(a.transceivers[c]=a._createTransceiver(d,!0));var A,I,P=Qj.parseRtpParameters(n);h||(A=Qj.getIceParameters(n,u),(I=Qj.getDtlsParameters(n,u)).role="client"),C=Qj.parseRtpEncodingParameters(n);var O=Qj.parseRtcpParameters(n),R=Qj.matchPrefix(n,"a=end-of-candidates",u).length>0,j=Qj.matchPrefix(n,"a=candidate:").map(function(e){return Qj.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===i.type||"answer"===i.type)&&!h&&f&&c>0&&a.transceivers[c]&&(a._disposeIceAndDtlsTransports(c),a.transceivers[c].iceGatherer=a.transceivers[0].iceGatherer,a.transceivers[c].iceTransport=a.transceivers[0].iceTransport,a.transceivers[c].dtlsTransport=a.transceivers[0].dtlsTransport,a.transceivers[c].rtpSender&&a.transceivers[c].rtpSender.setTransport(a.transceivers[0].dtlsTransport),a.transceivers[c].rtpReceiver&&a.transceivers[c].rtpReceiver.setTransport(a.transceivers[0].dtlsTransport)),"offer"!==i.type||h){if("answer"===i.type&&!h){w=(b=a.transceivers[c]).iceGatherer,_=b.iceTransport,E=b.dtlsTransport,S=b.rtpReceiver,x=b.sendEncodingParameters,k=b.localCapabilities,a.transceivers[c].recvEncodingParameters=C,a.transceivers[c].remoteCapabilities=P,a.transceivers[c].rtcpParameters=O,j.length&&"new"===_.state&&(!l&&!R||f&&0!==c?j.forEach(function(e){tM(b.iceTransport,e)}):_.setRemoteCandidates(j)),f&&0!==c||("new"===_.state&&_.start(w,A,"controlling"),"new"===E.state&&E.start(I)),!Xj(b.localCapabilities,b.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&b.sendEncodingParameters[0].rtx&&delete b.sendEncodingParameters[0].rtx,a._transceive(b,"sendrecv"===m||"recvonly"===m,"sendrecv"===m||"sendonly"===m),!S||"sendrecv"!==m&&"sendonly"!==m?delete b.rtpReceiver:(T=S.track,g?(o[g.stream]||(o[g.stream]=new e.MediaStream),r(T,o[g.stream]),s.push([T,S,o[g.stream]])):(o.default||(o.default=new e.MediaStream),r(T,o.default),s.push([T,S,o.default])))}}else{(b=a.transceivers[c]||a._createTransceiver(d)).mid=y,b.iceGatherer||(b.iceGatherer=a._createIceGatherer(c,f)),j.length&&"new"===b.iceTransport.state&&(!R||f&&0!==c?j.forEach(function(e){tM(b.iceTransport,e)}):b.iceTransport.setRemoteCandidates(j)),k=e.RTCRtpReceiver.getCapabilities(d),t<15019&&(k.codecs=k.codecs.filter(function(e){return"rtx"!==e.name})),x=b.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var M,N=!1;if("sendrecv"===m||"sendonly"===m){if(N=!b.rtpReceiver,S=b.rtpReceiver||new e.RTCRtpReceiver(b.dtlsTransport,d),N)T=S.track,g&&"-"===g.stream||(g?(o[g.stream]||(o[g.stream]=new e.MediaStream,Object.defineProperty(o[g.stream],"id",{get:function(){return g.stream}})),Object.defineProperty(T,"id",{get:function(){return g.track}}),M=o[g.stream]):(o.default||(o.default=new e.MediaStream),M=o.default)),M&&(r(T,M),b.associatedRemoteMediaStreams.push(M)),s.push([T,S,M])}else b.rtpReceiver&&b.rtpReceiver.track&&(b.associatedRemoteMediaStreams.forEach(function(t){var r,n,i=t.getTracks().find(function(e){return e.id===b.rtpReceiver.track.id});i&&(r=i,(n=t).removeTrack(r),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:r})))}),b.associatedRemoteMediaStreams=[]);b.localCapabilities=k,b.remoteCapabilities=P,b.rtpReceiver=S,b.rtcpParameters=O,b.sendEncodingParameters=x,b.recvEncodingParameters=C,a._transceive(a.transceivers[c],!1,N)}}}),void 0===a._dtlsRole&&(a._dtlsRole="offer"===i.type?"active":"passive"),a._remoteDescription={type:i.type,sdp:i.sdp},"offer"===i.type?a._updateSignalingState("have-remote-offer"):a._updateSignalingState("stable"),Object.keys(o).forEach(function(t){var r=o[t];if(r.getTracks().length){if(-1===a.remoteStreams.indexOf(r)){a.remoteStreams.push(r);var i=new Event("addstream");i.stream=r,e.setTimeout(function(){a._dispatchEvent("addstream",i)})}s.forEach(function(e){var t=e[0],i=e[1];r.id===e[2].id&&n(a,t,i,[r])})}}),s.forEach(function(e){e[2]||n(a,e[0],e[1],[])}),e.setTimeout(function(){a&&a.transceivers&&a.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},i.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},i.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},i.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},i.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},i.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},i.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(rM("InvalidStateError","Can not call createOffer after close"));var n=r.transceivers.filter(function(e){return"audio"===e.kind}).length,i=r.transceivers.filter(function(e){return"video"===e.kind}).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==a.offerToReceiveAudio&&(n=!0===a.offerToReceiveAudio?1:!1===a.offerToReceiveAudio?0:a.offerToReceiveAudio),void 0!==a.offerToReceiveVideo&&(i=!0===a.offerToReceiveVideo?1:!1===a.offerToReceiveVideo?0:a.offerToReceiveVideo)}for(r.transceivers.forEach(function(e){"audio"===e.kind?--n<0&&(e.wantReceive=!1):"video"===e.kind&&--i<0&&(e.wantReceive=!1)});n>0||i>0;)n>0&&(r._createTransceiver("audio"),n--),i>0&&(r._createTransceiver("video"),i--);var o=Qj.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach(function(n,i){var a=n.track,o=n.kind,s=n.mid||Qj.generateIdentifier();n.mid=s,n.iceGatherer||(n.iceGatherer=r._createIceGatherer(i,r.usingBundle));var c=e.RTCRtpSender.getCapabilities(o);t<15019&&(c.codecs=c.codecs.filter(function(e){return"rtx"!==e.name})),c.codecs.forEach(function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),n.remoteCapabilities&&n.remoteCapabilities.codecs&&n.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),c.headerExtensions.forEach(function(e){(n.remoteCapabilities&&n.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var u=n.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];a&&t>=15019&&"video"===o&&!u[0].rtx&&(u[0].rtx={ssrc:u[0].ssrc+1}),n.wantReceive&&(n.rtpReceiver=new e.RTCRtpReceiver(n.dtlsTransport,o)),n.localCapabilities=c,n.sendEncodingParameters=u}),"max-compat"!==r._config.bundlePolicy&&(o+="a=group:BUNDLE "+r.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),o+="a=ice-options:trickle\r\n",r.transceivers.forEach(function(e,t){o+=Zj(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),o+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,o+="a="+Qj.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(o+="a=end-of-candidates\r\n"))});var s=new e.RTCSessionDescription({type:"offer",sdp:o});return Promise.resolve(s)},i.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(rM("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(rM("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var n=Qj.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(n+="a=group:BUNDLE "+r.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),n+="a=ice-options:trickle\r\n";var i=Qj.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach(function(e,a){if(!(a+1>i)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?n+="m=application 0 DTLS/SCTP 5000\r\n":n+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?n+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(n+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(n+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var o;if(e.stream)"audio"===e.kind?o=e.stream.getAudioTracks()[0]:"video"===e.kind&&(o=e.stream.getVideoTracks()[0]),o&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var s=Xj(e.localCapabilities,e.remoteCapabilities);!s.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,n+=Zj(e,s,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(n+="a=rtcp-rsize\r\n")}});var a=new e.RTCSessionDescription({type:"answer",sdp:n});return Promise.resolve(a)},i.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(n,i){if(!r._remoteDescription)return i(rM("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var o=0;o<r.transceivers.length;o++)if(r.transceivers[o].mid===e.sdpMid){a=o;break}var s=r.transceivers[a];if(!s)return i(rM("OperationError","Can not add ICE candidate"));if(s.rejected)return n();var c=Object.keys(e.candidate).length>0?Qj.parseCandidate(e.candidate):{};if("tcp"===c.protocol&&(0===c.port||9===c.port))return n();if(c.component&&1!==c.component)return n();if((0===a||a>0&&s.iceTransport!==r.transceivers[0].iceTransport)&&!tM(s.iceTransport,c))return i(rM("OperationError","Can not add ICE candidate"));var u=e.candidate.trim();0===u.indexOf("a=")&&(u=u.substr(2)),(t=Qj.getMediaSections(r._remoteDescription.sdp))[a]+="a="+(c.type?u:"end-of-candidates")+"\r\n",r._remoteDescription.sdp=Qj.getDescription(r._remoteDescription.sdp)+t.join("")}else for(var l=0;l<r.transceivers.length&&(r.transceivers[l].rejected||(r.transceivers[l].iceTransport.addRemoteCandidate({}),(t=Qj.getMediaSections(r._remoteDescription.sdp))[l]+="a=end-of-candidates\r\n",r._remoteDescription.sdp=Qj.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));l++);n()})},i.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)}),!r)throw rM("InvalidAccessError","Invalid selector.");return r.getStats()}var n=[];return this.transceivers.forEach(function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(t){e[t]&&n.push(e[t].getStats())})}),Promise.all(n).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var n=r.prototype.getStats;r.prototype.getStats=function(){return n.apply(this).then(function(e){var t=new Map;return Object.keys(e).forEach(function(r){var n;e[r].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(n=e[r]).type]||n.type,t.set(r,e[r])}),t})}}});var a=["createOffer","createAnswer"];return a.forEach(function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){"function"==typeof e[0]&&e[0].apply(null,[t])},function(t){"function"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(a=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)},function(t){"function"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=i.prototype[e];i.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),i},iM={shimGetUserMedia:function(e){var t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch(function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}},shimPeerConnection:function(e){var t=Hj.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){r.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var n=nM(e,t.version);e.RTCPeerConnection=function(e){var t,r,i;return e&&e.iceServers&&(e.iceServers=(t=e.iceServers,i=!1,(t=JSON.parse(JSON.stringify(t))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&Hj.deprecated("RTCIceServer.url","RTCIceServer.urls");var n="string"==typeof t;return n&&(t=[t]),t=t.filter(function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||i?0===e.indexOf("stun:")&&r>=14393&&-1===e.indexOf("?transport=udp"):(i=!0,!0)}),delete e.url,e.urls=n?t[0]:t,!!t.length}}))),new n(e)},e.RTCPeerConnection.prototype=n.prototype},shimReplaceTrack:function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)},shimGetDisplayMedia:function(e,t){if("getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&!("getDisplayMedia"in e.navigator.mediaDevices)){var r=e.navigator.getDisplayMedia;e.navigator.mediaDevices.getDisplayMedia=function(t){return r.call(e.navigator,t)},e.navigator.getDisplayMedia=function(t){return Hj.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),r.call(e.navigator,t)}}}},aM=Hj.log,oM={shimGetUserMedia:function(e){var t=Hj.detectBrowser(e),r=e&&e.navigator,n=e&&e.MediaStreamTrack,i=function(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},a=function(e,n,a){var o=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n=e[r]="object"==typeof e[r]?e[r]:{ideal:e[r]};if(void 0===n.min&&void 0===n.max&&void 0===n.exact||t.push(r),void 0!==n.exact&&("number"==typeof n.exact?n.min=n.max=n.exact:e[r]=n.exact,delete n.exact),void 0!==n.ideal){e.advanced=e.advanced||[];var i={};"number"==typeof n.ideal?i[r]={min:n.ideal,max:n.ideal}:i[r]=n.ideal,e.advanced.push(i),delete n.ideal,Object.keys(n).length||delete e[r]}}}),t.length&&(e.require=t),e};return e=JSON.parse(JSON.stringify(e)),t.version<38&&(aM("spec: "+JSON.stringify(e)),e.audio&&(e.audio=o(e.audio)),e.video&&(e.video=o(e.video)),aM("ff37: "+JSON.stringify(e))),r.mozGetUserMedia(e,n,function(e){a(i(e))})};if(r.mediaDevices||(r.mediaDevices={getUserMedia:function(e){return new Promise(function(t,r){a(e,t,r)})},addEventListener:function(){},removeEventListener:function(){}}),r.mediaDevices.enumerateDevices=r.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},t.version<41){var o=r.mediaDevices.enumerateDevices.bind(r.mediaDevices);r.mediaDevices.enumerateDevices=function(){return o().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(t.version<49){var s=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(e){return s(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return t},function(e){return Promise.reject(i(e))})}}if(!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){var c=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},u=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),c(e.audio,"autoGainControl","mozAutoGainControl"),c(e.audio,"noiseSuppression","mozNoiseSuppression")),u(e)},n&&n.prototype.getSettings){var l=n.prototype.getSettings;n.prototype.getSettings=function(){var e=l.apply(this,arguments);return c(e,"mozAutoGainControl","autoGainControl"),c(e,"mozNoiseSuppression","noiseSuppression"),e}}if(n&&n.prototype.applyConstraints){var f=n.prototype.applyConstraints;n.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),c(e,"autoGainControl","mozAutoGainControl"),c(e,"noiseSuppression","mozNoiseSuppression")),f.apply(this,[e])}}}r.getUserMedia=function(e,n,i){if(t.version<44)return a(e,n,i);Hj.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(n,i)}},shimOnTrack:function(e){"object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var r=new Event("track");r.track=t,r.receiver={track:t},r.transceiver={receiver:r.receiver},r.streams=[e.stream],this.dispatchEvent(r)}.bind(this))}.bind(this))},enumerable:!0,configurable:!0}),"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(e){"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(e){var t=Hj.detectBrowser(e);if("object"==typeof e&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){e.RTCPeerConnection||(e.RTCPeerConnection=function(r,n){if(t.version<38&&r&&r.iceServers){for(var i=[],a=0;a<r.iceServers.length;a++){var o=r.iceServers[a];if(o.hasOwnProperty("urls"))for(var s=0;s<o.urls.length;s++){var c={url:o.urls[s]};0===o.urls[s].indexOf("turn")&&(c.username=o.username,c.credential=o.credential),i.push(c)}else i.push(r.iceServers[a])}r.iceServers=i}return new e.mozRTCPeerConnection(r,n)},e.RTCPeerConnection.prototype=e.mozRTCPeerConnection.prototype,e.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return e.mozRTCPeerConnection.generateCertificate}}),e.RTCSessionDescription=e.mozRTCSessionDescription,e.RTCIceCandidate=e.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}});var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,r,a){return i.apply(this,[e||null]).then(function(e){if(t.version<48&&(e=function(e){var t=new Map;return Object.keys(e).forEach(function(r){t.set(r,e[r]),t[r]=e[r]}),t}(e)),t.version<53&&!r)try{e.forEach(function(e){e.type=n[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach(function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(r,a)}}},shimSenderGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(e,[]);return r.forEach(function(t){t._pc=e}),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},shimReceiverGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,r=t.apply(e,[]);return r.forEach(function(t){t._pc=e}),r}),Hj.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},shimRemoveStream:function(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;Hj.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(r){r.track&&-1!==e.getTracks().indexOf(r.track)&&t.removeTrack(r)})})},shimRTCDataChannel:function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},shimGetDisplayMedia:function(e,t){!e.navigator||!e.navigator.mediaDevices||"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){var n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)},e.navigator.getDisplayMedia=function(t){return Hj.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),e.navigator.mediaDevices.getDisplayMedia(t)})}},sM={shimLocalStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(e){var t=null;return this._localStreams&&this._localStreams.forEach(function(r){r.id===e&&(t=r)}),this._remoteStreams&&this._remoteStreams.forEach(function(r){r.id===e&&(t=r)}),t}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(e)&&this._localStreams.push(e);var r=this;e.getTracks().forEach(function(n){t.call(r,n,e)})},e.RTCPeerConnection.prototype.addTrack=function(e,r){return r&&(this._localStreams?-1===this._localStreams.indexOf(r)&&this._localStreams.push(r):this._localStreams=[r]),t.call(this,e,r)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);var r=this,n=e.getTracks();this.getSenders().forEach(function(e){-1!==n.indexOf(e.track)&&r.removeTrack(e)})}})}},shimRemoteStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){this._onaddstream&&this.removeEventListener("addstream",this._onaddstream),this.addEventListener("addstream",this._onaddstream=e)}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}})}),t.apply(e,arguments)}}},shimCallbacksAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,i=t.setLocalDescription,a=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i};var s=function(e,t,r){var n=i.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=s,s=function(e,t,r){var n=a.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.setRemoteDescription=s,s=function(e,t,r){var n=o.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=s}},shimGetUserMedia:function(e){var t=e&&e.navigator;t.getUserMedia||(t.webkitGetUserMedia?t.getUserMedia=t.webkitGetUserMedia.bind(t):t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t)))},shimRTCIceServerUrls:function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var a=e.iceServers[i];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(Hj.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,n.push(a)):n.push(e.iceServers[i])}e.iceServers=n}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})},shimTrackEventTransceiver:function(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){var r=this;if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=r.getTransceivers().find(function(e){return e.sender.track&&"audio"===e.sender.track.kind});!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||r.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var i=r.getTransceivers().find(function(e){return e.sender.track&&"video"===e.sender.track.kind});!1===e.offerToReceiveVideo&&i?"sendrecv"===i.direction?i.setDirection("sendonly"):"recvonly"===i.direction&&i.setDirection("inactive"):!0!==e.offerToReceiveVideo||i||r.addTransceiver("video")}return t.apply(r,arguments)}}},cM={shimRTCIceCandidate:function(e){if(e.RTCIceCandidate&&!(e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var r=new t(e),n=Qj.parseCandidate(e.candidate),i=Object.assign(r,n);return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Hj.wrapPeerConnectionEvent(e,"icecandidate",function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t})}},shimCreateObjectURL:function(e){var t=e&&e.URL;if("object"==typeof e&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype&&t.createObjectURL&&t.revokeObjectURL){var r=t.createObjectURL.bind(t),n=t.revokeObjectURL.bind(t),i=new Map,a=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++a;return i.set(t,e),Hj.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t}return r(e)},t.revokeObjectURL=function(e){n(e),i.delete(e)};var o=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return o.get.apply(this)},set:function(e){return this.srcObject=i.get(e)||null,o.set.apply(this,[e])}});var s=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(){return 2===arguments.length&&"src"===(""+arguments[0]).toLowerCase()&&(this.srcObject=i.get(arguments[1])||null),s.apply(this,arguments)}}},shimMaxMessageSize:function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var t=Hj.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e,n,i,a;if(this._sctp=null,i=arguments[0],(a=Qj.splitSections(i.sdp)).shift(),a.some(function(e){var t=Qj.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})){var o,s=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var r=parseInt(t[1],10);return r!=r?-1:r}(arguments[0]),c=(e=s,n=65536,"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n),u=function(e,r){var n=65536;"firefox"===t.browser&&57===t.version&&(n=65535);var i=Qj.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?n=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(n=2147483637),n}(arguments[0],s);o=0===c&&0===u?Number.POSITIVE_INFINITY:0===c||0===u?Math.max(c,u):Math.min(c,u);var l={};Object.defineProperty(l,"maxMessageSize",{get:function(){return o}}),this._sctp=l}return r.apply(this,arguments)}}},shimSendThrowTypeError:function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return r(e,this),e},Hj.wrapPeerConnectionEvent(e,"datachannel",function(e){return r(e.channel,e.target),e})}function r(e,t){var r=e.send;e.send=function(){var n=arguments[0],i=n.length||n.size||n.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}}};!function(e,t){var r=e&&e.window,n={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var i in t)hasOwnProperty.call(t,i)&&(n[i]=t[i]);var a=Hj.log,o=Hj.detectBrowser(r),s=Jj||null,c=iM||null,u=oM||null,l=sM||null,f=cM||null,p={browserDetails:o,commonShim:f,extractVersion:Hj.extractVersion,disableLog:Hj.disableLog,disableWarnings:Hj.disableWarnings};switch(o.browser){case"chrome":if(!s||!s.shimPeerConnection||!n.shimChrome)return a("Chrome shim is not included in this adapter release."),p;a("adapter.js shimming chrome."),p.browserShim=s,f.shimCreateObjectURL(r),s.shimGetUserMedia(r),s.shimMediaStream(r),s.shimSourceObject(r),s.shimPeerConnection(r),s.shimOnTrack(r),s.shimAddTrackRemoveTrack(r),s.shimGetSendersWithDtmf(r),s.shimSenderReceiverGetStats(r),s.fixNegotiationNeeded(r),f.shimRTCIceCandidate(r),f.shimMaxMessageSize(r),f.shimSendThrowTypeError(r);break;case"firefox":if(!u||!u.shimPeerConnection||!n.shimFirefox)return a("Firefox shim is not included in this adapter release."),p;a("adapter.js shimming firefox."),p.browserShim=u,f.shimCreateObjectURL(r),u.shimGetUserMedia(r),u.shimSourceObject(r),u.shimPeerConnection(r),u.shimOnTrack(r),u.shimRemoveStream(r),u.shimSenderGetStats(r),u.shimReceiverGetStats(r),u.shimRTCDataChannel(r),f.shimRTCIceCandidate(r),f.shimMaxMessageSize(r),f.shimSendThrowTypeError(r);break;case"edge":if(!c||!c.shimPeerConnection||!n.shimEdge)return a("MS edge shim is not included in this adapter release."),p;a("adapter.js shimming edge."),p.browserShim=c,f.shimCreateObjectURL(r),c.shimGetUserMedia(r),c.shimPeerConnection(r),c.shimReplaceTrack(r),c.shimGetDisplayMedia(r),f.shimMaxMessageSize(r),f.shimSendThrowTypeError(r);break;case"safari":if(!l||!n.shimSafari)return a("Safari shim is not included in this adapter release."),p;a("adapter.js shimming safari."),p.browserShim=l,f.shimCreateObjectURL(r),l.shimRTCIceServerUrls(r),l.shimCreateOfferLegacy(r),l.shimCallbacksAPI(r),l.shimLocalStreamsAPI(r),l.shimRemoteStreamsAPI(r),l.shimTrackEventTransceiver(r),l.shimGetUserMedia(r),f.shimRTCIceCandidate(r),f.shimMaxMessageSize(r),f.shimSendThrowTypeError(r);break;default:a("Unsupported browser!")}}({window:e.window});Tc.env.NO_WEBRTC_ADAPTER;var uM=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ensureH264=void 0;var r=a(Vj),n=a(iO),i=a(aT);function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r="screen"===e?{content:"slides",type:"video"}:{type:e},i=(0,n.default)((0,Uj.parse)(t).media,r);return i?i.direction:"inactive"}function s(e){switch(e){case"inactive":case"sendrecv":return e;case"sendonly":return"recvonly";case"recvonly":return"sendonly";default:throw new Error('direction "'+e+'" is not valid')}}t.getMediaDirectionFromSDP=o,t.getMediaFromSDP=function(e,t,n){var i="screen"===e?{content:"slides",type:"video"}:{type:e},a=(0,r.default)((0,Uj.parse)(t).media,i),o={};n&&("sendrecv"===n?(a.forEach(function(e){o[e.direction]=e}),!o.sendrecv||o.recvonly||o.sendonly?!o.sendrecv&&o.recvonly&&o.sendonly&&(a=[o.recvonly,o.sendonly]):a=o.sendrecv):a=a.filter(function(e){return e.direction===n}));return a},t.reverseMediaDirection=s,t.limitBandwith=function(e,t){var r=e.audioBandwidthLimit,n=e.videoBandwidthLimit;return t.split("\r\n").reduce(function(e,t){return e.push(t),t.startsWith("m=")&&e.push("b=TIAS:"+(t.includes("audio")?r:n)),e},[]).join("\r\n")},t.kindToPropertyFragment=function(e){return"audio"===e?"Audio":"Video"},t.getMediaDirectionFromSDPForAnswer=function(e,t){return s(o(e,t))},t.boolToDirection=c,t.getMediaDirectionFromTracks=function(e,t){if("closed"===t.signalingState)return"inactive";var r=t.getSenders().filter(function(t){return t.track&&t.track.kind===e}),n=r.length>0&&r.reduce(function(e,t){return e||t.track.enabled},!1),i=t.getReceivers().filter(function(t){return t.track&&t.track.kind===e}),a=i.length>0&&i.reduce(function(e,t){return e||t.track.enabled},!1);return c(n,a)},t.removeExtmap=function(e){return e.replace(/a=extmap.*\r\n/g,"")};t.ensureH264=(0,i.default)(function(e,t){if(e){if(!t.includes("m=video"))throw new Error("No video section found in offer");if(!/[hH]264/.test(t))throw new Error("Offer does not include h264 codec")}return t});function c(e,t){return e&&t?"sendrecv":e?"sendonly":t?"recvonly":"inactive"}});r(uM);uM.ensureH264,uM.getMediaDirectionFromSDP,uM.getMediaFromSDP,uM.reverseMediaDirection,uM.limitBandwith,uM.kindToPropertyFragment,uM.getMediaDirectionFromSDPForAnswer,uM.boolToDirection,uM.getMediaDirectionFromTracks,uM.removeExtmap;var lM=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,i,a,o,s,c,u,l,f,p,d,h,v,m,g,y=j(Cf),b=j($y),w=j(su),_=j(ST),E=j(lu),S=j(wf),x=j(Gy),C=j(Yy),k=j(vw),T=j(mb),A=j(pE),I=j(TO),P=j(jj),O=j(Bk),R=j(Mj);function j(e){return e&&e.__esModule?e:{default:e}}function M(e,t,r,n){r&&(0,b.default)(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function N(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}R.default.a.find(function(e){return"content"===e.name})||R.default.a.unshift({name:"content",reg:/^content:(slides)/});var B=new((0,Zx.make)(T.default,k.default)),D={audio:"Audio",video:"Video"};function F(e,t){return B.get(e,t)||"inactive"}var L=(r=(0,Zx.whileInFlight)("gumming"),n=(0,Rj.debounce)(500),i=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,x.default)(this,e),this.logger=console,M(this,"localMediaStream",a,this),M(this,"remoteMediaStream",o,this),M(this,"localScreenShare",s,this),this.pc=new RTCPeerConnection({iceServers:[],bundlePolicy:"max-compat",sdpSemantics:"plan-b"}),M(this,"offerSdp",c,this),M(this,"answerSdp",u,this),M(this,"sendingAudio",l,this),M(this,"sendingVideo",f,this),M(this,"receivingAudio",p,this),M(this,"receivingVideo",d,this),M(this,"ended",h,this),this.negotiationNeeded=!1,this.bandwidthLimit={audioBandwidthLimit:6e4,videoBandwidthLimit:1e6},M(this,"constraints",v,this),M(this,"offerOptions",m,this),M(this,"gumming",g,this),n.parent?hc(function(){n.parent.logger&&(t.logger=n.parent.logger)}):r.logger&&(this.logger=r.logger),this.pc.onnegotiationneeded=function(){t.logger.info("peer connection emitted negotiationneeded"),t.answerSdp&&!t.negotiationNeeded&&(t.negotiationNeeded=!0,t.triggerNegotiationNeeded())},this.pc.ontrack=function(e){t.logger.info("peerConnection ontrack fired, updating remoteMediaStream"),t.trigger("track");var r=t.remoteMediaStream||new MediaStream;e.streams[0].getTracks().forEach(function(e){t.logger.info("adding "+e.kind+" track to remoteMediaStream"),r&&!r.getTracks().includes(e)&&r.addTrack(e),e.onended=function(){t.logger.info("remote "+e.kind+" has ended, removing track from remoteMediaStream"),r.removeTrack(e),e.onended=void 0;try{t["receiving"+D[e.kind]]=(0,uM.getMediaDirectionFromTracks)(e.kind,t.pc).includes("recv")}catch(r){t["receiving"+D[e.kind]]=!1}},t["receiving"+D[e.kind]]=(0,uM.getMediaDirectionFromTracks)(e.kind,t.pc).includes("recv")}),t.remoteMediaStream=r,t.trigger("internalTrackUpdate")}}return(0,C.default)(e,[{key:"audioDirection",get:function(){return(0,uM.getMediaDirectionFromTracks)("audio",this.pc)}},{key:"videoDirection",get:function(){return(0,uM.getMediaDirectionFromTracks)("video",this.pc)}},{key:"screenDirection",get:function(){return this.localScreenShare&&0!==this.localScreenShare.getTracks().length?"sendonly":"inactive"}},{key:"senderTracks",get:function(){return this.pc.getSenders().reduce(function(e,t){return t.track&&e.push(t.track),e},[])}},{key:"receiverTracks",get:function(){return this.pc.getReceivers().reduce(function(e,t){return t.track&&e.push(t.track),e},[])}}],[{key:"getUserMedia",value:function(e){var t=(0,A.default)({},e,{fake:"test"===Tc.env.NODE_ENV});return navigator.mediaDevices.getUserMedia(t)}}]),(0,C.default)(e,[{key:"_prepareIceGatherer",value:function(){var e=this,t=!1;if("new"===this.pc.iceGatheringState)this.logger.info('ice gathering is in state "new", definitely need to block for ice gathering'),t=!0;else{var r=(0,Uj.parse)(this.pc.localDescription.sdp);["audio","video","screen"].forEach(function(n){var i=n+"Direction";("inactive"!==e[i]||F(e,n)!==e[i]&&"inactive"!==F(e,n))&&(r.media.find(function(e){return e.type===n})?e.logger.info(n+" candidates already gathered"):(e.logger.info("transitioning "+n+" from inactive, ice needed"),t=!0))})}var n=void 0;return t&&(n=new S.default(function(t){e.logger.info("configuring ice gathering"),e.pc.onicecandidate=function(r){if(!r.candidate)return e.logger.info("ice gathering complete"),e.pc.onicecandidate=void 0,void t();e.logger.info("got ice candidate")}})),n}},{key:"createOffer",value:function(){var e=this;this.logger.info("beginning negotiation");var t=F(this,"video"),r=t.includes("send")||t.includes("recv"),n=this._prepareIceGatherer();return new S.default(function(t){if(e.gumming)return e.logger.info("gum in flight, waiting until it completes"),void t(e._getUserMedia().then((0,Zx.tap)(function(){return e.logger.info("gum completed")})));t()}).then((0,Zx.tap)(function(){return e.logger.info("starting create offer",e.offerOptions)})).then(function(){return e.offerOptions.offerToReceiveAudio=!!e.offerOptions.offerToReceiveAudio,e.offerOptions.offerToReceiveVideo=!!e.offerOptions.offerToReceiveVideo,e.logger.info("creating REAL offer",e.offerOptions),e.logger.info("createOffer audioDirection: "+e.audioDirection),e.logger.info("createOffer videoDirection: "+e.videoDirection),e.logger.info("createOffer screenDirection: "+e.screenDirection),e.updateLocalMediaToTargetDirection(),e.pc.createOffer(e.offerOptions)}).then((0,Zx.tap)(function(t){t.sdp=(0,uM.limitBandwith)(e.bandwidthLimit,t.sdp),t.sdp=(0,uM.removeExtmap)(t.sdp)})).then((0,Zx.tap)(function(){return e.logger.info("setting local description")})).then(function(t){return e.pc.setLocalDescription(t)}).then((0,Zx.tap)(function(){return n&&e.logger.info("blocking for ice gathering")})).then(function(){return n}).then((0,Zx.tap)(function(){return e.logger.info("limiting bandwith")})).then(function(){return(0,uM.limitBandwith)(e.bandwidthLimit,e.pc.localDescription.sdp)}).then((0,Zx.tap)(function(){return r&&e.logger.info("confirm h264 in offer")})).then((0,uM.ensureH264)(r)).then(function(t){if(e.localScreenShare){var r=e.localScreenShare.id,n=e.localScreenShare.getVideoTracks()[0];if(n){var i=r+" "+n.id,a=t.split(i);if(a[1])return a[1]="\r\na=content:slides"+a[1],t=a.join(i)}t+="a=content:slides\r\n"}return t}).then((0,Zx.tap)(function(t){e.offerSdp=t}))}},{key:"acceptAnswer",value:function(e){var t=this;this.logger.info("accepting answer"),this.logger.debug("new answer sdp:",e);var r=e.replace(/max-mbps=27600;max-fs=920/g,"max-mbps=27600;max-fs=8160");return r=r.replace(/m=video 0(.*?\r\n)/,"m=video 0$1a=inactive\r\n"),r=(0,uM.removeExtmap)(r),this.logger.debug("cleaned answer sdp:",r),"have-local-offer"===this.pc.signalingState?this.pc.setRemoteDescription(new RTCSessionDescription({sdp:r,type:"answer"})).then(function(){t.logger.info("answer accepted"),t.answerSdp=r,t.sendingAudio=(0,uM.getMediaDirectionFromTracks)("audio",t.pc).includes("send"),t.sendingVideo=(0,uM.getMediaDirectionFromTracks)("video",t.pc).includes("send"),t.updateLocalMediaToTargetDirection(),t.trigger("answeraccepted"),t.negotiationNeeded=!1}):S.default.resolve()}},{key:"_setNewMediaDirection",value:function(e,t){var r=this;this.logger.info("setting "+e+" direction to "+t);var n=t.includes("send");if(this.constraints[e]=n,!n)return this.logger.info("muting "+e+" local tracks"),this.localMediaStream?this.localMediaStream.getTracks().filter(function(t){return t.kind===e}).forEach(function(t){r.logger.info("muting existing "+e+" track from localMediaStream");var i=r.pc.getSenders().find(function(e){return e.track===t});I.default.firefox||r.localMediaStream.removeTrack(t),i&&(r.logger.info("muting existing "+e+" track on sender"),i.track.enabled=!1,t.enabled=!1,I.default.firefox||r.pc.removeTrack(i)),r.logger.info("setting sending"+D[e]+" to "+n),r["sending"+D[e]]=n}):S.default.resolve();var i=this.pc.getSenders().filter(function(t){return t.track&&t.track.kind===e});if(i.length>0){this.logger.info("enabling existing "+e+" sender track");var a=this.localMediaStream.getTracks().filter(function(t){return t.kind===e});return i.forEach(function(e){e.track.enabled=a.includes(e.track)}),this["sending"+D[e]]=n,S.default.resolve()}return this[e+"Direction"].includes("send")?S.default.resolve():this._setNewMediaConstraint(e,n)}},{key:"_setNewMediaTrack",value:function(e,t){return this.logger.info("setting new "+e+" track"),this.constraints[e]=!1,this.addOrReplaceTrack(t)}},{key:"_setNewMediaConstraint",value:function(e,t){return this.logger.info("setting "+e+" with new constraint"),this.constraints[e]=t,this._getUserMedia()}},{key:"_setScreenShare",value:function(e,t){var r=this;if(this.logger.info("calling _setScreenShare"),B.set(this,"screen",e),e.includes("send")){var n=(0,A.default)({},t,{mediaSource:"application",width:{min:"160",max:"1920"},height:{min:"90",max:"1080"},frameRate:{min:"1",max:"30"}});this._setNewMediaConstraint("screen",n)}else this.logger.info("removing existing screenshare tracks from peer connection and localScreenShare stream"),this.pc.getSenders().filter(function(e){return e.track&&r.localScreenShare.getTracks().includes(e.track)}).forEach(function(e){r.logger.info("removing screenshare track "+e.track.id+" from peer connection and localScreenShare stream");var t=e.track;e.track.enabled=!1,r.localScreenShare.removeTrack(t),r.pc.removeTrack(e),t.stop(),r.logger.info("removed screenshare track "+t.id+" from peer connection and localScreenShare stream")}),this.localScreenShare=!1}},{key:"setMedia",value:function(e,t,r){var n=this;return this.logger.info("setMedia"),"screen"===e?(this.logger.info("setMedia: setting new screen direction"),this._setScreenShare(t,r),S.default.resolve()):new S.default(function(i){if(r){if(!t.includes("send"))throw new Error("Cannot set new "+e+" track or constraint if direction does not include send");if(r instanceof MediaStreamTrack){if(r.kind!==e)throw new Error("track is not a valid "+e+" media stream track");i(n._setNewMediaTrack(e,r))}else i(n._setNewMediaConstraint(e,r))}else t===F(n,e)&&(n.logger.info("setMedia: "+e+" already transitioning to "+t+", not making changes"),i()),t===n[e+"Direction"]&&(n.logger.info("setMedia: "+e+" already set to "+t+", not making changes"),i()),i(n._setNewMediaDirection(e,t))}).then(function(){var r=t.includes("recv");n.logger.info("setMedia: set targetMediaDirection for "+e+" to "+t),B.set(n,e,t),n.logger.info("setMedia: set offerToReceive"+(0,uM.kindToPropertyFragment)(e)+" to "+r),n.offerOptions["offerToReceive"+(0,uM.kindToPropertyFragment)(e)]=r;var i=n.pc.getReceivers().filter(function(t){return t.track&&t.track.kind===e});r?i.length>0?(n.logger.info("setMedia: unpause existing receiving "+e+" track"),n.unpauseReceivingMedia(e)):!i.length&&n.answerSdp&&(n.logger.info("setMedia: no receiving "+e+" track exists, trigger negotiation"),n.triggerNegotiationNeeded()):i.length>0&&(n.logger.info("setMedia: pausing existing receiving "+e+" track"),n.pauseReceivingMedia(e))})}},{key:"_getUserMedia",value:function(){var t=this;return this.logger.info("enqueing request to get user media"),new S.default(function(e){return hc(e)}).then(function(){!0===t.constraints.audio&&t.pc.getSenders().find(function(e){return e.track&&"audio"===e.track.kind})&&(t.logger.info("already have a local audio track, removing constraint for a second one"),(0,E.default)(t.constraints,"audio")),!0===t.constraints.video&&t.pc.getSenders().find(function(e){return e.track&&"video"===e.track.kind})&&(t.logger.info("already have a local video track, removing constraint for a second one"),(0,E.default)(t.constraints,"video"));var r=t.constraints,n=r.audio,i=r.video,a=r.screen;return t.logger.info("getting user media with "+(n?"1":"0")+" audio track, "+(i?"1":"0")+" video track, and "+(a?"1":"0")+" screenshare track."),S.default.all([(n||i)&&e.getUserMedia({audio:n,video:i}),a&&e.getUserMedia({video:a})])}).then(function(e){var r=(0,_.default)(e,2),n=r[0],i=r[1],a=[];if(n&&(t.logger.info("got local media stream with "+n.getAudioTracks().length+" audio tracks and "+n.getVideoTracks().length+" video tracks"),n.getTracks().forEach(function(e){return a.push(t.addOrReplaceTrack(e))})),i){if(t.localScreenShare){var o=t.pc.getSenders().find(function(e){return t.localScreenShare.getTracks().includes(e.track)});o&&(t.logger.info("removing existing screenshare track from localScreenShare stream"),t.localScreenShare.removeTrack(o.track),t.logger.info("disabling existing screenshare track on sender"),o.track.enabled=!1),i.getTracks().forEach(function(e){o?(t.logger.info("replacing existing screenshare track on sender"),a.push(o.replaceTrack(e))):(t.logger.info("adding new screen track to peerConnection"),t.pc.addTrack(e,i))})}else t.logger.info("adding localScreenShare for the first time"),t.logger.info("adding new screenshare track to peer connection"),i.getVideoTracks().forEach(function(e){return t.pc.addTrack(e,i)});t.localScreenShare=i}return t.constraints={},S.default.all(a)}).catch(function(e){return t.trigger("error",e),S.default.reject(e)})}},{key:"addOrReplaceTrack",value:function(e){var t=this,r=[];this.localMediaStream||(this.localMediaStream=new MediaStream);var n=this.pc.getSenders().find(function(t){return t.track&&t.track.kind===e.kind}),i=this.localMediaStream.getTracks().find(function(t){return t.kind===e.kind});return i!==e&&(i&&(this.logger.info("removing previous "+i.kind+" track from localMediaStream"),this.localMediaStream.removeTrack(i)),this.logger.info("adding new "+e.kind+" track to localMediaStream"),this.localMediaStream.addTrack(e)),n?n.track===e?(this.logger.info("new track is the same as existing track, renabling "+e.kind+" track on sender"),n.track.enabled=!0):(this.logger.info("replacing new "+e.kind+" on existing sender"),r.push(n.replaceTrack(e).then(function(){t.logger.info("successfully replace "+e.kind+" on existing sender")}).catch(function(r){t.logger.warn(r),t.logger.warn("was not able to replace "+e.kind+" track on sender"),t.logger.info("adding as new "+e.kind+" track to peerConnection"),t.pc.removeTrack(n),t.pc.addTrack(e,t.localMediaStream)}))):(this.logger.info("adding new "+e.kind+" track to peerConnection"),this.pc.addTrack(e,this.localMediaStream)),this.logger.info("setting sending"+D[e.kind]+" to true"),this["sending"+D[e.kind]]=!0,S.default.all(r)}},{key:"pauseSendingMedia",value:function(e){var t=this;if(!e)throw new Error("kind is required");var r=this.pc.getSenders().filter(function(t){return t.track&&t.track.kind===e});if(0===r.length)throw new Error("No "+e+" media senders to pause");r.forEach(function(r){t.logger.info("pausing "+e+" sender"),r.track.enabled=!1}),this.logger.info("setting sending"+D[e]+" to false"),this["sending"+D[e]]=!1}},{key:"updateLocalMediaToTargetDirection",value:function(){var e=this;["audio","video"].forEach(function(t){var r=F(e,t),n=e[t+"Direction"];if(n!==r){var i=r.includes("send");n.includes("send")!==i&&e.pc.getSenders().forEach(function(e){e.track&&e.track.kind===t&&(e.track.enabled=i)});var a=r.includes("recv");n.includes("send")!==a&&e.pc.getReceivers().forEach(function(e){e.track&&e.track.kind===t&&(e.track.enabled=a)})}})}},{key:"unpauseSendingMedia",value:function(e){var t=this;if(!e)throw new Error("kind is required");var r=this.pc.getSenders().filter(function(t){return t.track&&t.track.kind===e});if(0===r.length)throw new Error("No "+e+" media senders to unpause");r.forEach(function(r){t.logger.info("unpausing "+e+" sender"),r.track.enabled=!0}),this.logger.info("setting sending"+D[e]+" to true"),this["sending"+D[e]]=!0}},{key:"pauseReceivingMedia",value:function(e){var t=this;if(!e)throw new Error("kind is required");var r=this.pc.getReceivers().filter(function(t){return t.track&&t.track.kind===e});if(0===r.length)throw new Error("No "+e+" receiver media tracks to pause");r.forEach(function(r){t.logger.info("pausing remote "+e+" track"),r.track.enabled=!1}),this.logger.info("setting receiving"+D[e]+" to false"),this["receiving"+D[e]]=!1}},{key:"unpauseReceivingMedia",value:function(e){var t=this;if(!e)throw new Error("kind is required");var r=this.pc.getReceivers().filter(function(t){return t.track&&t.track.kind===e});if(0===r.length)throw new Error("No "+e+" receiver media tracks to pause");r.forEach(function(r){t.logger.info("unpausing "+e+" receiver track"),r.track.enabled=!0}),this.logger.info("setting receiving"+D[e]+" to true from "+this["receiving"+D[e]]),this["receiving"+D[e]]=!0}},{key:"stop",value:function(){"closed"!==this.pc.signalingState&&(this.pc.getSenders().forEach(function(e){return e.track&&e.track.stop()}),this.pc.close()),this.pc.onnegotiationneeded=void 0,this.pc.ontrack=void 0,this.pc.onicecandidate=void 0,this.ended=!0,this.off()}},{key:"triggerNegotiationNeeded",value:function(){this.trigger("negotiationneeded")}},{key:"serialize",value:function(){return"WebRTCMediaEngine"}}]),e}(),a=N(i.prototype,"localMediaStream",[P.default],{enumerable:!0,initializer:null}),o=N(i.prototype,"remoteMediaStream",[P.default],{enumerable:!0,initializer:null}),s=N(i.prototype,"localScreenShare",[P.default],{enumerable:!0,initializer:null}),c=N(i.prototype,"offerSdp",[P.default],{enumerable:!0,initializer:function(){return""}}),u=N(i.prototype,"answerSdp",[P.default],{enumerable:!0,initializer:function(){return""}}),l=N(i.prototype,"sendingAudio",[P.default],{enumerable:!0,initializer:function(){return!1}}),f=N(i.prototype,"sendingVideo",[P.default],{enumerable:!0,initializer:function(){return!1}}),p=N(i.prototype,"receivingAudio",[P.default],{enumerable:!0,initializer:function(){return!1}}),d=N(i.prototype,"receivingVideo",[P.default],{enumerable:!0,initializer:function(){return!1}}),h=N(i.prototype,"ended",[P.default],{enumerable:!0,initializer:function(){return!1}}),v=N(i.prototype,"constraints",[Hx.nonenumerable],{enumerable:!0,initializer:function(){return{}}}),m=N(i.prototype,"offerOptions",[Hx.nonenumerable],{enumerable:!0,initializer:function(){return{}}}),g=N(i.prototype,"gumming",[Hx.nonenumerable,P.default],{enumerable:!0,initializer:function(){return!1}}),N(i.prototype,"_getUserMedia",[r,Zx.oneFlight],(0,w.default)(i.prototype,"_getUserMedia"),i.prototype),N(i.prototype,"triggerNegotiationNeeded",[n],(0,w.default)(i.prototype,"triggerNegotiationNeeded"),i.prototype),i);t.default=L,(0,y.default)(L.prototype,O.default)});r(lM);var fM=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.webrtcHelpers=t.WebRTCMediaEngine=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n(lM).default}}),Object.defineProperty(t,"WebRTCMediaEngine",{enumerable:!0,get:function(){return n(lM).default}});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(uM);function n(e){return e&&e.__esModule?e:{default:e}}t.webrtcHelpers=r});r(fM);fM.webrtcHelpers,fM.WebRTCMediaEngine;var pM=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=t.locusEventKeys=["locus.summary","locus.self_changed","locus.participant_joined","locus.participant_left","locus.participant_declined","locus.participant_alerted","locus.participant_updated","locus.participant_roles_updated","locus.participant_audio_muted","locus.participant_audio_unmuted","locus.participant_video_muted","locus.participant_video_unmuted","locus.floor_granted","locus.floor_released","locus.space_users_modified","locus.controls_updated","locus.participant_controls_updated"];t.default=r});r(pM);pM.locusEventKeys;var dM=function(e){return e&&e.length?e[0]:void 0},hM=gw(function(e,t){return Ek(e)?DO(e,Jv(t,1,Ek,!0)):[]}),vM=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DESYNC=t.LESS_THAN=t.GREATER_THAN=t.FETCH=t.EQUAL=t.USE_CURRENT=t.USE_INCOMING=void 0;var r=v(KT),n=v(vw),i=v(Qk),a=v(eC),o=v(wf),s=v(Rf),c=v(ET),u=v(Ev),l=v(jv),f=v(dM),p=v(hM),d=v(gm),h=v(gP);function v(e){return e&&e.__esModule?e:{default:e}}var m=t.USE_INCOMING="USE_INCOMING",g=t.USE_CURRENT="USE_CURRENT",y=t.EQUAL="EQUAL",b=t.FETCH="FETCH",w=t.GREATER_THAN="GREATER_THAN",_=t.LESS_THAN="LESS_THAN",E=t.DESYNC="DESYNC";function S(e){switch(e){case y:case w:return g;case _:return m;case E:return b;default:throw new Error(e+" is not a recognized sequence comparison result")}}var x=LP.SparkPlugin.extend({namespace:"Locus",alert:function(e){return this.request({method:"PUT",uri:e.url+"/participant/alert",body:{deviceUrl:this.spark.internal.device.url,sequence:e.sequence}}).then(function(e){return e.body})},compare:function(e,t){function r(e){var t=e.sequence;return!(t.entries&&t.entries.length||0!==t.rangeStart||0!==t.rangeEnd)}return r(e)||r(t)?m:t.baseSequence?this.compareDelta(e,t):S(this.compareSequence(e.sequence,t.sequence))},compareDelta:function(e,t){var r=this.compareSequence(e.sequence,t.sequence);if(r!==_)return S(r);switch(r=this.compareSequence(e.sequence,t.baseSequence)){case w:case y:return m;default:return b}},compareSequence:function(e,t){if(!e)throw new Error("`current` is required");if(!t)throw new Error("`incoming` is required");var r=(0,u.default)(function(e){return 0===e.entries.length?0:(0,f.default)(e.entries)}),n=(0,u.default)(function(e){return 0===e.entries.length?0:(0,l.default)(e.entries)}),i=(0,u.default)(function(e){return e.rangeStart||r(e)}),a=(0,u.default)(function(e){return n(e)||e.rangeEnd});function o(e,t){return e>=t.rangeStart&&e<=t.rangeEnd}if(i(e)>a(t))return w;if(a(e)<i(t))return _;var s=(0,p.default)(e.entries,t.entries),d=(0,p.default)(t.entries,e.entries),h=[],v=[],m=!0,g=!1,b=void 0;try{for(var S,x=(0,c.default)(s);!(m=(S=x.next()).done);m=!0){var C=S.value;o(C,t)||h.push(C)}}catch(e){g=!0,b=e}finally{try{!m&&x.return&&x.return()}finally{if(g)throw b}}var k=!0,T=!1,A=void 0;try{for(var I,P=(0,c.default)(d);!(k=(I=P.next()).done);k=!0){var O=I.value;o(O,e)||v.push(O)}}catch(e){T=!0,A=e}finally{try{!k&&P.return&&P.return()}finally{if(T)throw A}}if(!h.length&&!v.length)return e.rangeEnd-i(e)>t.rangeEnd-i(t)?w:e.rangeEnd-i(e)<t.rangeEnd-i(t)?_:y;if(h.length&&!v.length)return w;if(!h.length&&v.length)return _;if(!(e.rangeStart||e.rangeEnd||t.rangeStart||t.rangeEnd))return E;var R=!0,j=!1,M=void 0;try{for(var N,B=(0,c.default)(h);!(R=(N=B.next()).done);R=!0){var D=N.value;if(i(t)<D&&D<a(t))return E}}catch(e){j=!0,M=e}finally{try{!R&&B.return&&B.return()}finally{if(j)throw M}}var F=!0,L=!1,U=void 0;try{for(var z,V=(0,c.default)(v);!(F=(z=V.next()).done);F=!0){var q=z.value;if(i(e)<q&&q<a(e))return E}}catch(e){L=!0,U=e}finally{try{!F&&V.return&&V.return()}finally{if(L)throw U}}return h[0]>v[0]?w:_},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.correlationId;if(!r)throw new Error("options.correlationId is required");return this.request({method:"POST",service:"locus",resource:"loci/call",body:{correlationId:r,deviceUrl:this.spark.internal.device.url,invitee:{invitee:e},localMedias:[{localSdp:(0,s.default)({type:"SDP",sdp:t.localSdp})}],sequence:{entries:[],rangeStart:0,rangeEnd:0}}}).then(function(e){return e.body.locus})},createOrJoin:function(e,t){return e.url?this.join(e,t):this.create(e,t)},decline:function(e){var t=this;return this.request({method:"PUT",uri:e.url+"/participant/decline",body:{deviceUrl:this.spark.internal.device.url,sequence:e.sequence}}).then(function(e){return e.body}).catch(function(r){return r instanceof LP.SparkHttpError.Conflict?t.get(e):o.default.reject(r)})},get:function(e){return this.request({method:"GET",uri:""+e.url}).then(function(e){return e.body})},getCallHistory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Date(e.from||Date.now()).toISOString();return this.request({method:"GET",service:"janus",resource:"history/userSessions",qs:{from:t}}).then(function(e){return e.body})},join:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.correlationId||t.correlationId;if(!r)throw new Error("locus.correlationId or options.correlationId is required");return this.request({method:"POST",uri:e.url+"/participant",body:{correlationId:r,deviceUrl:this.spark.internal.device.url,localMedias:[{localSdp:(0,s.default)({type:"SDP",sdp:t.localSdp})}],sequence:e.sequence||{entries:[],rangeStart:0,rangeEnd:0}}}).then(function(e){return e.body.locus})},leave:function(e){var t=this;return this.request({method:"PUT",uri:e.self.url+"/leave",body:{deviceUrl:this.spark.internal.device.url,sequence:e.sequence}}).then(function(e){return e.body.locus}).catch(function(r){return r instanceof LP.SparkHttpError.Conflict?t.get(e):o.default.reject(r)})},list:function(){return this.request({method:"GET",service:"locus",resource:"loci"}).then(function(e){return e.body.loci})},merge:function(e,t){if(!t.baseSequence)return t;var o=(0,d.default)(e);if((0,a.default)(t).forEach(function(e){"baseSequence"!==e&&"participants"!==e&&(o[e]=t[e]||o[e])}),t.participants||t.participants.length){var s=new i.default,c=new n.default;t.participants.forEach(function(e){e.removed?s.add(e.url):c.set(e.url,e)});var u=o.participants.reduce(function(e,t){return s.has(t.url)||(e[t.url]=t),e},{});c.forEach(function(e,t){u[t]=e}),o.participants=(0,r.default)(u)}return o},releaseFloorGrant:function(e,t){return this.spark.request({uri:t.url,method:"PUT",body:{floor:{disposition:"RELEASED"}}}).then(function(e){return e.body})},requestFloorGrant:function(e,t){return this.spark.request({uri:t.url,method:"PUT",body:{floor:{beneficiary:{url:e.self.url,devices:[{url:this.spark.internal.device.url}]},disposition:"GRANTED"}}}).then(function(e){return e.body})},sendDtmf:function(e,t){return this.request({method:"POST",uri:e.self.url+"/sendDtmf",body:{deviceUrl:this.spark.internal.device.url,dtmf:{correlationId:h.default.v4(),tones:t}}})},sync:function(e){return this.request({method:"GET",uri:e.syncUrl}).then(function(e){return e.body||{}})},updateMedia:function(e,t){var r=t.sdp,n=t.audioMuted,i=t.videoMuted,a=t.mediaId,o={audioMuted:n,videoMuted:i};return r&&(o.type="SDP",o.sdp=r),this.request({method:"PUT",uri:e.self.url+"/media",body:{deviceUrl:this.spark.internal.device.url,localMedias:[{localSdp:(0,s.default)(o),mediaId:a}],sequence:e.sequence}}).then(function(e){return e.body.locus})},version:"1.50.15"});t.default=x});r(vM);vM.DESYNC,vM.LESS_THAN,vM.GREATER_THAN,vM.FETCH,vM.EQUAL,vM.USE_CURRENT,vM.USE_INCOMING;var mM=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var gM=function(e){return mM.test(e)};var yM=function(e){return e.split("")},bM="[\\ud800-\\udfff]",wM="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",_M="\\ud83c[\\udffb-\\udfff]",EM="[^\\ud800-\\udfff]",SM="(?:\\ud83c[\\udde6-\\uddff]){2}",xM="[\\ud800-\\udbff][\\udc00-\\udfff]",CM="(?:"+wM+"|"+_M+")"+"?",kM="[\\ufe0e\\ufe0f]?"+CM+("(?:\\u200d(?:"+[EM,SM,xM].join("|")+")[\\ufe0e\\ufe0f]?"+CM+")*"),TM="(?:"+[EM+wM+"?",wM,SM,xM,bM].join("|")+")",AM=RegExp(_M+"(?="+_M+")|"+TM+kM,"g");var IM=function(e){return e.match(AM)||[]};var PM=function(e){return gM(e)?IM(e):yM(e)};var OM=function(e){return function(t){t=Ov(t);var r=gM(t)?PM(t):void 0,n=r?r[0]:t.charAt(0),i=r?bj(r,1).join(""):t.slice(1);return n[e]()+i}}("toUpperCase");var RM=function(e){return OM(Ov(e).toLowerCase())};var jM=function(e,t,r,n){var i=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r},MM=uC({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),NM=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,BM=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var DM=function(e){return(e=Ov(e))&&e.replace(NM,MM).replace(BM,"")},FM=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var LM=function(e){return e.match(FM)||[]},UM=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var zM=function(e){return UM.test(e)},VM="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qM="["+VM+"]",KM="\\d+",GM="[\\u2700-\\u27bf]",HM="[a-z\\xdf-\\xf6\\xf8-\\xff]",WM="[^\\ud800-\\udfff"+VM+KM+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",$M="(?:\\ud83c[\\udde6-\\uddff]){2}",YM="[\\ud800-\\udbff][\\udc00-\\udfff]",JM="[A-Z\\xc0-\\xd6\\xd8-\\xde]",QM="(?:"+HM+"|"+WM+")",ZM="(?:"+JM+"|"+WM+")",XM="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",eN="[\\ufe0e\\ufe0f]?"+XM+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",$M,YM].join("|")+")[\\ufe0e\\ufe0f]?"+XM+")*"),tN="(?:"+[GM,$M,YM].join("|")+")"+eN,rN=RegExp([JM+"?"+HM+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[qM,JM,"$"].join("|")+")",ZM+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[qM,JM+QM,"$"].join("|")+")",JM+"?"+QM+"+(?:['’](?:d|ll|m|re|s|t|ve))?",JM+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",KM,tN].join("|"),"g");var nN=function(e){return e.match(rN)||[]};var iN=function(e,t,r){return e=Ov(e),void 0===(t=r?void 0:t)?zM(e)?nN(e):LM(e):e.match(t)||[]},aN=RegExp("['’]","g");var oN=function(e){return function(t){return jM(iN(DM(t).replace(aN,"")),e,"")}}(function(e,t,r){return t=t.toLowerCase(),e+(r?RM(t):t)}),sN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Forbidden=t.NotAuthorized=t.BadRequest=t.UnknownResponse=t.ConnectionError=void 0;var r,n,i,a,o,s,c,u,l,f,p=y(vT),d=y(aS),h=y(Gy),v=y(Yy),m=y(oS),g=y(sS);function y(e){return e&&e.__esModule?e:{default:e}}var b=t.ConnectionError=(n=r=function(e){function t(){return(0,h.default)(this,t),(0,m.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,v.default)(t,[{key:"parse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,p.default)(this,{code:{value:e.code},reason:{value:e.reason}}),e.reason}}]),t}(Zx.Exception),r.defaultMessage="Failed to connect to socket",n);t.UnknownResponse=(a=i=function(e){function t(){return(0,h.default)(this,t),(0,m.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),t}(b),i.defaultMessage="UnknownResponse is produced by IE when we receive a 4XXX. You probably want to treat this like a NotFound",a),t.BadRequest=(s=o=function(e){function t(){return(0,h.default)(this,t),(0,m.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),t}(b),o.defaultMessage="BadRequest usually implies an attempt to use service account credentials",s),t.NotAuthorized=(u=c=function(e){function t(){return(0,h.default)(this,t),(0,m.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),t}(b),c.defaultMessage="Please refresh your access token",u),t.Forbidden=(f=l=function(e){function t(){return(0,h.default)(this,t),(0,m.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),t}(b),l.defaultMessage="Forbidden usually implies these credentials are not entitled for Spark",f)});r(sN);sN.Forbidden,sN.NotAuthorized,sN.BadRequest,sN.UnknownResponse,sN.ConnectionError;var cN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=m(Rf),n=m(OT),i=m(eC),a=m(wf),o=m(aS),s=m(Gy),c=m(Yy),u=m(oS),l=m(sS),f=m(mb),p=m(up),d=m(mk),h=m(pE),v=m(gP);function m(e){return e&&e.__esModule?e:{default:e}}var g=new f.default,y=function(e){function t(){(0,s.default)(this,t);var e=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return e.onmessage=e.onmessage.bind(e),e.onclose=e.onclose.bind(e),e}return(0,l.default)(t,e),(0,c.default)(t,[{key:"close",value:function(e){var t=this;return new a.default(function(r,n){t.logger.info("socket: closing");var i=g.get(t);if(2===i.readyState||3===i.readyState)return t.logger.info("socket: already closed"),void r();if((e=e||{}).code&&1e3!==e.code&&(e.code<3e3||e.code>4999))n(new Error("`options.code` must be 1000 or between 3000 and 4999 (inclusive)"));else{e=(0,h.default)(e,{code:1e3,reason:"Done"});var a=(0,nC.safeSetTimeout)(function(){try{t.logger.info("socket: no close event received, forcing closure"),r(t.onclose({code:1e3,reason:"Done (forced)"}))}catch(e){t.logger.warn("socket: force-close failed",e)}},t.forceCloseDelay);i.onclose=function(e){t.logger.info("socket: close event fired",e.code,e.reason),clearTimeout(a),t.onclose(e),r(e)},i.close(e.code,e.reason)}})}},{key:"open",value:function(e,r){var o=this;return new a.default(function(a,s){if(e)if(g.get(o))s(new Error("Socket#open() can only be called once per instance"));else{r=r||{},(0,Zx.checkRequired)(["forceCloseDelay","pingInterval","pongTimeout","token","trackingId","logger"],r),(0,i.default)(r).forEach(function(e){(0,n.default)(o,e,{enumerable:!1,value:r[e]})});var c=t.getWebSocketConstructor();o.logger.info("socket: creating WebSocket");var u=new c(e);u.binaryType="arraybuffer",u.onmessage=o.onmessage,u.onclose=function(e){switch((e=o._fixCloseCode(e)).code){case 1005:return s(new sN.UnknownResponse(e));case 4400:return s(new sN.BadRequest(e));case 4401:return s(new sN.NotAuthorized(e));case 4403:return s(new sN.Forbidden(e));default:return s(new sN.ConnectionError(e))}},u.onopen=function(){o.logger.info("socket: connected"),o._authorize().then(function(){o.logger.info("socket: authorized"),u.onclose=o.onclose,a()}).catch(s)},u.onerror=function(e){o.logger.warn("socket: error event fired",e)},g.set(o,u),o.logger.info("socket: waiting for server")}else s(new Error("`url` is required"))})}},{key:"onclose",value:function(e){this.logger.info("socket: closed",e.code,e.reason),clearTimeout(this.pongTimer),clearTimeout(this.pingTimer),e=this._fixCloseCode(e),this.emit("close",e),this.removeAllListeners()}},{key:"onmessage",value:function(e){try{var t=JSON.parse(e.data),r=parseInt(t.sequenceNumber,10);this.logger.debug("socket: sequence number: ",r),this.expectedSequenceNumber&&r!==this.expectedSequenceNumber&&(this.logger.debug("socket: sequence number mismatch indicates lost mercury message. expected: "+this.expectedSequenceNumber+", actual: "+r),this.emit("sequence-mismatch",r,this.expectedSequenceNumber)),this.expectedSequenceNumber=r+1;var n={data:t};this._acknowledge(n),"pong"===t.type?this.emit("pong",n):this.emit("message",n)}catch(e){this.logger.warn("socket: error while receiving WebSocket message",e)}}},{key:"send",value:function(e){var t=this;return new a.default(function(n,i){return 1!==t.readyState?i(new Error("INVALID_STATE_ERROR")):((0,p.default)(e)&&(e=(0,r.default)(e)),g.get(t).send(e),n())})}},{key:"_acknowledge",value:function(e){return e?(0,d.default)(e,"data.id")?this.send({messageId:e.data.id,type:"ack"}):a.default.reject(new Error("`event.data.id` is required")):a.default.reject(new Error("`event` is required"))}},{key:"_authorize",value:function(){var e=this;return new a.default(function(t){e.logger.info("socket: authorizing"),e.send({id:v.default.v4(),type:"authorization",data:{token:e.token},trackingId:e.trackingId,logLevelToken:e.logLevelToken});e.once("message",function r(n){n.data.type||"mercury.buffer_state"!==n.data.data.eventType&&"mercury.registration_status"!==n.data.data.eventType||(e.removeListener("message",r),e._ping(),t())})})}},{key:"_fixCloseCode",value:function(e){if(1005===e.code&&e.reason)switch(e.reason.toLowerCase()){case"replaced":this.logger.info("socket: fixing CloseEvent code for reason: ",e.reason),e.code=4e3;break;case"authentication failed":case"authentication did not happen within the timeout window of 30000 seconds.":this.logger.info("socket: fixing CloseEvent code for reason: ",e.reason),e.code=1008}return e}},{key:"_ping",value:function(e){var t=this;return e=e||v.default.v4(),this.pongTimer=(0,nC.safeSetTimeout)(function(){try{t.logger.info("socket: pong not receive in expected period, closing socket"),t.close({code:1e3,reason:"Pong not received"}).catch(function(e){t.logger.warn("socket: failed to close socket after missed pong",e)})}catch(e){t.logger.error("socket: error occurred in onPongNotReceived",e)}},this.pongTimeout),this.once("pong",function(){try{clearTimeout(t.pongTimer),t.pingTimer=(0,nC.safeSetTimeout)(function(){return t._ping()},t.pingInterval)}catch(e){t.logger.error("socket: error occurred in scheduleNextPingAndCancelPongTimer",e)}}),this.once("pong",function(r){try{t.logger.debug("socket: pong",r.data.id),r.data&&r.data.id!==e&&(t.logger.info("socket: received pong for wrong ping id, closing socket"),t.logger.debug("socket: expected",e,"received",r.data.id),t.close({code:1e3,reason:"Pong mismatch"}))}catch(e){t.logger.error("socket: error occurred in confirmPongId",e)}}),this.logger.debug("socket: ping "+e),this.send({id:e,type:"ping"})}},{key:"binaryType",get:function(){return g.get(this).binaryType}},{key:"bufferedAmount",get:function(){return g.get(this).bufferedAmount}},{key:"extensions",get:function(){return g.get(this).extensions}},{key:"protocol",get:function(){return g.get(this).protocol}},{key:"readyState",get:function(){return g.get(this).readyState}},{key:"url",get:function(){return g.get(this).url}}],[{key:"getWebSocketConstructor",value:function(){throw new Error("Socket.getWebSocketConstructor() must be implemented in an environmentally appropriate way")}}]),t}(hE.EventEmitter);t.default=y});r(cN);var uN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=cN)&&r.__esModule?r:{default:r};n.default.getWebSocketConstructor=function(){return WebSocket},t.default=n.default});r(uN);var lN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=uN,e&&e.__esModule?e:{default:e}).default;var e}})});r(lN);var fN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,a=g(su),o=g(ST),s=g(lu),c=g(Cf),u=g(eC),l=g(wf),f=g(ZI),p=g(aP),d=g(oN),h=g(BE),v=g(lN),m=g(wy);function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var b=["idle","done (forced)","pong not received","pong mismatch"],w=LP.SparkPlugin.extend((r=(0,Zx.deprecated)("Mercury#listen(): Use Mercury#connect() instead"),n=(0,Zx.deprecated)("Mercury#stopListening(): Use Mercury#disconnect() instead"),y(i={namespace:"Mercury",session:{connected:{default:!1,type:"boolean"},connecting:{default:!1,type:"boolean"},socket:"object",localClusterServiceUrls:"object"},derived:{listening:{deps:["connected"],fn:function(){return this.connected}}},connect:function(e){var t=this;return this.connected?(this.logger.info("mercury: already connected, will not connect again"),l.default.resolve()):(this.connecting=!0,l.default.resolve(this.spark.internal.device.registered||this.spark.internal.device.register()).then(function(){return t.logger.info("mercury: connecting"),t._connectWithBackoff(e)}))},disconnect:function(){var e=this;return new l.default(function(t){if(e.backoffCall&&(e.logger.info("mercury: aborting connection"),e.backoffCall.abort()),e.socket)return e.socket.removeAllListeners("message"),e.once("offline",t),void e.socket.close();t()})},listen:function(){return this.connect()},stopListening:function(){return this.disconnect()},processRegistrationStatusEvent:function(e){this.localClusterServiceUrls=e.localClusterServiceUrls},_applyOverrides:function(e){e.headers&&(0,u.default)(e.headers).forEach(function(t){(0,f.default)(e,t,e.headers[t])})},_prepareUrl:function(e){var t=this;return e||(e=this.spark.internal.device.webSocketUrl),this.spark.internal.feature.getFeature("developer","web-ha-messaging").then(function(r){return r?t.spark.internal.device.useServiceCatalogUrl(e):e}).then(function(t){e=t}).then(function(){return t.spark.internal.feature.getFeature("developer","web-shared-mercury")}).then(function(r){return e=m.default.parse(e,!0),(0,c.default)(e.query,{outboundWireFormat:"text",bufferStates:!0,aliasHttpStatus:!0}),r&&((0,c.default)(e.query,{mercuryRegistrationStatus:!0,isRegistrationRefreshEnabled:!0}),(0,s.default)(e.query,"bufferStates")),(0,p.default)(t,"spark.config.device.ephemeral",!1)&&(e.query.multipleConnections=!0),m.default.format(e)})},_attemptConnection:function(e,t){var r=this,n=new v.default,i=void 0;n.on("close",function(){return r._onclose.apply(r,arguments)}),n.on("message",function(){return r._onmessage.apply(r,arguments)}),n.on("sequence-mismatch",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._emit.apply(r,["sequence-mismatch"].concat(t))}),l.default.all([this._prepareUrl(e),this.spark.credentials.getUserToken()]).then(function(e){var t=(0,o.default)(e,2),a=t[0],s=t[1];return i=a,n.open(a,{forceCloseDelay:r.config.forceCloseDelay,pingInterval:r.config.pingInterval,pongTimeout:r.config.pongTimeout,token:s.toString(),trackingId:r.spark.sessionId+"_"+Date.now(),logger:r.logger})}).then(function(){return r.socket=n,r.spark.internal.metrics.submitClientMetrics("web-ha-mercury",{fields:{success:!0},tags:{action:"connected",url:i}}),t(),r.spark.internal.feature.getFeature("developer","web-ha-messaging").then(function(e){return e?r.spark.internal.device.fetchNewUrls(i):l.default.resolve()})}).catch(function(e){return 1006!==e.code&&r.backoffCall&&r.backoffCall.getNumRetries()>0&&r._emit("connection_failed",e,{retries:r.backoffCall.getNumRetries()}),r.logger.info("mercury: connection attempt failed",e),e instanceof sN.UnknownResponse?(r.logger.info("mercury: received unknown response code, refreshing device registration"),r.spark.internal.device.refresh().then(function(){return t(e)})):e instanceof sN.NotAuthorized?(r.logger.info("mercury: received authorization error, reauthorizing"),r.spark.credentials.refresh({force:!0}).then(function(){return t(e)})):e instanceof sN.BadRequest||e instanceof sN.Forbidden?(r.logger.warn("mercury: received unrecoverable response from mercury"),r.backoffCall.abort(),t(e)):e instanceof sN.ConnectionError?r.spark.internal.feature.getFeature("developer","web-ha-messaging").then(function(t){return t?(r.logger.info("mercury: received a generic connection error, will try to connect to another datacenter"),r.spark.internal.metrics.submitClientMetrics("web-ha-mercury",{fields:{success:!1},tags:{action:"failed",error:e.message,url:i}}),r.spark.internal.device.markUrlFailedAndGetNew(i)):null}).then(function(){return t(e)}):t(e)}).catch(function(e){r.logger.error("mercury: failed to handle connection failure",e),t(e)})},_connectWithBackoff:function(e){var t=this;return new l.default(function(r,n){var i=void 0;(i=h.default.call(function(r){t.logger.info("mercury: executing connection attempt "+i.getNumRetries()),t._attemptConnection(e,r)},function(e){return t.connecting=!1,t.backoffCall=void 0,e?(t.logger.info("mercury: failed to connect after "+i.getNumRetries()+" retries; log statement about next retry was inaccurate"),n(e)):(t.connected=!0,t._emit("online"),r())})).setStrategy(new h.default.ExponentialStrategy({initialDelay:t.config.backoffTimeReset,maxDelay:t.config.backoffTimeMax})),t.config.maxRetries&&i.failAfter(t.config.maxRetries),i.on("abort",function(){t.logger.info("mercury: connection aborted"),n()}),i.on("callback",function(e){if(e){var r=i.getNumRetries(),n=Math.min(i.strategy_.nextBackoffDelay_,t.config.backoffTimeMax);return t.logger.info("mercury: failed to connect; attempting retry "+(r+1)+" in "+n+" ms"),void("development"===Tc.env.NODE_ENV&&t.logger.debug("mercury: ",e,e.stack))}t.logger.info("mercury: connected")}),i.start(),t.backoffCall=i})},_emit:function(){try{this.trigger.apply(this,arguments)}catch(e){this.logger.error("mercury: error occurred in event handler",e)}},_getEventHandlers:function(e){var t=e.split("."),r=(0,o.default)(t,2),n=r[0],i=r[1],a=[];if(!this.spark[n]&&!this.spark.internal[n])return a;var s=(0,d.default)("process_"+i+"_event");return(this.spark[n]||this.spark.internal[n])[s]&&a.push({name:s,namespace:n}),a},_onclose:function(e){try{var t=e.reason&&e.reason.toLowerCase(),r=this.socket.url;switch(this.socket.removeAllListeners(),this.unset("socket"),this.connected=!1,this._emit("offline",e),e.code){case 1003:this.logger.info("mercury: Mercury service rejected last message; will not reconnect: "+e.reason),this._emit("offline.permanent",e);break;case 4e3:this.logger.info("mercury: socket replaced; will not reconnect"),this._emit("offline.replaced",e);break;case 1001:case 1005:case 1006:case 1011:this.logger.info("mercury: socket disconnected; reconnecting"),this._emit("offline.transient",e),this._reconnect(r);break;case 1e3:b.includes(t)?(this.logger.info("mercury: socket disconnected; reconnecting"),this._emit("offline.transient",e),this._reconnect(r)):(this.logger.info("mercury: socket disconnected; will not reconnect"),this._emit("offline.permanent",e));break;default:this.logger.info("mercury: socket disconnected unexpectedly; will not reconnect"),this._emit("offline.permanent",e)}}catch(e){this.logger.error("mercury: error occurred in close handler",e)}},_onmessage:function(e){var t=this,r=e.data;Tc.env.ENABLE_MERCURY_LOGGING&&this.logger.debug("mercury: message envelope: ",r);var n=r.data;return this._applyOverrides(n),this._getEventHandlers(n.eventType).reduce(function(e,r){return e.then(function(){var e=r.namespace,i=r.name;return new l.default(function(r){return r((t.spark[e]||t.spark.internal[e])[i](n))}).catch(function(e){return t.logger.error("mercury: error occurred in autowired event handler for "+n.eventType,e)})})},l.default.resolve()).then(function(){t._emit("event",e.data);var i=n.eventType.split("."),a=(0,o.default)(i,1)[0];t._emit("event:"+a,r),t._emit("event:"+n.eventType,r)}).catch(function(e){t.logger.error("mercury: error occurred processing socket message",e)})},_reconnect:function(e){return this.logger.info("mercury: reconnecting"),this.connect(e)},version:"1.50.15"},"connect",[Zx.oneFlight],(0,a.default)(i,"connect"),i),y(i,"disconnect",[Zx.oneFlight],(0,a.default)(i,"disconnect"),i),y(i,"listen",[r],(0,a.default)(i,"listen"),i),y(i,"stopListening",[n],(0,a.default)(i,"stopListening"),i),i));t.default=w});r(fN);var pN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={mercury:{pingInterval:Tc.env.MERCURY_PING_INTERVAL||15e3,pongTimeout:Tc.env.MERCURY_PONG_TIMEOUT||14e3,backoffTimeMax:Tc.env.MERCURY_BACKOFF_TIME_MAX||32e3,backoffTimeReset:Tc.env.MERCURY_BACKOFF_TIME_RESET||1e3,forceCloseDelay:Tc.env.MERCURY_FORCE_CLOSE_DELAY||2e3}}});r(pN);var dN=function(e,t,r,n){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(n,o,r(o),e)}return n};var hN=function(e,t,r,n){return Ak(e,function(e,i,a){t(n,e,r(e),a)}),n};var vN=function(e,t){return function(r,n){var i=md(r)?dN:hN,a=t?t():{};return i(r,e,tO(n,2),a)}},mN=vN(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),gN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(If),n=a(wf),i=a(mN);function a(e){return e&&e.__esModule?e:{default:e}}var o=LP.SparkPlugin.extend({namespace:"Feature",getFeature:function(e,t,r){if("developer"!==e&&"user"!==e&&"entitlement"!==e)return n.default.reject(new Error("Invalid feature keyType provided. Only `developer`, `user`, and `entitlement` feature toggles are permitted."));r=r||{};var i=this.spark.internal.device.features[e].get(t);return i?r.full?n.default.resolve(i.serialize()):n.default.resolve(i.value):n.default.resolve(null)},setFeature:function(e,t,r){var i=this;return"developer"!==e&&"user"!==e?n.default.reject(new Error("Only `developer` and `user` feature toggles can be set.")):this.request({method:"POST",api:"feature",resource:"features/users/"+this.spark.internal.device.userId+"/"+e,body:{key:t,mutable:!0,val:r}}).then(function(t){return i.spark.internal.device.features[e].add(t.body,{merge:!0})})},setBundledFeatures:function(e){var t=this;return e.forEach(function(e){e.mutable=e.mutable||"true","USER"!==e.type&&"DEV"!==e.type&&(e.type="USER")}),this.request({method:"POST",api:"feature",resource:"features/users/"+this.spark.internal.device.userId+"/toggles",body:e}).then(function(e){var r=(0,i.default)(e.body.featureToggles,{type:"USER"});t.spark.internal.device.features.user.add(r[0],{merge:!0}),t.spark.internal.device.features.developer.add(r[1],{merge:!0})})},initialize:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];(0,r.default)(LP.SparkPlugin.prototype.initialize,this,t),this.listenToAndRun(this.spark,"change:internal.device.features.developer",this.trigger.bind(this,"change:developer")),this.listenToAndRun(this.spark,"change:internal.device.features.entitlement",this.trigger.bind(this,"change:entitlement")),this.listenToAndRun(this.spark,"change:internal.device.features.user",this.trigger.bind(this,"change:user"))},version:"1.50.15"});t.default=o});r(gN);var yN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={feature:{}}});r(yN),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(gN).default}});var r=i(gN),n=i(yN);function i(e){return e&&e.__esModule?e:{default:e}}(0,LP.registerInternalPlugin)("feature",r.default,{config:n.default})}));var bN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(ST),n=a(If),i=a(wf);function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,a(ow).default)("metric id"),s=LP.Batcher.extend({namespace:"Metrics",prepareItem:function(e){var t="production"===Tc.env.NODE_ENV?null:"TEST";return e.appType=e.appType||this.config.appType,e.env=e.env||t,e.time=e.time||Date.now(),e.version=e.version||this.spark.version,i.default.resolve(e)},prepareRequest:function(e){return i.default.resolve(e.map(function(e){return e.postTime=e.postTime||Date.now(),e}))},submitHttpRequest:function(e){return this.spark.request({method:"POST",service:"metrics",resource:"metrics",body:{metrics:e}})},handleHttpSuccess:function(e){var t=this;return i.default.all(e.options.body.metrics.map(function(e){return t.acceptItem(e)}))},handleHttpError:function(e){var t=this;return e instanceof LP.SparkHttpError.NetworkOrCORSError?(this.logger.warn("metrics-batcher: received network error submitting metrics, reenqueuing payload"),i.default.all(e.options.body.metrics.map(function(e){return new i.default(function(r){var n=e[o].nextDelay;n<t.config.batcherRetryPlateau&&(e[o].nextDelay*=2),(0,nC.safeSetTimeout)(function(){r(t.rerequest(e))},n)})}))):(0,n.default)(LP.Batcher.prototype.handleHttpError,this,[e])},rerequest:function(e){var t=this;return i.default.all([this.getDeferredForRequest(e),this.prepareItem(e)]).then(function(e){var n=(0,r.default)(e,2),i=n[0],a=n[1];t.enqueue(a).then(function(){return t.bounce()}).catch(function(e){return i.reject(e)})})},fingerprintRequest:function(e){return e[o]=e[o]||{nextDelay:1e3},i.default.resolve(e[o])},fingerprintResponse:function(e){return i.default.resolve(e[o])}});t.default=s});r(bN);var wN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=n(wf);function n(e){return e&&e.__esModule?e:{default:e}}var i=n(bN).default.extend({namespace:"Metrics",prepareItem:function(e){return r.default.resolve(e)},prepareRequest:function(e){return r.default.resolve(e)},submitHttpRequest:function(e){return this.spark.request({method:"POST",service:"metrics",resource:"clientmetrics",body:{metrics:e}})}});t.default=i});r(wN);var _N=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(wf),n=i(Cf);function i(e){return e&&e.__esModule?e:{default:e}}var a=i(bN).default.extend({namespace:"Metrics",prepareItem:function(e){var t={buildType:"production"===Tc.env.NODE_ENV?"prod":"test",networkType:"unknown"};return e.eventPayload.origin=(0,n.default)(t,e.eventPayload.origin),r.default.resolve(e)},prepareRequest:function(e){return e.forEach(function(e){e.eventPayload.originTime.sent=(new Date).toISOString()}),r.default.resolve(e)},submitHttpRequest:function(e){return this.spark.request({method:"POST",service:"metrics",resource:"clientmetrics",body:{metrics:e}})}});t.default=a});r(_N);var EN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i=u(su),a=u(Cf),o=u(bN),s=u(wN),c=u(_N);function u(e){return e&&e.__esModule?e:{default:e}}var l,f,p,d,h,v,m=LP.SparkPlugin.extend((r=(0,Zx.deprecated)("Metrics#sendUnstructured() is deprecated; please use Metrics#submit()"),n={children:{batcher:o.default,clientMetricsBatcher:s.default,callDiagnosticEventsBatcher:c.default},namespace:"Metrics",sendUnstructured:function(e,t){return this.submit(e,t)},submit:function(e,t){return this.batcher.request((0,a.default)({key:e},t))},submitClientMetrics:function(e,t,r){var n={metricName:e};if(t.tags&&(n.tags=t.tags),t.fields&&(n.fields=t.fields),t.type&&(n.type=t.type),t.context&&(n.context=t.context),n.timestamp=Date.now(),r){var i={metrics:[n]};return this.postPreLoginMetric(i,r)}return this.clientMetricsBatcher.request(n)},aliasUser:function(e){return this.request({method:"POST",api:"metrics",resource:"clientmetrics",headers:{"x-prelogin-userid":e},body:{},qs:{alias:!0}})},postPreLoginMetric:function(e,t){var r=this;return this.spark.credentials.getClientToken().then(function(n){return r.request({method:"POST",api:"metrics",resource:"clientmetrics-prelogin",headers:{authorization:n.toString(),"x-prelogin-userid":t},body:e})})},submitCallDiagnosticEvents:function(e){var t={type:"diagnostic-event",eventPayload:e};return this.callDiagnosticEventsBatcher.request(t)},version:"1.50.15"},l=n,f="sendUnstructured",p=[r],d=(0,i.default)(n,"sendUnstructured"),h=n,v={},Object.keys(d).forEach(function(e){v[e]=d[e]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=p.slice().reverse().reduce(function(e,t){return t(l,f,e)||e},v),h&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(h):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(l,f,v),v=null),n));t.default=m});r(EN);var SN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={device:{preDiscoveryServices:{metricsServiceUrl:Tc.env.METRICS_SERVICE_URL||"https://metrics-a.wbx2.com/metrics/api/v1",metrics:Tc.env.METRICS_SERVICE_URL||"https://metrics-a.wbx2.com/metrics/api/v1"}},metrics:{appType:Zx.inBrowser?"browser":"nodejs",batcherWait:500,batcherMaxCalls:50,batcherMaxWait:1500,batcherRetryPlateau:32e3}}});r(SN);var xN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(EN).default}});var r=i(EN),n=i(SN);function i(e){return e&&e.__esModule?e:{default:e}}(0,LP.registerInternalPlugin)("metrics",r.default,{config:n.default}),t.config=n.default});r(xN);xN.config;var CN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownResponse=t.NotAuthorized=t.Forbidden=t.ConnectionError=t.BadRequest=t.config=t.Socket=t.Mercury=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(fN).default}}),Object.defineProperty(t,"Mercury",{enumerable:!0,get:function(){return i(fN).default}}),Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return i(lN).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return i(pN).default}}),Object.defineProperty(t,"BadRequest",{enumerable:!0,get:function(){return sN.BadRequest}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return sN.ConnectionError}}),Object.defineProperty(t,"Forbidden",{enumerable:!0,get:function(){return sN.Forbidden}}),Object.defineProperty(t,"NotAuthorized",{enumerable:!0,get:function(){return sN.NotAuthorized}}),Object.defineProperty(t,"UnknownResponse",{enumerable:!0,get:function(){return sN.UnknownResponse}});var r=i(fN),n=i(pN);function i(e){return e&&e.__esModule?e:{default:e}}(0,LP.registerInternalPlugin)("mercury",r.default,{config:n.default,onBeforeLogout:function(){return this.disconnect()}})});r(CN);CN.UnknownResponse,CN.NotAuthorized,CN.Forbidden,CN.ConnectionError,CN.BadRequest,CN.config,CN.Socket,CN.Mercury;var kN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DESYNC=t.LESS_THAN=t.GREATER_THAN=t.FETCH=t.EQUAL=t.USE_CURRENT=t.USE_INCOMING=t.eventKeys=void 0,Object.defineProperty(t,"eventKeys",{enumerable:!0,get:function(){return pM.locusEventKeys}}),Object.defineProperty(t,"USE_INCOMING",{enumerable:!0,get:function(){return vM.USE_INCOMING}}),Object.defineProperty(t,"USE_CURRENT",{enumerable:!0,get:function(){return vM.USE_CURRENT}}),Object.defineProperty(t,"EQUAL",{enumerable:!0,get:function(){return vM.EQUAL}}),Object.defineProperty(t,"FETCH",{enumerable:!0,get:function(){return vM.FETCH}}),Object.defineProperty(t,"GREATER_THAN",{enumerable:!0,get:function(){return vM.GREATER_THAN}}),Object.defineProperty(t,"LESS_THAN",{enumerable:!0,get:function(){return vM.LESS_THAN}}),Object.defineProperty(t,"DESYNC",{enumerable:!0,get:function(){return vM.DESYNC}});var r,n=(r=vM)&&r.__esModule?r:{default:r};(0,LP.registerInternalPlugin)("locus",n.default),t.default=n.default});r(kN);kN.DESYNC,kN.LESS_THAN,kN.GREATER_THAN,kN.FETCH,kN.EQUAL,kN.USE_CURRENT,kN.USE_INCOMING,kN.eventKeys;var TN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s(ET),n=s(vw),i=s(wf),a=s(aP),o=s(Vj);function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return Boolean(e.self&&p(e.self))}function u(e,t){return c(t)&&t.self.devices.some(function(t){return e.internal.device.url===t.url&&"JOINED"===t.state})}function l(e,t,r){var n=void 0,i=void 0;return r.person.isExternal||(i=r.person.id,n=e.people.inferPersonIdFromUuid(r.person.id)),{_id:r.id,isSelf:t.self.url===r.url,isInitiator:r.isCreator||!1,personUuid:i,personId:n,state:f(r),audioMuted:v(r),videoMuted:m(r)}}function f(e){var t=e.state&&e.state.toLowerCase();switch(t){case"idle":return"notified";case"joined":return"connected";case"left":return"disconnected";default:return t}}function p(e){return e&&"JOINED"===e.state}function d(e){return h(e)[0]}function h(e){return e.participants.filter(function(t){return"USER"===t.type&&t.url!==e.self.url})}function v(e){return p(e)&&!e.status.audioStatus.includes("SEND")}function m(e){return p(e)&&!e.status.videoStatus.includes("SEND")}t.activeParticipants=function(e){return(0,o.default)(e.participants,{state:"JOINED"})},t.direction=function(e){if(!e||!e.self)return"unknown";return e.self.isCreator?"out":"in"},t.waitForMediaShare=function(e){return function(){var t=new i.default(function(t,r){!function n(){try{e.logger.info("checking for media share");var i=e.locus.mediaShares.find(function(e){return"content"===e.name});if(!i)return e.logger.info("did not find media share, waiting for next locus change"),void e.once("change:locus",n);e.logger.info("found media share"),t(i)}catch(t){e.logger.error("something unexpected happened"),e.logger.error(t),r(t)}}()});return i.default.race([t,new i.default(function(e,t){return setTimeout(t(new Error("Could not find media share after 10000ms")),1e4)})])}},t.isActive=function(e){return"ACTIVE"===e.fullState.state},t.isCall=function(e){return e&&e.fullState&&"CALL"===e.fullState.type},t.joined=c,t.joinedOnThisDevice=u,t.participantsToCallMemberships=function(e,t){var i=new n.default,o=new n.default,s=!0,c=!1,u=void 0;try{for(var f,p=(0,r.default)(t.participants);!(s=(f=p.next()).done);s=!0){var d=f.value;"USER"===d.type?i.set(d.url,d):"RESOURCE_ROOM"===d.type&&o.set(d.url,d)}}catch(e){c=!0,u=e}finally{try{!s&&p.return&&p.return()}finally{if(c)throw u}}var h=[];return i.forEach(function(n){var i=l(e,t,n);if(n.devices){var s=!0,c=!1,u=void 0;try{for(var f,p=(0,r.default)(n.devices);!(s=(f=p.next()).done);s=!0){var d=f.value;if("JOINED"===d.state&&"OBSERVE"===(0,a.default)(d,"intent.type")){var g=o.get(d.url);i.audioMuted=v(g),i.videoMuted=m(g)}o.delete(d.url)}}catch(e){c=!0,u=e}finally{try{!s&&p.return&&p.return()}finally{if(c)throw u}}}h.push(i)}),o.forEach(function(r){var n=l(e,t,r);h.push(n)}),h},t.participantToCallMembership=l,t.participantStateToCallMembershipState=f,t.makeInternalCallId=function(e){return e.url+"_"+e.fullState.lastActive},t.mediaDirection=function(e,t){if(!t)return"inactive";if(!t.status)return"inactive";return(t.status[e+"Status"]||"inactive").toLowerCase()},t.participantIsJoined=p,t.remoteParticipant=d,t.remoteParticipants=h,t.remoteAudioMuted=v,t.remoteVideoMuted=m,t.shouldRing=function(e){return"NONE"!==(0,a.default)(e,"self.alertType.action")},t.getState=function(e){return e&&e.fullState&&e.fullState.state.toLowerCase()},t.getStatus=function(e,t,n){if(t){var i=d(t);if(i){if(u(e,t)&&i&&p(i))return"connected";if(t.replaces){var o=!0,s=!1,c=void 0;try{for(var l,f=(0,r.default)(t.replaces);!(o=(l=f.next()).done);o=!0){var h=l.value;if(h.locusUrl===n.url&&h.lastActive===(0,a.default)(n,"fullState.lastActive"))return"replaced"}}catch(e){s=!0,c=e}finally{try{!o&&f.return&&f.return()}finally{if(s)throw c}}}var v=t.self;if("LEFT"===i.state||"LEFT"===v.state)return"disconnected";if("DECLINED"===i.state)return"disconnected";if("NOTIFIED"===i.state)return"ringing"}}return"initiated"},t.getThisDevice=function(e,t){return t&&t.self&&t.self.devices.find(function(t){return t.url===e.internal.device.url})}});r(TN);TN.activeParticipants,TN.direction,TN.waitForMediaShare,TN.isActive,TN.isCall,TN.joined,TN.joinedOnThisDevice,TN.participantsToCallMemberships,TN.participantToCallMembership,TN.participantStateToCallMembershipState,TN.makeInternalCallId,TN.mediaDirection,TN.participantIsJoined,TN.remoteParticipant,TN.remoteParticipants,TN.remoteAudioMuted,TN.remoteVideoMuted,TN.shouldRing,TN.getState,TN.getStatus,TN.getThisDevice;var AN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e&&t)return"sendrecv";if(e&&!t)return"sendonly";if(!e&&t)return"recvonly";if(!e&&!t)return"inactive";throw new Error("If you see this error, your JavaScript engine has a major flaw")}});r(AN);var IN=Object.prototype.hasOwnProperty,PN=vN(function(e,t,r){IN.call(e,r)?++e[r]:id(e,r,1)});var ON=function(e,t,r){var n=null==e?0:e.length;return n?(t=r||void 0===t?1:H_(t),Dv(e,t<0?0:t,n)):[]};var RN=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0};var jN=function(e,t){var r=!0;return Ak(e,function(e,n,i){return r=!!t(e,n,i)}),r};var MN=function(e,t,r){var n=md(e)?RN:jN;return r&&uE(e,t,r)&&(t=void 0),n(e,tO(t,3))},NN=Object.prototype.hasOwnProperty,BN=vN(function(e,t,r){NN.call(e,r)?e[r].push(t):id(e,r,[t])}),DN=vN(function(e,t,r){id(e,r,t)}),FN=Math.max;var LN=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:H_(r);return i<0&&(i=FN(n+i,0)),e_(e,t,i)};var UN=function(e){return null!=e&&e.length?Dv(e,0,-1):[]};var zN=function(e,t,r){t=Rv(t,e);var n=null==(e=Fv(e,t))?e:e[Nv(jv(t))];return null==n?void 0:Zv(n,e,r)},VN=gw(zN),qN=gw(function(e,t,r){var n=-1,i="function"==typeof t,a=Fd(e)?Array(e.length):[];return Ak(e,function(e){a[++n]=i?Zv(t,e,r):zN(e,t,r)}),a});var KN=function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n},GN=Math.max,HN=Math.min;var WN=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=n;return void 0!==r&&(i=(i=H_(r))<0?GN(n+i,0):HN(i,n-1)),t==t?KN(e,t,i):Qw(e,Zw,i,!0)};var $N=function(e,t){var r=-1,n=Fd(e)?Array(e.length):[];return Ak(e,function(e,i,a){n[++r]=t(e,i,a)}),n};var YN=function(e,t){return(md(e)?jf:$N)(e,tO(t,3))};var JN=function(e,t,r){for(var n=-1,i=e.length;++n<i;){var a=e[n],o=t(a);if(null!=o&&(void 0===s?o==o&&!mv(o):r(o,s)))var s=o,c=a}return c};var QN=function(e,t){return e>t};var ZN=function(e){return e&&e.length?JN(e,rm,QN):void 0};var XN=function(e,t){return e<t};var eB=function(e){return e&&e.length?JN(e,rm,XN):void 0};var tB=function(e,t,r,n,i){return i(e,function(e,i,a){r=n?(n=!1,e):t(r,e,i,a)}),r};var rB=function(e,t,r){var n=md(e)?jM:tB,i=arguments.length<3;return n(e,tO(t,4),r,i,Ak)};var nB=function(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r},iB=hC(!0);var aB=Tk(function(e,t){return e&&iB(e,t,Ld)},!0);var oB=function(e,t,r){var n=md(e)?nB:tB,i=arguments.length<3;return n(e,tO(t,4),r,i,aB)};var sB=function(e,t){return(md(e)?$d:zj)(e,nj(tO(t,3)))},cB=Math.floor,uB=Math.random;var lB=function(e,t){return e+cB(uB()*(t-e+1))};var fB=function(e){var t=e.length;return t?e[lB(0,t-1)]:void 0};var pB=function(e){return fB(_C(e))};var dB=function(e){return(md(e)?fB:pB)(e)};var hB=function(e,t){var r=-1,n=e.length,i=n-1;for(t=void 0===t?n:t;++r<t;){var a=lB(r,i),o=e[a];e[a]=e[r],e[r]=o}return e.length=t,e};var vB=function(e){return hB(Wd(e))};var mB=function(e){return hB(_C(e))};var gB=function(e){return(md(e)?vB:mB)(e)};var yB=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e};var bB=function(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e==e,a=mv(e),o=void 0!==t,s=null===t,c=t==t,u=mv(t);if(!s&&!u&&!a&&e>t||a&&o&&c&&!s&&!u||n&&o&&c||!r&&c||!i)return 1;if(!n&&!a&&!u&&e<t||u&&r&&i&&!n&&!a||s&&r&&i||!o&&i||!c)return-1}return 0};var wB=function(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,o=i.length,s=r.length;++n<o;){var c=bB(i[n],a[n]);if(c)return n>=s?c:c*("desc"==r[n]?-1:1)}return e.index-t.index};var _B=function(e,t,r){var n=-1;t=jf(t.length?t:[rm],kd(tO));var i=$N(e,function(e,r,i){return{criteria:jf(t,function(t){return t(e)}),index:++n,value:e}});return yB(i,function(e,t){return wB(e,t,r)})},EB=gw(function(e,t){if(null==e)return[];var r=t.length;return r>1&&uE(e,t[0],t[1])?t=[]:r>2&&uE(t[0],t[1],t[2])&&(t=[t[0]]),_B(e,Jv(t,1),[])});var SB={countBy:PN,difference:hM,drop:ON,each:Ik,every:MN,filter:Vj,find:iO,forEach:Ik,groupBy:BN,includes:SC,keyBy:DN,indexOf:LN,initial:UN,invoke:VN,invokeMap:qN,isEmpty:hm,lastIndexOf:WN,map:YN,max:ZN,min:eB,partition:mN,reduce:rB,reduceRight:oB,reject:sB,sample:dB,shuffle:gB,some:uO,sortBy:EB,tail:function(e){var t=null==e?0:e.length;return t?Dv(e,1,t):[]},take:function(e,t,r){return e&&e.length?(t=r||void 0===t?1:H_(t),Dv(e,0,t<0?0:t)):[]},without:FO},xB=[].slice,CB={};SB.each(["forEach","each","map","reduce","reduceRight","find","filter","reject","every","some","includes","invoke","invokeMap","max","min","take","initial","tail","drop","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","sample","partition"],function(e){SB[e]&&(CB[e]=function(){var t=xB.call(arguments);return t.unshift(this.models),SB[e].apply(SB,t)})});SB.each(["groupBy","countBy","sortBy","keyBy"],function(e){SB[e]&&(CB[e]=function(t,r){var n=vp(t)?t:function(e){return e.get?e.get(t):e[t]};return SB[e](this.models,n,r)})}),CB.where=function(e,t){return SB.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){var r;for(var n in e)if(r=t.get?t.get(n):t[n],e[n]!==r)return!1;return!0})},CB.findWhere=function(e){return this.where(e,!0)},CB.pluck=function(e){return SB.invokeMap(this.models,"get",e)},CB.first=function(){return this.models[0]},CB.last=function(){return this.models[this.models.length-1]},CB.size=function(){return this.models.length};var kB=CB,TB=n(function(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0});var n=((r=Wk)&&r.__esModule?r:{default:r}).default.extend({idAttribute:"_id",props:{_id:{required:!0,type:"string"},isSelf:{default:!1,type:"boolean"},isInitiator:{default:!1,required:!0,type:"boolean"},personId:{type:"string"},personUuid:{require:!0,type:"string"},state:{required:!0,type:"string",values:["notified","connected","declined","disconnected","waiting"]},audioMuted:{default:!1,type:"boolean"},videoMuted:{default:!1,type:"boolean"}}});t.default=n});r(TB);var AB=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a($I),n=a(kB),i=a(TB);function a(e){return e&&e.__esModule?e:{default:e}}var o=r.default.extend(n.default,{model:i.default,mainIndex:"_id"});t.default=o});function IB(){this.head=null,this.tail=null,this.length=0}r(AB),IB.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},IB.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},IB.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},IB.prototype.clear=function(){this.head=this.tail=null,this.length=0},IB.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},IB.prototype.concat=function(e){if(0===this.length)return ig.alloc(0);if(1===this.length)return this.head.data;for(var t=ig.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t};var PB=ig.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function OB(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!PB(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=jB;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=MB;break;default:return void(this.write=RB)}this.charBuffer=new ig(6),this.charReceived=0,this.charLength=0}function RB(e){return e.toString(this.encoding)}function jB(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function MB(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}OB.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived);var i;n=(t+=e.toString(this.encoding,0,n)).length-1;if((i=t.charCodeAt(n))>=55296&&i<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,n)}return t},OB.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},OB.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t},DB.ReadableState=BB;var NB=$g("stream");function BB(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof fD&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new IB,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new OB(e.encoding),this.encoding=e.encoding)}function DB(e){if(!(this instanceof DB))return new DB(e);this._readableState=new BB(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),hE.call(this)}function FB(e,t,r,n,i){var a=function(e,t){var r=null;Ug(t)||"string"==typeof t||null==t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(t,r);if(a)e.emit("error",a);else if(null===r)t.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,zB(e)}(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var o=new Error("stream.push() after EOF");e.emit("error",o)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else{var c;!t.decoder||i||n||(r=t.decoder.write(r),c=!t.objectMode&&0===r.length),i||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&zB(e))),function(e,t){t.readingMore||(t.readingMore=!0,hc(qB,e,t))}(e,t)}else i||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}Vg(DB,hE),DB.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=ig.from(e,t),t=""),FB(this,r,e,t,!1)},DB.prototype.unshift=function(e){return FB(this,this._readableState,e,"",!0)},DB.prototype.isPaused=function(){return!1===this._readableState.flowing},DB.prototype.setEncoding=function(e){return this._readableState.decoder=new OB(e),this._readableState.encoding=e,this};var LB=8388608;function UB(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=LB?e=LB:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function zB(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(NB("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?hc(VB,e):VB(e))}function VB(e){NB("emit readable"),e.emit("readable"),HB(e)}function qB(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(NB("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function KB(e){NB("readable nexttick read 0"),e.read(0)}function GB(e,t){t.reading||(NB("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),HB(e),t.flowing&&!t.reading&&e.read(0)}function HB(e){var t=e._readableState;for(NB("flow",t.flowing);t.flowing&&null!==e.read(););}function WB(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0===(e-=o)){o===a.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=ig.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,o),0===(e-=o)){o===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function $B(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,hc(YB,t,e))}function YB(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function JB(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function QB(){}function ZB(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function XB(e,t){Object.defineProperty(this,"buffer",{get:Gg(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof fD&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?hc(i,n):i(n);e._writableState.errorEmitted=!0,e.emit("error",n)}(e,r,n,t,i);else{var a=iD(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||nD(e,r),n?hc(rD,e,r,a,i):rD(e,r,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new sD(this)}function eD(e){if(!(this instanceof eD||this instanceof fD))return new eD(e);this._writableState=new XB(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),hE.call(this)}function tD(e,t,r,n,i,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function rD(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),oD(e,t)}function nD(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var o=0;r;)i[o]=r,r=r.next,o+=1;tD(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new sD(t)}else{for(;r;){var s=r.chunk,c=r.encoding,u=r.callback;if(tD(e,t,!1,t.objectMode?1:s.length,s,c,u),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function iD(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function aD(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function oD(e,t){var r=iD(t);return r&&(0===t.pendingcb?(aD(e,t),t.finished=!0,e.emit("finish")):aD(e,t)),r}function sD(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}DB.prototype.read=function(e){NB("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return NB("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?$B(this):zB(this),null;if(0===(e=UB(e,t))&&t.ended)return 0===t.length&&$B(this),null;var n,i=t.needReadable;return NB("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&NB("length less than watermark",i=!0),t.ended||t.reading?NB("reading or ended",i=!1):i&&(NB("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=UB(r,t))),null===(n=e>0?WB(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&$B(this)),null!==n&&this.emit("data",n),n},DB.prototype._read=function(e){this.emit("error",new Error("not implemented"))},DB.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,NB("pipe count=%d opts=%j",n.pipesCount,t);var i=!t||!1!==t.end?o:u;function a(e){NB("onunpipe"),e===r&&u()}function o(){NB("onend"),e.end()}n.endEmitted?hc(i):r.once("end",i),e.on("unpipe",a);var s=function(e){return function(){var t=e._readableState;NB("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,HB(e))}}(r);e.on("drain",s);var c=!1;function u(){NB("cleanup"),e.removeListener("close",d),e.removeListener("finish",h),e.removeListener("drain",s),e.removeListener("error",p),e.removeListener("unpipe",a),r.removeListener("end",o),r.removeListener("end",u),r.removeListener("data",f),c=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||s()}var l=!1;function f(t){NB("ondata"),l=!1,!1!==e.write(t)||l||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==JB(n.pipes,e))&&!c&&(NB("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function p(t){var r;NB("onerror",t),v(),e.removeListener("error",p),0===(r="error",e.listeners(r).length)&&e.emit("error",t)}function d(){e.removeListener("finish",h),v()}function h(){NB("onfinish"),e.removeListener("close",d),v()}function v(){NB("unpipe"),r.unpipe(e)}return r.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",p),e.once("close",d),e.once("finish",h),e.emit("pipe",r),n.flowing||(NB("pipe resume"),r.resume()),e},DB.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var a=JB(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},DB.prototype.on=function(e,t){var r=hE.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&zB(this):hc(KB,this))}return r},DB.prototype.addListener=DB.prototype.on,DB.prototype.resume=function(){var e=this._readableState;return e.flowing||(NB("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,hc(GB,e,t))}(this,e)),this},DB.prototype.pause=function(){return NB("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(NB("pause"),this._readableState.flowing=!1,this.emit("pause")),this},DB.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",function(){if(NB("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){(NB("wrapped data"),t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i)||(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}(["error","close","destroy","pause","resume"],function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){NB("wrapped _read",t),r&&(r=!1,e.resume())},n},DB._fromList=WB,eD.WritableState=XB,Vg(eD,hE),XB.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},eD.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},eD.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),ig.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=QB),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),hc(t,r)}(this,r):function(e,t,r,n){var i=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):ig.isBuffer(r)||"string"==typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),hc(n,a),i=!1),i}(this,n,e,r)&&(n.pendingcb++,i=function(e,t,r,n,i){r=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=ig.from(t,r)),t}(t,r,n),ig.isBuffer(r)&&(n="buffer");var a=t.objectMode?1:r.length;t.length+=a;var o=t.length<t.highWaterMark;o||(t.needDrain=!0);if(t.writing||t.corked){var s=t.lastBufferedRequest;t.lastBufferedRequest=new ZB(r,n,i),s?s.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else tD(e,t,!1,a,r,n,i);return o}(this,n,e,t,r)),i},eD.prototype.cork=function(){this._writableState.corked++},eD.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||nD(this,e))},eD.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},eD.prototype._write=function(e,t,r){r(new Error("not implemented"))},eD.prototype._writev=null,eD.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,oD(e,t),r&&(t.finished?hc(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},Vg(fD,DB);for(var cD=Object.keys(eD.prototype),uD=0;uD<cD.length;uD++){var lD=cD[uD];fD.prototype[lD]||(fD.prototype[lD]=eD.prototype[lD])}function fD(e){if(!(this instanceof fD))return new fD(e);DB.call(this,e),eD.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",pD)}function pD(){this.allowHalfOpen||this._writableState.ended||hc(dD,this)}function dD(e){e.end()}function hD(e){this.afterTransform=function(t,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&e.push(r);i(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function vD(e){if(!(this instanceof vD))return new vD(e);fD.call(this,e),this._transformState=new hD(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){mD(t,e)}):mD(t)})}function mD(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function gD(e){if(!(this instanceof gD))return new gD(e);vD.call(this,e)}function yD(){hE.call(this)}Vg(vD,fD),vD.prototype.push=function(e,t){return this._transformState.needTransform=!1,fD.prototype.push.call(this,e,t)},vD.prototype._transform=function(e,t,r){throw new Error("Not implemented")},vD.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},vD.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},Vg(gD,vD),gD.prototype._transform=function(e,t,r){r(null,e)},Vg(yD,hE),yD.Readable=DB,yD.Writable=eD,yD.Duplex=fD,yD.Transform=vD,yD.PassThrough=gD,yD.Stream=yD,yD.prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",o),r.on("close",s));var a=!1;function o(){a||(a=!0,e.end())}function s(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(u(),0===hE.listenerCount(this,"error"))throw e}function u(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",s),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return r.on("error",c),e.on("error",c),r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e};var bD=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(ET),n=c(aS),i=c(Gy),a=c(Yy),o=c(oS),s=c(sS);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).call(this,{objectMode:!0}))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"_transform",value:function(e,t,n){if(e){var i={local:null,remote:null},a={local:null,remote:null},o={local:null,remote:null},s={local:null,remote:null},c=!0,u=!1,l=void 0;try{for(var f,p=(0,r.default)(e.values());!(c=(f=p.next()).done);c=!0){var d=f.value;["outbound-rtp","outboundrtp"].includes(d.type)&&!d.isRemote&&("audio"===d.mediaType&&(o.local=d,o.remote=e.get(d.remoteId)),"video"===d.mediaType&&(s.local=d,s.remote=e.get(d.remoteId))),["inbound-rtp","inboundrtp"].includes(d.type)&&!d.isRemote&&("audio"===d.mediaType&&(i.local=d,i.remote=e.get(d.remoteId)),"video"===d.mediaType&&(a.local=d,a.remote=e.get(d.remoteId)))}}catch(e){u=!0,l=e}finally{try{!c&&p.return&&p.return()}finally{if(u)throw l}}this.push({incomingAudio:i,incomingVideo:a,outgoingAudio:o,outgoingVideo:s,report:e}),n()}else n()}}]),t}(yD.Transform);t.default=u});r(bD);var wD=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(aS),n=c(Gy),i=c(Yy),a=c(oS),o=c(sS),s=c(mb);function c(e){return e&&e.__esModule?e:{default:e}}var u=new s.default,l=new s.default,f=new s.default,p=new s.default;var d=function(e){function t(e){(0,n.default)(this,t);var i=(0,a.default)(this,(t.__proto__||(0,r.default)(t)).call(this,{objectMode:!0}));u.has(e)||u.set(e,new hE.EventEmitter);var o=u.get(e);return f.has(i)||f.set(i,o),l.has(o)||l.set(o,e),o.once("error",function(e){i.emit("error",e)}),i}return(0,o.default)(t,e),(0,i.default)(t,[{key:"_read",value:function(){var e=this,t=f.get(this);t.once("data",function(t){e.isPaused()||e.push(t)}),p.has(t)||function e(t){var r=(0,nC.safeSetTimeout)(function(){var r=l.get(t);r.getStats().then(function(n){t.emit("data",n),"closed"!==r.signalingState&&"closed"!==r.connectionState&&e(t)}).catch(function(e){t.emit("error",e)})},1e3);p.set(t,r)}(t)}}]),t}(yD.Readable);t.default=d});r(wD);var _D=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,a,o,s=E(su),c=E(ET),u=E(If),l=E(Cf),f=E(wf),p=E(iE),d=E(aP),h=E(iO),v=E(pE),m=E(gP),g=E(fM),y=E(AN),b=E(AB),w=E(bD),_=E(wD);function E(e){return e&&e.__esModule?e:{default:e}}function S(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var x=fM.webrtcHelpers.boolToDirection,C=["ringing","connected","disconnected","replaced"];function k(e,t){var r="string"==typeof t?(0,Uj.parse)(t):t,n=void 0;return(n="screen"===e?r.media.find(function(e){return"video"===e.type&&e.content}):r.media.find(function(t){return t.type===e}))&&n.direction?n.direction:"inactive"}function T(e){switch(e){case"inactive":case"sendrecv":return e;case"sendonly":return"recvonly";case"recvonly":return"sendonly";default:throw new Error('direction "'+e+'" is not valid')}}var A={audio:"Audio",video:"Video"},I=LP.SparkPlugin.extend((r=(0,Zx.whileInFlight)("locusJoinInFlight"),n=(0,Zx.deprecated)("Please use Call#reject()"),i=(0,Zx.whileInFlight)("locusLeaveInFlight"),a=(0,Rj.debounce)(),S(o={namespace:"Phone",children:{media:g.default},collections:{memberships:b.default},session:{activeParticipantsCount:{default:0,required:!0,type:"number"},remoteAudioMuted:{default:!1,required:!1,type:"boolean"},remoteVideoMuted:{default:!1,required:!1,type:"boolean"},correlationId:"string",facingMode:{type:"string",values:["user","environment"]},internalCallId:{setOnce:!0,type:"string"},locus:"object",localMediaStream:"object",locusJoinInFlight:{default:!1,type:"boolean"},locusLeaveInFlight:{default:!1,type:"boolean"},me:{type:"object"}},derived:{id:{deps:["locus"],fn:function(){return(0,d.default)(this,"locus.url")}},isActive:{deps:["locus"],fn:function(){return!(!this.locus||!(0,TN.isActive)(this.locus))}},joinedOnThisDevice:{deps:["locus"],default:!1,fn:function(){return!(!this.locus||!(0,TN.joinedOnThisDevice)(this.spark,this.locus))}},locusUrl:{deps:["locus"],fn:function(){return(0,d.default)(this,"locus.url")}},device:{deps:["locus"],fn:function(){return(0,TN.getThisDevice)(this.spark,this.locus)}},mediaConnection:{deps:["locus"],fn:function(){var e=(0,TN.getThisDevice)(this.spark,this.locus);return(0,d.default)(e,"mediaConnections[0]")}},mediaId:{deps:["locus"],fn:function(){var e=(0,TN.getThisDevice)(this.spark,this.locus);return(0,d.default)(e,"mediaConnections[0].mediaId")}},remoteMember:{deps:["memberships","locus"],fn:function(){if((0,TN.isCall)(this.locus))return this.memberships.find(function(e){return!e.isSelf})}},direction:{deps:["locus"],fn:function(){return this.locus?(0,TN.direction)(this.locus):"out"}},from:{deps:["memberships"],fn:function(){if(this.isCall)return this.memberships.find(function(e){return e.isInitiator})}},to:{deps:["memberships"],fn:function(){if(this.isCall)return this.memberships.find(function(e){return!e.isInitiator})}},state:{deps:["locus"],fn:function(){if(this.config.enableExperimentalGroupCallingSupport)return(0,TN.getState)(this.locus)}},status:{deps:["locus"],fn:function(){return(0,TN.getStatus)(this.spark,this.locus,this.previousAttributes().locus)}},host:{deps:["locus"],fn:function(){if(this.config.enableExperimentalGroupCallingSupport)return this.locus.host}},roomId:{deps:["locus"],fn:function(){if(this.config.enableExperimentalGroupCallingSupport&&this.locus.conversationUrl)return Zx.base64.encode("ciscospark://us/ROOM/"+this.locus.conversationUrl.split("/").pop())}},remoteMediaStream:{deps:["media.remoteMediaStream"],fn:function(){return this.media.remoteMediaStream}},localScreenShare:{deps:["media.localScreenShare"],fn:function(){return this.media.localScreenShare}},receivingAudio:{deps:["media.receivingAudio"],fn:function(){return this.media.receivingAudio}},receivingVideo:{deps:["media.receivingVideo"],fn:function(){return this.media.receivingVideo}},sendingAudio:{deps:["media.sendingAudio"],fn:function(){return this.media.sendingAudio}},sendingVideo:{deps:["media.sendingVideo"],fn:function(){return this.media.sendingVideo}},isCall:{deps:["locus"],fn:function(){return(0,TN.isCall)(this.locus)}},supportsDtmf:{deps:["locus"],fn:function(){return(0,d.default)(this,"locus.self.enableDTMF")}}},acknowledge:function(){var e=this;return this.logger.info("call: acknowledging"),this.spark.internal.locus.alert(this.locus).then(function(t){return e.setLocus(t)}).then((0,Zx.tap)(function(){return e.logger.info("call: acknowledged")}))},answer:function(e){var t=this;return this.logger.info("call: answering"),this.locus?this.joinedOnThisDevice&&this.media.pc.remoteDescription&&this.media.pc.remoteDescription.sdp?(this.logger.info("call: already joined on this device"),f.default.resolve()):this.createOrJoinLocus(this.locus,e).then((0,Zx.tap)(function(){return t.logger.info("call: answered")})):(this.logger.info("call: no locus provided, answer() is a noop"),f.default.resolve())},changeReceivingMedia:function(e,t){var r=this;return new f.default(function(n){var i=(0,Uj.parse)(r.media.offerSdp),a=(0,h.default)(i.media,{type:e});a&&a.direction.includes("recv")?(r.logger.info('changeReceivingMedia: expecting to renegotiate, waiting for call to emit "change:receiving'+A[e]+'"'),r.once("change:receiving"+A[e],function(){return n()})):(r.logger.info('changeReceivingMedia: expecting to renegotiate, waiting for media to emit "answeraccepted"'),r.media.once("answeraccepted",function(){return n()}));var o=(0,y.default)(r.media["sending"+A[e]],t);console.warn("starting to setMedia "+e+" to "+o),r.media.setMedia(e,o)})},changeSendingMedia:function(e,t){var r=this;if(this.logger.info('changeSendingMedia: changing sending "'+e+'" to "'+t+'"'),["audio","video"].includes(e)){var n=this.media.senderTracks.filter(function(t){return t.kind===e}),i=(0,y.default)(t,this.media["receiving"+A[e]]);return n.length>0?this.media.setMedia(e,i).then(function(){return r.updateMuteToggles(e,t)}):new f.default(function(t){r.once("mediaNegotiationCompleted",function(){return t()}),r.media.setMedia(e,i)})}return f.default.reject(new Error('kind must be one of "audio" or "video"'))},cleanup:function(){var e=this;return new f.default(function(t){hc(function(){e.media.stop(),e.stopListening(e.spark.internal.mercury),e.off(),t()})})},createOrJoinLocus:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.localMediaStream)this.localMediaStream=r.localMediaStream;else{r.constraints||(r.constraints={audio:!0,video:{facingMode:{ideal:this.spark.phone.defaultFacingMode}}});var n=(0,d.default)(r,"constraints.video.facingMode.ideal",(0,d.default)(r,"constraints.video.facingMode.exact"));"user"!==n&&"environment"!==n||(this.facingMode=n);var i=!r.constraints.audio&&!r.constraints.video;r.offerOptions=(0,v.default)(r.offerOptions,{offerToReceiveAudio:i||!!r.constraints.audio,offerToReceiveVideo:i||!!r.constraints.video}),r.constraints.fake&&(this.media.constraints.fake=!0),this.media.setMedia("audio",(0,y.default)(r.constraints.audio,r.offerOptions.offerToReceiveAudio),r.constraints.audio),"screen"===(0,d.default)(r,"constraints.video.mediaSource")||"application"===(0,d.default)(r,"constraints.video.mediaSource")?this.media.setMedia("screen","sendonly"):this.media.setMedia("video",(0,y.default)(r.constraints.video,r.offerOptions.offerToReceiveVideo),r.constraints.video)}return e.correlationId||(r.correlationId=m.default.v4(),this.correlationId=r.correlationId),this.correlationId||(this.correlationId=e.correlationId),this.media.bandwidthLimit={audioBandwidthLimit:this.config.audioBandwidthLimit,videoBandwidthLimit:this.config.videoBandwidthLimit},this.media.createOffer().then((0,Zx.tap)(function(){return t.logger.info("created offer")})).then(function(){return t.spark.internal.locus.createOrJoin(e,(0,l.default)({localSdp:t.media.offerSdp,correlationId:t.correlationId},r))}).then((0,Zx.tap)(function(){return t.logger.info("sent offer to locus")})).then((0,Zx.tap)(function(){return t.logger.info("setting locus")})).then(function(e){return t.setLocus(e)}).then((0,Zx.tap)(function(){return t.logger.info("successfully set locus")})).then(function(){var e=JSON.parse(t.mediaConnection.remoteSdp).sdp;return t.logger.info("accepting answer"),t.logger.info("peer state",t.media.pc&&t.media.pc.signalingState),t.media.ended?(t.logger.info("call: already ended, not accepting answer"),f.default.resolve()):t.media.acceptAnswer(e).then(function(){return t.logger.info("answer accepted")}).catch(function(e){return t.logger.error("failed to accept answer",e),f.default.reject(e)})})},decline:function(){return this.reject()},dial:function(e,t){var r=this;this.locusJoinInFlight=!0,this.logger.info("call: dialing");var n=e;if(Zx.base64.validate(e)){var i=Zx.base64.decode(e).split("/"),a=i[3],o=i[4],s=this.spark.internal.feature.getFeature("developer","web-ha-messaging");if("PEOPLE"===a&&(n=o),"ROOM"===a){if(!(0,d.default)(this,"config.enableExperimentalGroupCallingSupport"))throw new Error("Group calling is not enabled. Please enable config.phone.enableExperimentalGroupCallingSupport");s&&s.value?this.spark.internal.device.getServiceUrl("conversation").then(function(e){return n={url:e+"/conversations/"+o+"/locus"}}):n={url:this.spark.internal.device.services.conversationServiceUrl+"/conversations/"+o+"/locus"}}}return this.spark.internal.mercury.connect().then(function(){return r.createOrJoinLocus(n,t)}).then((0,Zx.tap)(function(){return r.logger.info("call: dialed")})).catch(function(e){r.trigger("error",e)}).then(function(){r.locusJoinInFlight=!1}),this},getRawStatsStream:function(){return new _.default(this.media.pc)},getStatsStream:function(){return this.getRawStatsStream().pipe(new w.default)},hangup:function(){var e=this;return"in"!==this.direction||this.joinedOnThisDevice?(this.logger.info("call: hanging up"),this.media.stop(),this.locusJoinInFlight?(this.logger.info("call: locus join in flight, waiting for rest call to complete before hanging up"),this.when("change:locusJoinInFlight").then(function(){return e.hangup()})):this.locus?this.leave():this.cleanup().then(function(){return e.logger.info("call: hang up complete, call never created")})):this.reject()},initialize:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(0,u.default)(LP.SparkPlugin.prototype.initialize,this,r),this.on("change:activeParticipantsCount",function(){return e.onChangeActiveParticipantsCount.apply(e,arguments)}),this.on("change:isActive",function(){return e.onChangeIsActive.apply(e,arguments)}),this.on("change:localMediaStream",function(){return e.onChangeLocalMediaStream.apply(e,arguments)}),this.on("change:media.localMediaStream",function(){e.localMediaStream=e.media.localMediaStream}),this.on("change:remoteMember",function(){return e.onChangeRemoteMember.apply(e,arguments)}),["localMediaStream","remoteAudioMuted","remoteMediaStream","remoteVideoMuted","localScreenShare"].forEach(function(t){e.on("change:"+t,function(){return e.trigger(t+":change")})}),this.on("replaced",function(){return e.cleanup()}),this.listenTo(this.memberships,"add",function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.trigger.apply(e,["memberships:add"].concat(r))}),this.listenTo(this.memberships,"change",function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.trigger.apply(e,["membership:change"].concat(r))}),this.listenTo(this.memberships,"change:audioMuted",function(){return e.onMembershipsAudioMuted.apply(e,arguments)}),this.listenTo(this.memberships,"change:state",function(){return e.onMembershipsChangeState.apply(e,arguments)}),this.listenTo(this.memberships,"change:videoMuted",function(){return e.onMembershipsVideoMuted.apply(e,arguments)}),this.listenTo(this.memberships,"remove",function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.trigger.apply(e,["memberships:remove"].concat(r))}),this.listenTo(this.spark.internal.mercury,"event:locus",function(t){return e.onLocusEvent(t)}),this.listenTo(this.spark.internal.mercury,"event:locus.difference",function(t){return e.onLocusEvent(t)}),this.listenTo(this.media,"error",function(t){return e.trigger("error",t)}),this.listenTo(this.media,"internalTrackUpdate",function(){e.trigger("remoteMediaStream:change")}),this.listenTo(this.media,"negotiationneeded",function(){return e.onMediaNegotiationNeeded.apply(e,arguments)}),this.locus?this.internalCallId=(0,TN.makeInternalCallId)(this.locus):this.once("change:locus",function(){e.internalCallId=(0,TN.makeInternalCallId)(e.locus)}),this.memberships.listenToAndRun(this,"change:locus",function(){e.locus&&e.locus.participants&&(e.memberships.set((0,TN.participantsToCallMemberships)(e.spark,e.locus)),e.me=e.memberships.find(function(e){return e.isSelf}))}),this.config.enableExperimentalGroupCallingSupport?(this.on("inactive",function(){return e.hangup()}),this.on("inactive",function(){return e.cleanup()}),this.on("change:state",function(){hc(function(){return e.trigger(e.state)})}),this.on=(0,p.default)(this.on,function(t,r){for(var n=arguments.length,i=Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];if(C.includes(r))throw new Error('The "'+r+'" event is no longer valid with "enableExperimentalGroupCallingSupport===true"');return(0,u.default)(t,e,[r].concat(i))})):(this.on("disconnected",function(){return e.hangup()}),this.on("disconnected",function(){return e.cleanup()}),this.on("change:status",function(){hc(function(){return e.trigger(e.status)})}))},leave:function(){var e=this;this.logger.info("leave: attempting to leave locus");var t=(0,d.default)(this,this.config.enableExperimentalGroupCallingSupport?"me.state":"status");return"disconnected"===t?(this.logger.info("already hung up, not calling locus again"),f.default.resolve()):"declined"===t?(this.logger.info("call was declined, not leaving again"),f.default.resolve()):"connected"!==t?(this.logger.info("call is neither connected, disconnected, or declined, declining instead of leaving"),this.decline()):(this.logger.info("leave: leaving locus"),this.spark.internal.locus.leave(this.locus).catch(function(t){return e.logger.error("leave: locus leave error: ",t.stack||t.toString()),f.default.reject(t)}).then((0,Zx.tap)(function(){return e.logger.info("leave "+e.locus.id+": finished leaving via locus")})).then((0,Zx.tap)(function(){return e.logger.info("leave "+e.locus.id+": setting locus")})).then(function(t){return e.setLocus(t)}).then((0,Zx.tap)(function(){return e.logger.info("leave "+e.locus.id+": finished setting locus")})).then((0,Zx.tap)(function(){return e.logger.info("call: hung up")})))},onLocusEvent:function(e){var t=this,r=(0,d.default)(e,"data.locus.self.devices"),n=r&&(0,h.default)(r,function(e){return e.url===t.spark.internal.device.url});if(((this.locus&&(0,TN.makeInternalCallId)(e.data.locus))===this.internalCallId||n&&this.correlationId===n.correlationId)&&(this.logger.info("locus event: "+e.data.eventType),this.setLocus(e.data.locus)),e.data.locus.replaces){var i=!0,a=!1,o=void 0;try{for(var s,u=(0,c.default)(e.data.locus.replaces);!(i=(s=u.next()).done);i=!0){var l=s.value;if(l.locusUrl+"_"+l.lastActive===this.internalCallId)return this.setLocus(e.data.locus),void this.logger.info("locus replacement event: "+e.data.eventType,this.locusUrl,"->",e.data.locus.url)}}catch(e){a=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw o}}}},onMembershipsAudioMuted:function(){this.logger.info("onMembershipsAudioMuted"),this.remoteMember&&(this.remoteAudioMuted=this.remoteMember.audioMuted)},onMembershipsVideoMuted:function(){this.logger.info("onMembershipsVideoMuted"),this.remoteMember&&(this.remoteVideoMuted=this.remoteMember.videoMuted)},onChangeRemoteMember:function(){this.remoteMember?(this.remoteAudioMuted=this.remoteMember.audioMuted,this.remoteVideoMuted=this.remoteMember.videoMuted):(this.remoteAudioMuted=void 0,this.remoteVideoMuted=void 0)},onMembershipsChangeState:function(e){this.activeParticipantsCount=this.memberships.filter(function(e){return"connected"===e.state}).length,this.trigger("membership:"+e.state,e)},onMediaNegotiationNeeded:function(){var e=this;this.logger.info("onMediaNegotiationNeeded"),this.media.createOffer().then(function(){var t=(0,Uj.parse)(e.media.offerSdp),r=k("audio",t),n=!r.includes("send"),i=k("video",t),a=!i.includes("send"),o=k("screen",t);e.logger.info("onMediaNegotiationNeeded: audioOfferDir="+r+" videoOfferDir="+i+" screenOfferDir="+o),e.logger.info("onMediaNegotiationNeeded: audioMuted="+n+" videoMuted="+a);var s={sdp:e.media.offerSdp,mediaId:e.mediaId,audioMuted:n,videoMuted:a};return e.updateMedia(s)}).then(function(){return e.pollForExpectedLocusAndSdp()}).then(function(){var t=JSON.parse(e.mediaConnection.remoteSdp).sdp;return e.media.acceptAnswer(t)}).then(function(){return e.emit("mediaNegotiationCompleted")}).catch(function(t){return e.emit("error",t)})},onChangeLocalMediaStream:function(){var e=this;this.localMediaStream&&this.localMediaStream!==this.media.localMediaStream&&(["audio","video"].forEach(function(t){var r=e.localMediaStream.getTracks().find(function(e){return e.kind===t});r?e.media.setMedia(t,(0,y.default)(r.enabled,e["receiving"+A[t]]),r):e.media.setMedia(t,(0,y.default)(!1,e["receiving"+A[t]]))}),this.localMediaStream=this.media.localMediaStream)},onChangeIsActive:function(){this.isActive||this.joinedOnThisDevice&&(this.logger.info("call: hanging up due to locus going inactive"),this.hangup())},onChangeActiveParticipantsCount:function(){if(this.joinedOnThisDevice&&1===this.activeParticipantsCount&&(!this.isCall||this.config.hangupIfLastActive.call)&&(this.isCall||this.config.hangupIfLastActive.meeting)){var e=this.previousAttributes().locus;e&&(0,TN.activeParticipants)(e).length>1&&(this.logger.info("call: hanging up due to last participant in call"),this.hangup())}},pollForExpectedLocusAndSdp:function(){var e=this;return new f.default(function(t,r){var n=(0,Uj.parse)(e.media.offerSdp),i=k("audio",n),a=k("video",n),o=k("screen",n),s=e,c=0;!function n(){c+=1;try{if(e.logger.info("iteration "+c+": checking if current locus sdp has the expected audio and video directions"),u=JSON.parse(e.mediaConnection.remoteSdp).sdp,l=(0,Uj.parse)(u),f=k("audio",l),p=k("video",l),d=k("screen",l),h=T(i),v=T(a),m=T(o),s.logger.info("audio: "+i+", "+f+", "+h),s.logger.info("video: "+a+", "+p+", "+v),s.logger.info("screen: "+o+", "+d+", "+m),f===h&&p===v&&d===m){e.logger.info("iteration "+c+": the current locus sdp has the expected audio and video directions");try{return e.logger.info("iteration "+c+": checking if current locus has the expected audio and video directions"),e.validateLocusMediaState(e.locus),e.logger.info("iteration "+c+": the current locus has the expected audio and video directions; not syncing"),void t()}catch(t){e.logger.info("iteration "+c+": the current locus does not have the expected audio and video directions; syncing")}}else e.logger.info("iteration "+c+": the current locus sdp does not have the expected audio and video directions; syncing");if(c>4)return void r(new Error("After "+c+" attempts polling locus"));setTimeout(function(){return e.spark.internal.locus.sync(e.locus).then(function(t){return e.setLocus(t)}).then(n).catch(r)},1e3*Math.pow(2,c))}catch(e){r(e)}var u,l,f,p,d,h,v,m}()})},releaseFloor:function(){var e=this;return this.logger.info("call: releasing floor grant"),f.default.resolve().then((0,TN.waitForMediaShare)(this)).then(function(t){return e.spark.internal.locus.releaseFloorGrant(e.locus,t)})},reject:function(){var e=this;return"out"===this.direction?f.default.resolve():(this.logger.info("call: rejecting"),this.spark.internal.locus.decline(this.locus).then(function(t){return e.setLocus(t)}).then((0,Zx.tap)(function(){return e.cleanup()})).then((0,Zx.tap)(function(){return e.logger.info("call: rejected")})))},requestFloor:function(){var e=this;return this.logger.info("call: requesting floor grant"),f.default.resolve().then((0,TN.waitForMediaShare)(this)).then(function(t){return e.spark.internal.locus.requestFloorGrant(e.locus,t)})},setLocus:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.locus;if(!n)return this.locus=e,f.default.resolve();switch(this.spark.internal.locus.compare(n,e)){case kN.USE_INCOMING:this.locus=this.spark.internal.locus.merge(this.locus,e),this.device&&(this.correlationId=this.device.correlationId);break;case kN.FETCH:return r?(this.logger.info("call: fetching locus according to sequencing algorithm"),this.spark.internal.locus.get(n).then(function(e){return t.setLocus(e,!0)})):(this.logger.info("call: syncing locus according to sequencing algorithm"),this.spark.internal.locus.sync(n).then(function(e){return t.setLocus(e,!0)}))}return f.default.resolve()},sendDtmf:function(e){return this.supportsDtmf?this.spark.internal.locus.sendDtmf(this.locus,e):f.default.reject(new Error("this call does not support dtmf"))},sendFeedback:function(e){return this.spark.internal.metrics.submit("meetup_call_user_rating",e)},startApplicationShare:function(){var e=this;return this.logger.info("call: sharing application"),new f.default(function(t){e.media.once("answeraccepted",t),e.media.setMedia("screen","sendonly",{mediaSource:"application"})}).then(function(){return e.requestFloor()})},startScreenShare:function(){var e=this;return this.logger.info("call: sharing screen"),new f.default(function(t){e.media.once("answeraccepted",t),e.media.setMedia("screen","sendonly",{mediaSource:"screen"})}).then(function(){return e.requestFloor()})},startReceivingAudio:function(){return this.changeReceivingMedia("audio",!0)},startReceivingVideo:function(){return this.changeReceivingMedia("video",!0)},startSendingAudio:function(){return this.changeSendingMedia("audio",!0)},startSendingVideo:function(){return this.changeSendingMedia("video",!0)},stopScreenShare:function(){var e=this;return this.logger.info("call: stopping screen/application share"),this.releaseFloor().then(function(){return new f.default(function(t){e.media.once("answeraccepted",t),e.media.setMedia("screen","inactive")})})},stopReceivingAudio:function(){return this.changeReceivingMedia("audio",!1)},stopReceivingVideo:function(){return this.changeReceivingMedia("video",!1)},stopSendingAudio:function(){return this.changeSendingMedia("audio",!1)},stopSendingVideo:function(){return this.changeSendingMedia("video",!1)},toggleFacingMode:function(){var e=this;if(!this.sendingVideo)throw new Error("Cannot toggle facingMode if we're not sending video");if("user"!==this.facingMode&&"environment"!==this.facingMode)throw new Error("Cannot determine current facing mode; specify a new localMediaStream to change cameras");var t={facingMode:{ideal:"user"===this.facingMode?"environment":"user"}};return this.media.setMedia("video",(0,y.default)(this.sendingAudio,this.sendingVideo),t).then(function(){e.facingMode=t.facingMode.ideal})},toggleReceivingAudio:function(){return this.receivingAudio?this.stopReceivingAudio():this.startReceivingAudio()},toggleReceivingVideo:function(){return this.receivingVideo?this.stopReceivingVideo():this.startReceivingVideo()},toggleSendingAudio:function(){return this.sendingAudio?this.stopSendingAudio():this.startSendingAudio()},toggleSendingVideo:function(){return this.sendingVideo?this.stopSendingVideo():this.startSendingVideo()},updateMedia:function(e){var t=this;if(this.logger.info("updateMedia"),e.sdp&&!e.sdp.includes("b="))throw new Error("outbound sdp should always have a 'b=' line");return this.spark.internal.locus.updateMedia(this.locus,e).then(function(e){return t.setLocus(e)})},updateVideoMuteSdp:function(e,t){var r=x(!t,this.receivingVideo),n=x(t,this.receivingVideo);return e.replace(new RegExp("a=mid:video[^a]+a="+n,"gi"),"a=mid:video\na="+r)},updateMuteToggles:function(e,t){this.logger.info("updating mute toggles: "+e+"="+t);var r={mediaId:this.mediaId,audioMuted:!this.sendingAudio,videoMuted:!this.sendingVideo};return"audio"===e?r.audioMuted=!t:"video"===e&&(r.videoMuted=!t,r.sdp=this.updateVideoMuteSdp(this.media.offerSdp,!t)),this.updateMedia(r)},validateLocusMediaState:function(e){var t=e.self.status.audioStatus.toLowerCase(),r=this.media.audioDirection;if(t!==r)throw this.logger.warn("locus: expected audio "+t+" (locus) to equal "+r+" (local media)"),new Error("locus.self.status.audioStatus indicates the received DTO is out of date");var n=e.self.status.videoStatus.toLowerCase(),i=this.media.videoDirection;if(n!==i)throw this.logger.warn("locus: expected video "+n+" (locus) to equal "+i+" (local media)"),new Error("locus.self.status.videoStatus indicates the received DTO is out of date");return e},waitForExpectedLocus:function(){var e=this;return new f.default(function(t){var r=function r(){try{e.validateLocusMediaState(e.locus),e.off("change:locus",r),t()}catch(t){e.logger.warn("locus: current locus not in expected state; waiting for next locus")}};e.on("change:locus",r),r()})},version:"1.50.15"},"acknowledge",[Zx.oneFlight],(0,s.default)(o,"acknowledge"),o),S(o,"answer",[Zx.oneFlight,r],(0,s.default)(o,"answer"),o),S(o,"createOrJoinLocus",[Zx.oneFlight],(0,s.default)(o,"createOrJoinLocus"),o),S(o,"decline",[n],(0,s.default)(o,"decline"),o),S(o,"dial",[Zx.oneFlight],(0,s.default)(o,"dial"),o),S(o,"leave",[Zx.oneFlight,i],(0,s.default)(o,"leave"),o),S(o,"onMediaNegotiationNeeded",[a],(0,s.default)(o,"onMediaNegotiationNeeded"),o),S(o,"pollForExpectedLocusAndSdp",[Zx.retry],(0,s.default)(o,"pollForExpectedLocusAndSdp"),o),S(o,"reject",[Zx.oneFlight],(0,s.default)(o,"reject"),o),S(o,"updateMuteToggles",[Zx.oneFlight],(0,s.default)(o,"updateMuteToggles"),o),o));I.make=function(e,t){return new I(e,t)},t.default=I});r(_D);var ED=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(ET),n=o(If),i=o($I),a=o(_D);function o(e){return e&&e.__esModule?e:{default:e}}var s=i.default.extend({model:a.default,mainIndex:"internalCallId",indexes:["correlationId"],initialize:function(){for(var e=this,t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];(0,n.default)(i.default.prototype.initialize,this,r),this.on("add",function(t){e.listenTo(t,"change:state",function(){t.config.enableExperimentalGroupCallingSupport?"inactive"===t.state&&e.remove(t):"disconnected"===t.status&&e.remove(t)})})},has:function(e){if(this.get(e.url+"_"+e.fullState.lastActive))return!0;if(e.replaces){var t=!0,n=!1,i=void 0;try{for(var a,o=(0,r.default)(e.replaces);!(t=(a=o.next()).done);t=!0){var s=a.value;if(this.get(s.locusUrl+"_"+s.lastActive))return!0}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}return!1}});t.default=s});r(ED);var SD=n(function(t){!function(){var r,n="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";if(w="object"==typeof Tc&&"object"==typeof Tc.versions&&Tc.versions.node&&!1){var i=Tc.versions.node.toString().replace("v","");n="Nodejs/"+i+" (NodeOS) AppleWebKit/"+i+" (KHTML, like Gecko) Nodejs/"+i+" Nodejs/"+i}r=void 0!==e?e:window,"undefined"==typeof window&&("undefined"==typeof window&&void 0!==e&&(e.navigator={userAgent:n,getUserMedia:function(){}},r.window=e),"undefined"==typeof location&&(r.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(r.screen={width:0,height:0}));var a=window.navigator;void 0!==a?(void 0!==a.webkitGetUserMedia&&(a.getUserMedia=a.webkitGetUserMedia),void 0!==a.mozGetUserMedia&&(a.getUserMedia=a.mozGetUserMedia)):a={getUserMedia:function(){},userAgent:n};var o=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(a.userAgent||""),s=!(-1===a.userAgent.indexOf("Edge")||!a.msSaveOrOpenBlob&&!a.msSaveBlob),c=!!window.opera||a.userAgent.indexOf(" OPR/")>=0,u=void 0!==window.InstallTrigger,l=/^((?!chrome|android).)*safari/i.test(a.userAgent),f=!!window.chrome&&!c,p="undefined"!=typeof document&&!!document.documentMode&&!s;function d(e,t){var r=0,n=!1,i=window.setInterval(function(){e()&&(window.clearInterval(i),t(n)),r++>50&&(window.clearInterval(i),t(n=!0))},10)}var h={Android:function(){return a.userAgent.match(/Android/i)},BlackBerry:function(){return a.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return a.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return a.userAgent.match(/Opera Mini/i)},Windows:function(){return a.userAgent.match(/IEMobile/i)},any:function(){return h.Android()||h.BlackBerry()||h.iOS()||h.Opera()||h.Windows()},getOsName:function(){var e="Unknown OS";return h.Android()&&(e="Android"),h.BlackBerry()&&(e="BlackBerry"),h.iOS()&&(e="iOS"),h.Opera()&&(e="Opera Mini"),h.Windows()&&(e="Windows"),e}};var v="Unknown OS",m="Unknown OS Version";var g,y,b=function(){for(var e,t=a.appVersion,r=a.userAgent,n="-",i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],o=0;e=i[o];o++)if(e.r.test(r)){n=e.s;break}var s="-";switch(/Windows/.test(n)&&(/Windows (.*)/.test(n)&&(s=/Windows (.*)/.exec(n)[1]),n="Windows"),n){case"Mac OS X":/Mac OS X (10[\.\_\d]+)/.test(r)&&(s=/Mac OS X (10[\.\_\d]+)/.exec(r)[1]);break;case"Android":/Android ([\.\_\d]+)/.test(r)&&(s=/Android ([\.\_\d]+)/.exec(r)[1]);break;case"iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(r)&&(s=(s=/OS (\d+)_(\d+)_?(\d+)?/.exec(t))[1]+"."+s[2]+"."+(0|s[3]))}return{osName:n,osVersion:s}}();b&&b.osName&&"-"!=b.osName?(v=b.osName,m=b.osVersion):h.any()&&"Android"==(v=h.getOsName())&&(m=!!(y=(g=(g||a.userAgent).toLowerCase()).match(/android\s([0-9\.]*)/))&&y[1]);var w="object"==typeof Tc&&"object"==typeof Tc.versions&&Tc.versions.node;"Unknown OS"===v&&w&&(v="Nodejs",m=Tc.versions.node.toString().replace("v",""));var _=!1,E=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(e){"undefined"!=typeof document&&"function"==typeof document.createElement&&(!_&&e in document.createElement("canvas")&&(_=!0),!E&&e in document.createElement("video")&&(E=!0))});var S=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,x=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,C=/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/;var k=[],T=[],A=[],I=[];a.mediaDevices&&a.mediaDevices.enumerateDevices&&(a.enumerateDevices=function(e){var t=a.mediaDevices.enumerateDevices();t&&t.then?a.mediaDevices.enumerateDevices().then(e).catch(function(){e([])}):e([])});var P=!1;"undefined"!=typeof MediaStreamTrack&&"getSources"in MediaStreamTrack?P=!0:a.mediaDevices&&a.mediaDevices.enumerateDevices&&(P=!0);var O=!1,R=!1,j=!1,M=!1,N=!1;var B=window.DetectRTC||{};B.browser=function(){a.appVersion;var e,t,r,n=a.userAgent,i=a.appName,o=""+parseFloat(a.appVersion),d=parseInt(a.appVersion,10);if(l&&!f&&-1!==n.indexOf("CriOS")&&(l=!1,f=!0),c){i="Opera";try{d=(o=a.userAgent.split("OPR/")[1].split(" ")[0]).split(".")[0]}catch(e){o="0.0.0.0",d=0}}else p?((t=n.indexOf("rv:"))>0?o=n.substring(t+3):(t=n.indexOf("MSIE"),o=n.substring(t+5)),i="IE"):f?(t=n.indexOf("Chrome"),i="Chrome",o=n.substring(t+7)):l?(t=n.indexOf("Safari"),i="Safari",o=n.substring(t+7),-1!==(t=n.indexOf("Version"))&&(o=n.substring(t+8)),-1!==a.userAgent.indexOf("Version/")&&(o=a.userAgent.split("Version/")[1].split(" ")[0])):u?(t=n.indexOf("Firefox"),i="Firefox",o=n.substring(t+8)):(e=n.lastIndexOf(" ")+1)<(t=n.lastIndexOf("/"))&&(i=n.substring(e,t),o=n.substring(t+1),i.toLowerCase()===i.toUpperCase()&&(i=a.appName));return s&&(i="Edge",o=a.userAgent.split("Edge/")[1]),-1!==(r=o.search(/[; \)]/))&&(o=o.substring(0,r)),d=parseInt(""+o,10),isNaN(d)&&(o=""+parseFloat(a.appVersion),d=parseInt(a.appVersion,10)),{fullVersion:o,version:d,name:i,isPrivateBrowsing:!1}}(),function(e){var t;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){t=!1},function(e){t=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var r;try{(r=window.indexedDB.open("test")).onerror=function(){return!0}}catch(e){t=!0}void 0===t&&d(function(){return"done"===r.readyState},function(e){e||(t=!r.result)})}else if(function(e){var t=e.toLowerCase();if(0===t.indexOf("msie")&&0===t.indexOf("trident"))return!1;var r=/(?:msie|rv:)\s?([\d\.]+)/.exec(t);return!!(r&&parseInt(r[1],10)>=10)}(window.navigator.userAgent)){t=!1;try{window.indexedDB||(t=!0)}catch(e){t=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(e){t=!0}void 0===t&&(t=!1,window.localStorage.removeItem("test"))}}catch(e){t=!1}d(function(){return void 0!==t},function(r){e(t)})}(function(e){B.browser.isPrivateBrowsing=!!e}),B.browser["is"+B.browser.name]=!0,B.osName=v,B.osVersion=m;"object"==typeof Tc&&"object"==typeof Tc.versions&&Tc.versions["node-webkit"];var D=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(e){D||e in window&&(D=!0)}),B.isWebRTCSupported=D,B.isORTCSupported="undefined"!=typeof RTCIceGatherer;var F=!1;(B.browser.isChrome&&B.browser.version>=35?F=!0:B.browser.isFirefox&&B.browser.version>=34?F=!0:B.browser.isEdge&&B.browser.version>=17?F=!0:"Android"===B.osName&&B.browser.isChrome&&(F=!0),/^(https:|chrome-extension:)$/g.test(location.protocol||""))||("undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(B.browser.isChrome||B.browser.isEdge||B.browser.isOpera)?F=!1:B.browser.isFirefox&&(F=!1));B.isScreenCapturingSupported=F;var L={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(e){L.isSupported||e in window&&(L.isSupported=!0,window[e]&&"createMediaStreamSource"in window[e].prototype&&(L.isCreateMediaStreamSourceSupported=!0))}),B.isAudioContextSupported=L.isSupported,B.isCreateMediaStreamSourceSupported=L.isCreateMediaStreamSourceSupported;var U=!1;B.browser.isChrome&&B.browser.version>31&&(U=!0),B.isRtpDataChannelsSupported=U;var z=!1;B.browser.isFirefox&&B.browser.version>28?z=!0:B.browser.isChrome&&B.browser.version>25?z=!0:B.browser.isOpera&&B.browser.version>=11&&(z=!0),B.isSctpDataChannelsSupported=z,B.isMobileDevice=o;var V=!1;a.getUserMedia?V=!0:a.mediaDevices&&a.mediaDevices.getUserMedia&&(V=!0),B.browser.isChrome&&B.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(V="Requires HTTPs"),"Nodejs"===B.osName&&(V=!1),B.isGetUserMediaSupported=V;var q,K,G,H="";screen.width&&(H+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));B.displayResolution=H,B.displayAspectRatio=(q=screen.width,K=screen.height,G=function e(t,r){return 0==r?t:e(r,t%r)}(q,K),q/G/(K/G)).toFixed(2),B.isCanvasSupportsStreamCapturing=_,B.isVideoSupportsStreamCapturing=E,"Chrome"==B.browser.name&&B.browser.version>=53&&(B.isCanvasSupportsStreamCapturing||(B.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),B.isVideoSupportsStreamCapturing||(B.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),B.DetectLocalIPAddress=function(e,t){if(B.isWebRTCSupported){var r=!0,n=!0;!function(e,t){if("undefined"!=typeof document&&"function"==typeof document.getElementById){var r={},n=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!n){var i=document.getElementById("iframe");if(!i)return;var a=i.contentWindow;n=a.RTCPeerConnection||a.mozRTCPeerConnection||a.webkitRTCPeerConnection}if(n){var o=null;"Chrome"===B.browser&&B.browser.version<58&&(o={optional:[{RtpDataChannels:!0}]});var s=new n({iceServers:[{urls:"stun:stun.l.google.com:19302"}]},o);if(t&&(s.addStream?s.addStream(t):s.addTrack&&t.getTracks()[0]&&s.addTrack(t.getTracks()[0],t)),s.onicecandidate=function(e){e.candidate&&e.candidate.candidate?c(e.candidate.candidate):c()},!t)try{s.createDataChannel("sctp",{})}catch(e){}B.isPromisesSupported?s.createOffer().then(function(e){s.setLocalDescription(e).then(u)}):s.createOffer(function(e){s.setLocalDescription(e,u,function(){})},function(){})}}function c(t){if(t){var n=x.exec(t);if(n){var i=n[1],a=t.match(S);void 0===r[i]&&e(i,a,!0),r[i]=!0}}else e()}function u(){var e=s.localDescription.sdp.split("\n");e.forEach(function(e){e&&0===e.indexOf("a=candidate:")&&c(e)})}}(function(t){t?t.match(S)?e("Local: "+t,r=!1,n):t.match(C)?e("Public: "+t,r,n=!1):e("Public: "+t,r,n):e()},t)}},B.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,B.isWebSocketsBlocked=!B.isWebSocketsSupported,"Nodejs"===B.osName&&(B.isWebSocketsSupported=!0,B.isWebSocketsBlocked=!1),B.checkWebSocketsSupport=function(e){e=e||function(){};try{var t,r=new WebSocket("wss://echo.websocket.org:443/");r.onopen=function(){B.isWebSocketsBlocked=!1,t=(new Date).getTime(),r.send("ping")},r.onmessage=function(){B.WebsocketLatency=(new Date).getTime()-t+"ms",e(),r.close(),r=null},r.onerror=function(){B.isWebSocketsBlocked=!0,e()}}catch(t){B.isWebSocketsBlocked=!0,e()}},B.load=function(e){!function(e){if(P)if(!a.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(a.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!a.enumerateDevices&&a.enumerateDevices&&(a.enumerateDevices=a.enumerateDevices.bind(a)),a.enumerateDevices){k=[],T=[],A=[],I=[],O=!1,R=!1,j=!1,M=!1,N=!1;var t={};a.enumerateDevices(function(r){r.forEach(function(e){var r={};for(var n in e)try{"function"!=typeof e[n]&&(r[n]=e[n])}catch(e){}t[r.deviceId+r.label+r.kind]||("audio"===r.kind&&(r.kind="audioinput"),"video"===r.kind&&(r.kind="videoinput"),r.deviceId||(r.deviceId=r.id),r.id||(r.id=r.deviceId),r.label?("videoinput"!==r.kind||N||(N=!0),"audioinput"!==r.kind||M||(M=!0)):(r.isCustomLabel=!0,"videoinput"===r.kind?r.label="Camera "+(I.length+1):"audioinput"===r.kind?r.label="Microphone "+(T.length+1):"audiooutput"===r.kind?r.label="Speaker "+(A.length+1):r.label="Please invoke getUserMedia once.",void 0!==B&&B.browser.isChrome&&B.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(r.label="HTTPs is required to get label of this "+r.kind+" device.")),"audioinput"===r.kind&&(O=!0,-1===T.indexOf(r)&&T.push(r)),"audiooutput"===r.kind&&(R=!0,-1===A.indexOf(r)&&A.push(r)),"videoinput"===r.kind&&(j=!0,-1===I.indexOf(r)&&I.push(r)),k.push(r),t[r.deviceId+r.label+r.kind]=r)}),void 0!==B&&(B.MediaDevices=k,B.hasMicrophone=O,B.hasSpeakers=R,B.hasWebcam=j,B.isWebsiteHasWebcamPermissions=N,B.isWebsiteHasMicrophonePermissions=M,B.audioInputDevices=T,B.audioOutputDevices=A,B.videoInputDevices=I),e&&e()})}else e&&e();else e&&e()}(e=e||function(){})},B.MediaDevices=void 0!==k?k:[],B.hasMicrophone=O,B.hasSpeakers=R,B.hasWebcam=j,B.isWebsiteHasWebcamPermissions=N,B.isWebsiteHasMicrophonePermissions=M,B.audioInputDevices=T,B.audioOutputDevices=A,B.videoInputDevices=I;var W=!1;"undefined"!=typeof document&&"function"==typeof document.createElement&&"setSinkId"in document.createElement("video")&&(W=!0),B.isSetSinkIdSupported=W;var $=!1;B.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&($=!0):B.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&($=!0),B.isRTPSenderReplaceTracksSupported=$;var Y=!1;B.browser.isFirefox&&B.browser.version>38&&(Y=!0),B.isRemoteStreamProcessingSupported=Y;var J=!1;"undefined"!=typeof MediaStreamTrack&&"applyConstraints"in MediaStreamTrack.prototype&&(J=!0),B.isApplyConstraintsSupported=J;var Q=!1;B.browser.isFirefox&&B.browser.version>=43&&(Q=!0),B.isMultiMonitorScreenCapturingSupported=Q,B.isPromisesSupported=!!("Promise"in window),B.version="1.3.9",void 0===B&&(window.DetectRTC={});var Z=window.MediaStream;void 0===Z&&"undefined"!=typeof webkitMediaStream&&(Z=webkitMediaStream),B.MediaStream=void 0!==Z&&"function"==typeof Z&&Object.keys(Z.prototype),"undefined"!=typeof MediaStreamTrack?B.MediaStreamTrack=Object.keys(MediaStreamTrack.prototype):B.MediaStreamTrack=!1;var X=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;B.RTCPeerConnection=void 0!==X&&Object.keys(X.prototype),window.DetectRTC=B,t.exports=B}()}),xD=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.events=void 0;var r=l(If),n=l(ST),i=l(wf),a=l(aP),o=l(pE),s=l(fM),c=l(_D),u=l(ED);function l(e){return e&&e.__esModule?e:{default:e}}var f=t.events={CALL_CREATED:"call:created",CALL_INCOMING:"call:incoming"},p=LP.SparkPlugin.extend({collections:{emittedCalls:u.default},session:{connected:{default:!1,type:"boolean"},defaultFacingMode:{default:"user",type:"string",values:["user","environment"]},registered:{default:!1,type:"boolean"}},namespace:"phone",isCallingSupported:function(){return new i.default(function(e){e(SD.isWebRTCSupported)})},register:function(){var e=this;return this.spark.internal.device.refresh().then(function(){return e.connected?i.default.resolve():i.default.all([e.emittedCalls.reset(),e.spark.internal.mercury.when("event:mercury.buffer_state").then(function(t){return"UNKNOWN"===(0,n.default)(t,1)[0].data.bufferState.locus?e.listActiveCalls():i.default.resolve()}),e.spark.internal.mercury.connect()])})},deregister:function(){var e=this;return this.spark.internal.mercury.disconnect().then(function(){return e.spark.internal.device.unregister()})},createLocalMediaStream:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.constraints||e;return(0,o.default)(t,{audio:!0,video:!0}),s.default.getUserMedia(t)},listActiveCalls:function(){var e=this;return this.spark.internal.locus.list().then(function(t){var r=e.emittedCalls.map(function(e){return e});return t?(t.forEach(function(t){if(!e.emittedCalls.has(t)){var n=c.default.make({locus:t,parent:e.spark});r.push(n),e.emittedCalls.add(n),e._triggerCallEvents(n,t)}}),r):r})},initialize:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];(0,r.default)(LP.SparkPlugin.prototype.initialize,this,n),this.listenTo(this.spark.internal.mercury,"event:locus",function(t){return e.onLocusEvent(t)}),this.listenTo(this.spark.internal.mercury,"change:connected",function(){e.connected=e.spark.internal.mercury.connected,e.registered=!!e.spark.internal.device.url&&e.connected}),this.listenTo(this.spark.internal.device,"change:url",function(){e.registered=!!e.spark.internal.device.url&&e.connected})},onLocusEvent:function(e){var t=e.data.locus;if(!this.emittedCalls.has(t)&&"inactive"!==t.fullState.state.toLowerCase()){var r=c.default.make({locus:t},{parent:this.spark});this.emittedCalls.add(r),this._triggerCallEvents(r,e.data.locus)}},dial:function(e,t){var r=c.default.make({},{parent:this.spark});return r.dial(e,t),this.emittedCalls.add(r),r},_triggerCallEvents:function(e,t){this.trigger(f.CALL_CREATED,e),(0,TN.shouldRing)(t)&&((0,TN.isCall)(t)||!(0,TN.isCall)(t)&&(0,a.default)(this,"config.enableExperimentalGroupCallingSupport"))&&this.trigger(f.CALL_INCOMING,e)},version:"1.50.15"});t.default=p});r(xD);xD.events;var CD=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=wf)&&r.__esModule?r:{default:r};var i=LP.Batcher.extend({namespace:"People",handleHttpSuccess:function(e){var t=this;return n.default.all(e.body.items.map(function(e){return t.handleItemSuccess(e.id,e)}))},handleItemFailure:function(e,t){return this.getDeferredForResponse(e).then(function(e){e.reject(t)})},handleItemSuccess:function(e,t){return this.getDeferredForResponse(e).then(function(e){e.resolve(t)})},fingerprintRequest:function(e){var t=this.spark.people.inferPersonIdFromUuid(e);return n.default.resolve(t)},fingerprintResponse:function(e){return n.default.resolve(e)},prepareRequest:function(e){return n.default.resolve(e.join())},submitHttpRequest:function(e){return this.spark.request({service:"hydra",resource:"people/?id="+e+"&showAllTypes="+this.config.showAllTypes})}});t.default=i});r(CD);var kD=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=o(su),i=o(wf),a=o(CD);function o(e){return e&&e.__esModule?e:{default:e}}var s,c,u,l,f,p,d=LP.SparkPlugin.extend((r={namespace:"People",children:{batcher:a.default},get:function(e){if(!e)return i.default.reject(new Error("A person with an id is required"));if("me"===e)return this._getMe();var t=e.personId||e.id||e;return this.batcher.request(t)},list:function(e){var t=this;if(Array.isArray(e)){var r=e;return i.default.all(r.map(function(e){return t.batcher.request(e)}))}return this.request({service:"hydra",resource:"people",qs:e}).then(function(e){return new LP.Page(e,t.spark)})},inferPersonIdFromUuid:function(e){try{if(Zx.base64.decode(e).includes("ciscospark://"))return e}catch(e){}return Zx.base64.encode("ciscospark://us/PEOPLE/"+e)},_getMe:function(){return this.spark.request({service:"hydra",resource:"people/me"}).then(function(e){return e.body})},version:"1.50.15"},s=r,c="_getMe",u=[Zx.oneFlight],l=(0,n.default)(r,"_getMe"),f=r,p={},Object.keys(l).forEach(function(e){p[e]=l[e]}),p.enumerable=!!p.enumerable,p.configurable=!!p.configurable,("value"in p||p.initializer)&&(p.writable=!0),p=u.slice().reverse().reduce(function(e,t){return t(s,c,e)||e},p),f&&void 0!==p.initializer&&(p.value=p.initializer?p.initializer.call(f):void 0,p.initializer=void 0),void 0===p.initializer&&(Object.defineProperty(s,c,p),p=null),r));t.default=d});r(kD);var TD=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={people:{batcherWait:100,batcherMaxCalls:10,batcherMaxWait:1500,showAllTypes:!1}}});r(TD),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(kD).default}});var r=i(kD),n=i(TD);function i(e){return e&&e.__esModule?e:{default:e}}(0,LP.registerPlugin)("people",r.default,{config:n.default})}));var AD=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={phone:{audioBandwidthLimit:64e3,videoBandwidthLimit:1e6,enableExperimentalGroupCallingSupport:!1,hangupIfLastActive:{call:!0,meeting:!1}}}});r(AD);var ID=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StatsStream=t.StatsFilter=t.remoteParticipant=t.boolToStatus=t.Call=t.phoneEvents=void 0,Object.defineProperty(t,"phoneEvents",{enumerable:!0,get:function(){return xD.events}}),Object.defineProperty(t,"Call",{enumerable:!0,get:function(){return i(_D).default}}),Object.defineProperty(t,"boolToStatus",{enumerable:!0,get:function(){return i(AN).default}}),Object.defineProperty(t,"remoteParticipant",{enumerable:!0,get:function(){return TN.remoteParticipant}}),Object.defineProperty(t,"StatsFilter",{enumerable:!0,get:function(){return i(bD).default}}),Object.defineProperty(t,"StatsStream",{enumerable:!0,get:function(){return i(wD).default}});var r=i(xD),n=i(AD);function i(e){return e&&e.__esModule?e:{default:e}}t.default=r.default,(0,LP.registerPlugin)("phone",r.default,{config:n.default})});r(ID);ID.StatsStream,ID.StatsFilter,ID.remoteParticipant,ID.boolToStatus,ID.Call,ID.phoneEvents;var PD=function(e){return e&&e.length?_k(e):[]},OD=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(wf),n=i(IT);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.file,i=e.type,a=e.thumbnailMaxWidth,o=e.thumbnailMaxHeight,s=e.enableThumbnails,c=e.logger,u=e.isAvatar;if(!i||!i.startsWith("image"))return r.default.resolve();return t=t instanceof Blob?t:new Blob([t]),new r.default(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src=URL.createObjectURL(t)}).then(function(e){var r=(0,n.default)(e,"height","width");if(u){c.info("dimensions will be set for avatar image");var i=r.height>r.width?r.height:r.width;r.height=i,r.width=i}if(!s)return c.info("thumbnails not enabled"),[null,r,null];var l,f,p,d,h,v=(f=a,p=o,d=(l=r).width,(h=l.height)>d?(h>p&&(d=d*p/h,h=p),d>f&&(h=h*f/d,d=f)):(d>f&&(h=h*f/d,d=f),h>p&&(d=d*p/h,h=p)),{height:h,width:d}),m=document.createElement("canvas");m.width=v.width,m.height=v.height;var g=m.getContext("2d");(0,wF.orient)({orientation:t&&t.image?t.image.orientation:"",img:e,x:0,y:0,width:v.width,height:v.height,ctx:g},t);for(var y=m.toDataURL("image/png").split(","),b=atob(y[1]),w=new ArrayBuffer(b.length),_=new DataView(w),E=0;E<b.length;E+=1)_.setUint8(E,b.charCodeAt(E));return[w,r,v]})}});r(OD);var RD,jD=(RD=Object.freeze({default:{"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/cbor":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["ecma","es"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0},"application/fhir+json":{source:"iana",compressible:!0},"application/fhir+xml":{source:"iana",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mmt-usd+xml":{source:"iana",compressible:!0},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",compressible:!0},"application/msc-mixer+xml":{source:"iana",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana"},"application/news-groupinfo":{source:"iana"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana"},"application/nss":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p2p-overlay+xml":{source:"iana",compressible:!0},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana"},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",compressible:!0},"application/pidf-diff+xml":{source:"iana",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0},"application/route-s-tsid+xml":{source:"iana",compressible:!0},"application/route-usd+xml":{source:"iana",compressible:!0},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana"},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana"},"application/ttml+xml":{source:"iana",compressible:!0},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0},"application/urc-targetdesc+xml":{source:"iana",compressible:!0},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["keynote"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana"},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana"},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",compressible:!0},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"apache",extensions:["der","crt","pem"]},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0},"application/xcap-caps+xml":{source:"iana",compressible:!0},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana"},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana"},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tone":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana"},"image/avcs":{source:"iana"},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/stl":{source:"iana"},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana"},"model/vnd.parasolid.transmit.binary":{source:"iana"},"model/vnd.parasolid.transmit.text":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.usdz+zip":{source:"iana",compressible:!1},"model/vnd.valve.source.compiled-map":{source:"iana"},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana"},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana"},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana",compressible:!1},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fwdred":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shex":{extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana"},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vp8":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}}))&&RD.default||RD;var MD=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,ND=function(e){return MD.exec(e).slice(1)};var BD=function(e){return ND(e)[3]};"ab".substr(-1);var DD=n(function(e,t){var r,n,i,a=BD,o=/^\s*([^;\s]*)(?:;|\s|$)/,s=/^text\//i;function c(e){if(!e||"string"!=typeof e)return!1;var t=o.exec(e),r=t&&jD[t[1].toLowerCase()];return r&&r.charset?r.charset:!(!t||!s.test(t[1]))&&"UTF-8"}t.charset=c,t.charsets={lookup:c},t.contentType=function(e){if(!e||"string"!=typeof e)return!1;var r=-1===e.indexOf("/")?t.lookup(e):e;if(!r)return!1;if(-1===r.indexOf("charset")){var n=t.charset(r);n&&(r+="; charset="+n.toLowerCase())}return r},t.extension=function(e){if(!e||"string"!=typeof e)return!1;var r=o.exec(e),n=r&&t.extensions[r[1].toLowerCase()];if(!n||!n.length)return!1;return n[0]},t.extensions=Object.create(null),t.lookup=function(e){if(!e||"string"!=typeof e)return!1;var r=a("x."+e).toLowerCase().substr(1);if(!r)return!1;return t.types[r]||!1},t.types=Object.create(null),r=t.extensions,n=t.types,i=["nginx","apache",void 0,"iana"],Object.keys(jD).forEach(function(e){var t=jD[e],a=t.extensions;if(a&&a.length){r[e]=a;for(var o=0;o<a.length;o++){var s=a[o];if(n[s]){var c=i.indexOf(jD[n[s]].source),u=i.indexOf(t.source);if("application/octet-stream"!==n[s]&&(c>u||c===u&&"application/"===n[s].substr(0,12)))continue}n[s]=e}}})}),FD=(DD.charset,DD.charsets,DD.contentType,DD.extension,DD.extensions,DD.lookup,DD.types,n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(wf);t.default=function(e,t){if(e.type)return t.info("file already has type "+e.type+". using existing file.type."),r.default.resolve(e.type);if(e.mimeType)return t.info("file already has mimeType "+e.type+". using existing file.mimeType."),r.default.resolve(e.mimeType);return(0,UI.detect)(e).then(function(r){return"application/x-msi"===r||"application/octet-stream"===r?(t.info("detected filetype to be "+r+". Falling back to mime.lookup"),n.default.lookup(e.name)):(t.info("detected filetype to be "+r+". returning it"),r)})};var n=i(DD);function i(e){return e&&e.__esModule?e:{default:e}}}));function LD(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}r(FD);var UD,zD=Object.prototype.hasOwnProperty,VD=Object.keys||function(e){var t=[];for(var r in e)zD.call(e,r)&&t.push(r);return t},qD=Array.prototype.slice;function KD(){return void 0!==UD?UD:UD="foo"===function(){}.name}function GD(e){return Object.prototype.toString.call(e)}function HD(e){return!Ug(e)&&("function"==typeof rc.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function WD(e,t){e||XD(e,!0,t,"==",eF)}var $D=/\s*function\s+([^\(\s]*)\s*/;function YD(e){if(py(e)){if(KD())return e.name;var t=e.toString().match($D);return t&&t[1]}}function JD(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=QD(ZD((t=this).actual),128)+" "+t.operator+" "+QD(ZD(t.expected),128),this.generatedMessage=!0);var r=e.stackStartFunction||XD;if(Error.captureStackTrace)Error.captureStackTrace(this,r);else{var n=new Error;if(n.stack){var i=n.stack,a=YD(r),o=i.indexOf("\n"+a);if(o>=0){var s=i.indexOf("\n",o+1);i=i.substring(s+1)}this.stack=i}}}function QD(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function ZD(e){if(KD()||!py(e))return Yg(e);var t=YD(e);return"[Function"+(t?": "+t:"")+"]"}function XD(e,t,r,n,i){throw new JD({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function eF(e,t){e||XD(e,!0,t,"==",eF)}function tF(e,t,r,n){if(e===t)return!0;if(Ug(e)&&Ug(t))return 0===LD(e,t);if(ly(e)&&ly(t))return e.getTime()===t.getTime();if(cy(e)&&cy(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(HD(e)&&HD(t)&&GD(e)===GD(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===LD(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(Ug(e)!==Ug(t))return!1;var i=(n=n||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===n.expected.indexOf(t)||(n.actual.push(e),n.expected.push(t),function(e,t,r,n){if(null==e||null==t)return!1;if(dy(e)||dy(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=rF(e),a=rF(t);if(i&&!a||!i&&a)return!1;if(i)return e=qD.call(e),t=qD.call(t),tF(e,t,r);var o,s,c=VD(e),u=VD(t);if(c.length!==u.length)return!1;for(c.sort(),u.sort(),s=c.length-1;s>=0;s--)if(c[s]!==u[s])return!1;for(s=c.length-1;s>=0;s--)if(o=c[s],!tF(e[o],t[o],r,n))return!1;return!0}(e,t,r,n))}return r?e===t:e==t}function rF(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function nF(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function iF(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&XD(i,r,"Missing expected exception"+n);var a="string"==typeof n,o=!e&&i&&!r;if((!e&&fy(i)&&a&&nF(i,r)||o)&&XD(i,r,"Got unwanted exception"+n),e&&i&&r&&!nF(i,r)||!e&&i)throw i}WD.AssertionError=JD,Vg(JD,Error),WD.fail=XD,WD.ok=eF,WD.equal=function e(t,r,n){t!=r&&XD(t,r,n,"==",e)},WD.notEqual=function e(t,r,n){t==r&&XD(t,r,n,"!=",e)},WD.deepEqual=function e(t,r,n){tF(t,r,!1)||XD(t,r,n,"deepEqual",e)},WD.deepStrictEqual=function e(t,r,n){tF(t,r,!0)||XD(t,r,n,"deepStrictEqual",e)},WD.notDeepEqual=function e(t,r,n){tF(t,r,!1)&&XD(t,r,n,"notDeepEqual",e)},WD.notDeepStrictEqual=function e(t,r,n){tF(t,r,!0)&&XD(t,r,n,"notDeepStrictEqual",e)},WD.strictEqual=function e(t,r,n){t!==r&&XD(t,r,n,"===",e)},WD.notStrictEqual=function e(t,r,n){t===r&&XD(t,r,n,"!==",e)},WD.throws=function(e,t,r){iF(!0,e,t,r)},WD.doesNotThrow=function(e,t,r){iF(!1,e,t,r)},WD.ifError=function(e){if(e)throw e};var aF={};ig.prototype.getByte=function(e){return this[e]},ig.prototype.getSignedByte=function(e){return this[e]>127?this[e]-256:this[e]},ig.prototype.getShort=function(e,t){var r=t?(this[e]<<8)+this[e+1]:(this[e+1]<<8)+this[e];return r<0?r+65536:r},ig.prototype.getSignedShort=function(e,t){var r=t?(this[e]<<8)+this[e+1]:(this[e+1]<<8)+this[e];return r>32767?r-65536:r},ig.prototype.getLong=function(e,t){var r=t?(((this[e]<<8)+this[e+1]<<8)+this[e+2]<<8)+this[e+3]:(((this[e+3]<<8)+this[e+2]<<8)+this[e+1]<<8)+this[e];return r<0?r+4294967296:r},ig.prototype.getSignedLong=function(e,t){var r=t?(((this[e]<<8)+this[e+1]<<8)+this[e+2]<<8)+this[e+3]:(((this[e+3]<<8)+this[e+2]<<8)+this[e+1]<<8)+this[e];return r>2147483647?r-4294967296:r},ig.prototype.getString=function(e,t){for(var r=[],n=e;n<e+t;n++)r.push(String.fromCharCode(this[n]));return r.join("")};var oF=1e3,sF=60*oF,cF=60*sF,uF=24*cF,lF=365.25*uF,fF=function(e,t){t=t||{};var r,n=typeof e;if("string"===n&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*lF;case"days":case"day":case"d":return r*uF;case"hours":case"hour":case"hrs":case"hr":case"h":return r*cF;case"minutes":case"minute":case"mins":case"min":case"m":return r*sF;case"seconds":case"second":case"secs":case"sec":case"s":return r*oF;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===n&&!1===isNaN(e))return t.long?pF(r=e,uF,"day")||pF(r,cF,"hour")||pF(r,sF,"minute")||pF(r,oF,"second")||r+" ms":function(e){if(e>=uF)return Math.round(e/uF)+"d";if(e>=cF)return Math.round(e/cF)+"h";if(e>=sF)return Math.round(e/sF)+"m";if(e>=oF)return Math.round(e/oF)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function pF(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var dF=n(function(e,t){var r;function n(e){function n(){if(n.enabled){var e=n,i=+new Date,a=i-(r||i);e.diff=a,e.prev=r,e.curr=i,r=i;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;c++;var i=t.formatters[n];if("function"==typeof i){var a=o[c];r=i.call(e,a),o.splice(c,1),c--}return r}),t.formatArgs.call(e,o),(n.log||t.log||console.log.bind(console)).apply(e,o)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,i=0;i<n;i++)r[i]&&("-"===(e=r[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=fF,t.names=[],t.skips=[],t.formatters={}}),hF=(dF.coerce,dF.disable,dF.enable,dF.enabled,dF.humanize,dF.names,dF.skips,dF.formatters,n(function(e,t){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==Tc&&"env"in Tc&&(e=Tc.env.DEBUG),e}(t=e.exports=dF).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(a=i))}),e.splice(a,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())})),vF=(hF.log,hF.formatArgs,hF.save,hF.load,hF.useColors,hF.storage,hF.colors,hF("exif")),mF=128;function gF(e,t){if(!(this instanceof gF))return"string"==typeof e&&(e={image:e}),WD("object"==typeof e,"Invalid options object"),new gF(e,function(r,n){if(r)return t(r);t(null,n,e.image)});"string"==typeof e?e={image:e}:e instanceof ig&&(e={image:e});var r={};if(e)for(var n in e)r[n]=e[n];if(this.options=r,["ifd0MaxEntries","ifd1MaxEntries","maxGpsEntries","maxInteroperabilityEntries","agfaMaxEntries","epsonMaxEntries","fujifilmMaxEntries","olympusMaxEntries","panasonicMaxEntries","sanyoMaxEntries"].forEach(function(e){void 0===r[e]&&(r[e]=mF)}),this.exifData={image:{},thumbnail:{},exif:{},gps:{},interoperability:{},makernote:{}},this.offsets={},r.tiffOffsets&&(exifData.offsets=offsets),vF("New ExifImage options=",e),r.image){if("function"!=typeof t)throw new Error("You have to provide a callback function.");var i=this;setImmediate(function(){i.loadImage(r.image,function(e,n){if(e)return t(e);t(null,n,r.image)})})}}gF.ExifImage=gF;var yF=gF;gF.prototype.loadImage=function(e,t){WD("function"==typeof t,"Callback must be a function");var r=this;vF("loadImage image=",e),"Buffer"!==e.constructor.name?"String"!==e.constructor.name?t(new Error("Given image is neither a buffer nor a file, please provide one of these.")):aF.readFile(e,function(n,i){n?t(new Error("Encountered the following error while trying to read given image: "+n)):r.processImage("File: "+e,i,t)}):this.processImage("Buffer",e,t)},gF.prototype.processImage=function(e,t,r){WD("string"==typeof e,"Source must be a string"),WD("function"==typeof r,"Callback must be a function");var n=0;if(255!=t[n++]||216!=t[n++]){var i=new Error("The given image is not a JPEG and thus unsupported right now.");return i.source=e,i.code="NOT_A_JPEG",void r(i)}for(this.imageType="JPEG";n<t.length&&255==t[n++];){if(225==t[n++]){try{this.extractExifData(t,n+2,t.getShort(n,!0)-2)}catch(t){return t.code="PARSING_ERROR",t.source=e,vF("Extract exif data error source=",e,"offset=",n,"error=",t),void r(t)}return vF("Extract exif data success source=",e,"exifData=",this.exifData),void r(null,this.exifData)}n+=t.getShort(n,!0)}var a=new Error("No Exif segment found in the given image.");a.source=e,a.code="NO_EXIF_SEGMENT",r(a)},gF.prototype.extractExifData=function(e,r,n){var i,a,o=this.exifData,s=r+6,c=!1!==this.options.noPadding;if(this.offsets.tiff=s,"Exif\0\0"!=e.toString("utf8",r,s))throw new Error("The Exif data is not valid.");if(18761==e.getShort(s))this.isBigEndian=!1;else{if(19789!=e.getShort(s))throw new Error("Invalid TIFF data! Expected 0x4949 or 0x4D4D at offset "+s+" but found 0x"+e[s].toString(16).toUpperCase()+e[s+1].toString(16).toUpperCase()+".");this.isBigEndian=!0}if(vF("BigEndian=",this.isBigEndian),42!=e.getShort(s+2,this.isBigEndian)){var u=this.isBigEndian?"0x002A":"0x2A00";throw new Error("Invalid TIFF data! Expected "+u+" at offset "+(s+2)+" but found 0x"+e[s+2].toString(16).toUpperCase()+e[s+3].toString(16).toUpperCase()+".")}i=s+e.getLong(s+4,this.isBigEndian),this.offsets.ifd0=i,a=e.getShort(i,this.isBigEndian),this.options.ifd0MaxEntries&&(a=Math.min(a,this.options.ifd0MaxEntries)),vF("IFD0 ifdOffset=",i,"numberOfEntries=",a);for(var l=0;l<a;l++){(p=this.extractExifEntry(e,i+2+12*l,s,this.isBigEndian,gF.TAGS.exif))&&(59932===p.tagId&&c||(o.image[p.tagName]=p.value))}vF("IFD0 parsed",o.image);var f=e.getLong(i+2+12*a,this.isBigEndian);if(0!=f){i=s+f,this.offsets.ifd1=i,a=e.getShort(i,this.isBigEndian),this.options.ifd1MaxEntries&&(a=Math.min(a,this.options.ifd1MaxEntries)),vF("IFD1 ifdOffset=",i,"numberOfEntries=",a);for(l=0;l<a;l++){(p=this.extractExifEntry(e,i+2+12*l,s,this.isBigEndian,gF.TAGS.exif))&&(59932===p.tagId&&c||(o.thumbnail[p.tagName]=p.value))}if(this.options.fixThumbnailOffset)o.thumbnail[gF.TAGS.exif[513]]&&(vF("IFD1 fix thumbnail offset, add=",this.offsets.tiff),o.thumbnail[gF.TAGS.exif[513]]+=this.offsets.tiff);vF("IFD1 parsed",o.thumbnail)}if(o.image[gF.TAGS.exif[34665]]){i=s+o.image[gF.TAGS.exif[34665]],this.offsets.tags=i,a=e.getShort(i,this.isBigEndian),this.options.maxEntries&&(a=Math.min(a,this.options.maxEntries)),vF("EXIF IFD ifdOffset=",i,"numberOfEntries=",a);for(l=0;l<a;l++){(p=this.extractExifEntry(e,i+2+12*l,s,this.isBigEndian,gF.TAGS.exif))&&(59932===p.tagId&&c||(o.exif[p.tagName]=p.value))}vF("EXIF IFD parsed",o.exif)}if(o.image[gF.TAGS.exif[34853]]){i=s+o.image[gF.TAGS.exif[34853]],this.offsets.gps=i,a=e.getShort(i,this.isBigEndian),this.options.maxGpsEntries&&(a=Math.min(a,this.options.maxGpsEntries)),vF("GPS IFD ifdOffset=",i,"numberOfEntries=",a);for(l=0;l<a;l++){(p=this.extractExifEntry(e,i+2+12*l,s,this.isBigEndian,gF.TAGS.gps))&&(59932===p.tagId&&c||(o.gps[p.tagName]=p.value))}vF("GPS IFD parsed",o.gps)}if(o.exif[gF.TAGS.exif[40965]]){i=s+o.exif[gF.TAGS.exif[40965]],this.offsets.interoperability=i,a=e.getShort(i,this.isBigEndian),this.options.maxInteroperabilityEntries&&(a=Math.min(a,this.options.maxInteroperabilityEntries)),vF("Interoperability IFD ifdOffset=",i,"numberOfEntries=",a);for(l=0;l<a;l++){var p;if(!(p=this.extractExifEntry(e,i+2+12*l,s,this.isBigEndian,gF.TAGS.exif)))break;59932===p.tagId&&c||(o.interoperability[p.tagName]=p.value)}vF("Interoperability IFD parsed",o.gps)}if(void 0!==o.exif[gF.TAGS.exif[37500]]){var d;if("OLYMP\0"===o.exif[gF.TAGS.exif[37500]].getString(0,7)||"OLYMP\0"===o.exif[gF.TAGS.exif[37500]].getString(0,7)?d="olympus":"AGFA \0"===o.exif[gF.TAGS.exif[37500]].getString(0,7)?d="agfa":"EPSON\0\0"===o.exif[gF.TAGS.exif[37500]].getString(0,8)?d="epson":"FUJIFILM"===o.exif[gF.TAGS.exif[37500]].getString(0,8)?d="fujifilm":"Panasonic"===o.exif[gF.TAGS.exif[37500]].getString(0,9)?d="panasonic":"SANYO"===o.exif[gF.TAGS.exif[37500]].getString(0,5)&&(d="sanyo"),vF("Makernote IFD ifdOffset=",i,"type=",d),d){var h=t().extractMakernotes;o.makernote=h.call(this,e,this.makernoteOffset,s)}else o.makernote.error="Unable to extract Makernote information as it is in an unsupported or unrecognized format.";vF("Makernote IFD parsed",o.makernote)}},gF.prototype.extractExifEntry=function(e,t,r,n,i){var a={tag:e.slice(t,t+2),tagId:null,tagName:null,format:e.getShort(t+2,n),components:e.getLong(t+4,n),valueOffset:null,value:[]};if(a.tagId=a.tag.getShort(0,n),i&&i[a.tagId]&&"function"==typeof i[a.tagId]){if(a.tagName=i[a.tagId].call(this,a),!a.tagName)return!1}else{if(!i||!i[a.tagId])return!1;if(a.tagName=i[a.tagId],void 0===a.tagName)return!1}switch(a.format){case 1:a.valueOffset=a.components<=4?t+8:e.getLong(t+8,n)+r;for(var o=0;o<a.components;o++)a.value.push(e.getByte(a.valueOffset+o));break;case 2:a.valueOffset=a.components<=4?t+8:e.getLong(t+8,n)+r,a.value=e.getString(a.valueOffset,a.components),"\0"===a.value[a.value.length-1]&&(a.value=a.value.substring(0,a.value.length-1));break;case 3:a.valueOffset=a.components<=2?t+8:e.getLong(t+8,n)+r;for(o=0;o<a.components;o++)a.value.push(e.getShort(a.valueOffset+2*o,n));break;case 4:a.valueOffset=1==a.components?t+8:e.getLong(t+8,n)+r;for(o=0;o<a.components;o++)a.value.push(e.getLong(a.valueOffset+4*o,n));break;case 5:a.valueOffset=e.getLong(t+8,n)+r;for(o=0;o<a.components;o++)a.value.push(e.getLong(a.valueOffset+8*o,n)/e.getLong(a.valueOffset+8*o+4,n));break;case 6:a.valueOffset=a.components<=4?t+8:e.getLong(t+8,n)+r;for(o=0;o<a.components;o++)a.value.push(e.getSignedByte(a.valueOffset+o));break;case 7:a.valueOffset=a.components<=4?t+8:e.getLong(t+8,n)+r,a.value.push(e.slice(a.valueOffset,a.valueOffset+a.components));break;case 8:a.valueOffset=a.components<=2?t+8:e.getLong(t+8,n)+r;for(o=0;o<a.components;o++)a.value.push(e.getSignedShort(a.valueOffset+2*o,n));break;case 9:a.valueOffset=1==a.components?t+8:e.getLong(t+8,n)+r;for(o=0;o<a.components;o++)a.value.push(e.getSignedLong(a.valueOffset+4*o,n));break;case 10:a.valueOffset=e.getLong(t+8,n)+r;for(o=0;o<a.components;o++)a.value.push(e.getSignedLong(a.valueOffset+8*o,n)/e.getSignedLong(a.valueOffset+8*o+4,n));break;default:return!1}return"MakerNote"===a.tagName&&(this.offsets.makernoteOffset=a.valueOffset),1==a.value.length&&(a.value=a.value[0]),a},gF.TAGS={exif:{1:"InteropIndex",2:"InteropVersion",11:"ProcessingSoftware",254:"SubfileType",255:"OldSubfileType",256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Thresholding",264:"CellWidth",265:"CellLength",266:"FillOrder",269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",285:"PageName",286:"XPosition",287:"YPosition",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",292:"T4Options",293:"T6Options",296:"ResolutionUnit",297:"PageNumber",300:"ColorResponseUnit",301:"TransferFunction",305:"Software",306:"ModifyDate",315:"Artist",316:"HostComputer",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",320:"ColorMap",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFD",332:"InkSet",333:"InkNames",334:"NumberofInks",336:"DotRange",337:"TargetPrinter",338:"ExtraSamples",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",435:"T82Options",437:"JPEGTables",512:"JPEGProc",513:"ThumbnailOffset",514:"ThumbnailLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"ApplicationNotes",999:"USPTOMiscellaneous",4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight",18246:"Rating",18247:"XP_DIP_XML",18248:"StitchInfo",18249:"RatingPercent",32781:"ImageID",32931:"WangTag1",32932:"WangAnnotation",32933:"WangTag3",32934:"WangTag4",32995:"Matteing",32996:"DataType",32997:"ImageDepth",32998:"TileDepth",33405:"Model2",33421:"CFARepeatPatternDim",33422:"CFAPattern2",33423:"BatteryLevel",33424:"KodakIFD",33432:"Copyright",33434:"ExposureTime",33437:"FNumber",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"PixelScale",33589:"AdventScale",33590:"AdventRevision",33628:"UIC1Tag",33629:"UIC2Tag",33630:"UIC3Tag",33631:"UIC4Tag",33723:"IPTC-NAA",33918:"IntergraphPacketData",33919:"IntergraphFlagRegisters",33920:"IntergraphMatrix",33921:"INGRReserved",33922:"ModelTiePoint",34016:"Site",34017:"ColorSequence",34018:"IT8Header",34019:"RasterPadding",34020:"BitsPerRunLength",34021:"BitsPerExtendedRunLength",34022:"ColorTable",34023:"ImageColorIndicator",34024:"BackgroundColorIndicator",34025:"ImageColorValue",34026:"BackgroundColorValue",34027:"PixelIntensityRange",34028:"TransparencyIndicator",34029:"ColorCharacterization",34030:"HCUsage",34031:"TrapIndicator",34032:"CMYKEquivalent",34118:"SEMInfo",34152:"AFCP_IPTC",34232:"PixelMagicJBIGOptions",34264:"ModelTransform",34306:"WB_GRGBLevels",34310:"LeafData",34377:"PhotoshopSettings",34665:"ExifOffset",34675:"ICC_Profile",34687:"TIFF_FXExtensions",34688:"MultiProfiles",34689:"SharedData",34690:"T88Options",34732:"ImageLayer",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34850:"ExposureProgram",34852:"SpectralSensitivity",34853:"GPSInfo",34855:"ISO",34856:"Opto-ElectricConvFactor",34857:"Interlace",34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",34908:"FaxRecvParams",34909:"FaxSubAddress",34910:"FaxRecvTime",34954:"LeafSubIFD",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"CreateDate",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureCompensation",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37387:"FlashEnergy",37388:"SpatialFrequencyResponse",37389:"Noise",37390:"FocalPlaneXResolution",37391:"FocalPlaneYResolution",37392:"FocalPlaneResolutionUnit",37393:"ImageNumber",37394:"SecurityClassification",37395:"ImageHistory",37396:"SubjectArea",37397:"ExposureIndex",37398:"TIFF-EPStandardID",37399:"SensingMethod",37434:"CIP3DataFile",37435:"CIP3Sheet",37436:"CIP3Side",37439:"StoNits",37500:"MakerNote",37510:"UserComment",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37679:"MSDocumentText",37680:"MSPropertySetStorage",37681:"MSDocumentTextPosition",37724:"ImageSourceData",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",40960:"FlashpixVersion",40961:"ColorSpace",40962:"ExifImageWidth",40963:"ExifImageHeight",40964:"RelatedSoundFile",40965:"InteropOffset",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41485:"Noise",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41489:"ImageNumber",41490:"SecurityClassification",41491:"ImageHistory",41492:"SubjectLocation",41493:"ExposureIndex",41494:"TIFF-EPStandardID",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFormat",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"OwnerName",42033:"SerialNumber",42034:"LensInfo",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42112:"GDALMetadata",42113:"GDALNoData",42240:"Gamma",44992:"ExpandSoftware",44993:"ExpandLens",44994:"ExpandFilm",44995:"ExpandFilterLens",44996:"ExpandScanner",44997:"ExpandFlashLamp",48129:"PixelFormat",48130:"Transformation",48131:"Uncompressed",48132:"ImageType",48256:"ImageWidth",48257:"ImageHeight",48258:"WidthResolution",48259:"HeightResolution",48320:"ImageOffset",48321:"ImageByteCount",48322:"AlphaOffset",48323:"AlphaByteCount",48324:"ImageDataDiscard",48325:"AlphaDataDiscard",50215:"OceScanjobDesc",50216:"OceApplicationSelector",50217:"OceIDNumber",50218:"OceImageLogic",50255:"Annotations",50341:"PrintIM",50560:"USPTOOriginalContentType",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50739:"ShadowScale",50740:"DNGPrivateData",50741:"MakerNoteSafety",50752:"RawImageSegmentation",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50781:"RawDataUniqueID",50784:"AliasLayerMetadata",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50829:"ActiveArea",50830:"MaskedAreas",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50935:"NoiseReductionApplied",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:"ProfileEmbedPolicy",50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:"PreviewColorSpace",50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50974:"SubTileBlockSize",50975:"RowInterleaveFactor",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51008:"OpcodeList1",51009:"OpcodeList2",51022:"OpcodeList3",51041:"NoiseProfile",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:"ProfileHueSatMapEncoding",51108:"ProfileLookTableEncoding",51109:"BaselineExposureOffset",51110:"DefaultBlackRender",51111:"NewRawImageDigest",51112:"RawToPreviewGain",51125:"DefaultUserCrop",59932:"Padding",59933:"OffsetSchema",65000:"OwnerName",65001:"SerialNumber",65002:"Lens",65024:"KDC_IFD",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"}};var bF=yF,wF=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.detectFileType=t.processImage=void 0;var r=n(wf);function n(e){return e&&e.__esModule?e:{default:e}}t.drawImage=a,t.updateImageOrientation=function(e){return new r.default(function(t){var r=new FileReader;r.readAsArrayBuffer(e),r.onload=function(){var e=r.result,n=ig.from(e);t(n)}}).then(function(t){return o(e,t)})},t.readExifData=o,t.orient=function(e,t){if(t&&t.image&&t.image.orientation&&1!==t.image.orientation){var r={img:e.img,x:e.x,y:e.y,width:e.width,height:e.height,deg:0,flip:!0,ctx:e.ctx};switch(e&&e.orientation){case 3:r.deg=180,r.flip=!1;break;case 4:r.deg=180,r.flip=!0;break;case 5:r.deg=270,r.flip=!0;break;case 6:r.deg=270,r.flip=!1;break;case 7:r.deg=90,r.flip=!0;break;case 8:r.deg=90,r.flip=!1}a(r)}else e.ctx.drawImage(e.img,e.x,e.y,e.width,e.height)},Object.defineProperty(t,"processImage",{enumerable:!0,get:function(){return n(OD).default}}),Object.defineProperty(t,"detectFileType",{enumerable:!0,get:function(){return n(FD).default}});var i=bF.ExifImage;function a(e){e.ctx.save();var t=void 0;t=e.flip?e.deg*Math.PI/180:2*Math.PI-e.deg*Math.PI/180,e.ctx.translate(e.x+e.width/2,e.y+e.height/2),e.ctx.rotate(t),e.flip&&e.ctx.scale(-1,1),e.ctx.drawImage(e.img,-e.width/2,-e.height/2,e.width,e.height),e.ctx.restore()}function o(e,t){return new r.default(function(r){e&&e.image&&("image/jpeg"===e.type||"image/jpeg"===e.mimeType)?new i({image:t},function(n,i){!n&&i&&(e.image.orientation=i.image.Orientation),r(t)}):r(t)})}});r(wF);wF.detectFileType,wF.processImage,wF.drawImage,wF.updateImageOrientation,wF.readExifData,wF.orient;var _F=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidUserCreation=t.ConversationError=void 0;var r=o(aS),n=o(Gy),i=o(oS),a=o(sS);function o(e){return e&&e.__esModule?e:{default:e}}var s=t.ConversationError=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(Zx.Exception);t.InvalidUserCreation=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(s)});r(_F);_F.InvalidUserCreation,_F.ConversationError;var EF=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FILE_SYMBOL=t.EMITTER_SYMBOL=void 0;var r=v(lu),n=v(ET),i=v(ST),a=v($k),o=v(Cf),s=v(wf),c=v(If),u=v(vw),l=v(ow),f=v(uO),p=v(IT),d=v(YN),h=v(Vj);function v(e){return e&&e.__esModule?e:{default:e}}var m=t.EMITTER_SYMBOL=(0,l.default)("EMITTER_SYMBOL"),g=t.FILE_SYMBOL=(0,l.default)("FILE_SYMBOL"),y=(0,l.default)("PROMISE_SYMBOL"),b=LP.SparkPlugin.extend({getSymbols:function(){return{file:g,emitter:m}},namespace:"Conversation",derived:{target:{deps:["conversation"],fn:function(){return this.conversation}}},session:{conversation:{required:!0,type:"object"},content:"string",clientTempId:"string",displayName:"string",enableThumbnails:{default:!0,type:"boolean"},hiddenSpaceUrl:"object",mentions:"object",spaceUrl:"object",uploads:{type:"object",default:function(){return new u.default}}},initialize:function(e,t){(0,c.default)(LP.SparkPlugin.prototype.initialize,this,[e,t]),e&&e.conversation&&(this.spaceUrl=s.default.resolve(e.conversation._spaceUrl||this._retrieveSpaceUrl(e.conversation.url+"/space").then(function(t){return e.conversation._spaceUrl=t,t})),this.hiddenSpaceUrl=s.default.resolve(e.conversation._hiddenSpaceUrl||this._retrieveSpaceUrl(e.conversation.url+"/space/hidden").then(function(t){return e.conversation._hiddenSpaceUrl=t,t})))},add:function(e,t){var r,n=this;t=t||{};var c=this.uploads.get(e);if(c)return c[y];var u=new hE.EventEmitter;c=(0,o.default)((r={displayName:e.name,fileSize:e.size||e.byteLength||e.length,mimeType:e.type,objectType:"file"},(0,a.default)(r,m,u),(0,a.default)(r,g,e),r),(0,p.default)(t,"actions")),this.uploads.set(e,c);var l=(0,wF.detectFileType)(e,this.logger).then(function(t){return c.mimeType=t,(0,wF.processImage)({file:e,type:t,thumbnailMaxWidth:n.config.thumbnailMaxWidth,thumbnailMaxHeight:n.config.thumbnailMaxHeight,enableThumbnails:n.enableThumbnails,logger:n.logger})}).then(function(t){var r=n.spark.internal.encryption.encryptBinary(e).then(function(e){var t=e.scr,r=e.cdata;return c.scr=t,s.default.all([r,n.spaceUrl])}).then(function(e){var t=(0,i.default)(e,2),r=t[0],a=t[1],o=n._upload(r,a+"/upload_sessions");return(0,Zx.transferEvents)("progress",o,u),o}).then(function(e){c.url=c.scr.loc=e.downloadUrl}),a=void 0;if(t){var l=(0,i.default)(t,3),f=l[0],p=l[1],d=l[2];(0,o.default)(c,p),f&&d&&(c.image=d,a=n.spark.internal.encryption.encryptBinary(f).then(function(e){var t=e.scr,r=e.cdata;return c.image.scr=t,s.default.all([r,n.hiddenSpaceUrl])}).then(function(e){var t=(0,i.default)(e,2),r=t[0],a=t[1];return n._upload(r,a+"/upload_sessions")}).then(function(e){c.image.url=c.image.scr.loc=e.downloadUrl}))}return s.default.all([r,a])});return c[y]=l,(0,Zx.proxyEvents)(u,l),l},getFiles:function(){var e=[],t=!0,r=!1,a=void 0;try{for(var o,s=(0,n.default)(this.uploads);!(t=(o=s.next()).done);t=!0){var c=o.value,u=(0,i.default)(c,1)[0];e.push(this.uploads.get(u)[g])}}catch(e){r=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(r)throw a}}return e},_upload:function(e,t){var r=e.length||e.size||e.byteLength;return this.spark.upload({uri:t,file:e,qs:{transcode:!0},phases:{initialize:{fileSize:r},upload:{$url:function(e){return e.uploadUrl}},finalize:{$uri:function(e){return e.finishUploadUrl},body:{fileSize:r}}}})},remove:function(e){return this.uploads.delete(e),s.default.resolve()},prepare:function(){if(!this.uploads.size)throw new Error("Cannot submit a share activity without atleast one file");var e={verb:"share",object:{objectType:"content",displayName:this.object&&this.object.displayName?this.object.displayName:void 0,content:this.object&&this.object.content?this.object.content:void 0,mentions:this.object&&this.object.mentions?this.object.mentions:void 0,files:{items:[]}},clientTempId:this.clientTempId},t=[];return this.uploads.forEach(function(r){e.object.files.items.push(r),t.push(r[y])}),e.object.contentCategory=this._determineContentCategory(e.object.files.items),s.default.all(t).then(function(){return e})},_itemContainsActionWithMimeType:function(e,t){return(0,f.default)(e.map(function(e){return(0,f.default)(e.actions,{mimeType:t})}))},_determineContentCategory:function(e){if(this._itemContainsActionWithMimeType(e,"application/x-cisco-spark-whiteboard"))return"documents";var t=(0,h.default)((0,d.default)(e,"mimeType"));if(t.length!==e.length)return"documents";var r=t[0].split("/").shift();if("video"!==r&&"image"!==r)return"documents";var i=!0,a=!1,o=void 0;try{for(var s,c=(0,n.default)(t);!(i=(s=c.next()).done);i=!0){if(s.value.split("/").shift()!==r)return"documents"}}catch(e){a=!0,o=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw o}}return r+"s"},_retrieveSpaceUrl:function(e){return this.spark.request({method:"PUT",uri:e}).then(function(e){return e.body.spaceUrl})},version:"1.50.15"});b.create=function(e,t,n){if(t instanceof b)return t;var i=void 0;t&&t.object&&t.object.files&&(i=t.object.files,(0,r.default)(t.object,"files"));var a=new b((0,o.default)({conversation:e},t),{parent:n});return(i=i&&i.items||i)&&i.forEach(function(e){return a.add(e)}),a},t.default=b});r(EF);EF.FILE_SYMBOL,EF.EMITTER_SYMBOL;var SF=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=b(ST),n=b(Cf),i=b(wf),a=b(PD),o=b(IT),s=b(lm),c=b(iP),u=b(YN),l=b(jv),f=b(bC),p=b(up),d=b(md),h=b(pE),v=b(gm),m=b(gP),g=b(Cm),y=b(EF);function b(e){return e&&e.__esModule?e:{default:e}}var w=LP.SparkPlugin.extend({namespace:"Conversation",acknowledge:function(e,t,r){var n=this;return(0,p.default)(t)?this._inferConversationUrl(e).then(function(){return n.prepare(r,{verb:"acknowledge",target:n.prepareConversation(e),object:{objectType:"activity",id:t.id,url:t.url}})}).then(function(e){return n.submit(e)}):i.default.reject(new Error("`object` must be an object"))},add:function(e,t,r){var n=this;return this._inferConversationUrl(e).then(function(){return n.spark.internal.user.asUUID(t,{create:!0})}).then(function(t){return n.prepare(r,{verb:"add",target:n.prepareConversation(e),object:{id:t,objectType:"person"},kmsMessage:{method:"create",uri:"/authorizations",resourceUri:"<KRO>",userIds:[t]}}).then(function(e){return n.submit(e)})})},create:function(e,t){var r=this;return t=t||{},e.participants&&0!==e.participants.length?i.default.all(e.participants.map(function(e){return r.spark.internal.user.asUUID(e,{create:!0}).catch(function(e){return t.allowPartialCreation?void 0:i.default.reject(e)})})).then(function(n){n.unshift(r.spark.internal.device.userId);var o=(n=(0,a.default)(n)).filter(function(e){return e});return e.participants=o,2!==n.length||t&&t.forceGrouped?r._createGrouped(e,t):e.participants[1]?t.skipOneOnOneFetch?r._createOneOnOne(e):r._maybeCreateOneOnOneThenPost(e,t):i.default.reject(new _F.InvalidUserCreation)}).then(function(t){return e.files?r.spark.internal.conversation.share(t,e.files).then(function(e){return t.activities.items.push(e),t}):t}):i.default.reject(new Error("`params.participants` is required"))},delete:function(e,t,r){var n=this;return(0,p.default)(t)?this._inferConversationUrl(e).then(function(){return n.prepare(r,{verb:"delete",target:n.prepareConversation(e),object:(0,o.default)(t,"id","url","objectType")})}).then(function(e){return n.submit(e)}):i.default.reject(new Error("`object` must be an object"))},download:function(e,t){var r=this,n=Boolean(e.scr&&e.scr.key),i=new hE.EventEmitter,a=void 0;return a=(a=n?this.spark.internal.encryption.download(e.scr):e.scr&&e.scr.loc?this._downloadUnencryptedFile(e.scr.loc,t):this._downloadUnencryptedFile(e.url,t)).on("progress",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.emit.apply(i,["progress"].concat(t))}).then(function(t){return(0,wF.readExifData)(e,t)}).then(function(t){return r.logger.info("conversation: file downloaded"),e.displayName&&!t.name&&(t.name=e.displayName),!t.type&&e.mimeType&&(t.type=e.mimeType),t}),(0,Zx.proxyEvents)(i,a),a},_downloadUnencryptedFile:function(e,t){t=t||{},(0,n.default)(t,{uri:e,responseType:"buffer"});var r=this.request(t).then(function(e){return e.body});return(0,Zx.proxyEvents)(t.download,r),r},expand:function(e,t,r,n){var i={actor:n,objectType:"activity",verb:e};return n||(n=this.spark.internal.device.userId),(0,f.default)(n)&&(i.actor={objectType:"person",id:n}),t&&(i.object=t),r&&(i.target=r),i},get:function(e,t){var r=this;return this._inferConversationUrl(e).then(function(){var a=e.user,o=e.url;t=t||{};var c={qs:(0,n.default)({uuidEntryFormat:!0,personRefresh:!0,activitiesLimit:0,includeConvWithDeletedUserUUID:!1,includeParticipants:!1},(0,s.default)(t,"id","user","url"))};return i.default.resolve(a?r.spark.internal.user.asUUID(a):null).then(function(e){return e?(0,n.default)(c,{service:"conversation",resource:"conversations/user/"+e}):c.uri=o,r.request(c)})}).then((0,Zx.tap)(function(e){return r._recordUUIDs(e.body)})).then(function(e){return e.body})},leave:function(e,t,r){var n=this;return this._inferConversationUrl(e).then(function(){return t||(t=n.spark.internal.device.userId),n.spark.internal.user.asUUID(t).then(function(t){return n.prepare(r,{verb:"leave",target:n.prepareConversation(e),object:{id:t,objectType:"person"},kmsMessage:{method:"delete",uri:"<KRO>/authorizations?"+g.default.stringify({authId:t})}})})}).then(function(e){return n.submit(e)})},list:function(e){return this._list({service:"conversation",resource:"conversations",qs:(0,s.default)(e,"deferDecrypt"),deferDecrypt:e.deferDecrypt})},listLeft:function(e){return this._list({service:"conversation",resource:"conversations/left",qs:e})},listActivities:function(e){return this._listActivities((0,n.default)(e,{mentions:!1}))},listMentions:function(e){return this._listActivities((0,n.default)(e,{mentions:!0}))},muteMentions:function(e,t){return this.tag(e,{tags:["MENTION_NOTIFICATIONS_OFF"]},t)},muteMessages:function(e,t){return this.tag(e,{tags:["MESSAGE_NOTIFICATIONS_OFF"]},t)},post:function(e,t,r){var i=this;return(0,f.default)(t)&&(t={displayName:t}),this._inferConversationUrl(e).then(function(){return i.prepare(r,{verb:"post",target:i.prepareConversation(e),object:(0,n.default)({objectType:"comment"},t)})}).then(function(e){return i.submit(e)})},prepareConversation:function(e){return(0,h.default)((0,o.default)(e,"id","url","objectType","defaultActivityEncryptionKeyUrl","kmsResourceObjectUrl"),{objectType:"conversation"})},prepare:function(e,t){var r=this;return t=t||{},e=e||{},i.default.resolve(e.prepare?e.prepare(t):e).then(function(e){return(0,h.default)(e,{verb:t.verb,kmsMessage:t.kmsMessage,objectType:"activity",clientTempId:m.default.v4(),actor:r.spark.internal.device.userId}),(0,f.default)(e.actor)&&(e.actor={objectType:"person",id:e.actor}),["actor","object"].forEach(function(r){t[r]&&(e[r]=e[r]||{},(0,h.default)(e[r],t[r]))}),t.target&&(0,c.default)(e,{target:(0,o.default)(t.target,"id","url","objectType","kmsResourceObjectUrl","defaultActivityEncryptionKeyUrl")}),["object","target"].forEach(function(t){e[t]&&e[t].url&&!e[t].id&&(e[t].id=e[t].url.split("/").pop())}),["actor","object","target"].forEach(function(t){if(e[t]&&!e[t].objectType)throw new Error("`act."+t+".objectType` must be defined")}),e.object&&e.object.content&&!e.object.displayName?i.default.reject(new Error("Cannot submit activity object with `content` but no `displayName`")):e})},processActivityEvent:function(e){return this.spark.transform("inbound",e).then(function(){return e})},removeAllMuteTags:function(e,t){return this.untag(e,{tags:["MENTION_NOTIFICATIONS_OFF","MENTION_NOTIFICATIONS_ON","MESSAGE_NOTIFICATIONS_OFF","MESSAGE_NOTIFICATIONS_ON"]},t)},makeShare:function(e,t){return y.default.create(e,t,this.spark)},assign:function(e,t){var r=this;return(t.size||t.length)>1048576?i.default.reject(new Error("Room avatars must be less than 1MB")):this._inferConversationUrl(e).then(function(){var n=y.default.create(e,null,r.spark);return n.enableThumbnails=!1,n.add(t),r.prepare(n,{target:r.prepareConversation(e)})}).then(function(e){return e.verb="assign",r.submit(e)})},updateTypingStatus:function(e,t){if(!e.id){if(!e.url)return i.default.reject(new Error("conversation: could not identify conversation"));e.id=e.url.split("/").pop()}var r=void 0;r=t.typing?"status.start_typing":"status.stop_typing";var n={method:"POST",service:"conversation",resource:"status/typing",body:{conversationId:e.id,eventType:r}};return this.request(n)},share:function(e,t){var r=this;return(0,d.default)(t)&&(t={object:{files:t}}),this._inferConversationUrl(e).then(function(){return t instanceof y.default||(t=y.default.create(e,t,r.spark)),r.prepare(t,{target:r.prepareConversation(e)})}).then(function(e){return r.submit(e)})},submit:function(e){var t={method:"POST",service:"conversation",resource:"share"===e.verb?"content":"activities",body:e,qs:{personRefresh:!0}};return"share"===e.verb&&(0,n.default)(t.qs,{transcode:!0,async:!1}),this.spark.trigger("user-activity"),this.request(t).then(function(e){return e.body})},unassign:function(e,t){var r=this;return this._inferConversationUrl(e).then(function(){return r.prepare(t,{verb:"unassign",target:r.prepareConversation(e),object:{objectType:"content",files:{items:[]}}})}).then(function(e){return r.submit(e)})},unmuteMentions:function(e,t){return this.tag(e,{tags:["MENTION_NOTIFICATIONS_ON"]},t)},unmuteMessages:function(e,t){return this.tag(e,{tags:["MESSAGE_NOTIFICATIONS_ON"]},t)},update:function(e,t,r){var n=this;return(0,p.default)(t)?this._inferConversationUrl(e).then(function(){return n.prepare(r,{verb:"update",target:n.prepareConversation(e),object:t})}).then(function(e){return n.submit(e)}):i.default.reject(new Error("`object` must be an object"))},updateKey:function(e,t,r){var n=this;return this._inferConversationUrl(e).then(function(){return n.get(e,{activitiesLimit:0,includeParticipants:!0})}).then(function(e){return n._updateKey(e,t,r)})},_updateKey:function(e,t,r){var n=this;return i.default.resolve(t||this.spark.internal.encryption.kms.createUnboundKeys({count:1})).then(function(t){var i=(0,d.default)(t)?t[0]:t,a={verb:"updateKey",target:n.prepareConversation(e),object:{defaultActivityEncryptionKeyUrl:i.uri,objectType:"conversation"}};return e.defaultActivityEncryptionKeyUrl?a.kmsMessage={method:"update",resourceUri:"<KRO>",uri:i.uri}:a.kmsMessage={method:"create",uri:"/resources",userIds:(0,u.default)(e.participants.items,"id"),keyUris:[i.uri]},n.prepare(r,a).then(function(e){return n.submit(e)})})},_create:function(e,t){return t=t||{},this.request({method:"POST",service:"conversation",resource:"conversations",body:e,qs:{forceCreate:t.allowPartialCreation}}).then(function(e){return e.body})},_createGrouped:function(e,t){return this._create(this._prepareConversationForCreation(e),t)},_createOneOnOne:function(e){var t=this._prepareConversationForCreation(e);return t.tags=["ONE_ON_ONE"],this._create(t)},_inferConversationUrl:function(e){var t=this;return e.id?this.spark.internal.feature.getFeature("developer","web-ha-messaging").then(function(r){return r?t.spark.internal.device.getServiceUrl("conversation").then(function(t){return e.url=t+"/conversations/"+e.id,e}):e.url?i.default.resolve(e):t.spark.internal.device.getServiceUrl("conversation").then(function(r){return e.url=r+"/conversations/"+e.id,"production"!==Tc.env.NODE_ENV&&t.logger.warn("conversation: inferred conversation url from conversation id; please pass whole conversation objects to Conversation methods"),e})}):i.default.resolve(e)},_listActivities:function(e){return this._list({service:"conversation",resource:e.mentions?"mentions":"activities",qs:(0,s.default)(e,"mentions")})},_list:function(e){var t=this;return e.qs=(0,n.default)({personRefresh:!0,uuidEntryFormat:!0,activitiesLimit:0,participantsLimit:0},e.qs),this.request(e).then(function(e){if(!e.body||!e.body.items||0===e.body.items.length)return[];var r=e.body.items;return(0,l.default)(r).published<r[0].published&&r.reverse(),i.default.all(r.map(function(e){return t._recordUUIDs(e)})).then(function(){return r})})},_maybeCreateOneOnOneThenPost:function(e,t){var r=this;return this.get((0,h.default)({user:e.participants[1]}),(0,n.default)(t,{includeConvWithDeletedUserUUID:!0,includeParticipants:!0})).then(function(t){return e.comment||e.html?r.post(t,{content:e.html,displayName:e.comment}).then(function(e){return t.activities.items.push(e),t}):t}).catch(function(t){return 404!==t.statusCode?i.default.reject(t):r._createOneOnOne(e)})},_prepareConversationForCreation:function(e){var t=this,r={activities:{items:[this.expand("create")]},objectType:"conversation",kmsMessage:{method:"create",uri:"/resources",userIds:(0,v.default)(e.participants),keyUris:[]}};return e.displayName&&(r.displayName=e.displayName),e.participants.forEach(function(e){r.activities.items.push(t.expand("add",{objectType:"person",id:e}))}),e.comment&&r.activities.items.push(this.expand("post",{objectType:"comment",content:e.html,displayName:e.comment})),r},_recordUUIDs:function(e){var t=this;return e.participants&&e.participants.items?i.default.all(e.participants.items.map(function(e){return"ROOM"===e.type?i.default.resolve():t.spark.internal.user.recordUUID(e).catch(function(r){return t.logger.warn("Could not record uuid for "+(e.id||e.entryUUID),r)})})):i.default.resolve(e)},version:"1.50.15"});["favorite","hide","lock","mute","unfavorite","unhide","unlock","unmute"].forEach(function(e){w.prototype[e]=function(t,r){var n=this;return this._inferConversationUrl(t).then(function(){return n.prepare(r,{verb:e,object:n.prepareConversation(t)})}).then(function(e){return n.submit(e)})}}),["assignModerator","unassignModerator"].forEach(function(e){w.prototype[e]=function(t,n,a){var o=this;return i.default.all([this._inferConversationUrl(t),n?this.spark.internal.user.asUUID(n):this.spark.internal.device.userId]).then(function(t){var n=(0,r.default)(t,2),i=n[0],s=n[1];return o.prepare(a,{verb:e,target:o.prepareConversation(i),object:{id:s,objectType:"person"}})}).then(function(e){return o.submit(e)})}}),["setSpaceProperty","unsetSpaceProperty"].forEach(function(e){var t=e.startsWith("set")?"set":"unset";w.prototype[e]=function(e,r,n){var a=this;return(0,f.default)(r)?this._inferConversationUrl(e).then(function(){return a.prepare(n,{verb:t,target:a.prepareConversation(e),object:{tags:[r],objectType:"spaceProperty"}})}).then(function(e){return a.submit(e)}):i.default.reject(new Error("`tag` must be a string"))}}),["tag","untag"].forEach(function(e){w.prototype[e]=function(t,r,a){var o=this;if(!(0,p.default)(r))return i.default.reject(new Error("`object` must be an object"));var s=this.prepareConversation(t);return this._inferConversationUrl(t).then(function(){return o.prepare(a,{verb:e,target:s,object:(0,n.default)(s,r)})}).then(function(e){return o.submit(e)})}}),t.default=w});r(SF);var xF=n(function(t,r){t.exports=function(){function t(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,i=void 0,a=void 0,o=function(e,t){d[n]=e,d[n+1]=t,2===(n+=2)&&(a?a(h):b())},s="undefined"!=typeof window?window:void 0,c=s||{},u=c.MutationObserver||c.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==Tc&&"[object process]"==={}.toString.call(Tc),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(h,1)}}var d=new Array(1e3);function h(){for(var e=0;e<n;e+=2){var t=d[e],r=d[e+1];t(r),d[e]=void 0,d[e+1]=void 0}n=0}var v,m,g,y,b=void 0;function w(e,t){var r=this,n=new this.constructor(S);void 0===n[E]&&F(n);var i=r._state;if(i){var a=arguments[i-1];o(function(){return B(i,n,a,r._result)})}else M(r,n,e,t);return n}function _(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(S);return P(t,e),t}l?b=function(){return hc(h)}:u?(m=0,g=new u(h),y=document.createTextNode(""),g.observe(y,{characterData:!0}),b=function(){y.data=m=++m%2}):f?((v=new MessageChannel).port1.onmessage=h,b=function(){return v.port2.postMessage(0)}):b=void 0===s?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(h)}:p()}catch(e){return p()}}():p();var E=Math.random().toString(36).substring(2);function S(){}var x=void 0,C=1,k=2,T={error:null};function A(e){try{return e.then}catch(e){return T.error=e,T}}function I(e,r,n){r.constructor===e.constructor&&n===w&&r.constructor.resolve===_?function(e,t){t._state===C?R(e,t._result):t._state===k?j(e,t._result):M(t,void 0,function(t){return P(e,t)},function(t){return j(e,t)})}(e,r):n===T?(j(e,T.error),T.error=null):void 0===n?R(e,r):t(n)?function(e,t,r){o(function(e){var n=!1,i=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(r,t,function(r){n||(n=!0,t!==r?P(e,r):R(e,r))},function(t){n||(n=!0,j(e,t))},e._label);!n&&i&&(n=!0,j(e,i))},e)}(e,r,n):R(e,r)}function P(e,t){var r,n;e===t?j(e,new TypeError("You cannot resolve a promise with itself")):(n=typeof(r=t),null===r||"object"!==n&&"function"!==n?R(e,t):I(e,t,A(t)))}function O(e){e._onerror&&e._onerror(e._result),N(e)}function R(e,t){e._state===x&&(e._result=t,e._state=C,0!==e._subscribers.length&&o(N,e))}function j(e,t){e._state===x&&(e._state=k,e._result=t,o(O,e))}function M(e,t,r,n){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+C]=r,i[a+k]=n,0===a&&e._state&&o(N,e)}function N(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,a=e._result,o=0;o<t.length;o+=3)n=t[o],i=t[o+r],n?B(r,n,i,a):i(a);e._subscribers.length=0}}function B(e,r,n,i){var a=t(n),o=void 0,s=void 0,c=void 0,u=void 0;if(a){if((o=function(e,t){try{return e(t)}catch(e){return T.error=e,T}}(n,i))===T?(u=!0,s=o.error,o.error=null):c=!0,r===o)return void j(r,new TypeError("A promises callback cannot return that same promise."))}else o=i,c=!0;r._state!==x||(a&&c?P(r,o):u?j(r,s):e===C?R(r,o):e===k&&j(r,o))}var D=0;function F(e){e[E]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}var L=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(S),this.promise[E]||F(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&R(this.promise,this._result))):j(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===x&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===_){var i=A(e);if(i===w&&e._state!==x)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===U){var a=new r(S);I(a,e,i),this._willSettleAt(a,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===x&&(this._remaining--,e===k?j(n,r):this._result[t]=r),0===this._remaining&&R(n,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;M(e,void 0,function(e){return r._settledAt(C,t,e)},function(e){return r._settledAt(k,t,e)})},e}(),U=function(){function e(t){this[E]=D++,this._result=this._state=void 0,this._subscribers=[],S!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){P(e,t)},function(t){j(e,t)})}catch(t){j(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var r=this.constructor;return t(e)?this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return U.prototype.then=w,U.all=function(e){return new L(this,e).promise},U.race=function(e){var t=this;return r(e)?new t(function(r,n){for(var i=e.length,a=0;a<i;a++)t.resolve(e[a]).then(r,n)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},U.resolve=_,U.reject=function(e){var t=new this(S);return j(t,e),t},U._setScheduler=function(e){a=e},U._setAsap=function(e){o=e},U._asap=o,U.polyfill=function(){var t=void 0;if(void 0!==e)t=e;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=t.Promise;if(r){var n=null;try{n=Object.prototype.toString.call(r.resolve())}catch(e){}if("[object Promise]"===n&&!r.cast)return}t.Promise=U},U.Promise=U,U}()}),CF=n(function(t,r){var n=200,i="__lodash_hash_undefined__",a=9007199254740991,o="[object Arguments]",s="[object Boolean]",c="[object Date]",u="[object Function]",l="[object GeneratorFunction]",f="[object Map]",p="[object Number]",d="[object Object]",h="[object RegExp]",v="[object Set]",m="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",_="[object Float64Array]",E="[object Int8Array]",S="[object Int16Array]",x="[object Int32Array]",C="[object Uint8Array]",k="[object Uint8ClampedArray]",T="[object Uint16Array]",A="[object Uint32Array]",I=/\w*$/,P=/^\[object .+?Constructor\]$/,O=/^(?:0|[1-9]\d*)$/,R={};R[o]=R["[object Array]"]=R[y]=R[b]=R[s]=R[c]=R[w]=R[_]=R[E]=R[S]=R[x]=R[f]=R[p]=R[d]=R[h]=R[v]=R[m]=R[g]=R[C]=R[k]=R[T]=R[A]=!0,R["[object Error]"]=R[u]=R["[object WeakMap]"]=!1;var j="object"==typeof e&&e&&e.Object===Object&&e,M="object"==typeof self&&self&&self.Object===Object&&self,N=j||M||Function("return this")(),B=r&&!r.nodeType&&r,D=B&&t&&!t.nodeType&&t,F=D&&D.exports===B;function L(e,t){return e.set(t[0],t[1]),e}function U(e,t){return e.add(t),e}function z(e,t,r,n){var i=-1,a=e?e.length:0;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}function V(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function q(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function K(e,t){return function(r){return e(t(r))}}function G(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var H,W=Array.prototype,$=Function.prototype,Y=Object.prototype,J=N["__core-js_shared__"],Q=(H=/[^.]+$/.exec(J&&J.keys&&J.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"",Z=$.toString,X=Y.hasOwnProperty,ee=Y.toString,te=RegExp("^"+Z.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=F?N.Buffer:void 0,ne=N.Symbol,ie=N.Uint8Array,ae=K(Object.getPrototypeOf,Object),oe=Object.create,se=Y.propertyIsEnumerable,ce=W.splice,ue=Object.getOwnPropertySymbols,le=re?re.isBuffer:void 0,fe=K(Object.keys,Object),pe=De(N,"DataView"),de=De(N,"Map"),he=De(N,"Promise"),ve=De(N,"Set"),me=De(N,"WeakMap"),ge=De(Object,"create"),ye=Ve(pe),be=Ve(de),we=Ve(he),_e=Ve(ve),Ee=Ve(me),Se=ne?ne.prototype:void 0,xe=Se?Se.valueOf:void 0;function Ce(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ke(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Te(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ae(e){this.__data__=new ke(e)}function Ie(e,t){var r=Ke(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&Ge(e)}(e)&&X.call(e,"callee")&&(!se.call(e,"callee")||ee.call(e)==o)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var a in e)!t&&!X.call(e,a)||i&&("length"==a||Ue(a,n))||r.push(a);return r}function Pe(e,t,r){var n=e[t];X.call(e,t)&&qe(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function Oe(e,t){for(var r=e.length;r--;)if(qe(e[r][0],t))return r;return-1}function Re(e,t,r,n,i,a,P){var O;if(n&&(O=a?n(e,i,a,P):n(e)),void 0!==O)return O;if(!$e(e))return e;var j=Ke(e);if(j){if(O=function(e){var t=e.length,r=e.constructor(t);t&&"string"==typeof e[0]&&X.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!t)return function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(e,O)}else{var M=Le(e),N=M==u||M==l;if(He(e))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(e,t);if(M==d||M==o||N&&!a){if(V(e))return a?e:{};if(O=function(e){return"function"!=typeof e.constructor||ze(e)?{}:(t=ae(e),$e(t)?oe(t):{});var t}(N?{}:e),!t)return function(e,t){return Ne(e,Fe(e),t)}(e,function(e,t){return e&&Ne(t,Ye(t),e)}(O,e))}else{if(!R[M])return a?e:{};O=function(e,t,r,n){var i=e.constructor;switch(t){case y:return Me(e);case s:case c:return new i(+e);case b:return function(e,t){var r=t?Me(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,n);case w:case _:case E:case S:case x:case C:case k:case T:case A:return function(e,t){var r=t?Me(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,n);case f:return function(e,t,r){return z(t?r(q(e),!0):q(e),L,new e.constructor)}(e,n,r);case p:case m:return new i(e);case h:return(u=new(o=e).constructor(o.source,I.exec(o))).lastIndex=o.lastIndex,u;case v:return function(e,t,r){return z(t?r(G(e),!0):G(e),U,new e.constructor)}(e,n,r);case g:return a=e,xe?Object(xe.call(a)):{}}var a;var o,u}(e,M,Re,t)}}P||(P=new Ae);var B=P.get(e);if(B)return B;if(P.set(e,O),!j)var D=r?function(e){return function(e,t,r){var n=t(e);return Ke(e)?n:function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(n,r(e))}(e,Ye,Fe)}(e):Ye(e);return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r,e););}(D||e,function(i,a){D&&(i=e[a=i]),Pe(O,a,Re(i,t,r,n,a,e,P))}),O}function je(e){return!(!$e(e)||(t=e,Q&&Q in t))&&(We(e)||V(e)?te:P).test(Ve(e));var t}function Me(e){var t=new e.constructor(e.byteLength);return new ie(t).set(new ie(e)),t}function Ne(e,t,r,n){r||(r={});for(var i=-1,a=t.length;++i<a;){var o=t[i],s=n?n(r[o],e[o],o,r,e):void 0;Pe(r,o,void 0===s?e[o]:s)}return r}function Be(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function De(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return je(r)?r:void 0}Ce.prototype.clear=function(){this.__data__=ge?ge(null):{}},Ce.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ce.prototype.get=function(e){var t=this.__data__;if(ge){var r=t[e];return r===i?void 0:r}return X.call(t,e)?t[e]:void 0},Ce.prototype.has=function(e){var t=this.__data__;return ge?void 0!==t[e]:X.call(t,e)},Ce.prototype.set=function(e,t){return this.__data__[e]=ge&&void 0===t?i:t,this},ke.prototype.clear=function(){this.__data__=[]},ke.prototype.delete=function(e){var t=this.__data__,r=Oe(t,e);return!(r<0||(r==t.length-1?t.pop():ce.call(t,r,1),0))},ke.prototype.get=function(e){var t=this.__data__,r=Oe(t,e);return r<0?void 0:t[r][1]},ke.prototype.has=function(e){return Oe(this.__data__,e)>-1},ke.prototype.set=function(e,t){var r=this.__data__,n=Oe(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Te.prototype.clear=function(){this.__data__={hash:new Ce,map:new(de||ke),string:new Ce}},Te.prototype.delete=function(e){return Be(this,e).delete(e)},Te.prototype.get=function(e){return Be(this,e).get(e)},Te.prototype.has=function(e){return Be(this,e).has(e)},Te.prototype.set=function(e,t){return Be(this,e).set(e,t),this},Ae.prototype.clear=function(){this.__data__=new ke},Ae.prototype.delete=function(e){return this.__data__.delete(e)},Ae.prototype.get=function(e){return this.__data__.get(e)},Ae.prototype.has=function(e){return this.__data__.has(e)},Ae.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ke){var i=r.__data__;if(!de||i.length<n-1)return i.push([e,t]),this;r=this.__data__=new Te(i)}return r.set(e,t),this};var Fe=ue?K(ue,Object):function(){return[]},Le=function(e){return ee.call(e)};function Ue(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||O.test(e))&&e>-1&&e%1==0&&e<t}function ze(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Y)}function Ve(e){if(null!=e){try{return Z.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function qe(e,t){return e===t||e!=e&&t!=t}(pe&&Le(new pe(new ArrayBuffer(1)))!=b||de&&Le(new de)!=f||he&&"[object Promise]"!=Le(he.resolve())||ve&&Le(new ve)!=v||me&&"[object WeakMap]"!=Le(new me))&&(Le=function(e){var t=ee.call(e),r=t==d?e.constructor:void 0,n=r?Ve(r):void 0;if(n)switch(n){case ye:return b;case be:return f;case we:return"[object Promise]";case _e:return v;case Ee:return"[object WeakMap]"}return t});var Ke=Array.isArray;function Ge(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}(e.length)&&!We(e)}var He=le||function(){return!1};function We(e){var t=$e(e)?ee.call(e):"";return t==u||t==l}function $e(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ye(e){return Ge(e)?Ie(e):function(e){if(!ze(e))return fe(e);var t=[];for(var r in Object(e))X.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}t.exports=function(e){return Re(e,!1,!0)}}),kF="Expected a function",TF="__lodash_placeholder__",AF=1,IF=2,PF=4,OF=8,RF=16,jF=32,MF=64,NF=128,BF=512,DF=1/0,FF=9007199254740991,LF=1.7976931348623157e308,UF=NaN,zF=[["ary",NF],["bind",AF],["bindKey",IF],["curry",OF],["curryRight",RF],["flip",BF],["partial",jF],["partialRight",MF],["rearg",256]],VF="[object Function]",qF="[object GeneratorFunction]",KF="[object Symbol]",GF=/^\s+|\s+$/g,HF=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,WF=/\{\n\/\* \[wrapped with (.+)\] \*/,$F=/,? & /,YF=/^[-+]0x[0-9a-f]+$/i,JF=/^0b[01]+$/i,QF=/^\[object .+?Constructor\]$/,ZF=/^0o[0-7]+$/i,XF=/^(?:0|[1-9]\d*)$/,eL=parseInt,tL="object"==typeof e&&e&&e.Object===Object&&e,rL="object"==typeof self&&self&&self.Object===Object&&self,nL=tL||rL||Function("return this")();function iL(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function aL(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r,n){var i=e.length,a=r+(n?1:-1);for(;n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}(e,oL,r);var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function oL(e){return e!=e}function sL(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r];o!==t&&o!==TF||(e[r]=TF,a[i++]=r)}return a}var cL,uL,lL=Function.prototype,fL=Object.prototype,pL=nL["__core-js_shared__"],dL=function(){var e=/[^.]+$/.exec(pL&&pL.keys&&pL.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),hL=lL.toString,vL=fL.hasOwnProperty,mL=fL.toString,gL=RegExp("^"+hL.call(vL).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yL=Object.create,bL=Math.max,wL=Math.min,_L=(cL=AL(Object,"defineProperty"),(uL=AL.name)&&uL.length>2?cL:void 0);function EL(e){return!(!NL(e)||(t=e,dL&&dL in t))&&(function(e){var t=NL(e)?mL.call(e):"";return t==VF||t==qF}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?gL:QF).test(function(e){if(null!=e){try{return hL.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function SL(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r,n=NL(r=e.prototype)?yL(r):{},i=e.apply(n,t);return NL(i)?i:n}}function xL(e,t,r,n,i,a,o,s,c,u){var l=t&NF,f=t&AF,p=t&IF,d=t&(OF|RF),h=t&BF,v=p?void 0:SL(e);return function m(){for(var g=arguments.length,y=Array(g),b=g;b--;)y[b]=arguments[b];if(d)var w=TL(m),_=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&n++;return n}(y,w);if(n&&(y=function(e,t,r,n){for(var i=-1,a=e.length,o=r.length,s=-1,c=t.length,u=bL(a-o,0),l=Array(c+u),f=!n;++s<c;)l[s]=t[s];for(;++i<o;)(f||i<a)&&(l[r[i]]=e[i]);for(;u--;)l[s++]=e[i++];return l}(y,n,i,d)),a&&(y=function(e,t,r,n){for(var i=-1,a=e.length,o=-1,s=r.length,c=-1,u=t.length,l=bL(a-s,0),f=Array(l+u),p=!n;++i<l;)f[i]=e[i];for(var d=i;++c<u;)f[d+c]=t[c];for(;++o<s;)(p||i<a)&&(f[d+r[o]]=e[i++]);return f}(y,a,o,d)),g-=_,d&&g<u){var E=sL(y,w);return CL(e,t,xL,m.placeholder,r,y,E,s,c,u-g)}var S=f?r:this,x=p?S[e]:e;return g=y.length,s?y=function(e,t){for(var r=e.length,n=wL(t.length,r),i=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(e);n--;){var a=t[n];e[n]=OL(a,r)?i[a]:void 0}return e}(y,s):h&&g>1&&y.reverse(),l&&c<g&&(y.length=c),this&&this!==nL&&this instanceof m&&(x=v||SL(x)),x.apply(S,y)}}function CL(e,t,r,n,i,a,o,s,c,u){var l=t&OF;t|=l?jF:MF,(t&=~(l?MF:jF))&PF||(t&=~(AF|IF));var f=r(e,t,i,l?a:void 0,l?o:void 0,l?void 0:a,l?void 0:o,s,c,u);return f.placeholder=n,RL(f,e,t)}function kL(e,t,r,n,i,a,o,s){var c=t&IF;if(!c&&"function"!=typeof e)throw new TypeError(kF);var u=n?n.length:0;if(u||(t&=~(jF|MF),n=i=void 0),o=void 0===o?o:bL(DL(o),0),s=void 0===s?s:DL(s),u-=i?i.length:0,t&MF){var l=n,f=i;n=i=void 0}var p=[e,t,r,n,i,l,f,a,o,s];if(e=p[0],t=p[1],r=p[2],n=p[3],i=p[4],!(s=p[9]=null==p[9]?c?0:e.length:bL(p[9]-u,0))&&t&(OF|RF)&&(t&=~(OF|RF)),t&&t!=AF)d=t==OF||t==RF?function(e,t,r){var n=SL(e);return function i(){for(var a=arguments.length,o=Array(a),s=a,c=TL(i);s--;)o[s]=arguments[s];var u=a<3&&o[0]!==c&&o[a-1]!==c?[]:sL(o,c);return(a-=u.length)<r?CL(e,t,xL,i.placeholder,void 0,o,u,void 0,void 0,r-a):iL(this&&this!==nL&&this instanceof i?n:e,this,o)}}(e,t,s):t!=jF&&t!=(AF|jF)||i.length?xL.apply(void 0,p):function(e,t,r,n){var i=t&AF,a=SL(e);return function t(){for(var o=-1,s=arguments.length,c=-1,u=n.length,l=Array(u+s),f=this&&this!==nL&&this instanceof t?a:e;++c<u;)l[c]=n[c];for(;s--;)l[c++]=arguments[++o];return iL(f,i?r:this,l)}}(e,t,r,n);else var d=function(e,t,r){var n=t&AF,i=SL(e);return function t(){return(this&&this!==nL&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,r);return RL(d,e,t)}function TL(e){return e.placeholder}function AL(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return EL(r)?r:void 0}function IL(e){var t=e.match(WF);return t?t[1].split($F):[]}function PL(e,t){var r=t.length,n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(HF,"{\n/* [wrapped with "+t+"] */\n")}function OL(e,t){return!!(t=null==t?FF:t)&&("number"==typeof e||XF.test(e))&&e>-1&&e%1==0&&e<t}var RL=_L?function(e,t,r){var n,i=t+"";return _L(e,"toString",{configurable:!0,enumerable:!1,value:(n=PL(i,jL(IL(i),r)),function(){return n})})}:function(e){return e};function jL(e,t){return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r,e););}(zF,function(r){var n="_."+r[0];t&r[1]&&!aL(e,n)&&e.push(n)}),e.sort()}var ML=function(e,t){return t=bL(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,i=bL(r.length-t,0),a=Array(i);++n<i;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=a,iL(e,this,o)}}(function(e,t){var r=sL(t,TL(ML));return kL(e,MF,void 0,t,r)});function NL(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function BL(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&mL.call(e)==KF}(e))return UF;if(NL(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=NL(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(GF,"");var r=JF.test(e);return r||ZF.test(e)?eL(e.slice(2),r?2:8):YF.test(e)?UF:+e}(e))===DF||e===-DF?(e<0?-1:1)*LF:e==e?e:0:0===e?e:0}function DL(e){var t=BL(e),r=t%1;return t==t?r?t-r:t:0}ML.placeholder={};var FL,LL=ML,UL=n(function(t,r){var n=200,i="__lodash_hash_undefined__",a=800,o=16,s=9007199254740991,c="[object Arguments]",u="[object AsyncFunction]",l="[object Function]",f="[object GeneratorFunction]",p="[object Null]",d="[object Object]",h="[object Proxy]",v="[object Undefined]",m=/^\[object .+?Constructor\]$/,g=/^(?:0|[1-9]\d*)$/,y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y[c]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y[l]=y["[object Map]"]=y["[object Number]"]=y[d]=y["[object RegExp]"]=y["[object Set]"]=y["[object String]"]=y["[object WeakMap]"]=!1;var b="object"==typeof e&&e&&e.Object===Object&&e,w="object"==typeof self&&self&&self.Object===Object&&self,_=b||w||Function("return this")(),E=r&&!r.nodeType&&r,S=E&&t&&!t.nodeType&&t,x=S&&S.exports===E,C=x&&b.process,k=function(){try{return C&&C.binding&&C.binding("util")}catch(e){}}(),T=k&&k.isTypedArray;function A(e,t){return"__proto__"==t?void 0:e[t]}var I,P,O,R=Array.prototype,j=Function.prototype,M=Object.prototype,N=_["__core-js_shared__"],B=j.toString,D=M.hasOwnProperty,F=(I=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"",L=M.toString,U=B.call(Object),z=RegExp("^"+B.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=x?_.Buffer:void 0,q=_.Symbol,K=_.Uint8Array,G=V?V.allocUnsafe:void 0,H=(P=Object.getPrototypeOf,O=Object,function(e){return P(O(e))}),W=Object.create,$=M.propertyIsEnumerable,Y=R.splice,J=q?q.toStringTag:void 0,Q=function(){try{var e=Ee(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Z=V?V.isBuffer:void 0,X=Math.max,ee=Date.now,te=Ee(_,"Map"),re=Ee(Object,"create"),ne=function(){function e(){}return function(t){if(!je(t))return{};if(W)return W(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function ie(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ae(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function oe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function se(e){var t=this.__data__=new ae(e);this.size=t.size}function ce(e,t){var r=Ae(e),n=!r&&Te(e),i=!r&&!n&&Pe(e),a=!r&&!n&&!i&&Ne(e),o=r||n||i||a,s=o?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=s.length;for(var u in e)!t&&!D.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Se(u,c))||s.push(u);return s}function ue(e,t,r){(void 0===r||ke(e[t],r))&&(void 0!==r||t in e)||pe(e,t,r)}function le(e,t,r){var n=e[t];D.call(e,t)&&ke(n,r)&&(void 0!==r||t in e)||pe(e,t,r)}function fe(e,t){for(var r=e.length;r--;)if(ke(e[r][0],t))return r;return-1}function pe(e,t,r){"__proto__"==t&&Q?Q(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}ie.prototype.clear=function(){this.__data__=re?re(null):{},this.size=0},ie.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ie.prototype.get=function(e){var t=this.__data__;if(re){var r=t[e];return r===i?void 0:r}return D.call(t,e)?t[e]:void 0},ie.prototype.has=function(e){var t=this.__data__;return re?void 0!==t[e]:D.call(t,e)},ie.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=re&&void 0===t?i:t,this},ae.prototype.clear=function(){this.__data__=[],this.size=0},ae.prototype.delete=function(e){var t=this.__data__,r=fe(t,e);return!(r<0||(r==t.length-1?t.pop():Y.call(t,r,1),--this.size,0))},ae.prototype.get=function(e){var t=this.__data__,r=fe(t,e);return r<0?void 0:t[r][1]},ae.prototype.has=function(e){return fe(this.__data__,e)>-1},ae.prototype.set=function(e,t){var r=this.__data__,n=fe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},oe.prototype.clear=function(){this.size=0,this.__data__={hash:new ie,map:new(te||ae),string:new ie}},oe.prototype.delete=function(e){var t=_e(this,e).delete(e);return this.size-=t?1:0,t},oe.prototype.get=function(e){return _e(this,e).get(e)},oe.prototype.has=function(e){return _e(this,e).has(e)},oe.prototype.set=function(e,t){var r=_e(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},se.prototype.clear=function(){this.__data__=new ae,this.size=0},se.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},se.prototype.get=function(e){return this.__data__.get(e)},se.prototype.has=function(e){return this.__data__.has(e)},se.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ae){var i=r.__data__;if(!te||i.length<n-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new oe(i)}return r.set(e,t),this.size=r.size,this};var de,he=function(e,t,r){for(var n=-1,i=Object(e),a=r(e),o=a.length;o--;){var s=a[de?o:++n];if(!1===t(i[s],s,i))break}return e};function ve(e){return null==e?void 0===e?v:p:J&&J in Object(e)?function(e){var t=D.call(e,J),r=e[J];try{e[J]=void 0;var n=!0}catch(e){}var i=L.call(e);n&&(t?e[J]=r:delete e[J]);return i}(e):function(e){return L.call(e)}(e)}function me(e){return Me(e)&&ve(e)==c}function ge(e){return!(!je(e)||(t=e,F&&F in t))&&(Oe(e)?z:m).test(function(e){if(null!=e){try{return B.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function ye(e){if(!je(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=xe(e),r=[];for(var n in e)("constructor"!=n||!t&&D.call(e,n))&&r.push(n);return r}function be(e,t,r,n,i){e!==t&&he(t,function(a,o){if(je(a))i||(i=new se),function(e,t,r,n,i,a,o){var s=A(e,r),c=A(t,r),u=o.get(c);if(u)return void ue(e,r,u);var l=a?a(s,c,r+"",e,t,o):void 0,f=void 0===l;if(f){var p=Ae(c),h=!p&&Pe(c),v=!p&&!h&&Ne(c);l=c,p||h||v?Ae(s)?l=s:Me(w=s)&&Ie(w)?l=function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(s):h?(f=!1,l=function(e,t){if(t)return e.slice();var r=e.length,n=G?G(r):new e.constructor(r);return e.copy(n),n}(c,!0)):v?(f=!1,m=c,g=!0?(y=m.buffer,b=new y.constructor(y.byteLength),new K(b).set(new K(y)),b):m.buffer,l=new m.constructor(g,m.byteOffset,m.length)):l=[]:function(e){if(!Me(e)||ve(e)!=d)return!1;var t=H(e);if(null===t)return!0;var r=D.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&B.call(r)==U}(c)||Te(c)?(l=s,Te(s)?l=function(e){return function(e,t,r,n){var i=!r;r||(r={});var a=-1,o=t.length;for(;++a<o;){var s=t[a],c=n?n(r[s],e[s],s,r,e):void 0;void 0===c&&(c=e[s]),i?pe(r,s,c):le(r,s,c)}return r}(e,Be(e))}(s):(!je(s)||n&&Oe(s))&&(l=function(e){return"function"!=typeof e.constructor||xe(e)?{}:ne(H(e))}(c))):f=!1}var m,g,y,b;var w;f&&(o.set(c,l),i(l,c,n,a,o),o.delete(c));ue(e,r,l)}(e,t,o,r,be,n,i);else{var s=n?n(A(e,o),a,o+"",e,t,i):void 0;void 0===s&&(s=a),ue(e,o,s)}},Be)}function we(e,t){return Ce(function(e,t,r){return t=X(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=X(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}}(e,t,Le),e+"")}function _e(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function Ee(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return ge(r)?r:void 0}function Se(e,t){var r=typeof e;return!!(t=null==t?s:t)&&("number"==r||"symbol"!=r&&g.test(e))&&e>-1&&e%1==0&&e<t}function xe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||M)}var Ce=function(e){var t=0,r=0;return function(){var n=ee(),i=o-(n-r);if(r=n,i>0){if(++t>=a)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Q?function(e,t){return Q(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Le);function ke(e,t){return e===t||e!=e&&t!=t}var Te=me(function(){return arguments}())?me:function(e){return Me(e)&&D.call(e,"callee")&&!$.call(e,"callee")},Ae=Array.isArray;function Ie(e){return null!=e&&Re(e.length)&&!Oe(e)}var Pe=Z||function(){return!1};function Oe(e){if(!je(e))return!1;var t=ve(e);return t==l||t==f||t==u||t==h}function Re(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function je(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Me(e){return null!=e&&"object"==typeof e}var Ne=T?function(e){return function(t){return e(t)}}(T):function(e){return Me(e)&&Re(e.length)&&!!y[ve(e)]};function Be(e){return Ie(e)?ce(e,!0):ye(e)}var De,Fe=(De=function(e,t,r){be(e,t,r)},we(function(e,t){var r=-1,n=t.length,i=n>1?t[n-1]:void 0,a=n>2?t[2]:void 0;for(i=De.length>3&&"function"==typeof i?(n--,i):void 0,a&&function(e,t,r){if(!je(r))return!1;var n=typeof t;return!!("number"==n?Ie(r)&&Se(t,r.length):"string"==n&&t in r)&&ke(r[t],e)}(t[0],t[1],a)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var o=t[r];o&&De(e,o,r,i)}return e}));function Le(e){return e}t.exports=Fe}),zL=(FL=[],"undefined"!=typeof Uint8ClampedArray&&FL.push(Uint8ClampedArray),"undefined"!=typeof Uint8Array&&FL.push(Uint8Array),"undefined"!=typeof Uint16Array&&FL.push(Uint16Array),"undefined"!=typeof Uint32Array&&FL.push(Uint32Array),"undefined"!=typeof Float32Array&&FL.push(Float32Array),"undefined"!=typeof Float64Array&&FL.push(Float64Array),FL);var VL=LL(UL,function(e,t){if(Ug(t))t=new ig(t);else{var r=function(e){for(var t,r=0;!t&&zL.length>r;r++)e instanceof zL[r]&&(t=zL[r]);return t}(t);t=r?new r(t,t.byteOffset,t.byteLength):void 0}return t}),qL=200,KL="__lodash_hash_undefined__",GL="[object Function]",HL="[object GeneratorFunction]",WL=/^\[object .+?Constructor\]$/,$L="object"==typeof e&&e&&e.Object===Object&&e,YL="object"==typeof self&&self&&self.Object===Object&&self,JL=$L||YL||Function("return this")();function QL(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r,n){var i=e.length,a=r+(n?1:-1);for(;n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}(e,XL,r);var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function ZL(e,t,r){for(var n=-1,i=e?e.length:0;++n<i;)if(r(t,e[n]))return!0;return!1}function XL(e){return e!=e}function eU(e,t){return e.has(t)}function tU(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var rU=Array.prototype,nU=Function.prototype,iU=Object.prototype,aU=JL["__core-js_shared__"],oU=function(){var e=/[^.]+$/.exec(aU&&aU.keys&&aU.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),sU=nU.toString,cU=iU.hasOwnProperty,uU=iU.toString,lU=RegExp("^"+sU.call(cU).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fU=rU.splice,pU=SU(JL,"Map"),dU=SU(JL,"Set"),hU=SU(Object,"create");function vU(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function mU(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function gU(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function yU(e){var t=-1,r=e?e.length:0;for(this.__data__=new gU;++t<r;)this.add(e[t])}function bU(e,t){for(var r,n,i=e.length;i--;)if((r=e[i][0])===(n=t)||r!=r&&n!=n)return i;return-1}function wU(e){return!(!xU(e)||(t=e,oU&&oU in t))&&(function(e){var t=xU(e)?uU.call(e):"";return t==GL||t==HL}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?lU:WL).test(function(e){if(null!=e){try{return sU.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}vU.prototype.clear=function(){this.__data__=hU?hU(null):{}},vU.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},vU.prototype.get=function(e){var t=this.__data__;if(hU){var r=t[e];return r===KL?void 0:r}return cU.call(t,e)?t[e]:void 0},vU.prototype.has=function(e){var t=this.__data__;return hU?void 0!==t[e]:cU.call(t,e)},vU.prototype.set=function(e,t){return this.__data__[e]=hU&&void 0===t?KL:t,this},mU.prototype.clear=function(){this.__data__=[]},mU.prototype.delete=function(e){var t=this.__data__,r=bU(t,e);return!(r<0||(r==t.length-1?t.pop():fU.call(t,r,1),0))},mU.prototype.get=function(e){var t=this.__data__,r=bU(t,e);return r<0?void 0:t[r][1]},mU.prototype.has=function(e){return bU(this.__data__,e)>-1},mU.prototype.set=function(e,t){var r=this.__data__,n=bU(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},gU.prototype.clear=function(){this.__data__={hash:new vU,map:new(pU||mU),string:new vU}},gU.prototype.delete=function(e){return EU(this,e).delete(e)},gU.prototype.get=function(e){return EU(this,e).get(e)},gU.prototype.has=function(e){return EU(this,e).has(e)},gU.prototype.set=function(e,t){return EU(this,e).set(e,t),this},yU.prototype.add=yU.prototype.push=function(e){return this.__data__.set(e,KL),this},yU.prototype.has=function(e){return this.__data__.has(e)};var _U=dU&&1/tU(new dU([,-0]))[1]==1/0?function(e){return new dU(e)}:function(){};function EU(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function SU(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return wU(r)?r:void 0}function xU(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var CU=function(e){return e&&e.length?function(e,t,r){var n=-1,i=QL,a=e.length,o=!0,s=[],c=s;if(r)o=!1,i=ZL;else if(a>=qL){var u=t?null:_U(e);if(u)return tU(u);o=!1,i=eU,c=new yU}else c=t?[]:s;e:for(;++n<a;){var l=e[n],f=t?t(l):l;if(l=r||0!==l?l:0,o&&f==f){for(var p=c.length;p--;)if(c[p]===f)continue e;t&&c.push(f),s.push(l)}else i(c,f,r)||(c!==s&&c.push(f),s.push(l))}return s}(e):[]},kU={options:{usePureJavaScript:!1}},TU={},AU=TU,IU={};TU.encode=function(e,t,r){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var i=0,a=t.length,o=t.charAt(0),s=[0];for(i=0;i<e.length;++i){for(var c=0,u=e[i];c<s.length;++c)u+=s[c]<<8,s[c]=u%a,u=u/a|0;for(;u>0;)s.push(u%a),u=u/a|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=o;for(i=s.length-1;i>=0;--i)n+=t[s[i]]}else n=function(e,t){var r=0,n=t.length,i=t.charAt(0),a=[0];for(r=0;r<e.length();++r){for(var o=0,s=e.at(r);o<a.length;++o)s+=a[o]<<8,a[o]=s%n,s=s/n|0;for(;s>0;)a.push(s%n),s=s/n|0}var c="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)c+=i;for(r=a.length-1;r>=0;--r)c+=t[a[r]];return c}(e,t);if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join("\r\n")}return n},TU.decode=function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');var r=IU[t];if(!r){r=IU[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");var i=t.length,a=t.charAt(0),o=[0];for(n=0;n<e.length;n++){var s=r[e.charCodeAt(n)];if(void 0===s)return;for(var c=0,u=s;c<o.length;++c)u+=o[c]*i,o[c]=255&u,u>>=8;for(;u>0;)o.push(255&u),u>>=8}for(var l=0;e[l]===a&&l<e.length-1;++l)o.push(0);return ig.from(o.reverse())};n(function(e){var t=e.exports=kU.util=kU.util||{};function r(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function n(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(t.isArrayBuffer(e)||t.isArrayBufferView(e))if(e instanceof ig)this.data=e.toString("binary");else{var r=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,r)}catch(e){for(var i=0;i<r.length;++i)this.putByte(r[i])}}else(e instanceof n||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if("function"==typeof setImmediate)return t.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(t.nextTick=function(e){return setImmediate(e)});if(t.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",r=[];t.setImmediate=function(t){r.push(t),1===r.length&&window.postMessage(e,"*")},window.addEventListener("message",function(t){if(t.source===window&&t.data===e){t.stopPropagation();var n=r.slice();r.length=0,n.forEach(function(e){e()})}},!0)}if("undefined"!=typeof MutationObserver){var n=Date.now(),i=!0,a=document.createElement("div");r=[];new MutationObserver(function(){var e=r.slice();r.length=0,e.forEach(function(e){e()})}).observe(a,{attributes:!0});var o=t.setImmediate;t.setImmediate=function(e){Date.now()-n>15?(n=Date.now(),o(e)):(r.push(e),1===r.length&&a.setAttribute("a",i=!i))}}t.nextTick=t.setImmediate}(),t.isNodejs=void 0!==Tc&&Tc.versions&&Tc.versions.node,t.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},t.isArrayBufferView=function(e){return e&&t.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},t.ByteBuffer=n,t.ByteStringBuffer=n;t.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},t.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},t.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},t.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},t.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},t.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},t.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(t.encodeUtf8(e))},t.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},t.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},t.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},t.ByteStringBuffer.prototype.putInt=function(e,t){r(t);var n="";do{t-=8,n+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(n)},t.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},t.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},t.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},t.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},t.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},t.ByteStringBuffer.prototype.getInt=function(e){r(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},t.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},t.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},t.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},t.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},t.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},t.ByteStringBuffer.prototype.copy=function(){var e=t.createBuffer(this.data);return e.read=this.read,e},t.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},t.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},t.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},t.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},t.ByteStringBuffer.prototype.toString=function(){return t.decodeUtf8(this.bytes())},t.DataBuffer=function(e,r){r=r||{},this.read=r.readOffset||0,this.growSize=r.growSize||1024;var n=t.isArrayBuffer(e),i=t.isArrayBufferView(e);if(n||i)return this.data=n?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in r?r.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in r&&(this.write=r.writeOffset)},t.DataBuffer.prototype.length=function(){return this.write-this.read},t.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},t.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},t.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},t.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},t.DataBuffer.prototype.putBytes=function(e,r){if(t.isArrayBufferView(e)){var n=(i=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-i.byteOffset;return this.accommodate(n),new Uint8Array(this.data.buffer,this.write).set(i),this.write+=n,this}if(t.isArrayBuffer(e)){var i=new Uint8Array(e);return this.accommodate(i.byteLength),new Uint8Array(this.data.buffer).set(i,this.write),this.write+=i.byteLength,this}if(e instanceof t.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&t.isArrayBufferView(e.data)){i=new Uint8Array(e.data.byteLength,e.read,e.length());return this.accommodate(i.byteLength),new Uint8Array(e.data.byteLength,this.write).set(i),this.write+=i.byteLength,this}if(e instanceof t.ByteStringBuffer&&(e=e.data,r="binary"),r=r||"binary","string"==typeof e){var a;if("hex"===r)return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.hex.decode(e,a,this.write),this;if("base64"===r)return this.accommodate(3*Math.ceil(e.length/4)),a=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.base64.decode(e,a,this.write),this;if("utf8"===r&&(e=t.encodeUtf8(e),r="binary"),"binary"===r||"raw"===r)return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.raw.decode(a),this;if("utf16"===r)return this.accommodate(2*e.length),a=new Uint16Array(this.data.buffer,this.write),this.write+=t.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+r)}throw Error("Invalid parameter: "+e)},t.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},t.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},t.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},t.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},t.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},t.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},t.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},t.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},t.DataBuffer.prototype.putInt=function(e,t){r(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},t.DataBuffer.prototype.putSignedInt=function(e,t){return r(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},t.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},t.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},t.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},t.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},t.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},t.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},t.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},t.DataBuffer.prototype.getInt=function(e){r(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},t.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},t.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},t.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},t.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},t.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},t.DataBuffer.prototype.copy=function(){return new t.DataBuffer(this)},t.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},t.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},t.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},t.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},t.DataBuffer.prototype.toString=function(e){var r=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return t.binary.raw.encode(r);if("hex"===e)return t.binary.hex.encode(r);if("base64"===e)return t.binary.base64.encode(r);if("utf8"===e)return t.text.utf8.decode(r);if("utf16"===e)return t.text.utf16.decode(r);throw new Error("Invalid encoding: "+e)},t.createBuffer=function(e,r){return r=r||"raw",void 0!==e&&"utf8"===r&&(e=t.encodeUtf8(e)),new t.ByteBuffer(e)},t.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},t.xorBytes=function(e,t,r){for(var n="",i="",a="",o=0,s=0;r>0;--r,++o)i=e.charCodeAt(o)^t.charCodeAt(o),s>=10&&(n+=a,a="",s=0),a+=String.fromCharCode(i),++s;return n+=a},t.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},t.bytesToHex=function(e){return t.createBuffer(e).toHex()},t.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],o="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";t.encode64=function(e,t){for(var r,n,a,o="",s="",c=0;c<e.length;)r=e.charCodeAt(c++),n=e.charCodeAt(c++),a=e.charCodeAt(c++),o+=i.charAt(r>>2),o+=i.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=i.charAt((15&n)<<2|a>>6),o+=isNaN(a)?"=":i.charAt(63&a)),t&&o.length>t&&(s+=o.substr(0,t)+"\r\n",o=o.substr(t));return s+=o},t.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,i,o="",s=0;s<e.length;)t=a[e.charCodeAt(s++)-43],r=a[e.charCodeAt(s++)-43],n=a[e.charCodeAt(s++)-43],i=a[e.charCodeAt(s++)-43],o+=String.fromCharCode(t<<2|r>>4),64!==n&&(o+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(o+=String.fromCharCode((3&n)<<6|i)));return o},t.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},t.decodeUtf8=function(e){return decodeURIComponent(escape(e))},t.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:AU.encode,decode:AU.decode}},t.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},t.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n},t.binary.hex.encode=t.bytesToHex,t.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var i=0,a=r=r||0;for(1&e.length&&(i=1,n[a++]=parseInt(e[0],16));i<e.length;i+=2)n[a++]=parseInt(e.substr(i,2),16);return t?a-r:n},t.binary.base64.encode=function(e,t){for(var r,n,a,o="",s="",c=0;c<e.byteLength;)r=e[c++],n=e[c++],a=e[c++],o+=i.charAt(r>>2),o+=i.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=i.charAt((15&n)<<2|a>>6),o+=isNaN(a)?"=":i.charAt(63&a)),t&&o.length>t&&(s+=o.substr(0,t)+"\r\n",o=o.substr(t));return s+=o},t.binary.base64.decode=function(e,t,r){var n,i,o,s,c=t;c||(c=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,l=r=r||0;u<e.length;)n=a[e.charCodeAt(u++)-43],i=a[e.charCodeAt(u++)-43],o=a[e.charCodeAt(u++)-43],s=a[e.charCodeAt(u++)-43],c[l++]=n<<2|i>>4,64!==o&&(c[l++]=(15&i)<<4|o>>2,64!==s&&(c[l++]=(3&o)<<6|s));return t?l-r:c.subarray(0,l)},t.binary.base58.encode=function(e,r){return t.binary.baseN.encode(e,o,r)},t.binary.base58.decode=function(e,r){return t.binary.baseN.decode(e,o,r)},t.text={utf8:{},utf16:{}},t.text.utf8.encode=function(e,r,n){e=t.encodeUtf8(e);var i=r;i||(i=new Uint8Array(e.length));for(var a=n=n||0,o=0;o<e.length;++o)i[a++]=e.charCodeAt(o);return r?a-n:i},t.text.utf8.decode=function(e){return t.decodeUtf8(String.fromCharCode.apply(null,e))},t.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var i=new Uint16Array(n.buffer),a=r=r||0,o=r,s=0;s<e.length;++s)i[o++]=e.charCodeAt(s),a+=2;return t?a-r:n},t.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},t.deflate=function(e,r,n){if(r=t.decode64(e.deflate(t.encode64(r)).rval),n){var i=2;32&r.charCodeAt(1)&&(i=6),r=r.substring(i,r.length-4)}return r},t.inflate=function(e,r,n){var i=e.inflate(t.encode64(r)).rval;return null===i?null:t.decode64(i)};var s=function(e,r,n){if(!e)throw new Error("WebStorage not available.");var i;if(null===n?i=e.removeItem(r):(n=t.encode64(JSON.stringify(n)),i=e.setItem(r,n)),void 0!==i&&!0!==i.rval){var a=new Error(i.error.message);throw a.id=i.error.id,a.name=i.error.name,a}},c=function(e,r){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(r);if(e.init)if(null===n.rval){if(n.error){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(t.decode64(n))),n},u=function(e,t,r,n){var i=c(e,t);null===i&&(i={}),i[r]=n,s(e,t,i)},l=function(e,t,r){var n=c(e,t);return null!==n&&(n=r in n?n[r]:null),n},f=function(e,t,r){var n=c(e,t);if(null!==n&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),s(e,t,n)}},p=function(e,t){s(e,t,null)},d=function(e,t,r){var n,i=null;void 0===r&&(r=["web","flash"]);var a=!1,o=null;for(var s in r){n=r[s];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");i=e.apply(this,t),a="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,i=e.apply(this,t),a=!0)}catch(e){o=e}if(a)break}if(!a)throw o;return i};t.setItem=function(e,t,r,n,i){d(u,arguments,i)},t.getItem=function(e,t,r,n){return d(l,arguments,n)},t.removeItem=function(e,t,r,n){d(f,arguments,n)},t.clearItems=function(e,t,r){d(p,arguments,r)},t.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var r=t.exec(e),n=null===r?null:{full:e,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?80!==n.port&&"http"===n.scheme?n.fullHost+=":"+n.port:443!==n.port&&"https"===n.scheme&&(n.fullHost+=":"+n.port):"http"===n.scheme?n.port=80:"https"===n.scheme&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var h=null;t.getQueryVariables=function(e){var t,r=function(e){for(var t={},r=e.split("&"),n=0;n<r.length;n++){var i,a,o=r[n].indexOf("=");o>0?(i=r[n].substring(0,o),a=r[n].substring(o+1)):(i=r[n],a=null),i in t||(t[i]=[]),i in Object.prototype||null===a||t[i].push(unescape(a))}return t};return void 0===e?(null===h&&(h="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),t=h):t=r(e),t},t.parseFragment=function(e){var r=e,n="",i=e.indexOf("?");i>0&&(r=e.substring(0,i),n=e.substring(i+1));var a=r.split("/");return a.length>0&&""===a[0]&&a.shift(),{pathString:r,queryString:n,path:a,query:""===n?{}:t.getQueryVariables(n)}},t.makeRequest=function(e){var r=t.parseFragment(e),n={path:r.pathString,query:r.queryString,getPath:function(e){return void 0===e?r.path:r.path[e]},getQuery:function(e,t){var n;return void 0===e?n=r.query:(n=r.query[e])&&void 0!==t&&(n=n[t]),n},getQueryLast:function(e,t){var r=n.getQuery(e);return r?r[r.length-1]:t}};return n},t.makeLink=function(e,t,r){e=jQuery.isArray(e)?e.join("/"):e;var n=jQuery.param(t||{});return r=r||"",e+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")},t.setPath=function(e,t,r){if("object"==typeof e&&null!==e)for(var n=0,i=t.length;n<i;){var a=t[n++];if(n==i)e[a]=r;else{var o=a in e;(!o||o&&"object"!=typeof e[a]||o&&null===e[a])&&(e[a]={}),e=e[a]}}},t.getPath=function(e,t,r){for(var n=0,i=t.length,a=!0;a&&n<i&&"object"==typeof e&&null!==e;){var o=t[n++];(a=o in e)&&(e=e[o])}return a?e:r},t.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var r=0,n=t.length;r<n;){var i=t[r++];if(r==n)delete e[i];else{if(!(i in e)||"object"!=typeof e[i]||null===e[i])break;e=e[i]}}},t.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.format=function(e){for(var t,r,n=/%./g,i=0,a=[],o=0;t=n.exec(e);){(r=e.substring(o,n.lastIndex-2)).length>0&&a.push(r),o=n.lastIndex;var s=t[0][1];switch(s){case"s":case"o":i<arguments.length?a.push(arguments[1+i++]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+s+"?>")}}return a.push(e.substring(o)),a.join("")},t.formatNumber=function(e,t,r,n){var i=e,a=isNaN(t=Math.abs(t))?2:t,o=void 0===r?",":r,s=void 0===n?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+s:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)+(a?o+Math.abs(i-u).toFixed(a).slice(2):"")},t.formatSize=function(e){return e=e>=1073741824?t.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?t.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?t.formatNumber(e/1024,0)+" KiB":t.formatNumber(e,0)+" bytes"},t.bytesFromIP=function(e){return-1!==e.indexOf(".")?t.bytesFromIPv4(e):-1!==e.indexOf(":")?t.bytesFromIPv6(e):null},t.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var r=t.createBuffer(),n=0;n<e.length;++n){var i=parseInt(e[n],10);if(isNaN(i))return null;r.putByte(i)}return r.getBytes()},t.bytesFromIPv6=function(e){for(var r=0,n=2*(8-(e=e.split(":").filter(function(e){return 0===e.length&&++r,!0})).length+r),i=t.createBuffer(),a=0;a<8;++a)if(e[a]&&0!==e[a].length){var o=t.hexToBytes(e[a]);o.length<2&&i.putByte(0),i.putBytes(o)}else i.fillWithByte(0,n),n=0;return i.getBytes()},t.bytesToIP=function(e){return 4===e.length?t.bytesToIPv4(e):16===e.length?t.bytesToIPv6(e):null},t.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},t.bytesToIPv6=function(e){if(16!==e.length)return null;for(var r=[],n=[],i=0,a=0;a<e.length;a+=2){for(var o=t.bytesToHex(e[a]+e[a+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var s=n[n.length-1],c=r.length;s&&c===s.end+1?(s.end=c,s.end-s.start>n[i].end-n[i].start&&(i=n.length-1)):n.push({start:c,end:c})}r.push(o)}if(n.length>0){var u=n[i];u.end-u.start>0&&(r.splice(u.start,u.end-u.start+1,""),0===u.start&&r.unshift(""),7===u.end&&r.push(""))}return r.join(":")},t.estimateCores=function(e,r){if("function"==typeof e&&(r=e,e={}),e=e||{},"cores"in t&&!e.update)return r(null,t.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return t.cores=navigator.hardwareConcurrency,r(null,t.cores);if("undefined"==typeof Worker)return t.cores=1,r(null,t.cores);if("undefined"==typeof Blob)return t.cores=2,r(null,t.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){var t=Date.now(),r=t+4;self.postMessage({st:t,et:r})})}.toString(),")()"],{type:"application/javascript"}));!function e(i,a,o){if(0===a){var s=Math.floor(i.reduce(function(e,t){return e+t},0)/i.length);return t.cores=Math.max(1,s),URL.revokeObjectURL(n),r(null,t.cores)}!function(e,t){for(var r=[],i=[],a=0;a<e;++a){var o=new Worker(n);o.addEventListener("message",function(n){if(i.push(n.data),i.length===e){for(var a=0;a<e;++a)r[a].terminate();t(null,i)}}),r.push(o)}for(var a=0;a<e;++a)r[a].postMessage(a)}(o,function(t,r){i.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var i=t[n],a=r[n]=[],o=0;o<e;++o)if(n!==o){var s=t[o];(i.st>s.st&&i.st<s.et||s.st>i.st&&s.st<i.et)&&a.push(o)}return r.reduce(function(e,t){return Math.max(e,t.length)},0)}(o,r)),e(i,a-1,o)})}([],5,16)}}),kU.cipher=kU.cipher||{};kU.cipher.algorithms=kU.cipher.algorithms||{},kU.cipher.createCipher=function(e,t){var r=e;if("string"==typeof r&&(r=kU.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new kU.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},kU.cipher.createDecipher=function(e,t){var r=e;if("string"==typeof r&&(r=kU.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new kU.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},kU.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),kU.cipher.algorithms[e]=t},kU.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in kU.cipher.algorithms?kU.cipher.algorithms[e]:null};var PU=kU.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};PU.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=kU.util.createBuffer(),this.output=e.output||kU.util.createBuffer(),this.mode.start(t)},PU.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},PU.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))};n(function(e){kU.cipher=kU.cipher||{};var t=e.exports=kU.cipher.modes=kU.cipher.modes||{};function r(e){if("string"==typeof e&&(e=kU.util.createBuffer(e)),kU.util.isArray(e)&&e.length>4){var t=e;e=kU.util.createBuffer();for(var r=0;r<t.length;++r)e.putByte(t[r])}return kU.util.isArray(e)||(e=[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]),e}function n(e){e[e.length-1]=e[e.length-1]+1&4294967295}function i(e){return[e/4294967296|0,4294967295&e]}t.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.ecb.prototype.start=function(e){},t.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},t.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},t.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},t.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},t.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv),this._prev=this._iv.slice(0)}},t.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},t.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},t.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},t.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},t.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=kU.util.createBuffer(),this._partialBytes=0},t.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},t.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},t.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=kU.util.createBuffer(),this._partialBytes=0},t.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},t.ofb.prototype.decrypt=t.ofb.prototype.encrypt,t.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=kU.util.createBuffer(),this._partialBytes=0},t.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ctr.prototype.encrypt=function(e,t,r){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]);else{var o=(this.blockSize-i)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(o>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}n(this._inBlock)},t.ctr.prototype.decrypt=t.ctr.prototype.encrypt,t.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=kU.util.createBuffer(),this._partialBytes=0,this._R=3774873600},t.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=kU.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?kU.util.createBuffer(e.additionalData):kU.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=kU.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=r.length();if(12===a)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(i(8*a)))}this._inBlock=this._j0.slice(0),n(this._inBlock),this._partialBytes=0,t=kU.util.createBuffer(t),this._aDataLength=i(8*t.length());var o=t.length()%this.blockSize;for(o&&t.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},t.gcm.prototype.encrypt=function(e,t,r){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize){for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^=e.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-i)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(0===o||r){if(r){var s=i%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(a=0;a<this._ints;++a)this._outBlock[a]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),n(this._inBlock)},t.gcm.prototype.decrypt=function(e,t,r){var i=e.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),n(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^this._hashBlock[a]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize},t.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=kU.util.createBuffer();var n=this._aDataLength.concat(i(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,n);var a=[];this.cipher.encrypt(this._j0,a);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^a[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},t.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){e[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},t.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},t.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,i=this._m[r][n];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t},t.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},t.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,a=new Array(i),o=0;o<i;++o){var s=[0,0,0,0],c=(n-1-o%n)*t;s[o/n|0]=1<<t-1<<c,a[o]=this.generateSubHashTable(this.multiply(s,e),t)}return a},t.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var o=1;o<a;++o){var s=i[a],c=i[o];i[a+o]=[s[0]^c[0],s[1]^c[1],s[2]^c[2],s[3]^c[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var u=i[a^n];i[a]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return i}}),kU.aes=kU.aes||{};function OU(e,t){kU.cipher.registerAlgorithm(e,function(){return new kU.aes.Algorithm(e,t)})}kU.aes.startEncrypting=function(e,t,r,n){var i=VU({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i},kU.aes.createEncryptionCipher=function(e,t){return VU({key:e,output:null,decrypt:!1,mode:t})},kU.aes.startDecrypting=function(e,t,r,n){var i=VU({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i},kU.aes.createDecryptionCipher=function(e,t){return VU({key:e,output:null,decrypt:!0,mode:t})},kU.aes.Algorithm=function(e,t){DU||LU();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return zU(r._w,e,t,!1)},decrypt:function(e,t){return zU(r._w,e,t,!0)}}}),r._init=!1},kU.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(kU.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){t=r,r=kU.util.createBuffer();for(var n=0;n<t.length;++n)r.putByte(t[n])}}else r=kU.util.createBuffer(r);if(!kU.util.isArray(r)){t=r,r=[];var i=t.length();if(16===i||24===i||32===i){i>>>=2;for(n=0;n<i;++n)r.push(t.getInt32())}}if(!kU.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var a=this.mode.name,o=-1!==["CFB","OFB","CTR","GCM"].indexOf(a);this._w=UU(r,e.decrypt&&!o),this._init=!0}},kU.aes._expandKey=function(e,t){return DU||LU(),UU(e,t)},kU.aes._updateBlock=zU,OU("AES-ECB",kU.cipher.modes.ecb),OU("AES-CBC",kU.cipher.modes.cbc),OU("AES-CFB",kU.cipher.modes.cfb),OU("AES-OFB",kU.cipher.modes.ofb),OU("AES-CTR",kU.cipher.modes.ctr),OU("AES-GCM",kU.cipher.modes.gcm);var RU,jU,MU,NU,BU,DU=!1,FU=4;function LU(){DU=!0,MU=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;RU=new Array(256),jU=new Array(256),NU=new Array(4),BU=new Array(4);for(t=0;t<4;++t)NU[t]=new Array(256),BU[t]=new Array(256);var r,n,i,a,o,s,c,u=0,l=0;for(t=0;t<256;++t){a=(a=l^l<<1^l<<2^l<<3^l<<4)>>8^255&a^99,RU[u]=a,jU[a]=u,s=(o=e[a])<<24^a<<16^a<<8^a^o,c=((r=e[u])^(n=e[r])^(i=e[n]))<<24^(u^i)<<16^(u^n^i)<<8^u^r^i;for(var f=0;f<4;++f)NU[f][u]=s,BU[f][a]=c,s=s<<24|s>>>8,c=c<<24|c>>>8;0===u?u=l=1:(u=r^e[e[e[r^i]]],l^=e[e[l]])}}function UU(e,t){for(var r,n=e.slice(0),i=1,a=n.length,o=FU*(a+6+1),s=a;s<o;++s)r=n[s-1],s%a==0?(r=RU[r>>>16&255]<<24^RU[r>>>8&255]<<16^RU[255&r]<<8^RU[r>>>24]^MU[i]<<24,i++):a>6&&s%a==4&&(r=RU[r>>>24]<<24^RU[r>>>16&255]<<16^RU[r>>>8&255]<<8^RU[255&r]),n[s]=n[s-a]^r;if(t){for(var c,u=BU[0],l=BU[1],f=BU[2],p=BU[3],d=n.slice(0),h=(s=0,(o=n.length)-FU);s<o;s+=FU,h-=FU)if(0===s||s===o-FU)d[s]=n[h],d[s+1]=n[h+3],d[s+2]=n[h+2],d[s+3]=n[h+1];else for(var v=0;v<FU;++v)c=n[h+v],d[s+(3&-v)]=u[RU[c>>>24]]^l[RU[c>>>16&255]]^f[RU[c>>>8&255]]^p[RU[255&c]];n=d}return n}function zU(e,t,r,n){var i,a,o,s,c,u,l,f,p,d,h,v,m=e.length/4-1;n?(i=BU[0],a=BU[1],o=BU[2],s=BU[3],c=jU):(i=NU[0],a=NU[1],o=NU[2],s=NU[3],c=RU),u=t[0]^e[0],l=t[n?3:1]^e[1],f=t[2]^e[2],p=t[n?1:3]^e[3];for(var g=3,y=1;y<m;++y)d=i[u>>>24]^a[l>>>16&255]^o[f>>>8&255]^s[255&p]^e[++g],h=i[l>>>24]^a[f>>>16&255]^o[p>>>8&255]^s[255&u]^e[++g],v=i[f>>>24]^a[p>>>16&255]^o[u>>>8&255]^s[255&l]^e[++g],p=i[p>>>24]^a[u>>>16&255]^o[l>>>8&255]^s[255&f]^e[++g],u=d,l=h,f=v;r[0]=c[u>>>24]<<24^c[l>>>16&255]<<16^c[f>>>8&255]<<8^c[255&p]^e[++g],r[n?3:1]=c[l>>>24]<<24^c[f>>>16&255]<<16^c[p>>>8&255]<<8^c[255&u]^e[++g],r[2]=c[f>>>24]<<24^c[p>>>16&255]<<16^c[u>>>8&255]<<8^c[255&l]^e[++g],r[n?1:3]=c[p>>>24]<<24^c[u>>>16&255]<<16^c[l>>>8&255]<<8^c[255&f]^e[++g]}function VU(e){var t,r="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),n=(t=e.decrypt?kU.cipher.createDecipher(r,e.key):kU.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var i=null;r instanceof kU.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=e,n.call(t,r)},t}n(function(e){kU.pki=kU.pki||{};var t=e.exports=kU.pki.oids=kU.oids=kU.oids||{};function r(e,r){t[e]=r,t[r]=e}function n(e,r){t[e]=r}r("1.2.840.113549.1.1.1","rsaEncryption"),r("1.2.840.113549.1.1.4","md5WithRSAEncryption"),r("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),r("1.2.840.113549.1.1.7","RSAES-OAEP"),r("1.2.840.113549.1.1.8","mgf1"),r("1.2.840.113549.1.1.9","pSpecified"),r("1.2.840.113549.1.1.10","RSASSA-PSS"),r("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),r("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),r("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),r("1.2.840.10040.4.3","dsa-with-sha1"),r("1.3.14.3.2.7","desCBC"),r("1.3.14.3.2.26","sha1"),r("2.16.840.1.101.3.4.2.1","sha256"),r("2.16.840.1.101.3.4.2.2","sha384"),r("2.16.840.1.101.3.4.2.3","sha512"),r("1.2.840.113549.2.5","md5"),r("1.2.840.113549.1.7.1","data"),r("1.2.840.113549.1.7.2","signedData"),r("1.2.840.113549.1.7.3","envelopedData"),r("1.2.840.113549.1.7.4","signedAndEnvelopedData"),r("1.2.840.113549.1.7.5","digestedData"),r("1.2.840.113549.1.7.6","encryptedData"),r("1.2.840.113549.1.9.1","emailAddress"),r("1.2.840.113549.1.9.2","unstructuredName"),r("1.2.840.113549.1.9.3","contentType"),r("1.2.840.113549.1.9.4","messageDigest"),r("1.2.840.113549.1.9.5","signingTime"),r("1.2.840.113549.1.9.6","counterSignature"),r("1.2.840.113549.1.9.7","challengePassword"),r("1.2.840.113549.1.9.8","unstructuredAddress"),r("1.2.840.113549.1.9.14","extensionRequest"),r("1.2.840.113549.1.9.20","friendlyName"),r("1.2.840.113549.1.9.21","localKeyId"),r("1.2.840.113549.1.9.22.1","x509Certificate"),r("1.2.840.113549.1.12.10.1.1","keyBag"),r("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),r("1.2.840.113549.1.12.10.1.3","certBag"),r("1.2.840.113549.1.12.10.1.4","crlBag"),r("1.2.840.113549.1.12.10.1.5","secretBag"),r("1.2.840.113549.1.12.10.1.6","safeContentsBag"),r("1.2.840.113549.1.5.13","pkcs5PBES2"),r("1.2.840.113549.1.5.12","pkcs5PBKDF2"),r("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),r("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),r("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),r("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),r("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),r("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),r("1.2.840.113549.2.7","hmacWithSHA1"),r("1.2.840.113549.2.8","hmacWithSHA224"),r("1.2.840.113549.2.9","hmacWithSHA256"),r("1.2.840.113549.2.10","hmacWithSHA384"),r("1.2.840.113549.2.11","hmacWithSHA512"),r("1.2.840.113549.3.7","des-EDE3-CBC"),r("2.16.840.1.101.3.4.1.2","aes128-CBC"),r("2.16.840.1.101.3.4.1.22","aes192-CBC"),r("2.16.840.1.101.3.4.1.42","aes256-CBC"),r("2.5.4.3","commonName"),r("2.5.4.5","serialName"),r("2.5.4.6","countryName"),r("2.5.4.7","localityName"),r("2.5.4.8","stateOrProvinceName"),r("2.5.4.10","organizationName"),r("2.5.4.11","organizationalUnitName"),r("2.16.840.1.113730.1.1","nsCertType"),n("2.5.29.1","authorityKeyIdentifier"),n("2.5.29.2","keyAttributes"),n("2.5.29.3","certificatePolicies"),n("2.5.29.4","keyUsageRestriction"),n("2.5.29.5","policyMapping"),n("2.5.29.6","subtreesConstraint"),n("2.5.29.7","subjectAltName"),n("2.5.29.8","issuerAltName"),n("2.5.29.9","subjectDirectoryAttributes"),n("2.5.29.10","basicConstraints"),n("2.5.29.11","nameConstraints"),n("2.5.29.12","policyConstraints"),n("2.5.29.13","basicConstraints"),r("2.5.29.14","subjectKeyIdentifier"),r("2.5.29.15","keyUsage"),n("2.5.29.16","privateKeyUsagePeriod"),r("2.5.29.17","subjectAltName"),r("2.5.29.18","issuerAltName"),r("2.5.29.19","basicConstraints"),n("2.5.29.20","cRLNumber"),n("2.5.29.21","cRLReason"),n("2.5.29.22","expirationDate"),n("2.5.29.23","instructionCode"),n("2.5.29.24","invalidityDate"),n("2.5.29.25","cRLDistributionPoints"),n("2.5.29.26","issuingDistributionPoint"),n("2.5.29.27","deltaCRLIndicator"),n("2.5.29.28","issuingDistributionPoint"),n("2.5.29.29","certificateIssuer"),n("2.5.29.30","nameConstraints"),r("2.5.29.31","cRLDistributionPoints"),r("2.5.29.32","certificatePolicies"),n("2.5.29.33","policyMappings"),n("2.5.29.34","policyConstraints"),r("2.5.29.35","authorityKeyIdentifier"),n("2.5.29.36","policyConstraints"),r("2.5.29.37","extKeyUsage"),n("2.5.29.46","freshestCRL"),n("2.5.29.54","inhibitAnyPolicy"),r("1.3.6.1.4.1.11129.2.4.2","timestampList"),r("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),r("1.3.6.1.5.5.7.3.1","serverAuth"),r("1.3.6.1.5.5.7.3.2","clientAuth"),r("1.3.6.1.5.5.7.3.3","codeSigning"),r("1.3.6.1.5.5.7.3.4","emailProtection"),r("1.3.6.1.5.5.7.3.8","timeStamping")}),n(function(e){var t=e.exports=kU.asn1=kU.asn1||{};function r(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(e,r,n,i,a){if(kU.util.isArray(i)){for(var o=[],s=0;s<i.length;++s)void 0!==i[s]&&o.push(i[s]);i=o}var c={tagClass:e,type:r,constructed:n,composed:n||kU.util.isArray(i),value:i};return a&&"bitStringContents"in a&&(c.bitStringContents=a.bitStringContents,c.original=t.copy(c)),c},t.copy=function(e,r){var n;if(kU.util.isArray(e)){n=[];for(var i=0;i<e.length;++i)n.push(t.copy(e[i],r));return n}return"string"==typeof e?e:(n={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:t.copy(e.value,r)},r&&!r.excludeBitStringContents&&(n.bitStringContents=e.bitStringContents),n)},t.equals=function(e,r,n){if(kU.util.isArray(e)){if(!kU.util.isArray(r))return!1;if(e.length!==r.length)return!1;for(var i=0;i<e.length;++i)if(!t.equals(e[i],r[i]))return!1;return!0}if(typeof e!=typeof r)return!1;if("string"==typeof e)return e===r;var a=e.tagClass===r.tagClass&&e.type===r.type&&e.constructed===r.constructed&&e.composed===r.composed&&t.equals(e.value,r.value);return n&&n.includeBitStringContents&&(a=a&&e.bitStringContents===r.bitStringContents),a},t.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t};var n=function(e,t){var n=e.getByte();if(128!==n){var i;if(128&n){var a=127&n;r(e,--t,a),i=e.getInt(a<<3)}else i=n;if(i<0)throw new Error("Negative length: "+i);return i}};t.fromDer=function(e,i){return void 0===i&&(i={strict:!0,decodeBitStrings:!0}),"boolean"==typeof i&&(i={strict:i,decodeBitStrings:!0}),"strict"in i||(i.strict=!0),"decodeBitStrings"in i||(i.decodeBitStrings=!0),"string"==typeof e&&(e=kU.util.createBuffer(e)),function e(i,a,o,s){var c;r(i,a,2);var u=i.getByte();a--;var l=192&u;var f=31&u;c=i.length();var p=n(i,a);a-=c-i.length();if(void 0!==p&&p>a){if(s.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=i.length(),d.remaining=a,d.requested=p,d}p=a}var h;var v;var m=32==(32&u);if(m)if(h=[],void 0===p)for(;;){if(r(i,a,2),i.bytes(2)===String.fromCharCode(0,0)){i.getBytes(2),a-=2;break}c=i.length(),h.push(e(i,a,o+1,s)),a-=c-i.length()}else for(;p>0;)c=i.length(),h.push(e(i,p,o+1,s)),a-=c-i.length(),p-=c-i.length();void 0===h&&l===t.Class.UNIVERSAL&&f===t.Type.BITSTRING&&(v=i.bytes(p));if(void 0===h&&s.decodeBitStrings&&l===t.Class.UNIVERSAL&&f===t.Type.BITSTRING&&p>1){var g=i.read,y=a,b=0;if(f===t.Type.BITSTRING&&(r(i,a,1),b=i.getByte(),a--),0===b)try{c=i.length();var w={verbose:s.verbose,strict:!0,decodeBitStrings:!0},_=e(i,a,o+1,w),E=c-i.length();a-=E,f==t.Type.BITSTRING&&E++;var S=_.tagClass;E!==p||S!==t.Class.UNIVERSAL&&S!==t.Class.CONTEXT_SPECIFIC||(h=[_])}catch(e){}void 0===h&&(i.read=g,a=y)}if(void 0===h){if(void 0===p){if(s.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");p=a}if(f===t.Type.BMPSTRING)for(h="";p>0;p-=2)r(i,a,2),h+=String.fromCharCode(i.getInt16()),a-=2;else h=i.getBytes(p)}var x=void 0===v?null:{bitStringContents:v};return t.create(l,f,m,h,x)}(e,e.length(),0,i)},t.toDer=function(e){var r=kU.util.createBuffer(),n=e.tagClass|e.type,i=kU.util.createBuffer(),a=!1;if("bitStringContents"in e&&(a=!0,e.original&&(a=t.equals(e,e.original))),a)i.putBytes(e.bitStringContents);else if(e.composed){e.constructed?n|=32:i.putByte(0);for(var o=0;o<e.value.length;++o)void 0!==e.value[o]&&i.putBuffer(t.toDer(e.value[o]))}else if(e.type===t.Type.BMPSTRING)for(o=0;o<e.value.length;++o)i.putInt16(e.value.charCodeAt(o));else e.type===t.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0==(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128==(128&e.value.charCodeAt(1)))?i.putBytes(e.value.substr(1)):i.putBytes(e.value);if(r.putByte(n),i.length()<=127)r.putByte(127&i.length());else{var s=i.length(),c="";do{c+=String.fromCharCode(255&s),s>>>=8}while(s>0);r.putByte(128|c.length);for(o=c.length-1;o>=0;--o)r.putByte(c.charCodeAt(o))}return r.putBuffer(i),r},t.oidToDer=function(e){var t,r,n,i,a=e.split("."),o=kU.util.createBuffer();o.putByte(40*parseInt(a[0],10)+parseInt(a[1],10));for(var s=2;s<a.length;++s){t=!0,r=[],n=parseInt(a[s],10);do{i=127&n,n>>>=7,t||(i|=128),r.push(i),t=!1}while(n>0);for(var c=r.length-1;c>=0;--c)o.putByte(r[c])}return o},t.derToOid=function(e){var t;"string"==typeof e&&(e=kU.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)n<<=7,128&(r=e.getByte())?n+=127&r:(t+="."+(n+r),n=0);return t},t.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),s=0;if(e.length>11){var c=e.charAt(10),u=10;"+"!==c&&"-"!==c&&(s=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(a,o,s,0),u&&("+"===(c=e.charAt(u))||"-"===c)){var l=60*parseInt(e.substr(u+1,2),10)+parseInt(e.substr(u+4,2),10);l*=6e4,"+"===c?t.setTime(+t-l):t.setTime(+t+l)}return t},t.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),c=0,u=0,l=!1;"Z"===e.charAt(e.length-1)&&(l=!0);var f=e.length-5,p=e.charAt(f);"+"!==p&&"-"!==p||(u=60*parseInt(e.substr(f+1,2),10)+parseInt(e.substr(f+4,2),10),u*=6e4,"+"===p&&(u*=-1),l=!0);return"."===e.charAt(14)&&(c=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(r,n,i),t.setUTCHours(a,o,s,c),t.setTime(+t+u)):(t.setFullYear(r,n,i),t.setHours(a,o,s,c)),t},t.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},t.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},t.integerToDer=function(e){var t=kU.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},t.derToInteger=function(e){"string"==typeof e&&(e=kU.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},t.validate=function(e,r,n,i){var a=!1;if(e.tagClass!==r.tagClass&&void 0!==r.tagClass||e.type!==r.type&&void 0!==r.type)i&&(e.tagClass!==r.tagClass&&i.push("["+r.name+'] Expected tag class "'+r.tagClass+'", got "'+e.tagClass+'"'),e.type!==r.type&&i.push("["+r.name+'] Expected type "'+r.type+'", got "'+e.type+'"'));else if(e.constructed===r.constructed||void 0===r.constructed){if(a=!0,r.value&&kU.util.isArray(r.value))for(var o=0,s=0;a&&s<r.value.length;++s)a=r.value[s].optional||!1,e.value[o]&&((a=t.validate(e.value[o],r.value[s],n,i))?++o:r.value[s].optional&&(a=!0)),!a&&i&&i.push("["+r.name+'] Tag class "'+r.tagClass+'", type "'+r.type+'" expected value length "'+r.value.length+'", got "'+e.value.length+'"');if(a&&n&&(r.capture&&(n[r.capture]=e.value),r.captureAsn1&&(n[r.captureAsn1]=e),r.captureBitStringContents&&"bitStringContents"in e&&(n[r.captureBitStringContents]=e.bitStringContents),r.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)n[r.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");n[r.captureBitStringValue]=e.bitStringContents.slice(1)}}else i&&i.push("["+r.name+'] Expected constructed "'+r.constructed+'", got "'+e.constructed+'"');return a};var i=/[^\\u0000-\\u00ff]/;t.prettyPrint=function(e,r,n){var a="";n=n||2,(r=r||0)>0&&(a+="\n");for(var o="",s=0;s<r*n;++s)o+=" ";switch(a+=o+"Tag: ",e.tagClass){case t.Class.UNIVERSAL:a+="Universal:";break;case t.Class.APPLICATION:a+="Application:";break;case t.Class.CONTEXT_SPECIFIC:a+="Context-Specific:";break;case t.Class.PRIVATE:a+="Private:"}if(e.tagClass===t.Class.UNIVERSAL)switch(a+=e.type,e.type){case t.Type.NONE:a+=" (None)";break;case t.Type.BOOLEAN:a+=" (Boolean)";break;case t.Type.INTEGER:a+=" (Integer)";break;case t.Type.BITSTRING:a+=" (Bit string)";break;case t.Type.OCTETSTRING:a+=" (Octet string)";break;case t.Type.NULL:a+=" (Null)";break;case t.Type.OID:a+=" (Object Identifier)";break;case t.Type.ODESC:a+=" (Object Descriptor)";break;case t.Type.EXTERNAL:a+=" (External or Instance of)";break;case t.Type.REAL:a+=" (Real)";break;case t.Type.ENUMERATED:a+=" (Enumerated)";break;case t.Type.EMBEDDED:a+=" (Embedded PDV)";break;case t.Type.UTF8:a+=" (UTF8)";break;case t.Type.ROID:a+=" (Relative Object Identifier)";break;case t.Type.SEQUENCE:a+=" (Sequence)";break;case t.Type.SET:a+=" (Set)";break;case t.Type.PRINTABLESTRING:a+=" (Printable String)";break;case t.Type.IA5String:a+=" (IA5String (ASCII))";break;case t.Type.UTCTIME:a+=" (UTC time)";break;case t.Type.GENERALIZEDTIME:a+=" (Generalized time)";break;case t.Type.BMPSTRING:a+=" (BMP String)"}else a+=e.type;if(a+="\n",a+=o+"Constructed: "+e.constructed+"\n",e.composed){var c=0,u="";for(s=0;s<e.value.length;++s)void 0!==e.value[s]&&(c+=1,u+=t.prettyPrint(e.value[s],r+1,n),s+1<e.value.length&&(u+=","));a+=o+"Sub values: "+c+u}else{if(a+=o+"Value: ",e.type===t.Type.OID){var l=t.derToOid(e.value);a+=l,kU.pki&&kU.pki.oids&&l in kU.pki.oids&&(a+=" ("+kU.pki.oids[l]+") ")}if(e.type===t.Type.INTEGER)try{a+=t.derToInteger(e.value)}catch(t){a+="0x"+kU.util.bytesToHex(e.value)}else if(e.type===t.Type.BITSTRING){if(e.value.length>1?a+="0x"+kU.util.bytesToHex(e.value.slice(1)):a+="(none)",e.value.length>0){var f=e.value.charCodeAt(0);1==f?a+=" (1 unused bit shown)":f>1&&(a+=" ("+f+" unused bits shown)")}}else e.type===t.Type.OCTETSTRING?(i.test(e.value)||(a+="("+e.value+") "),a+="0x"+kU.util.bytesToHex(e.value)):e.type===t.Type.UTF8?a+=kU.util.decodeUtf8(e.value):e.type===t.Type.PRINTABLESTRING||e.type===t.Type.IA5String?a+=e.value:i.test(e.value)?a+="0x"+kU.util.bytesToHex(e.value):0===e.value.length?a+="[null]":a+=e.value}return a}}),kU.md=kU.md||{};kU.md.algorithms=kU.md.algorithms||{};n(function(e){(e.exports=kU.hmac=kU.hmac||{}).create=function(){var e=null,t=null,r=null,n=null,i={start:function(i,a){if(null!==i)if("string"==typeof i){if(!((i=i.toLowerCase())in kU.md.algorithms))throw new Error('Unknown hash algorithm "'+i+'"');t=kU.md.algorithms[i].create()}else t=i;if(null===a)a=e;else{if("string"==typeof a)a=kU.util.createBuffer(a);else if(kU.util.isArray(a)){var o=a;a=kU.util.createBuffer();for(var s=0;s<o.length;++s)a.putByte(o[s])}var c=a.length();c>t.blockLength&&(t.start(),t.update(a.bytes()),a=t.digest()),r=kU.util.createBuffer(),n=kU.util.createBuffer(),c=a.length();for(s=0;s<c;++s){o=a.at(s);r.putByte(54^o),n.putByte(92^o)}if(c<t.blockLength)for(o=t.blockLength-c,s=0;s<o;++s)r.putByte(54),n.putByte(92);e=a,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(n),t.update(e),t.digest()}};return i.digest=i.getMac,i}}),n(function(e){kU.mgf=kU.mgf||{},(e.exports=kU.mgf.mgf1=kU.mgf1=kU.mgf1||{}).create=function(e){return{generate:function(t,r){for(var n=new kU.util.ByteBuffer,i=Math.ceil(r/e.digestLength),a=0;a<i;a++){var o=new kU.util.ByteBuffer;o.putInt32(a),e.start(),e.update(t+o.getBytes()),n.putBuffer(e.digest())}return n.truncate(n.length()-r),n.getBytes()}}}});var qU,KU={},GU=kU.pkcs5=kU.pkcs5||{};kU.util.isNodejs&&!kU.options.usePureJavaScript&&(qU=KU);kU.pbkdf2=GU.pbkdf2=function(e,t,r,n,i,a){if("function"==typeof i&&(a=i,i=null),kU.util.isNodejs&&!kU.options.usePureJavaScript&&qU.pbkdf2&&(null===i||"object"!=typeof i)&&(qU.pbkdf2Sync.length>4||!i||"sha1"===i))return"string"!=typeof i&&(i="sha1"),e=new ig(e,"binary"),t=new ig(t,"binary"),a?4===qU.pbkdf2Sync.length?qU.pbkdf2(e,t,r,n,function(e,t){if(e)return a(e);a(null,t.toString("binary"))}):qU.pbkdf2(e,t,r,n,i,function(e,t){if(e)return a(e);a(null,t.toString("binary"))}):4===qU.pbkdf2Sync.length?qU.pbkdf2Sync(e,t,r,n).toString("binary"):qU.pbkdf2Sync(e,t,r,n,i).toString("binary");if(null==i&&(i="sha1"),"string"==typeof i){if(!(i in kU.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=kU.md[i].create()}var o=i.digestLength;if(n>4294967295*o){var s=new Error("Derived key is too long.");if(a)return a(s);throw s}var c=Math.ceil(n/o),u=n-(c-1)*o,l=kU.hmac.create();l.start(i,e);var f,p,d,h="";if(!a){for(var v=1;v<=c;++v){l.start(null,null),l.update(t),l.update(kU.util.int32ToBytes(v)),f=d=l.digest().getBytes();for(var m=2;m<=r;++m)l.start(null,null),l.update(d),p=l.digest().getBytes(),f=kU.util.xorBytes(f,p,o),d=p;h+=v<c?f:f.substr(0,u)}return h}v=1;function g(){if(v>c)return a(null,h);l.start(null,null),l.update(t),l.update(kU.util.int32ToBytes(v)),f=d=l.digest().getBytes(),m=2,y()}function y(){if(m<=r)return l.start(null,null),l.update(d),p=l.digest().getBytes(),f=kU.util.xorBytes(f,p,o),d=p,++m,kU.util.setImmediate(y);h+=v<c?f:f.substr(0,u),++v,g()}g()},n(function(e){var t=e.exports=kU.pem=kU.pem||{};function r(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";var a=0,o=-1;for(i=0;i<t.length;++i,++a)if(a>65&&-1!==o){var s=t[o];","===s?(++o,t=t.substr(0,o)+"\r\n "+t.substr(o)):t=t.substr(0,o)+"\r\n"+s+t.substr(o+1),a=i-o-1,o=-1,++i}else" "!==t[i]&&"\t"!==t[i]&&","!==t[i]||(o=i);return t}function n(e){return e.replace(/^\s+/,"")}t.encode=function(e,t){t=t||{};var n,i="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(i+=r(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(i+=r(n={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),i+=r(n)),e.headers)for(var a=0;a<e.headers.length;++a)i+=r(e.headers[a]);return e.procType&&(i+="\r\n"),i+=kU.util.encode64(e.body,t.maxline||64)+"\r\n",i+="-----END "+e.type+"-----\r\n"},t.decode=function(e){for(var t,r=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,a=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,o=/\r?\n/;t=i.exec(e);){var s={type:t[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:kU.util.decode64(t[3])};if(r.push(s),t[2]){for(var c=t[2].split(o),u=0;t&&u<c.length;){for(var l=c[u].replace(/\s+$/,""),f=u+1;f<c.length;++f){var p=c[f];if(!/\s/.test(p[0]))break;l+=p,u=f}if(t=l.match(a)){for(var d={name:t[1],values:[]},h=t[2].split(","),v=0;v<h.length;++v)d.values.push(n(h[v]));if(s.procType)if(s.contentDomain||"Content-Domain"!==d.name)if(s.dekInfo||"DEK-Info"!==d.name)s.headers.push(d);else{if(0===d.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');s.dekInfo={algorithm:h[0],parameters:h[1]||null}}else s.contentDomain=h[0]||"";else{if("Proc-Type"!==d.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==d.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');s.procType={version:h[0],type:h[1]}}}++u}if("ENCRYPTED"===s.procType&&!s.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}}),n(function(e){var t=e.exports=kU.sha256=kU.sha256||{};kU.md.sha256=kU.md.algorithms.sha256=t,t.create=function(){n||(r=String.fromCharCode(128),r+=kU.util.fillString(String.fromCharCode(0),64),i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=!0);var e=null,t=kU.util.createBuffer(),o=new Array(64),s={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var r=s.messageLengthSize/4,n=0;n<r;++n)s.fullMessageLength.push(0);return t=kU.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},s}};return s.start(),s.update=function(r,n){"utf8"===n&&(r=kU.util.encodeUtf8(r));var i=r.length;s.messageLength+=i,i=[i/4294967296>>>0,i>>>0];for(var c=s.fullMessageLength.length-1;c>=0;--c)s.fullMessageLength[c]+=i[1],i[1]=i[0]+(s.fullMessageLength[c]/4294967296>>>0),s.fullMessageLength[c]=s.fullMessageLength[c]>>>0,i[0]=i[1]/4294967296>>>0;return t.putBytes(r),a(e,o,t),(t.read>2048||0===t.length())&&t.compact(),s},s.digest=function(){var n=kU.util.createBuffer();n.putBytes(t.bytes());var i,c=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize&s.blockLength-1;n.putBytes(r.substr(0,s.blockLength-c));for(var u=8*s.fullMessageLength[0],l=0;l<s.fullMessageLength.length-1;++l)u+=(i=8*s.fullMessageLength[l+1])/4294967296>>>0,n.putInt32(u>>>0),u=i>>>0;n.putInt32(u);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};a(f,o,n);var p=kU.util.createBuffer();return p.putInt32(f.h0),p.putInt32(f.h1),p.putInt32(f.h2),p.putInt32(f.h3),p.putInt32(f.h4),p.putInt32(f.h5),p.putInt32(f.h6),p.putInt32(f.h7),p},s};var r=null,n=!1,i=null;function a(e,t,r){for(var n,a,o,s,c,u,l,f,p,d,h,v,m,g=r.length();g>=64;){for(c=0;c<16;++c)t[c]=r.getInt32();for(;c<64;++c)n=((n=t[c-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,a=((a=t[c-15])>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,t[c]=n+t[c-7]+a+t[c-16]|0;for(u=e.h0,l=e.h1,f=e.h2,p=e.h3,d=e.h4,h=e.h5,v=e.h6,m=e.h7,c=0;c<64;++c)o=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),s=u&l|f&(u^l),n=m+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(v^d&(h^v))+i[c]+t[c],m=v,v=h,h=d,d=p+n>>>0,p=f,f=l,l=u,u=n+(a=o+s)>>>0;e.h0=e.h0+u|0,e.h1=e.h1+l|0,e.h2=e.h2+f|0,e.h3=e.h3+p|0,e.h4=e.h4+d|0,e.h5=e.h5+h|0,e.h6=e.h6+v|0,e.h7=e.h7+m|0,g-=64}}}),n(function(e){var t=null;!kU.util.isNodejs||kU.options.usePureJavaScript||Tc.versions["node-webkit"]||(t=KU),(e.exports=kU.prng=kU.prng||{}).create=function(e){for(var r={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=e.md,i=new Array(32),a=0;a<32;++a)i[a]=n.create();function o(){if(r.pools[0].messageLength>=32)return s();var e=32-r.pools[0].messageLength<<5;r.collect(r.seedFileSync(e)),s()}function s(){r.reseeds=4294967295===r.reseeds?0:r.reseeds+1;var e=r.plugin.md.create();e.update(r.keyBytes);for(var t=1,n=0;n<32;++n)r.reseeds%t==0&&(e.update(r.pools[n].digest().getBytes()),r.pools[n].start()),t<<=1;r.keyBytes=e.digest().getBytes(),e.start(),e.update(r.keyBytes);var i=e.digest().getBytes();r.key=r.plugin.formatKey(r.keyBytes),r.seed=r.plugin.formatSeed(i),r.generated=0}function c(e){var t=null;if("undefined"!=typeof window){var r=window.crypto||window.msCrypto;r&&r.getRandomValues&&(t=function(e){return r.getRandomValues(e)})}var n=kU.util.createBuffer();if(t)for(;n.length()<e;){var i=Math.max(1,Math.min(e-n.length(),65536)/4),a=new Uint32Array(Math.floor(i));try{t(a);for(var o=0;o<a.length;++o)n.putInt32(a[o])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(n.length()<e)for(var s,c,u,l=Math.floor(65536*Math.random());n.length()<e;){c=16807*(65535&l),c+=(32767&(s=16807*(l>>16)))<<16,l=4294967295&(c=(2147483647&(c+=s>>15))+(c>>31));for(o=0;o<3;++o)u=l>>>(o<<3),u^=Math.floor(256*Math.random()),n.putByte(String.fromCharCode(255&u))}return n.getBytes(e)}return r.pools=i,r.pool=0,r.generate=function(e,t){if(!t)return r.generateSync(e);var n=r.plugin.cipher,i=r.plugin.increment,a=r.plugin.formatKey,o=r.plugin.formatSeed,c=kU.util.createBuffer();r.key=null,function u(l){if(l)return t(l);if(c.length()>=e)return t(null,c.getBytes(e));r.generated>1048575&&(r.key=null);if(null===r.key)return kU.util.nextTick(function(){!function(e){if(r.pools[0].messageLength>=32)return s(),e();var t=32-r.pools[0].messageLength<<5;r.seedFile(t,function(t,n){if(t)return e(t);r.collect(n),s(),e()})}(u)});var f=n(r.key,r.seed);r.generated+=f.length;c.putBytes(f);r.key=a(n(r.key,i(r.seed)));r.seed=o(n(r.key,r.seed));kU.util.setImmediate(u)}()},r.generateSync=function(e){var t=r.plugin.cipher,n=r.plugin.increment,i=r.plugin.formatKey,a=r.plugin.formatSeed;r.key=null;for(var s=kU.util.createBuffer();s.length()<e;){r.generated>1048575&&(r.key=null),null===r.key&&o();var c=t(r.key,r.seed);r.generated+=c.length,s.putBytes(c),r.key=i(t(r.key,n(r.seed))),r.seed=a(t(r.key,r.seed))}return s.getBytes(e)},t?(r.seedFile=function(e,r){t.randomBytes(e,function(e,t){if(e)return r(e);r(null,t.toString())})},r.seedFileSync=function(e){return t.randomBytes(e).toString()}):(r.seedFile=function(e,t){try{t(null,c(e))}catch(e){t(e)}},r.seedFileSync=c),r.collect=function(e){for(var t=e.length,n=0;n<t;++n)r.pools[r.pool].update(e.substr(n,1)),r.pool=31===r.pool?0:r.pool+1},r.collectInt=function(e,t){for(var n="",i=0;i<t;i+=8)n+=String.fromCharCode(e>>i&255);r.collect(n)},r.registerWorker=function(e){if(e===self)r.seedFile=function(e,t){self.addEventListener("message",function e(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",e),t(n.forge.prng.err,n.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:e}}})};else{e.addEventListener("message",function(t){var n=t.data;n.forge&&n.forge.prng&&r.seedFile(n.forge.prng.needed,function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})})})}},r}}),n(function(e){kU.random&&kU.random.getBytes?e.exports=kU.random:function(t){var r={},n=new Array(4),i=kU.util.createBuffer();function a(){var e=kU.prng.create(r);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}r.formatKey=function(e){var t=kU.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),kU.aes._expandKey(e,!1)},r.formatSeed=function(e){var t=kU.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},r.cipher=function(e,t){return kU.aes._updateBlock(e,t,n,!1),i.putInt32(n[0]),i.putInt32(n[1]),i.putInt32(n[2]),i.putInt32(n[3]),i.getBytes()},r.increment=function(e){return++e[3],e},r.md=kU.md.sha256;var o=a(),s=null;if("undefined"!=typeof window){var c=window.crypto||window.msCrypto;c&&c.getRandomValues&&(s=function(e){return c.getRandomValues(e)})}if(!kU.util.isNodejs&&!s){if("undefined"==typeof window||window.document,o.collectInt(+new Date,32),"undefined"!=typeof navigator){var u="";for(var l in navigator)try{"string"==typeof navigator[l]&&(u+=navigator[l])}catch(e){}o.collect(u),u=null}t&&(t().mousemove(function(e){o.collectInt(e.clientX,16),o.collectInt(e.clientY,16)}),t().keypress(function(e){o.collectInt(e.charCode,8)}))}if(kU.random)for(var l in o)kU.random[l]=o[l];else kU.random=o;kU.random.createInstance=a,e.exports=kU.random}("undefined"!=typeof jQuery?jQuery:null)}),n(function(e){var t=e.exports=kU.sha1=kU.sha1||{};kU.md.sha1=kU.md.algorithms.sha1=t,t.create=function(){n||(r=String.fromCharCode(128),r+=kU.util.fillString(String.fromCharCode(0),64),n=!0);var e=null,t=kU.util.createBuffer(),a=new Array(80),o={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,n=0;n<r;++n)o.fullMessageLength.push(0);return t=kU.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},o}};return o.start(),o.update=function(r,n){"utf8"===n&&(r=kU.util.encodeUtf8(r));var s=r.length;o.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var c=o.fullMessageLength.length-1;c>=0;--c)o.fullMessageLength[c]+=s[1],s[1]=s[0]+(o.fullMessageLength[c]/4294967296>>>0),o.fullMessageLength[c]=o.fullMessageLength[c]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(r),i(e,a,t),(t.read>2048||0===t.length())&&t.compact(),o},o.digest=function(){var n=kU.util.createBuffer();n.putBytes(t.bytes());var s,c=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;n.putBytes(r.substr(0,o.blockLength-c));for(var u=8*o.fullMessageLength[0],l=0;l<o.fullMessageLength.length-1;++l)u+=(s=8*o.fullMessageLength[l+1])/4294967296>>>0,n.putInt32(u>>>0),u=s>>>0;n.putInt32(u);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};i(f,a,n);var p=kU.util.createBuffer();return p.putInt32(f.h0),p.putInt32(f.h1),p.putInt32(f.h2),p.putInt32(f.h3),p.putInt32(f.h4),p},o};var r=null,n=!1;function i(e,t,r){for(var n,i,a,o,s,c,u,l=r.length();l>=64;){for(i=e.h0,a=e.h1,o=e.h2,s=e.h3,c=e.h4,u=0;u<16;++u)n=r.getInt32(),t[u]=n,n=(i<<5|i>>>27)+(s^a&(o^s))+c+1518500249+n,c=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;u<20;++u)n=(n=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|n>>>31,t[u]=n,n=(i<<5|i>>>27)+(s^a&(o^s))+c+1518500249+n,c=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;u<32;++u)n=(n=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|n>>>31,t[u]=n,n=(i<<5|i>>>27)+(a^o^s)+c+1859775393+n,c=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;u<40;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(a^o^s)+c+1859775393+n,c=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;u<60;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(a&o|s&(a^o))+c+2400959708+n,c=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;u<80;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(a^o^s)+c+3395469782+n,c=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+o|0,e.h3=e.h3+s|0,e.h4=e.h4+c|0,l-=64}}}),n(function(e){var t=e.exports=kU.pkcs1=kU.pkcs1||{};function r(e,t,r){r||(r=kU.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),a=0;a<i;++a){var o=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a);r.start(),r.update(e+o),n+=r.digest().getBytes()}return n.substring(0,t)}t.encode_rsa_oaep=function(e,t,n){var i,a,o,s;"string"==typeof n?(i=n,a=arguments[3]||void 0,o=arguments[4]||void 0):n&&(i=n.label||void 0,a=n.seed||void 0,o=n.md||void 0,n.mgf1&&n.mgf1.md&&(s=n.mgf1.md)),o?o.start():o=kU.md.sha1.create(),s||(s=o);var c=Math.ceil(e.n.bitLength()/8),u=c-2*o.digestLength-2;if(t.length>u)throw(v=new Error("RSAES-OAEP input message length is too long.")).length=t.length,v.maxLength=u,v;i||(i=""),o.update(i,"raw");for(var l=o.digest(),f="",p=u-t.length,d=0;d<p;d++)f+="\0";var h=l.getBytes()+f+""+t;if(a){if(a.length!==o.digestLength){var v;throw(v=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=a.length,v.digestLength=o.digestLength,v}}else a=kU.random.getBytes(o.digestLength);var m=r(a,c-o.digestLength-1,s),g=kU.util.xorBytes(h,m,h.length),y=r(g,o.digestLength,s);return"\0"+kU.util.xorBytes(a,y,a.length)+g},t.decode_rsa_oaep=function(e,t,n){var i,a,o;"string"==typeof n?(i=n,a=arguments[3]||void 0):n&&(i=n.label||void 0,a=n.md||void 0,n.mgf1&&n.mgf1.md&&(o=n.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s)throw(m=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,m.expectedLength=s,m;if(void 0===a?a=kU.md.sha1.create():a.start(),o||(o=a),s<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),a.update(i,"raw");for(var c=a.digest().getBytes(),u=t.charAt(0),l=t.substring(1,a.digestLength+1),f=t.substring(1+a.digestLength),p=r(f,a.digestLength,o),d=r(kU.util.xorBytes(l,p,l.length),s-a.digestLength-1,o),h=kU.util.xorBytes(f,d,f.length),v=h.substring(0,a.digestLength),m="\0"!==u,g=0;g<a.digestLength;++g)m|=c.charAt(g)!==v.charAt(g);for(var y=1,b=a.digestLength,w=a.digestLength;w<h.length;w++){var _=h.charCodeAt(w);m|=_&(y?65534:0),b+=y&=1&_^1}if(m||1!==h.charCodeAt(b))throw new Error("Invalid RSAES-OAEP padding.");return h.substring(b+1)}}),kU.des=kU.des||{};function HU(e,t){kU.cipher.registerAlgorithm(e,function(){return new kU.des.Algorithm(e,t)})}kU.des.startEncrypting=function(e,t,r,n){var i=rz({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},kU.des.createEncryptionCipher=function(e,t){return rz({key:e,output:null,decrypt:!1,mode:t})},kU.des.startDecrypting=function(e,t,r,n){var i=rz({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},kU.des.createDecryptionCipher=function(e,t){return rz({key:e,output:null,decrypt:!0,mode:t})},kU.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return tz(r._keys,e,t,!1)},decrypt:function(e,t){return tz(r._keys,e,t,!0)}}}),r._init=!1},kU.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=kU.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],a=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],d=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],v=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=e.length()>8?3:1,g=[],y=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,w=0;w<m;w++){var _=e.getInt32(),E=e.getInt32();_^=(t=252645135&(_>>>4^E))<<4,_^=t=65535&((E^=t)>>>-16^_),_^=(t=858993459&(_>>>2^(E^=t<<-16)))<<2,_^=t=65535&((E^=t)>>>-16^_),_^=(t=1431655765&(_>>>1^(E^=t<<-16)))<<1,_^=t=16711935&((E^=t)>>>8^_),t=(_^=(t=1431655765&(_>>>1^(E^=t<<8)))<<1)<<8|(E^=t)>>>20&240,_=E<<24|E<<8&16711680|E>>>8&65280|E>>>24&240,E=t;for(var S=0;S<y.length;++S){y[S]?(_=_<<2|_>>>26,E=E<<2|E>>>26):(_=_<<1|_>>>27,E=E<<1|E>>>27);var x=r[(_&=-15)>>>28]|n[_>>>24&15]|i[_>>>20&15]|a[_>>>16&15]|o[_>>>12&15]|s[_>>>8&15]|c[_>>>4&15],C=u[(E&=-15)>>>28]|l[E>>>24&15]|f[E>>>20&15]|p[E>>>16&15]|d[E>>>12&15]|h[E>>>8&15]|v[E>>>4&15];t=65535&(C>>>16^x),g[b++]=x^t,g[b++]=C^t<<16}}return g}(t),this._init=!0}},HU("DES-ECB",kU.cipher.modes.ecb),HU("DES-CBC",kU.cipher.modes.cbc),HU("DES-CFB",kU.cipher.modes.cfb),HU("DES-OFB",kU.cipher.modes.ofb),HU("DES-CTR",kU.cipher.modes.ctr),HU("3DES-ECB",kU.cipher.modes.ecb),HU("3DES-CBC",kU.cipher.modes.cbc),HU("3DES-CFB",kU.cipher.modes.cfb),HU("3DES-OFB",kU.cipher.modes.ofb),HU("3DES-CTR",kU.cipher.modes.ctr);var WU=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],$U=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],YU=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],JU=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],QU=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],ZU=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],XU=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],ez=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function tz(e,t,r,n){var i,a,o=32===e.length?3:9;i=3===o?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s=t[0],c=t[1];s^=(a=252645135&(s>>>4^c))<<4,s^=(a=65535&(s>>>16^(c^=a)))<<16,s^=a=858993459&((c^=a)>>>2^s),s^=a=16711935&((c^=a<<2)>>>8^s),s=(s^=(a=1431655765&(s>>>1^(c^=a<<8)))<<1)<<1|s>>>31,c=(c^=a)<<1|c>>>31;for(var u=0;u<o;u+=3){for(var l=i[u+1],f=i[u+2],p=i[u];p!=l;p+=f){var d=c^e[p],h=(c>>>4|c<<28)^e[p+1];a=s,s=c,c=a^($U[d>>>24&63]|JU[d>>>16&63]|ZU[d>>>8&63]|ez[63&d]|WU[h>>>24&63]|YU[h>>>16&63]|QU[h>>>8&63]|XU[63&h])}a=s,s=c,c=a}c=c>>>1|c<<31,c^=a=1431655765&((s=s>>>1|s<<31)>>>1^c),c^=(a=16711935&(c>>>8^(s^=a<<1)))<<8,c^=(a=858993459&(c>>>2^(s^=a)))<<2,c^=a=65535&((s^=a)>>>16^c),c^=a=252645135&((s^=a<<16)>>>4^c),s^=a<<4,r[0]=s,r[1]=c}function rz(e){var t,r="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),n=(t=e.decrypt?kU.cipher.createDecipher(r,e.key):kU.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var i=null;r instanceof kU.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=e,n.call(t,r)},t}n(function(e){var t=kU.asn1,r=e.exports=kU.pkcs7asn1=kU.pkcs7asn1||{};kU.pkcs7=kU.pkcs7||{},kU.pkcs7.asn1=r;var n={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};r.contentInfoValidator=n;var i={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};r.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(i)},r.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(i)};var a={name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};r.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},n,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[a]}]},r.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}}),kU.mgf=kU.mgf||{};kU.mgf.mgf1=kU.mgf1;var nz;n(function(e){(e.exports=kU.pss=kU.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,r=e.md,n=e.mgf,i=r.digestLength,a=e.salt||null;if("string"==typeof a&&(a=kU.util.createBuffer(a)),"saltLength"in e)t=e.saltLength;else{if(null===a)throw new Error("Salt length not specified or specific salt not given.");t=a.length()}if(null!==a&&a.length()!==t)throw new Error("Given salt length does not match length of given salt.");var o=e.prng||kU.random,s={encode:function(e,s){var c,u,l=s-1,f=Math.ceil(l/8),p=e.digest().getBytes();if(f<i+t+2)throw new Error("Message is too long to encrypt.");u=null===a?o.getBytesSync(t):a.bytes();var d=new kU.util.ByteBuffer;d.fillWithByte(0,8),d.putBytes(p),d.putBytes(u),r.start(),r.update(d.getBytes());var h=r.digest().getBytes(),v=new kU.util.ByteBuffer;v.fillWithByte(0,f-t-i-2),v.putByte(1),v.putBytes(u);var m=v.getBytes(),g=f-i-1,y=n.generate(h,g),b="";for(c=0;c<g;c++)b+=String.fromCharCode(m.charCodeAt(c)^y.charCodeAt(c));var w=65280>>8*f-l&255;return(b=String.fromCharCode(b.charCodeAt(0)&~w)+b.substr(1))+h+String.fromCharCode(188)},verify:function(e,a,o){var s,c=o-1,u=Math.ceil(c/8);if(a=a.substr(-u),u<i+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==a.charCodeAt(u-1))throw new Error("Encoded message does not end in 0xBC.");var l=u-i-1,f=a.substr(0,l),p=a.substr(l,i),d=65280>>8*u-c&255;if(0!=(f.charCodeAt(0)&d))throw new Error("Bits beyond keysize not zero as expected.");var h=n.generate(p,l),v="";for(s=0;s<l;s++)v+=String.fromCharCode(f.charCodeAt(s)^h.charCodeAt(s));v=String.fromCharCode(v.charCodeAt(0)&~d)+v.substr(1);var m=u-i-t-2;for(s=0;s<m;s++)if(0!==v.charCodeAt(s))throw new Error("Leftmost octets not zero as expected");if(1!==v.charCodeAt(m))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var g=v.substr(-t),y=new kU.util.ByteBuffer;return y.fillWithByte(0,8),y.putBytes(e),y.putBytes(g),r.start(),r.update(y.getBytes()),p===r.digest().getBytes()}};return s}}),kU.jsbn=kU.jsbn||{};function iz(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function az(){return new iz(null)}function oz(e,t,r,n,i,a){for(var o=16383&t,s=t>>14;--a>=0;){var c=16383&this.data[e],u=this.data[e++]>>14,l=s*c+u*o;i=((c=o*c+((16383&l)<<14)+r.data[n]+i)>>28)+(l>>14)+s*u,r.data[n++]=268435455&c}return i}kU.jsbn.BigInteger=iz,"undefined"==typeof navigator?(iz.prototype.am=oz,nz=28):"Microsoft Internet Explorer"==navigator.appName?(iz.prototype.am=function(e,t,r,n,i,a){for(var o=32767&t,s=t>>15;--a>=0;){var c=32767&this.data[e],u=this.data[e++]>>15,l=s*c+u*o;i=((c=o*c+((32767&l)<<15)+r.data[n]+(1073741823&i))>>>30)+(l>>>15)+s*u+(i>>>30),r.data[n++]=1073741823&c}return i},nz=30):"Netscape"!=navigator.appName?(iz.prototype.am=function(e,t,r,n,i,a){for(;--a>=0;){var o=t*this.data[e++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=67108863&o}return i},nz=26):(iz.prototype.am=oz,nz=28),iz.prototype.DB=nz,iz.prototype.DM=(1<<nz)-1,iz.prototype.DV=1<<nz;iz.prototype.FV=Math.pow(2,52),iz.prototype.F1=52-nz,iz.prototype.F2=2*nz-52;var sz,cz,uz="0123456789abcdefghijklmnopqrstuvwxyz",lz=new Array;for(sz="0".charCodeAt(0),cz=0;cz<=9;++cz)lz[sz++]=cz;for(sz="a".charCodeAt(0),cz=10;cz<36;++cz)lz[sz++]=cz;for(sz="A".charCodeAt(0),cz=10;cz<36;++cz)lz[sz++]=cz;function fz(e){return uz.charAt(e)}function pz(e,t){var r=lz[e.charCodeAt(t)];return null==r?-1:r}function dz(e){var t=az();return t.fromInt(e),t}function hz(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function vz(e){this.m=e}function mz(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function gz(e,t){return e&t}function yz(e,t){return e|t}function bz(e,t){return e^t}function wz(e,t){return e&~t}function _z(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function Ez(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function Sz(){}function xz(e){return e}function Cz(e){this.r2=az(),this.q3=az(),iz.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}vz.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},vz.prototype.revert=function(e){return e},vz.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},vz.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},vz.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},mz.prototype.convert=function(e){var t=az();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(iz.ZERO)>0&&this.m.subTo(t,t),t},mz.prototype.revert=function(e){var t=az();return e.copyTo(t),this.reduce(t),t},mz.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},mz.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},mz.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},iz.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},iz.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},iz.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,a=0;--n>=0;){var o=8==r?255&e[n]:pz(e,n);o<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==a?this.data[this.t++]=o:a+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this.data[this.t++]=o>>this.DB-a):this.data[this.t-1]|=o<<a,(a+=r)>=this.DB&&(a-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&iz.ZERO.subTo(this,this)},iz.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},iz.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},iz.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},iz.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,a=(1<<i)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+o+1]=this.data[r]>>i|s,s=(this.data[r]&a)<<n;for(r=o-1;r>=0;--r)t.data[r]=0;t.data[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},iz.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&a)<<i,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}},iz.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()},iz.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&iz.ZERO.subTo(t,t)},iz.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},iz.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=az());var a=az(),o=this.s,s=e.s,c=this.DB-hz(n.data[n.t-1]);c>0?(n.lShiftTo(c,a),i.lShiftTo(c,r)):(n.copyTo(a),i.copyTo(r));var u=a.t,l=a.data[u-1];if(0!=l){var f=l*(1<<this.F1)+(u>1?a.data[u-2]>>this.F2:0),p=this.FV/f,d=(1<<this.F1)/f,h=1<<this.F2,v=r.t,m=v-u,g=null==t?az():t;for(a.dlShiftTo(m,g),r.compareTo(g)>=0&&(r.data[r.t++]=1,r.subTo(g,r)),iz.ONE.dlShiftTo(u,g),g.subTo(a,a);a.t<u;)a.data[a.t++]=0;for(;--m>=0;){var y=r.data[--v]==l?this.DM:Math.floor(r.data[v]*p+(r.data[v-1]+h)*d);if((r.data[v]+=a.am(0,y,r,m,0,u))<y)for(a.dlShiftTo(m,g),r.subTo(g,r);r.data[v]<--y;)r.subTo(g,r)}null!=t&&(r.drShiftTo(u,t),o!=s&&iz.ZERO.subTo(t,t)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),o<0&&iz.ZERO.subTo(r,r)}}},iz.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},iz.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},iz.prototype.exp=function(e,t){if(e>4294967295||e<1)return iz.ONE;var r=az(),n=az(),i=t.convert(this),a=hz(e)-1;for(i.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,i,r);else{var o=r;r=n,n=o}return t.revert(r)},iz.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,a="",o=this.t,s=this.DB-o*this.DB%t;if(o-- >0)for(s<this.DB&&(r=this.data[o]>>s)>0&&(i=!0,a=fz(r));o>=0;)s<t?(r=(this.data[o]&(1<<s)-1)<<t-s,r|=this.data[--o]>>(s+=this.DB-t)):(r=this.data[o]>>(s-=t)&n,s<=0&&(s+=this.DB,--o)),r>0&&(i=!0),i&&(a+=fz(r));return i?a:"0"},iz.prototype.negate=function(){var e=az();return iz.ZERO.subTo(this,e),e},iz.prototype.abs=function(){return this.s<0?this.negate():this},iz.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0},iz.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+hz(this.data[this.t-1]^this.s&this.DM)},iz.prototype.mod=function(e){var t=az();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(iz.ZERO)>0&&e.subTo(t,t),t},iz.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new vz(t):new mz(t),this.exp(e,r)},iz.ZERO=dz(0),iz.ONE=dz(1),Sz.prototype.convert=xz,Sz.prototype.revert=xz,Sz.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},Sz.prototype.sqrTo=function(e,t){e.squareTo(t)},Cz.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=az();return e.copyTo(t),this.reduce(t),t},Cz.prototype.revert=function(e){return e},Cz.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},Cz.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},Cz.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var kz=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Tz=(1<<26)/kz[kz.length-1];iz.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},iz.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=dz(r),i=az(),a=az(),o="";for(this.divRemTo(n,i,a);i.signum()>0;)o=(r+a.intValue()).toString(e).substr(1)+o,i.divRemTo(n,i,a);return a.intValue().toString(e)+o},iz.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,a=0,o=0,s=0;s<e.length;++s){var c=pz(e,s);c<0?"-"==e.charAt(s)&&0==this.signum()&&(i=!0):(o=t*o+c,++a>=r&&(this.dMultiply(n),this.dAddOffset(o,0),a=0,o=0))}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(o,0)),i&&iz.ZERO.subTo(this,this)},iz.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(iz.ONE.shiftLeft(e-1),yz,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(iz.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},iz.prototype.bitwiseTo=function(e,t,r){var n,i,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=a;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},iz.prototype.changeBit=function(e,t){var r=iz.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},iz.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},iz.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},iz.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},iz.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,e.data[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e.data[i],r,i,0,t-i);r.clamp()},iz.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},iz.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r},iz.prototype.millerRabin=function(e){var t=this.subtract(iz.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,i=t.shiftRight(r),a={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},o=0;o<e;++o){do{n=new iz(this.bitLength(),a)}while(n.compareTo(iz.ONE)<=0||n.compareTo(t)>=0);var s=n.modPow(i,this);if(0!=s.compareTo(iz.ONE)&&0!=s.compareTo(t)){for(var c=1;c++<r&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(iz.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},iz.prototype.clone=function(){var e=az();return this.copyTo(e),e},iz.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},iz.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},iz.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},iz.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},iz.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},iz.prototype.equals=function(e){return 0==this.compareTo(e)},iz.prototype.min=function(e){return this.compareTo(e)<0?this:e},iz.prototype.max=function(e){return this.compareTo(e)>0?this:e},iz.prototype.and=function(e){var t=az();return this.bitwiseTo(e,gz,t),t},iz.prototype.or=function(e){var t=az();return this.bitwiseTo(e,yz,t),t},iz.prototype.xor=function(e){var t=az();return this.bitwiseTo(e,bz,t),t},iz.prototype.andNot=function(e){var t=az();return this.bitwiseTo(e,wz,t),t},iz.prototype.not=function(){for(var e=az(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},iz.prototype.shiftLeft=function(e){var t=az();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},iz.prototype.shiftRight=function(e){var t=az();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},iz.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+_z(this.data[e]);return this.s<0?this.t*this.DB:-1},iz.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=Ez(this.data[r]^t);return e},iz.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},iz.prototype.setBit=function(e){return this.changeBit(e,yz)},iz.prototype.clearBit=function(e){return this.changeBit(e,wz)},iz.prototype.flipBit=function(e){return this.changeBit(e,bz)},iz.prototype.add=function(e){var t=az();return this.addTo(e,t),t},iz.prototype.subtract=function(e){var t=az();return this.subTo(e,t),t},iz.prototype.multiply=function(e){var t=az();return this.multiplyTo(e,t),t},iz.prototype.divide=function(e){var t=az();return this.divRemTo(e,t,null),t},iz.prototype.remainder=function(e){var t=az();return this.divRemTo(e,null,t),t},iz.prototype.divideAndRemainder=function(e){var t=az(),r=az();return this.divRemTo(e,t,r),new Array(t,r)},iz.prototype.modPow=function(e,t){var r,n,i=e.bitLength(),a=dz(1);if(i<=0)return a;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new vz(t):t.isEven()?new Cz(t):new mz(t);var o=new Array,s=3,c=r-1,u=(1<<r)-1;if(o[1]=n.convert(this),r>1){var l=az();for(n.sqrTo(o[1],l);s<=u;)o[s]=az(),n.mulTo(l,o[s-2],o[s]),s+=2}var f,p,d=e.t-1,h=!0,v=az();for(i=hz(e.data[d])-1;d>=0;){for(i>=c?f=e.data[d]>>i-c&u:(f=(e.data[d]&(1<<i+1)-1)<<c-i,d>0&&(f|=e.data[d-1]>>this.DB+i-c)),s=r;0==(1&f);)f>>=1,--s;if((i-=s)<0&&(i+=this.DB,--d),h)o[f].copyTo(a),h=!1;else{for(;s>1;)n.sqrTo(a,v),n.sqrTo(v,a),s-=2;s>0?n.sqrTo(a,v):(p=a,a=v,v=p),n.mulTo(v,o[f],a)}for(;d>=0&&0==(e.data[d]&1<<i);)n.sqrTo(a,v),p=a,a=v,v=p,--i<0&&(i=this.DB-1,--d)}return n.revert(a)},iz.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return iz.ZERO;for(var r=e.clone(),n=this.clone(),i=dz(1),a=dz(0),o=dz(0),s=dz(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&a.isEven()||(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(o,i),a.subTo(s,a)):(n.subTo(r,n),t&&o.subTo(i,o),s.subTo(a,s))}return 0!=n.compareTo(iz.ONE)?iz.ZERO:s.compareTo(e)>=0?s.subtract(e):s.signum()<0?(s.addTo(e,s),s.signum()<0?s.add(e):s):s},iz.prototype.pow=function(e){return this.exp(e,new Sz)},iz.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r},iz.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=kz[kz.length-1]){for(t=0;t<kz.length;++t)if(r.data[0]==kz[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<kz.length;){for(var n=kz[t],i=t+1;i<kz.length&&n<Tz;)n*=kz[i++];for(n=r.modInt(n);t<i;)if(n%kz[t++]==0)return!1}return r.millerRabin(e)};n(function(e){!function(){if(kU.prime)e.exports=kU.prime;else{var t=e.exports=kU.prime=kU.prime||{},r=kU.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],i=new r(null);i.fromInt(30);var a=function(e,t){return e|t};t.generateProbablePrime=function(e,t,n){"function"==typeof t&&(n=t,t={});var i=(t=t||{}).algorithm||"PRIMEINC";"string"==typeof i&&(i={name:i}),i.options=i.options||{};var a=t.prng||kU.random,c={nextBytes:function(e){for(var t=a.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===i.name)return function(e,t,n,i){if("workers"in n)return function(e,t,n,i){if("undefined"==typeof Worker)return o(e,t,n,i);var a=s(e,t),c=n.workers,u=n.workLoad||100,l=30*u/8,f=n.workerScript||"forge/prime.worker.js";if(-1===c)return kU.util.estimateCores(function(e,t){e&&(t=2),c=t-1,p()});function p(){c=Math.max(1,c);for(var n=[],o=0;o<c;++o)n[o]=new Worker(f);for(var o=0;o<c;++o)n[o].addEventListener("message",d);var p=!1;function d(o){if(!p){var c=o.data;if(c.found){for(var f=0;f<n.length;++f)n[f].terminate();return p=!0,i(null,new r(c.prime,16))}a.bitLength()>e&&(a=s(e,t));var d=a.toString(16);o.target.postMessage({hex:d,workLoad:u}),a.dAddOffset(l,0)}}}p()}(e,t,n,i);return o(e,t,n,i)}(e,c,i.options,n);throw new Error("Invalid prime generation algorithm: "+i.name)}}function o(e,t,r,i){var a=s(e,t),o=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(a.bitLength());"millerRabinTests"in r&&(o=r.millerRabinTests);var c=10;"maxBlockTime"in r&&(c=r.maxBlockTime),function e(t,r,i,a,o,c,u){var l=+new Date;do{if(t.bitLength()>r&&(t=s(r,i)),t.isProbablePrime(o))return u(null,t);t.dAddOffset(n[a++%8],0)}while(c<0||+new Date-l<c);kU.util.setImmediate(function(){e(t,r,i,a,o,c,u)})}(a,e,t,0,o,c,i)}function s(e,t){var n=new r(e,t),o=e-1;return n.testBit(o)||n.bitwiseTo(r.ONE.shiftLeft(o),a,n),n.dAddOffset(31-n.mod(i).byteValue(),0),n}}()});if(void 0===Az)var Az=kU.jsbn.BigInteger;var Iz=kU.asn1;kU.pki=kU.pki||{};kU.pki.rsa=kU.rsa=kU.rsa||{};var Pz=kU.pki,Oz=[6,4,2,4,2,4,6,2],Rz={name:"PrivateKeyInfo",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},jz={name:"RSAPrivateKey",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Mz={name:"RSAPublicKey",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Nz=kU.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:Iz.Class.UNIVERSAL,type:Iz.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Bz=function(e){var t;if(!(e.algorithm in Pz.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=Pz.oids[e.algorithm];var n=Iz.oidToDer(t).getBytes(),i=Iz.create(Iz.Class.UNIVERSAL,Iz.Type.SEQUENCE,!0,[]),a=Iz.create(Iz.Class.UNIVERSAL,Iz.Type.SEQUENCE,!0,[]);a.value.push(Iz.create(Iz.Class.UNIVERSAL,Iz.Type.OID,!1,n)),a.value.push(Iz.create(Iz.Class.UNIVERSAL,Iz.Type.NULL,!1,""));var o=Iz.create(Iz.Class.UNIVERSAL,Iz.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(a),i.value.push(o),Iz.toDer(i).getBytes()},Dz=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var n;t.dP||(t.dP=t.d.mod(t.p.subtract(Az.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(Az.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{n=new Az(kU.util.bytesToHex(kU.random.getBytes(t.n.bitLength()/8)),16)}while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(Az.ONE));for(var i=(e=e.multiply(n.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(a)<0;)i=i.add(t.p);var o=i.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return o=o.multiply(n.modInverse(t.n)).mod(t.n)};function Fz(e,t,r){var n=kU.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var o,s=i-3-e.length;if(0===r||1===r){o=0===r?0:255;for(var c=0;c<s;++c)n.putByte(o)}else for(;s>0;){var u=0,l=kU.random.getBytes(s);for(c=0;c<s;++c)0===(o=l.charCodeAt(c))?++u:n.putByte(o);s=u}return n.putByte(0),n.putBytes(e),n}function Lz(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),a=kU.util.createBuffer(e),o=a.getByte(),s=a.getByte();if(0!==o||r&&0!==s&&1!==s||!r&&2!=s||r&&0===s&&void 0===n)throw new Error("Encryption block is invalid.");var c=0;if(0===s){c=i-3-n;for(var u=0;u<c;++u)if(0!==a.getByte())throw new Error("Encryption block is invalid.")}else if(1===s)for(c=0;a.length()>1;){if(255!==a.getByte()){--a.read;break}++c}else if(2===s)for(c=0;a.length()>1;){if(0===a.getByte()){--a.read;break}++c}if(0!==a.getByte()||c!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function Uz(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=kU.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function zz(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function Vz(e){return"undefined"!=typeof window&&"object"==typeof window.crypto&&"object"==typeof window.crypto.subtle&&"function"==typeof window.crypto.subtle[e]}function qz(e){return"undefined"!=typeof window&&"object"==typeof window.msCrypto&&"object"==typeof window.msCrypto.subtle&&"function"==typeof window.msCrypto.subtle[e]}function Kz(e){for(var t=kU.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}Pz.rsa.encrypt=function(e,t,r){var n,i=r,a=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(i=2===r,n=Fz(e,t,r)):(n=kU.util.createBuffer()).putBytes(e);for(var o=new Az(n.toHex(),16),s=Dz(o,t,i).toString(16),c=kU.util.createBuffer(),u=a-Math.ceil(s.length/2);u>0;)c.putByte(0),--u;return c.putBytes(kU.util.hexToBytes(s)),c.getBytes()},Pz.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=i,a}var o=new Az(kU.util.createBuffer(e).toHex(),16);if(o.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var s=Dz(o,t,r).toString(16),c=kU.util.createBuffer(),u=i-Math.ceil(s.length/2);u>0;)c.putByte(0),--u;return c.putBytes(kU.util.hexToBytes(s)),!1!==n?Lz(c.getBytes(),t,r):c.getBytes()},Pz.rsa.createKeyPairGenerationState=function(e,t,r){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048;var n,i=(r=r||{}).prng||kU.random,a={nextBytes:function(e){for(var t=i.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},o=r.algorithm||"PRIMEINC";if("PRIMEINC"!==o)throw new Error("Invalid key generation algorithm: "+o);return(n={algorithm:o,state:0,bits:e,rng:a,eInt:t||65537,e:new Az(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(n.eInt),n},Pz.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new Az(null);r.fromInt(30);for(var n,i=0,a=function(e,t){return e|t},o=+new Date,s=0;null===e.keys&&(t<=0||s<t);){if(0===e.state){var c=null===e.p?e.pBits:e.qBits,u=c-1;0===e.pqState?(e.num=new Az(c,e.rng),e.num.testBit(u)||e.num.bitwiseTo(Az.ONE.shiftLeft(u),a,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),i=0,++e.pqState):1===e.pqState?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(zz(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(Oz[i++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(Az.ONE).gcd(e.e).compareTo(Az.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(Az.ONE),e.q1=e.q.subtract(Az.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(Az.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var l=e.e.modInverse(e.phi);e.keys={privateKey:Pz.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:Pz.rsa.setPublicKey(e.n,e.e)}}s+=(n=+new Date)-o,o=n}return null!==e.keys},Pz.rsa.generateKeyPair=function(e,t,r,n){if(1===arguments.length?"object"==typeof e?(r=e,e=void 0):"function"==typeof e&&(n=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof t?(n=t,t=void 0):"number"!=typeof t&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof r&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),n&&e>=256&&e<=16384&&(65537===t||3===t)){if(Vz("generateKey")&&Vz("exportKey"))return window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:Kz(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(e){return window.crypto.subtle.exportKey("pkcs8",e.privateKey)}).then(void 0,function(e){n(e)}).then(function(e){if(e){var t=Pz.privateKeyFromAsn1(Iz.fromDer(kU.util.createBuffer(e)));n(null,{privateKey:t,publicKey:Pz.setRsaPublicKey(t.n,t.e)})}});if(qz("generateKey")&&qz("exportKey")){var i=window.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:Kz(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return i.oncomplete=function(e){var t=e.target.result,r=window.msCrypto.subtle.exportKey("pkcs8",t.privateKey);r.oncomplete=function(e){var t=e.target.result,r=Pz.privateKeyFromAsn1(Iz.fromDer(kU.util.createBuffer(t)));n(null,{privateKey:r,publicKey:Pz.setRsaPublicKey(r.n,r.e)})},r.onerror=function(e){n(e)}},void(i.onerror=function(e){n(e)})}}var a=Pz.rsa.createKeyPairGenerationState(e,t,r);if(!n)return Pz.rsa.stepKeyPairGenerationState(a,0),a.keys;!function(e,t,r){"function"==typeof t&&(r=t,t={});var n={algorithm:{name:(t=t||{}).algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng);function i(){a(e.pBits,function(t,n){return t?r(t):(e.p=n,null!==e.q?o(t,e.q):void a(e.qBits,o))})}function a(e,t){kU.prime.generateProbablePrime(e,n,t)}function o(t,n){if(t)return r(t);if(e.q=n,e.p.compareTo(e.q)<0){var s=e.p;e.p=e.q,e.q=s}if(0!==e.p.subtract(Az.ONE).gcd(e.e).compareTo(Az.ONE))return e.p=null,void i();if(0!==e.q.subtract(Az.ONE).gcd(e.e).compareTo(Az.ONE))return e.q=null,void a(e.qBits,o);if(e.p1=e.p.subtract(Az.ONE),e.q1=e.q.subtract(Az.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(Az.ONE))return e.p=e.q=null,void i();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void a(e.qBits,o);var c=e.e.modInverse(e.phi);e.keys={privateKey:Pz.rsa.setPrivateKey(e.n,e.e,c,e.p,e.q,c.mod(e.p1),c.mod(e.q1),e.q.modInverse(e.p)),publicKey:Pz.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}i()}(a,r,n)},Pz.setRsaPublicKey=Pz.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(e,t,n){if("string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return Fz(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return kU.pkcs1.encode_rsa_oaep(t,e,n)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"==typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var i=t.encode(e,r,!0);return Pz.rsa.encrypt(i,r,!0)},verify:function(e,t,n){"string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===n?n={verify:function(e,t){return t=Lz(t,r,!0),e===Iz.fromDer(t).value[1].value}}:"NONE"!==n&&"NULL"!==n&&null!==n||(n={verify:function(e,t){return e===(t=Lz(t,r,!0))}});var i=Pz.rsa.decrypt(t,r,!0,!1);return n.verify(e,i,r.n.bitLength())}};return r},Pz.setRsaPrivateKey=Pz.rsa.setPrivateKey=function(e,t,r,n,i,a,o,s){var c={n:e,e:t,d:r,p:n,q:i,dP:a,dQ:o,qInv:s,decrypt:function(e,t,r){"string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var n=Pz.rsa.decrypt(e,c,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:Lz};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return kU.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(n,c,!1)},sign:function(e,t){var r=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:Bz},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,c.n.bitLength());return Pz.rsa.encrypt(n,c,r)}};return c},Pz.wrapRsaPrivateKey=function(e){return Iz.create(Iz.Class.UNIVERSAL,Iz.Type.SEQUENCE,!0,[Iz.create(Iz.Class.UNIVERSAL,Iz.Type.INTEGER,!1,Iz.integerToDer(0).getBytes()),Iz.create(Iz.Class.UNIVERSAL,Iz.Type.SEQUENCE,!0,[Iz.create(Iz.Class.UNIVERSAL,Iz.Type.OID,!1,Iz.oidToDer(Pz.oids.rsaEncryption).getBytes()),Iz.create(Iz.Class.UNIVERSAL,Iz.Type.NULL,!1,"")]),Iz.create(Iz.Class.UNIVERSAL,Iz.Type.OCTETSTRING,!1,Iz.toDer(e).getBytes())])},Pz.privateKeyFromAsn1=function(e){var t,r,n,i,a,o,s,c,u={},l=[];if(Iz.validate(e,Rz,u,l)&&(e=Iz.fromDer(kU.util.createBuffer(u.privateKey))),u={},l=[],!Iz.validate(e,jz,u,l)){var f=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw f.errors=l,f}return t=kU.util.createBuffer(u.privateKeyModulus).toHex(),r=kU.util.createBuffer(u.privateKeyPublicExponent).toHex(),n=kU.util.createBuffer(u.privateKeyPrivateExponent).toHex(),i=kU.util.createBuffer(u.privateKeyPrime1).toHex(),a=kU.util.createBuffer(u.privateKeyPrime2).toHex(),o=kU.util.createBuffer(u.privateKeyExponent1).toHex(),s=kU.util.createBuffer(u.privateKeyExponent2).toHex(),c=kU.util.createBuffer(u.privateKeyCoefficient).toHex(),Pz.setRsaPrivateKey(new Az(t,16),new Az(r,16),new Az(n,16),new Az(i,16),new Az(a,16),new Az(o,16),new Az(s,16),new Az(c,16))},Pz.privateKeyToAsn1=Pz.privateKeyToRSAPrivateKey=function(e){return Iz.create(Iz.Class.UNIVERSAL,Iz.Type.SEQUENCE,!0,[Iz.create(Iz.Class.UNIVERSAL,Iz.Type.INTEGER,!1,Iz.integerToDer(0).getBytes()),Iz.create(Iz.Class.UNIVERSAL,Iz.Type.INTEGER,!1,Uz(e.n)),Iz.create(Iz.Class.UNIVERSAL,Iz.Type.INTEGER,!1,Uz(e.e)),Iz.create(Iz.Class.UNIVERSAL,Iz.Type.INTEGER,!1,Uz(e.d)),Iz.create(Iz.Class.UNIVERSAL,Iz.Type.INTEGER,!1,Uz(e.p)),Iz.create(Iz.Class.UNIVERSAL,Iz.Type.INTEGER,!1,Uz(e.q)),Iz.create(Iz.Class.UNIVERSAL,Iz.Type.INTEGER,!1,Uz(e.dP)),Iz.create(Iz.Class.UNIVERSAL,Iz.Type.INTEGER,!1,Uz(e.dQ)),Iz.create(Iz.Class.UNIVERSAL,Iz.Type.INTEGER,!1,Uz(e.qInv))])},Pz.publicKeyFromAsn1=function(e){var t={},r=[];if(Iz.validate(e,Nz,t,r)){var n,i=Iz.derToOid(t.publicKeyOid);if(i!==Pz.oids.rsaEncryption)throw(n=new Error("Cannot read public key. Unknown OID.")).oid=i,n;e=t.rsaPublicKey}if(r=[],!Iz.validate(e,Mz,t,r))throw(n=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,n;var a=kU.util.createBuffer(t.publicKeyModulus).toHex(),o=kU.util.createBuffer(t.publicKeyExponent).toHex();return Pz.setRsaPublicKey(new Az(a,16),new Az(o,16))},Pz.publicKeyToAsn1=Pz.publicKeyToSubjectPublicKeyInfo=function(e){return Iz.create(Iz.Class.UNIVERSAL,Iz.Type.SEQUENCE,!0,[Iz.create(Iz.Class.UNIVERSAL,Iz.Type.SEQUENCE,!0,[Iz.create(Iz.Class.UNIVERSAL,Iz.Type.OID,!1,Iz.oidToDer(Pz.oids.rsaEncryption).getBytes()),Iz.create(Iz.Class.UNIVERSAL,Iz.Type.NULL,!1,"")]),Iz.create(Iz.Class.UNIVERSAL,Iz.Type.BITSTRING,!1,[Pz.publicKeyToRSAPublicKey(e)])])},Pz.publicKeyToRSAPublicKey=function(e){return Iz.create(Iz.Class.UNIVERSAL,Iz.Type.SEQUENCE,!0,[Iz.create(Iz.Class.UNIVERSAL,Iz.Type.INTEGER,!1,Uz(e.n)),Iz.create(Iz.Class.UNIVERSAL,Iz.Type.INTEGER,!1,Uz(e.e))])};n(function(e){var t=kU.asn1,r=e.exports=kU.pki=kU.pki||{},n=r.oids,i={};i.CN=n.commonName,i.commonName="CN",i.C=n.countryName,i.countryName="C",i.L=n.localityName,i.localityName="L",i.ST=n.stateOrProvinceName,i.stateOrProvinceName="ST",i.O=n.organizationName,i.organizationName="O",i.OU=n.organizationalUnitName,i.organizationalUnitName="OU",i.E=n.emailAddress,i.emailAddress="E";var a=kU.pki.rsa.publicKeyValidator,o={name:"Certificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},a,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},s={name:"rsapss",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},c={name:"CertificationRequestInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},a,{name:"CertificationRequestInfo.attributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0}]}]}]},u={name:"CertificationRequest",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[c,{name:"CertificationRequest.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function l(e,t){"string"==typeof t&&(t={shortName:t});for(var r,n=null,i=0;null===n&&i<e.attributes.length;++i)r=e.attributes[i],t.type&&t.type===r.type?n=r:t.name&&t.name===r.name?n=r:t.shortName&&t.shortName===r.shortName&&(n=r);return n}r.RDNAttributesAsArray=function(e,r){for(var a,o,s,c=[],u=0;u<e.value.length;++u){a=e.value[u];for(var l=0;l<a.value.length;++l)s={},o=a.value[l],s.type=t.derToOid(o.value[0].value),s.value=o.value[1].value,s.valueTagClass=o.value[1].type,s.type in n&&(s.name=n[s.type],s.name in i&&(s.shortName=i[s.name])),r&&(r.update(s.type),r.update(s.value)),c.push(s)}return c},r.CRIAttributesAsArray=function(e){for(var a=[],o=0;o<e.length;++o)for(var s=e[o],c=t.derToOid(s.value[0].value),u=s.value[1].value,l=0;l<u.length;++l){var f={};if(f.type=c,f.value=u[l].value,f.valueTagClass=u[l].type,f.type in n&&(f.name=n[f.type],f.name in i&&(f.shortName=i[f.name])),f.type===n.extensionRequest){f.extensions=[];for(var p=0;p<f.value.length;++p)f.extensions.push(r.certificateExtensionFromAsn1(f.value[p]))}a.push(f)}return a};var f=function(e,r,i){var a={};if(e!==n["RSASSA-PSS"])return a;i&&(a={hash:{algorithmOid:n.sha1},mgf:{algorithmOid:n.mgf1,hash:{algorithmOid:n.sha1}},saltLength:20});var o={},c=[];if(!t.validate(r,s,o,c)){var u=new Error("Cannot read RSASSA-PSS parameter block.");throw u.errors=c,u}return void 0!==o.hashOid&&(a.hash=a.hash||{},a.hash.algorithmOid=t.derToOid(o.hashOid)),void 0!==o.maskGenOid&&(a.mgf=a.mgf||{},a.mgf.algorithmOid=t.derToOid(o.maskGenOid),a.mgf.hash=a.mgf.hash||{},a.mgf.hash.algorithmOid=t.derToOid(o.maskGenHashOid)),void 0!==o.saltLength&&(a.saltLength=o.saltLength.charCodeAt(0)),a};function p(e){for(var r,n,i=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),a=e.attributes,o=0;o<a.length;++o){var s=(r=a[o]).value,c=t.Type.PRINTABLESTRING;"valueTagClass"in r&&(c=r.valueTagClass)===t.Type.UTF8&&(s=kU.util.encodeUtf8(s)),n=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.type).getBytes()),t.create(t.Class.UNIVERSAL,c,!1,s)])]),i.value.push(n)}return i}function d(e){for(var a,o=0;o<e.length;++o){if(void 0===(a=e[o]).name&&(a.type&&a.type in r.oids?a.name=r.oids[a.type]:a.shortName&&a.shortName in i&&(a.name=r.oids[i[a.shortName]])),void 0===a.type){if(!(a.name&&a.name in r.oids))throw(c=new Error("Attribute type not specified.")).attribute=a,c;a.type=r.oids[a.name]}if(void 0===a.shortName&&a.name&&a.name in i&&(a.shortName=i[a.name]),a.type===n.extensionRequest&&(a.valueConstructed=!0,a.valueTagClass=t.Type.SEQUENCE,!a.value&&a.extensions)){a.value=[];for(var s=0;s<a.extensions.length;++s)a.value.push(r.certificateExtensionToAsn1(h(a.extensions[s])))}var c;if(void 0===a.value)throw(c=new Error("Attribute value not specified.")).attribute=a,c}}function h(e,i){if(i=i||{},void 0===e.name&&e.id&&e.id in r.oids&&(e.name=r.oids[e.id]),void 0===e.id){if(!(e.name&&e.name in r.oids))throw(w=new Error("Extension ID not specified.")).extension=e,w;e.id=r.oids[e.name]}if(void 0!==e.value)return e;if("keyUsage"===e.name){var a=0,o=0,s=0;e.digitalSignature&&(o|=128,a=7),e.nonRepudiation&&(o|=64,a=6),e.keyEncipherment&&(o|=32,a=5),e.dataEncipherment&&(o|=16,a=4),e.keyAgreement&&(o|=8,a=3),e.keyCertSign&&(o|=4,a=2),e.cRLSign&&(o|=2,a=1),e.encipherOnly&&(o|=1,a=0),e.decipherOnly&&(s|=128,a=7);var c=String.fromCharCode(a);0!==s?c+=String.fromCharCode(o)+String.fromCharCode(s):0!==o&&(c+=String.fromCharCode(o)),e.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,c)}else if("basicConstraints"===e.name)e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var u=e.value.value;for(var l in e)!0===e[l]&&(l in n?u.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n[l]).getBytes())):-1!==l.indexOf(".")&&u.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(l).getBytes())))}else if("nsCertType"===e.name){a=0,o=0;e.client&&(o|=128,a=7),e.server&&(o|=64,a=6),e.email&&(o|=32,a=5),e.objsign&&(o|=16,a=4),e.reserved&&(o|=8,a=3),e.sslCA&&(o|=4,a=2),e.emailCA&&(o|=2,a=1),e.objCA&&(o|=1,a=0);c=String.fromCharCode(a);0!==o&&(c+=String.fromCharCode(o)),e.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,c)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);for(var f=0;f<e.altNames.length;++f){c=(g=e.altNames[f]).value;if(7===g.type&&g.ip){if(null===(c=kU.util.bytesFromIP(g.ip)))throw(w=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,w}else 8===g.type&&(c=g.oid?t.oidToDer(t.oidToDer(g.oid)):t.oidToDer(c));e.value.value.push(t.create(t.Class.CONTEXT_SPECIFIC,g.type,!1,c))}}else if("subjectKeyIdentifier"===e.name&&i.cert){var d=i.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=d.toHex(),e.value=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,d.getBytes())}else if("authorityKeyIdentifier"===e.name&&i.cert){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);u=e.value.value;if(e.keyIdentifier){var h=!0===e.keyIdentifier?i.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;u.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!1,h))}if(e.authorityCertIssuer){var v=[t.create(t.Class.CONTEXT_SPECIFIC,4,!0,[p(!0===e.authorityCertIssuer?i.cert.issuer:e.authorityCertIssuer)])];u.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,v))}if(e.serialNumber){var m=kU.util.hexToBytes(!0===e.serialNumber?i.cert.serialNumber:e.serialNumber);u.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if("cRLDistributionPoints"===e.name){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);u=e.value.value;var g,y=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),b=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(f=0;f<e.altNames.length;++f){c=(g=e.altNames[f]).value;if(7===g.type&&g.ip){if(null===(c=kU.util.bytesFromIP(g.ip)))throw(w=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,w}else 8===g.type&&(c=g.oid?t.oidToDer(t.oidToDer(g.oid)):t.oidToDer(c));b.value.push(t.create(t.Class.CONTEXT_SPECIFIC,g.type,!1,c))}y.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[b])),u.push(y)}var w;if(void 0===e.value)throw(w=new Error("Extension value not specified.")).extension=e,w;return e}function v(e,r){switch(e){case n["RSASSA-PSS"]:var i=[];return void 0!==r.hash.algorithmOid&&i.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])),void 0!==r.mgf.algorithmOid&&i.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.mgf.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.mgf.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])])),void 0!==r.saltLength&&i.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(r.saltLength).getBytes())])),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,i);default:return t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")}}function m(e){var r=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return r;for(var n=e.attributes,i=0;i<n.length;++i){var a=n[i],o=a.value,s=t.Type.UTF8;"valueTagClass"in a&&(s=a.valueTagClass),s===t.Type.UTF8&&(o=kU.util.encodeUtf8(o));var c=!1;"valueConstructed"in a&&(c=a.valueConstructed);var u=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(a.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,s,c,o)])]);r.value.push(u)}return r}r.certificateFromPem=function(e,n,i){var a=kU.pem.decode(e)[0];if("CERTIFICATE"!==a.type&&"X509 CERTIFICATE"!==a.type&&"TRUSTED CERTIFICATE"!==a.type){var o=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw o.headerType=a.type,o}if(a.procType&&"ENCRYPTED"===a.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=t.fromDer(a.body,i);return r.certificateFromAsn1(s,n)},r.certificateToPem=function(e,n){var i={type:"CERTIFICATE",body:t.toDer(r.certificateToAsn1(e)).getBytes()};return kU.pem.encode(i,{maxline:n})},r.publicKeyFromPem=function(e){var n=kU.pem.decode(e)[0];if("PUBLIC KEY"!==n.type&&"RSA PUBLIC KEY"!==n.type){var i=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw i.headerType=n.type,i}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var a=t.fromDer(n.body);return r.publicKeyFromAsn1(a)},r.publicKeyToPem=function(e,n){var i={type:"PUBLIC KEY",body:t.toDer(r.publicKeyToAsn1(e)).getBytes()};return kU.pem.encode(i,{maxline:n})},r.publicKeyToRSAPublicKeyPem=function(e,n){var i={type:"RSA PUBLIC KEY",body:t.toDer(r.publicKeyToRSAPublicKey(e)).getBytes()};return kU.pem.encode(i,{maxline:n})},r.getPublicKeyFingerprint=function(e,n){var i,a=(n=n||{}).md||kU.md.sha1.create();switch(n.type||"RSAPublicKey"){case"RSAPublicKey":i=t.toDer(r.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=t.toDer(r.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+n.type+'".')}a.start(),a.update(i);var o=a.digest();if("hex"===n.encoding){var s=o.toHex();return n.delimiter?s.match(/.{2}/g).join(n.delimiter):s}if("binary"===n.encoding)return o.getBytes();if(n.encoding)throw new Error('Unknown encoding "'+n.encoding+'".');return o},r.certificationRequestFromPem=function(e,n,i){var a=kU.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==a.type){var o=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw o.headerType=a.type,o}if(a.procType&&"ENCRYPTED"===a.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=t.fromDer(a.body,i);return r.certificationRequestFromAsn1(s,n)},r.certificationRequestToPem=function(e,n){var i={type:"CERTIFICATE REQUEST",body:t.toDer(r.certificationRequestToAsn1(e)).getBytes()};return kU.pem.encode(i,{maxline:n})},r.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return l(e.issuer,t)},e.issuer.addField=function(t){d([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return l(e.subject,t)},e.subject.addField=function(t){d([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){d(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){d(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)h(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){"string"==typeof t&&(t={name:t});for(var r,n=null,i=0;null===n&&i<e.extensions.length;++i)r=e.extensions[i],t.id&&r.id===t.id?n=r:t.name&&r.name===t.name&&(n=r);return n},e.sign=function(i,a){e.md=a||kU.md.sha1.create();var o=n[e.md.algorithm+"WithRSAEncryption"];if(!o){var s=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw s.algorithm=e.md.algorithm,s}e.signatureOid=e.siginfo.algorithmOid=o,e.tbsCertificate=r.getTBSCertificate(e);var c=t.toDer(e.tbsCertificate);e.md.update(c.getBytes()),e.signature=i.sign(e.md)},e.verify=function(i){var a=!1;if(!e.issued(i)){var o=i.issuer,s=e.subject;throw(h=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.")).expectedIssuer=o.attributes,h.actualIssuer=s.attributes,h}var c=i.md;if(null===c){if(i.signatureOid in n)switch(n[i.signatureOid]){case"sha1WithRSAEncryption":c=kU.md.sha1.create();break;case"md5WithRSAEncryption":c=kU.md.md5.create();break;case"sha256WithRSAEncryption":c=kU.md.sha256.create();break;case"sha384WithRSAEncryption":c=kU.md.sha384.create();break;case"sha512WithRSAEncryption":c=kU.md.sha512.create();break;case"RSASSA-PSS":c=kU.md.sha256.create()}if(null===c)throw(h=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=i.signatureOid,h;var u=i.tbsCertificate||r.getTBSCertificate(i),l=t.toDer(u);c.update(l.getBytes())}if(null!==c){var f;switch(i.signatureOid){case n.sha1WithRSAEncryption:f=void 0;break;case n["RSASSA-PSS"]:var p,d,h;if(void 0===(p=n[i.signatureParameters.mgf.hash.algorithmOid])||void 0===kU.md[p])throw(h=new Error("Unsupported MGF hash function.")).oid=i.signatureParameters.mgf.hash.algorithmOid,h.name=p,h;if(void 0===(d=n[i.signatureParameters.mgf.algorithmOid])||void 0===kU.mgf[d])throw(h=new Error("Unsupported MGF function.")).oid=i.signatureParameters.mgf.algorithmOid,h.name=d,h;if(d=kU.mgf[d].create(kU.md[p].create()),void 0===(p=n[i.signatureParameters.hash.algorithmOid])||void 0===kU.md[p])throw{message:"Unsupported RSASSA-PSS hash function.",oid:i.signatureParameters.hash.algorithmOid,name:p};f=kU.pss.create(kU.md[p].create(),d,i.signatureParameters.saltLength)}a=e.publicKey.verify(c.digest().getBytes(),i.signature,f)}return a},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var a,o;r=!0;for(var s=0;r&&s<n.attributes.length;++s)a=n.attributes[s],o=i.attributes[s],a.type===o.type&&a.value===o.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return r.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=n.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var i=e.extensions[r];if(i.id===t){var a=e.generateSubjectKeyIdentifier().getBytes();return kU.util.hexToBytes(i.subjectKeyIdentifier)===a}}return!1},e},r.certificateFromAsn1=function(e,i){var a={},s=[];if(!t.validate(e,o,a,s))throw(h=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.")).errors=s,h;if(t.derToOid(a.publicKeyOid)!==r.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var c=r.createCertificate();c.version=a.certVersion?a.certVersion.charCodeAt(0):0;var u=kU.util.createBuffer(a.certSerialNumber);c.serialNumber=u.toHex(),c.signatureOid=kU.asn1.derToOid(a.certSignatureOid),c.signatureParameters=f(c.signatureOid,a.certSignatureParams,!0),c.siginfo.algorithmOid=kU.asn1.derToOid(a.certinfoSignatureOid),c.siginfo.parameters=f(c.siginfo.algorithmOid,a.certinfoSignatureParams,!1),c.signature=a.certSignature;var p=[];if(void 0!==a.certValidity1UTCTime&&p.push(t.utcTimeToDate(a.certValidity1UTCTime)),void 0!==a.certValidity2GeneralizedTime&&p.push(t.generalizedTimeToDate(a.certValidity2GeneralizedTime)),void 0!==a.certValidity3UTCTime&&p.push(t.utcTimeToDate(a.certValidity3UTCTime)),void 0!==a.certValidity4GeneralizedTime&&p.push(t.generalizedTimeToDate(a.certValidity4GeneralizedTime)),p.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(p.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(c.validity.notBefore=p[0],c.validity.notAfter=p[1],c.tbsCertificate=a.tbsCertificate,i){var h;if(c.md=null,c.signatureOid in n)switch(n[c.signatureOid]){case"sha1WithRSAEncryption":c.md=kU.md.sha1.create();break;case"md5WithRSAEncryption":c.md=kU.md.md5.create();break;case"sha256WithRSAEncryption":c.md=kU.md.sha256.create();break;case"sha384WithRSAEncryption":c.md=kU.md.sha384.create();break;case"sha512WithRSAEncryption":c.md=kU.md.sha512.create();break;case"RSASSA-PSS":c.md=kU.md.sha256.create()}if(null===c.md)throw(h=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=c.signatureOid,h;var v=t.toDer(c.tbsCertificate);c.md.update(v.getBytes())}var m=kU.md.sha1.create();c.issuer.getField=function(e){return l(c.issuer,e)},c.issuer.addField=function(e){d([e]),c.issuer.attributes.push(e)},c.issuer.attributes=r.RDNAttributesAsArray(a.certIssuer,m),a.certIssuerUniqueId&&(c.issuer.uniqueId=a.certIssuerUniqueId),c.issuer.hash=m.digest().toHex();var g=kU.md.sha1.create();return c.subject.getField=function(e){return l(c.subject,e)},c.subject.addField=function(e){d([e]),c.subject.attributes.push(e)},c.subject.attributes=r.RDNAttributesAsArray(a.certSubject,g),a.certSubjectUniqueId&&(c.subject.uniqueId=a.certSubjectUniqueId),c.subject.hash=g.digest().toHex(),a.certExtensions?c.extensions=r.certificateExtensionsFromAsn1(a.certExtensions):c.extensions=[],c.publicKey=r.publicKeyFromAsn1(a.subjectPublicKeyInfo),c},r.certificateExtensionsFromAsn1=function(e){for(var t=[],n=0;n<e.value.length;++n)for(var i=e.value[n],a=0;a<i.value.length;++a)t.push(r.certificateExtensionFromAsn1(i.value[a]));return t},r.certificateExtensionFromAsn1=function(e){var r={};if(r.id=t.derToOid(e.value[0].value),r.critical=!1,e.value[1].type===t.Type.BOOLEAN?(r.critical=0!==e.value[1].value.charCodeAt(0),r.value=e.value[2].value):r.value=e.value[1].value,r.id in n)if(r.name=n[r.id],"keyUsage"===r.name){var i=0,a=0;(s=t.fromDer(r.value)).value.length>1&&(i=s.value.charCodeAt(1),a=s.value.length>2?s.value.charCodeAt(2):0),r.digitalSignature=128==(128&i),r.nonRepudiation=64==(64&i),r.keyEncipherment=32==(32&i),r.dataEncipherment=16==(16&i),r.keyAgreement=8==(8&i),r.keyCertSign=4==(4&i),r.cRLSign=2==(2&i),r.encipherOnly=1==(1&i),r.decipherOnly=128==(128&a)}else if("basicConstraints"===r.name){(s=t.fromDer(r.value)).value.length>0&&s.value[0].type===t.Type.BOOLEAN?r.cA=0!==s.value[0].value.charCodeAt(0):r.cA=!1;var o=null;s.value.length>0&&s.value[0].type===t.Type.INTEGER?o=s.value[0].value:s.value.length>1&&(o=s.value[1].value),null!==o&&(r.pathLenConstraint=t.derToInteger(o))}else if("extKeyUsage"===r.name)for(var s=t.fromDer(r.value),c=0;c<s.value.length;++c){var u=t.derToOid(s.value[c].value);u in n?r[n[u]]=!0:r[u]=!0}else if("nsCertType"===r.name){i=0;(s=t.fromDer(r.value)).value.length>1&&(i=s.value.charCodeAt(1)),r.client=128==(128&i),r.server=64==(64&i),r.email=32==(32&i),r.objsign=16==(16&i),r.reserved=8==(8&i),r.sslCA=4==(4&i),r.emailCA=2==(2&i),r.objCA=1==(1&i)}else if("subjectAltName"===r.name||"issuerAltName"===r.name){var l;r.altNames=[];s=t.fromDer(r.value);for(var f=0;f<s.value.length;++f){var p={type:(l=s.value[f]).type,value:l.value};switch(r.altNames.push(p),l.type){case 1:case 2:case 6:break;case 7:p.ip=kU.util.bytesToIP(l.value);break;case 8:p.oid=t.derToOid(l.value)}}}else if("subjectKeyIdentifier"===r.name){s=t.fromDer(r.value);r.subjectKeyIdentifier=kU.util.bytesToHex(s.value)}return r},r.certificationRequestFromAsn1=function(e,i){var a={},o=[];if(!t.validate(e,u,a,o))throw(c=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.")).errors=o,c;if(t.derToOid(a.publicKeyOid)!==r.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=r.createCertificationRequest();if(s.version=a.csrVersion?a.csrVersion.charCodeAt(0):0,s.signatureOid=kU.asn1.derToOid(a.csrSignatureOid),s.signatureParameters=f(s.signatureOid,a.csrSignatureParams,!0),s.siginfo.algorithmOid=kU.asn1.derToOid(a.csrSignatureOid),s.siginfo.parameters=f(s.siginfo.algorithmOid,a.csrSignatureParams,!1),s.signature=a.csrSignature,s.certificationRequestInfo=a.certificationRequestInfo,i){var c;if(s.md=null,s.signatureOid in n)switch(n[s.signatureOid]){case"sha1WithRSAEncryption":s.md=kU.md.sha1.create();break;case"md5WithRSAEncryption":s.md=kU.md.md5.create();break;case"sha256WithRSAEncryption":s.md=kU.md.sha256.create();break;case"sha384WithRSAEncryption":s.md=kU.md.sha384.create();break;case"sha512WithRSAEncryption":s.md=kU.md.sha512.create();break;case"RSASSA-PSS":s.md=kU.md.sha256.create()}if(null===s.md)throw(c=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=s.signatureOid,c;var p=t.toDer(s.certificationRequestInfo);s.md.update(p.getBytes())}var h=kU.md.sha1.create();return s.subject.getField=function(e){return l(s.subject,e)},s.subject.addField=function(e){d([e]),s.subject.attributes.push(e)},s.subject.attributes=r.RDNAttributesAsArray(a.certificationRequestInfoSubject,h),s.subject.hash=h.digest().toHex(),s.publicKey=r.publicKeyFromAsn1(a.subjectPublicKeyInfo),s.getAttribute=function(e){return l(s,e)},s.addAttribute=function(e){d([e]),s.attributes.push(e)},s.attributes=r.CRIAttributesAsArray(a.certificationRequestInfoAttributes||[]),s},r.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return l(e.subject,t)},e.subject.addField=function(t){d([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return l(e,t)},e.addAttribute=function(t){d([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){d(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){d(t),e.attributes=t},e.sign=function(i,a){e.md=a||kU.md.sha1.create();var o=n[e.md.algorithm+"WithRSAEncryption"];if(!o){var s=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw s.algorithm=e.md.algorithm,s}e.signatureOid=e.siginfo.algorithmOid=o,e.certificationRequestInfo=r.getCertificationRequestInfo(e);var c=t.toDer(e.certificationRequestInfo);e.md.update(c.getBytes()),e.signature=i.sign(e.md)},e.verify=function(){var i=!1,a=e.md;if(null===a){if(e.signatureOid in n)switch(n[e.signatureOid]){case"sha1WithRSAEncryption":a=kU.md.sha1.create();break;case"md5WithRSAEncryption":a=kU.md.md5.create();break;case"sha256WithRSAEncryption":a=kU.md.sha256.create();break;case"sha384WithRSAEncryption":a=kU.md.sha384.create();break;case"sha512WithRSAEncryption":a=kU.md.sha512.create();break;case"RSASSA-PSS":a=kU.md.sha256.create()}if(null===a)throw(f=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=e.signatureOid,f;var o=e.certificationRequestInfo||r.getCertificationRequestInfo(e),s=t.toDer(o);a.update(s.getBytes())}if(null!==a){var c;switch(e.signatureOid){case n.sha1WithRSAEncryption:break;case n["RSASSA-PSS"]:var u,l,f;if(void 0===(u=n[e.signatureParameters.mgf.hash.algorithmOid])||void 0===kU.md[u])throw(f=new Error("Unsupported MGF hash function.")).oid=e.signatureParameters.mgf.hash.algorithmOid,f.name=u,f;if(void 0===(l=n[e.signatureParameters.mgf.algorithmOid])||void 0===kU.mgf[l])throw(f=new Error("Unsupported MGF function.")).oid=e.signatureParameters.mgf.algorithmOid,f.name=l,f;if(l=kU.mgf[l].create(kU.md[u].create()),void 0===(u=n[e.signatureParameters.hash.algorithmOid])||void 0===kU.md[u])throw(f=new Error("Unsupported RSASSA-PSS hash function.")).oid=e.signatureParameters.hash.algorithmOid,f.name=u,f;c=kU.pss.create(kU.md[u].create(),l,e.signatureParameters.saltLength)}i=e.publicKey.verify(a.digest().getBytes(),e.signature,c)}return i},e},r.getTBSCertificate=function(e){var n=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,kU.util.hexToBytes(e.serialNumber)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.siginfo.algorithmOid).getBytes()),v(e.siginfo.algorithmOid,e.siginfo.parameters)]),p(e.issuer),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(e.validity.notBefore)),t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(e.validity.notAfter))]),p(e.subject),r.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(r.certificateExtensionsToAsn1(e.extensions)),n},r.getCertificationRequestInfo=function(e){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),p(e.subject),r.publicKeyToAsn1(e.publicKey),m(e)])},r.distinguishedNameToAsn1=function(e){return p(e)},r.certificateToAsn1=function(e){var n=e.tbsCertificate||r.getTBSCertificate(e);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[n,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureOid).getBytes()),v(e.signatureOid,e.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},r.certificateExtensionsToAsn1=function(e){var n=t.create(t.Class.CONTEXT_SPECIFIC,3,!0,[]),i=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);n.value.push(i);for(var a=0;a<e.length;++a)i.value.push(r.certificateExtensionToAsn1(e[a]));return n},r.certificateExtensionToAsn1=function(e){var r=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);r.value.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.id).getBytes())),e.critical&&r.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255)));var n=e.value;return"string"!=typeof e.value&&(n=t.toDer(n).getBytes()),r.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n)),r},r.certificationRequestToAsn1=function(e){var n=e.certificationRequestInfo||r.getCertificationRequestInfo(e);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[n,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureOid).getBytes()),v(e.signatureOid,e.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},r.createCaStore=function(e){var n={certs:{}};function i(e){return a(e),n.certs[e.hash]||null}function a(e){if(!e.hash){var t=kU.md.sha1.create();e.attributes=r.RDNAttributesAsArray(p(e),t),e.hash=t.digest().toHex()}}if(n.getIssuer=function(e){return i(e.issuer)},n.addCertificate=function(e){if("string"==typeof e&&(e=kU.pki.certificateFromPem(e)),a(e.subject),!n.hasCertificate(e))if(e.subject.hash in n.certs){var t=n.certs[e.subject.hash];kU.util.isArray(t)||(t=[t]),t.push(e),n.certs[e.subject.hash]=t}else n.certs[e.subject.hash]=e},n.hasCertificate=function(e){"string"==typeof e&&(e=kU.pki.certificateFromPem(e));var n=i(e.subject);if(!n)return!1;kU.util.isArray(n)||(n=[n]);for(var a=t.toDer(r.certificateToAsn1(e)).getBytes(),o=0;o<n.length;++o){if(a===t.toDer(r.certificateToAsn1(n[o])).getBytes())return!0}return!1},n.listAllCertificates=function(){var e=[];for(var t in n.certs)if(n.certs.hasOwnProperty(t)){var r=n.certs[t];if(kU.util.isArray(r))for(var i=0;i<r.length;++i)e.push(r[i]);else e.push(r)}return e},n.removeCertificate=function(e){var o;if("string"==typeof e&&(e=kU.pki.certificateFromPem(e)),a(e.subject),!n.hasCertificate(e))return null;var s=i(e.subject);if(!kU.util.isArray(s))return o=n.certs[e.subject.hash],delete n.certs[e.subject.hash],o;for(var c=t.toDer(r.certificateToAsn1(e)).getBytes(),u=0;u<s.length;++u){c===t.toDer(r.certificateToAsn1(s[u])).getBytes()&&(o=s[u],s.splice(u,1))}return 0===s.length&&delete n.certs[e.subject.hash],o},e)for(var o=0;o<e.length;++o){var s=e[o];n.addCertificate(s)}return n},r.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},r.verifyCertificateChain=function(e,t,n){var i=(t=t.slice(0)).slice(0),a=new Date,o=!0,s=null,c=0;do{var u=t.shift(),l=null,f=!1;if((a<u.validity.notBefore||a>u.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:r.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:a}),null===s){if(null===(l=t[0]||e.getIssuer(u))&&u.isIssuer(u)&&(f=!0,l=u),l){var p=l;kU.util.isArray(p)||(p=[p]);for(var d=!1;!d&&p.length>0;){l=p.shift();try{d=l.verify(u)}catch(e){}}d||(s={message:"Certificate signature is invalid.",error:r.certificateError.bad_certificate})}null!==s||l&&!f||e.hasCertificate(u)||(s={message:"Certificate is not trusted.",error:r.certificateError.unknown_ca})}if(null===s&&l&&!u.isIssuer(l)&&(s={message:"Certificate issuer is invalid.",error:r.certificateError.bad_certificate}),null===s)for(var h={keyUsage:!0,basicConstraints:!0},v=0;null===s&&v<u.extensions.length;++v){var m=u.extensions[v];!m.critical||m.name in h||(s={message:"Certificate has an unsupported critical extension.",error:r.certificateError.unsupported_certificate})}if(null===s&&(!o||0===t.length&&(!l||f))){var g=u.getExtension("basicConstraints"),y=u.getExtension("keyUsage");if(null!==y&&(y.keyCertSign&&null!==g||(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:r.certificateError.bad_certificate})),null!==s||null===g||g.cA||(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:r.certificateError.bad_certificate}),null===s&&null!==y&&"pathLenConstraint"in g)c-1>g.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:r.certificateError.bad_certificate})}var b=null===s||s.error,w=n?n(b,c,i):b;if(!0!==w)throw!0===b&&(s={message:"The application rejected the certificate.",error:r.certificateError.bad_certificate}),(w||0===w)&&("object"!=typeof w||kU.util.isArray(w)?"string"==typeof w&&(s.error=w):(w.message&&(s.message=w.message),w.error&&(s.error=w.error))),s;s=null,o=!1,++c}while(t.length>0);return!0}}),n(function(e){var t=kU.asn1,r=e.exports=kU.pkcs7=kU.pkcs7||{};function n(e){var n={},i=[];if(!t.validate(e,r.asn1.recipientInfoValidator,n,i)){var a=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw a.errors=i,a}return{version:n.version.charCodeAt(0),issuer:kU.pki.RDNAttributesAsArray(n.issuer),serialNumber:kU.util.createBuffer(n.serial).toHex(),encryptedContent:{algorithm:t.derToOid(n.encAlgorithm),parameter:n.encParameter.value,content:n.encKey}}}function i(e){for(var r,n=[],i=0;i<e.length;++i)n.push((r=e[i],t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(r.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[kU.pki.distinguishedNameToAsn1({attributes:r.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,kU.util.hexToBytes(r.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.encryptedContent.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,r.encryptedContent.content)])));return n}function a(e){var r=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[kU.pki.distinguishedNameToAsn1({attributes:e.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,kU.util.hexToBytes(e.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.digestAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&r.value.push(e.authenticatedAttributesAsn1),r.value.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])),r.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var n=t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[]),i=0;i<e.unauthenticatedAttributes.length;++i){var a=e.unauthenticatedAttributes[i];n.values.push(o(a))}r.value.push(n)}return r}function o(e){var r;if(e.type===kU.pki.oids.contentType)r=t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.value).getBytes());else if(e.type===kU.pki.oids.messageDigest)r=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===kU.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),i=new Date("2050-01-01T00:00:00Z"),a=e.value;if("string"==typeof a){var o=Date.parse(a);a=isNaN(o)?13===a.length?t.utcTimeToDate(a):t.generalizedTimeToDate(a):new Date(o)}r=a>=n&&a<i?t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(a)):t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(a))}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[r])])}function s(e,r,n){var i={};if(!t.validate(r,n,i,[])){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}if(t.derToOid(i.contentType)!==kU.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(i.encryptedContent){var o="";if(kU.util.isArray(i.encryptedContent))for(var s=0;s<i.encryptedContent.length;++s){if(i.encryptedContent[s].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=i.encryptedContent[s].value}else o=i.encryptedContent;e.encryptedContent={algorithm:t.derToOid(i.encAlgorithm),parameter:kU.util.createBuffer(i.encParameter.value),content:kU.util.createBuffer(o)}}if(i.content){o="";if(kU.util.isArray(i.content))for(s=0;s<i.content.length;++s){if(i.content[s].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=i.content[s].value}else o=i.content;e.content=kU.util.createBuffer(o)}return e.version=i.version.charCodeAt(0),e.rawCapture=i,i}function c(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case kU.pki.oids["aes128-CBC"]:case kU.pki.oids["aes192-CBC"]:case kU.pki.oids["aes256-CBC"]:t=kU.aes.createDecryptionCipher(e.encryptedContent.key);break;case kU.pki.oids.desCBC:case kU.pki.oids["des-EDE3-CBC"]:t=kU.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}r.messageFromPem=function(e){var n=kU.pem.decode(e)[0];if("PKCS7"!==n.type){var i=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw i.headerType=n.type,i}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var a=t.fromDer(n.body);return r.messageFromAsn1(a)},r.messageToPem=function(e,r){var n={type:"PKCS7",body:t.toDer(e.toAsn1()).getBytes()};return kU.pem.encode(n,{maxline:r})},r.messageFromAsn1=function(e){var n={},i=[];if(!t.validate(e,r.asn1.contentInfoValidator,n,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw a.errors=i,a}var o,s=t.derToOid(n.contentType);switch(s){case kU.pki.oids.envelopedData:o=r.createEnvelopedData();break;case kU.pki.oids.encryptedData:o=r.createEncryptedData();break;case kU.pki.oids.signedData:o=r.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+s+" is not (yet) supported.")}return o.fromAsn1(n.content.value[0]),o},r.createSignedData=function(){var e=null;return e={type:kU.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(s(e,t,r.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var n=e.rawCapture.certificates.value,i=0;i<n.length;++i)e.certificates.push(kU.pki.certificateFromAsn1(n[i]))},toAsn1:function(){e.contentInfo||e.sign();for(var r=[],n=0;n<e.certificates.length;++n)r.push(kU.pki.certificateToAsn1(e.certificates[n]));var i=[],a=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return r.length>0&&a.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,r)),i.length>0&&a.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,i)),a.value[0].value.push(t.create(t.Class.UNIVERSAL,t.Type.SET,!0,e.signerInfos)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),a])},addSigner:function(t){var r=t.issuer,n=t.serialNumber;if(t.certificate){var i=t.certificate;"string"==typeof i&&(i=kU.pki.certificateFromPem(i)),r=i.issuer.attributes,n=i.serialNumber}var a=t.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof a&&(a=kU.pki.privateKeyFromPem(a));var o=t.digestAlgorithm||kU.pki.oids.sha1;switch(o){case kU.pki.oids.sha1:case kU.pki.oids.sha256:case kU.pki.oids.sha384:case kU.pki.oids.sha512:case kU.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+o)}var s=t.authenticatedAttributes||[];if(s.length>0){for(var c=!1,u=!1,l=0;l<s.length;++l){var f=s[l];if(c||f.type!==kU.pki.oids.contentType){if(u||f.type!==kU.pki.oids.messageDigest);else if(u=!0,c)break}else if(c=!0,u)break}if(!c||!u)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:a,version:1,issuer:r,serialNumber:n,digestAlgorithm:o,signatureAlgorithm:kU.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:s,unauthenticatedAttributes:[]})},sign:function(r){var n;(r=r||{},"object"!=typeof e.content||null===e.contentInfo)&&(e.contentInfo=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(kU.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof kU.util.ByteBuffer?n=e.content.bytes():"string"==typeof e.content&&(n=kU.util.encodeUtf8(e.content)),r.detached?e.detachedContent=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n):e.contentInfo.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n)]))));0!==e.signers.length&&function(r){var n;n=e.detachedContent?e.detachedContent:(n=e.contentInfo.value[1]).value[0];if(!n)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var i=t.derToOid(e.contentInfo.value[0].value),s=t.toDer(n);for(var c in s.getByte(),t.getBerValueLength(s),s=s.getBytes(),r)r[c].start().update(s);for(var u=new Date,l=0;l<e.signers.length;++l){var f=e.signers[l];if(0===f.authenticatedAttributes.length){if(i!==kU.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[]),d=0;d<f.authenticatedAttributes.length;++d){var h=f.authenticatedAttributes[d];h.type===kU.pki.oids.messageDigest?h.value=r[f.digestAlgorithm].digest():h.type===kU.pki.oids.signingTime&&(h.value||(h.value=u)),p.value.push(o(h)),f.authenticatedAttributesAsn1.value.push(o(h))}s=t.toDer(p).getBytes(),f.md.start().update(s)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(e){for(var t=[],r=0;r<e.length;++r)t.push(a(e[r]));return t}(e.signers)}(function(){for(var r={},n=0;n<e.signers.length;++n){var i=e.signers[n],a=i.digestAlgorithm;a in r||(r[a]=kU.md[kU.pki.oids[a]].create()),0===i.authenticatedAttributes.length?i.md=r[a]:i.md=kU.md[kU.pki.oids[a]].create()}for(var a in e.digestAlgorithmIdentifiers=[],r)e.digestAlgorithmIdentifiers.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(a).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]));return r}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"==typeof t&&(t=kU.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},r.createEncryptedData=function(){var e=null;return e={type:kU.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:kU.pki.oids["aes256-CBC"]},fromAsn1:function(t){s(e,t,r.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),c(e)}}},r.createEnvelopedData=function(){var e=null;return e={type:kU.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:kU.pki.oids["aes256-CBC"]},fromAsn1:function(t){var i=s(e,t,r.asn1.envelopedDataValidator);e.recipients=function(e){for(var t=[],r=0;r<e.length;++r)t.push(n(e[r]));return t}(i.recipientInfos.value)},toAsn1:function(){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,i(e.recipients)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,(r=e.encryptedContent,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(kU.pki.oids.data).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,r.parameter.getBytes())]),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,r.content.getBytes())])]))])])]);var r},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],a=i.issuer;if(i.serialNumber===t.serialNumber&&a.length===r.length){for(var o=!0,s=0;s<r.length;++s)if(a[s].type!==r[s].type||a[s].value!==r[s].value){o=!1;break}if(o)return i}}return null},decrypt:function(t,r){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==r)switch(t.encryptedContent.algorithm){case kU.pki.oids.rsaEncryption:case kU.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=kU.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}c(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:kU.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(void 0===e.encryptedContent.content){var n,i,a;switch(r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,r){case kU.pki.oids["aes128-CBC"]:n=16,i=16,a=kU.aes.createEncryptionCipher;break;case kU.pki.oids["aes192-CBC"]:n=24,i=16,a=kU.aes.createEncryptionCipher;break;case kU.pki.oids["aes256-CBC"]:n=32,i=16,a=kU.aes.createEncryptionCipher;break;case kU.pki.oids["des-EDE3-CBC"]:n=24,i=8,a=kU.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===t)t=kU.util.createBuffer(kU.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=kU.util.createBuffer(kU.random.getBytes(i));var o=a(t);if(o.start(e.encryptedContent.parameter.copy()),o.update(e.content),!o.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=o.output}for(var s=0;s<e.recipients.length;++s){var c=e.recipients[s];if(void 0===c.encryptedContent.content)switch(c.encryptedContent.algorithm){case kU.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}}}});var Gz=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Hz=[1,2,3,5];kU.rc2=kU.rc2||{};kU.rc2.expandKey=function(e,t){"string"==typeof e&&(e=kU.util.createBuffer(e)),t=t||128;var r,n=e,i=e.length(),a=t,o=Math.ceil(a/8),s=255>>(7&a);for(r=i;r<128;r++)n.putByte(Gz[n.at(r-1)+n.at(r-i)&255]);for(n.setAt(128-o,Gz[n.at(128-o)&s]),r=127-o;r>=0;r--)n.setAt(r,Gz[n.at(r+1)^n.at(r+o)]);return n};var Wz=function(e,t,r){var n,i,a,o,s=!1,c=null,u=null,l=null,f=[];for(e=kU.rc2.expandKey(e,t),a=0;a<64;a++)f.push(e.getInt16Le());r?(n=function(e){for(a=0;a<4;a++)e[a]+=f[o]+(e[(a+3)%4]&e[(a+2)%4])+(~e[(a+3)%4]&e[(a+1)%4]),e[a]=(t=e[a])<<(r=Hz[a])&65535|(65535&t)>>16-r,o++;var t,r},i=function(e){for(a=0;a<4;a++)e[a]+=f[63&e[(a+3)%4]]}):(n=function(e){for(a=3;a>=0;a--)e[a]=(65535&(t=e[a]))>>(r=Hz[a])|t<<16-r&65535,e[a]-=f[o]+(e[(a+3)%4]&e[(a+2)%4])+(~e[(a+3)%4]&e[(a+1)%4]),o--;var t,r},i=function(e){for(a=3;a>=0;a--)e[a]-=f[63&e[(a+3)%4]]});var p=function(e){var t=[];for(a=0;a<4;a++){var n=c.getInt16Le();null!==l&&(r?n^=l.getInt16Le():l.putInt16Le(n)),t.push(65535&n)}o=r?0:63;for(var i=0;i<e.length;i++)for(var s=0;s<e[i][0];s++)e[i][1](t);for(a=0;a<4;a++)null!==l&&(r?l.putInt16Le(t[a]):t[a]^=l.getInt16Le()),u.putInt16Le(t[a])},d=null;return d={start:function(e,t){e&&"string"==typeof e&&(e=kU.util.createBuffer(e)),s=!1,c=kU.util.createBuffer(),u=t||new kU.util.createBuffer,l=e,d.output=u},update:function(e){for(s||c.putBuffer(e);c.length()>=8;)p([[5,n],[1,i],[6,n],[1,i],[5,n]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,c,!r);else{var n=8===c.length()?8:8-c.length();c.fillWithByte(n,n)}if(t&&(s=!0,d.update()),!r&&(t=0===c.length()))if(e)t=e(8,u,!r);else{var i=u.length(),a=u.at(i-1);a>i?t=!1:u.truncate(a)}return t}}};if(kU.rc2.startEncrypting=function(e,t,r){var n=kU.rc2.createEncryptionCipher(e,128);return n.start(t,r),n},kU.rc2.createEncryptionCipher=function(e,t){return Wz(e,t,!0)},kU.rc2.startDecrypting=function(e,t,r){var n=kU.rc2.createDecryptionCipher(e,128);return n.start(t,r),n},kU.rc2.createDecryptionCipher=function(e,t){return Wz(e,t,!1)},void 0===$z)var $z=kU.jsbn.BigInteger;var Yz=kU.asn1,Jz=kU.pki=kU.pki||{},Qz=(Jz.pbe=kU.pbe=kU.pbe||{},Jz.oids),Zz={name:"EncryptedPrivateKeyInfo",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Xz={name:"PBES2Algorithms",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},eV={name:"pkcs-12PbeParams",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:Yz.Class.UNIVERSAL,type:Yz.Type.INTEGER,constructed:!1,capture:"iterations"}]};function tV(e,t){return e.start().update(t).digest().getBytes()}function rV(e){var t;if(e){if(!(t=Jz.oids[Yz.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return nV(t)}function nV(e){var t=kU.md;switch(e){case"hmacWithSHA224":t=kU.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!(t&&e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}Jz.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n,i,a,o=kU.random.getBytesSync(r.saltSize),s=r.count,c=Yz.integerToDer(s);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var u,l,f;switch(r.algorithm){case"aes128":n=16,u=16,l=Qz["aes128-CBC"],f=kU.aes.createEncryptionCipher;break;case"aes192":n=24,u=16,l=Qz["aes192-CBC"],f=kU.aes.createEncryptionCipher;break;case"aes256":n=32,u=16,l=Qz["aes256-CBC"],f=kU.aes.createEncryptionCipher;break;case"des":n=8,u=8,l=Qz.desCBC,f=kU.des.createEncryptionCipher;break;default:throw(g=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,g}var p="hmacWith"+r.prfAlgorithm.toUpperCase(),d=nV(p),h=kU.pkcs5.pbkdf2(t,o,s,n,d),v=kU.random.getBytesSync(u);(y=f(h)).start(v),y.update(Yz.toDer(e)),y.finish(),a=y.output.getBytes();var m=function(e,t,r,n){var i=Yz.create(Yz.Class.UNIVERSAL,Yz.Type.SEQUENCE,!0,[Yz.create(Yz.Class.UNIVERSAL,Yz.Type.OCTETSTRING,!1,e),Yz.create(Yz.Class.UNIVERSAL,Yz.Type.INTEGER,!1,t.getBytes())]);"hmacWithSHA1"!==n&&i.value.push(Yz.create(Yz.Class.UNIVERSAL,Yz.Type.INTEGER,!1,kU.util.hexToBytes(r.toString(16))),Yz.create(Yz.Class.UNIVERSAL,Yz.Type.SEQUENCE,!0,[Yz.create(Yz.Class.UNIVERSAL,Yz.Type.OID,!1,Yz.oidToDer(Jz.oids[n]).getBytes()),Yz.create(Yz.Class.UNIVERSAL,Yz.Type.NULL,!1,"")]));return i}(o,c,n,p);i=Yz.create(Yz.Class.UNIVERSAL,Yz.Type.SEQUENCE,!0,[Yz.create(Yz.Class.UNIVERSAL,Yz.Type.OID,!1,Yz.oidToDer(Qz.pkcs5PBES2).getBytes()),Yz.create(Yz.Class.UNIVERSAL,Yz.Type.SEQUENCE,!0,[Yz.create(Yz.Class.UNIVERSAL,Yz.Type.SEQUENCE,!0,[Yz.create(Yz.Class.UNIVERSAL,Yz.Type.OID,!1,Yz.oidToDer(Qz.pkcs5PBKDF2).getBytes()),m]),Yz.create(Yz.Class.UNIVERSAL,Yz.Type.SEQUENCE,!0,[Yz.create(Yz.Class.UNIVERSAL,Yz.Type.OID,!1,Yz.oidToDer(l).getBytes()),Yz.create(Yz.Class.UNIVERSAL,Yz.Type.OCTETSTRING,!1,v)])])])}else{var g;if("3des"!==r.algorithm)throw(g=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,g;n=24;var y,b=new kU.util.ByteBuffer(o);h=Jz.pbe.generatePkcs12Key(t,b,1,s,n),v=Jz.pbe.generatePkcs12Key(t,b,2,s,n);(y=kU.des.createEncryptionCipher(h)).start(v),y.update(Yz.toDer(e)),y.finish(),a=y.output.getBytes(),i=Yz.create(Yz.Class.UNIVERSAL,Yz.Type.SEQUENCE,!0,[Yz.create(Yz.Class.UNIVERSAL,Yz.Type.OID,!1,Yz.oidToDer(Qz["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),Yz.create(Yz.Class.UNIVERSAL,Yz.Type.SEQUENCE,!0,[Yz.create(Yz.Class.UNIVERSAL,Yz.Type.OCTETSTRING,!1,o),Yz.create(Yz.Class.UNIVERSAL,Yz.Type.INTEGER,!1,c.getBytes())])])}return Yz.create(Yz.Class.UNIVERSAL,Yz.Type.SEQUENCE,!0,[i,Yz.create(Yz.Class.UNIVERSAL,Yz.Type.OCTETSTRING,!1,a)])},Jz.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!Yz.validate(e,Zz,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var o=Yz.derToOid(n.encryptionOid),s=Jz.pbe.getCipher(o,n.encryptionParams,t),c=kU.util.createBuffer(n.encryptedData);return s.update(c),s.finish()&&(r=Yz.fromDer(s.output)),r},Jz.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:Yz.toDer(e).getBytes()};return kU.pem.encode(r,{maxline:t})},Jz.encryptedPrivateKeyFromPem=function(e){var t=kU.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return Yz.fromDer(t.body)},Jz.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var n=Jz.wrapRsaPrivateKey(Jz.privateKeyToAsn1(e));return n=Jz.encryptPrivateKeyInfo(n,t,r),Jz.encryptedPrivateKeyToPem(n)}var i,a,o,s;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,a=kU.random.getBytesSync(16),s=kU.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,a=kU.random.getBytesSync(16),s=kU.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,a=kU.random.getBytesSync(16),s=kU.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,a=kU.random.getBytesSync(8),s=kU.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,a=kU.random.getBytesSync(8),s=kU.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=s(kU.pbe.opensslDeriveBytes(t,a.substr(0,8),o));u.start(a),u.update(Yz.toDer(Jz.privateKeyToAsn1(e))),u.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:kU.util.bytesToHex(a).toUpperCase()},body:u.output.getBytes()};return kU.pem.encode(l)},Jz.decryptRsaPrivateKey=function(e,t){var r=null,n=kU.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==n.type&&"PRIVATE KEY"!==n.type&&"RSA PRIVATE KEY"!==n.type)throw(o=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=o,o;if(n.procType&&"ENCRYPTED"===n.procType.type){var i,a;switch(n.dekInfo.algorithm){case"DES-CBC":i=8,a=kU.des.createDecryptionCipher;break;case"DES-EDE3-CBC":i=24,a=kU.des.createDecryptionCipher;break;case"AES-128-CBC":i=16,a=kU.aes.createDecryptionCipher;break;case"AES-192-CBC":i=24,a=kU.aes.createDecryptionCipher;break;case"AES-256-CBC":i=32,a=kU.aes.createDecryptionCipher;break;case"RC2-40-CBC":i=5,a=function(e){return kU.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":i=8,a=function(e){return kU.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":i=16,a=function(e){return kU.rc2.createDecryptionCipher(e,128)};break;default:var o;throw(o=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".')).algorithm=n.dekInfo.algorithm,o}var s=kU.util.hexToBytes(n.dekInfo.parameters),c=a(kU.pbe.opensslDeriveBytes(t,s.substr(0,8),i));if(c.start(s),c.update(kU.util.createBuffer(n.body)),!c.finish())return r;r=c.output.getBytes()}else r=n.body;return null!==(r="ENCRYPTED PRIVATE KEY"===n.type?Jz.decryptPrivateKeyInfo(Yz.fromDer(r),t):Yz.fromDer(r))&&(r=Jz.privateKeyFromAsn1(r)),r},Jz.pbe.generatePkcs12Key=function(e,t,r,n,i,a){var o,s;if(null==a){if(!("sha1"in kU.md))throw new Error('"sha1" hash algorithm unavailable.');a=kU.md.sha1.create()}var c=a.digestLength,u=a.blockLength,l=new kU.util.ByteBuffer,f=new kU.util.ByteBuffer;if(null!=e){for(s=0;s<e.length;s++)f.putInt16(e.charCodeAt(s));f.putInt16(0)}var p=f.length(),d=t.length(),h=new kU.util.ByteBuffer;h.fillWithByte(r,u);var v=u*Math.ceil(d/u),m=new kU.util.ByteBuffer;for(s=0;s<v;s++)m.putByte(t.at(s%d));var g=u*Math.ceil(p/u),y=new kU.util.ByteBuffer;for(s=0;s<g;s++)y.putByte(f.at(s%p));var b=m;b.putBuffer(y);for(var w=Math.ceil(i/c),_=1;_<=w;_++){var E=new kU.util.ByteBuffer;E.putBytes(h.bytes()),E.putBytes(b.bytes());for(var S=0;S<n;S++)a.start(),a.update(E.getBytes()),E=a.digest();var x=new kU.util.ByteBuffer;for(s=0;s<u;s++)x.putByte(E.at(s%c));var C=Math.ceil(d/u)+Math.ceil(p/u),k=new kU.util.ByteBuffer;for(o=0;o<C;o++){var T=new kU.util.ByteBuffer(b.getBytes(u)),A=511;for(s=x.length()-1;s>=0;s--)A>>=8,A+=x.at(s)+T.at(s),T.setAt(s,255&A);k.putBuffer(T)}b=k,l.putBuffer(E)}return l.truncate(l.length()-i),l},Jz.pbe.getCipher=function(e,t,r){switch(e){case Jz.oids.pkcs5PBES2:return Jz.pbe.getCipherForPBES2(e,t,r);case Jz.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Jz.oids["pbewithSHAAnd40BitRC2-CBC"]:return Jz.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},Jz.pbe.getCipherForPBES2=function(e,t,r){var n,i={},a=[];if(!Yz.validate(t,Xz,i,a))throw(n=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,n;if((e=Yz.derToOid(i.kdfOid))!==Jz.oids.pkcs5PBKDF2)throw(n=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,n.supportedOids=["pkcs5PBKDF2"],n;if((e=Yz.derToOid(i.encOid))!==Jz.oids["aes128-CBC"]&&e!==Jz.oids["aes192-CBC"]&&e!==Jz.oids["aes256-CBC"]&&e!==Jz.oids["des-EDE3-CBC"]&&e!==Jz.oids.desCBC)throw(n=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,n.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],n;var o,s,c=i.kdfSalt,u=kU.util.createBuffer(i.kdfIterationCount);switch(u=u.getInt(u.length()<<3),Jz.oids[e]){case"aes128-CBC":o=16,s=kU.aes.createDecryptionCipher;break;case"aes192-CBC":o=24,s=kU.aes.createDecryptionCipher;break;case"aes256-CBC":o=32,s=kU.aes.createDecryptionCipher;break;case"des-EDE3-CBC":o=24,s=kU.des.createDecryptionCipher;break;case"desCBC":o=8,s=kU.des.createDecryptionCipher}var l=rV(i.prfOid),f=kU.pkcs5.pbkdf2(r,c,u,o,l),p=i.encIv,d=s(f);return d.start(p),d},Jz.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!Yz.validate(t,eV,n,i))throw(l=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=i,l;var a,o,s,c=kU.util.createBuffer(n.salt),u=kU.util.createBuffer(n.iterations);switch(u=u.getInt(u.length()<<3),e){case Jz.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:a=24,o=8,s=kU.des.startDecrypting;break;case Jz.oids["pbewithSHAAnd40BitRC2-CBC"]:a=5,o=8,s=function(e,t){var r=kU.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:var l;throw(l=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,l}var f=rV(n.prfOid),p=Jz.pbe.generatePkcs12Key(r,c,1,u,a,f);return f.start(),s(p,Jz.pbe.generatePkcs12Key(r,c,2,u,o,f))},Jz.pbe.opensslDeriveBytes=function(e,t,r,n){if(null==n){if(!("md5"in kU.md))throw new Error('"md5" hash algorithm unavailable.');n=kU.md.md5.create()}null===t&&(t="");for(var i=[tV(n,e+t)],a=16,o=1;a<r;++o,a+=16)i.push(tV(n,i[o-1]+e+t));return i.join("").substr(0,r)};n(function(e){var t=kU.asn1,r=kU.pki,n=e.exports=kU.pkcs12=kU.pkcs12||{},i={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},a={name:"PFX",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},i,{name:"PFX.macData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},o={name:"SafeBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},s={name:"Attribute",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,capture:"values"}]},c={name:"CertBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:t.Class.UNIVERSAL,type:t.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function u(e,t,r,n){for(var i=[],a=0;a<e.length;a++)for(var o=0;o<e[a].safeBags.length;o++){var s=e[a].safeBags[o];void 0!==n&&s.type!==n||(null!==t?void 0!==s.attributes[t]&&s.attributes[t].indexOf(r)>=0&&i.push(s):i.push(s))}return i}function l(e){if(e.composed||e.constructed){for(var t=kU.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function f(e,n){var i={},a=[];if(!t.validate(e,kU.pkcs7.asn1.encryptedDataValidator,i,a))throw(o=new Error("Cannot read EncryptedContentInfo.")).errors=a,o;var o,s=t.derToOid(i.contentType);if(s!==r.oids.data)throw(o=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=s,o;s=t.derToOid(i.encAlgorithm);var c=r.pbe.getCipher(s,i.encParameter,n),u=l(i.encryptedContentAsn1),f=kU.util.createBuffer(u.value);if(c.update(f),!c.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return c.output.getBytes()}function p(e,n,i){if(!n&&0===e.length)return[];if((e=t.fromDer(e,n)).tagClass!==t.Class.UNIVERSAL||e.type!==t.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var a=[],s=0;s<e.value.length;s++){var u=e.value[s],l={},f=[];if(!t.validate(u,o,l,f))throw(g=new Error("Cannot read SafeBag.")).errors=f,g;var p,h,v={type:t.derToOid(l.bagId),attributes:d(l.bagAttributes)};a.push(v);var m=l.bagValue.value[0];switch(v.type){case r.oids.pkcs8ShroudedKeyBag:if(null===(m=r.decryptPrivateKeyInfo(m,i)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case r.oids.keyBag:try{v.key=r.privateKeyFromAsn1(m)}catch(e){v.key=null,v.asn1=m}continue;case r.oids.certBag:p=c,h=function(){if(t.derToOid(l.certId)!==r.oids.x509Certificate){var e=new Error("Unsupported certificate type, only X.509 supported.");throw e.oid=t.derToOid(l.certId),e}var i=t.fromDer(l.cert,n);try{v.cert=r.certificateFromAsn1(i,!0)}catch(e){v.cert=null,v.asn1=i}};break;default:var g;throw(g=new Error("Unsupported PKCS#12 SafeBag type.")).oid=v.type,g}if(void 0!==p&&!t.validate(m,p,l,f))throw(g=new Error("Cannot read PKCS#12 "+p.name)).errors=f,g;h()}return a}function d(e){var n={};if(void 0!==e)for(var i=0;i<e.length;++i){var a={},o=[];if(!t.validate(e[i],s,a,o)){var c=new Error("Cannot read PKCS#12 BagAttribute.");throw c.errors=o,c}var u=t.derToOid(a.oid);if(void 0!==r.oids[u]){n[r.oids[u]]=[];for(var l=0;l<a.values.length;++l)n[r.oids[u]].push(a.values[l].value)}}return n}n.pkcs12FromAsn1=function(e,o,s){"string"==typeof o?(s=o,o=!0):void 0===o&&(o=!0);var c={};if(!t.validate(e,a,c,[]))throw(d=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=d,d;var d,h={version:c.version.charCodeAt(0),safeContents:[],getBags:function(e){var t,r={};return"localKeyId"in e?t=e.localKeyId:"localKeyIdHex"in e&&(t=kU.util.hexToBytes(e.localKeyIdHex)),void 0===t&&!("friendlyName"in e)&&"bagType"in e&&(r[e.bagType]=u(h.safeContents,null,null,e.bagType)),void 0!==t&&(r.localKeyId=u(h.safeContents,"localKeyId",t,e.bagType)),"friendlyName"in e&&(r.friendlyName=u(h.safeContents,"friendlyName",e.friendlyName,e.bagType)),r},getBagsByFriendlyName:function(e,t){return u(h.safeContents,"friendlyName",e,t)},getBagsByLocalKeyId:function(e,t){return u(h.safeContents,"localKeyId",e,t)}};if(3!==c.version.charCodeAt(0))throw(d=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=c.version.charCodeAt(0),d;if(t.derToOid(c.contentType)!==r.oids.data)throw(d=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=t.derToOid(c.contentType),d;var v=c.content.value[0];if(v.tagClass!==t.Class.UNIVERSAL||v.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(v=l(v),c.mac){var m=null,g=0,y=t.derToOid(c.macAlgorithm);switch(y){case r.oids.sha1:m=kU.md.sha1.create(),g=20;break;case r.oids.sha256:m=kU.md.sha256.create(),g=32;break;case r.oids.sha384:m=kU.md.sha384.create(),g=48;break;case r.oids.sha512:m=kU.md.sha512.create(),g=64;break;case r.oids.md5:m=kU.md.md5.create(),g=16}if(null===m)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+y);var b=new kU.util.ByteBuffer(c.macSalt),w="macIterations"in c?parseInt(kU.util.bytesToHex(c.macIterations),16):1,_=n.generateKey(s,b,3,w,g,m),E=kU.hmac.create();if(E.start(m,_),E.update(v.value),E.getMac().getBytes()!==c.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(e,n,a,o){if((n=t.fromDer(n,a)).tagClass!==t.Class.UNIVERSAL||n.type!==t.Type.SEQUENCE||!0!==n.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var s=0;s<n.value.length;s++){var c=n.value[s],u={},d=[];if(!t.validate(c,i,u,d)){var h=new Error("Cannot read ContentInfo.");throw h.errors=d,h}var v={encrypted:!1},m=null,g=u.content.value[0];switch(t.derToOid(u.contentType)){case r.oids.data:if(g.tagClass!==t.Class.UNIVERSAL||g.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");m=l(g).value;break;case r.oids.encryptedData:m=f(g,o),v.encrypted=!0;break;default:var h=new Error("Unsupported PKCS#12 contentType.");throw h.contentType=t.derToOid(u.contentType),h}v.safeBags=p(m,a,o),e.safeContents.push(v)}}(h,v.value,o,s),h},n.toPkcs12Asn1=function(e,i,a,o){(o=o||{}).saltSize=o.saltSize||8,o.count=o.count||2048,o.algorithm=o.algorithm||o.encAlgorithm||"aes128","useMac"in o||(o.useMac=!0),"localKeyId"in o||(o.localKeyId=null),"generateLocalKeyId"in o||(o.generateLocalKeyId=!0);var s,c=o.localKeyId;if(null!==c)c=kU.util.hexToBytes(c);else if(o.generateLocalKeyId)if(i){var u=kU.util.isArray(i)?i[0]:i;"string"==typeof u&&(u=r.certificateFromPem(u)),(k=kU.md.sha1.create()).update(t.toDer(r.certificateToAsn1(u)).getBytes()),c=k.digest().getBytes()}else c=kU.random.getBytes(20);var l=[];null!==c&&l.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.localKeyId).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,c)])])),"friendlyName"in o&&l.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.friendlyName).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.BMPSTRING,!1,o.friendlyName)])])),l.length>0&&(s=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,l));var f=[],p=[];null!==i&&(p=kU.util.isArray(i)?i:[i]);for(var d=[],h=0;h<p.length;++h){"string"==typeof(i=p[h])&&(i=r.certificateFromPem(i));var v=0===h?s:void 0,m=r.certificateToAsn1(i),g=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.certBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.x509Certificate).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(m).getBytes())])])]),v]);d.push(g)}if(d.length>0){var y=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,d),b=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(y).getBytes())])]);f.push(b)}var w=null;if(null!==e){var _=r.wrapRsaPrivateKey(r.privateKeyToAsn1(e));w=null===a?t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.keyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[_]),s]):t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.pkcs8ShroudedKeyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[r.encryptPrivateKeyInfo(_,a,o)]),s]);var E=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[w]),S=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(E).getBytes())])]);f.push(S)}var x,C=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,f);if(o.useMac){var k=kU.md.sha1.create(),T=new kU.util.ByteBuffer(kU.random.getBytes(o.saltSize)),A=o.count,I=(e=n.generateKey(a,T,3,A,20),kU.hmac.create());I.start(k,e),I.update(t.toDer(C).getBytes());var P=I.getMac();x=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.sha1).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,P.getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,T.getBytes()),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(A).getBytes())])}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(3).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(C).getBytes())])]),x])},n.generateKey=kU.pbe.generatePkcs12Key}),n(function(e){var t=kU.asn1,r=e.exports=kU.pki=kU.pki||{};r.pemToDer=function(e){var t=kU.pem.decode(e)[0];if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return kU.util.createBuffer(t.body)},r.privateKeyFromPem=function(e){var n=kU.pem.decode(e)[0];if("PRIVATE KEY"!==n.type&&"RSA PRIVATE KEY"!==n.type){var i=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw i.headerType=n.type,i}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var a=t.fromDer(n.body);return r.privateKeyFromAsn1(a)},r.privateKeyToPem=function(e,n){var i={type:"RSA PRIVATE KEY",body:t.toDer(r.privateKeyToAsn1(e)).getBytes()};return kU.pem.encode(i,{maxline:n})},r.privateKeyInfoToPem=function(e,r){var n={type:"PRIVATE KEY",body:t.toDer(e).getBytes()};return kU.pem.encode(n,{maxline:r})}}),n(function(e){var t=e.exports=kU.sha512=kU.sha512||{};kU.md.sha512=kU.md.algorithms.sha512=t;var r=kU.sha384=kU.sha512.sha384=kU.sha512.sha384||{};r.create=function(){return t.create("SHA-384")},kU.md.sha384=kU.md.algorithms.sha384=r,kU.sha512.sha256=kU.sha512.sha256||{create:function(){return t.create("SHA-512/256")}},kU.md["sha512/256"]=kU.md.algorithms["sha512/256"]=kU.sha512.sha256,kU.sha512.sha224=kU.sha512.sha224||{create:function(){return t.create("SHA-512/224")}},kU.md["sha512/224"]=kU.md.algorithms["sha512/224"]=kU.sha512.sha224,t.create=function(e){if(i||(n=String.fromCharCode(128),n+=kU.util.fillString(String.fromCharCode(0),128),a=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(o={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],o["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],o["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],o["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],i=!0),void 0===e&&(e="SHA-512"),!(e in o))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=o[e],r=null,c=kU.util.createBuffer(),u=new Array(80),l=0;l<80;++l)u[l]=new Array(2);var f=64;switch(e){case"SHA-384":f=48;break;case"SHA-512/256":f=32;break;case"SHA-512/224":f=28}var p={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:f,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){p.messageLength=0,p.fullMessageLength=p.messageLength128=[];for(var e=p.messageLengthSize/4,n=0;n<e;++n)p.fullMessageLength.push(0);c=kU.util.createBuffer(),r=new Array(t.length);for(n=0;n<t.length;++n)r[n]=t[n].slice(0);return p}};return p.start(),p.update=function(e,t){"utf8"===t&&(e=kU.util.encodeUtf8(e));var n=e.length;p.messageLength+=n,n=[n/4294967296>>>0,n>>>0];for(var i=p.fullMessageLength.length-1;i>=0;--i)p.fullMessageLength[i]+=n[1],n[1]=n[0]+(p.fullMessageLength[i]/4294967296>>>0),p.fullMessageLength[i]=p.fullMessageLength[i]>>>0,n[0]=n[1]/4294967296>>>0;return c.putBytes(e),s(r,u,c),(c.read>2048||0===c.length())&&c.compact(),p},p.digest=function(){var t=kU.util.createBuffer();t.putBytes(c.bytes());var i,a=p.fullMessageLength[p.fullMessageLength.length-1]+p.messageLengthSize&p.blockLength-1;t.putBytes(n.substr(0,p.blockLength-a));for(var o=8*p.fullMessageLength[0],l=0;l<p.fullMessageLength.length-1;++l)o+=(i=8*p.fullMessageLength[l+1])/4294967296>>>0,t.putInt32(o>>>0),o=i>>>0;t.putInt32(o);var f=new Array(r.length);for(l=0;l<r.length;++l)f[l]=r[l].slice(0);s(f,u,t);var d,h=kU.util.createBuffer();d="SHA-512"===e?f.length:"SHA-384"===e?f.length-2:f.length-4;for(l=0;l<d;++l)h.putInt32(f[l][0]),l===d-1&&"SHA-512/224"===e||h.putInt32(f[l][1]);return h},p};var n=null,i=!1,a=null,o=null;function s(e,t,r){for(var n,i,o,s,c,u,l,f,p,d,h,v,m,g,y,b,w,_,E,S,x,C,k,T,A,I,P,O,R,j,M,N,B,D=r.length();D>=128;){for(P=0;P<16;++P)t[P][0]=r.getInt32()>>>0,t[P][1]=r.getInt32()>>>0;for(;P<80;++P)n=(((O=(j=t[P-2])[0])>>>19|(R=j[1])<<13)^(R>>>29|O<<3)^O>>>6)>>>0,i=((O<<13|R>>>19)^(R<<3|O>>>29)^(O<<26|R>>>6))>>>0,o=(((O=(N=t[P-15])[0])>>>1|(R=N[1])<<31)^(O>>>8|R<<24)^O>>>7)>>>0,s=((O<<31|R>>>1)^(O<<24|R>>>8)^(O<<25|R>>>7))>>>0,M=t[P-7],B=t[P-16],R=i+M[1]+s+B[1],t[P][0]=n+M[0]+o+B[0]+(R/4294967296>>>0)>>>0,t[P][1]=R>>>0;for(h=e[0][0],v=e[0][1],m=e[1][0],g=e[1][1],y=e[2][0],b=e[2][1],w=e[3][0],_=e[3][1],E=e[4][0],S=e[4][1],x=e[5][0],C=e[5][1],k=e[6][0],T=e[6][1],A=e[7][0],I=e[7][1],P=0;P<80;++P)l=((E>>>14|S<<18)^(E>>>18|S<<14)^(S>>>9|E<<23))>>>0,f=(k^E&(x^k))>>>0,c=((h>>>28|v<<4)^(v>>>2|h<<30)^(v>>>7|h<<25))>>>0,u=((h<<4|v>>>28)^(v<<30|h>>>2)^(v<<25|h>>>7))>>>0,p=(h&m|y&(h^m))>>>0,d=(v&g|b&(v^g))>>>0,R=I+(((E<<18|S>>>14)^(E<<14|S>>>18)^(S<<23|E>>>9))>>>0)+((T^S&(C^T))>>>0)+a[P][1]+t[P][1],n=A+l+f+a[P][0]+t[P][0]+(R/4294967296>>>0)>>>0,i=R>>>0,o=c+p+((R=u+d)/4294967296>>>0)>>>0,s=R>>>0,A=k,I=T,k=x,T=C,x=E,C=S,E=w+n+((R=_+i)/4294967296>>>0)>>>0,S=R>>>0,w=y,_=b,y=m,b=g,m=h,g=v,h=n+o+((R=i+s)/4294967296>>>0)>>>0,v=R>>>0;R=e[0][1]+v,e[0][0]=e[0][0]+h+(R/4294967296>>>0)>>>0,e[0][1]=R>>>0,R=e[1][1]+g,e[1][0]=e[1][0]+m+(R/4294967296>>>0)>>>0,e[1][1]=R>>>0,R=e[2][1]+b,e[2][0]=e[2][0]+y+(R/4294967296>>>0)>>>0,e[2][1]=R>>>0,R=e[3][1]+_,e[3][0]=e[3][0]+w+(R/4294967296>>>0)>>>0,e[3][1]=R>>>0,R=e[4][1]+S,e[4][0]=e[4][0]+E+(R/4294967296>>>0)>>>0,e[4][1]=R>>>0,R=e[5][1]+C,e[5][0]=e[5][0]+x+(R/4294967296>>>0)>>>0,e[5][1]=R>>>0,R=e[6][1]+T,e[6][0]=e[6][0]+k+(R/4294967296>>>0)>>>0,e[6][1]=R>>>0,R=e[7][1]+I,e[7][0]=e[7][0]+A+(R/4294967296>>>0)>>>0,e[7][1]=R>>>0,D-=128}}});function iV(e){e=e||{},this.name="",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._blocks=this.blockSize/4,this._inBlock=new Array(this._blocks),this._outBlock=new Array(this._blocks)}iV.prototype.start=function(){},iV.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;var n;for(n=0;n<this._blocks;++n)this._inBlock[n]=e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._blocks;++n)t.putInt32(this._outBlock[n])},iV.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;var n;for(n=0;n<this._blocks;++n)this._inBlock[n]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._blocks;++n)t.putInt32(this._outBlock[n])},function(){var e,t=iV;e=function(){return new kU.aes.Algorithm("AES",t)},kU.cipher.registerAlgorithm("AES",e)}(),"function"==typeof setImmediate&&(kU.util.setImmediate=kU.util.nextTick=function(e){setImmediate(e)});var aV=kU;function oV(e,t){return void 0===t&&(t="utf8"),Ug(e)?cV(e.toString("base64")):cV(ig.from(e,t).toString("base64"))}function sV(e){return function(e){var t=e.length,r=t%4;if(!r)return e;var n=t,i=4-r,a=t+i,o=ig.alloc(a);for(o.write(e);i--;)o.write("=",n++);return o.toString()}(e=e.toString()).replace(/\-/g,"+").replace(/_/g,"/")}function cV(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var uV=oV;uV.encode=oV,uV.decode=function(e,t){return void 0===t&&(t="utf8"),ig.from(sV(e),"base64").toString(t)},uV.toBase64=sV,uV.fromBase64=cV,uV.toBuffer=function(e){return ig.from(sV(e),"base64")};var lV=uV;lV.default&&(lV=lV.default);var fV,pV={encode:function(e,t){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Ug(e)||(e=new ig(e,t)),lV.encode(e)},decode:lV.toBuffer},dV=n(function(e,t){var r=t;r.encode=function(e){var t=encodeURIComponent(e||"");return t=t.replace(/\%([0-9a-fA-F]{2})/g,function(e,t){return t=parseInt(t,16),String.fromCharCode(t)})},r.decode=function(e){var t=(e||"").replace(/[\u0080-\u00ff]/g,function(e){return"%"+(256|e.charCodeAt(0)).toString(16).substring(1)});return t=decodeURIComponent(t)}});var hV=fV={base64url:pV,utf8:dV,asBuffer:function(e,t){return Ug(e)?e:"string"==typeof e?"base64url"===(t=t||"binary")?fV.base64url.decode(e):new ig(e,t):(aV.util.isArrayBufferView(e)?e=e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteOffset+e.byteLength):aV.util.isArrayBuffer(e)&&(e=new Uint8Array(e)),new ig(e))},randomBytes:function(e){return new ig(aV.random.getBytes(e),"binary")}},vV=9007199254740991,mV="[object Arguments]",gV="[object Function]",yV="[object GeneratorFunction]",bV=/^(?:0|[1-9]\d*)$/;var wV=Object.prototype,_V=wV.hasOwnProperty,EV=wV.toString,SV=wV.propertyIsEnumerable,xV=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),CV=Math.max,kV=!SV.call({valueOf:1},"valueOf");function TV(e,t){var r=RV(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&jV(e)}(e)&&_V.call(e,"callee")&&(!SV.call(e,"callee")||EV.call(e)==mV)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var a in e)!t&&!_V.call(e,a)||i&&("length"==a||IV(a,n))||r.push(a);return r}function AV(e,t,r){var n=e[t];_V.call(e,t)&&OV(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function IV(e,t){return!!(t=null==t?vV:t)&&("number"==typeof e||bV.test(e))&&e>-1&&e%1==0&&e<t}function PV(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||wV)}function OV(e,t){return e===t||e!=e&&t!=t}var RV=Array.isArray;function jV(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=vV}(e.length)&&!function(e){var t=MV(e)?EV.call(e):"";return t==gV||t==yV}(e)}function MV(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var NV=function(e){return t=function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,o&&function(e,t,r){if(!MV(r))return!1;var n=typeof t;return!!("number"==n?jV(r)&&IV(t,r.length):"string"==n&&t in r)&&OV(r[t],e)}(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,a)}return t},r=CV(void 0===r?t.length-1:r,0),function(){for(var e=arguments,n=-1,i=CV(e.length-r,0),a=Array(i);++n<i;)a[n]=e[r+n];n=-1;for(var o=Array(r+1);++n<r;)o[n]=e[n];return o[r]=a,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(t,this,o)};var t,r}(function(e,t){if(kV||PV(t)||jV(t))!function(e,t,r,n){r||(r={});for(var i=-1,a=t.length;++i<a;){var o=t[i],s=n?n(r[o],e[o],o,r,e):void 0;AV(r,o,void 0===s?e[o]:s)}}(t,function(e){return jV(e)?TV(e):function(e){if(!PV(e))return xV(e);var t=[];for(var r in Object(e))_V.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}(t),e);else for(var r in t)_V.call(t,r)&&AV(e,r,t[r])}),BV=9007199254740991,DV="[object Arguments]",FV="[object Function]",LV="[object GeneratorFunction]",UV="object"==typeof e&&e&&e.Object===Object&&e,zV="object"==typeof self&&self&&self.Object===Object&&self,VV=UV||zV||Function("return this")();function qV(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var KV=Object.prototype,GV=KV.hasOwnProperty,HV=KV.toString,WV=VV.Symbol,$V=KV.propertyIsEnumerable,YV=WV?WV.isConcatSpreadable:void 0;function JV(e){return QV(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=BV}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?HV.call(e):"";return t==FV||t==LV}(e)}(e)}(e)&&GV.call(e,"callee")&&(!$V.call(e,"callee")||HV.call(e)==DV)}(e)||!!(YV&&e&&e[YV])}var QV=Array.isArray;var ZV=function(e){return e&&e.length?function e(t,r,n,i,a){var o=-1,s=t.length;for(n||(n=JV),a||(a=[]);++o<s;){var c=t[o];r>0&&n(c)?r>1?e(c,r-1,n,i,a):qV(a,c):i||(a[a.length]=c)}return a}(e,1):[]},XV="__lodash_hash_undefined__",eq=9007199254740991,tq="[object Function]",rq="[object GeneratorFunction]",nq=/^\[object .+?Constructor\]$/,iq="object"==typeof e&&e&&e.Object===Object&&e,aq="object"==typeof self&&self&&self.Object===Object&&self,oq=iq||aq||Function("return this")();function sq(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r,n){var i=e.length,a=r+(n?1:-1);for(;n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}(e,lq,r);var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function cq(e,t,r){for(var n=-1,i=e?e.length:0;++n<i;)if(r(t,e[n]))return!0;return!1}function uq(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function lq(e){return e!=e}function fq(e){return function(t){return e(t)}}function pq(e,t){return e.has(t)}var dq=Array.prototype,hq=Function.prototype,vq=Object.prototype,mq=oq["__core-js_shared__"],gq=function(){var e=/[^.]+$/.exec(mq&&mq.keys&&mq.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),yq=hq.toString,bq=vq.hasOwnProperty,wq=vq.toString,_q=RegExp("^"+yq.call(bq).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Eq=dq.splice,Sq=Math.max,xq=Math.min,Cq=Nq(oq,"Map"),kq=Nq(Object,"create");function Tq(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Aq(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Iq(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Pq(e){var t=-1,r=e?e.length:0;for(this.__data__=new Iq;++t<r;)this.add(e[t])}function Oq(e,t){for(var r,n,i=e.length;i--;)if((r=e[i][0])===(n=t)||r!=r&&n!=n)return i;return-1}function Rq(e){return!(!Dq(e)||(t=e,gq&&gq in t))&&(Bq(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?_q:nq).test(function(e){if(null!=e){try{return yq.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function jq(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=eq}(e.length)&&!Bq(e)}(e)}(e)?e:[]}function Mq(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function Nq(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Rq(r)?r:void 0}function Bq(e){var t=Dq(e)?wq.call(e):"";return t==tq||t==rq}function Dq(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}Tq.prototype.clear=function(){this.__data__=kq?kq(null):{}},Tq.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Tq.prototype.get=function(e){var t=this.__data__;if(kq){var r=t[e];return r===XV?void 0:r}return bq.call(t,e)?t[e]:void 0},Tq.prototype.has=function(e){var t=this.__data__;return kq?void 0!==t[e]:bq.call(t,e)},Tq.prototype.set=function(e,t){return this.__data__[e]=kq&&void 0===t?XV:t,this},Aq.prototype.clear=function(){this.__data__=[]},Aq.prototype.delete=function(e){var t=this.__data__,r=Oq(t,e);return!(r<0||(r==t.length-1?t.pop():Eq.call(t,r,1),0))},Aq.prototype.get=function(e){var t=this.__data__,r=Oq(t,e);return r<0?void 0:t[r][1]},Aq.prototype.has=function(e){return Oq(this.__data__,e)>-1},Aq.prototype.set=function(e,t){var r=this.__data__,n=Oq(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Iq.prototype.clear=function(){this.__data__={hash:new Tq,map:new(Cq||Aq),string:new Tq}},Iq.prototype.delete=function(e){return Mq(this,e).delete(e)},Iq.prototype.get=function(e){return Mq(this,e).get(e)},Iq.prototype.has=function(e){return Mq(this,e).has(e)},Iq.prototype.set=function(e,t){return Mq(this,e).set(e,t),this},Pq.prototype.add=Pq.prototype.push=function(e){return this.__data__.set(e,XV),this},Pq.prototype.has=function(e){return this.__data__.has(e)};var Fq=function(e,t){return t=Sq(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,i=Sq(r.length-t,0),a=Array(i);++n<i;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=a,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,o)}}(function(e){var t=uq(e,jq);return t.length&&t[0]===e[0]?function(e,t,r){for(var n=r?cq:sq,i=e[0].length,a=e.length,o=a,s=Array(a),c=1/0,u=[];o--;){var l=e[o];o&&t&&(l=uq(l,fq(t))),c=xq(l.length,c),s[o]=!r&&(t||i>=120&&l.length>=120)?new Pq(o&&l):void 0}l=e[0];var f=-1,p=s[0];e:for(;++f<i&&u.length<c;){var d=l[f],h=t?t(d):d;if(d=r||0!==d?d:0,!(p?pq(p,h):n(u,h,r))){for(o=a;--o;){var v=s[o];if(!(v?pq(v,h):n(e[o],h,r)))continue e}p&&p.push(h),u.push(d)}}return u}(t):[]}),Lq=200,Uq="__lodash_hash_undefined__",zq=1/0,Vq=9007199254740991,qq="[object Arguments]",Kq="[object Function]",Gq="[object GeneratorFunction]",Hq="[object Symbol]",Wq=/^\[object .+?Constructor\]$/,$q=/^(?:0|[1-9]\d*)$/,Yq="object"==typeof e&&e&&e.Object===Object&&e,Jq="object"==typeof self&&self&&self.Object===Object&&self,Qq=Yq||Jq||Function("return this")();function Zq(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r,n){var i=e.length,a=r+(n?1:-1);for(;n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}(e,rK,r);var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function Xq(e,t,r){for(var n=-1,i=e?e.length:0;++n<i;)if(r(t,e[n]))return!0;return!1}function eK(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function tK(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function rK(e){return e!=e}function nK(e,t){return e.has(t)}function iK(e,t){return function(r){return e(t(r))}}var aK=Array.prototype,oK=Function.prototype,sK=Object.prototype,cK=Qq["__core-js_shared__"],uK=function(){var e=/[^.]+$/.exec(cK&&cK.keys&&cK.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),lK=oK.toString,fK=sK.hasOwnProperty,pK=sK.toString,dK=RegExp("^"+lK.call(fK).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),hK=Qq.Symbol,vK=iK(Object.getPrototypeOf,Object),mK=sK.propertyIsEnumerable,gK=aK.splice,yK=hK?hK.isConcatSpreadable:void 0,bK=Object.getOwnPropertySymbols,wK=Math.max,_K=jK(Qq,"Map"),EK=jK(Object,"create");function SK(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function xK(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function CK(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function kK(e){var t=-1,r=e?e.length:0;for(this.__data__=new CK;++t<r;)this.add(e[t])}function TK(e,t){var r=UK(e)||LK(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var a in e)!t&&!fK.call(e,a)||i&&("length"==a||DK(a,n))||r.push(a);return r}function AK(e,t){for(var r,n,i=e.length;i--;)if((r=e[i][0])===(n=t)||r!=r&&n!=n)return i;return-1}function IK(e){return!(!qK(e)||(t=e,uK&&uK in t))&&(VK(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?dK:Wq).test(function(e){if(null!=e){try{return lK.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function PK(e){if(!qK(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t,r,n,i=(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||sK,t===n),a=[];for(var o in e)("constructor"!=o||!i&&fK.call(e,o))&&a.push(o);return a}function OK(e){return function(e,t,r){var n=t(e);return UK(e)?n:tK(n,r(e))}(e,GK,NK)}function RK(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function jK(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return IK(r)?r:void 0}SK.prototype.clear=function(){this.__data__=EK?EK(null):{}},SK.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},SK.prototype.get=function(e){var t=this.__data__;if(EK){var r=t[e];return r===Uq?void 0:r}return fK.call(t,e)?t[e]:void 0},SK.prototype.has=function(e){var t=this.__data__;return EK?void 0!==t[e]:fK.call(t,e)},SK.prototype.set=function(e,t){return this.__data__[e]=EK&&void 0===t?Uq:t,this},xK.prototype.clear=function(){this.__data__=[]},xK.prototype.delete=function(e){var t=this.__data__,r=AK(t,e);return!(r<0||(r==t.length-1?t.pop():gK.call(t,r,1),0))},xK.prototype.get=function(e){var t=this.__data__,r=AK(t,e);return r<0?void 0:t[r][1]},xK.prototype.has=function(e){return AK(this.__data__,e)>-1},xK.prototype.set=function(e,t){var r=this.__data__,n=AK(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},CK.prototype.clear=function(){this.__data__={hash:new SK,map:new(_K||xK),string:new SK}},CK.prototype.delete=function(e){return RK(this,e).delete(e)},CK.prototype.get=function(e){return RK(this,e).get(e)},CK.prototype.has=function(e){return RK(this,e).has(e)},CK.prototype.set=function(e,t){return RK(this,e).set(e,t),this},kK.prototype.add=kK.prototype.push=function(e){return this.__data__.set(e,Uq),this},kK.prototype.has=function(e){return this.__data__.has(e)};var MK=bK?iK(bK,Object):HK,NK=bK?function(e){for(var t=[];e;)tK(t,MK(e)),e=vK(e);return t}:HK;function BK(e){return UK(e)||LK(e)||!!(yK&&e&&e[yK])}function DK(e,t){return!!(t=null==t?Vq:t)&&("number"==typeof e||$q.test(e))&&e>-1&&e%1==0&&e<t}function FK(e){if("string"==typeof e||function(e){return"symbol"==typeof e||KK(e)&&pK.call(e)==Hq}(e))return e;var t=e+"";return"0"==t&&1/e==-zq?"-0":t}function LK(e){return function(e){return KK(e)&&zK(e)}(e)&&fK.call(e,"callee")&&(!mK.call(e,"callee")||pK.call(e)==qq)}var UK=Array.isArray;function zK(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Vq}(e.length)&&!VK(e)}function VK(e){var t=qK(e)?pK.call(e):"";return t==Kq||t==Gq}function qK(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function KK(e){return!!e&&"object"==typeof e}function GK(e){return zK(e)?TK(e,!0):PK(e)}function HK(){return[]}var WK=function(e,t){return t=wK(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,i=wK(r.length-t,0),a=Array(i);++n<i;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=a,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,o)}}(function(e,t){return null==e?{}:(t=eK(function e(t,r,n,i,a){var o=-1,s=t.length;for(n||(n=BK),a||(a=[]);++o<s;){var c=t[o];r>0&&n(c)?r>1?e(c,r-1,n,i,a):tK(a,c):i||(a[a.length]=c)}return a}(t,1),FK),function(e,t){return function(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=e[o];r(s,o)&&(a[o]=s)}return a}(e=Object(e),t,function(t,r){return r in e})}(e,function(e,t,r,n){var i,a=-1,o=Zq,s=!0,c=e.length,u=[],l=t.length;if(!c)return u;r&&(t=eK(t,(i=r,function(e){return i(e)}))),n?(o=Xq,s=!1):t.length>=Lq&&(o=nK,s=!1,t=new kK(t));e:for(;++a<c;){var f=e[a],p=r?r(f):f;if(f=n||0!==f?f:0,s&&p==p){for(var d=l;d--;)if(t[d]===p)continue e;u.push(f)}else o(t,p,n)||u.push(f)}return u}(OK(e),t)))}),$K=1/0,YK=9007199254740991,JK="[object Arguments]",QK="[object Function]",ZK="[object GeneratorFunction]",XK="[object Symbol]",eG="object"==typeof e&&e&&e.Object===Object&&e,tG="object"==typeof self&&self&&self.Object===Object&&self,rG=eG||tG||Function("return this")();function nG(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var iG=Object.prototype,aG=iG.hasOwnProperty,oG=iG.toString,sG=rG.Symbol,cG=iG.propertyIsEnumerable,uG=sG?sG.isConcatSpreadable:void 0,lG=Math.max;function fG(e){return dG(e)||function(e){return function(e){return hG(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=YK}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?oG.call(e):"";return t==QK||t==ZK}(e)}(e)}(e)&&aG.call(e,"callee")&&(!cG.call(e,"callee")||oG.call(e)==JK)}(e)||!!(uG&&e&&e[uG])}function pG(e){if("string"==typeof e||function(e){return"symbol"==typeof e||hG(e)&&oG.call(e)==XK}(e))return e;var t=e+"";return"0"==t&&1/e==-$K?"-0":t}var dG=Array.isArray;function hG(e){return!!e&&"object"==typeof e}var vG=function(e,t){return t=lG(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,i=lG(r.length-t,0),a=Array(i);++n<i;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=a,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,o)}}(function(e,t){return null==e?{}:function(e,t){return function(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=e[o];r(s,o)&&(a[o]=s)}return a}(e=Object(e),t,function(t,r){return r in e})}(e,function(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}(function e(t,r,n,i,a){var o=-1,s=t.length;for(n||(n=fG),a||(a=[]);++o<s;){var c=t[o];r>0&&n(c)?r>1?e(c,r-1,n,i,a):nG(a,c):i||(a[a.length]=c)}return a}(t,1),pG))}),mG=n(function(e,t){"undefined"==typeof Promise&&xF.polyfill(),t.int32ToBuffer=function(e,t){return(t=t||new ig(4))[0]=e>>>24&255,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=255&e,t};var r=Math.pow(2,32);t.int64ToBuffer=function(e,n){n=n||new ig(8);var i=Math.floor(e/r),a=e%r;return i=t.int32ToBuffer(i),a=t.int32ToBuffer(a),n=ig.concat([i,a])};var n={};Object.defineProperty(t,"subtleCrypto",{get:function(){return"subtleCrypto"in n?n.subtleCrypto:n.subtleCrypto=function(){if("undefined"!=typeof crypto&&void 0!==crypto.subtle)return crypto.subtle}()},enumerable:!0}),Object.defineProperty(t,"nodeCrypto",{get:function(){return"nodeCrypto"in n?n.nodeCrypto:n.nodeCrypto=function(){var e;try{e=KU}catch(e){return}if(Object.keys(e).length)return e}()},enumerable:!0}),t.setupFallback=function(e,r,n){return e&&t.nodeCrypto?function(){var t,r=arguments;try{t=Promise.resolve(e.apply(null,r))}catch(e){t=function(e){return 0===e.message.indexOf("unsupported algorithm:")?n.apply(null,r):Promise.reject(e)}(e)}return t}:r&&t.subtleCrypto?function(){var e,t=arguments;function i(e){return e.code!==DOMException.NOT_SUPPORTED_ERR&&"Only ArrayBuffer and ArrayBufferView objects can be passed as CryptoOperationData"!==e.message&&e instanceof Error?Promise.reject(e):n.apply(null,t)}try{e=(e=r.apply(null,t)).catch(i)}catch(t){e=i(t)}return e}:n}}),gG=(mG.int32ToBuffer,mG.int64ToBuffer,mG.setupFallback,{CHUNK_SIZE:1024,HASHLENGTH:{"SHA-1":160,"SHA-256":256,"SHA-384":384,"SHA-512":512},ENCLENGTH:{"AES-128-CBC":128,"AES-192-CBC":192,"AES-256-CBC":256,"AES-128-KW":128,"AES-192-KW":192,"AES-256-KW":256},KEYLENGTH:{"A128CBC-HS256":256,"A192CBC-HS384":384,"A256CBC-HS512":512,"A128CBC+HS256":256,"A192CBC+HS384":384,"A256CBC+HS512":512,A128GCM:128,A192GCM:192,A256GCM:256,A128KW:128,A192KW:192,A256KW:256,"ECDH-ES+A128KW":128,"ECDH-ES+A192KW":192,"ECDH-ES+A256KW":256},NONCELENGTH:{"A128CBC-HS256":128,"A192CBC-HS384":128,"A256CBC-HS512":128,"A128CBC+HS256":128,"A192CBC+HS384":128,"A256CBC+HS512":128,A128GCM:96,A192GCM:96,A256GCM:96}});function yG(e,t){t=t||{},Ug(e)?this.data=e:aV.util.isArrayBuffer(e)?(e=new Uint8Array(e),this.data=new ig(e)):aV.util.isArrayBufferView(e)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),this.data=new ig(e)),this.data&&(this.write=this.data.length,e=void 0),this.growSize=t.growSize||yG.DEFAULT_GROW_SIZE,this.write=this.write||0,this.read=this.read||0,e?this.putBytes(e):this.data||this.accommodate(0),t.readOffset="readOffset"in t?t.readOffset:this.read,this.write="writeOffset"in t?t.writeOffset:this.write,this.read=Math.min(t.readOffset,this.write)}yG.DEFAULT_GROW_SIZE=16,yG.prototype.length=function(){return this.write-this.read},yG.prototype.available=function(){return this.data.length-this.write},yG.prototype.isEmpty=function(){return this.length()<=0},yG.prototype.accommodate=function(e){if(this.data){if(this.available()<e){e=Math.max(e,this.growSize);var t=this.data,r=new ig(t.length+e);t.copy(r,0),this.data=r}}else e=Math.max(this.write+e,this.growSize),this.data=new ig(e);return this.data.fill(0,this.write),this},yG.prototype.clear=function(){return this.read=this.write=0,this.data=new ig(0),this},yG.prototype.truncate=function(e){return this.write=this.read+Math.max(0,this.length()-e),this.data.fill(0,this.write),this},yG.prototype.compact=function(){return this.read>0&&(this.write===this.read?this.read=this.write=0:(this.data.copy(this.data,0,this.read,this.write),this.write=this.write-this.read,this.read=0),this.data.fill(0,this.write)),this},yG.prototype.copy=function(){return new yG(this,{readOffset:this.read,writeOffset:this.write,growSize:this.growSize})},yG.prototype.equals=function(e){if(!yG.isBuffer(e))return!1;if(e.length()!==this.length())return!1;for(var t=!0,r=this.read-e.read,n=e.read;e.write>n;n++)t=t&&this.data[n+r]===e.data[n];return t},yG.prototype.at=function(e){return this.data[this.read+e]},yG.prototype.setAt=function(e,t){return this.data[this.read+e]=t,this},yG.prototype.last=function(){return this.data[this.write-1]},yG.prototype.bytes=function(e){var t;if(void 0===e?e=this.length():e&&(e=Math.min(e,this.length())),0===e)t="";else{var r=this.read,n=r+e,i=this.data.slice(r,n);t=String.fromCharCode.apply(null,i)}return t},yG.prototype.buffer=function(e){var t;if(void 0===e?e=this.length():e&&(e=Math.min(e,this.length())),0===e)t=new ArrayBuffer(0);else{var r=this.read,n=r+e,i=this.data.slice(r,n);(t=new Uint8Array(n-r)).set(i)}return t},yG.prototype.native=function(e){var t;if(void 0===e?e=this.length():e&&(e=Math.min(e,this.length())),0===e)t=new ig(0);else{var r=this.read,n=r+e;t=this.data.slice(r,n)}return t},yG.prototype.toHex=function(){return this.toString("hex")},yG.prototype.toString=function(e){if(0===this.length())return"";var t=this.data.slice(this.read,this.write);switch(e=e||"utf8"){case"raw":return t.toString("binary");case"base64url":return pV.encode(t);case"utf16":return t.toString("ucs2");default:return t.toString(e)}},yG.prototype.fillWithByte=function(e,t){return t||(t=this.available()),this.accommodate(t),this.data.fill(e,this.write,this.write+t),this.write+=t,this},yG.prototype.getBuffer=function(e){var t=this.buffer(e);return this.read+=t.byteLength,t},yG.prototype.putBuffer=function(e){return this.putBytes(e)},yG.prototype.getBytes=function(e){var t=this.bytes(e);return this.read+=t.length,t},yG.prototype.putBytes=function(e,t){if("string"==typeof e){switch(t=t||"binary"){case"utf16":t="ucs-2";break;case"raw":t="binary";break;case"base64url":e=pV.decode(e)}Ug(e)||(e=new ig(e,t))}var r,n;if(e instanceof yG){var i=e;e=i.data.slice(i.read,i.write),i.read=i.write}else e instanceof aV.util.ByteStringBuffer&&(e=e.getBytes());if(Ug(e))r=e;else if(Array.isArray(e))r=new ig(e);else if(aV.util.isArrayBuffer(e))r=new ig(r=new Uint8Array(e));else{if(!aV.util.isArrayBufferView(e))throw new TypeError("invalid source type");r=new ig(r=e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}return this.accommodate(r.length),n=this.data,r.copy(n,this.write),this.write+=r.length,this},yG.prototype.getNative=function(e){var t=this.native(e);return this.read+=t.length,t},yG.prototype.putNative=yG.prototype.putBuffer,yG.prototype.getByte=function(){var e=this.data[this.read];return this.read=Math.min(this.read+1,this.write),e},yG.prototype.putByte=function(e){return this.accommodate(1),this.data[this.write]=255&e,this.write++,this},yG.prototype.getInt16=function(){var e=this.data[this.read]<<8^this.data[this.read+1];return this.read=Math.min(this.read+2,this.write),e},yG.prototype.putInt16=function(e){return this.accommodate(2),this.data[this.write]=e>>>8&255,this.data[this.write+1]=255&e,this.write+=2,this},yG.prototype.getInt24=function(){var e=this.data[this.read]<<16^this.data[this.read+1]<<8^this.data[this.read+2];return this.read=Math.min(this.read+3,this.write),e},yG.prototype.putInt24=function(e){return this.accommodate(3),this.data[this.write]=e>>>16&255,this.data[this.write+1]=e>>>8&255,this.data[this.write+2]=255&e,this.write+=3,this},yG.prototype.getInt32=function(){var e=this.data[this.read]<<24^this.data[this.read+1]<<16^this.data[this.read+2]<<8^this.data[this.read+3];return this.read=Math.min(this.read+4,this.write),e},yG.prototype.putInt32=function(e){return this.accommodate(4),this.data[this.write]=e>>>24&255,this.data[this.write+1]=e>>>16&255,this.data[this.write+2]=e>>>8&255,this.data[this.write+3]=255&e,this.write+=4,this},yG.prototype.getInt16Le=function(){var e=this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+2,this.write),e},yG.prototype.putInt16Le=function(e){return this.accommodate(2),this.data[this.write+1]=e>>>8&255,this.data[this.write]=255&e,this.write+=2,this},yG.prototype.getInt24Le=function(){var e=this.data[this.read+2]<<16^this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+3,this.write),e},yG.prototype.putInt24Le=function(e){return this.accommodate(3),this.data[this.write+2]=e>>>16&255,this.data[this.write+1]=e>>>8&255,this.data[this.write]=255&e,this.write+=3,this},yG.prototype.getInt32Le=function(){var e=this.data[this.read+3]<<24^this.data[this.read+2]<<16^this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+4,this.write),e},yG.prototype.putInt32Le=function(e){return this.accommodate(4),this.data[this.write+3]=e>>>24&255,this.data[this.write+2]=e>>>16&255,this.data[this.write+1]=e>>>8&255,this.data[this.write]=255&e,this.write+=4,this},yG.prototype.getInt=function(e){var t=0;do{t=t<<8|this.getByte(),e-=8}while(e>0);return t},yG.prototype.putInt=function(e,t){this.accommodate(Math.ceil(t/8));do{t-=8,this.putByte(e>>t&255)}while(t>0);return this},yG.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},yG.prototype.putString=function(e){return this.putBytes(e,"utf16")},yG.isBuffer=function(e){return e instanceof yG},yG.asBuffer=function(e){return yG.isBuffer(e)?e:e?new yG(e):new yG};var bG=aV.util.ByteBuffer=yG;function wG(e){var t=e.replace("HS","SHA").toLowerCase(),r=e.replace("HS","SHA-");function n(e,t){return(e=(e||gG.HASHLENGTH[r])/8)>t.length?Promise.reject(new Error("invalid key length")):Promise.resolve(t)}return mG.setupFallback(function(e,r,i){return n((i=i||{}).length,e).then(function(){var n=mG.nodeCrypto.createHmac(t,e);n.update(r);var i=n.digest();return{data:r,mac:i}})},function(e,t,i){var a={name:"HMAC",hash:{name:r}};return n((i=i||{}).length,e).then(function(){return mG.subtleCrypto.importKey("raw",e,a,!0,["sign"])}).then(function(e){return mG.subtleCrypto.sign(a,e,t)}).then(function(e){var r=new ig(e);return{data:t,mac:r}})},function(e,r,i){return n((i=i||{}).length,e).then(function(){var n=aV.hmac.create();return n.start(t,e.toString("binary")),n.update(r),n=n.digest().native(),{data:r,mac:n}})})}function _G(e){var t=e.replace("HS","SHA").toLowerCase(),r=e.replace("HS","SHA-");function n(e,t,n){e=(e||gG.HASHLENGTH[r])/8;for(var i=!0,a=0;e>a;a++)i=i&&t[a]===n[a];return i}return mG.setupFallback(function(e,r,i,a){a=a||{};var o=mG.nodeCrypto.createHmac(t,e);o.update(r);var s=o.digest();if(!n(a.length,i,s))throw new Error("verification failed");return{data:r,mac:s,valid:!0}},function(e,t,i,a){var o={name:"HMAC",hash:{name:r}};return((a=a||{}).length?mG.subtleCrypto.importKey("raw",e,o,!0,["sign"]).then(function(e){return mG.subtleCrypto.sign(o,e,t)}).then(function(e){var t=new ig(e);return n(a.length,i,t)}):mG.subtleCrypto.importKey("raw",e,o,!0,["verify"]).then(function(e){return mG.subtleCrypto.verify(o,e,i,t)})).then(function(e){return e?{data:t,mac:i,valid:!0}:Promise.reject(new Error("verifaction failed"))})},function(e,r,i,a){a=a||{};var o=aV.hmac.create();return o.start(t,new bG(e)),o.update(r),o=o.digest().native(),n(a.length,i,o)?Promise.resolve({data:r,mac:i,valid:!0}):Promise.reject(new Error("verification failed"))})}var EG={};["HS1","HS256","HS384","HS512"].forEach(function(e){EG[e]={sign:wG(e),verify:_G(e)}});var SG=EG;var xG={};["SHA-1","SHA-256","SHA-384","SHA-512"].forEach(function(e){var t,r,n;xG[e]={digest:(t=e,r=t.replace("SHA-","SHA").toLowerCase(),n={name:t},mG.setupFallback(function(e){var t=mG.nodeCrypto.createHash(r);return t.update(e),t.digest()},function(e){return mG.subtleCrypto.digest(n,e).then(function(e){return e=new ig(e)})},function(e){var t=aV.md[r].create();return t.update(e),t=t.digest().native(),Promise.resolve(t)}))}});var CG=xG;function kG(e){if(16!==e.length)throw new Error("invalid iv")}function TG(e){return mG.setupFallback(function(t,r,n){try{kG(n)}catch(e){return Promise.reject(e)}var i=Promise.resolve(r);return i=i.then(function(r){var i="AES-"+e+"-CBC",a=mG.nodeCrypto.createCipheriv(i,t,n);return ig.concat([a.update(r),a.final()])})},function(e,t,r){try{kG(r)}catch(e){return Promise.reject(e)}var n=Promise.resolve();return n=(n=(n=n.then(function(){return mG.subtleCrypto.importKey("raw",e,{name:"AES-CBC"},!0,["encrypt"])})).then(function(e){var n={name:"AES-CBC",iv:r};return mG.subtleCrypto.encrypt(n,e,t)})).then(function(e){return e=new ig(e)})},function(e,t,r){try{kG(r)}catch(e){return Promise.reject(e)}var n=Promise.resolve();return n=n.then(function(){var n=aV.cipher.createCipher("AES-CBC",new bG(e));return n.start({iv:new bG(r)}),n.update(new bG(t)),n.finish()?n.output.native():Promise.reject(new Error("encryption failed"))})})}function AG(e){return mG.setupFallback(function(t,r,n){try{kG(n)}catch(e){return Promise.reject(e)}var i=Promise.resolve();return i=i.then(function(){var i="AES-"+e+"-CBC",a=mG.nodeCrypto.createDecipheriv(i,t,n);return ig.concat([a.update(r),a.final()])})},function(e,t,r){try{kG(r)}catch(e){return Promise.reject(e)}var n=Promise.resolve();return n=(n=(n=n.then(function(){return mG.subtleCrypto.importKey("raw",e,{name:"AES-CBC"},!0,["decrypt"])})).then(function(e){var n={name:"AES-CBC",iv:r};return mG.subtleCrypto.decrypt(n,e,t)})).then(function(e){return e=new ig(e)})},function(e,t,r){try{kG(r)}catch(e){return Promise.reject(e)}var n=Promise.resolve();return n=n.then(function(){var n=aV.cipher.createDecipher("AES-CBC",new bG(e));return n.start({iv:new bG(r)}),n.update(new bG(t)),n.finish()?n.output.native():Promise.reject(new Error("encryption failed"))})})}function IG(e,t){if(t<<1!=e.length<<3)throw new Error("invalid encryption key size")}function PG(e){var t=TG(e);return function(r,n,i){try{IG(r,e)}catch(e){return Promise.reject(e)}var a=r.slice(e/8),o=r.slice(0,e/8),s=i.iv||new ig(0),c=i.aad||i.adata||new ig(0),u=t(a,n,s);return u=u.then(function(t){var r=ig.concat([c,s,t,mG.int64ToBuffer(8*c.length)]);return SG["HS"+2*e].sign(o,r,{length:e}).then(function(r){var n=r.mac.slice(0,e/8);return{data:t,tag:n}})})}}function OG(e){var t=AG(e);return function(r,n,i){try{IG(r,e)}catch(e){return Promise.reject(e)}var a=r.slice(e/8),o=r.slice(0,e/8),s=i.iv||new ig(0),c=i.aad||i.adata||new ig(0),u=i.tag||i.mac||new ig(0),l=Promise.resolve();return l=(l=l.then(function(){var t=ig.concat([c,s,n,mG.int64ToBuffer(8*c.length)]);return SG["HS"+2*e].verify(o,t,u,{length:e}).then(function(){return n},function(){throw new Error("mac check failed")})})).then(function(){return t(a,n,s)})}}var RG=new ig("Encryption","utf8"),jG=new ig("Integrity","utf8"),MG=new ig(".","utf8");function NG(e,t,r,n){var i=8*e.length,a=i/2,o=Promise.resolve();return o=(o=o.then(function(){return ig.concat([mG.int32ToBuffer(1),e,mG.int32ToBuffer(a),new ig(t,"utf8"),r,n,RG])})).then(function(e){return CG["SHA-"+i].digest(e).then(function(e){return e.slice(0,a/8)})}),o=Promise.resolve(o)}function BG(e,t,r,n){var i=8*e.length,a=i,o=Promise.resolve();return o=(o=o.then(function(){return ig.concat([mG.int32ToBuffer(1),e,mG.int32ToBuffer(a),new ig(t,"utf8"),r,n,jG])})).then(function(e){return CG["SHA-"+i].digest(e).then(function(e){return e.slice(0,a/8)})}),o=Promise.resolve(o)}function DG(e,t){var r=TG(e);return function(n,i,a){var o,s,c=a.epu||mG.int32ToBuffer(0),u=a.epv||mG.int32ToBuffer(0),l=a.iv||new ig(0),f=a.aad||a.adata||new ig(0),p=a.kdata||new ig(0),d=[NG(n,t,c,u),BG(n,t,c,u)],h=Promise.all(d).then(function(e){o=e[0],s=e[1]});return h=(h=(h=h.then(function(){return r(o,i,l)})).then(function(t){var r=ig.concat([f,MG,new ig(p),MG,new ig(hV.base64url.encode(l),"utf8"),MG,new ig(hV.base64url.encode(t),"utf8")]);return Promise.all([Promise.resolve(t),SG["HS"+2*e].sign(s,r,{length:e})])})).then(function(e){return{data:e[0],tag:e[1].mac}})}}function FG(e,t){var r=AG(e);return function(n,i,a){var o,s,c=a.epu||mG.int32ToBuffer(0),u=a.epv||mG.int32ToBuffer(0),l=a.iv||new ig(0),f=a.aad||a.adata||new ig(0),p=a.kdata||new ig(0),d=a.tag||a.mac||new ig(0),h=[NG(n,t,c,u),BG(n,t,c,u)],v=Promise.all(h).then(function(e){o=e[0],s=e[1]});return v=(v=v.then(function(){var t=ig.concat([f,MG,new ig(p),MG,new ig(hV.base64url.encode(l),"utf8"),MG,new ig(hV.base64url.encode(i),"utf8")]);try{return SG["HS"+2*e].verify(s,t,d,{loose:!1})}catch(e){throw new Error("mac check failed")}})).then(function(){return r(o,i,l)})}}var LG={};["A128CBC-HS256","A192CBC-HS384","A256CBC-HS512"].forEach(function(e){var t=parseInt(/A(\d+)CBC-HS(\d+)?/g.exec(e)[1]);LG[e]={encrypt:PG(t),decrypt:OG(t)}}),["A128CBC+HS256","A192CBC+HS384","A256CBC+HS512"].forEach(function(e){var t=parseInt(/A(\d+)CBC\+HS(\d+)?/g.exec(e)[1]);LG[e]={encrypt:DG(t,e),decrypt:FG(t,e)}});var UG=LG,zG=n(function(t){var r,n;r=e,n=function(){function e(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var r={},n={};function i(e,t){var i,a,s;return t?(s=0<=(e>>>=0)&&e<256)&&(a=n[e])?a:(i=o(e,(0|e)<0?-1:0,!0),s&&(n[e]=i),i):(s=-128<=(e|=0)&&e<128)&&(a=r[e])?a:(i=o(e,e<0?-1:0,!1),s&&(r[e]=i),i)}function a(e,t){if(isNaN(e)||!isFinite(e))return t?v:h;if(t){if(e<0)return v;if(e>=f)return w}else{if(e<=-p)return _;if(e+1>=p)return b}return e<0?a(-e,t).neg():o(e%l|0,e/l|0,t)}function o(t,r,n){return new e(t,r,n)}e.fromInt=i,e.fromNumber=a,e.fromBits=o;var s=Math.pow;function c(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return h;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return c(e.substring(1),t,r).neg();for(var i=a(s(r,8)),o=h,u=0;u<e.length;u+=8){var l=Math.min(8,e.length-u),f=parseInt(e.substring(u,u+l),r);if(l<8){var p=a(s(r,l));o=o.mul(p).add(a(f))}else o=(o=o.mul(i)).add(a(f))}return o.unsigned=t,o}function u(t){return t instanceof e?t:"number"==typeof t?a(t):"string"==typeof t?c(t):o(t.low,t.high,t.unsigned)}e.fromString=c,e.fromValue=u;var l=4294967296,f=l*l,p=f/2,d=i(1<<24),h=i(0);e.ZERO=h;var v=i(0,!0);e.UZERO=v;var m=i(1);e.ONE=m;var g=i(1,!0);e.UONE=g;var y=i(-1);e.NEG_ONE=y;var b=o(-1,2147483647,!1);e.MAX_VALUE=b;var w=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=w;var _=o(0,-2147483648,!1);e.MIN_VALUE=_;var E=e.prototype;return E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*l+(this.low>>>0):this.high*l+(this.low>>>0)},E.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var t=a(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=a(s(e,6),this.unsigned),o=this,c="";;){var u=o.div(i),l=(o.sub(u.mul(i)).toInt()>>>0).toString(e);if((o=u).isZero())return l+c;for(;l.length<6;)l="0"+l;c=""+l+c}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},E.isZero=function(){return 0===this.high&&0===this.low},E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return 1==(1&this.low)},E.isEven=function(){return 0==(1&this.low)},E.equals=function(e){return t(e)||(e=u(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},E.eq=E.equals,E.notEquals=function(e){return!this.eq(e)},E.neq=E.notEquals,E.lessThan=function(e){return this.comp(e)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(e){return this.comp(e)<=0},E.lte=E.lessThanOrEqual,E.greaterThan=function(e){return this.comp(e)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(e){return this.comp(e)>=0},E.gte=E.greaterThanOrEqual,E.compare=function(e){if(t(e)||(e=u(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(m)},E.neg=E.negate,E.add=function(e){t(e)||(e=u(e));var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,a=65535&this.low,s=e.high>>>16,c=65535&e.high,l=e.low>>>16,f=0,p=0,d=0,h=0;return d+=(h+=a+(65535&e.low))>>>16,p+=(d+=i+l)>>>16,f+=(p+=n+c)>>>16,f+=r+s,o((d&=65535)<<16|(h&=65535),(f&=65535)<<16|(p&=65535),this.unsigned)},E.subtract=function(e){return t(e)||(e=u(e)),this.add(e.neg())},E.sub=E.subtract,E.multiply=function(e){if(this.isZero())return h;if(t(e)||(e=u(e)),e.isZero())return h;if(this.eq(_))return e.isOdd()?_:h;if(e.eq(_))return this.isOdd()?_:h;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(d)&&e.lt(d))return a(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,c=e.high>>>16,l=65535&e.high,f=e.low>>>16,p=65535&e.low,v=0,m=0,g=0,y=0;return g+=(y+=s*p)>>>16,m+=(g+=i*p)>>>16,g&=65535,m+=(g+=s*f)>>>16,v+=(m+=n*p)>>>16,m&=65535,v+=(m+=i*f)>>>16,m&=65535,v+=(m+=s*l)>>>16,v+=r*p+n*f+i*l+s*c,o((g&=65535)<<16|(y&=65535),(v&=65535)<<16|(m&=65535),this.unsigned)},E.mul=E.multiply,E.divide=function(e){if(t(e)||(e=u(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?v:h;var r,n,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return g;i=v}else{if(this.eq(_))return e.eq(m)||e.eq(y)?_:e.eq(_)?m:(r=this.shr(1).div(e).shl(1)).eq(h)?e.isNegative()?m:y:(n=this.sub(e.mul(r)),i=r.add(n.div(e)));if(e.eq(_))return this.unsigned?v:h;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=h}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(r)/Math.LN2),c=o<=48?1:s(2,o-48),l=a(r),f=l.mul(e);f.isNegative()||f.gt(n);)f=(l=a(r-=c,this.unsigned)).mul(e);l.isZero()&&(l=m),i=i.add(l),n=n.sub(f)}return i},E.div=E.divide,E.modulo=function(e){return t(e)||(e=u(e)),this.sub(this.div(e).mul(e))},E.mod=E.modulo,E.not=function(){return o(~this.low,~this.high,this.unsigned)},E.and=function(e){return t(e)||(e=u(e)),o(this.low&e.low,this.high&e.high,this.unsigned)},E.or=function(e){return t(e)||(e=u(e)),o(this.low|e.low,this.high|e.high,this.unsigned)},E.xor=function(e){return t(e)||(e=u(e)),o(this.low^e.low,this.high^e.high,this.unsigned)},E.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?o(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):o(0,this.low<<e-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?o(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):o(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0===(e&=63))return this;var r=this.high;return e<32?o(this.low>>>e|r<<32-e,r>>>e,this.unsigned):o(32===e?r:r>>>e-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},E.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},E.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},e},t&&t.exports?t.exports=n():(r.dcodeIO=r.dcodeIO||{}).Long=n()}),VG=1/0,qG=9007199254740991,KG=1.7976931348623157e308,GG=NaN,HG=4294967295,WG="[object Function]",$G="[object GeneratorFunction]",YG="[object Symbol]",JG=/^\s+|\s+$/g,QG=/^[-+]0x[0-9a-f]+$/i,ZG=/^0b[01]+$/i,XG=/^0o[0-7]+$/i,eH=/^(?:0|[1-9]\d*)$/,tH=parseInt,rH=Object.prototype.toString;function nH(e,t,r,n){var i=e.length;for((r=sH(r))<0&&(r=-r>i?0:i+r),(n=void 0===n||n>i?i:sH(n))<0&&(n+=i),n=r>n?0:function(e){return e?(t=sH(e),r=0,n=HG,t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==r&&(t=t>=r?t:r)),t):0;var t,r,n}(n);r<n;)e[r++]=t;return e}function iH(e,t,r){if(!aH(r))return!1;var n=typeof t;return!!("number"==n?function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=qG}(e.length)&&!function(e){var t=aH(e)?rH.call(e):"";return t==WG||t==$G}(e)}(r)&&function(e,t){return!!(t=null==t?qG:t)&&("number"==typeof e||eH.test(e))&&e>-1&&e%1==0&&e<t}(t,r.length):"string"==n&&t in r)&&function(e,t){return e===t||e!=e&&t!=t}(r[t],e)}function aH(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function oH(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&rH.call(e)==YG}(e))return GG;if(aH(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=aH(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(JG,"");var r=ZG.test(e);return r||XG.test(e)?tH(e.slice(2),r?2:8):QG.test(e)?GG:+e}(e))===VG||e===-VG?(e<0?-1:1)*KG:e==e?e:0:0===e?e:0}function sH(e){var t=oH(e),r=t%1;return t==t?r?t-r:t:0}var cH=function(e,t,r,n){var i=e?e.length:0;return i?(r&&"number"!=typeof r&&iH(e,t,r)&&(r=0,n=i),nH(e,t,r,n)):[]},uH=n(function(e){var t=e.exports={intToBigEndian:function(e,r,n){if("number"==typeof e)switch(arguments.length){case 1:(r=new ig(4)).fill(0),t.intToBigEndian(e,r,0);break;case 3:r[n]=255&e>>>24,r[++n]=255&e>>>16,r[++n]=255&e>>>8,r[++n]=255&e;break;default:throw new TypeError("Expected 1 or 3 arguments.")}else switch(arguments.length){case 1:(r=new ig(4*e.length)).fill(0),t.intToBigEndian(e,r,0);break;case 3:for(var i=0;i<e.length;++i)t.intToBigEndian(e[i],r,n),n+=4;break;default:throw new TypeError("Expected 1 or 3 arguments.")}return r},longToBigEndian:function(e,r,n){if(Array.isArray(e))switch(arguments.length){case 1:(r=new ig(8*e.length)).fill(0),t.longToBigEndian(e,r,0);break;case 3:for(var i=0;i<e.length;++i)t.longToBigEndian(e[i],r,n),n+=8;break;default:throw new TypeError("Expected 1 or 3 arguments.")}else switch(arguments.length){case 1:(r=new ig(8)).fill(0),t.longToBigEndian(e,r,0);break;case 3:var a=e.low,o=e.high;t.intToBigEndian(o,r,n),t.intToBigEndian(a,r,n+4);break;default:throw new TypeError("Expected 1 or 3 arguments.")}return r},bigEndianToInt:function(e,r,n){switch(arguments.length){case 2:var i=e[r]<<24;return i|=(255&e[++r])<<16,i|=(255&e[++r])<<8,i|=255&e[++r];case 3:for(var a=0;a<n.length;++a)n[a]=t.bigEndianToInt(e,r),r+=4;break;default:throw new TypeError("Expected 2 or 3 arguments.")}},bigEndianToLong:function(e,r,n){switch(arguments.length){case 2:var i=t.bigEndianToInt(e,r),a=t.bigEndianToInt(e,r+4);return new zG(a,i);case 3:for(var o=0;o<n.length;++o)n[o]=t.bigEndianToLong(e,r),r+=8;break;default:throw new TypeError("Expected 2 or 3 arguments.")}}}}),lH=(uH.intToBigEndian,uH.longToBigEndian,uH.bigEndianToInt,uH.bigEndianToLong,n(function(e){var t=3774873600,r=new zG(t>>8);var n=e.exports={E1:t,E1B:225,E1L:r,LOOKUP:function(){for(var e=[],r=0;r<256;++r){for(var n=0,i=7;i>=0;--i)0!=(r&1<<i)&&(n^=t>>>7-i);e.push(n)}return e}(),arrayCopy:function(e,t,r,n,i){if(t<0||n<0||i<0)throw new TypeError("Invalid input.");if(r instanceof Uint8Array){if(n>=r.length||n+i>r.length)throw new TypeError("Invalid input.");(0!==t||i<e.length)&&(e=e instanceof Uint8Array?e.subarray(t,t+i):e.slice(t,t+i)),r.set(e,n)}else for(var a=0;a<i;++a)r[n+a]=e[t+a]},arrayEqual:function(e,t){e=e||[],t=t||[];for(var r=Math.min(e.length,t.length),n=e.length===t.length,i=0;i<r;i++)n=n&&void 0!==e[i]&&void 0!==t[i]&&e[i]===t[i];return n},asBytes:function(e,t){switch(arguments.length){case 1:return(t=new ig(16)).fill(0),uH.intToBigEndian(e,t,0),t;case 2:uH.intToBigEndian(e,t,0);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},asInts:function(e,t){switch(arguments.length){case 1:return cH(t=[],0,0,4),uH.bigEndianToInt(e,0,t),t;case 2:uH.bigEndianToInt(e,0,t);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},oneAsInts:function(){for(var e=[],t=0;t<4;++t)e.push(1<<31);return e},shiftRight:function(e,t){var r,n;switch(arguments.length){case 1:return r=e[0],e[0]=r>>>1,n=r<<31,r=e[1],e[1]=r>>>1|n,n=r<<31,r=e[2],e[2]=r>>>1|n,n=r<<31,r=e[3],e[3]=r>>>1|n,r<<31&4294967295;case 2:return r=e[0],t[0]=r>>>1,n=r<<31,r=e[1],t[1]=r>>>1|n,n=r<<31,r=e[2],t[2]=r>>>1|n,n=r<<31,r=e[3],t[3]=r>>>1|n,r<<31&4294967295;default:throw new TypeError("Expected 1 or 2 arguments.")}},shiftRightN:function(e,t,r){var n,i,a;switch(arguments.length){case 2:return i=e[0],n=32-t,e[0]=i>>>t,a=i<<n,i=e[1],e[1]=i>>>t|a,a=i<<n,i=e[2],e[2]=i>>>t|a,a=i<<n,i=e[3],e[3]=i>>>t|a,i<<n;case 3:return i=e[0],n=32-t,r[0]=i>>>t,a=i<<n,i=e[1],r[1]=i>>>t|a,a=i<<n,i=e[2],r[2]=i>>>t|a,a=i<<n,i=e[3],r[3]=i>>>t|a,i<<n;default:throw new TypeError("Expected 2 or 3 arguments.")}},xor:function(e,t,r){switch(arguments.length){case 2:e[0]^=t[0],e[1]^=t[1],e[2]^=t[2],e[3]^=t[3];break;case 3:r[0]=e[0]^t[0],r[1]=e[1]^t[1],r[2]=e[2]^t[2],r[3]=e[3]^t[3];break;default:throw new TypeError("Expected 2 or 3 arguments.")}},multiply:function(e,t){for(var r=e.slice(),i=[],a=0;a<4;++a)for(var o=t[a],s=31;s>=0;--s)0!=(o&1<<s)&&n.xor(i,r),0!==n.shiftRight(r)&&(r[0]^=n.E1);n.arrayCopy(i,0,e,0,4)},multiplyP:function(e,t){switch(arguments.length){case 1:0!==n.shiftRight(e)&&(e[0]^=n.E1);break;case 2:0!==n.shiftRight(e,t)&&(t[0]^=n.E1);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},multiplyP8:function(e,t){var r;switch(arguments.length){case 1:r=n.shiftRightN(e,8),e[0]^=n.LOOKUP[r>>>24];break;case 2:r=n.shiftRightN(e,8,t),t[0]^=n.LOOKUP[r>>>24];break;default:throw new TypeError("Expected 1 or 2 arguments.")}}}}));lH.E1,lH.E1B,lH.E1L,lH.LOOKUP,lH.arrayCopy,lH.arrayEqual,lH.asBytes,lH.asInts,lH.oneAsInts,lH.shiftRight,lH.shiftRightN,lH.xor,lH.multiply,lH.multiplyP,lH.multiplyP8;function fH(){this.H=[],this.M=null}fH.prototype.init=function(e){var t,r,n;if(null==this.M)for(this.M=[],t=0;t<32;++t)for(this.M[t]=[],r=0;r<16;++r)for(this.M[t][r]=[],n=0;n<4;++n)this.M[t][r][n]=0;else if(lH.arrayEqual(this.H,e))return;for(this.H=e.slice(),lH.asInts(e,this.M[1][8]),r=4;r>=1;r>>=1)lH.multiplyP(this.M[1][r+r],this.M[1][r]);for(lH.multiplyP(this.M[1][1],this.M[0][8]),r=4;r>=1;r>>=1)lH.multiplyP(this.M[0][r+r],this.M[0][r]);for(t=0;;){for(r=2;r<16;r+=r)for(n=1;n<r;++n)lH.xor(this.M[t][r],this.M[t][n],this.M[t][r+n]);if(32==++t)return;if(t>1)for(r=8;r>0;r>>=1)lH.multiplyP8(this.M[t-2][r],this.M[t][r])}},fH.prototype.multiplyH=function(e){for(var t=[],r=15;r>=0;--r){var n=this.M[r+r][15&e[r]];t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],n=this.M[r+r+1][(240&e[r])>>>4],t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3]}uH.intToBigEndian(t,e,0)};var pH={"8k":fH};var dH={encrypt:function(e,t,r,n,i){var a=new Array(4),o=new Array(4);uH.bigEndianToInt(t,r,a),e.encrypt(a,o),uH.intToBigEndian(o,n,i)}};function hH(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=this.blockSize||16}var vH={createCipher:function(e){var t=new aV.aes.Algorithm("AES-GCM",hH);return t.initialize({key:new bG(e.key)}),t.mode.start(e),t.mode},createDecipher:function(e){var t=new aV.aes.Algorithm("AES-GCM",hH);return t.initialize({key:new bG(e.key)}),t.mode._decrypt=!0,t.mode.start(e),t.mode}};function mH(e){function t(t,r){if(e!==t.length<<3)throw new Error("invalid key size");if(12!==r.length)throw new Error("invalid iv")}return mG.setupFallback(function(e,r,n){var i=n.iv||new ig(0),a=n.aad||n.adata||new ig(0);try{t(e,i)}catch(e){return Promise.reject(e)}var o,s="aes-"+8*e.length+"-gcm";try{o=mG.nodeCrypto.createCipheriv(s,e,i)}catch(e){throw new Error("unsupported algorithm: "+s)}if("function"!=typeof o.setAAD)throw new Error("unsupported algorithm: "+s);return a.length&&o.setAAD(a),{data:ig.concat([o.update(r),o.final()]),tag:o.getAuthTag()}},function(e,r,n){var i=n.iv||new ig(0),a=n.aad||n.adata||new ig(0);try{t(e,i)}catch(e){return Promise.reject(e)}var o={name:"AES-GCM"};return mG.subtleCrypto.importKey("raw",e,o,!0,["encrypt"]).then(function(e){return o.iv=i,o.tagLength=128,a.length&&(o.additionalData=a),mG.subtleCrypto.encrypt(o,e,r)}).then(function(e){var t=e.byteLength-16,r=e.slice(t);r=new ig(r);var n=e.slice(0,t);return{data:n=new ig(n),tag:r}})},function(e,r,n){var i,a,o=n.iv||new ig(0),s=n.aad||n.adata||new ig(0);try{t(e,o)}catch(e){return Promise.reject(e)}return i=vH.createCipher({key:e,iv:o,additionalData:s}),a=new ig(r.length),new Promise(function(e,t){var n=gG.CHUNK_SIZE,o=0,s=0;!function c(){var u=Math.min(n,r.length-s);if(o+=i.update(r,s,u,a,o),s+=u,r.length>s)setTimeout(c,0);else if((o+=i.finish(a,o))===r.length){var l=i.tag;e({data:a,tag:l})}else t(new Error("encryption failed"))}()})})}function gH(e){function t(t,r,n){if(e!==t.length<<3)throw new Error("invalid key size");if(12!==r.length)throw new Error("invalid iv");if(16!==n.length)throw new Error("invalid tag length")}return mG.setupFallback(function(e,r,n){var i=n.aad||n.adata||new ig(0),a=n.iv||new ig(0),o=n.tag||n.mac||new ig(0);try{t(e,a,o)}catch(e){return Promise.reject(e)}var s,c="aes-"+8*e.length+"-gcm";try{s=mG.nodeCrypto.createDecipheriv(c,e,a)}catch(e){throw new Error("unsupported algorithm: "+c)}if("function"!=typeof s.setAAD)throw new Error("unsupported algorithm: "+c);s.setAuthTag(o),i.length&&s.setAAD(i);try{return ig.concat([s.update(r),s.final()])}catch(e){throw new Error("decryption failed")}},function(e,r,n){var i=n.aad||n.adata||new ig(0),a=n.iv||new ig(0),o=n.tag||n.mac||new ig(0);try{t(e,a,o)}catch(e){return Promise.reject(e)}var s={name:"AES-GCM"};return mG.subtleCrypto.importKey("raw",e,s,!0,["decrypt"]).then(function(e){return s.iv=a,s.tagLength=128,i.length&&(s.additionalData=i),r=ig.concat([r,o],r.length+o.length),mG.subtleCrypto.decrypt(s,e,r)}).then(function(e){return e=new ig(e)})},function(e,r,n){var i,a,o=n.aad||n.adata||new ig(0),s=n.iv||new ig(0),c=n.tag||n.mac||new ig(0);try{t(e,s,c)}catch(e){return Promise.reject(e)}return i=vH.createDecipher({key:e,iv:s,additionalData:o,tag:c}),a=new ig(r.length),new Promise(function(e,t){var n=gG.CHUNK_SIZE,o=0,s=0;!function c(){var u=Math.min(n,r.length-s);if(o+=i.update(r,s,u,a,o),s+=u,r.length>s)setTimeout(c,0);else{try{o+=i.finish(a,o)}catch(e){return void t(new Error("decryption failed"))}o===r.length?e(a):t(new Error("decryption failed"))}}()})})}hH.prototype.start=function(e){if(this.tag=null,!("iv"in(e=e||{})))throw new Error("Gcm needs ParametersWithIV or AEADParameters");if(this.nonce=e.iv,null==this.nonce||this.nonce.length<1)throw new Error("IV must be at least 1 byte");this.tagLength=16,"tag"in e&&(this.tag=new ig(e.tag));var t=this._decrypt?this.blockSize+this.tagLength:this.blockSize;this.bufBlock=new ig(t),this.bufBlock.fill(0);var r=e.multiplier;if(null==r&&(r=new pH["8k"]),this.multiplier=r,this.H=this.zeroBlock(),dH.encrypt(this.cipher,this.H,0,this.H,0),this.multiplier.init(this.H),this.exp=null,this.J0=this.zeroBlock(),12===this.nonce.length)this.nonce.copy(this.J0,0,0,this.nonce.length),this.J0[this.blockSize-1]=1;else{this.gHASH(this.J0,this.nonce,this.nonce.length);var n=this.zeroBlock();uH.longToBigEndian(new zG(this.nonce.length).multiply(8),n,8),this.gHASHBlock(this.J0,n)}this.S=this.zeroBlock(),this.SAt=this.zeroBlock(),this.SAtPre=this.zeroBlock(),this.atBlock=this.zeroBlock(),this.atBlockPos=0,this.atLength=zG.ZERO,this.atLengthPre=zG.ZERO,this.counter=new ig(this.J0),this.bufOff=0,this.totalLength=zG.ZERO,"additionalData"in e&&this.processAADBytes(e.additionalData,0,e.additionalData.length)},hH.prototype.update=function(e,t,r,n,i){for(var a=0;r>0;){var o=Math.min(r,this.bufBlock.length-this.bufOff);e.copy(this.bufBlock,this.bufOff,t,t+o),r-=o,t+=o,this.bufOff+=o,this.bufOff===this.bufBlock.length&&(this.outputBlock(n,i+a),a+=this.blockSize)}return a},hH.prototype.finish=function(e,t){var r=0;this._decrypt&&(r+=this.update(this.tag,0,this.tag.length,e,t)),this.totalLength.isZero()&&this.initCipher();var n=this.bufOff;if(this._decrypt){if(n<this.tagLength)throw new Error("data too short");n-=this.tagLength}n>0&&(this.gCTRPartial(this.bufBlock,0,n,e,t+r),r+=n),this.atLength=this.atLength.add(this.atBlockPos);var i=this.zeroBlock();uH.longToBigEndian(this.atLength.multiply(8),i,0),uH.longToBigEndian(this.totalLength.multiply(8),i,8),this.gHASHBlock(this.S,i);var a=new ig(this.blockSize);if(a.fill(0),dH.encrypt(this.cipher,this.J0,0,a,0),this.xor(a,this.S),this._decrypt){if(!lH.arrayEqual(this.tag,a))throw new Error("mac check in Gcm failed")}else this.tag=new ig(this.tagLength),a.copy(this.tag,0,0,this.tagLength);return r},hH.prototype.initCipher=function(){this.atLength.greaterThan(zG.ZERO)&&(this.SAt.copy(this.SAtPre,0,0,this.blockSize),this.atLengthPre=this.atLength.add(zG.ZERO)),this.atBlockPos>0&&(this.gHASHPartial(this.SAtPre,this.atBlock,0,this.atBlockPos),this.atLengthPre=this.atLengthPre.add(this.atBlockPos)),this.atLengthPre.greaterThan(zG.ZERO)&&this.SAtPre.copy(this.S,0,0,this.blockSize)},hH.prototype.outputBlock=function(e,t){this.totalLength.isZero()&&this.initCipher(),this.gCTRBlock(this.bufBlock,e,t),this._decrypt?(this.bufBlock.copy(this.bufBlock,0,this.blockSize,this.blockSize+this.tagLength),this.bufOff=this.tagLength):this.bufOff=0},hH.prototype.processAADBytes=function(e,t,r){for(var n=0;n<r;++n)this.atBlock[this.atBlockPos]=e[t+n],++this.atBlockPos===this.blockSize&&(this.gHASHBlock(this.SAt,this.atBlock),this.atBlockPos=0,this.atLength=this.atLength.add(this.blockSize))},hH.prototype.getNextCounterBlock=function(){for(var e=15;e>=12;--e){var t=this.counter[e]+1&255;if(this.counter[e]=t,0!==t)break}var r=new ig(this.blockSize);return r.fill(0),dH.encrypt(this.cipher,this.counter,0,r,0),r},hH.prototype.gCTRBlock=function(e,t,r){var n=this.getNextCounterBlock();this.xor(n,e),n.copy(t,r,0,this.blockSize),this.gHASHBlock(this.S,this._decrypt?e:n),this.totalLength=this.totalLength.add(this.blockSize)},hH.prototype.gCTRPartial=function(e,t,r,n,i){var a=this.getNextCounterBlock();this.xor(a,e,t,r),a.copy(n,i,0,r),this.gHASHPartial(this.S,this._decrypt?e:a,0,r),this.totalLength=this.totalLength.add(r)},hH.prototype.gHASHBlock=function(e,t){this.xor(e,t),this.multiplier.multiplyH(e)},hH.prototype.gHASHPartial=function(e,t,r,n){this.xor(e,t,r,n),this.multiplier.multiplyH(e)},hH.prototype.xor=function(e,t,r,n){switch(arguments.length){case 2:for(var i=15;i>=0;--i)e[i]^=t[i];break;case 4:for(;n-- >0;)e[n]^=t[r+n];break;default:throw new TypeError("Expected 2 or 4 arguments.")}return e},hH.prototype.zeroBlock=function(){var e=new ig(16);return e.fill(0),e};var yH={};["A128GCM","A192GCM","A256GCM","A128GCMKW","A192GCMKW","A256GCMKW"].forEach(function(e){var t=parseInt(/A(\d+)GCM(?:KW)?/g.exec(e)[1]);yH[e]={encrypt:mH(t),decrypt:gH(t)}});var bH=yH,wH=new ig("a6a6a6a6a6a6a6a6","hex");function _H(e,t){for(var r=Math.max(e.length,t.length),n=new ig(r),i=0;r>i;i++)n[i]=(e[i]||0)^(t[i]||0);return n}function EH(e,t){for(var r=[],n=0;e.length>n;n+=t)r.push(e.slice(n,n+t));return r}function SH(e){var t=Math.floor(e/4294967296),r=e%4294967296,n=new ig(8);return n[0]=255&t>>>24,n[1]=255&t>>>16,n[2]=255&t>>>8,n[3]=255&t>>>0,n[4]=255&r>>>24,n[5]=255&r>>>16,n[6]=255&r>>>8,n[7]=255&r>>>0,n}function xH(e){function t(t,r){if(e!==t.length<<3)throw new Error("invalid key size");if(0<r.length&&0!=r.length%8)throw new Error("invalid data length")}return mG.setupFallback(null,function(e,r){try{t(e,r)}catch(e){return Promise.reject(e)}var n={name:"AES-KW"},i=[mG.subtleCrypto.importKey("raw",r,{name:"HMAC",hash:"SHA-256"},!0,["sign"]),mG.subtleCrypto.importKey("raw",e,n,!0,["wrapKey"])];return i=(i=(i=Promise.all(i)).then(function(e){return mG.subtleCrypto.wrapKey("raw",e[0],e[1],n)})).then(function(e){return{data:e=new ig(e)}})},function(e,r){try{t(e,r)}catch(e){return Promise.reject(e)}var n,i,a,o=aV.cipher.createCipher("AES",new bG(e)),s=EH(r,8);n=wH;for(var c=0;6>c;c++)for(var u=0;s.length>u;u++)a=s.length*c+u+1,i=ig.concat([n,s[u]]),o.start(),o.update(new bG(i)),o.finish(),n=_H((i=o.output.native()).slice(0,8),SH(a)),s[u]=i.slice(8,16);s=[n].concat(s);var l=ig.concat(s);return Promise.resolve({data:l})})}function CH(e){function t(t,r){if(e!==t.length<<3)throw new Error("invalid key size");if(0<r.length-8&&0!=r.length%8)throw new Error("invalid data length")}return mG.setupFallback(null,function(e,r){try{t(e,r)}catch(e){return Promise.reject(e)}var n={name:"AES-KW"},i=mG.subtleCrypto.importKey("raw",e,n,!0,["unwrapKey"]);return i=(i=(i=i.then(function(e){return mG.subtleCrypto.unwrapKey("raw",r,e,n,{name:"HMAC",hash:"SHA-256"},!0,["sign"])})).then(function(e){return mG.subtleCrypto.exportKey("raw",e)})).then(function(e){return e=new ig(e)})},function(e,r){try{t(e,r)}catch(e){return Promise.reject(e)}var n,i,a=aV.cipher.createDecipher("AES",new bG(e)),o=EH(r,8);n=o[0],o=o.slice(1);for(var s=5;0<=s;--s)for(var c=o.length-1;0<=c;--c)i=_H(n,SH(o.length*s+c+1)),i=ig.concat([i,o[c]]),a.start(),a.update(new bG(i)),a.finish(),n=(i=a.output.native()).slice(0,8),o[c]=i.slice(8,16);if(n.toString()!==wH.toString())return Promise.reject(new Error("decryption failed"));var u=ig.concat(o);return Promise.resolve(u)})}var kH={};["A128KW","A192KW","A256KW"].forEach(function(e){var t=parseInt(/A(\d+)KW/g.exec(e)[1]);kH[e]={encrypt:xH(t),decrypt:CH(t)}});var TH=kH;function AH(e){e=e.replace("CONCAT-","");return function(t,r){var n=(r=r||{}).length,i=gG.HASHLENGTH[e];if(!n)return Promise.reject(new Error("invalid key length"));if(!r.otherInfo)return Promise.reject(new Error("invalid otherInfo"));var a=r.otherInfo,o=CG[e].digest,s=Math.ceil(n/i),c=0,u=[];return function e(){if(s===c++)return ig.concat(u).slice(0,n);var r=new ig(4+t.length+a.length);return r.writeUInt32BE(c,0),t.copy(r,4),a.copy(r,4+t.length),o(r).then(function(t){return u.push(t),e()})}()}}var IH={};["CONCAT-SHA-1","CONCAT-SHA-256","CONCAT-SHA-384","CONCAT-SHA-512"].forEach(function(e){IH[e]={derive:AH(e)}});var PH=IH;var OH={dir:{encrypt:function(e){return Promise.resolve({data:e,once:!0,direct:!0})},decrypt:function(e){return Promise.resolve(e)}}},RH=aV.jsbn.BigInteger;function jH(){return new RH(null)}function MH(e){this.r2=jH(),this.q3=jH(),RH.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function NH(e,t){this.x=t,this.p=e}function BH(e,t,r,n){this.curve=e,this.x=t,this.y=r,this.z=n||RH.ONE,this.zinv=null}function DH(e,t,r){this.p=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new BH(this,null,null),this.reducer=new MH(this.p)}MH.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=jH();return e.copyTo(t),this.reduce(t),t},MH.prototype.revert=function(e){return e},MH.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},MH.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},MH.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},NH.prototype.equals=function(e){return e===this||this.p.equals(e.p)&&this.x.equals(e.x)},NH.prototype.toBigInteger=function(){return this.x},NH.prototype.negate=function(){return new NH(this.p,this.x.negate().mod(this.p))},NH.prototype.add=function(e){return new NH(this.p,this.x.add(e.toBigInteger()).mod(this.p))},NH.prototype.subtract=function(e){return new NH(this.p,this.x.subtract(e.toBigInteger()).mod(this.p))},NH.prototype.multiply=function(e){return new NH(this.p,this.x.multiply(e.toBigInteger()).mod(this.p))},NH.prototype.square=function(){return new NH(this.p,this.x.pow(2).mod(this.p))},NH.prototype.divide=function(e){return new NH(this.p,this.x.multiply(e.toBigInteger().modInverse(this.p)).mod(this.p))},BH.prototype.getX=function(){this.zinv||(this.zinv=this.z.modInverse(this.curve.p));var e=this.x.toBigInteger().multiply(this.zinv);return this.curve.reduce(e),this.curve.fromBigInteger(e)},BH.prototype.getY=function(){this.zinv||(this.zinv=this.z.modInverse(this.curve.p));var e=this.y.toBigInteger().multiply(this.zinv);return this.curve.reduce(e),this.curve.fromBigInteger(e)},BH.prototype.equals=function(e){return e===this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.p).equals(RH.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.p).equals(RH.ZERO))},BH.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(RH.ZERO)&&!this.y.toBigInteger().equals(RH.ZERO)},BH.prototype.negate=function(){return new BH(this.curve,this.x,this.y.negate(),this.z)},BH.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.p),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.p);if(RH.ZERO.equals(r))return RH.ZERO.equals(t)?this.twice():this.curve.getInfinity();var n=new RH("3"),i=this.x.toBigInteger(),a=this.y.toBigInteger(),o=r.pow(2),s=o.multiply(r),c=i.multiply(o),u=t.pow(2).multiply(this.z),l=u.subtract(c.shiftLeft(1)).multiply(e.z).subtract(s).multiply(r).mod(this.curve.p),f=c.multiply(n).multiply(t).subtract(a.multiply(s)).subtract(u.multiply(t)).multiply(e.z).add(t.multiply(s)).mod(this.curve.p),p=s.multiply(this.z).multiply(e.z).mod(this.curve.p);return new BH(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(f),p)},BH.prototype.twice=function(){if(this.isInfinity())return this;if(0===this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new RH("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),i=n.multiply(r).mod(this.curve.p),a=this.curve.a.toBigInteger(),o=t.pow(2).multiply(e);RH.ZERO.equals(a)||(o=o.add(this.z.pow(2).multiply(a)));var s=(o=o.mod(this.curve.p)).pow(2).subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.p),c=o.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(o.pow(2).multiply(o)).mod(this.curve.p),u=n.pow(2).multiply(n).shiftLeft(3).mod(this.curve.p);return new BH(this.curve,this.curve.fromBigInteger(s),this.curve.fromBigInteger(c),u)},BH.prototype.multiply=function(e){if(this.isInfinity())return this;if(0===e.signum())return this.curve.getInfinity();var t,r=e,n=r.multiply(new RH("3")),i=this.negate(),a=this;for(t=n.bitLength()-2;t>0;--t){a=a.twice();var o=n.testBit(t);o!==r.testBit(t)&&(a=a.add(o?this:i))}return a},BH.prototype.multiplyTwo=function(e,t,r){var n;n=e.bitLength()>r.bitLength()?e.bitLength()-1:r.bitLength()-1;for(var i=this.curve.getInfinity(),a=this.add(t);n>=0;)i=i.twice(),e.testBit(n)?i=r.testBit(n)?i.add(a):i.add(this):r.testBit(n)&&(i=i.add(t)),--n;return i},DH.prototype.getP=function(){return this.p},DH.prototype.getA=function(){return this.a},DH.prototype.getB=function(){return this.b},DH.prototype.equals=function(e){return e===this||this.p.equals(e.p)&&this.a.equals(e.a)&&this.b.equals(e.b)},DH.prototype.contains=function(e){var t=e.getX().toBigInteger(),r=e.getY().toBigInteger(),n=this.a.toBigInteger(),i=this.b.toBigInteger(),a=this.p,o=r.pow(2).mod(a),s=t.pow(3).add(n.multiply(t)).add(i).mod(a);return o.equals(s)},DH.prototype.getInfinity=function(){return this.infinity},DH.prototype.fromBigInteger=function(e){return new NH(this.p,e)},DH.prototype.reduce=function(e){this.reducer.reduce(e)},DH.prototype.decodePointHex=function(e){switch(parseInt(e.substring(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var t=(e.length-2)/2,r=e.substr(2,t),n=e.substr(t+2,t);return new BH(this,this.fromBigInteger(new RH(r,16)),this.fromBigInteger(new RH(n,16)));default:return null}},DH.prototype.encodePointHex=function(e){if(e.isInfinity())return"00";var t=e.getX().toBigInteger().toString(16),r=e.getY().toBigInteger().toString(16),n=this.getP().toString(16).length;for(n%2!=0&&n++;t.length<n;)t="0"+t;for(;r.length<n;)r="0"+r;return"04"+t+r};var FH={ECFieldElementFp:NH,ECPointFp:BH,ECCurveFp:DH},LH=n(function(e){var t=aV.jsbn.BigInteger;function r(e,t,r,n){this.curve=e,this.g=t,this.n=r,this.h=n}function n(e){return new t(e,16)}r.prototype.getCurve=function(){return this.curve},r.prototype.getG=function(){return this.g},r.prototype.getN=function(){return this.n},r.prototype.getH=function(){return this.h};var i,a,o,s,c,u,l,f=e.exports={secp256r1:(i=n("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF"),a=n("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC"),o=n("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B"),s=n("FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551"),c=t.ONE,u=new FH.ECCurveFp(i,a,o),l=u.decodePointHex("046B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C2964FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5"),new r(u,l,s,c)),secp384r1:function(){var e=n("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF"),i=n("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC"),a=n("B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF"),o=n("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973"),s=t.ONE,c=new FH.ECCurveFp(e,i,a),u=c.decodePointHex("04AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB73617DE4A96262C6F5D9E98BF9292DC29F8F41DBD289A147CE9DA3113B5F0B8C00A60B1CE1D7E819D7A431D7C90EA0E5F");return new r(c,u,o,s)}(),secp521r1:function(){var e=n("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"),i=n("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC"),a=n("0051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00"),o=n("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409"),s=t.ONE,c=new FH.ECCurveFp(e,i,a),u=c.decodePointHex("0400C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66011839296A789A3BC0045C8A5FB42C7D1BD998F54449579B446817AFBD17273E662C97EE72995EF42640C550B9013FAD0761353C7086A272C24088BE94769FD16650");return new r(c,u,o,s)}()};f["P-256"]=f.secp256r1,f["P-384"]=f.secp384r1,f["P-521"]=f.secp521r1}),UH=aV.jsbn.BigInteger;function zH(e){return new UH(e,16)}function VH(e,t){t||(t=Math.ceil(e.bitLength()/8)),t*=2;var r=e.toString(16);for(r=r.substring(Math.max(r.length-t,0));t>r.length;)r="0"+r;return new ig(r,"hex")}function qH(e){return"string"==typeof e&&(e=new ig(e,"binary")),zH(e.toString("hex"))}function KH(e){return Math.ceil(e.getN().bitLength()/8)}function GH(e){var t=LH[e];if(!t)throw new TypeError("unsupported named curve: "+e);return t}function HH(e,t){var r=e.getN().bitLength(),n=8*t.length,i=qH(t);return r<n&&(i=i.shiftRight(n-r)),i}function WH(e,t,r){var n=GH(e),i=n.getCurve(),a=new FH.ECPointFp(i,i.fromBigInteger(t),i.fromBigInteger(r));this.curve=e,this.params=n,this.point=a;var o=KH(n);this.x=VH(t,o),this.y=VH(r,o)}function $H(e,t){var r=GH(e);this.curve=e,this.params=r;var n=KH(r);this.d=VH(t,n)}WH.prototype.isValid=function(){return this.params.curve.contains(this.point)},WH.prototype.verify=function(e,t){var r=this.params.getN(),n=this.params.getG(),i=qH(t.r),a=qH(t.s);if(i.compareTo(UH.ONE)<0||i.compareTo(r)>=0)return!1;if(a.compareTo(UH.ONE)<0||i.compareTo(r)>=0)return!1;var o=HH(this.params,e),s=a.modInverse(r),c=o.multiply(s).mod(r),u=i.multiply(s).mod(r),l=n.multiplyTwo(c,this.point,u).getX().toBigInteger();return(l=l.mod(r)).equals(i)},$H.prototype.toPublicKey=function(){var e=qH(this.d),t=this.params.getG().multiply(e);return new WH(this.curve,t.getX().toBigInteger(),t.getY().toBigInteger())},$H.prototype.sign=function(e){var t,r,n,i,a=KH(this.params),o=this.params.getN(),s=this.params.getG(),c=HH(this.params,e),u=qH(this.d);do{do{do{n=qH(aV.random.getBytes(a))}while(n.equals(UH.ZERO)||n.compareTo(o)>=0);t=s.multiply(n).getX().toBigInteger().mod(o)}while(t.equals(UH.ZERO));i=u.multiply(t),i=c.add(i),r=n.modInverse(o).multiply(i).mod(o)}while(r.equals(UH.ONE));var l=KH(this.params);return{r:t=VH(t,l),s:r=VH(r,l)}},$H.prototype.isValid=function(){var e=qH(this.d),t=params.getN().subtract(BigIneger.ONE);return e.compareTo(UH.ONE)>=0&&e.compareTo(t)<0},$H.prototype.computeSecret=function(e){var t=qH(this.d),r=e.point.multiply(t).getX().toBigInteger();return r=VH(r,KH(this.params))};var YH={generateKeyPair:function(e){var t=GH(e),r=t.getN(),n=aV.random.getBytes(KH(t));n=qH(n);var i=r.subtract(UH.ONE),a=new $H(e,n.mod(i).add(UH.ONE)),o=a.toPublicKey();return{private:a,public:o}},asPublicKey:function(e,t,r){return"string"==typeof t?t=zH(t):Ug(t)&&(t=qH(t)),"string"==typeof r?r=zH(r):Ug(r)&&(r=qH(r)),new WH(e,t,r)},asPrivateKey:function(e,t){return"string"==typeof t?t=zH(t):Ug(t)&&(t=qH(t)),new $H(e,t)}},JH={"P-256":256,"P-384":384,"P-521":521};function QH(e,t){var r=CF(e);return(t?["x","y"]:["d"]).forEach(function(e){r[e]=hV.asBuffer(r[e],"base64url")}),r}var ZH=new ig([4]);var XH={convertToForge:function(e,t){var r=t?["x","y"]:["d"];return r=r.map(function(t){return new aV.jsbn.BigInteger(e[t].toString("hex"),16)}),r=[e.crv].concat(r),(t?YH.asPublicKey:YH.asPrivateKey).apply(YH,r)},convertToJWK:function(e,t){var r=CF(e);return(t?["x","y"]:["x","y","d"]).forEach(function(e){r[e]=hV.base64url.encode(r[e])}),delete r.key_ops,delete r.use,delete r.alg,t&&delete r.d,r},convertToObj:QH,convertToBuffer:function(e,t){return e=QH(e,t),t?ig.concat([ZH,e.x,e.y]):e.d},curveSize:function(e){return JH[e||""]||NaN}};function eW(e){var t=e.replace("HKDF-",""),r=e.replace("HKDF-SHA-","HS");return function(e,n){var i=gG.HASHLENGTH[t]/8;"string"==typeof r&&(r=SG[r].sign);var a=(n=n||{}).salt;a&&0!==a.length||(a=new ig(i)).fill(0);var o=n.info||new ig(0),s=n.length||i,c=Math.ceil(s/i),u=[],l=0;return r(a,e,{length:8*a.length}).then(function(e){return function e(t,n){return c===l++?ig.concat(u).slice(0,s):(n||(n=new ig(0)),n=ig.concat([n,o,new ig([l])]),n=(n=r(t,n)).then(function(r){return n=r.mac,u.push(n),e(t,n)}))}(e.mac)})}}var tW={};["HKDF-SHA-1","HKDF-SHA-256","HKDF-SHA-384","HKDF-SHA-512"].forEach(function(e){tW[e]={derive:eW(e)}});var rW=tW,nW=n(function(e){function t(e){switch(e){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new Error("unsupported curve: "+e)}}var r=e.exports={};function n(e,t,n){function i(e){return ig.concat([mG.int32ToBuffer(e.length),e])}var a=n.algorithm||"",o=gG.KEYLENGTH[a],s=hV.asBuffer(n.apu||"","base64url"),c=hV.asBuffer(n.apv||"","base64url"),u={public:t,length:o/8,hash:"SHA-256",otherInfo:ig.concat([i(new ig(a,"utf8")),i(s),i(c),mG.int32ToBuffer(o)])};return r["ECDH-CONCAT"].derive(e,u)}["ECDH","ECDH-HKDF","ECDH-CONCAT"].forEach(function(e){var n,i,a=/^ECDH(?:-(\w+))?$/g.exec(e||"")[1],o=r[e]=r[e]||{};switch(a||""){case"CONCAT":o.derive=function(e,n){var i;n=n||{};try{if(!(i=n.hash||t(e.crv)))throw new Error("invalid hash: "+i);i.toUpperCase()}catch(e){return Promise.reject(e)}var a=["public"],o=r.ECDH.derive(e,vG(n,a));return o=o.then(function(e){return PH["CONCAT-"+i].derive(e,WK(n,a))})};break;case"HKDF":o.derive=function(e,n){var i;n=n||{};try{if(!(i=n.hash||t(e.crv)))throw new Error("invalid hash: "+i);i.toUpperCase()}catch(e){return Promise.reject(e)}var a=["public"],o=r.ECDH.derive(e,vG(n,a));return o=o.then(function(e){return rW["HKDF-"+i].derive(e,WK(n,a))})};break;case"":o.derive=(n={name:"ECDH"},i=function(e,t){var r=e&&XH.convertToForge(e,!0);if(!r||!r.isValid())return Promise.reject(new Error("invalid EC public key"));switch(t){case"jwk":r=XH.convertToJWK(e,!0);break;case"buffer":r=XH.convertToBuffer(e,!0)}return Promise.resolve(r)},mG.setupFallback(function(e,t){if("function"!=typeof mG.nodeCrypto.createECDH)throw new Error("unsupported algorithm: ECDH");var r,n=(t=t||{}).length||0;switch(e.crv){case"P-256":r="prime256v1";break;case"P-384":r="secp384r1";break;case"P-521":r="secp521r1";break;default:return Promise.reject(new Error("invalid curve: "+r))}var a=XH.convertToBuffer(e,!1),o=i(t.public,"buffer");return o=o.then(function(e){var t=mG.nodeCrypto.createECDH(r);t.setPrivateKey(a);var i=t.computeSecret(e);if(n){if(i.length<n)return Promise.reject(new Error("key length too large: "+n));i=i.slice(0,n)}return i})},function(e,t){e=e||{};var r=(t=t||{}).length||0,a=VL(CF(n),{namedCurve:e.crv});r||(r=e.d.length);var o=XH.convertToJWK(e,!1);o=mG.subtleCrypto.importKey("jwk",o,a,!1,["deriveBits"]);var s=i(t.public,"jwk");s=s.then(function(e){return mG.subtleCrypto.importKey("jwk",e,a,!1,[])});var c=Promise.all([o,s]);return c=(c=c.then(function(e){var t=e[0],i=e[1],a=VL(CF(n),{public:i});return mG.subtleCrypto.deriveBits(a,t,8*r)})).then(function(e){return e=new ig(e)})},function(e,t){var r=(t=t||{}).length||0,n=XH.convertToForge(e,!1),a=i(t.public,"forge");return a=a.then(function(e){var t=n.computeSecret(e);if(r){if(t.length<r)return Promise.reject(new Error("key length too large: "+r));t=t.slice(0,r)}return t})}));break;default:o.derive=null}}),["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"].forEach(function(e){var t,i,a=/^ECDH-ES(?:\+(.+))?/g.exec(e||"")[1],o=r[e]=r[e]||{};a?(a=TH[a])?(o.encrypt=(i=a.encrypt,function(e,t,r){if(!(r=r||{}).epk||!r.epk.d)return Promise.reject(new Error("missing ephemeral private key"));var a=XH.convertToObj(r.epk,!1);if(!e||!e.x||!e.y)return Promise.reject(new Error("missing static public key"));var o=n(a,XH.convertToObj(e,!0),{algorithm:r.alg,apu:r.apu,apv:r.apv});return o=o.then(function(e){return i(e,t)})}),o.decrypt=(t=a.decrypt,function(e,r,i){if(!(i=i||{}).epk||!i.epk.x||!i.epk.y)return Promise.reject(new Error("missing ephemeral public key"));var a=XH.convertToObj(i.epk,!0);if(!e||!e.d)return Promise.reject(new Error("missing static private key"));var o=n(XH.convertToObj(e,!1),a,{algorithm:i.alg,apu:i.apu,apv:i.apv});return o=o.then(function(e){return t(e,r)})})):o.ecrypt=o.decrypt=null:(o.encrypt=function(e,t,r){if(!(r=r||{}).epk||!r.epk.d)return Promise.reject(new Error("missing ephemeral private key"));var i=XH.convertToObj(r.epk,!1);if(!e||!e.x||!e.y)return Promise.reject(new Error("missing static public key"));var a=n(i,XH.convertToObj(e,!0),{algorithm:r.enc,apu:r.apu,apv:r.apv});return a=a.then(function(e){return{data:e,once:!0,direct:!0}})},o.decrypt=function(e,t,r){if(!(r=r||{}).epk||!r.epk.x||!r.epk.y)return Promise.reject(new Error("missing ephemeral public key"));var i=XH.convertToObj(r.epk,!0);if(!e||!e.d)return Promise.reject(new Error("missing static private key"));var a=n(XH.convertToObj(e,!1),i,{algorithm:r.enc,apu:r.apu,apv:r.apv});return a=a.then(function(e){return e})})})});function iW(e){switch(e){case"SHA-256":return"P-256";case"SHA-384":return"P-384";case"SHA-512":return"P-521";default:throw new Error("unsupported hash: "+e)}}function aW(e){var t=iW(e);return mG.setupFallback(null,function(r,n){if(t!==r.crv)return Promise.reject(new Error("invalid curve"));var i=XH.convertToJWK(r,!1),a={name:"ECDSA",namedCurve:i.crv,hash:{name:e}};return mG.subtleCrypto.importKey("jwk",i,a,!0,["sign"]).then(function(e){return mG.subtleCrypto.sign(a,e,n)}).then(function(e){return e=new ig(e),{data:n,mac:e}})},function(r,n){if(t!==r.crv)return Promise.reject(new Error("invalid curve"));var i=XH.convertToForge(r,!1);return CG[e].digest(n).then(function(e){return e=i.sign(e),e=ig.concat([e.r,e.s]),{data:n,mac:e}})})}function oW(e){var t=iW(e);return mG.setupFallback(null,function(r,n,i){if(t!==r.crv)return Promise.reject(new Error("invalid curve"));var a=XH.convertToJWK(r,!0),o={name:"ECDSA",namedCurve:a.crv,hash:{name:e}};return mG.subtleCrypto.importKey("jwk",a,o,!0,["verify"]).then(function(e){return mG.subtleCrypto.verify(o,e,i,n)}).then(function(e){return e?{data:n,mac:i,valid:!0}:Promise.reject(new Error("verification failed"))})},function(r,n,i){if(t!==r.crv)return Promise.reject(new Error("invalid curve"));var a=XH.convertToForge(r,!0);return CG[e].digest(n).then(function(e){var t=i.length/2,r={r:i.slice(0,t),s:i.slice(t)};return a.verify(e,r)?{data:n,mac:i,valid:!0}:Promise.reject(new Error("verification failed"))})})}var sW={};["ES256","ES384","ES512"].forEach(function(e){var t=e.replace(/ES(\d+)/g,function(e,t){return"SHA-"+t});sW[e]={sign:aW(t),verify:oW(t)}});var cW=sW,uW=new ig([0]);function lW(e,t,r){var n=[new ig("PBES2-"+e+"+"+t,"utf8"),uW,r];return ig.concat(n)}function fW(e){function t(e){var t=(e=e||{}).length||0,r=hV.asBuffer(e.salt||new ig(0),"base64u4l"),n=e.iterations||0;if(0>=t)throw new Error("invalid key length");if(0>=n)throw new Error("invalid iteration count");return e.length=t,e.salt=r,e.iterations=n,e}return mG.setupFallback(function(r,n){if(6>mG.nodeCrypto.pbkdf2.length)throw new Error("unsupported algorithm: PBES2-"+hmac+"+"+kw);try{n=t(n)}catch(e){return Promise.reject(e)}var i=n.length,a=n.salt,o=n.iterations,s=e.replace("-","");return new Promise(function(e,t){mG.nodeCrypto.pbkdf2(r,a,o,i,s,function(r,n){r?t(r):e(n)})})},function(r,n){try{n=t(n)}catch(e){return Promise.reject(e)}var i=n.length,a=n.salt,o=n.iterations,s=Promise.resolve(r);return s=(s=(s=s.then(function(e){return mG.subtleCrypto.importKey("raw",e,"PBKDF2",!1,["deriveBits"])})).then(function(t){var r={name:"PBKDF2",salt:a,iterations:o,hash:e};return mG.subtleCrypto.deriveBits(r,t,8*i)})).then(function(e){return hV.asBuffer(e)})},function(r,n){try{n=t(n)}catch(e){return Promise.reject(e)}var i=n.length,a=n.salt,o=n.iterations;return new Promise(function(t,n){var s=aV.md[e.replace("-","").toLowerCase()].create();aV.pkcs5.pbkdf2(r.toString("binary"),a.toString("binary"),o,i,s,function(e,r){e?n(e):(r=new ig(r,"binary"),t(r))})})})}function pW(e,t){var r=gG.KEYLENGTH[t]/8;return mG.setupFallback(function(n,i,a){if(6>mG.nodeCrypto.pbkdf2.length)throw new Error("unsupported algorithm: PBES2-"+e+"+"+t);a=a||{};var o=hV.asBuffer(a.p2s||new ig(0),"base64url"),s=a.p2c||0;if(0>=s)throw new Error("invalid iteration count");if(8>o.length)throw new Error("salt too small");o=lW(e,t,o);var c=e.replace("HS","SHA");return new Promise(function(e,t){mG.nodeCrypto.pbkdf2(n,o,s,r,c,function(r,n){r?t(r):e(n)})}).then(function(e){return TH[t].encrypt(e,i)})},function(n,i,a){a=a||{};var o=hV.asBuffer(a.p2s||new ig(0),"base64url"),s=a.p2c||0;if(0>=s)throw new Error("invalid iteration count");if(8>o.length)throw new Error("salt too small");o=lW(e,t,o);var c=e.replace("HS","SHA-");return Promise.resolve(n).then(function(e){return mG.subtleCrypto.importKey("raw",e,"PBKDF2",!1,["deriveKey"])}).then(function(e){var t={name:"PBKDF2",salt:o,iterations:s,hash:c},n={name:"AES-KW",length:8*r};return mG.subtleCrypto.deriveKey(t,e,n,!0,["wrapKey","unwrapKey"])}).then(function(e){return Promise.all([mG.subtleCrypto.importKey("raw",i,{name:"HMAC",hash:"SHA-256"},!0,["sign"]),e])}).then(function(e){return mG.subtleCrypto.wrapKey("raw",e[0],e[1],"AES-KW")}).then(function(e){return{data:e=new ig(e)}})},function(n,i,a){a=a||{};var o=hV.asBuffer(a.p2s||new ig(0),"base64url"),s=a.p2c||0;if(0>=s)throw new Error("invalid iteration count");if(8>o.length)throw new Error("salt too small");return o=lW(e,t,o),new Promise(function(t,i){var a=aV.md[e.replace("HS","SHA").toLowerCase()].create();aV.pkcs5.pbkdf2(n.toString("binary"),o.toString("binary"),s,r,a,function(e,r){e?i(e):(r=new ig(r,"binary"),t(r))})}).then(function(e){return TH[t].encrypt(e,i)})})}function dW(e,t){var r=gG.KEYLENGTH[t]/8;return mG.setupFallback(function(n,i,a){if(6>mG.nodeCrypto.pbkdf2.length)throw new Error("unsupported algorithm: PBES2-"+e+"+"+t);a=a||{};var o=hV.asBuffer(a.p2s||new ig(0),"base64url"),s=a.p2c||0;if(0>=s)return Promise.reject(new Error("invalid iteration count"));if(8>o.length)return Promise.reject(new Error("salt too small"));o=lW(e,t,o);var c=e.replace("HS","SHA");return new Promise(function(e,t){mG.nodeCrypto.pbkdf2(n,o,s,r,c,function(r,n){r?t(r):e(n)})}).then(function(e){return TH[t].decrypt(e,i)})},function(n,i,a){a=a||{};var o=hV.asBuffer(a.p2s||new ig(0),"base64url"),s=a.p2c||0;if(0>=s)return Promise.reject(new Error("invalid iteration count"));if(8>o.length)return Promise.reject(new Error("salt too small"));o=lW(e,t,o);var c=e.replace("HS","SHA-");return Promise.resolve(n).then(function(e){return mG.subtleCrypto.importKey("raw",e,"PBKDF2",!1,["deriveKey"])}).then(function(e){var t={name:"PBKDF2",salt:o,iterations:s,hash:c},n={name:"AES-KW",length:8*r};return mG.subtleCrypto.deriveKey(t,e,n,!0,["wrapKey","unwrapKey"])}).then(function(e){return mG.subtleCrypto.unwrapKey("raw",i,e,"AES-KW",{name:"HMAC",hash:"SHA-256"},!0,["sign"])}).then(function(e){return mG.subtleCrypto.exportKey("raw",e)}).then(function(e){return e=new ig(e)})},function(n,i,a){a=a||{};var o=hV.asBuffer(a.p2s||new ig(0),"base64url"),s=a.p2c||0;return 0>=s?Promise.reject(new Error("invalid iteration count")):8>o.length?Promise.reject(new Error("salt too small")):(o=lW(e,t,o),new Promise(function(t,i){var a=aV.md[e.replace("HS","SHA").toLowerCase()].create();aV.pkcs5.pbkdf2(n.toString("binary"),o.toString("binary"),s,r,a,function(e,r){e?i(e):(r=new ig(r,"binary"),t(r))})}).then(function(e){return TH[t].decrypt(e,i)}))})}var hW={};["PBKDF2-SHA-256","PBKDF2-SHA-384","PBKDF2-SHA-512"].forEach(function(e){var t=e.replace("PBKDF2-","");hW[e]={derive:fW(t)}}),["PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"].forEach(function(e){var t=/PBES2-(HS\d+)\+(A\d+KW)/g.exec(e),r=t[1],n=t[2];hW[e]={encrypt:pW(r,n),decrypt:dW(r,n)}});var vW=hW;function mW(e,t){var r=t?["n","e"]:["n","e","d","p","q","dp","dq","qi"];return r=r.map(function(t){return new aV.jsbn.BigInteger(e[t].toString("hex"),16)}),(t?aV.pki.rsa.setPublicKey:aV.pki.rsa.setPrivateKey).apply(aV.pki.rsa,r)}var gW={convertToForge:mW,convertToJWK:function(e,t){var r=CF(e);return(t?["n","e"]:["n","e","d","p","q","dp","dq","qi"]).forEach(function(e){r[e]=hV.base64url.encode(r[e])}),delete r.key_ops,delete r.use,delete r.alg,t&&(delete r.d,delete r.p,delete r.q,delete r.dp,delete r.dq,delete r.qi),r},convertToPem:function(e,t){return e.__cachedPem?e.__cachedPem:(r=t?aV.pki.publicKeyToPem(mW(e,t)):aV.pki.privateKeyToPem(mW(e,t)),Object.defineProperty(e,"__cachedPem",{value:r}),r);var r}};function yW(e){var t={name:e};"RSA-OAEP-256"===e?(t.name="RSA-OAEP",t.hash={name:"SHA-256"}):"RSA-OAEP"===e?t.hash={name:"SHA-1"}:t.name="RSAES-PKCS1-v1_5";var r;return r="RSAES-PKCS1-v1_5"!==t.name?function(e,r){return e=gW.convertToJWK(e,!0),mG.subtleCrypto.importKey("jwk",e,t,!0,["encrypt"]).then(function(e){return mG.subtleCrypto.encrypt(t,e,r)}).then(function(e){return{data:new ig(e)}})}:null,mG.setupFallback(null,r,function(e,r){r=new bG(r).bytes();var n=gW.convertToForge(e,!0),i={};"RSA-OAEP"===t.name&&(i.md=t.hash.name.toLowerCase().replace(/\-/g,""),i.md=aV.md[i.md].create());var a=n.encrypt(r,t.name.toUpperCase(),i);return a=new bG(a).native(),Promise.resolve({data:a})})}function bW(e){var t={name:e};"RSA-OAEP-256"===e?(t.name="RSA-OAEP",t.hash={name:"SHA-256"}):"RSA-OAEP"===e?t.hash={name:"SHA-1"}:t.name="RSAES-PKCS1-v1_5";var r,n;return r="RSAES-PKCS1-v1_5"!==t.name?function(e,r){return e=gW.convertToJWK(e,!1),mG.subtleCrypto.importKey("jwk",e,t,!0,["decrypt"]).then(function(e){return mG.subtleCrypto.decrypt(t,e,r)}).then(function(e){return new ig(e)})}:null,mG.nodeCrypto&&"RSA-OAEP"===e&&(n=function(e,t){return e=gW.convertToPem(e,!1),mG.nodeCrypto.privateDecrypt(e,t)}),mG.setupFallback(n,r,function(e,r){r=new bG(r).bytes();var n=gW.convertToForge(e,!1),i={};"RSA-OAEP"===t.name&&(i.md=t.hash.name.toLowerCase().replace(/\-/g,""),i.md=aV.md[i.md].create());var a=n.decrypt(r,t.name.toUpperCase(),i);return a=new bG(a).native(),Promise.resolve(a)})}var wW={};["RSA-OAEP","RSA-OAEP-256","RSA1_5"].forEach(function(e){wW[e]={encrypt:yW(e),decrypt:bW(e)}});var _W=wW;function EW(e){var t,r=e.replace("RS","SHA").toLowerCase(),n=e.replace("RS","SHA-"),i={name:"RSASSA-PKCS1-V1_5",hash:{name:n}};return mG.nodeCrypto&&mG.nodeCrypto.getHashes().indexOf(n)>-1&&(t=function(e,t){e=gW.convertToPem(e,!1);var r=mG.nodeCrypto.createSign(n);return r.update(t),{data:t,mac:r.sign(gW.convertToPem(e,!1))}}),mG.setupFallback(t,function(e,t){return e=gW.convertToJWK(e,!1),mG.subtleCrypto.importKey("jwk",e,i,!0,["sign"]).then(function(e){return mG.subtleCrypto.sign(i,e,t)}).then(function(e){var r=new ig(e);return{data:t,mac:r}})},function(e,t){var n=aV.md[r].create();n.start(),n.update(t);var i=gW.convertToForge(e,!1).sign(n,"RSASSA-PKCS1-V1_5");return i=new ig(i,"binary"),Promise.resolve({data:t,mac:i})})}function SW(e){var t,r=e.replace("RS","SHA").toLowerCase(),n={name:"RSASSA-PKCS1-V1_5",hash:{name:e.replace("RS","SHA-")}};return mG.nodeCrypto&&mG.nodeCrypto.getHashes().indexOf(r)>-1&&(t=function(e,t,n){var i=mG.nodeCrypto.createVerify(r);return i.update(t),i.end(),i.verify(gW.convertToPem(e,!0),n)?{data:t,mac:n,valid:!0}:Promise.reject(new Error("verification failed"))}),mG.setupFallback(t,function(e,t,r){return e=gW.convertToJWK(e,!0),mG.subtleCrypto.importKey("jwk",e,n,!0,["verify"]).then(function(e){return mG.subtleCrypto.verify(n,e,r,t)}).then(function(e){return e?{data:t,mac:r,valid:!0}:Promise.reject(new Error("verification failed"))})},function(e,t,n){var i=aV.md[r].create();i.start(),i.update(t),i=i.digest().bytes();var a=gW.convertToForge(e,!0),o=n.toString("binary");return a.verify(i,o,"RSASSA-PKCS1-V1_5")?Promise.resolve({data:t,mac:n,valid:!0}):Promise.reject(new Error("verification failed"))})}function xW(e){var t=e.replace("PS","SHA").toLowerCase(),r=e.replace("PS","SHA-");return function(e,n){var i=aV.md[t].create();i.start(),i.update(n);var a=aV.pss.create({md:aV.md[t].create(),mgf:aV.mgf.mgf1.create(aV.md[t].create()),saltLength:gG.HASHLENGTH[r]/8}),o=gW.convertToForge(e,!1).sign(i,a);return o=new ig(o,"binary"),Promise.resolve({data:n,mac:o})}}function CW(e){var t=e.replace("PS","SHA").toLowerCase(),r=e.replace("PS","SHA-");return function(e,n,i){var a=aV.md[t].create();a.start(),a.update(n),a=a.digest().bytes();var o=aV.pss.create({md:aV.md[t].create(),mgf:aV.mgf.mgf1.create(aV.md[t].create()),saltLength:gG.HASHLENGTH[r]/8}),s=gW.convertToForge(e,!0),c=i.toString("binary");return s.verify(a,c,o)?Promise.resolve({data:n,mac:i,valid:!0}):Promise.reject(new Error("verification failed"))}}var kW={};["PS256","PS384","PS512"].forEach(function(e){kW[e]={sign:xW(e),verify:CW(e)}}),["RS256","RS384","RS512"].forEach(function(e){kW[e]={sign:EW(e),verify:SW(e)}});var TW={},AW={},IW={},PW={},OW={},RW={};[UG,bH,TH,PH,OH,nW,cW,rW,SG,vW,_W,kW,CG].forEach(function(e){Object.keys(e).forEach(function(t){var r=e[t];"function"==typeof r.encrypt&&(OW[t]=r.encrypt),"function"==typeof r.decrypt&&(RW[t]=r.decrypt),"function"==typeof r.sign&&(IW[t]=r.sign),"function"==typeof r.verify&&(PW[t]=r.verify),"function"==typeof r.digest&&(TW[t]=r.digest),"function"==typeof r.derive&&(AW[t]=r.derive)})});var jW={digest:function(e,t,r){var n=TW[e];return n?n(t,r):Promise.reject(new Error("unsupported algorithm: "+e))},derive:function(e,t,r){var n=AW[e];return n?n(t,r):Promise.reject(new Error("unsupported algorithm: "+e))},sign:function(e,t,r,n){var i=IW[e];return i?i(t,r,n||{}):Promise.reject(new Error("unsupported algorithm: "+e))},verify:function(e,t,r,n,i){var a=PW[e];return a?a(t,r,n,i||{}):Promise.reject(new Error("unsupported algorithm: "+e))},encrypt:function(e,t,r,n){var i=OW[e];return i?i(t,r,n||{}):Promise.reject(new Error("unsupported algorithm: "+e))},decrypt:function(e,t,r,n){var i=RW[e];return i?i(t,r,n||{}):Promise.reject(new Error("unsupported algorithm: "+e))}},MW={MODE_SIGN:"sign",MODE_VERIFY:"verify",MODE_ENCRYPT:"encrypt",MODE_DECRYPT:"decrypt",MODE_WRAP:"wrap",MODE_UNWRAP:"unwrap"},NW={name:"PrivateKeyInfo",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1,capture:"keyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.OID,constructed:!1,capture:"keyOid"},{name:"AlgorithmIdentifier.parameters",captureAsn1:"keyParams"}]},{name:"PrivateKeyInfo",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.OCTETSTRING,constructed:!1,capture:"keyValue"}]},BW={name:"SubjectPublicKeyInfo",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.OID,constructed:!1,capture:"keyOid"},{name:"AlgorithmIdentifier.parameters",captureAsn1:"keyParams"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.BITSTRING,constructed:!1,capture:"keyValue"}]},DW={name:"Certificate",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:aV.asn1.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:aV.asn1.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},BW,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:aV.asn1.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.BITSTRING,constructed:!1,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:aV.asn1.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.BITSTRING,constructed:!1,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:aV.asn1.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:aV.asn1.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.BITSTRING,constructed:!1,capture:"certSignature"}]},FW={THUMBPRINT_KEY:"internal\0thumbprint",THUMBPRINT_HASH:"SHA-256"},LW={validators:{privateKey:NW,publicKey:BW,certificate:DW},thumbprint:function(e,t,r){if("function"!=typeof e.thumbprint)return Promise.reject(new Error("thumbprint not supported"));r=(r||FW.THUMBPRINT_HASH).toUpperCase();var n=e.thumbprint(t),i=Object.keys(n).sort().map(function(e){var t=n[e];return Ug(t)&&(t=hV.base64url.encode(t)),JSON.stringify(e)+":"+JSON.stringify(t)});i="{"+i.join(",")+"}";try{return jW.digest(r,new ig(i,"utf8"))}catch(e){return Promise.reject(e)}},unpackProps:function(e,t){var r;t.forEach(function(t){if(t.name in e){r=r||{};var n=e[t.name];switch(t.type){case"binary":Ug(n)?(n=n,e[t.name]=hV.base64url.encode(n)):n=hV.base64url.decode(n);break;case"string":case"number":case"boolean":n=n;break;case"array":n=[].concat(n);break;case"object":n=CF(n);break;default:n=n}r[t.name]=n}});var n=r||{};return Object.keys(e).forEach(function(t){t in n||delete e[t]}),r},COMMON_PROPS:[{name:"kty",type:"string"},{name:"kid",type:"string"},{name:"use",type:"string"},{name:"alg",type:"string"},{name:"x5c",type:"array"},{name:"x5t",type:"binary"},{name:"x5u",type:"string"},{name:"key_ops",type:"array"}],INTERNALS:FW},UW=function(e,t,r,n){if(!e)throw new Error("kty cannot be null");if(!t)throw new Error("keystore cannot be null");if(!r)throw new Error("props cannot be null");if("string"==typeof r&&(r=JSON.parse(r)),!n)throw new Error("cfg cannot be null");var i,a,o=[],s={},c={};r=CF(r),i=NV({},r[LW.INTERNALS.THUMBPRINT_KEY]||{}),delete r[LW.INTERNALS.THUMBPRINT_KEY],Object.keys(i).forEach(function(e){var t=i[e];a||Ug(a=t)&&(a=hV.base64url.encode(a)),Ug(t)||(t=hV.base64url.decode(t),i[e]=t)}),r.kty=e,r.kid=r.kid||a||gP();var u,l=Object.keys(LW.COMMON_PROPS).map(function(e){return LW.COMMON_PROPS[e].name});c.base=vG(r,l),o=o.concat(Object.keys(c.base)),c.public=CF(r),s.public=n.publicKey(c.public),s.public&&(o=o.concat(Object.keys(c.public))),c.private=CF(r),s.private=n.privateKey(c.private),s.private&&(o=o.concat(Object.keys(c.private))),c.extra=WK(r,o),u=s.public&&"length"in s.public?s.public.length:s.private&&"length"in s.private?s.private.length:NaN,Object.defineProperty(this,"keystore",{value:t,enumerable:!0}),Object.defineProperty(this,"length",{value:u,enumerable:!0}),Object.defineProperty(this,"kty",{value:e,enumerable:!0}),Object.defineProperty(this,"kid",{value:c.base.kid,enumerable:!0}),Object.defineProperty(this,"use",{value:c.base.use||"",enumerable:!0}),Object.defineProperty(this,"alg",{value:c.base.alg||"",enumerable:!0}),Object.defineProperty(this,"thumbprint",{value:function(e){if(e=(e||LW.INTERNALS.THUMBPRINT_HASH).toUpperCase(),i[e])return Promise.resolve(i[e]);var t=LW.thumbprint(n,c,e);return t=t.then(function(t){return t&&(i[e]=t),t})}}),Object.defineProperty(this,"algorithms",{value:function(t){var r=[];this.use&&"sig"!==this.use||(t&&MW.MODE_SIGN!==t||r.push(MW.MODE_SIGN),t&&MW.MODE_VERIFY!==t||r.push(MW.MODE_VERIFY)),this.use&&"enc"!==this.use||(t&&MW.MODE_ENCRYPT!==t||r.push(MW.MODE_ENCRYPT),t&&MW.MODE_DECRYPT!==t||r.push(MW.MODE_DECRYPT),t&&MW.MODE_WRAP!==t||r.push(MW.MODE_WRAP),t&&MW.MODE_UNWRAP!==t||r.push(MW.MODE_UNWRAP));var i,a=this,o=r.map(function(e){return n.algorithms.call(a,s,e)});return o=ZV(o),o=CU(o),this.alg&&(i="oct"===e?[this.alg,"dir"]:[this.alg],o=Fq(o,i)),o}}),Object.defineProperty(this,"supports",{value:function(e,t){return-1!==this.algorithms(t).indexOf(e)}}),Object.defineProperty(this,"has",{value:function(e,t){var r=!1;return r=(r=(r=(r=r||!!(c.base&&e in c.base))||!!(s.public&&e in s.public))||!!(c.extra&&e in c.extra))||!!(t&&s.private&&e in s.private)}}),Object.defineProperty(this,"get",{value:function(e,t){var r;return c.base&&e in c.base?r=c.base:s.public&&e in s.public?r=s.public:c.extra&&e in c.extra?r=c.extra:t&&s.private&&e in s.private&&(r=s.private),r&&r[e]||null}}),Object.defineProperty(this,"toJSON",{value:function(e,t){Array.isArray(e)&&(t=e,e=!1);var r={};return r=VL(r,c.base,c.public,"boolean"==typeof e&&e?c.private:{},c.extra),r=WK(r,t||[])}}),Object.defineProperty(this,"toPEM",{value:function(e){if(null===e&&(e=!1),!n.convertToPEM)throw new Error("Unsupported key type for PEM encoding");var t=e?s.private:s.public;if(!t)throw new Error("Invalid key");return n.convertToPEM.call(this,t,e)}}),Object.defineProperty(this,"toObject",{value:function(e,t){Array.isArray(e)&&(t=e,e=!1);var r={};return r=VL(r,c.base,s.public,"boolean"==typeof e&&e?s.private:{},c.extra),r=WK(r,(t||[]).concat("length"))}}),Object.defineProperty(this,"sign",{value:function(e,t,r){if(-1===this.algorithms("sign").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=n.signKey.call(this,e,s);return i?(r=r?CF(r):{},n.signProps&&(r=VL(r,n.signProps.call(this,e,r))),jW.sign(e,i,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"verify",{value:function(e,t,r,i){if(-1===this.algorithms("verify").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var a=n.verifyKey.call(this,e,s);return a?(i=i?CF(i):{},n.verifyProps&&(i=VL(i,n.verifyProps.call(this,e,i))),jW.verify(e,a,t,r,i)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"encrypt",{value:function(e,t,r){if(-1===this.algorithms("encrypt").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=n.encryptKey.call(this,e,s);return i?(r=r?CF(r):{},n.encryptProps&&(r=VL(r,n.encryptProps.call(this,e,r))),jW.encrypt(e,i,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"decrypt",{value:function(e,t,r){if(-1===this.algorithms("decrypt").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=n.decryptKey.call(this,e,s);return i?(r=r?CF(r):{},n.decryptProps&&(r=VL(r,n.decryptProps.call(this,e,r))),jW.decrypt(e,i,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"wrap",{value:function(e,t,r){if(-1===this.algorithms("wrap").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=n.wrapKey.call(this,e,s);return i?(r=r?CF(r):{},n.wrapProps&&(r=VL(r,n.wrapProps.call(this,e,r))),jW.encrypt(e,i,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"unwrap",{value:function(e,t,r){if(-1===this.algorithms("unwrap").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=n.unwrapKey.call(this,e,s);return i?(r=r?CF(r):{},n.unwrapProps&&(r=VL(r,n.unwrapProps.call(this,e,r))),jW.decrypt(e,i,t,r)):Promise.reject(new Error("improper key"))}})},zW={BaseKey:UW,helpers:LW},VW=function(){var e={};Object.defineProperty(this,"register",{value:function(t){if(!t||"string"!=typeof t.kty||!t.kty)throw new Error("invalid Key factory");var r=t.kty;return e[r]=t,this}}),Object.defineProperty(this,"unregister",{value:function(t){if(!t||"string"!=typeof t.kty||!t.kty)throw new Error("invalid Key factory");var r=t.kty;return t===e[r]&&delete e[r],this}}),Object.defineProperty(this,"get",{value:function(t){return e[t||""]||void 0}}),Object.defineProperty(this,"all",{value:function(){return Object.keys(e).map(function(t){return e[t]})}})},qW=new VW;function KW(e,t){var r,n={},i=[],a=t.form,o=t.body,s=null;switch(t=aV.asn1.fromDer(o),a){case"private":e.all().some(function(e){if(r)return!1;if(!e.validators)return!1;var a=e.validators.oid,o=e.validators.privateKey;return!!o&&(n={},i=[],(r=aV.asn1.validate(t,o,n,i))&&(n.keyOid=aV.asn1.oidToDer(a),n.parsed=!0),r)}),n.type="private";break;case"pkcs8":r=aV.asn1.validate(t,zW.helpers.validators.privateKey,n,i),n.type="private";break;case"public":case"spki":r=aV.asn1.validate(t,zW.helpers.validators.publicKey,n,i),n.type="public";break;case"pkix":case"x509":if(r=aV.asn1.validate(t,zW.helpers.validators.certificate,n,i)){n=function(e){return["certIssuer","certSubject"].forEach(function(t){var r=aV.pki.RDNAttributesAsArray(e[t]),n=e[t]={};r.forEach(function(e){n[e.name||e.type]=e.value})}),e}(n);var c=aV.md.sha1.create();c.update(o),s=hV.base64url.encode(new ig(c.digest().toHex(),"hex"))}n.type="public"}return r?(n.keyOid&&(n.keyOid=aV.asn1.derToOid(n.keyOid)),r=null,qW.all().forEach(function(e){r||e&&"function"==typeof e.import&&(r=e.import(n))}),r&&n.certSubject&&n.certSubject.commonName&&(r.kid=n.certSubject.commonName),r&&s&&(r.x5t=s),r):null}var GW=function(e,t){var r={};Object.defineProperty(this,"generate",{value:function(t,r,n){var i=e.get(t);if(!i)return Promise.reject(new Error("unsupported key type"));(n=CF(n||{})).kty=t;var a=this;return i.generate(r).then(function(e){return e=VL(n,e,{kty:t}),a.add(e)})}}),Object.defineProperty(this,"add",{value:function(t,n,i){var a;if(i=i||{},Ug(t)||"string"==typeof t)if("json"===(n=(n||"json").toLowerCase()))t=JSON.parse(t.toString("utf8"));else try{if(a="pem"===n?function(e){var t={};if(!aV.pem.decode(e).some(function(e){switch(e.type){case"CERTIFICATE":t.form="pkix";break;case"PUBLIC KEY":t.form="spki";break;case"PRIVATE KEY":t.form="pkcs8";break;case"EC PRIVATE KEY":case"RSA PRIVATE KEY":t.form="private";break;default:return!1}return t.body=e.body,!0}))throw new Error("supported PEM type not found");return t}(t):{body:t.toString("binary"),form:n},!(t=KW(e,a)))throw new Error("no importer for key");Object.keys(i).forEach(function(e){t[e]=i[e]})}catch(e){return Promise.reject(e)}else t=GW.isKey(t)?t.toJSON(!0):CF(t);var o=e.get(t.kty);if(!o)return Promise.reject(new Error("unsupported key type"));var s=this;return o.prepare(t).then(function(e){return new zW.BaseKey(t.kty,s,t,e)}).then(function(e){var t=e.kid||"";return(r[t]=r[t]||[]).push(e),e})}}),Object.defineProperty(this,"remove",{value:function(e){if(e){var t=r[e.kid];if(t){var n=t.indexOf(e);-1!==n&&(t.splice(n,1),t.length||delete r[e.kid])}}}}),Object.defineProperty(this,"all",{value:function(e,n){void 0!==(e=e||{}).kid&&null!==e.kid&&"string"!=typeof e.kid&&(e.kid=String(e.kid));var i=[],a=function(t){return(!e.kty||!t.kty||e.kty===t.kty)&&((!e.use||!t.use||e.use===t.use)&&(!e.alg||("dir"===e.alg||!t.alg||e.alg===t.alg)&&t.supports(e.alg)))};return Object.keys(r).forEach(function(t){if(!e.kid||e.kid===t){var n=r[t].filter(a);n.length&&(i=i.concat(n))}}),!n&&t&&(i=i.concat(t.all(e))),i}}),Object.defineProperty(this,"get",{value:function(e,r,n){"boolean"==typeof e?(n=e,r=e=null):"object"==typeof e&&(n=r,r=e,e=null),r=r||{},e&&(r.kid=e),void 0!==r.kid&&null!==r.kid&&"string"!=typeof r.kid&&(r.kid=String(r.kid));var i=this.all(r,!0);return i.length||!t||n||(i=t.get(r,n)),i[0]||null}}),Object.defineProperty(this,"temp",{value:function(){return new GW(e,this)}}),Object.defineProperty(this,"toJSON",{value:function(e){var t=[];return Object.keys(r).forEach(function(n){var i=r[n].map(function(t){return t.toJSON(e)});t=t.concat(i)}),{keys:t}}})};GW.isKeyStore=function(e){return!!e&&("object"==typeof e&&("function"==typeof e.get&&"function"==typeof e.all&&"function"==typeof e.generate&&"function"==typeof e.add&&"function"==typeof e.remove))},GW.createKeyStore=function(){return new GW(qW)},GW.asKeyStore=function(e){if(GW.isKeyStore(e))return Promise.resolve(e);var t,r=GW.createKeyStore();if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e))t=e;else{if(!("keys"in e))return Promise.reject(new Error("invalid keystore"));t=e.keys}t=t.map(function(e){return r.add(e)});var n=Promise.all(t);return n=n.then(function(){return r})},GW.isKey=function(e){return!!e&&("object"==typeof e&&(!!GW.isKeyStore(e.keystore)&&("string"==typeof e.kty&&"number"==typeof e.length&&"function"==typeof e.algorithms&&"function"==typeof e.supports&&"function"==typeof e.encrypt&&"function"==typeof e.decrypt&&"function"==typeof e.wrap&&"function"==typeof e.unwrap&&"function"==typeof e.sign&&"function"==typeof e.verify)))},GW.asKey=function(e,t,r){return GW.isKey(e)?Promise.resolve(e):e=GW.createKeyStore().add(e,t,r)};var HW={KeyRegistry:VW,KeyStore:GW,registry:qW},WW={BaseKey:UW,helpers:LW},$W=["HS256","HS384","HS512"],YW=["A128GCM","A192GCM","A256GCM","A128CBC-HS256","A192CBC-HS384","A256CBC-HS512","A128CBC+HS256","A192CBC+HS384","A256CBC+HS512"],JW=["A128KW","A192KW","A256KW","A128GCMKW","A192GCMKW","A256GCMKW","PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW","dir"];function QW(e,t){return"iv"in t&&(t.iv=Ug(t.iv)?t.iv:hV.base64url.decode(t.iv||"")),"adata"in t&&(t.adata=Ug(t.adata)?t.adata:new ig(t.adata||"","utf8")),"mac"in t&&(t.mac=Ug(t.mac)?t.mac:hV.base64url.decode(t.mac||"")),"tag"in t&&(t.tag=Ug(t.tag)?t.tag:hV.base64url.decode(t.tag||"")),t}function ZW(e,t){return"iv"in t&&(t.iv=Ug(t.iv)?t.iv:hV.base64url.decode(t.iv||"")),"adata"in t&&(t.adata=Ug(t.adata)?t.adata:new ig(t.adata||"","utf8")),t}var XW={publicKey:function(e){var t=WW.helpers.COMMON_PROPS.concat([]);return WW.helpers.unpackProps(e,t)},privateKey:function(e){var t,r=WW.helpers.COMMON_PROPS.concat([{name:"k",type:"binary"}]);return(t=WW.helpers.unpackProps(e,r))&&t.k?t.length=8*t.k.length:t=void 0,t},thumbprint:function(e){return e.private&&(e=e.private),{k:e.k||"",kty:"oct"}},algorithms:function(e,t){var r=e.private&&8*e.private.k.length,n=[256,384,512];if(!r)return[];switch(t){case"encrypt":case"decrypt":return YW.filter(function(e){return e==="A"+r/2+"CBC-HS"+r||e==="A"+r/2+"CBC+HS"+r||e==="A"+r+"GCM"});case"sign":case"verify":return $W.filter(function(e){var t=!1;return n.forEach(function(n){n>r||(t|=e==="HS"+n)}),t});case"wrap":case"unwrap":return JW.filter(function(e){return e==="A"+r+"KW"||e==="A"+r+"GCMKW"||0===e.indexOf("PBES2-")||"dir"===e})}return[]},encryptKey:function(e,t){return t.private&&t.private.k},encryptProps:ZW,decryptKey:function(e,t){return t.private&&t.private.k},decryptProps:QW,wrapKey:function(e,t){return t.private&&t.private.k},wrapProps:ZW,unwrapKey:function(e,t){return t.private&&t.private.k},unwrapProps:QW,signKey:function(e,t){return t.private&&t.private.k},verifyKey:function(e,t){return t.private&&t.private.k}},e$={kty:"oct",prepare:function(e){var t=XW,r=Promise.resolve(e);return r=(r=r.then(function(e){return WW.helpers.thumbprint(t,e)})).then(function(r){var n={};return n[WW.helpers.INTERNALS.THUMBPRINT_HASH]=r,e[WW.helpers.INTERNALS.THUMBPRINT_KEY]=n,t})},generate:function(e){var t=hV.randomBytes(e/8);return Promise.resolve({k:t})}};Object.freeze({config:XW,factory:e$});HW.registry.register(e$);var t$=mG.nodeCrypto,r$={BaseKey:UW,helpers:LW},n$=["RS256","RS384","RS512","PS256","PS384","PS512"],i$=["RSA-OAEP","RSA-OAEP-256","RSA1_5"],a$={publicKey:function(e){var t,r=r$.helpers.COMMON_PROPS.concat([{name:"n",type:"binary"},{name:"e",type:"binary"}]);return(t=r$.helpers.unpackProps(e,r))&&t.n&&t.e?t.length=8*t.n.length:(delete t.e,delete t.n),t},privateKey:function(e){var t,r=r$.helpers.COMMON_PROPS.concat([{name:"n",type:"binary"},{name:"e",type:"binary"},{name:"d",type:"binary"},{name:"p",type:"binary"},{name:"q",type:"binary"},{name:"dp",type:"binary"},{name:"dq",type:"binary"},{name:"qi",type:"binary"}]);return(t=r$.helpers.unpackProps(e,r))&&t.d&&t.n&&t.e&&t.p&&t.q&&t.dp&&t.dq&&t.qi?t.length=8*t.d.length:t=void 0,t},thumbprint:function(e){return e.public&&(e=e.public),{e:e.e,kty:"RSA",n:e.n}},algorithms:function(e,t){switch(t){case"encrypt":case"decrypt":return[];case"wrap":return e.public&&i$.slice()||[];case"unwrap":return e.private&&i$.slice()||[];case"sign":return e.private&&n$.slice()||[];case"verify":return e.public&&n$.slice()||[]}return[]},wrapKey:function(e,t){return t.public},unwrapKey:function(e,t){return t.private},signKey:function(e,t){return t.private},verifyKey:function(e,t){return t.public},convertToPEM:function(e,t){var r=gW.convertToForge(e,!t);return t?aV.pki.privateKeyToPem(r):aV.pki.publicKeyToPem(r)}};var o$={oid:"1.2.840.113549.1.1.1",privateKey:{name:"RSAPrivateKey",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1,capture:"version"},{name:"RSAPrivateKey.modulus",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1,capture:"n"},{name:"RSAPrivateKey.publicExponent",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1,capture:"e"},{name:"RSAPrivateKey.privateExponent",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1,capture:"d"},{name:"RSAPrivateKey.prime1",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1,capture:"p"},{name:"RSAPrivateKey.prime2",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1,capture:"q"},{name:"RSAPrivateKey.exponent1",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1,capture:"dp"},{name:"RSAPrivateKey.exponent2",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1,capture:"dq"},{name:"RSAPrivateKey.coefficient",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1,capture:"qi"}]},publicKey:{name:"RSAPublicKey",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1,capture:"n"},{name:"RSAPublicKey.exponent",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1,capture:"e"}]}},s$={kty:"RSA",validators:o$,prepare:function(e){var t=a$,r=Promise.resolve(e);return r=(r=r.then(function(e){return r$.helpers.thumbprint(t,e)})).then(function(r){var n={};return n[r$.helpers.INTERNALS.THUMBPRINT_HASH]=r,e[r$.helpers.INTERNALS.THUMBPRINT_KEY]=n,t})},generate:function(e){var t;if(t$)t=new Promise(function(t,r){aV.pki.rsa.generateKeyPair({bits:e,e:65537},function(e,n){if(e)return r(e);t(n.privateKey)})});else{var r=aV.pki.rsa.generateKeyPair({bits:e,e:65537});t=Promise.resolve(r.privateKey)}return t.then(function(e){var t={};return["e","n","d","p","q",{incoming:"dP",outgoing:"dp"},{incoming:"dQ",outgoing:"dq"},{incoming:"qInv",outgoing:"qi"}].forEach(function(r){var n,i,a;"string"==typeof r?n=i=r:(n=r.incoming,i=r.outgoing),n in e&&(t[i]=((a=(a=e[n]).toString(16)).length%2&&(a="0"+a),new ig(a,"hex")))}),t})},import:function(e){if(o$.oid!==e.keyOid)return null;if(!e.parsed){"string"==typeof e.keyValue?e.keyValue=aV.asn1.fromDer(e.keyValue):Array.isArray(e.keyValue)&&(e.keyValue=e.keyValue[0]);var t="private"===e.type?o$.privateKey:o$.publicKey,r={};if(!aV.asn1.validate(e.keyValue,t,r,[]))return null;e=r}var n={kty:"RSA"};return["n","e","d","p","q","dp","dq","qi"].forEach(function(t){if(t in e){var r=new ig(e[t],"binary");0===r[0]&&(r=r.slice(1)),n[t]=r}}),n}};Object.freeze({config:a$,factory:s$});HW.registry.register(s$);var c$={BaseKey:UW,helpers:LW},u$=["ES256","ES384","ES512"],l$=["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"];function f$(e){switch(e){case"1.2.840.10045.3.1.7":return"P-256";case"1.3.132.0.34":return"P-384";case"1.3.132.0.35":return"P-521";default:return null}}var p$={publicKey:function(e){var t=c$.helpers.COMMON_PROPS.concat([{name:"crv",type:"string"},{name:"x",type:"binary"},{name:"y",type:"binary"}]),r=c$.helpers.unpackProps(e,t);return r&&r.crv&&r.x&&r.y?r.length=XH.curveSize(r.crv):(delete r.crv,delete r.x,delete r.y),r},privateKey:function(e){var t=c$.helpers.COMMON_PROPS.concat([{name:"crv",type:"string"},{name:"x",type:"binary"},{name:"y",type:"binary"},{name:"d",type:"binary"}]),r=c$.helpers.unpackProps(e,t);return r&&r.crv&&r.x&&r.y&&r.d?r.length=XH.curveSize(r.crv):r=void 0,r},thumbprint:function(e){return e.public&&(e=e.public),{crv:e.crv,kty:"EC",x:e.x,y:e.y}},algorithms:function(e,t){var r=e.public&&e.public.length||e.private&&e.private.length||0;switch(521===r&&(r=512),t){case"encrypt":case"decrypt":return[];case"wrap":return e.public&&l$||[];case"unwrap":return e.private&&l$||[];case"sign":return e.private?u$.filter(function(e){return e==="ES"+r}):[];case"verify":return e.public?u$.filter(function(e){return e==="ES"+r}):[]}},encryptKey:function(e,t){return t.public},decryptKey:function(e,t){return t.private},wrapKey:function(e,t){return t.public},unwrapKey:function(e,t){return t.private},signKey:function(e,t){return t.private},verifyKey:function(e,t){return t.public},convertToPEM:function(e,t){var r,n,i,a=e.crv;return a=function(e){switch(e){case"P-256":return"1.2.840.10045.3.1.7";case"P-384":return"1.3.132.0.34";case"P-521":return"1.3.132.0.35";default:return null}}(a),a=aV.asn1.oidToDer(a),t?(r="EC PRIVATE KEY",n=ig.concat([new ig([0,4]),e.x,e.y]).toString("binary"),e=e.d.toString("binary"),i=aV.asn1.create(aV.asn1.Class.UNIVERSAL,aV.asn1.Type.SEQUENCE,!0,[aV.asn1.create(aV.asn1.Class.UNIVERSAL,aV.asn1.Type.INTEGER,!1,""),aV.asn1.create(aV.asn1.Class.UNIVERSAL,aV.asn1.Type.OCTETSTRING,!1,e),aV.asn1.create(aV.asn1.Class.CONTEXT_SPECIFIC,0,!0,[aV.asn1.create(aV.asn1.Class.UNIVERSAL,aV.asn1.Type.OID,!1,a.bytes())]),aV.asn1.create(aV.asn1.Class.CONTEXT_SPECIFIC,1,!0,[aV.asn1.create(aV.asn1.Class.UNIVERSAL,aV.asn1.Type.BITSTRING,!1,n)])])):(r="PUBLIC KEY",e=ig.concat([new ig([0,4]),e.x,e.y]).toString("binary"),i=aV.asn1.create(aV.asn1.Class.UNIVERSAL,aV.asn1.Type.SEQUENCE,!0,[aV.asn1.create(aV.asn1.Class.UNIVERSAL,aV.asn1.Type.SEQUENCE,!0,[aV.asn1.create(aV.asn1.Class.UNIVERSAL,aV.asn1.Type.OID,!1,aV.asn1.oidToDer("1.2.840.10045.2.1").bytes()),aV.asn1.create(aV.asn1.Class.UNIVERSAL,aV.asn1.Type.OID,!1,a.bytes())]),aV.asn1.create(aV.asn1.Class.UNIVERSAL,aV.asn1.Type.BITSTRING,!1,e)])),i=aV.asn1.toDer(i).bytes(),aV.pem.encode({type:r,body:i})}},d$={oid:"1.2.840.10045.2.1",privateKey:{name:"ECPrivateKey",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"ECPrivateKey.version",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1},{name:"ECPrivateKey.private",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.OCTETSTRING,constructed:!1,capture:"d"},{tagClass:aV.asn1.Class.CONTEXT_SPECIFIC,name:"ECPrivateKey.parameters",constructed:!0,value:[{name:"ECPrivateKey.namedCurve",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.OID,constructed:!1,capture:"crv"}]},{name:"ECPrivateKey.publicKey",tagClass:aV.asn1.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"ECPrivateKey.point",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.BITSTRING,constructed:!1,capture:"point"}]}]},embeddedPrivateKey:{name:"ECPrivateKey",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"ECPrivateKey.version",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.INTEGER,constructed:!1},{name:"ECPrivateKey.private",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.OCTETSTRING,constructed:!1,capture:"d"},{name:"ECPrivateKey.publicKey",tagClass:aV.asn1.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"ECPrivateKey.point",tagClass:aV.asn1.Class.UNIVERSAL,type:aV.asn1.Type.BITSTRING,constructed:!1,capture:"point"}]}]}},h$={kty:"EC",validators:d$,prepare:function(e){var t=p$,r=Promise.resolve(e);return r=(r=r.then(function(e){return c$.helpers.thumbprint(t,e)})).then(function(r){var n={};return n[c$.helpers.INTERNALS.THUMBPRINT_HASH]=r,e[c$.helpers.INTERNALS.THUMBPRINT_KEY]=n,t})},generate:function(e){var t=YH.generateKeyPair(e),r={crv:e,x:t.public.x,y:t.public.y,d:t.private.d};return Promise.resolve(r)},import:function(e){if(d$.oid!==e.keyOid)return null;var t;if(e.keyParams&&aV.asn1.Type.OID===e.keyParams.type?t=f$(t=aV.asn1.derToOid(e.keyParams.value)):e.crv&&(t=f$(t=aV.asn1.derToOid(e.crv))),!t)return null;if(!e.parsed){var r={};if("private"===e.type){if("string"==typeof e.keyValue?e.keyValue=aV.asn1.fromDer(e.keyValue):Array.isArray(e.keyValue)&&(e.keyValue=e.keyValue[0]),!aV.asn1.validate(e.keyValue,d$.embeddedPrivateKey,r,[]))return null}else r.point=e.keyValue;e=r}var n={kty:"EC",crv:t};if(e.d&&(n.d=new ig(e.d,"binary")),e.point){var i=new ig(e.point,"binary");if(4!==i.readUInt16BE(0))return null;var a=(i=i.slice(2)).length/2;n.x=i.slice(0,a),n.y=i.slice(a)}return n}};Object.freeze({config:p$,factory:h$});HW.registry.register(h$);var v$=n(function(e,t){Object.keys(HW.KeyStore).forEach(function(e){t[e]=HW.KeyStore[e]}),Object.keys(MW).forEach(function(e){t[e]=MW[e]})}),m$={compact:!1,protect:"*"},g$=function(e,t){return Array.prototype.slice.call(e,t||0)},y$=function(e,t){var r=!1,n=e.format||"general",i=new ig(0);Object.defineProperty(this,"compact",{get:function(){return"compact"===n},enumerable:!0}),Object.defineProperty(this,"format",{get:function(){return n},enumerable:!0}),Object.defineProperty(this,"update",{value:function(e,t){if(r)throw new Error("already final");return null!=e&&(e=hV.asBuffer(e,t),i=i.length?ig.concat([i,e],i.length+e.length):e),this}}),Object.defineProperty(this,"final",{value:function(e,a){if(r)return Promise.reject(new Error("already final"));var o;switch(this.update(e,a),r=!0,o=(o=(o=Promise.all(t)).then(function(e){return i=hV.base64url.encode(i),e=e.map(function(e){var t={},r=0,n=CF(e.header),a=Object.keys(n).length;e.protected.forEach(function(e){e in n&&(t[e]=n[e],r++,delete n[e],a--)}),r>0?(t=JSON.stringify(t),t=hV.base64url.encode(t)):t="";var o=new ig(t+"."+i,"ascii");return e=(e=e.key.sign(e.header.alg,o,e.header)).then(function(e){var i={};return 0<r&&(i.protected=t),0<a&&(i.header=n),i.signature=hV.base64url.encode(e.mac),i})}),e=[Promise.resolve(i)].concat(e),Promise.all(e)})).then(function(e){return{payload:e[0],signatures:e.slice(1)}}),n){case"compact":o=o.then(function(e){var t=[e.signatures[0].protected,e.payload,e.signatures[0].signature];return t=t.join(".")});break;case"flattened":o=o.then(function(e){var t={};t.payload=e.payload;var r=e.signatures[0];return r.protected&&(t.protected=r.protected),r.header&&(t.header=r.header),t.signature=r.signature,t})}return o}})};function b$(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var w$=function(e){e?"string"==typeof e&&(e=e.split(" ")):e=[];var t,r=[],n=[],i=[],a=[],o=/^(\!)?([^*]*)\*([^*]*)$/;e.forEach(function(e){if(e){o.lastIndex=0;var s=o.exec(e);s&&(t="("+function(e,t){var r=[];return r.push("^"),e&&(e=b$(e),r.push(e)),t?(r.push(".*?"),t=b$(t),r.push(t)):e||r.push(".*"),r.push("$"),r.join("")}(s[2],s[3])+")",s[1]?(a.push(t),n.push(s[0])):(i.push(t),r.push(s[0])))}}),i=i.length?new RegExp(i.join("|")):null,a=a.length?new RegExp(a.join("|")):null,r.length||(r=["*"]),Object.defineProperty(this,"spec",{value:r.join(" ")+" "+n.join(" "),enumerable:!0}),Object.defineProperty(this,"match",{value:function(e){var t=Boolean(e);return t&&i&&(i.lastIndex=0,t=i.test(e)),t&&a&&(a.lastIndex=0,t=!a.test(e)),t}})},_$={algorithms:"*",allowEmbeddedKey:!1},E$=function(e,t){var r,n;n=v$.isKey(e)?(r=e).keystore:v$.isKeyStore(e)?e:v$.createKeyStore(),t=VL(_$,t),Object.defineProperty(this,"defaultKey",{value:r||void 0,enumerable:!0}),Object.defineProperty(this,"keystore",{value:n,enumerable:!0}),Object.defineProperty(this,"verify",{value:function(e,i){var a=(i=VL({},t,i||{})).handlers||{},o=Object.keys(a),s=new w$(i.algorithms);if("string"==typeof e)e={payload:(e=e.split("."))[1],signatures:[{protected:e[0],signature:e[2]}]};else if(!e||"object"===e)throw new Error("invalid input");e.signature&&(e.signatures=[{protected:e.protected||void 0,header:e.header||void 0,signature:e.signature}]);var c=e.signatures||[{}];c=c.map(function(e){var t=CF(e.header||{}),r=e.protected?JSON.parse(pV.decode(e.protected,"utf8")):{};t=VL(t,r);var n=pV.decode(e.signature);if(!s.match(t.alg))return Promise.reject(new Error("Algorithm not allowed: "+t.alg));var i=r.crit;if(i){if(!Array.isArray(i))return Promise.reject(new Error("Invalid 'crit' header"));for(var a=0;i.length>a;a++)if(-1===o.indexOf(i[a]))return Promise.reject(new Error("Critical extension is not supported: "+i[a]))}return r=Object.keys(r),Promise.resolve({protected:r,aad:e.protected||"",header:t,signature:n})});var u=Promise.all(c);return u=u.then(function(t){return new Promise(function(s,c){var u=function(){var l=t.shift();if(l){l=VL({},l,{payload:e.payload});var f=Promise.resolve(l);(f=(f=(f=(f=(f=(f=f.then(function(e){var t;return i.allowEmbeddedKey&&e.header.jwk?t=v$.asKey(e.header.jwk):i.allowEmbeddedKey&&e.header.x5c?(t=new ig(t=e.header.x5c[0],"base64"),t=v$.asKey(t,"pkix")):t=Promise.resolve(r||n.get({use:"sig",alg:e.header.alg,kid:e.header.kid})),t.then(function(t){return t?(e.key=t,e):Promise.reject(new Error("key does not match"))})})).then(function(e){var t=[];return o.forEach(function(r){var n;"function"==typeof(r=a[r])?n=r(e):"object"==typeof r&&"function"==typeof r.prepare&&(n=r.prepare(e)),n&&t.push(Promise.resolve(n))}),Promise.all(t).then(function(){return e})})).then(function(e){var t=e.aad||"",r=e.payload||"",n=new ig(1+t.length+r.length),i=0;return n.write(t,i,"ascii"),i+=t.length,n.write(".",i,"ascii"),i++,Ug(r)?r.copy(n,i):n.write(r,i,"binary"),e.content=n,e})).then(function(e){return e.key.verify(e.header.alg,e.content,e.signature)})).then(function(e){var t=l.payload;return t=pV.decode(t),{protected:l.protected,header:l.header,payload:t,signature:e.mac,key:l.key}})).then(function(e){var t=[];return o.forEach(function(r){var n;"object"==typeof(r=a[r])&&"function"==typeof r.complete&&(n=r.complete(e)),n&&t.push(Promise.resolve(n))}),Promise.all(t).then(function(){return e})})).then(s,u)}else c(new Error("no key found"))};u()})})}})};var S$={createSign:{signer:y$,createSign:function(e,t){var r=e,n=1,i=t;if(0===arguments.length)throw new Error("at least one signatory must be provided");1===arguments.length?(i=e,n=0,r={}):v$.isKey(e)||e&&"kty"in e||e&&"key"in e&&(v$.isKey(e.key)||"kty"in e.key)?(i=e,n=0,r={}):r=CF(e),Array.isArray(i)||(i=g$(arguments,n));var a=(r=VL(CF(m$),r)).fields||{},o=r.format;if(o||(o=r.compact?"compact":"general"),("compact"===o||"flattened"===o)&&1<i.length)throw new Error("too many signatories for compact or flattened JSON serialization");var s="*"===r.protect;return r.compact&&(s=!0),i=i.map(function(e,t){return(e&&"kty"in e?v$.asKey(e).then(function(e){return{key:e}}):e?v$.asKey(e.key).then(function(t){return{header:e.header,reference:e.reference,protect:e.protect,key:t}}):Promise.reject(new Error("missing key for signatory "+t))).then(function(e){var t=e.key,r=e.header||{};r=VL(VL({},a),r),e.header=r,r.alg||(r.alg=t.algorithms(v$.MODE_SIGN)[0]||"");var n,i=e.reference;if(delete e.reference,void 0===i?i=(i=["kid","jku","x5c","x5t","x5u"].some(function(e){return e in r}))?null:"kid":"boolean"==typeof i&&(i=i?"kid":null),i)if(n=t.toJSON(),"jwk"===i){if("oct"===t.kty)return Promise.reject(new Error("cannot embed key"));r.jwk=n}else i in n&&(r[i]=n[i]);var o=e.protect;if(s||"*"===o)o=Object.keys(r);else if("string"===o)o=[o];else if(Array.isArray(o))o=o.concat();else{if(o)return Promise.reject(new Error("protect must be a list of fields"));o=[]}return o=CU(o),e.protected=o,e=Object.freeze(e)})}),new y$({format:o},i)}}.createSign,createVerify:{verifier:E$,createVerify:function(e,t){return new E$(e,t)}}.createVerify},x$=function(e,t){return Array.prototype.slice.call(e,t||0)},C$=function(e){var t=v$.createKeyStore(),r=gG.KEYLENGTH[e];if(r)return t.generate("oct",r);throw new Error("unsupported encryption algorithm")},k$={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function T$(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function A$(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var a=0;a<n;a++)e[i+a]=t[r+a]}var I$=Uint8Array,P$=Uint16Array,O$=Int32Array,R$=4,j$=0,M$=1,N$=2;function B$(e){for(var t=e.length;--t>=0;)e[t]=0}var D$=0,F$=1,L$=2,U$=29,z$=256,V$=z$+1+U$,q$=30,K$=19,G$=2*V$+1,H$=15,W$=16,$$=7,Y$=256,J$=16,Q$=17,Z$=18,X$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],eY=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],tY=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rY=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],nY=new Array(2*(V$+2));B$(nY);var iY=new Array(2*q$);B$(iY);var aY=new Array(512);B$(aY);var oY=new Array(256);B$(oY);var sY=new Array(U$);B$(sY);var cY,uY,lY,fY=new Array(q$);function pY(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function dY(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function hY(e){return e<256?aY[e]:aY[256+(e>>>7)]}function vY(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function mY(e,t,r){e.bi_valid>W$-r?(e.bi_buf|=t<<e.bi_valid&65535,vY(e,e.bi_buf),e.bi_buf=t>>W$-e.bi_valid,e.bi_valid+=r-W$):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function gY(e,t,r){mY(e,r[2*t],r[2*t+1])}function yY(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function bY(e,t,r){var n,i,a=new Array(H$+1),o=0;for(n=1;n<=H$;n++)a[n]=o=o+r[n-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=yY(a[s]++,s))}}function wY(e){var t;for(t=0;t<V$;t++)e.dyn_ltree[2*t]=0;for(t=0;t<q$;t++)e.dyn_dtree[2*t]=0;for(t=0;t<K$;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Y$]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function _Y(e){e.bi_valid>8?vY(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function EY(e,t,r,n){var i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]}function SY(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&EY(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!EY(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function xY(e,t,r){var n,i,a,o,s=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===n?gY(e,i,t):(gY(e,(a=oY[i])+z$+1,t),0!==(o=X$[a])&&mY(e,i-=sY[a],o),gY(e,a=hY(--n),r),0!==(o=eY[a])&&mY(e,n-=fY[a],o))}while(s<e.last_lit);gY(e,Y$,t)}function CY(e,t){var r,n,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=G$,r=0;r<c;r++)0!==a[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)SY(e,a,r);i=c;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],SY(e,a,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,a[2*i]=a[2*r]+a[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,a[2*r+1]=a[2*n+1]=i,e.heap[1]=i++,SY(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,a,o,s,c=t.dyn_tree,u=t.max_code,l=t.stat_desc.static_tree,f=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,h=t.stat_desc.max_length,v=0;for(a=0;a<=H$;a++)e.bl_count[a]=0;for(c[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<G$;r++)(a=c[2*c[2*(n=e.heap[r])+1]+1]+1)>h&&(a=h,v++),c[2*n+1]=a,n>u||(e.bl_count[a]++,o=0,n>=d&&(o=p[n-d]),s=c[2*n],e.opt_len+=s*(a+o),f&&(e.static_len+=s*(l[2*n+1]+o)));if(0!==v){do{for(a=h-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[h]--,v-=2}while(v>0);for(a=h;0!==a;a--)for(n=e.bl_count[a];0!==n;)(i=e.heap[--r])>u||(c[2*i+1]!==a&&(e.opt_len+=(a-c[2*i+1])*c[2*i],c[2*i+1]=a),n--)}}(e,t),bY(a,u,e.bl_count)}function kY(e,t,r){var n,i,a=-1,o=t[1],s=0,c=7,u=4;for(0===o&&(c=138,u=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++s<c&&i===o||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*J$]++):s<=10?e.bl_tree[2*Q$]++:e.bl_tree[2*Z$]++,s=0,a=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4))}function TY(e,t,r){var n,i,a=-1,o=t[1],s=0,c=7,u=4;for(0===o&&(c=138,u=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++s<c&&i===o)){if(s<u)do{gY(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(gY(e,i,e.bl_tree),s--),gY(e,J$,e.bl_tree),mY(e,s-3,2)):s<=10?(gY(e,Q$,e.bl_tree),mY(e,s-3,3)):(gY(e,Z$,e.bl_tree),mY(e,s-11,7));s=0,a=i,0===o?(c=138,u=3):i===o?(c=6,u=3):(c=7,u=4)}}B$(fY);var AY=!1;function IY(e){AY||(!function(){var e,t,r,n,i,a=new Array(H$+1);for(r=0,n=0;n<U$-1;n++)for(sY[n]=r,e=0;e<1<<X$[n];e++)oY[r++]=n;for(oY[r-1]=n,i=0,n=0;n<16;n++)for(fY[n]=i,e=0;e<1<<eY[n];e++)aY[i++]=n;for(i>>=7;n<q$;n++)for(fY[n]=i<<7,e=0;e<1<<eY[n]-7;e++)aY[256+i++]=n;for(t=0;t<=H$;t++)a[t]=0;for(e=0;e<=143;)nY[2*e+1]=8,e++,a[8]++;for(;e<=255;)nY[2*e+1]=9,e++,a[9]++;for(;e<=279;)nY[2*e+1]=7,e++,a[7]++;for(;e<=287;)nY[2*e+1]=8,e++,a[8]++;for(bY(nY,V$+1,a),e=0;e<q$;e++)iY[2*e+1]=5,iY[2*e]=yY(e,5);cY=new pY(nY,X$,z$+1,V$,H$),uY=new pY(iY,eY,0,q$,H$),lY=new pY(new Array(0),tY,0,K$,$$)}(),AY=!0),e.l_desc=new dY(e.dyn_ltree,cY),e.d_desc=new dY(e.dyn_dtree,uY),e.bl_desc=new dY(e.bl_tree,lY),e.bi_buf=0,e.bi_valid=0,wY(e)}function PY(e,t,r,n){mY(e,(D$<<1)+(n?1:0),3),function(e,t,r,n){_Y(e),n&&(vY(e,r),vY(e,~r)),A$(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}function OY(e){mY(e,F$<<1,3),gY(e,Y$,nY),function(e){16===e.bi_valid?(vY(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}function RY(e,t,r,n){var i,a,o=0;e.level>0?(e.strm.data_type===N$&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return j$;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return M$;for(t=32;t<z$;t++)if(0!==e.dyn_ltree[2*t])return M$;return j$}(e)),CY(e,e.l_desc),CY(e,e.d_desc),o=function(e){var t;for(kY(e,e.dyn_ltree,e.l_desc.max_code),kY(e,e.dyn_dtree,e.d_desc.max_code),CY(e,e.bl_desc),t=K$-1;t>=3&&0===e.bl_tree[2*rY[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=r+5,r+4<=i&&-1!==t?PY(e,t,r,n):e.strategy===R$||a===i?(mY(e,(F$<<1)+(n?1:0),3),xY(e,nY,iY)):(mY(e,(L$<<1)+(n?1:0),3),function(e,t,r,n){var i;for(mY(e,t-257,5),mY(e,r-1,5),mY(e,n-4,4),i=0;i<n;i++)mY(e,e.bl_tree[2*rY[i]+1],3);TY(e,e.dyn_ltree,t-1),TY(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),xY(e,e.dyn_ltree,e.dyn_dtree)),wY(e),n&&_Y(e)}function jY(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(oY[r]+z$+1)]++,e.dyn_dtree[2*hY(t)]++),e.last_lit===e.lit_bufsize-1}function MY(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{a=a+(i=i+t[n++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}var NY=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();function BY(e,t,r,n){var i=NY,a=n+r;e^=-1;for(var o=n;o<a;o++)e=e>>>8^i[255&(e^t[o])];return-1^e}var DY,FY=0,LY=1,UY=3,zY=4,VY=5,qY=0,KY=1,GY=-2,HY=-3,WY=-5,$Y=-1,YY=1,JY=2,QY=3,ZY=4,XY=2,eJ=8,tJ=9,rJ=286,nJ=30,iJ=19,aJ=2*rJ+1,oJ=15,sJ=3,cJ=258,uJ=cJ+sJ+1,lJ=32,fJ=42,pJ=69,dJ=73,hJ=91,vJ=103,mJ=113,gJ=666,yJ=1,bJ=2,wJ=3,_J=4,EJ=3;function SJ(e,t){return e.msg=k$[t],t}function xJ(e){return(e<<1)-(e>4?9:0)}function CJ(e){for(var t=e.length;--t>=0;)e[t]=0}function kJ(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(A$(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function TJ(e,t){RY(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,kJ(e.strm)}function AJ(e,t){e.pending_buf[e.pending++]=t}function IJ(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function PJ(e,t){var r,n,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-uJ?e.strstart-(e.w_size-uJ):0,u=e.window,l=e.w_mask,f=e.prev,p=e.strstart+cJ,d=u[a+o-1],h=u[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(r=t)+o]===h&&u[r+o-1]===d&&u[r]===u[a]&&u[++r]===u[a+1]){a+=2,r++;do{}while(u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&a<p);if(n=cJ-(p-a),a=p-cJ,n>o){if(e.match_start=t,o=n,n>=s)break;d=u[a+o-1],h=u[a+o]}}}while((t=f[t&l])>c&&0!=--i);return o<=e.lookahead?o:e.lookahead}function OJ(e){var t,r,n,i,a,o,s,c,u,l,f=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-uJ)){A$(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=f?n-f:0}while(--r);t=r=f;do{n=e.prev[--t],e.prev[t]=n>=f?n-f:0}while(--r);i+=f}if(0===e.strm.avail_in)break;if(o=e.strm,s=e.window,c=e.strstart+e.lookahead,u=i,l=void 0,(l=o.avail_in)>u&&(l=u),r=0===l?0:(o.avail_in-=l,A$(s,o.input,o.next_in,l,c),1===o.state.wrap?o.adler=MY(o.adler,s,l,c):2===o.state.wrap&&(o.adler=BY(o.adler,s,l,c)),o.next_in+=l,o.total_in+=l,l),e.lookahead+=r,e.lookahead+e.insert>=sJ)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+sJ-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<sJ)););}while(e.lookahead<uJ&&0!==e.strm.avail_in)}function RJ(e,t){for(var r,n;;){if(e.lookahead<uJ){if(OJ(e),e.lookahead<uJ&&t===FY)return yJ;if(0===e.lookahead)break}if(r=0,e.lookahead>=sJ&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+sJ-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-uJ&&(e.match_length=PJ(e,r)),e.match_length>=sJ)if(n=jY(e,e.strstart-e.match_start,e.match_length-sJ),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=sJ){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+sJ-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=jY(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(TJ(e,!1),0===e.strm.avail_out))return yJ}return e.insert=e.strstart<sJ-1?e.strstart:sJ-1,t===zY?(TJ(e,!0),0===e.strm.avail_out?wJ:_J):e.last_lit&&(TJ(e,!1),0===e.strm.avail_out)?yJ:bJ}function jJ(e,t){for(var r,n,i;;){if(e.lookahead<uJ){if(OJ(e),e.lookahead<uJ&&t===FY)return yJ;if(0===e.lookahead)break}if(r=0,e.lookahead>=sJ&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+sJ-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=sJ-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-uJ&&(e.match_length=PJ(e,r),e.match_length<=5&&(e.strategy===YY||e.match_length===sJ&&e.strstart-e.match_start>4096)&&(e.match_length=sJ-1)),e.prev_length>=sJ&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-sJ,n=jY(e,e.strstart-1-e.prev_match,e.prev_length-sJ),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+sJ-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=sJ-1,e.strstart++,n&&(TJ(e,!1),0===e.strm.avail_out))return yJ}else if(e.match_available){if((n=jY(e,0,e.window[e.strstart-1]))&&TJ(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return yJ}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=jY(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<sJ-1?e.strstart:sJ-1,t===zY?(TJ(e,!0),0===e.strm.avail_out?wJ:_J):e.last_lit&&(TJ(e,!1),0===e.strm.avail_out)?yJ:bJ}function MJ(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function NJ(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=eJ,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new P$(2*aJ),this.dyn_dtree=new P$(2*(2*nJ+1)),this.bl_tree=new P$(2*(2*iJ+1)),CJ(this.dyn_ltree),CJ(this.dyn_dtree),CJ(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new P$(oJ+1),this.heap=new P$(2*rJ+1),CJ(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new P$(2*rJ+1),CJ(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function BJ(e){var t,r=function(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=XY,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?fJ:mJ,e.adler=2===t.wrap?0:1,t.last_flush=FY,IY(t),qY):SJ(e,GY)}(e);return r===qY&&((t=e.state).window_size=2*t.w_size,CJ(t.head),t.max_lazy_match=DY[t.level].max_lazy,t.good_match=DY[t.level].good_length,t.nice_match=DY[t.level].nice_length,t.max_chain_length=DY[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=sJ-1,t.match_available=0,t.ins_h=0),r}function DJ(e,t){var r,n,i,a;if(!e||!e.state||t>VY||t<0)return e?SJ(e,GY):GY;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||n.status===gJ&&t!==zY)return SJ(e,0===e.avail_out?WY:GY);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===fJ)if(2===n.wrap)e.adler=0,AJ(n,31),AJ(n,139),AJ(n,8),n.gzhead?(AJ(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),AJ(n,255&n.gzhead.time),AJ(n,n.gzhead.time>>8&255),AJ(n,n.gzhead.time>>16&255),AJ(n,n.gzhead.time>>24&255),AJ(n,9===n.level?2:n.strategy>=JY||n.level<2?4:0),AJ(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(AJ(n,255&n.gzhead.extra.length),AJ(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=BY(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=pJ):(AJ(n,0),AJ(n,0),AJ(n,0),AJ(n,0),AJ(n,0),AJ(n,9===n.level?2:n.strategy>=JY||n.level<2?4:0),AJ(n,EJ),n.status=mJ);else{var o=eJ+(n.w_bits-8<<4)<<8;o|=(n.strategy>=JY||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(o|=lJ),o+=31-o%31,n.status=mJ,IJ(n,o),0!==n.strstart&&(IJ(n,e.adler>>>16),IJ(n,65535&e.adler)),e.adler=1}if(n.status===pJ)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>i&&(e.adler=BY(e.adler,n.pending_buf,n.pending-i,i)),kJ(e),i=n.pending,n.pending!==n.pending_buf_size));)AJ(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=BY(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=dJ)}else n.status=dJ;if(n.status===dJ)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=BY(e.adler,n.pending_buf,n.pending-i,i)),kJ(e),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}a=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,AJ(n,a)}while(0!==a);n.gzhead.hcrc&&n.pending>i&&(e.adler=BY(e.adler,n.pending_buf,n.pending-i,i)),0===a&&(n.gzindex=0,n.status=hJ)}else n.status=hJ;if(n.status===hJ)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=BY(e.adler,n.pending_buf,n.pending-i,i)),kJ(e),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}a=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,AJ(n,a)}while(0!==a);n.gzhead.hcrc&&n.pending>i&&(e.adler=BY(e.adler,n.pending_buf,n.pending-i,i)),0===a&&(n.status=vJ)}else n.status=vJ;if(n.status===vJ&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&kJ(e),n.pending+2<=n.pending_buf_size&&(AJ(n,255&e.adler),AJ(n,e.adler>>8&255),e.adler=0,n.status=mJ)):n.status=mJ),0!==n.pending){if(kJ(e),0===e.avail_out)return n.last_flush=-1,qY}else if(0===e.avail_in&&xJ(t)<=xJ(r)&&t!==zY)return SJ(e,WY);if(n.status===gJ&&0!==e.avail_in)return SJ(e,WY);if(0!==e.avail_in||0!==n.lookahead||t!==FY&&n.status!==gJ){var s=n.strategy===JY?function(e,t){for(var r;;){if(0===e.lookahead&&(OJ(e),0===e.lookahead)){if(t===FY)return yJ;break}if(e.match_length=0,r=jY(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(TJ(e,!1),0===e.strm.avail_out))return yJ}return e.insert=0,t===zY?(TJ(e,!0),0===e.strm.avail_out?wJ:_J):e.last_lit&&(TJ(e,!1),0===e.strm.avail_out)?yJ:bJ}(n,t):n.strategy===QY?function(e,t){for(var r,n,i,a,o=e.window;;){if(e.lookahead<=cJ){if(OJ(e),e.lookahead<=cJ&&t===FY)return yJ;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=sJ&&e.strstart>0&&(n=o[i=e.strstart-1])===o[++i]&&n===o[++i]&&n===o[++i]){a=e.strstart+cJ;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<a);e.match_length=cJ-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=sJ?(r=jY(e,1,e.match_length-sJ),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=jY(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(TJ(e,!1),0===e.strm.avail_out))return yJ}return e.insert=0,t===zY?(TJ(e,!0),0===e.strm.avail_out?wJ:_J):e.last_lit&&(TJ(e,!1),0===e.strm.avail_out)?yJ:bJ}(n,t):DY[n.level].func(n,t);if(s!==wJ&&s!==_J||(n.status=gJ),s===yJ||s===wJ)return 0===e.avail_out&&(n.last_flush=-1),qY;if(s===bJ&&(t===LY?OY(n):t!==VY&&(PY(n,0,0,!1),t===UY&&(CJ(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),kJ(e),0===e.avail_out))return n.last_flush=-1,qY}return t!==zY?qY:n.wrap<=0?KY:(2===n.wrap?(AJ(n,255&e.adler),AJ(n,e.adler>>8&255),AJ(n,e.adler>>16&255),AJ(n,e.adler>>24&255),AJ(n,255&e.total_in),AJ(n,e.total_in>>8&255),AJ(n,e.total_in>>16&255),AJ(n,e.total_in>>24&255)):(IJ(n,e.adler>>>16),IJ(n,65535&e.adler)),kJ(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?qY:KY)}DY=[new MJ(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(OJ(e),0===e.lookahead&&t===FY)return yJ;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,TJ(e,!1),0===e.strm.avail_out))return yJ;if(e.strstart-e.block_start>=e.w_size-uJ&&(TJ(e,!1),0===e.strm.avail_out))return yJ}return e.insert=0,t===zY?(TJ(e,!0),0===e.strm.avail_out?wJ:_J):(e.strstart>e.block_start&&(TJ(e,!1),e.strm.avail_out),yJ)}),new MJ(4,4,8,4,RJ),new MJ(4,5,16,8,RJ),new MJ(4,6,32,32,RJ),new MJ(4,4,16,16,jJ),new MJ(8,16,32,32,jJ),new MJ(8,16,128,128,jJ),new MJ(8,32,128,256,jJ),new MJ(32,128,258,1024,jJ),new MJ(32,258,258,4096,jJ)];var FJ=30,LJ=12;function UJ(e,t){var r,n,i,a,o,s,c,u,l,f,p,d,h,v,m,g,y,b,w,_,E,S,x,C,k;r=e.state,n=e.next_in,C=e.input,i=n+(e.avail_in-5),a=e.next_out,k=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),c=r.dmax,u=r.wsize,l=r.whave,f=r.wnext,p=r.window,d=r.hold,h=r.bits,v=r.lencode,m=r.distcode,g=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{h<15&&(d+=C[n++]<<h,h+=8,d+=C[n++]<<h,h+=8),b=v[d&g];t:for(;;){if(d>>>=w=b>>>24,h-=w,0===(w=b>>>16&255))k[a++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=v[(65535&b)+(d&(1<<w)-1)];continue t}if(32&w){r.mode=LJ;break e}e.msg="invalid literal/length code",r.mode=FJ;break e}_=65535&b,(w&=15)&&(h<w&&(d+=C[n++]<<h,h+=8),_+=d&(1<<w)-1,d>>>=w,h-=w),h<15&&(d+=C[n++]<<h,h+=8,d+=C[n++]<<h,h+=8),b=m[d&y];r:for(;;){if(d>>>=w=b>>>24,h-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=m[(65535&b)+(d&(1<<w)-1)];continue r}e.msg="invalid distance code",r.mode=FJ;break e}if(E=65535&b,h<(w&=15)&&(d+=C[n++]<<h,(h+=8)<w&&(d+=C[n++]<<h,h+=8)),(E+=d&(1<<w)-1)>c){e.msg="invalid distance too far back",r.mode=FJ;break e}if(d>>>=w,h-=w,E>(w=a-o)){if((w=E-w)>l&&r.sane){e.msg="invalid distance too far back",r.mode=FJ;break e}if(S=0,x=p,0===f){if(S+=u-w,w<_){_-=w;do{k[a++]=p[S++]}while(--w);S=a-E,x=k}}else if(f<w){if(S+=u+f-w,(w-=f)<_){_-=w;do{k[a++]=p[S++]}while(--w);if(S=0,f<_){_-=w=f;do{k[a++]=p[S++]}while(--w);S=a-E,x=k}}}else if(S+=f-w,w<_){_-=w;do{k[a++]=p[S++]}while(--w);S=a-E,x=k}for(;_>2;)k[a++]=x[S++],k[a++]=x[S++],k[a++]=x[S++],_-=3;_&&(k[a++]=x[S++],_>1&&(k[a++]=x[S++]))}else{S=a-E;do{k[a++]=k[S++],k[a++]=k[S++],k[a++]=k[S++],_-=3}while(_>2);_&&(k[a++]=k[S++],_>1&&(k[a++]=k[S++]))}break}}break}}while(n<i&&a<s);n-=_=h>>3,d&=(1<<(h-=_<<3))-1,e.next_in=n,e.next_out=a,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=a<s?s-a+257:257-(a-s),r.hold=d,r.bits=h}var zJ=15,VJ=852,qJ=592,KJ=0,GJ=1,HJ=2,WJ=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],$J=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],YJ=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],JJ=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function QJ(e,t,r,n,i,a,o,s){var c,u,l,f,p,d,h,v,m,g=s.bits,y=0,b=0,w=0,_=0,E=0,S=0,x=0,C=0,k=0,T=0,A=null,I=0,P=new P$(zJ+1),O=new P$(zJ+1),R=null,j=0;for(y=0;y<=zJ;y++)P[y]=0;for(b=0;b<n;b++)P[t[r+b]]++;for(E=g,_=zJ;_>=1&&0===P[_];_--);if(E>_&&(E=_),0===_)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(w=1;w<_&&0===P[w];w++);for(E<w&&(E=w),C=1,y=1;y<=zJ;y++)if(C<<=1,(C-=P[y])<0)return-1;if(C>0&&(e===KJ||1!==_))return-1;for(O[1]=0,y=1;y<zJ;y++)O[y+1]=O[y]+P[y];for(b=0;b<n;b++)0!==t[r+b]&&(o[O[t[r+b]]++]=b);if(e===KJ?(A=R=o,d=19):e===GJ?(A=WJ,I-=257,R=$J,j-=257,d=256):(A=YJ,R=JJ,d=-1),T=0,b=0,y=w,p=a,S=E,x=0,l=-1,f=(k=1<<E)-1,e===GJ&&k>VJ||e===HJ&&k>qJ)return 1;for(;;){h=y-x,o[b]<d?(v=0,m=o[b]):o[b]>d?(v=R[j+o[b]],m=A[I+o[b]]):(v=96,m=0),c=1<<y-x,w=u=1<<S;do{i[p+(T>>x)+(u-=c)]=h<<24|v<<16|m|0}while(0!==u);for(c=1<<y-1;T&c;)c>>=1;if(0!==c?(T&=c-1,T+=c):T=0,b++,0==--P[y]){if(y===_)break;y=t[r+o[b]]}if(y>E&&(T&f)!==l){for(0===x&&(x=E),p+=w,C=1<<(S=y-x);S+x<_&&!((C-=P[S+x])<=0);)S++,C<<=1;if(k+=1<<S,e===GJ&&k>VJ||e===HJ&&k>qJ)return 1;i[l=T&f]=E<<24|S<<16|p-a|0}}return 0!==T&&(i[p+T]=y-x<<24|64<<16|0),s.bits=E,0}var ZJ=0,XJ=1,eQ=2,tQ=4,rQ=5,nQ=6,iQ=0,aQ=1,oQ=2,sQ=-2,cQ=-3,uQ=-4,lQ=-5,fQ=8,pQ=1,dQ=2,hQ=3,vQ=4,mQ=5,gQ=6,yQ=7,bQ=8,wQ=9,_Q=10,EQ=11,SQ=12,xQ=13,CQ=14,kQ=15,TQ=16,AQ=17,IQ=18,PQ=19,OQ=20,RQ=21,jQ=22,MQ=23,NQ=24,BQ=25,DQ=26,FQ=27,LQ=28,UQ=29,zQ=30,VQ=31,qQ=32,KQ=852,GQ=592;function HQ(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function WQ(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new P$(320),this.work=new P$(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function $Q(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,function(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=pQ,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new O$(KQ),t.distcode=t.distdyn=new O$(GQ),t.sane=1,t.back=-1,iQ):sQ}(e)):sQ}function YQ(e,t){var r,n;return e?(n=new WQ,e.state=n,n.window=null,(r=function(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?sQ:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,$Q(e))):sQ}(e,t))!==iQ&&(e.state=null),r):sQ}var JQ,QQ,ZQ=!0;function XQ(e){if(ZQ){var t;for(JQ=new O$(512),QQ=new O$(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(QJ(XJ,e.lens,0,288,JQ,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;QJ(eQ,e.lens,0,32,QQ,0,e.work,{bits:5}),ZQ=!1}e.lencode=JQ,e.lenbits=9,e.distcode=QQ,e.distbits=5}function eZ(e,t){var r,n,i,a,o,s,c,u,l,f,p,d,h,v,m,g,y,b,w,_,E,S,x,C,k=0,T=new I$(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return sQ;(r=e.state).mode===SQ&&(r.mode=xQ),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,u=r.hold,l=r.bits,f=s,p=c,S=iQ;e:for(;;)switch(r.mode){case pQ:if(0===r.wrap){r.mode=xQ;break}for(;l<16;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}if(2&r.wrap&&35615===u){r.check=0,T[0]=255&u,T[1]=u>>>8&255,r.check=BY(r.check,T,2,0),u=0,l=0,r.mode=dQ;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=zQ;break}if((15&u)!==fQ){e.msg="unknown compression method",r.mode=zQ;break}if(l-=4,E=8+(15&(u>>>=4)),0===r.wbits)r.wbits=E;else if(E>r.wbits){e.msg="invalid window size",r.mode=zQ;break}r.dmax=1<<E,e.adler=r.check=1,r.mode=512&u?_Q:SQ,u=0,l=0;break;case dQ:for(;l<16;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}if(r.flags=u,(255&r.flags)!==fQ){e.msg="unknown compression method",r.mode=zQ;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=zQ;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(T[0]=255&u,T[1]=u>>>8&255,r.check=BY(r.check,T,2,0)),u=0,l=0,r.mode=hQ;case hQ:for(;l<32;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}r.head&&(r.head.time=u),512&r.flags&&(T[0]=255&u,T[1]=u>>>8&255,T[2]=u>>>16&255,T[3]=u>>>24&255,r.check=BY(r.check,T,4,0)),u=0,l=0,r.mode=vQ;case vQ:for(;l<16;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(T[0]=255&u,T[1]=u>>>8&255,r.check=BY(r.check,T,2,0)),u=0,l=0,r.mode=mQ;case mQ:if(1024&r.flags){for(;l<16;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(T[0]=255&u,T[1]=u>>>8&255,r.check=BY(r.check,T,2,0)),u=0,l=0}else r.head&&(r.head.extra=null);r.mode=gQ;case gQ:if(1024&r.flags&&((d=r.length)>s&&(d=s),d&&(r.head&&(E=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),A$(r.head.extra,n,a,d,E)),512&r.flags&&(r.check=BY(r.check,n,d,a)),s-=d,a+=d,r.length-=d),r.length))break e;r.length=0,r.mode=yQ;case yQ:if(2048&r.flags){if(0===s)break e;d=0;do{E=n[a+d++],r.head&&E&&r.length<65536&&(r.head.name+=String.fromCharCode(E))}while(E&&d<s);if(512&r.flags&&(r.check=BY(r.check,n,d,a)),s-=d,a+=d,E)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=bQ;case bQ:if(4096&r.flags){if(0===s)break e;d=0;do{E=n[a+d++],r.head&&E&&r.length<65536&&(r.head.comment+=String.fromCharCode(E))}while(E&&d<s);if(512&r.flags&&(r.check=BY(r.check,n,d,a)),s-=d,a+=d,E)break e}else r.head&&(r.head.comment=null);r.mode=wQ;case wQ:if(512&r.flags){for(;l<16;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}if(u!==(65535&r.check)){e.msg="header crc mismatch",r.mode=zQ;break}u=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=SQ;break;case _Q:for(;l<32;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}e.adler=r.check=HQ(u),u=0,l=0,r.mode=EQ;case EQ:if(0===r.havedict)return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,r.hold=u,r.bits=l,oQ;e.adler=r.check=1,r.mode=SQ;case SQ:if(t===rQ||t===nQ)break e;case xQ:if(r.last){u>>>=7&l,l-=7&l,r.mode=FQ;break}for(;l<3;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}switch(r.last=1&u,l-=1,3&(u>>>=1)){case 0:r.mode=CQ;break;case 1:if(XQ(r),r.mode=OQ,t===nQ){u>>>=2,l-=2;break e}break;case 2:r.mode=AQ;break;case 3:e.msg="invalid block type",r.mode=zQ}u>>>=2,l-=2;break;case CQ:for(u>>>=7&l,l-=7&l;l<32;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=zQ;break}if(r.length=65535&u,u=0,l=0,r.mode=kQ,t===nQ)break e;case kQ:r.mode=TQ;case TQ:if(d=r.length){if(d>s&&(d=s),d>c&&(d=c),0===d)break e;A$(i,n,a,d,o),s-=d,a+=d,c-=d,o+=d,r.length-=d;break}r.mode=SQ;break;case AQ:for(;l<14;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}if(r.nlen=257+(31&u),u>>>=5,l-=5,r.ndist=1+(31&u),u>>>=5,l-=5,r.ncode=4+(15&u),u>>>=4,l-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=zQ;break}r.have=0,r.mode=IQ;case IQ:for(;r.have<r.ncode;){for(;l<3;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}r.lens[A[r.have++]]=7&u,u>>>=3,l-=3}for(;r.have<19;)r.lens[A[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,x={bits:r.lenbits},S=QJ(ZJ,r.lens,0,19,r.lencode,0,r.work,x),r.lenbits=x.bits,S){e.msg="invalid code lengths set",r.mode=zQ;break}r.have=0,r.mode=PQ;case PQ:for(;r.have<r.nlen+r.ndist;){for(;g=(k=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,y=65535&k,!((m=k>>>24)<=l);){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}if(y<16)u>>>=m,l-=m,r.lens[r.have++]=y;else{if(16===y){for(C=m+2;l<C;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}if(u>>>=m,l-=m,0===r.have){e.msg="invalid bit length repeat",r.mode=zQ;break}E=r.lens[r.have-1],d=3+(3&u),u>>>=2,l-=2}else if(17===y){for(C=m+3;l<C;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}l-=m,E=0,d=3+(7&(u>>>=m)),u>>>=3,l-=3}else{for(C=m+7;l<C;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}l-=m,E=0,d=11+(127&(u>>>=m)),u>>>=7,l-=7}if(r.have+d>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=zQ;break}for(;d--;)r.lens[r.have++]=E}}if(r.mode===zQ)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=zQ;break}if(r.lenbits=9,x={bits:r.lenbits},S=QJ(XJ,r.lens,0,r.nlen,r.lencode,0,r.work,x),r.lenbits=x.bits,S){e.msg="invalid literal/lengths set",r.mode=zQ;break}if(r.distbits=6,r.distcode=r.distdyn,x={bits:r.distbits},S=QJ(eQ,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,x),r.distbits=x.bits,S){e.msg="invalid distances set",r.mode=zQ;break}if(r.mode=OQ,t===nQ)break e;case OQ:r.mode=RQ;case RQ:if(s>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,r.hold=u,r.bits=l,UJ(e,p),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,u=r.hold,l=r.bits,r.mode===SQ&&(r.back=-1);break}for(r.back=0;g=(k=r.lencode[u&(1<<r.lenbits)-1])>>>16&255,y=65535&k,!((m=k>>>24)<=l);){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}if(g&&0==(240&g)){for(b=m,w=g,_=y;g=(k=r.lencode[_+((u&(1<<b+w)-1)>>b)])>>>16&255,y=65535&k,!(b+(m=k>>>24)<=l);){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}u>>>=b,l-=b,r.back+=b}if(u>>>=m,l-=m,r.back+=m,r.length=y,0===g){r.mode=DQ;break}if(32&g){r.back=-1,r.mode=SQ;break}if(64&g){e.msg="invalid literal/length code",r.mode=zQ;break}r.extra=15&g,r.mode=jQ;case jQ:if(r.extra){for(C=r.extra;l<C;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=MQ;case MQ:for(;g=(k=r.distcode[u&(1<<r.distbits)-1])>>>16&255,y=65535&k,!((m=k>>>24)<=l);){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}if(0==(240&g)){for(b=m,w=g,_=y;g=(k=r.distcode[_+((u&(1<<b+w)-1)>>b)])>>>16&255,y=65535&k,!(b+(m=k>>>24)<=l);){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}u>>>=b,l-=b,r.back+=b}if(u>>>=m,l-=m,r.back+=m,64&g){e.msg="invalid distance code",r.mode=zQ;break}r.offset=y,r.extra=15&g,r.mode=NQ;case NQ:if(r.extra){for(C=r.extra;l<C;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=zQ;break}r.mode=BQ;case BQ:if(0===c)break e;if(d=p-c,r.offset>d){if((d=r.offset-d)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=zQ;break}d>r.wnext?(d-=r.wnext,h=r.wsize-d):h=r.wnext-d,d>r.length&&(d=r.length),v=r.window}else v=i,h=o-r.offset,d=r.length;d>c&&(d=c),c-=d,r.length-=d;do{i[o++]=v[h++]}while(--d);0===r.length&&(r.mode=RQ);break;case DQ:if(0===c)break e;i[o++]=r.length,c--,r.mode=RQ;break;case FQ:if(r.wrap){for(;l<32;){if(0===s)break e;s--,u|=n[a++]<<l,l+=8}if(p-=c,e.total_out+=p,r.total+=p,p&&(e.adler=r.check=r.flags?BY(r.check,i,p,o-p):MY(r.check,i,p,o-p)),p=c,(r.flags?u:HQ(u))!==r.check){e.msg="incorrect data check",r.mode=zQ;break}u=0,l=0}r.mode=LQ;case LQ:if(r.wrap&&r.flags){for(;l<32;){if(0===s)break e;s--,u+=n[a++]<<l,l+=8}if(u!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=zQ;break}u=0,l=0}r.mode=UQ;case UQ:S=aQ;break e;case zQ:S=cQ;break e;case VQ:return uQ;case qQ:default:return sQ}return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,r.hold=u,r.bits=l,(r.wsize||p!==e.avail_out&&r.mode<zQ&&(r.mode<FQ||t!==tQ))&&function(e,t,r,n){var i,a=e.state;null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new I$(a.wsize)),n>=a.wsize?(A$(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>n&&(i=n),A$(a.window,t,r-n,i,a.wnext),(n-=i)?(A$(a.window,t,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i)))}(e,e.output,e.next_out,p-e.avail_out),f-=e.avail_in,p-=e.avail_out,e.total_in+=f,e.total_out+=p,r.total+=p,r.wrap&&p&&(e.adler=r.check=r.flags?BY(r.check,i,p,e.next_out-p):MY(r.check,i,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===SQ?128:0)+(r.mode===OQ||r.mode===kQ?256:0),(0===f&&0===p||t===tQ)&&S===iQ&&(S=lQ),S}var tZ,rZ=1,nZ=7;function iZ(e){if(e<rZ||e>nZ)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function aZ(e,t){for(var r=0;r<e.length;r++)this[t+r]=e[r]}iZ.prototype.init=function(e,t,r,n,i){var a;switch(this.windowBits=e,this.level=t,this.memLevel=r,this.strategy=n,3!==this.mode&&4!==this.mode||(this.windowBits+=16),this.mode===nZ&&(this.windowBits+=32),5!==this.mode&&6!==this.mode||(this.windowBits=-this.windowBits),this.strm=new T$,this.mode){case rZ:case 3:case 5:a=function(e,t,r,n,i,a){if(!e)return GY;var o=1;if(t===$Y&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>tJ||r!==eJ||n<8||n>15||t<0||t>9||a<0||a>ZY)return SJ(e,GY);8===n&&(n=9);var s=new NJ;return e.state=s,s.strm=e,s.wrap=o,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+sJ-1)/sJ),s.window=new I$(2*s.w_size),s.head=new P$(s.hash_size),s.prev=new P$(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new I$(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=a,s.method=r,BJ(e)}(this.strm,this.level,8,this.windowBits,this.memLevel,this.strategy);break;case 2:case 4:case 6:case nZ:a=YQ(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}0===a?(this.write_in_progress=!1,this.init_done=!0):this._error(a)},iZ.prototype.params=function(){throw new Error("deflateParams Not supported")},iZ.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(0===this.mode)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},iZ.prototype.write=function(e,t,r,n,i,a,o){this._writeCheck(),this.write_in_progress=!0;var s=this;return hc(function(){s.write_in_progress=!1;var c=s._write(e,t,r,n,i,a,o);s.callback(c[0],c[1]),s.pending_close&&s.close()}),this},iZ.prototype.writeSync=function(e,t,r,n,i,a,o){return this._writeCheck(),this._write(e,t,r,n,i,a,o)},iZ.prototype._write=function(e,t,r,n,i,a,o){if(this.write_in_progress=!0,0!==e&&1!==e&&2!==e&&3!==e&&4!==e&&5!==e)throw new Error("Invalid flush value");null==t&&(t=new ig(0),n=0,r=0),i._set?i.set=i._set:i.set=aZ;var s,c=this.strm;switch(c.avail_in=n,c.input=t,c.next_in=r,c.avail_out=o,c.output=i,c.next_out=a,this.mode){case rZ:case 3:case 5:s=DJ(c,e);break;case nZ:case 2:case 4:case 6:s=eZ(c,e);break;default:throw new Error("Unknown mode "+this.mode)}return 1!==s&&0!==s&&this._error(s),this.write_in_progress=!1,[c.avail_in,c.avail_out]},iZ.prototype.close=function(){var e,t;this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,this.mode===rZ||3===this.mode||5===this.mode?(e=this.strm)&&e.state&&((t=e.state.status)!==fJ&&t!==pJ&&t!==dJ&&t!==hJ&&t!==vJ&&t!==mJ&&t!==gJ?SJ(e,GY):(e.state=null,t===mJ&&SJ(e,HY))):function(e){if(!e||!e.state)return sQ;var t=e.state;t.window&&(t.window=null),e.state=null}(this.strm),this.mode=0)},iZ.prototype.reset=function(){switch(this.mode){case rZ:case 5:tZ=BJ(this.strm);break;case 2:case 6:tZ=$Q(this.strm)}0!==tZ&&this._error(tZ)},iZ.prototype._error=function(e){this.onerror(k$[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};var oZ=Object.freeze({NONE:0,DEFLATE:rZ,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:nZ,Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8,Zlib:iZ});var sZ={};Object.keys(oZ).forEach(function(e){sZ[e]=oZ[e]}),sZ.Z_MIN_WINDOWBITS=8,sZ.Z_MAX_WINDOWBITS=15,sZ.Z_DEFAULT_WINDOWBITS=15,sZ.Z_MIN_CHUNK=64,sZ.Z_MAX_CHUNK=1/0,sZ.Z_DEFAULT_CHUNK=16384,sZ.Z_MIN_MEMLEVEL=1,sZ.Z_MAX_MEMLEVEL=9,sZ.Z_DEFAULT_MEMLEVEL=8,sZ.Z_MIN_LEVEL=-1,sZ.Z_MAX_LEVEL=9,sZ.Z_DEFAULT_LEVEL=sZ.Z_DEFAULT_COMPRESSION;var cZ={Z_OK:sZ.Z_OK,Z_STREAM_END:sZ.Z_STREAM_END,Z_NEED_DICT:sZ.Z_NEED_DICT,Z_ERRNO:sZ.Z_ERRNO,Z_STREAM_ERROR:sZ.Z_STREAM_ERROR,Z_DATA_ERROR:sZ.Z_DATA_ERROR,Z_MEM_ERROR:sZ.Z_MEM_ERROR,Z_BUF_ERROR:sZ.Z_BUF_ERROR,Z_VERSION_ERROR:sZ.Z_VERSION_ERROR};function uZ(e,t,r){var n=[],i=0;function a(){for(var t;null!==(t=e.read());)n.push(t),i+=t.length;e.once("readable",a)}function o(){var t=ig.concat(n,i);n=[],r(null,t),e.close()}e.on("error",function(t){e.removeListener("end",o),e.removeListener("readable",a),r(t)}),e.on("end",o),e.end(t),a()}function lZ(e,t){if("string"==typeof t&&(t=new ig(t)),!Ug(t))throw new TypeError("Not a string or buffer");var r=sZ.Z_FINISH;return e._processChunk(t,r)}function fZ(e){if(!(this instanceof fZ))return new fZ(e);yZ.call(this,e,sZ.DEFLATE)}function pZ(e){if(!(this instanceof pZ))return new pZ(e);yZ.call(this,e,sZ.INFLATE)}function dZ(e){if(!(this instanceof dZ))return new dZ(e);yZ.call(this,e,sZ.GZIP)}function hZ(e){if(!(this instanceof hZ))return new hZ(e);yZ.call(this,e,sZ.GUNZIP)}function vZ(e){if(!(this instanceof vZ))return new vZ(e);yZ.call(this,e,sZ.DEFLATERAW)}function mZ(e){if(!(this instanceof mZ))return new mZ(e);yZ.call(this,e,sZ.INFLATERAW)}function gZ(e){if(!(this instanceof gZ))return new gZ(e);yZ.call(this,e,sZ.UNZIP)}function yZ(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||sZ.Z_DEFAULT_CHUNK,vD.call(this,e),e.flush&&e.flush!==sZ.Z_NO_FLUSH&&e.flush!==sZ.Z_PARTIAL_FLUSH&&e.flush!==sZ.Z_SYNC_FLUSH&&e.flush!==sZ.Z_FULL_FLUSH&&e.flush!==sZ.Z_FINISH&&e.flush!==sZ.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||sZ.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<sZ.Z_MIN_CHUNK||e.chunkSize>sZ.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<sZ.Z_MIN_WINDOWBITS||e.windowBits>sZ.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<sZ.Z_MIN_LEVEL||e.level>sZ.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<sZ.Z_MIN_MEMLEVEL||e.memLevel>sZ.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=sZ.Z_FILTERED&&e.strategy!=sZ.Z_HUFFMAN_ONLY&&e.strategy!=sZ.Z_RLE&&e.strategy!=sZ.Z_FIXED&&e.strategy!=sZ.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!Ug(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new sZ.Zlib(t);var r=this;this._hadError=!1,this._binding.onerror=function(e,t){r._binding=null,r._hadError=!0;var n=new Error(e);n.errno=t,n.code=sZ.codes[t],r.emit("error",n)};var n=sZ.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(n=e.level);var i=sZ.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(i=e.strategy),this._binding.init(e.windowBits||sZ.Z_DEFAULT_WINDOWBITS,n,e.memLevel||sZ.Z_DEFAULT_MEMLEVEL,i,e.dictionary),this._buffer=new ig(this._chunkSize),this._offset=0,this._closed=!1,this._level=n,this._strategy=i,this.once("end",this.close)}Object.keys(cZ).forEach(function(e){cZ[cZ[e]]=e}),Vg(yZ,vD),yZ.prototype.params=function(e,t,r){if(e<sZ.Z_MIN_LEVEL||e>sZ.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=sZ.Z_FILTERED&&t!=sZ.Z_HUFFMAN_ONLY&&t!=sZ.Z_RLE&&t!=sZ.Z_FIXED&&t!=sZ.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var n=this;this.flush(sZ.Z_SYNC_FLUSH,function(){n._binding.params(e,t),n._hadError||(n._level=e,n._strategy=t,r&&r())})}else hc(r)},yZ.prototype.reset=function(){return this._binding.reset()},yZ.prototype._flush=function(e){this._transform(new ig(0),"",e)},yZ.prototype.flush=function(e,t){var r=this._writableState;if(("function"==typeof e||void 0===e&&!t)&&(t=e,e=sZ.Z_FULL_FLUSH),r.ended)t&&hc(t);else if(r.ending)t&&this.once("end",t);else if(r.needDrain){var n=this;this.once("drain",function(){n.flush(t)})}else this._flushFlag=e,this.write(new ig(0),"",t)},yZ.prototype.close=function(e){if(e&&hc(e),!this._closed){this._closed=!0,this._binding.close();var t=this;hc(function(){t.emit("close")})}},yZ.prototype._transform=function(e,t,r){var n,i=this._writableState,a=(i.ending||i.ended)&&(!e||i.length===e.length);if(null===!e&&!Ug(e))return r(new Error("invalid input"));a?n=sZ.Z_FINISH:(n=this._flushFlag,e.length>=i.length&&(this._flushFlag=this._opts.flush||sZ.Z_NO_FLUSH)),this._processChunk(e,n,r)},yZ.prototype._processChunk=function(e,t,r){var n=e&&e.length,i=this._chunkSize-this._offset,a=0,o=this,s="function"==typeof r;if(!s){var c,u=[],l=0;this.on("error",function(e){c=e});do{var f=this._binding.writeSync(t,e,a,n,this._buffer,this._offset,i)}while(!this._hadError&&h(f[0],f[1]));if(this._hadError)throw c;var p=ig.concat(u,l);return this.close(),p}var d=this._binding.write(t,e,a,n,this._buffer,this._offset,i);function h(c,f){if(!o._hadError){var p=i-f;if(function(e,t){if(!e)throw new Error(t)}(p>=0,"have should not go down"),p>0){var d=o._buffer.slice(o._offset,o._offset+p);o._offset+=p,s?o.push(d):(u.push(d),l+=d.length)}if((0===f||o._offset>=o._chunkSize)&&(i=o._chunkSize,o._offset=0,o._buffer=new ig(o._chunkSize)),0===f){if(a+=n-c,n=c,!s)return!0;var v=o._binding.write(t,e,a,n,o._buffer,o._offset,o._chunkSize);return v.callback=h,void(v.buffer=e)}if(!s)return!1;r()}}d.buffer=e,d.callback=h},Vg(fZ,yZ),Vg(pZ,yZ),Vg(dZ,yZ),Vg(hZ,yZ),Vg(vZ,yZ),Vg(mZ,yZ),Vg(gZ,yZ);var bZ={codes:cZ,createDeflate:function(e){return new fZ(e)},createInflate:function(e){return new pZ(e)},createDeflateRaw:function(e){return new vZ(e)},createInflateRaw:function(e){return new mZ(e)},createGzip:function(e){return new dZ(e)},createGunzip:function(e){return new hZ(e)},createUnzip:function(e){return new gZ(e)},deflate:function(e,t,r){return"function"==typeof t&&(r=t,t={}),uZ(new fZ(t),e,r)},deflateSync:function(e,t){return lZ(new fZ(t),e)},gzip:function(e,t,r){return"function"==typeof t&&(r=t,t={}),uZ(new dZ(t),e,r)},gzipSync:function(e,t){return lZ(new dZ(t),e)},deflateRaw:function(e,t,r){return"function"==typeof t&&(r=t,t={}),uZ(new vZ(t),e,r)},deflateRawSync:function(e,t){return lZ(new vZ(t),e)},unzip:function(e,t,r){return"function"==typeof t&&(r=t,t={}),uZ(new gZ(t),e,r)},unzipSync:function(e,t){return lZ(new gZ(t),e)},inflate:function(e,t,r){return"function"==typeof t&&(r=t,t={}),uZ(new pZ(t),e,r)},inflateSync:function(e,t){return lZ(new pZ(t),e)},gunzip:function(e,t,r){return"function"==typeof t&&(r=t,t={}),uZ(new hZ(t),e,r)},gunzipSync:function(e,t){return lZ(new hZ(t),e)},inflateRaw:function(e,t,r){return"function"==typeof t&&(r=t,t={}),uZ(new mZ(t),e,r)},inflateRawSync:function(e,t){return lZ(new mZ(t),e)},Deflate:fZ,Inflate:pZ,Gzip:dZ,Gunzip:hZ,DeflateRaw:vZ,InflateRaw:mZ,Unzip:gZ,Zlib:yZ},wZ={zip:!1,format:"general",contentAlg:"A128CBC-HS256",protect:"*"},_Z=C$,EZ=x$;function SZ(e,t,r){var n=!1,i=e.format||"general",a=!!e.protectAll,o=new ig(0);Object.defineProperty(this,"zip",{get:function(){return t.zip||""},enumerable:!0}),Object.defineProperty(this,"compact",{get:function(){return"compact"===i},enumerable:!0}),Object.defineProperty(this,"format",{get:function(){return i},enumerable:!0}),Object.defineProperty(this,"protected",{get:function(){return CF(e.protect)},enumerable:!0}),Object.defineProperty(this,"header",{get:function(){return CF(t)},enumerable:!0}),Object.defineProperty(this,"update",{value:function(e,t){if(n)throw new Error("already final");return null!=e&&(e=hV.asBuffer(e,t),o=o.length?ig.concat([o,e],o.length+e.length):e),this}}),Object.defineProperty(this,"final",{value:function(s,c){if(n)return Promise.reject(new Error("already final"));this.update(s,c),n=!0;var u,l=Promise.resolve({}),f=t.enc;l=(l=l.then(function(t){return e.cek&&(u=v$.asKey(e.cek)),t})).then(function(n){var i=Promise.all(r);return i=(i=i.then(function(r){var n=1===r.length;return r=r.map(function(r){return function(r,n){var i={};i=NV(i,t),i=NV(i,r.header);var a,o,s=r.key,c=i.alg;return 0===i.alg.indexOf("ECDH-ES")?(a=s.keystore.temp(),o=r.epk?Promise.resolve(r.epk).then(function(e){r.header.epk=e.toJSON(!1,["kid"]),i.epk=e.toObject(!0,["kid"])}):a.generate("EC",s.get("crv")).then(function(e){r.header.epk=e.toJSON(!1,["kid"]),i.epk=e.toObject(!0,["kid"])})):o=Promise.resolve(),o=(o=o.then(function(){var r,a;return"dir"===c&&n?a=(u=Promise.resolve(s)).then(function(e){return f||(i.enc=t.enc=f=e.algorithms(v$.MODE_ENCRYPT)[0]),{once:!0,direct:!0}}):(u||(f||(i.enc=t.enc=f=e.contentAlg),u=_Z(f)),a=(a=u.then(function(e){return r=e.get("k",!0),s})).then(function(e){return e.wrap(c,r,i)})),a})).then(function(e){if(e.once&&!n)return Promise.reject(new Error("cannot use 'alg':'"+c+"' with multiple recipients"));var t,i={};return e.data&&(t=e.data,t=hV.base64url.encode(t)),e.direct&&t?u=v$.asKey({kty:"oct",k:t}):t&&(i.encrypted_key=t),r.header&&Object.keys(r.header).length&&(i.header=CF(r.header||{})),e.header&&(i.header=NV(i.header||{},e.header)),i})}(r,n)}),Promise.all(r)})).then(function(e){return n.recipients=e.filter(function(e){return!!e}),n})});var p={};switch(l=(l=(l=l.then(function(r){var n,o,s,c;return s=CF(t),a&&1===r.recipients.length||"compact"===i?(n=NV(r.recipients[0].header||{},s),o=Object.keys(n).length,s=void 0,c=0,delete r.recipients[0].header,0===Object.keys(r.recipients[0]).length&&r.recipients.splice(0,1)):(n={},o=0,c=Object.keys(s).length,e.protect.forEach(function(e){e in s&&(n[e]=s[e],o++,delete s[e],c--)})),r.recipients&&0!==r.recipients.length||delete r.recipients,s&&c>0&&(p=NV(p,s),r.unprotected=s),n&&o>0&&(p=NV(p,n),n=JSON.stringify(n),r.protected=hV.base64url.encode(n,"utf8")),r})).then(function(e){var t=o;return p.zip?"DEF"===p.zip?new Promise(function(r,n){bZ.deflateRaw(new ig(t,"binary"),function(t,i){t?n(t):(e.plaintext=i,r(e))})}):Promise.reject(new Error("unsupported 'zip' mode")):(e.plaintext=t,e)})).then(function(t){p.adata=t.protected,"aad"in e&&null!=e.aad&&(p.adata+="."+e.aad,p.adata=new ig(p.adata,"utf8"));var r=e.iv||hV.randomBytes(gG.NONCELENGTH[f]/8);"string"==typeof r&&(r=hV.base64url.decode(r)),p.iv=r,"recipients"in t&&1===t.recipients.length&&(p.kdata=t.recipients[0].encrypted_key),"epu"in e&&null!=e.epu&&(p.epu=e.epu),"epv"in e&&null!=e.epv&&(p.epv=e.epv);var n=t.plaintext;return delete t.plaintext,u.then(function(i){var a=i.encrypt(f,n,p);return a=a.then(function(n){return t.iv=hV.base64url.encode(r,"binary"),"aad"in e&&null!=e.aad&&(t.aad=e.aad),t.ciphertext=hV.base64url.encode(n.data,"binary"),t.tag=hV.base64url.encode(n.tag,"binary"),t})})}),i){case"compact":l=l.then(function(e){var t=new Array(5);return t[0]=e.protected,e.recipients&&e.recipients[0]&&(t[1]=e.recipients[0].encrypted_key),t[2]=e.iv,t[3]=e.ciphertext,t[4]=e.tag,t=t.join(".")});break;case"flattened":l=l.then(function(e){var t={},r=e.recipients&&e.recipients[0];return e.protected&&(t.protected=e.protected),e.unprotected&&(t.unprotected=e.unprotected),["header","encrypted_key"].forEach(function(e){r&&e in r&&(t[e]=r[e])}),e.aad&&(t.aad=e.aad),t.iv=e.iv,t.ciphertext=e.ciphertext,t.tag=e.tag,t})}return l}})}var xZ={algorithms:"*"};function CZ(e,t){var r,n;if(v$.isKey(e))n=(r=e).keystore;else{if(!v$.isKeyStore(e))throw new TypeError("Keystore must be provided");n=e}t=VL(xZ,t),Object.defineProperty(this,"decrypt",{value:function(e,i){var a=(i=VL({},t,i||{})).handlers||{},o=Object.keys(a),s=new w$(i.algorithms);if("string"==typeof e)e={protected:(e=e.split("."))[0],recipients:[{encrypted_key:e[1]}],iv:e[2],ciphertext:e[3],tag:e[4]};else if(!e||"object"!=typeof e)throw new Error("invalid input");"encrypted_key"in e&&(e.recipients=[{encrypted_key:e.encrypted_key}]);var c,u,l,f,p,d=e.recipients||[{}];return Promise.resolve(d).then(function(t){if(e.protected){u=pV.decode(e.protected).toString("utf8");var r=(u=JSON.parse(u)).crit;if(r){if(!Array.isArray(r))return Promise.reject(new Error("Invalid 'crit' header"));for(var n=0;r.length>n;n++)if(-1===o.indexOf(r[n]))return Promise.reject(new Error("Critical extension is not supported: "+r[n]))}c=u,u=Object.keys(u)}else c={},u=[];return c=VL(e.unprotected||{},c),t=t.map(function(e){var t=Promise.resolve(),r=e.header||{};return r=VL(r,c),e.header=r,e.protected=u,s.match(r.alg)||(t=t.then(function(){return Promise.reject(new Error("Algorithm not allowed: "+r.alg))})),s.match(r.enc)||(t=t.then(function(){return Promise.reject(new Error("Algorithm not allowed: "+r.enc))})),r.epk&&(t=(t=t.then(function(){return v$.asKey(r.epk)})).then(function(e){r.epk=e.toObject(!1)})),t.then(function(){return e})}),Promise.all(t)}).then(function(e){var t={};return new Promise(function(i,a){var o=function(){var s=e.shift();if(s){var c=Promise.resolve(s);(c=(c=c.then(function(e){var t=p=e.encrypted_key||"";return t=pV.decode(t),(l=r||n.get({use:"enc",alg:e.header.alg,kid:e.header.kid}))?l.unwrap(e.header.alg,t,e.header):Promise.reject()})).then(function(e){f={kty:"oct",k:pV.encode(e)},f=v$.asKey(f),t.key=l,t.header=s.header,t.protected=s.protected,i(t)})).catch(o)}else a(new Error("no key found"))};o()})}).then(function(t){return t.iv=e.iv,t.tag=e.tag,t.ciphertext=e.ciphertext,t}).then(function(e){var t=[];return o.forEach(function(r){var n;"function"==typeof(r=a[r])?n=r(e):"object"==typeof r&&"function"==typeof r.prepare&&(n=r.prepare(e)),n&&t.push(Promise.resolve(n))}),Promise.all(t).then(function(){return e})}).then(function(e){return Ug(e.ciphertext)||(e.ciphertext=pV.decode(e.ciphertext)),e}).then(function(t){var r=e.protected;"aad"in e&&null!=e.aad&&(r+="."+e.aad);var n={iv:t.iv,adata:r,tag:t.tag,kdata:p,epu:t.epu,epv:t.epv},i=t.ciphertext;return delete t.iv,delete t.tag,delete t.ciphertext,f.then(function(e){return e.decrypt(t.header.enc,i,n).then(function(e){return t.payload=t.plaintext=e,t})})}).then(function(e){return"DEF"===e.header.zip?new Promise(function(t,r){bZ.inflateRaw(new ig(e.plaintext),function(n,i){n?r(n):(e.payload=e.plaintext=i,t(e))})}):e}).then(function(e){var t=[];return o.forEach(function(r){var n;"object"==typeof(r=a[r])&&"function"==typeof r.complete&&(n=r.complete(e)),n&&t.push(Promise.resolve(n))}),Promise.all(t).then(function(){return e})})}})}var kZ={createEncrypt:{encrypter:SZ,createEncrypt:function(e,t){var r=e,n=1,i=t;if(0===arguments.length)throw new Error("at least one recipient must be provided");1===arguments.length?(i=e,n=0,r={}):v$.isKey(e)||e&&"kty"in e||e&&"key"in e&&(v$.isKey(e.key)||"kty"in e.key)?(i=e,n=0,r={}):r=CF(e),Array.isArray(i)||(i=EZ(arguments,n)),r=NV(CF(wZ),r);var a=CF(r.fields||{});switch(r.zip&&(a.zip="boolean"==typeof r.zip?!!r.zip&&"DEF":r.zip),r.format=(r.compact?"compact":r.format)||"general",r.format){case"compact":if("aad"in e)throw new Error("additional authenticated data cannot be used for compact serialization");case"flattened":if(i.length>1)throw new Error("too many recipients for compact serialization")}var o=!1;if("compact"===r.format||"*"===r.protect)o=!0,r.protect=Object.keys(a).concat("enc");else if("string"==typeof r.protect)r.protect=[r.protect];else if(Array.isArray(r.protect))r.protect=r.protect.concat();else{if(r.protect)throw new Error("protect must be a list of fields");r.protect=[]}if(o&&1<i.length)throw new Error("too many recipients to protect all header parameters");return i=i.map(function(e,t){var r;return r=e&&"kty"in e?(r=v$.asKey(e)).then(function(e){return{key:e}}):e?(r=v$.asKey(e.key)).then(function(t){return{header:e.header,reference:e.reference,key:t}}):Promise.reject(new Error("missing key for recipient "+t)),e.epk&&(r=r.then(function(t){return v$.asKey(e.epk).then(function(e){return t.epk=e,t})})),r=r.then(function(e){var t=e.key,r=e.header||{};e.header=r;var n={};n=NV(n,a),(n=NV(n,e.header)).alg||(n.alg=t.algorithms(v$.MODE_WRAP)[0]),r.alg=n.alg;var i,o=e.reference;if(delete e.reference,void 0===o?o=(o=["kid","jku","x5c","x5t","x5u"].some(function(e){return e in r}))?null:"kid":"boolean"==typeof o&&(o=o?"kid":null),o)if(i=t.toJSON(),"jwk"===o){if("oct"===t.kty)return Promise.reject(new Error("cannot embed key"));r.jwk=i}else o in i&&(r[o]=i[o]);return e=Object.freeze(e)})}),new SZ({aad:"aad"in r?hV.base64url.encode(r.aad||""):null,contentAlg:r.contentAlg,format:r.format,protect:r.protect,cek:r.cek,iv:r.iv,protectAll:o},a,i)}}.createEncrypt,createDecrypt:{decrypter:CZ,createDecrypt:function(e,t){return new CZ(e,t)}}.createDecrypt},TZ={JWE:kZ,JWS:S$,util:hV};var AZ=function(e){var t,r,n,i=e.split(".");if(3===i.length)t="JWS",r=function(t,r){return TZ.JWS.createVerify(t).verify(e,r)};else{if(5!==i.length)throw new TypeError("invalid jose serialization");t="JWE",r=function(t,r){return TZ.JWE.createDecrypt(t).decrypt(e,r)}}return n=TZ.util.base64url.decode(i[0],"utf8"),n=JSON.parse(n),{type:t,format:"compact",input:e,header:n,perform:r}},IZ={JWE:kZ,JWS:S$,util:hV};var PZ=function(e){var t,r,n;if("signatures"in e||"signature"in e)t="JWS",r=function(t,r){return IZ.JWS.createVerify(t).verify(e,r)},n=(n=e.signatures||[{protected:e.protected,header:e.header,signature:e.signature}]).map(function(e){var t,r={};return e.header&&(r=VL(r,e.header)),e.protected&&(t=e.protected,t=IZ.util.base64url.decode(t,"utf8"),t=JSON.parse(t),r=VL(r,t)),r});else if("ciphertext"in e){t="JWE",r=function(t,r){return IZ.JWE.createDecrypt(t).decrypt(e,r)};var i={};e.protected&&(i.protected=e.protected,i.protected=IZ.util.base64url.decode(i.protected,"utf8"),i.protected=JSON.parse(i.protected)),e.unprotected&&(i.unprotected=e.unprotected),n=(n=e.recipients||[{}]).map(function(e){var t={};return e.header&&(t=VL(t,e.header)),i.unprotected&&(t=VL(t,i.unprotected)),i.protected&&(t=VL(t,i.protected)),t})}return{type:t,format:"json",input:e,all:n,perform:r}},OZ=n(function(e){var t=e.exports=function(e){if(Ug(e))return AZ(e.toString("ascii"));if("string"==typeof e)return AZ(e);if(e)return PZ(e);throw new TypeError("invalid input")};t.compact=AZ,t.json=PZ});"undefined"==typeof Promise&&xF.polyfill();var RZ={JWA:jW,JWE:kZ,JWK:v$,JWS:S$,util:hV,parse:OZ,canYouSee:S$.createVerify};var jZ=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t};var MZ=function(e,t){for(var r=-1,n=e.length;++r<n&&!1!==t(e[r],r,e););return e};var NZ=function(e,t,r){r||(r={});for(var n=-1,i=t.length;++n<i;){var a=t[n];r[a]=e[a]}return r},BZ="[object Function]",DZ=/^\[object .+?Constructor\]$/;var FZ=Object.prototype,LZ=Function.prototype.toString,UZ=FZ.hasOwnProperty,zZ=FZ.toString,VZ=RegExp("^"+LZ.call(UZ).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var qZ=function(e,t){var r=null==e?void 0:e[t];return function(e){return null!=e&&(function(e){return function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)&&zZ.call(e)==BZ}(e)?VZ.test(LZ.call(e)):function(e){return!!e&&"object"==typeof e}(e)&&DZ.test(e))}(r)?r:void 0},KZ=9007199254740991,GZ="[object Arguments]",HZ="[object Function]",WZ="[object GeneratorFunction]",$Z=Object.prototype,YZ=$Z.hasOwnProperty,JZ=$Z.toString,QZ=$Z.propertyIsEnumerable;var ZZ=function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=KZ}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?JZ.call(e):"";return t==HZ||t==WZ}(e)}(e)}(e)&&YZ.call(e,"callee")&&(!QZ.call(e,"callee")||JZ.call(e)==GZ)},XZ="[object Function]",eX=/^\[object .+?Constructor\]$/;function tX(e){return!!e&&"object"==typeof e}var rX=Object.prototype,nX=Function.prototype.toString,iX=rX.hasOwnProperty,aX=rX.toString,oX=RegExp("^"+nX.call(iX).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sX=function(e,t){var r=null==e?void 0:e[t];return function(e){if(null==e)return!1;if(function(e){return function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)&&aX.call(e)==XZ}(e))return oX.test(nX.call(e));return tX(e)&&eX.test(e)}(r)?r:void 0}(Array,"isArray"),cX=9007199254740991;var uX=sX||function(e){return tX(e)&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=cX}(e.length)&&"[object Array]"==aX.call(e)},lX=/^\d+$/,fX=Object.prototype.hasOwnProperty,pX=qZ(Object,"keys"),dX=9007199254740991;var hX=function(e){return function(t){return null==t?void 0:t[e]}}("length");function vX(e,t){return e="number"==typeof e||lX.test(e)?+e:-1,t=null==t?dX:t,e>-1&&e%1==0&&e<t}function mX(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=dX}function gX(e){for(var t=function(e){if(null==e)return[];yX(e)||(e=Object(e));var t=e.length;t=t&&mX(t)&&(uX(e)||ZZ(e))&&t||0;var r=e.constructor,n=-1,i="function"==typeof r&&r.prototype===e,a=Array(t),o=t>0;for(;++n<t;)a[n]=n+"";for(var s in e)o&&vX(s,t)||"constructor"==s&&(i||!fX.call(e,s))||a.push(s);return a}(e),r=t.length,n=r&&e.length,i=!!n&&mX(n)&&(uX(e)||ZZ(e)),a=-1,o=[];++a<r;){var s=t[a];(i&&vX(s,n)||fX.call(e,s))&&o.push(s)}return o}function yX(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var bX=pX?function(e){var t,r=null==e?void 0:e.constructor;return"function"==typeof r&&r.prototype===e||"function"!=typeof e&&(null!=(t=e)&&mX(hX(t)))?gX(e):yX(e)?pX(e):[]}:gX;var wX,_X=function(e,t){return null==t?e:NZ(t,bX(t),e)};var EX=function(e,t,r){for(var n=-1,i=Object(e),a=r(e),o=a.length;o--;){var s=a[wX?o:++n];if(!1===t(i[s],s,i))break}return e},SX="[object Arguments]",xX="[object Boolean]",CX="[object Date]",kX="[object Function]",TX="[object Number]",AX="[object Object]",IX="[object RegExp]",PX="[object String]",OX="[object ArrayBuffer]",RX="[object Float32Array]",jX="[object Float64Array]",MX="[object Int8Array]",NX="[object Int16Array]",BX="[object Int32Array]",DX="[object Uint8Array]",FX="[object Uint8ClampedArray]",LX="[object Uint16Array]",UX="[object Uint32Array]",zX=/\w*$/,VX={};VX[SX]=VX["[object Array]"]=VX[OX]=VX[xX]=VX[CX]=VX[RX]=VX[jX]=VX[MX]=VX[NX]=VX[BX]=VX[TX]=VX[AX]=VX[IX]=VX[PX]=VX[DX]=VX[FX]=VX[LX]=VX[UX]=!0,VX["[object Error]"]=VX[kX]=VX["[object Map]"]=VX["[object Set]"]=VX["[object WeakMap]"]=!1;var qX=Object.prototype,KX=qX.hasOwnProperty,GX=qX.toString,HX=e.ArrayBuffer,WX=e.Uint8Array;function $X(e){var t=new HX(e.byteLength);return new WX(t).set(new WX(e)),t}var YX=function e(t,r,n,i,a,o,s){var c;if(n&&(c=a?n(t,i,a):n(t)),void 0!==c)return c;if(!function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(t))return t;var u=uX(t);if(u){if(c=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&KX.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(t),!r)return jZ(t,c)}else{var l=GX.call(t),f=l==kX;if(l!=AX&&l!=SX&&(!f||a))return VX[l]?function(e,t,r){var n=e.constructor;switch(t){case OX:return $X(e);case xX:case CX:return new n(+e);case RX:case jX:case MX:case NX:case BX:case DX:case FX:case LX:case UX:var i=e.buffer;return new n(r?$X(i):i,e.byteOffset,e.length);case TX:case PX:return new n(e);case IX:var a=new n(e.source,zX.exec(e));a.lastIndex=e.lastIndex}return a}(t,l,r):a?t:{};if(c=function(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}(f?{}:t),!r)return _X(c,t)}o||(o=[]),s||(s=[]);for(var p=o.length;p--;)if(o[p]==t)return s[p];return o.push(t),s.push(c),(u?MZ:function(e,t){return EX(e,t,bX)})(t,function(i,a){c[a]=e(i,r,n,a,t,o,s)}),c};function JX(e){return e}var QX=function(e,t,r){if("function"!=typeof e)return JX;if(void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,a){return e.call(t,r,n,i,a)};case 5:return function(r,n,i,a,o){return e.call(t,r,n,i,a,o)}}return function(){return e.apply(t,arguments)}},ZX=/^\d+$/,XX=9007199254740991;var e0=function(e){return function(t){return null==t?void 0:t[e]}}("length");function t0(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=XX}(e0(e))}var r0=function(e,t,r){if(!function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(r))return!1;var n=typeof t;if("number"==n?t0(r)&&function(e,t){return e="number"==typeof e||ZX.test(e)?+e:-1,t=null==t?XX:t,e>-1&&e%1==0&&e<t}(t,r.length):"string"==n&&t in r){var i=r[t];return e==e?e===i:i!=i}return!1};var n0=function(e,t,r,n){return t&&"boolean"!=typeof t&&r0(e,t,r)?t=!1:"function"==typeof t&&(n=r,r=t,t=!1),"function"==typeof r?YX(e,t,QX(r,n,3)):YX(e,t)};function i0(e){e.loc=e.loc||void 0,e.tag=e.tag||void 0,Object.defineProperty(this,"enc",{get:function(){return e.enc},enumerable:!0}),Object.defineProperty(this,"key",{get:function(){return e.key},enumerable:!0}),Object.defineProperty(this,"iv",{get:function(){return e.iv},enumerable:!0}),Object.defineProperty(this,"aad",{get:function(){return e.aad},enumerable:!0}),Object.defineProperty(this,"loc",{get:function(){return e.loc},set:function(t){e.loc=t},enumerable:!0}),Object.defineProperty(this,"tag",{get:function(){return e.tag},enumerable:!0}),Object.defineProperty(this,"toJSON",{value:function(){var t=e.key.get("k",!0),r={};return r.enc=e.enc,r.key=RZ.util.base64url.encode(t),r.iv=RZ.util.base64url.encode(e.iv),r.aad=e.aad,e.loc&&(r.loc=e.loc),e.tag&&(r.tag=RZ.util.base64url.encode(e.tag)),r}}),Object.defineProperty(this,"toJWE",{value:function(t){var r=this;return RZ.JWK.asKey(t).then(function(t){var n={header:{alg:"dir"},key:t,reference:!1},i={compact:!0,contentAlg:e.enc},a=r.toJSON();return a=JSON.stringify(a),RZ.JWE.createEncrypt(i,n).final(a,"utf8")})}}),Object.defineProperty(this,"encrypt",{value:function(t){var r={iv:e.iv,adata:new ig(e.aad,"utf8")};return t=RZ.util.asBuffer(t),e.key.encrypt(e.enc,t,r).then(function(t){var r=t.data;return e.tag=t.tag,r})}}),Object.defineProperty(this,"decrypt",{value:function(t){var r={iv:e.iv,adata:new ig(e.aad,"utf8"),mac:e.tag};return t=RZ.util.asBuffer(t),e.key.decrypt(e.enc,t,r).then(function(e){return e})}})}var a0={create:function(){var e=RZ.util.randomBytes(12),t=(new Date).toISOString(),r=RZ.JWK.createKeyStore().generate("oct",256);return r=r.then(function(r){return new i0({enc:"A256GCM",key:r,iv:e,aad:t})})},fromJWE:function(e,t){return RZ.JWK.asKey(e).then(function(e){return RZ.JWE.createDecrypt(e).decrypt(t)}).then(function(e){return e=e.plaintext.toString("utf8"),e=JSON.parse(e),a0.fromJSON(e)})},fromJSON:function(e){var t=n0(e);return(e.key?RZ.JWK.asKey({kty:"oct",k:e.key}):Promise.resolve()).then(function(e){return e&&(t.key=e),"iv"in t&&(t.iv=Ug(t.iv)?t.iv:RZ.util.base64url.decode(t.iv)),"tag"in t&&(t.tag=Ug(t.tag)?t.tag:RZ.util.base64url.decode(t.tag)),new i0(t)})}},o0=a0,s0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=wf)&&r.__esModule?r:{default:r};t.default=function(e){if(e instanceof ArrayBuffer)return n.default.resolve(e);if(e.toArrayBuffer)return n.default.resolve(e.toArrayBuffer());if(e.buffer)return n.default.resolve(e.buffer);return new n.default(function(t,r){var n=new FileReader;n.onload=function(){t(new Uint8Array(this.result))},n.onerror=r,n.readAsArrayBuffer(e)})}});r(s0);var c0=function(e,t,r){return"function"==typeof t?YX(e,!0,QX(t,r,3)):YX(e,!0)};function u0(e){e=c0(e||{}),["createDate","expirationDate","bindDate"].forEach(function(t){t in e&&e[t]&&(e[t]="string"==typeof e[t]?new Date(Date.parse(e[t])):e[t])}),Object.defineProperty(this,"uri",{get:function(){return e.uri||""},enumerable:!0}),Object.defineProperty(this,"jwk",{get:function(){return e.jwk||void 0},enumerable:!0}),Object.defineProperty(this,"userId",{get:function(){return e.userId||""},enumerable:!0}),Object.defineProperty(this,"clientId",{get:function(){return e.clientId||""},enumerable:!0}),Object.defineProperty(this,"createDate",{get:function(){return e.createDate||void 0},enumerable:!0}),Object.defineProperty(this,"expirationDate",{get:function(){return e.expirationDate||void 0},enumerable:!0}),Object.defineProperty(this,"bindDate",{get:function(){return e.bindDate||void 0},enumerable:!0}),Object.defineProperty(this,"resourceUri",{get:function(){return e.resourceUri||""},enumerable:!0})}u0.prototype.asKey=function(){return this.jwk?RZ.JWK.asKey(this.jwk):Promise.reject(new Error("'jwk' not set"))},u0.prototype.toJSON=function(){var e=this,t={};return Object.keys(this).forEach(function(r){var n=e[r];"function"!=typeof n&&void 0!==n&&(n instanceof Date&&(n=n.toISOString()),t[r]=c0(n))}),t},u0.fromObject=function(e){if(!e)throw new TypeError("representation required");return e instanceof u0?e:new u0(e)};var l0,f0=u0,p0=e.crypto||e.msCrypto;if(p0&&p0.getRandomValues){var d0=new Uint8Array(16);l0=function(){return p0.getRandomValues(d0),d0}}if(!l0){var h0=new Array(16);l0=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),h0[t]=e>>>((3&t)<<3)&255;return h0}}for(var v0=l0,m0=[],g0={},y0=0;y0<256;y0++)m0[y0]=(y0+256).toString(16).substr(1),g0[m0[y0]]=y0;function b0(e,t){var r=t||0,n=m0;return n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]}var w0=v0(),_0=[1|w0[0],w0[1],w0[2],w0[3],w0[4],w0[5]],E0=16383&(w0[6]<<8|w0[7]),S0=0,x0=0;function C0(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||v0)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;a++)t[n+a]=i[a];return t||b0(i)}var k0=C0;k0.v1=function(e,t,r){var n=t&&r||0,i=t||[],a=void 0!==(e=e||{}).clockseq?e.clockseq:E0,o=void 0!==e.msecs?e.msecs:(new Date).getTime(),s=void 0!==e.nsecs?e.nsecs:x0+1,c=o-S0+(s-x0)/1e4;if(c<0&&void 0===e.clockseq&&(a=a+1&16383),(c<0||o>S0)&&void 0===e.nsecs&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");S0=o,x0=s,E0=a;var u=(1e4*(268435455&(o+=122192928e5))+s)%4294967296;i[n++]=u>>>24&255,i[n++]=u>>>16&255,i[n++]=u>>>8&255,i[n++]=255&u;var l=o/4294967296*1e4&268435455;i[n++]=l>>>8&255,i[n++]=255&l,i[n++]=l>>>24&15|16,i[n++]=l>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a;for(var f=e.node||_0,p=0;p<6;p++)i[n+p]=f[p];return t||b0(i)},k0.v4=C0,k0.parse=function(e,t,r){var n=t&&r||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){i<16&&(t[n+i++]=g0[e])});i<16;)t[n+i++]=0;return t},k0.unparse=b0;var T0=k0,A0={KeyObject:f0};function I0(){var e=null,t={},r={};Object.defineProperty(this,"ephemeralKey",{get:function(){return e},set:function(t){e=t?A0.KeyObject.fromObject(t):null},enumerable:!0}),Object.defineProperty(this,"clientInfo",{get:function(){return t},set:function(e){t=e||{}},enumerable:!0}),Object.defineProperty(this,"serverInfo",{get:function(){return r},set:function(e){r=e||{}},enumerable:!0}),Object.defineProperty(this,"requestId",{value:function(){return T0()}})}I0.prototype.createECDHKey=function(){var e=this.clientInfo,t=RZ.JWK.createKeyStore(),r=t.generate("EC","P-256");return r=r.then(function(t){var r=new Date,n={uri:"-internal/"+t.kid,jwk:t.toJSON(!0),userId:e&&e.credential&&e.credential.userId||"",clientId:e&&e.clientId||"",createDate:r,expirationDate:new Date(r.getTime()+36e5)};return new A0.KeyObject(n)})},I0.prototype.deriveEphemeralKey=function(e){var t=this.ephemeralKey;return t&&t.jwk&&"EC"===t.jwk.kty?(e=A0.KeyObject.fromObject(e),Promise.all([t.asKey(),e.asKey()]).then(function(e){var t=e[0],r={public:e[1].toObject()},n=t.toObject(!0);return RZ.JWA.derive("ECDH-HKDF",n,r)}).then(function(t){var r=e.uri,n={uri:r,createDate:e.createDate,expirationDate:e.expirationDate,jwk:{kty:"oct",kid:r,alg:"A256GCM",k:RZ.util.base64url.encode(t)}};return new A0.KeyObject(n)})):Promise.reject(new Error("invalid local ECDH key"))};var P0=I0;var O0=function(e,t,r,n){return t&&"boolean"!=typeof t&&r0(e,t,r)?t=!1:"function"==typeof t&&(n=r,r=t,t=!1),"function"==typeof r?YX(e,t,QX(r,n,3)):YX(e,t)};function R0(e){var t="";e=e&&O0(e)||{},Object.defineProperty(this,"wrapped",{get:function(){return t},set:function(e){t=String(e||"")},enumerable:!0}),Object.defineProperty(this,"body",{get:function(){return e},set:function(r){r=r&&O0(r)||{},"requestId"in e&&(r.requestId=e.requestId),"uri"in e&&(r.uri=e.uri),"method"in e&&(r.method=e.method),t="",e=r},enumerable:!0}),Object.defineProperty(this,"requestId",{get:function(){return e.requestId||""},set:function(t){t?e.requestId=t:delete e.requestId},enumerable:!0}),Object.defineProperty(this,"uri",{get:function(){return e.uri||""},set:function(t){t?e.uri=t:delete e.uri},enumerable:!0}),Object.defineProperty(this,"method",{get:function(){return e.method||""},set:function(t){t?e.method=t:delete e.method},enumerable:!0})}R0.prototype.wrap=function(e,t){t=t||{};var r=this;return this.requestId&&!t.requestId||(this.requestId=t.requestId||e.requestId()),this.body.client=e.clientInfo,(t.serverKey?RZ.JWK.asKey(e.serverInfo.key):e.ephemeralKey.asKey()).then(function(e){var n=e,i={compact:!0,contentAlg:t.contentAlg||"A256GCM"};return RZ.JWE.createEncrypt(i,n).final(JSON.stringify(r.body),"utf8")}).then(function(e){return r.wrapped=e,e})};var j0=R0;function M0(e){e=e||"";var t={};Object.defineProperty(this,"wrapped",{get:function(){return e},set:function(r){t={},e=String(r||"")},enumerable:!0}),Object.defineProperty(this,"body",{get:function(){return t},set:function(e){t=e&&O0(e)||{}},enumerable:!0}),Object.defineProperty(this,"status",{get:function(){return t.status||0},set:function(e){e=parseInt(e),isNaN(e)||(t.status=e)},enumerable:!0}),Object.defineProperty(this,"reason",{get:function(){return t.reason||""},set:function(e){t.reason=String(e||"")},enumerable:!0}),Object.defineProperty(this,"requestId",{get:function(){return t.requestId||""},set:function(e){t.requestId=String(e||"")},enumerable:!0})}M0.prototype.unwrap=function(e,t){t=t||{};var r,n=RZ.JWK.createKeyStore(),i=[];(r=e.ephemeralKey&&e.ephemeralKey.jwk)&&i.push(n.add(r)),(r=e.serverInfo&&e.serverInfo.key)&&i.push(n.add(r));var a=this,o=Promise.all(i);return o=(o=o.then(function(){var e=a.wrapped;switch((e.match(/\./g)||[]).length){case 2:return RZ.JWS.createVerify(n).verify(e);case 4:return RZ.JWE.createDecrypt(n).decrypt(e);default:return Promise.reject(new Error("invalid wrapped"))}})).then(function(e){return e=(e.plaintext||e.payload).toString("utf8"),e=JSON.parse(e),a.body=e,e})};var N0={KeyObject:f0,Context:P0,Request:j0,Response:M0},B0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DryError=t.KmsTimeoutError=t.KmsError=void 0;var r,n,i,a,o=d(If),s=d(vT),c=d(aS),u=d(Gy),l=d(Yy),f=d(oS),p=d(sS);function d(e){return e&&e.__esModule?e:{default:e}}var h=t.KmsError=(n=r=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,l.default)(t,[{key:"parse",value:function(e){e=e.body||e,(0,s.default)(this,{body:{enumerable:!1,value:e},reason:{enumerable:!1,value:e.reason},requestId:{enumerable:!1,value:e.requestId},status:{enumerable:!1,value:e.status}});var t="string"==typeof e?e:e.reason;return t||(t=this.constructor.defaultMessage),e.status&&(t+="\nKMS_RESPONSE_STATUS: "+e.status),e.requestId&&(t+="\nKMS_REQUEST_ID: "+e.requestId),t}}]),t}(Zx.Exception),r.defaultMessage="An unknown error occurred while communicating with the kms. This implies we received an error response without a body.",n);t.KmsTimeoutError=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,l.default)(t,[{key:"parse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.request,r=void 0===t?{}:t,n=e.timeout,i="The KMS did not respond within "+(n?n+" milliseconds":"a timely fashion");return r&&(r.method&&r.uri&&(i+="\nKMS_REQUEST: "+r.method+" "+r.uri),r.requestId&&(i+="\nKMS_REQUEST_ID: "+r.requestId)),i}}]),t}(h),t.DryError=(a=i=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,l.default)(t,[{key:"parse",value:function(e){(0,o.default)(LP.SparkHttpError.prototype.parse,this,[e._res]);var t=e._res.body.message,r=t.reason||t;return r||(r=this.constructor.defaultMessage),this.options.url?r+="\n"+this.options.method+" "+this.options.url:this.options.uri?r+="\n"+this.options.method+" "+this.options.uri:r+="\n"+this.options.method+" "+this.options.service.toUpperCase()+"/"+this.options.resource,r+="\nWEBEX_TRACKING_ID: "+this.options.headers.trackingid,t.status&&(r+="\nKMS_RESPONSE_STATUS: "+t.status),t.requestId&&(r+="\nKMS_REQUEST_ID: "+t.requestId),(0,s.default)(this,{reason:{enumerable:!1,value:t.reason},requestId:{enumerable:!1,value:t.requestId},status:{enumerable:!1,value:t.status}}),r}}]),t}(LP.SparkHttpError),i.defaultMessage="An unknown error was received from a service that proxies to the KMS",a)});r(B0);B0.DryError,B0.KmsTimeoutError,B0.KmsError;var D0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TIMEOUT_SYMBOL=void 0;var r=i(wf),n=i(ow);function i(e){return e&&e.__esModule?e:{default:e}}var a=t.TIMEOUT_SYMBOL=(0,n.default)("TIMEOUT_SYMBOL"),o=LP.Batcher.extend({namespace:"Encryption",processKmsMessageEvent:function(e){var t=this;return this.logger.info("kms-batcher: received kms message"),r.default.all(e.encryption.kmsMessages.map(function(e){return new r.default(function(r){"production"!==Tc.env.NODE_ENV&&t.logger.info("kms-batcher:",e.body),r(t.acceptItem(e))})}))},prepareItem:function(e){var t=this;return this.getDeferredForRequest(e).then(function(r){var n=e[a];if(!n)throw new Error("timeout is required");var i=(0,nC.safeSetTimeout)(function(){t.logger.warn("kms: request timed out; request id: "+e.requestId+"; timeout: "+n),t.handleItemFailure(e,new B0.KmsTimeoutError({timeout:n,request:e}))},n);return r.promise.then(function(){return clearTimeout(i)}),r.promise.catch(function(){return clearTimeout(i)}),e})},prepareRequest:function(e){return this.spark.internal.encryption.kms._getKMSCluster().then(function(t){return{destination:t,kmsMessages:e.map(function(e){return e.wrapped})}})},submitHttpRequest:function(e){return this.logger.info("kms: batched-request-length",e.kmsMessages.length),this.spark.request({method:"POST",service:"encryption",resource:"/kms/messages",body:e})},handleHttpSuccess:function(){return r.default.resolve()},didItemFail:function(e){return r.default.resolve(e.status>=400)},handleItemSuccess:function(e){return this.getDeferredForResponse(e).then(function(t){t.resolve(e.body)})},handleItemFailure:function(e,t){return this.getDeferredForResponse(e).then(function(r){r.reject(t||new B0.KmsError(e.body))})},fingerprintRequest:function(e){return r.default.resolve(e.requestId)},fingerprintResponse:function(e){return r.default.resolve(e.requestId)}});t.default=o});r(D0);D0.TIMEOUT_SYMBOL;var F0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i=h(su),a=h(ST),o=h(Rf),s=h(wf),c=h(mb),u=h(lm),l=h(Cm),f=h(by),p=h(RZ),d=h(D0);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var m=new c.default,g=new c.default,y=new c.default,b=LP.SparkPlugin.extend((r=(0,Zx.oneFlight)({keyFactory:function(e){return e.uri+"/"+e.onBehalfOf}}),v(n={namespace:"Encryption",children:{batcher:d.default},bindKey:function(e){var t=this,r=e.kro,n=e.kroUri,i=e.key,a=e.keyUri;return n=n||r.uri,a=a||i.uri,this.logger.info("kms: binding key to resource"),n?a?this.request({method:"update",resourceUri:n,uri:a}).then(function(e){return t.logger.info("kms: bound key to resource"),e.key}):s.default.reject(new Error("`key` or `keyUri` is required")):s.default.reject(new Error("`kro` or `kroUri` is required"))},createResource:function(e){var t=this,r=e.userIds,n=e.keyUris,i=e.key,a=e.keys;return n=n||[],a&&(n=a.reduce(function(e,t){return e.push(t.uri),e},n)),i&&n.push(i.uri),0===n.length?s.default.reject(new Error("Cannot create KMS Resource without at least one keyUri")):(this.logger.info("kms: creating resource"),this.request({method:"create",uri:"/resources",userIds:r,keyUris:n}).then(function(e){return t.logger.info("kms: created resource"),e.resource}))},addAuthorization:function(e){var t=this,r=e.userIds,n=e.authIds,i=e.kro,a=e.kroUri;return r=r||[],a=a||i.uri,n&&(r=r.concat(n)),0===r.length?s.default.reject(new Error("Cannot add authorization without userIds or authIds")):a?(this.logger.info("kms: adding authorization to kms resource"),this.request({method:"create",uri:"/authorizations",resourceUri:a,userIds:r}).then(function(e){return t.logger.info("kms: added authorization"),e.authorizations})):s.default.reject(new Error("`kro` or `kroUri` is required"))},listAuthorizations:function(e){var t=this,r=e.kro,n=e.kroUri;return(n=n||r.uri)?this.request({method:"retrieve",uri:n+"/authorizations"}).then(function(e){return t.logger.info("kms: retrieved authorization list"),e.authorizations}):s.default.reject(new Error("`kro` or `kroUri` is required"))},removeAuthorization:function(e){var t=this,r=e.authId,n=e.userId,i=e.kro,a=e.kroUri;return r=r||n,a=a||i.uri,r?a?(this.logger.info("kms: removing authorization from kms resource"),this.request({method:"delete",uri:a+"/authorizations?"+l.default.stringify({authId:r})}).then(function(e){return t.logger.info("kms: removed authorization"),e.authorizations})):s.default.reject(new Error("`kro` or `kroUri` is required")):s.default.reject(new Error("Cannot remove authorization without authId"))},createUnboundKeys:function(e){var t=this,r=e.count;return this.logger.info("kms: request "+r+" unbound keys"),r?this.request({method:"create",uri:"/keys",count:r}).then(function(e){return t.logger.info("kms: received unbound keys"),s.default.all(e.keys.map(t.asKey))}):s.default.reject(new Error("`options.count` is required"))},fetchKey:function(e){var t=this,r=e.uri,n=e.onBehalfOf;return r?(this.logger.info("kms: fetching key"),this.request({method:"retrieve",uri:r},{onBehalfOf:n}).then(function(e){return t.logger.info("kms: fetched key"),t.asKey(e.key)})):s.default.reject(new Error("`options.uri` is required"))},ping:function(){return this.request({method:"update",uri:"/ping"})},asKey:function(e){return p.default.JWK.asKey(e.jwk).then(function(t){return e.jwk=t,e})},prepareRequest:function(e,t){var r=this,n="create"===e.method&&e.uri.includes("/ecdhe");return s.default.resolve(n?y.get(this):this._getContext()).then(function(i){r.logger.info("kms: wrapping "+(n?"ephemeral key":"kms")+" request");var a=new N0.Request(e),s=i;return t&&(s=r._contextOnBehalfOf(i,t)),a.wrap(s,{serverKey:n}).then(function(){return"production"!==Tc.env.NODE_ENV&&r.logger.info("kms: request payload",f.default.inspect((0,u.default)(JSON.parse((0,o.default)(a)),"wrapped"),{depth:null})),a})})},processKmsMessageEvent:function(e){var t=this;return this.logger.info("kms: received kms message"),s.default.all(e.encryption.kmsMessages.map(function(r,n){return t._isECDHEMessage(r).then(function(i){t.logger.info("kms: received "+(i?"ecdhe":"normal")+" message");var a=new N0.Response(r);return s.default.resolve(i?y.get(t):m.get(t)).then(function(e){return a.unwrap(e)}).then(function(){"production"!==Tc.env.NODE_ENV&&t.logger.info("kms: response payload",f.default.inspect((0,u.default)(JSON.parse((0,o.default)(a)),"wrapped"),{depth:null}))}).then(function(){e.encryption.kmsMessages[n]=a}).then(function(){return a})})})).then(function(){return t.batcher.processKmsMessageEvent(e)}).catch(function(e){return t.logger.error("kms: decrypt failed",e.stack),s.default.reject(e)}).then(function(){return e})},decryptKmsMessage:function(e){var t=new N0.Response(e);return m.get(this).then(function(e){return t.unwrap(e)}).then(function(){return t.body})},_isECDHEMessage:function(e){return this._getKMSStaticPubKey().then(function(t){var r=e.split(".");return 3===r.length&&JSON.parse(p.default.util.base64url.decode(r[0])).kid===t.kid})},request:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.timeout,i=r.onBehalfOf;return n=n||this.config.kmsInitialTimeout,this.spark.internal.mercury.connect().then(function(){return t.prepareRequest(e,i)}).then(function(e){return e[D0.TIMEOUT_SYMBOL]=n,t.batcher.request(e)}).catch(function(r){return"test"!==Tc.env.NODE_ENV||403!==r.status&&403!==r.statusCode||!r.message.match(/Failed to resolve authorization token in KmsMessage request for user/)?r.statusCode||r.status?s.default.reject(r):("production"!==Tc.env.NODE_ENV&&t.logger.info("kms: request error",r.stack||r),(n*=2)>=t.config.kmsMaxTimeout&&(t.logger.info("kms: exceeded maximum KMS request retries; negotiating new ecdh key"),"production"!==Tc.env.NODE_ENV&&t.logger.info("kms: timeout/maxtimeout",n,t.config.kmsMaxTimeout),m.delete(t),n=0),t.request(e,{timeout:n,onBehalfOf:i})):(t.logger.warn("kms: rerequested key due to test-mode kms auth failure"),t.request(e,{onBehalfOf:i}))})},_getAuthorization:function(){return this.spark.credentials.getUserToken("spark:kms").then(function(e){return e.access_token})},_getContext:function(){var e=this,t=m.get(this);return t||(t=this._prepareContext(),m.set(this,t),t.then(function(t){var r=t.ephemeralKey.expirationDate-Date.now()-3e4;(0,nC.safeSetTimeout)(function(){return m.delete(e)},r)})),s.default.all([t,this._getAuthorization()]).then(function(e){var t=(0,a.default)(e,2),r=t[0],n=t[1];return r.clientInfo.credential.bearer=n,r})},_getKMSCluster:function(){return this.logger.info("kms: retrieving KMS cluster"),this._getKMSDetails().then(function(e){return e.kmsCluster})},_getKMSDetails:function(){var e=this,t=g.get(this);return t||(this.logger.info("kms: fetching KMS details"),t=this.spark.request({service:"encryption",resource:"/kms/"+this.spark.internal.device.userId}).then(function(t){e.logger.info("kms: fetched KMS details");var r=t.body;return r.rsaPublicKey=JSON.parse(r.rsaPublicKey),r}).catch(function(t){return e.logger.error("kms: failed to fetch KMS details",t),s.default.reject(t)}),g.set(this,t)),t},_getKMSStaticPubKey:function(){return this.logger.info("kms: retrieving KMS static public key"),this._getKMSDetails().then(function(e){return e.rsaPublicKey})},_prepareContext:function(){var e=this;this.logger.info("kms: creating context");var t=new N0.Context;return s.default.all([this._getKMSStaticPubKey(),this._getAuthorization()]).then(function(r){var n=(0,a.default)(r,2),i=n[0],o=n[1];return t.clientInfo={clientId:e.spark.internal.device.url,credential:{userId:e.spark.internal.device.userId,bearer:o}},t.serverInfo={key:i},e.logger.info("kms: creating local ephemeral key"),t.createECDHKey()}).then(function(r){return t.ephemeralKey=r,y.set(e,t),s.default.all([r.asKey(),e._getKMSCluster()])}).then(function(t){var r=(0,a.default)(t,2),n=r[0],i=r[1];return e.logger.info("kms: submitting ephemeral key request"),e.request({uri:i+"/ecdhe",method:"create",jwk:n.toJSON()})}).then(function(r){return e.logger.info("kms: deriving final ephemeral key"),t.deriveEphemeralKey(r.key)}).then(function(r){return t.ephemeralKey=r,y.delete(e),e.logger.info("kms: derived final ephemeral key"),t}).catch(function(t){return e.logger.error("kms: failed to negotiate ephemeral key",t),s.default.reject(t)})},_contextOnBehalfOf:function(e,t){var r=new N0.Context;return r.clientInfo=r.clientInfo={clientId:e.clientInfo.clientId,credential:{userId:t,bearer:e.clientInfo.credential.bearer}},r.serverInfo=e.serverInfo,r.ephemeralKey=e.ephemeralKey,r},version:"1.50.15"},"fetchKey",[r],(0,i.default)(n,"fetchKey"),n),v(n,"_getContext",[Zx.oneFlight],(0,i.default)(n,"_getContext"),n),n));t.default=b});r(F0);var L0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=c(Rf),n=c(wf),i=c(RZ),a=c(o0),o=c(s0),s=c(F0);function c(e){return e&&e.__esModule?e:{default:e}}var u=LP.SparkPlugin.extend({children:{kms:s.default},namespace:"Encryption",processKmsMessageEvent:function(e){return this.kms.processKmsMessageEvent(e)},decryptBinary:function(e,t){return(0,o.default)(t).then(function(r){return 0===t.length||0===t.byteLength?n.default.reject(new Error("Attempted to decrypt zero-length buffer")):e.decrypt(r)})},decryptScr:function(e,t,r){return this.getKey(e,r).then(function(e){return a.default.fromJWE(e.jwk,t)})},decryptText:function(e,t,r){return this.getKey(e,r).then(function(e){return i.default.JWE.createDecrypt(e.jwk).decrypt(t).then(function(e){return e.plaintext.toString()})})},download:function(e){var t=this;if(!e.loc)return n.default.reject(new Error("`scr.loc` is required"));var r=new hE.EventEmitter,i=this._fetchDownloadUrl(e).then(function(e){var n={method:"GET",uri:e,responseType:"buffer"},i=t.request(n);return(0,Zx.transferEvents)("progress",n.download,r),i}).then(function(r){return t.decryptBinary(e,r.body)});return(0,Zx.proxyEvents)(r,i),i},_fetchDownloadUrl:function(e){var t=this;return this.logger.info("encryption: retrieving download url for encrypted file"),"production"!==Tc.env.NODE_ENV&&e.loc.includes("localhost")?(this.logger.info("encryption: bypassing spark files because this looks to be a test file on localhost"),n.default.resolve(e.loc)):this.request({method:"POST",service:"files",resource:"download/endpoints",body:{endpoints:[e.loc]}}).then(function(r){var n=r.body.endpoints[e.loc];return n?(t.logger.info("encryption: retrieved download url for encrypted file"),n):(t.logger.warn("encryption: could not determine download url for `scr.loc`; attempting to download `scr.loc` directly"),e.loc)})},encryptBinary:function(e){return(0,o.default)(e).then(function(e){return a.default.create().then(function(t){return t.encrypt(e).then(o.default).then(function(e){return{scr:t,cdata:e}})})})},encryptScr:function(e,t,r){return t.loc?this.getKey(e,r).then(function(e){return t.toJWE(e.jwk)}):n.default.reject(new Error("Cannot encrypt `scr` without first setting `loc`"))},encryptText:function(e,t,r){var n=this;return this.getKey(e,r).then(function(e){return i.default.JWE.createEncrypt(n.config.joseOptions,{key:e.jwk,header:{alg:"dir"},reference:null}).final(t,"utf8")})},getKey:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).onBehalfOf;if(e.jwk)return this.kms.asKey(e);var i=e;return n&&(i+="/onBehalfOf/"+n),this.unboundedStorage.get(i).then(function(e){return JSON.parse(e)}).then(function(e){return t.kms.asKey(e)}).catch(function(){return t.kms.fetchKey({uri:e,onBehalfOf:n}).then((0,Zx.tap)(function(e){return t.unboundedStorage.put(i,(0,r.default)(e,l))}))})},version:"1.50.15"});function l(e,t){return"jwk"===e?this[e].toJSON(!0):t}t.default=u});r(L0);var U0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={encryption:{joseOptions:{compact:!0,contentAlg:"A256GCM",protect:"*"},kmsInitialTimeout:6e3,kmsMaxTimeout:32e3,batcherWait:50,batcherMaxCalls:50,batcherMaxWait:150}}});r(U0);var z0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(wf),n=c(aS),i=c(Gy),a=c(Yy),o=c(oS),s=c(sS);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onResponseError",value:function(e,t){return t instanceof B0.DryError&&t.message.match(/Failed to resolve authorization token in KmsMessage request for user/)?(this.spark.logger.error("DRY Request Failed due to kms/test-user flakiness"),this.spark.logger.error(t),this.replay(e,t)):r.default.reject(t)}},{key:"replay",value:function(e,t){return e.replayCount?e.replayCount+=1:e.replayCount=1,e.replayCount>this.spark.config.maxAuthenticationReplays?(this.spark.logger.error("kms: failed after "+this.spark.config.maxAuthenticationReplays+" replay attempts"),r.default.reject(t)):(this.spark.logger.info("kms: replaying request "+e.replayCount+" time"),this.spark.request(e))}}],[{key:"create",value:function(){return new t({spark:this})}}]),t}(UI.Interceptor);t.default=u});r(z0);var V0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DryError=t.KmsError=t.KMS=t.default=void 0;var r=u(wf),n=u(bC),i=u(up),a=u(mk);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u(L0).default}}),Object.defineProperty(t,"KMS",{enumerable:!0,get:function(){return u(F0).default}}),Object.defineProperty(t,"KmsError",{enumerable:!0,get:function(){return B0.KmsError}}),Object.defineProperty(t,"DryError",{enumerable:!0,get:function(){return B0.DryError}});var o=u(L0),s=u(U0),c=u(z0);function u(e){return e&&e.__esModule?e:{default:e}}var l=void 0;"test"===Tc.env.NODE_ENV&&(l={KmsDryErrorInterceptor:c.default.create}),(0,LP.registerInternalPlugin)("encryption",o.default,{payloadTransformer:{predicates:[{name:"encryptKmsMessage",direction:"outbound",test:function(e,t){return(0,a.default)(t,"body.kmsMessage")&&(0,i.default)(t.body.kmsMessage)?t.body.kmsMessage.keyUris&&0===t.body.kmsMessage.keyUris.length?r.default.resolve(!1):t.body.kmsMessage.resourceUri&&(t.body.kmsMessage.resourceUri.includes("<KRO>")||t.body.kmsMessage.resourceUri.includes("<KEYURL>"))?r.default.resolve(!1):t.body.kmsMessage.uri&&(t.body.kmsMessage.uri.includes("<KRO>")||t.body.kmsMessage.uri.includes("<KEYURL>"))?r.default.resolve(!1):r.default.resolve(!0):r.default.resolve(!1)},extract:function(e){return r.default.resolve(e.body)}},{name:"decryptKmsMessage",direction:"inbound",test:function(e,t){return r.default.resolve((0,a.default)(t,"body.kmsMessage")&&(0,n.default)(t.body.kmsMessage))},extract:function(e){return r.default.resolve(e.body)}},{name:"decryptErrorResponse",direction:"inbound",test:function(e,t){return r.default.resolve(Boolean(t.body&&19e5===t.body.errorCode))},extract:function(e){return r.default.resolve(e)}}],transforms:[{name:"encryptKmsMessage",fn:function(e,t){return t&&t.kmsMessage?(0,n.default)(t.kmsMessage)?r.default.resolve():e.spark.internal.encryption.kms.prepareRequest(t.kmsMessage).then(function(e){t.kmsMessage=e.wrapped}):r.default.resolve()}},{name:"decryptKmsMessage",fn:function(e,t){return e.spark.internal.encryption.kms.decryptKmsMessage(t.kmsMessage).then(function(e){t.kmsMessage=e})}},{name:"decryptErrorResponse",fn:function(e,t){var n=t.body.errors.map(function(t){return e.spark.internal.encryption.kms.decryptKmsMessage(t.description).then(function(e){t.description=e})});return n.push(e.spark.internal.encryption.kms.decryptKmsMessage(t.body.message).then(function(e){t.body.message=e})),r.default.all(n).then(function(){return r.default.reject(new B0.DryError(t))})}}]},interceptors:l,config:s.default})});r(V0);V0.DryError,V0.KmsError,V0.KMS;var q0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(eC),n=i(wf);function i(e){return e&&e.__esModule?e:{default:e}}var a=LP.Batcher.extend({namespace:"User",prepareItem:function(e){return n.default.resolve({email:e})},handleHttpSuccess:function(e){var t=this;return n.default.all((0,r.default)(e.body).map(function(r){return e.body[r]&&e.body[r].id?t.handleItemSuccess(r,e.body[r]):t.handleItemFailure(r,e.body[r])}))},handleItemFailure:function(e,t){return this.getDeferredForResponse(e).then(function(e){e.reject(t)})},handleItemSuccess:function(e,t){return this.getDeferredForResponse(e).then(function(e){e.resolve(t)})},fingerprintRequest:function(e){return n.default.resolve(e.email||e)},fingerprintResponse:function(e){return n.default.resolve(e)}}),o=a.extend({submitHttpRequest:function(e){return this.spark.request({method:"POST",service:"conversation",resource:"/users",body:e})}}),s=a.extend({submitHttpRequest:function(e){return this.spark.request({method:"POST",service:"conversation",resource:"/users",body:e,qs:{shouldCreateUsers:!0}})}}),c=LP.SparkPlugin.extend({children:{faker:o,creator:s},request:function(e){return e.create?this.creator.request(e.email):this.faker.request(e.email)},version:"1.50.15"});t.default=c});r(q0);var K0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(Cf),n=c(wf),i=c(vw),a=c(Gy),o=c(Yy),s=c(mb);function c(e){return e&&e.__esModule?e:{default:e}}var u=new s.default,l=new s.default,f=function(){function e(){(0,a.default)(this,e),u.set(this,new i.default),l.set(this,new i.default)}return(0,o.default)(e,[{key:"add",value:function(e){var t=this;if(!e.id)return n.default.reject(new Error("`user.id` is required"));if(!e.emailAddress)return n.default.reject(new Error("`user.emailAddress` is required"));if(!Zx.patterns.uuid.test(e.id))return n.default.reject(new Error("`user.id` does not appear to be a uuid"));if(!Zx.patterns.email.test(e.emailAddress))return n.default.reject(new Error("`user.emailAddress` does not appear to be an email address"));var i=this.getById(e.id).then(function(n){return l.get(t).set(e.id,(0,r.default)({},n,e))}).catch(function(){return l.get(t).set(e.id,(0,r.default)({},e))}),a=this.getByEmail(e.emailAddress).then(function(n){return u.get(t).set(e.emailAddress,(0,r.default)({},n,e))}).catch(function(){return u.get(t).set(e.emailAddress,(0,r.default)({},e))});return n.default.all([i,a])}},{key:"get",value:function(e){return Zx.patterns.uuid.test(e)?this.getById(e):Zx.patterns.email.test(e)?this.getByEmail(e):n.default.reject(new Error("`id` does not appear to be a valid user identifier"))}},{key:"getById",value:function(e){var t=l.get(this).get(e);return t?n.default.resolve(t):n.default.reject(new Error("No user found by specified id"))}},{key:"getByEmail",value:function(e){var t=u.get(this).get(e);return t?n.default.resolve(t):n.default.reject(new Error("No user found by specified email address"))}}]),e}();t.default=f});r(K0);var G0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,a,o,s=h(su),c=h(If),u=h(Cf),l=h(wf),f=h(md),p=h(q0),d=h(K0);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var m=LP.SparkPlugin.extend((r=(0,LP.waitForValue)("@"),n=(0,Zx.oneFlight)({keyFactory:function(e,t){return e+String(t&&t.create)}}),i=(0,LP.persist)("@"),a=(0,Zx.deprecated)("Use User#verify()"),v(o={namespace:"User",children:{batcher:p.default},props:{hasPassword:{default:!1,type:"boolean"}},session:{store:{default:function(){return new d.default},type:"any"}},activate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(t.verificationToken||t.confirmationCode&&t.id))return l.default.reject(new Error("either options.verificationToken is required or both options.confirmationCode and options.id are required"));if(this.spark.config.credentials.federation&&!t.email)return l.default.reject(new Error("email is required with federation option"));t.scope=this.spark.config.credentials.scope;var r=this.spark.config.credentials.federation&&t.email&&t.verificationToken;return this.getUserCI(t.email,r).then(function(){var r=(0,u.default)({},t);return delete r.email,e.request({uri:e.spark.config.credentials.activationUrl,method:"POST",body:r,auth:{user:e.spark.config.credentials.client_id,pass:e.spark.config.credentials.client_secret,sendImmediately:!0}}).then(function(t){return e.spark.credentials.set({supertoken:t.body.tokenData}),t.body})})},asUUID:function(e,t){var r=this;if(!e)return l.default.reject(new Error("`user` is required"));if((0,f.default)(e))return l.default.all(e.map(function(e){return r.asUUID(e,t)}));var n=this._extractUUID(e);if((!t||!t.force)&&Zx.patterns.uuid.test(n))return l.default.resolve(n);var i=this._extractEmailAddress(e);return Zx.patterns.email.test(i)?this.getUUID(i,t):l.default.reject(new Error("Provided user object does not appear to identify a user"))},fetchUUID:function(e,t){var r=this;return this.batcher.request({email:e,create:t&&t.create}).then(function(t){return r.recordUUID((0,u.default)({emailAddress:e},t)).then(function(){return t.id})})},get:function(){var e=this;return this.request({service:"conversation",resource:"users"}).then(function(e){return e.body}).then((0,Zx.tap)(function(t){return e.recordUUID({id:t.id,emailAddress:t.email||t.emailAddress})}))},getUUID:function(e,t){var r=this;return this.store.getByEmail(e).then(function(e){return t&&t.create&&!e.userExists?l.default.reject(new Error("User for specified email cannot be confirmed to exist")):e.id?e.id:l.default.reject(new Error("No id recorded for specified user"))}).catch(function(){return r.fetchUUID(e,t)})},initialize:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,c.default)(LP.SparkPlugin.prototype.initialize,this,t)},recordUUID:function(e){return e?e.id?Zx.patterns.uuid.test(e.id)?e.emailAddress?Zx.patterns.email.test(e.emailAddress)?this.store.add(e):l.default.reject(new Error("`user.emailAddress` must be an email address")):l.default.reject(new Error("`user.emailAddress` is required")):l.default.reject(new Error("`user.id` must be a uuid")):l.default.reject(new Error("`user.id` is required")):l.default.reject(new Error("`user` is required"))},register:function(){return this.verify.apply(this,arguments)},setPassword:function(e){var t=this;return(e=e||{}).password?this.spark.config.credentials.federation&&!e.email?l.default.reject(new Error("email is required with federation option")):this.getUserCI(e.email,this.spark.config.credentials.federation).then(function(){return t.spark.credentials.getUserToken()}).then(function(r){return t.request({uri:t.spark.config.credentials.setPasswordUrl+"/"+t.spark.internal.device.userId,method:"PATCH",headers:{authorization:r.toString()},body:{schemas:["urn:scim:schemas:core:1.0","urn:scim:schemas:extension:cisco:commonidentity:1.0"],password:e.password}})}).then(function(e){return t.hasPassword=!0,e.body}):l.default.reject(new Error("`options.password` is required"))},update:function(e){return(e=e||{}).displayName?this.request({method:"PATCH",service:"conversation",resource:"users/user",body:e}).then(function(e){return e.body}):l.default.reject(new Error("`options.displayName` is required"))},verify:function(e){var t=this;if(!(e=(0,u.default)({},this.config.verifyDefaults,e)).email)return l.default.reject(new Error("`options.email` is required"));var r=this.spark.config.credentials.identity.url,n=this.spark.config.credentials.idbroker.url;return this.spark.config.credentials.federation&&(this.spark.config.credentials.idbroker.url=this.spark.config.credentials.idbroker.defaultUrl,this.spark.config.credentials.identity.url=this.spark.config.credentials.identity.defaultUrl),this.spark.credentials.getUserToken().catch(function(){return t.spark.credentials.getClientToken()}).then(function(r){return t.request({service:"atlas",resource:"users/activations",method:"POST",headers:{authorization:r.toString(),"x-prelogin-userid":e.preloginId},body:e,shouldRefreshAccessToken:!1})}).then(function(e){return(e.body.hasPassword||e.body.sso)&&(t.hasPassword=!0),t.spark.config.credentials.federation&&e.body.userEntities&&(t.spark.config.credentials.idbroker.url=e.body.userEntities.idBrokerUrl,t.spark.config.credentials.identity.url=e.body.userEntities.identityUrl),e.body}).catch(function(e){return t.spark.config.credentials.federation&&(t.spark.config.credentials.idbroker.url=n,t.spark.config.credentials.identity.url=r),l.default.reject(e)})},getUserCI:function(e,t){if(t){var r={email:e,suppressEmail:!0};return this.verify(r).then(function(e){return l.default.resolve(e.userEntities)})}return l.default.resolve({idBrokerUrl:this.spark.config.credentials.idbroker.url,identityUrl:this.spark.config.credentials.identity.url})},_extractUUID:function(e){return e.entryUUID||e.id||e},_extractEmailAddress:function(e){return e.email||e.emailAddress||e.entryEmail||e},version:"1.50.15"},"activate",[r],(0,s.default)(o,"activate"),o),v(o,"getUUID",[n],(0,s.default)(o,"getUUID"),o),v(o,"initialize",[i],(0,s.default)(o,"initialize"),o),v(o,"register",[a],(0,s.default)(o,"register"),o),o));t.default=m});r(G0);var H0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={device:{preDiscoveryServices:{atlasServiceUrl:Tc.env.ATLAS_SERVICE_URL||"https://atlas-a.wbx2.com/admin/api/v1",atlas:Tc.env.ATLAS_SERVICE_URL||"https://atlas-a.wbx2.com/admin/api/v1"}},user:{batcherWait:100,batcherMaxCalls:100,batcherMaxWait:1500,verifyDefaults:{reqId:"WEBCLIENT"}}}});r(H0),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(G0).default}});var r=i(G0),n=i(H0);function i(e){return e&&e.__esModule?e:{default:e}}(0,LP.registerInternalPlugin)("user",r.default,{config:n.default})}));var W0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=wf)&&r.__esModule?r:{default:r};t.escape=function(e){return new n.default(function(t){return t(a(e))})},t.escapeSync=a;var i=/(<|>|&)/g;function a(e){return e.replace(i,o)}function o(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}}});r(W0);W0.escape,W0.escapeSync;var $0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.filterEscapeSync=t.filterEscape=t.filterSync=t.filter=t.escapeSync=t.escape=void 0;var r=c(eC),n=c(wf),i=c(rB),a=c(SC),o=c(Ik),s=c(aT);function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e.remove)e.remove();else if(e.parentElement)e.parentElement.removeChild(e);else{if(!("length"in e))throw new Error("Could not find a way to remove node");for(var t=e.length-1;t>=0;t-=1)u(e[t])}}Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return W0.escape}}),Object.defineProperty(t,"escapeSync",{enumerable:!0,get:function(){return W0.escapeSync}});t.filter=(0,s.default)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new n.default(function(e){e(l.apply(void 0,t))})},4);function l(e,t,n,i){if(!i||!n||!t){if(0===i.length)return i;throw new Error("`allowedTags`, `allowedStyles`, and `html` must be provided")}var s=(new DOMParser).parseFromString(i,"text/html");return m(s.body.childNodes,function e(i){if(!g(i))return;var s=i.nodeName.toLowerCase();var c=(0,r.default)(t);m(i.childNodes,e);if((0,a.default)(c,s)){var u=t[s];(0,o.default)(v(i.attributes),function(e){if((0,a.default)(u,e)){if("href"===e||"src"===e){var t=i.attributes.getNamedItem(e).value.trim().toLowerCase();0!==t.indexOf("javascript:")&&0!==t.indexOf("vbscript:")||h(i)}else if("style"===e){var r=i.attributes.getNamedItem("style").value.split(";").map(function(e){var t=d(e.split(":")[0]);return(0,a.default)(n,t)?e:null}).filter(function(e){return Boolean(e)}).join(";");i.setAttribute("style",r)}}else i.removeAttribute(e)})}else h(i)}),e(s.body),1===i.indexOf("body")?"<body>"+s.body.innerHTML+"</body>":s.body.innerHTML}function f(e,t,n,i){if(!i||!n||!t){if(0===i.length)return i;throw new Error("`allowedTags`, `allowedStyles`, and `html` must be provided")}var s=(new DOMParser).parseFromString(i,"text/html");return m(s.body.childNodes,function e(i){if(!g(i))return;m(i.childNodes,e);var s=i.nodeName.toLowerCase();var c=(0,r.default)(t);if((0,a.default)(c,s)){var l=t[s];(0,o.default)(v(i.attributes),function(e){if((0,a.default)(l,e)){if("href"===e||"src"===e){var t=i.attributes.getNamedItem(e).value.toLowerCase();0!==t.indexOf("javascript:")&&0!==t.indexOf("vbscript:")||h(i)}else if("style"===e){var r=i.attributes.getNamedItem("style").value.split(";").map(function(e){var t=d(e.split(":")[0]);return(0,a.default)(n,t)?e:null}).filter(function(e){return Boolean(e)}).join(";");i.setAttribute("style",r)}}else i.removeAttribute(e)})}else!function(e){var t=document.createTextNode("<"+e.nodeName.toLowerCase()+">"),r=document.createTextNode("</"+e.nodeName.toLowerCase()+">");e.parentNode.insertBefore(t,e);for(;e.childNodes.length>0;)e.parentNode.insertBefore(e.childNodes[0],e);e.parentNode.insertBefore(r,e),u(e)}(i)}),e(s.body),1===i.indexOf("body")?"<body>"+s.body.innerHTML+"</body>":s.body.innerHTML}var p=/^\s|\s$/g;function d(e){return e.replace(p,"")}function h(e){for(;e.childNodes.length>0;)e.parentNode.insertBefore(e.childNodes[0],e);u(e)}function v(e){return(0,i.default)(e,function(e,t){return e.push(t.name),e},[])}function m(e,t){for(var r=e.length;r>=0;r-=1)t(e[r])}function g(e){return!!e&&(void 0!==e.ownerDocument&&(1===e.nodeType&&"string"==typeof e.nodeName))}t.filterSync=(0,s.default)(l,4),t.filterEscape=(0,s.default)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new n.default(function(e){e(f.apply(void 0,t))})},4),t.filterEscapeSync=(0,s.default)(f,4)});r($0);$0.filterEscapeSync,$0.filterEscape,$0.filterSync,$0.filter,$0.escapeSync,$0.escape;var Y0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return $0.escape}}),Object.defineProperty(t,"escapeSync",{enumerable:!0,get:function(){return $0.escapeSync}}),Object.defineProperty(t,"filter",{enumerable:!0,get:function(){return $0.filter}}),Object.defineProperty(t,"filterSync",{enumerable:!0,get:function(){return $0.filterSync}}),Object.defineProperty(t,"filterEscape",{enumerable:!0,get:function(){return $0.filterEscape}}),Object.defineProperty(t,"filterEscapeSync",{enumerable:!0,get:function(){return $0.filterEscapeSync}})});r(Y0);var J0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={conversation:{allowedInboundTags:{"spark-mention":["data-object-type","data-object-id","data-object-url"]},allowedOutboundTags:{"spark-mention":["data-object-type","data-object-id","data-object-url"]},inboundProcessFunc:function(){},outboundProcessFunc:function(){},allowedInboundStyles:[],allowedOutboundStyles:[],thumbnailMaxHeight:960,thumbnailMaxWidth:640,keepEncryptedProperties:!1,decryptionFailureMessage:"This message cannot be decrypted"}}});r(J0);var Q0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(Cf),n=a(eC),i=a(vp);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){return(0,n.default)(t).map(function(n){var a=t[n];return(0,i.default)(a)?{name:n,direction:e,fn:a}:(0,r.default)({name:n},a)})}});r(Q0);var Z0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.transforms=void 0;var r=f(lu),n=f(wf),i=f(ow),a=f(md),o=f(mk),s=f(aP),c=f(aT),u=f(RM),l=f(Q0);function f(e){return e&&e.__esModule?e:{default:e}}var p=(0,i.default)("KEY"),d=(0,c.default)(function(e,t,r,n){return t.transform("encryptTextProp",e,r,n)});t.transforms=(0,l.default)("outbound",{encryptObject:function(e,t,r){return r||(r=t,t=void 0),r&&r.objectType?!1===t?n.default.resolve():e.transform("encrypt"+(0,u.default)(r.objectType),t,r):n.default.resolve()},encryptConversation:function(e,t,r){return!1===t?n.default.resolve():n.default.resolve(t||e.spark.internal.encryption.kms.createUnboundKeys({count:1})).then(function(i){var s=(0,a.default)(i)?i[0]:i;return(0,o.default)(r,"kmsMessage.keyUris")&&!r.kmsMessage.keyUris.includes(s.uri)&&r.kmsMessage.keyUris.push(s.uri),n.default.all([(0,o.default)(r,"activities.items")&&r.activities.items.reduce(function(t,r){return t.then(function(){return e.transform("encryptObject",s,r)})},n.default.resolve()),e.transform("encryptPropDisplayName",s,r)]).then(function(){r.encryptionKeyUrl=s.uri||s,t||(r.defaultActivityEncryptionKeyUrl=r.defaultActivityEncryptionKeyUrl||s.uri||s)})})},encryptActivity:function(e,t,r){return r.encryptionKeyUrl?n.default.resolve():e.transform("encrypt"+(0,u.default)(r.verb)+"Activity",t,r).then(function(){return t=t||r[p],e.transform("prepareActivityKmsMessage",t,r)})},encryptVerbActivity:function(e,t,r){return e.transform("maybeEncryptTarget",t,r).then(function(){t=t||r[p]}).then(function(){return e.transform("encryptObject",t,r.object)})},maybeEncryptTarget:function(e,t,r){if(t)return n.default.resolve();if((0,o.default)(r,"target.defaultActivityEncryptionKeyUrl")&&(0,o.default)(r,"target.kmsResourceObjectUrl"))return r[p]=t||r.target.defaultActivityEncryptionKeyUrl,n.default.resolve();var i=r.target&&r.target.url;return i?e.spark.internal.conversation.get({url:i}).then(function(t){return t.defaultActivityEncryptionKeyUrl?(r.target.defaultActivityEncryptionKeyUrl||e.spark.logger.warn("plugin-conversation: downloaded conversation to determine its defaultActivityEncryptionKeyUrl; make sure to pass all encryption related properties when calling Spark.conversation methods."),r.target.kmsResourceObjectUrl||e.spark.logger.warn("plugin-conversation: downloaded conversation to determine its kmsResourceObjectUrl; make sure to pass all encryption related properties when calling Spark.conversation methods."),r[p]=r.target.defaultActivityEncryptionKeyUrl=t.defaultActivityEncryptionKeyUrl,r.target.kmsResourceObjectUrl=t.kmsResourceObjectUrl,n.default.resolve()):e.spark.internal.conversation.updateKey(t).then(function(e){r.target.kmsResourceObjectUrl=e.kmsMessage.resource.uri,r[p]=r.target.defaultActivityEncryptionKeyUrl=e.object.defaultActivityEncryptionKeyUrl})}):n.default.reject(new Error("Cannot determine encryption key for activity's conversation; no key url or conversation url provided"))},prepareActivityKmsMessage:function(e,t,n){if(n.kmsMessage)if(!t&&"updateKey"===n.verb&&(0,o.default)(n,"object.defaultActivityEncryptionKeyUrl")&&(t=(0,s.default)(n,"object.defaultActivityEncryptionKeyUrl")),!t&&"leave"===n.verb&&(0,o.default)(n,"target.defaultActivityEncryptionKeyUrl")&&(t=(0,s.default)(n,"target.defaultActivityEncryptionKeyUrl")),t){var i=n.target.kmsResourceObjectUrl;["uri","resourceUri"].forEach(function(e){if(n.kmsMessage[e]&&!i&&n.kmsMessage[e].includes("<KRO>"))throw new Error("encrypter: cannot determine kro");n.kmsMessage[e]&&(n.kmsMessage[e]=n.kmsMessage[e].replace("<KRO>",i),n.kmsMessage[e]=n.kmsMessage[e].replace("<KEYURL>",t.keyUrl||t))})}else(0,r.default)(n,"kmsMessage")},encryptVerbActivityWithKey:{direction:"outbound",fn:function(e,t,r){return e.transform("encryptVerbActivity",t,r).then(function(){t=t||r[p],r.encryptionKeyUrl=t.uri||t})}},encryptAddActivity:{direction:"outbound",alias:"encryptVerbActivity"},encryptAssignActivity:{direction:"outbound",alias:"encryptVerbActivityWithKey"},encryptCreateActivity:{direction:"outbound",alias:"encryptVerbActivity"},encryptPostActivity:{direction:"outbound",alias:"encryptVerbActivityWithKey"},encryptShareActivity:{direction:"outbound",alias:"encryptVerbActivityWithKey"},encryptUpdateActivity:{direction:"outbound",alias:"encryptVerbActivityWithKey"},encryptUpdateKeyActivity:{direction:"outbound",alias:"encryptVerbActivity"},encryptComment:function(e,t,r){return n.default.all([e.transform("encryptPropDisplayName",t,r),e.transform("encryptPropContent",t,r)])},encryptContent:function(e,t,r){var i=r.files.items.map(function(r){return e.transform("encryptObject",t,r)});return i.push(e.transform("encryptPropContent",t,r)),i.push(e.transform("encryptPropDisplayName",t,r)),n.default.all(i)},encryptFile:function(e,t,r){return r.image&&!r.image.scr?n.default.reject(new Error("`file.image` must have an `scr`")):n.default.all([e.transform("encryptPropScr",t,r),e.transform("encryptPropDisplayName",t,r),e.transform("encryptPropContent",t,r),r.image&&e.transform("encryptPropScr",t,r.image)])},encryptImageURI:function(e,t,r){return e.transform("encryptPropLocation",t,r)},encryptPropContent:d("content"),encryptPropDisplayName:d("displayName"),encryptPropLocation:d("location"),encryptPropScr:function(e,t,r){return r.scr?e.spark.internal.encryption.encryptScr(t,r.scr).then(function(e){r.scr=e}):n.default.resolve()},encryptTextProp:function(e,t,r,i){return i[t]?e.spark.internal.encryption.encryptText(r.uri||r,i[t]).then(function(e){i[t]=e}):n.default.resolve()}})});r(Z0);Z0.transforms;var X0=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.transforms=void 0;var r=s(wf),n=s(aT),i=s(RM),a=s(oN),o=s(Q0);function s(e){return e&&e.__esModule?e:{default:e}}var c=(0,n.default)(function(e,t,r,n){return t.transform("decryptTextProp",e,r,n)});t.transforms=(0,o.default)("inbound",{decryptObject:function(e,t,n){return n||(n=t,t=void 0),n&&n.objectType?(!t&&n.encryptionKeyUrl&&(t=n.encryptionKeyUrl),"transcodedContent"===n.objectType?r.default.all(n.files.items.map(function(r){return e.transform("decryptFile",t,r)})):e.transform("decrypt"+(0,i.default)(n.objectType),t,n)):r.default.resolve()},decryptConversation:function(e,t,n){var i=[];n.activities.items&&i.push(r.default.all(n.activities.items.map(function(t){return e.transform("decryptObject",null,t)})));var a=n.encryptionKeyUrl||t,o=e.spark.internal.conversation.config.decryptionFailureMessage;return a&&(i.push(e.transform("decryptPropDisplayName",a,n).catch(function(t){e.spark.logger.warn("plugin-conversation: failed to decrypt display name of ",n.url,t),r.default.resolve(o)})),i.push(e.transform("decryptPropContent",a,n))),n.avatarEncryptionKeyUrl&&i.push(e.transform("decryptObject",n.avatarEncryptionKeyUrl,n.avatar)),r.default.all(i)},decryptActivity:function(e,t,n){if(!(n.encryptionKeyUrl||n.object&&n.object.encryptionKeyUrl))return r.default.resolve(n);var i=n.encryptionKeyUrl||n.object.encryptionKeyUrl||t;return e.transform("decryptObject",i,n.object)},decryptMicroappinstance:function(e,t,r){return e.transform("decryptPropModel",t,r)},decryptComment:function(e,t,n){return r.default.all([e.transform("decryptPropDisplayName",t,n),e.transform("decryptPropContent",t,n)])},decryptContent:function(e,t,r){return"links"===r.contentCategory?e.transform("decryptContentLinks",t,r):e.transform("decryptContentFiles",t,r)},decryptContentFiles:function(e,t,n){if(!n.files||!n.files.items||!Array.isArray(n.files.items))return r.default.resolve();var i=n.files.items.map(function(r){return e.transform("decryptObject",t,r)});return i.push(e.transform("decryptComment",t,n)),n.links&&n.links.items&&Array.isArray(n.links.items)&&n.links.items.forEach(function(r){return i.push(e.transform("decryptObject",t,r))}),r.default.all(i)},decryptContentLinks:function(e,t,n){if(!n.links||!n.links.items||!Array.isArray(n.links.items))return r.default.resolve();var i=n.links.items.map(function(r){return e.transform("decryptObject",t,r)});return i.push(e.transform("decryptComment",t,n)),r.default.all(i)},decryptEvent:function(e,t,n){var i=[e.transform("decryptPropDisplayName",t,n)];return n.location&&5===n.location.split(".").length&&i.push(e.transform("decryptPropLocation",t,n)),r.default.all(i)},decryptFile:function(e,t,n){return r.default.all([n.transcodedCollection&&r.default.all(n.transcodedCollection.items.map(function(r){return e.transform("decryptObject",t,r)})),e.transform("decryptPropScr",t,n),e.transform("decryptPropDisplayName",t,n),e.transform("decryptPropContent",t,n),n.image&&e.transform("decryptPropScr",t,n.image)])},decryptLink:function(e,t,n){return r.default.all([e.transform("decryptPropSslr",t,n),e.transform("decryptPropDisplayName",t,n)])},decryptTranscodedContent:function(e,t,n){return r.default.all(n.files.items.map(function(r){return e.transform("decryptFile",t,r)}))},decryptImageURI:function(e,t,r){return e.transform("decryptPropLocation",t,r)},decryptTextProp:function(e,t,n,i){if(!i[t])return r.default.resolve();var o=e.spark.internal.conversation.config.decryptionFailureMessage;return e.spark.internal.encryption.decryptText(n,i[t]).then(function(r){if(e.spark.config.conversation.keepEncryptedProperties){var n=(0,a.default)("encrypted_"+t);i[n]=i[t]}i[t]=r}).catch(function(n){return e.spark.logger.warn("plugin-conversation: failed to decrypt "+t+" ",n),i[t]=o,r.default.resolve(o)})},decryptPropScr:function(e,t,r){return e.spark.internal.encryption.decryptScr(t,r.scr).then(function(e){r.scr=e})},decryptPropSslr:function(e,t,r){return e.spark.internal.encryption.decryptScr(t,r.sslr).then(function(e){r.sslr=e})},decryptPropDisplayName:c("displayName"),decryptPropContent:c("content"),decryptPropModel:c("model"),decryptPropLocation:c("location")})});r(X0);X0.transforms;var e1=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidUserCreation=t.ConversationError=t.ShareActivity=t.default=void 0;var r=u(lu),n=u(wf),i=u(mk),a=u(aP),o=u(RM);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u(SF).default}}),Object.defineProperty(t,"ShareActivity",{enumerable:!0,get:function(){return u(EF).default}}),Object.defineProperty(t,"ConversationError",{enumerable:!0,get:function(){return _F.ConversationError}}),Object.defineProperty(t,"InvalidUserCreation",{enumerable:!0,get:function(){return _F.InvalidUserCreation}});var s=u(SF),c=u(J0);function u(e){return e&&e.__esModule?e:{default:e}}(0,LP.registerInternalPlugin)("conversation",s.default,{payloadTransformer:{predicates:[{name:"transformObject",test:function(e,t){return n.default.resolve((0,i.default)(t,"body.objectType"))},extract:function(e){return n.default.resolve(e.body)}},{name:"transformObject",direction:"inbound",test:function(e,t){return n.default.resolve((0,i.default)(t,"activity"))},extract:function(e){return n.default.resolve(e.activity)}},{name:"normalizeConversationListAndBindDecrypters",direction:"inbound",test:function(e,t){return(0,i.default)(t,"body.items[0].objectType")&&(0,a.default)(t,"options.deferDecrypt")?n.default.resolve(!0):n.default.resolve(!1)},extract:function(e){return n.default.resolve(e.body.items)}},{name:"transformObjectArray",direction:"inbound",test:function(e,t){return(0,i.default)(t,"body.items[0].objectType")?(0,a.default)(t,"options.deferDecrypt")?n.default.resolve(!1):n.default.resolve(!0):n.default.resolve(!1)},extract:function(e){return n.default.resolve(e.body.items)}}],transforms:[{name:"normalizeConversationListAndBindDecrypters",fn:function(e,t){return n.default.all(t.map(function(t){return e.transform("normalizeObject",t).then(function(){return t.decrypt=function(){return(0,r.default)(t,"decrypt"),e.transform("decryptObject",t)},t})}))}},{name:"transformObjectArray",fn:function(e,t){return n.default.all(t.map(function(t){return e.transform("transformObject",t)}))}},{name:"transformObject",direction:"outbound",fn:function(e,t){return t&&t.objectType?e.transform("normalizeObject",t).then(function(){return e.transform("encryptObject",t)}).then(function(){return e.transform("encryptKmsMessage",t)}):n.default.resolve()}},{name:"transformObject",direction:"inbound",fn:function(e,t){return t&&t.objectType?e.transform("decryptObject",t).then(function(){return e.transform("normalizeObject",t)}):n.default.resolve()}},{name:"normalizeObject",fn:function(e,t){return t&&t.objectType?n.default.all([e.transform("normalize"+(0,o.default)(t.objectType),t),e.transform("normalizePropContent",t)]):n.default.resolve()}},{name:"normalizePropContent",direction:"inbound",fn:function(e,t){if(!t.content)return n.default.resolve();var r=e.spark.config.conversation,i=r.inboundProcessFunc,a=r.allowedInboundTags,o=r.allowedInboundStyles;return(0,Y0.filter)(i,a||{},o,t.content).then(function(e){t.content=e})}},{name:"normalizePropContent",direction:"outbound",fn:function(e,t){if(!t.content)return n.default.resolve();var r=e.spark.config.conversation,i=r.outboundProcessFunc,a=r.allowedOutboundTags,o=r.allowedOutboundStyles;return(0,Y0.filterEscape)(i,a||{},o,t.content).then(function(e){t.content=e})}},{name:"normalizeConversation",fn:function(e,t){return t.activities=t.activities||{},t.activities.items=t.activities.items||[],t.participants=t.participants||{},t.participants.items=t.participants.items||[],n.default.all([n.default.all(t.activities.items.map(function(t){return e.transform("normalizeObject",t)})),n.default.all(t.participants.items.map(function(t){return e.transform("normalizeObject",t)}))])}},{name:"normalizeActivity",fn:function(e,t){return n.default.all([e.transform("normalizeObject",t.actor),e.transform("normalizeObject",t.object),e.transform("normalizeObject",t.target)])}},{name:"normalizePerson",fn:function(e,t){var i=t.entryEmail||t.emailAddress||t.id,a=t.entryUUID||t.id;return Zx.patterns.email.test(i)?t.entryEmail=t.emailAddress=i.toLowerCase():((0,r.default)(t,"entryEmail"),(0,r.default)(t,"emailAddress")),t.roomProperties&&(t.roomProperties.isModerator=Boolean(t.roomProperties.isModerator)),Zx.patterns.uuid.test(a)?(t.entryUUID=t.id=a.toLowerCase(),n.default.resolve(t)):i?e.spark.internal.user.asUUID(i).then(function(e){return t.entryUUID=t.id=e,t}):n.default.reject(new Error("cannot determine id without an `emailAddress` or `entryUUID` property"))}}].concat(X0.transforms).concat(Z0.transforms)},config:c.default})});r(e1);e1.InvalidUserCreation,e1.ConversationError,e1.ShareActivity;var t1=1e3,r1=60*t1,n1=60*r1,i1=24*n1,a1=7*i1,o1=365.25*i1,s1=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*o1;case"weeks":case"week":case"w":return r*a1;case"days":case"day":case"d":return r*i1;case"hours":case"hour":case"hrs":case"hr":case"h":return r*n1;case"minutes":case"minute":case"mins":case"min":case"m":return r*r1;case"seconds":case"second":case"secs":case"sec":case"s":return r*t1;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&!1===isNaN(e))return t.long?function(e){var t=Math.abs(e);if(t>=i1)return c1(e,t,i1,"day");if(t>=n1)return c1(e,t,n1,"hour");if(t>=r1)return c1(e,t,r1,"minute");if(t>=t1)return c1(e,t,t1,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=i1)return Math.round(e/i1)+"d";if(t>=n1)return Math.round(e/n1)+"h";if(t>=r1)return Math.round(e/r1)+"m";if(t>=t1)return Math.round(e/t1)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function c1(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}var u1=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var a;function o(){if(o.enabled){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=o,s=Number(new Date),c=s-(a||s);i.diff=c,i.prev=a,i.curr=s,a=s,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return e;u++;var a=r.formatters[n];if("function"==typeof a){var o=t[u];e=a.call(i,o),t.splice(u,1),u--}return e}),r.formatArgs.call(i,t),(i.log||r.log).apply(i,t)}}return o.namespace=e,o.enabled=r.enabled(e),o.useColors=r.useColors(),o.color=t(e),o.destroy=n,o.extend=i,"function"==typeof r.init&&r.init(o),r.instances.push(o),o}function n(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var a=r.instances[t];a.enabled=r.enabled(a.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=s1,Object.keys(e).forEach(function(t){r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r},l1=n(function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==Tc&&"env"in Tc&&(e=Tc.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=u1(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),f1=(l1.log,l1.formatArgs,l1.save,l1.load,l1.useColors,l1.storage,l1.colors,n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s($k),n=s(lu),i=s(Rf),a=s(If),o=s(md);function s(e){return e&&e.__esModule?e:{default:e}}var c=l1("messages"),u=LP.SparkPlugin.extend({initialize:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];(0,a.default)(LP.SparkPlugin.prototype.initialize,this,t)},listen:function(){var e=this;return this.spark.internal.mercury.connect().then(function(){return e.listenTo(e.spark.internal.mercury,"event:conversation.activity",function(t){return e.onConversationActivityEvent(t)})})},onConversationActivityEvent:function(e){var t=e.data.activity;if(t.type!==Zx.API_ACTIVITY_TYPE.REPLY)switch(t.verb){case Zx.API_ACTIVITY_VERB.SHARE:case Zx.API_ACTIVITY_VERB.POST:var r=this.createMessagesEventData(t);c('messages "created" payload: '+(0,i.default)(r)),this.trigger("created",r)}},createMessagesEventData:function(e){return{id:(0,Zx.constructHydraId)(Zx.hydraTypes.MESSAGE,e.id),roomId:(0,Zx.constructHydraId)(Zx.hydraTypes.ROOM,e.target.id),roomType:e.target.tags.includes("ONE_ON_ONE")?"direct":"group",text:e.object.displayName,personId:(0,Zx.constructHydraId)(Zx.hydraTypes.PEOPLE,e.actor.id),personEmail:e.actor.emailAddress||e.actor.entryEmail,created:e.published}},create:function(e){var t="body";e.file&&(this.logger.warn("Supplying a single `file` property is deprecated; please supply a `files` array"),e.files=[e.file],(0,n.default)(e,"file")),(0,o.default)(e.files)&&e.files.reduce(function(e,t){return e||"string"!=typeof t},!1)&&(t="formData");var i=(0,r.default)({method:"POST",service:"hydra",resource:"messages"},t,e);return this.request(i).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"messages/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"messages",qs:e}).then(function(e){return new LP.Page(e,t.spark)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"messages/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},version:"1.50.15"});t.default=u}));r(f1),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=f1)&&r.__esModule?r:{default:r};(0,LP.registerPlugin)("messages",n.default),t.default=n.default}));var p1=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=LP.SparkPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"memberships",body:e}).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"memberships/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"memberships",qs:e}).then(function(e){return new LP.Page(e,t.spark)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"memberships/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id||e;return this.request({method:"PUT",service:"hydra",resource:"memberships/"+t,body:e}).then(function(e){return e.body})},version:"1.50.15"});t.default=r});r(p1),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=p1)&&r.__esModule?r:{default:r};(0,LP.registerPlugin)("memberships",n.default),t.default=n.default}));var d1=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=LP.SparkPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"rooms",body:e}).then(function(e){return e.body})},get:function(e,t){var r=e.id||e;return this.request({service:"hydra",resource:"rooms/"+r,qs:t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"rooms/",qs:e}).then(function(e){return new LP.Page(e,t.spark)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"rooms/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id;return this.request({method:"PUT",service:"hydra",resource:"rooms/"+t,body:e}).then(function(e){return e.body})},version:"1.50.15"});t.default=r});r(d1),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=d1)&&r.__esModule?r:{default:r};(0,LP.registerPlugin)("rooms",n.default),t.default=n.default}));var h1=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=LP.SparkPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"teams",body:e}).then(function(e){return e.body})},get:function(e,t){var r=e.id||e;return this.request({service:"hydra",resource:"teams/"+r,qs:t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"teams/",qs:e}).then(function(e){return new LP.Page(e,t.spark)})},update:function(e){var t=e.id;return this.request({method:"PUT",service:"hydra",resource:"teams/"+t,body:e}).then(function(e){return e.body})},version:"1.50.15"});t.default=r});r(h1),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=h1)&&r.__esModule?r:{default:r};(0,LP.registerPlugin)("teams",n.default),t.default=n.default}));var v1=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=LP.SparkPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"team/memberships",body:e}).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"team/memberships/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"team/memberships",qs:e}).then(function(e){return new LP.Page(e,t.spark)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"team/memberships/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id||e;return this.request({method:"PUT",service:"hydra",resource:"team/memberships/"+t,body:e}).then(function(e){return e.body})},version:"1.50.15"});t.default=r});r(v1),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=v1)&&r.__esModule?r:{default:r};(0,LP.registerPlugin)("teamMemberships",n.default),t.default=n.default}));var m1=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=LP.SparkPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"webhooks",body:e}).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"webhooks/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"webhooks/",qs:e}).then(function(e){return new LP.Page(e,t.spark)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"webhooks/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id;return this.request({method:"PUT",service:"hydra",resource:"webhooks/"+t,body:e}).then(function(e){return e.body})},version:"1.50.15"});t.default=r});r(m1),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=m1)&&r.__esModule?r:{default:r};(0,LP.registerPlugin)("webhooks",n.default),t.default=n.default}));var g1=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(lu),n=c(wf),i=c(Rf),a=c(Gy),o=c(Yy),s=c(mb);function c(e){return e&&e.__esModule?e:{default:e}}var u=new s.default,l=new s.default,f=function(){function e(t){(0,a.default)(this,e),this.Bound=function(){function e(t,r){(0,a.default)(this,e),u.set(this,t),l.set(this,r.logger)}return(0,o.default)(e,[{key:"_getRawData",value:function(){var e=localStorage.getItem(t);return e?JSON.parse(e):{}}},{key:"_load",value:function(){return this._getRawData()[u.get(this)]||{}}},{key:"_save",value:function(e){var r=this._getRawData();r[u.get(this)]=e,localStorage.setItem(t,(0,i.default)(r))}},{key:"clear",value:function(){return l.get(this).info("local-storage-store-adapter: clearing localStorage"),n.default.resolve(localStorage.removeItem(t))}},{key:"del",value:function(e){var t=this;return new n.default(function(n){l.get(t).info("local-storage-store-adapter: deleting `"+e+"`");var i=t._load();(0,r.default)(i,e),t._save(i),n()})}},{key:"get",value:function(e){var t=this;return new n.default(function(r,n){l.get(t).info("local-storage-store-adapter: reading `"+e+"`");var i=t._load()[e];return void 0!==i?r(i):n(new LP.NotFoundError("No value found for "+e))})}},{key:"put",value:function(e,t){var r=this;return new n.default(function(n){l.get(r).info("local-storage-store-adapter: writing `"+e+"`");var i=r._load();i[e]=t,r._save(i),n()})}}]),e}()}return(0,o.default)(e,[{key:"bind",value:function(e,t){return t=t||{},e?t.logger?(t.logger.info("local-storage-store-adapter: returning binding"),n.default.resolve(new this.Bound(e,t))):n.default.reject(new Error("`options.logger` is required")):n.default.reject(new Error("`namespace` is required"))}}]),e}();t.default=f});r(g1);var y1=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=g1)&&r.__esModule?r:{default:r};t.default={boundedAdapter:new n.default("ciscospark"),unboundedAdapter:LP.MemoryStoreAdapter}});r(y1);var b1=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=y1)&&r.__esModule?r:{default:r};t.default={hydra:Tc.env.HYDRA_SERVICE_URL||"https://api.ciscospark.com/v1",hydraServiceUrl:Tc.env.HYDRA_SERVICE_URL||"https://api.ciscospark.com/v1",credentials:{clientType:"confidential"},device:{ephemeral:!0},storage:n.default}});r(b1);var w1=LP.default.extend({ciscospark:!0,version:"1.50.15"});w1.version="1.50.15",w1.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.config=iP({},b1,e.config),new w1(e)};var _1=w1;e._babelPolyfill;var E1=_1;return window.ciscospark=E1}();
