/*! Cisco Spark SDK v1.77.9 */
var Webex=function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}var i=n(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),a={}.hasOwnProperty,o=function(e,t){return a.call(e,t)},s=function(e){try{return!!e()}catch(e){return!0}},u=!s(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),c=n(function(e){var t=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=t)}),l=(c.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),f=function(e){if(!l(e))throw TypeError(e+" is not an object!");return e},d=i.document,p=l(d)&&l(d.createElement),h=function(e){return p?d.createElement(e):{}},v=!u&&!s(function(){return 7!=Object.defineProperty(h("div"),"a",{get:function(){return 7}}).a}),m=function(e,t){if(!l(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!l(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!l(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!l(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},g=Object.defineProperty,y={f:u?Object.defineProperty:function(e,t,r){if(f(e),t=m(t,!0),f(r),v)try{return g(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},E=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},b=u?function(e,t,r){return y.f(e,t,E(1,r))}:function(e,t,r){return e[t]=r,e},_=0,S=Math.random(),T=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++_+S).toString(36))},w=n(function(e){var t=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,r){return t[e]||(t[e]=void 0!==r?r:{})})("versions",[]).push({version:c.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),I=w("native-function-to-string",Function.toString),A=n(function(e){var t=T("src"),r=(""+I).split("toString");c.inspectSource=function(e){return I.call(e)},(e.exports=function(e,n,a,s){var u="function"==typeof a;u&&(o(a,"name")||b(a,"name",n)),e[n]!==a&&(u&&(o(a,t)||b(a,t,e[n]?""+e[n]:r.join(String(n)))),e===i?e[n]=a:s?e[n]?e[n]=a:b(e,n,a):(delete e[n],b(e,n,a)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[t]||I.call(this)})}),C=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},x=function(e,t,r){if(C(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},O=function(e,t,r){var n,a,o,s,u=e&O.F,l=e&O.G,f=e&O.S,d=e&O.P,p=e&O.B,h=l?i:f?i[t]||(i[t]={}):(i[t]||{}).prototype,v=l?c:c[t]||(c[t]={}),m=v.prototype||(v.prototype={});for(n in l&&(r=t),r)o=((a=!u&&h&&void 0!==h[n])?h:r)[n],s=p&&a?x(o,i):d&&"function"==typeof o?x(Function.call,o):o,h&&A(h,n,o,e&O.U),v[n]!=o&&b(v,n,s),d&&m[n]!=o&&(m[n]=o)};i.core=c,O.F=1,O.G=2,O.S=4,O.P=8,O.B=16,O.W=32,O.U=64,O.R=128;var R=O,N=n(function(e){var t=T("meta"),r=y.f,n=0,i=Object.isExtensible||function(){return!0},a=!s(function(){return i(Object.preventExtensions({}))}),u=function(e){r(e,t,{value:{i:"O"+ ++n,w:{}}})},c=e.exports={KEY:t,NEED:!1,fastKey:function(e,r){if(!l(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,t)){if(!i(e))return"F";if(!r)return"E";u(e)}return e[t].i},getWeak:function(e,r){if(!o(e,t)){if(!i(e))return!0;if(!r)return!1;u(e)}return e[t].w},onFreeze:function(e){return a&&c.NEED&&i(e)&&!o(e,t)&&u(e),e}}}),k=(N.KEY,N.NEED,N.fastKey,N.getWeak,N.onFreeze,n(function(e){var t=w("wks"),r=i.Symbol,n="function"==typeof r;(e.exports=function(e){return t[e]||(t[e]=n&&r[e]||(n?r:T)("Symbol."+e))}).store=t})),P=y.f,M=k("toStringTag"),D=function(e,t,r){e&&!o(e=r?e:e.prototype,M)&&P(e,M,{configurable:!0,value:t})},L={f:k},U=y.f,j=function(e){var t=c.Symbol||(c.Symbol=i.Symbol||{});"_"==e.charAt(0)||e in t||U(t,e,{value:L.f(e)})},F={}.toString,B=function(e){return F.call(e).slice(8,-1)},V=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==B(e)?e.split(""):Object(e)},G=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},q=function(e){return V(G(e))},K=Math.ceil,H=Math.floor,z=function(e){return isNaN(e=+e)?0:(e>0?H:K)(e)},W=Math.min,Y=function(e){return e>0?W(z(e),9007199254740991):0},X=Math.max,$=Math.min,Q=function(e,t){return(e=z(e))<0?X(e+t,0):$(e,t)},J=function(e){return function(t,r,n){var i,a=q(t),o=Y(a.length),s=Q(n,o);if(e&&r!=r){for(;o>s;)if((i=a[s++])!=i)return!0}else for(;o>s;s++)if((e||s in a)&&a[s]===r)return e||s||0;return!e&&-1}},Z=w("keys"),ee=function(e){return Z[e]||(Z[e]=T(e))},te=J(!1),re=ee("IE_PROTO"),ne=function(e,t){var r,n=q(e),i=0,a=[];for(r in n)r!=re&&o(n,r)&&a.push(r);for(;t.length>i;)o(n,r=t[i++])&&(~te(a,r)||a.push(r));return a},ie="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ae=Object.keys||function(e){return ne(e,ie)},oe={f:Object.getOwnPropertySymbols},se={f:{}.propertyIsEnumerable},ue=Array.isArray||function(e){return"Array"==B(e)},ce=function(e){return Object(G(e))},le=u?Object.defineProperties:function(e,t){f(e);for(var r,n=ae(t),i=n.length,a=0;i>a;)y.f(e,r=n[a++],t[r]);return e},fe=i.document,de=fe&&fe.documentElement,pe=ee("IE_PROTO"),he=function(){},ve=function(){var e,t=h("iframe"),r=ie.length;for(t.style.display="none",de.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),ve=e.F;r--;)delete ve.prototype[ie[r]];return ve()},me=Object.create||function(e,t){var r;return null!==e?(he.prototype=f(e),r=new he,he.prototype=null,r[pe]=e):r=ve(),void 0===t?r:le(r,t)},ge=ie.concat("length","prototype"),ye={f:Object.getOwnPropertyNames||function(e){return ne(e,ge)}},Ee=ye.f,be={}.toString,_e="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Se={f:function(e){return _e&&"[object Window]"==be.call(e)?function(e){try{return Ee(e)}catch(e){return _e.slice()}}(e):Ee(q(e))}},Te=Object.getOwnPropertyDescriptor,we={f:u?Te:function(e,t){if(e=q(e),t=m(t,!0),v)try{return Te(e,t)}catch(e){}if(o(e,t))return E(!se.f.call(e,t),e[t])}},Ie=N.KEY,Ae=we.f,Ce=y.f,xe=Se.f,Oe=i.Symbol,Re=i.JSON,Ne=Re&&Re.stringify,ke=k("_hidden"),Pe=k("toPrimitive"),Me={}.propertyIsEnumerable,De=w("symbol-registry"),Le=w("symbols"),Ue=w("op-symbols"),je=Object.prototype,Fe="function"==typeof Oe&&!!oe.f,Be=i.QObject,Ve=!Be||!Be.prototype||!Be.prototype.findChild,Ge=u&&s(function(){return 7!=me(Ce({},"a",{get:function(){return Ce(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=Ae(je,t);n&&delete je[t],Ce(e,t,r),n&&e!==je&&Ce(je,t,n)}:Ce,qe=function(e){var t=Le[e]=me(Oe.prototype);return t._k=e,t},Ke=Fe&&"symbol"==typeof Oe.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof Oe},He=function(e,t,r){return e===je&&He(Ue,t,r),f(e),t=m(t,!0),f(r),o(Le,t)?(r.enumerable?(o(e,ke)&&e[ke][t]&&(e[ke][t]=!1),r=me(r,{enumerable:E(0,!1)})):(o(e,ke)||Ce(e,ke,E(1,{})),e[ke][t]=!0),Ge(e,t,r)):Ce(e,t,r)},ze=function(e,t){f(e);for(var r,n=function(e){var t=ae(e),r=oe.f;if(r)for(var n,i=r(e),a=se.f,o=0;i.length>o;)a.call(e,n=i[o++])&&t.push(n);return t}(t=q(t)),i=0,a=n.length;a>i;)He(e,r=n[i++],t[r]);return e},We=function(e){var t=Me.call(this,e=m(e,!0));return!(this===je&&o(Le,e)&&!o(Ue,e))&&(!(t||!o(this,e)||!o(Le,e)||o(this,ke)&&this[ke][e])||t)},Ye=function(e,t){if(e=q(e),t=m(t,!0),e!==je||!o(Le,t)||o(Ue,t)){var r=Ae(e,t);return!r||!o(Le,t)||o(e,ke)&&e[ke][t]||(r.enumerable=!0),r}},Xe=function(e){for(var t,r=xe(q(e)),n=[],i=0;r.length>i;)o(Le,t=r[i++])||t==ke||t==Ie||n.push(t);return n},$e=function(e){for(var t,r=e===je,n=xe(r?Ue:q(e)),i=[],a=0;n.length>a;)!o(Le,t=n[a++])||r&&!o(je,t)||i.push(Le[t]);return i};Fe||(A((Oe=function(){if(this instanceof Oe)throw TypeError("Symbol is not a constructor!");var e=T(arguments.length>0?arguments[0]:void 0),t=function(r){this===je&&t.call(Ue,r),o(this,ke)&&o(this[ke],e)&&(this[ke][e]=!1),Ge(this,e,E(1,r))};return u&&Ve&&Ge(je,e,{configurable:!0,set:t}),qe(e)}).prototype,"toString",function(){return this._k}),we.f=Ye,y.f=He,ye.f=Se.f=Xe,se.f=We,oe.f=$e,u&&A(je,"propertyIsEnumerable",We,!0),L.f=function(e){return qe(k(e))}),R(R.G+R.W+R.F*!Fe,{Symbol:Oe});for(var Qe="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Je=0;Qe.length>Je;)k(Qe[Je++]);for(var Ze=ae(k.store),et=0;Ze.length>et;)j(Ze[et++]);R(R.S+R.F*!Fe,"Symbol",{for:function(e){return o(De,e+="")?De[e]:De[e]=Oe(e)},keyFor:function(e){if(!Ke(e))throw TypeError(e+" is not a symbol!");for(var t in De)if(De[t]===e)return t},useSetter:function(){Ve=!0},useSimple:function(){Ve=!1}}),R(R.S+R.F*!Fe,"Object",{create:function(e,t){return void 0===t?me(e):ze(me(e),t)},defineProperty:He,defineProperties:ze,getOwnPropertyDescriptor:Ye,getOwnPropertyNames:Xe,getOwnPropertySymbols:$e});var tt=s(function(){oe.f(1)});R(R.S+R.F*tt,"Object",{getOwnPropertySymbols:function(e){return oe.f(ce(e))}}),Re&&R(R.S+R.F*(!Fe||s(function(){var e=Oe();return"[null]"!=Ne([e])||"{}"!=Ne({a:e})||"{}"!=Ne(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(l(t)||void 0!==e)&&!Ke(e))return ue(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Ke(t))return t}),n[1]=t,Ne.apply(Re,n)}}),Oe.prototype[Pe]||b(Oe.prototype,Pe,Oe.prototype.valueOf),D(Oe,"Symbol"),D(Math,"Math",!0),D(i.JSON,"JSON",!0),R(R.S,"Object",{create:me}),R(R.S+R.F*!u,"Object",{defineProperty:y.f}),R(R.S+R.F*!u,"Object",{defineProperties:le});var rt=function(e,t){var r=(c.Object||{})[e]||Object[e],n={};n[e]=t(r),R(R.S+R.F*s(function(){r(1)}),"Object",n)},nt=we.f;rt("getOwnPropertyDescriptor",function(){return function(e,t){return nt(q(e),t)}});var it=ee("IE_PROTO"),at=Object.prototype,ot=Object.getPrototypeOf||function(e){return e=ce(e),o(e,it)?e[it]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?at:null};rt("getPrototypeOf",function(){return function(e){return ot(ce(e))}}),rt("keys",function(){return function(e){return ae(ce(e))}}),rt("getOwnPropertyNames",function(){return Se.f});var st=N.onFreeze;rt("freeze",function(e){return function(t){return e&&l(t)?e(st(t)):t}});var ut=N.onFreeze;rt("seal",function(e){return function(t){return e&&l(t)?e(ut(t)):t}});var ct=N.onFreeze;rt("preventExtensions",function(e){return function(t){return e&&l(t)?e(ct(t)):t}}),rt("isFrozen",function(e){return function(t){return!l(t)||!!e&&e(t)}}),rt("isSealed",function(e){return function(t){return!l(t)||!!e&&e(t)}}),rt("isExtensible",function(e){return function(t){return!!l(t)&&(!e||e(t))}});var lt=Object.assign,ft=!lt||s(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=lt({},e)[r]||Object.keys(lt({},t)).join("")!=n})?function(e,t){for(var r=ce(e),n=arguments.length,i=1,a=oe.f,o=se.f;n>i;)for(var s,c=V(arguments[i++]),l=a?ae(c).concat(a(c)):ae(c),f=l.length,d=0;f>d;)s=l[d++],u&&!o.call(c,s)||(r[s]=c[s]);return r}:lt;R(R.S+R.F,"Object",{assign:ft});var dt=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};R(R.S,"Object",{is:dt});var pt=function(e,t){if(f(e),!l(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},ht={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=x(Function.call,we.f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return pt(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:pt};R(R.S,"Object",{setPrototypeOf:ht.set});var vt=k("toStringTag"),mt="Arguments"==B(function(){return arguments}()),gt=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),vt))?r:mt?B(t):"Object"==(n=B(t))&&"function"==typeof t.callee?"Arguments":n},yt={};yt[k("toStringTag")]="z",yt+""!="[object z]"&&A(Object.prototype,"toString",function(){return"[object "+gt(this)+"]"},!0);var Et=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)},bt=[].slice,_t={},St=Function.bind||function(e){var t=C(this),r=bt.call(arguments,1),n=function(){var i=r.concat(bt.call(arguments));return this instanceof n?function(e,t,r){if(!(t in _t)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";_t[t]=Function("F,a","return new F("+n.join(",")+")")}return _t[t](e,r)}(t,i.length,i):Et(t,i,e)};return l(t.prototype)&&(n.prototype=t.prototype),n};R(R.P,"Function",{bind:St});var Tt=y.f,wt=Function.prototype,It=/^\s*function ([^ (]*)/;"name"in wt||u&&Tt(wt,"name",{configurable:!0,get:function(){try{return(""+this).match(It)[1]}catch(e){return""}}});var At=k("hasInstance"),Ct=Function.prototype;At in Ct||y.f(Ct,At,{value:function(e){if("function"!=typeof this||!l(e))return!1;if(!l(this.prototype))return e instanceof this;for(;e=ot(e);)if(this.prototype===e)return!0;return!1}});var xt="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Ot="["+xt+"]",Rt=RegExp("^"+Ot+Ot+"*"),Nt=RegExp(Ot+Ot+"*$"),kt=function(e,t,r){var n={},i=s(function(){return!!xt[e]()||"​"!="​"[e]()}),a=n[e]=i?t(Pt):xt[e];r&&(n[r]=a),R(R.P+R.F*i,"String",n)},Pt=kt.trim=function(e,t){return e=String(G(e)),1&t&&(e=e.replace(Rt,"")),2&t&&(e=e.replace(Nt,"")),e},Mt=kt,Dt=i.parseInt,Lt=Mt.trim,Ut=/^[-+]?0[xX]/,jt=8!==Dt(xt+"08")||22!==Dt(xt+"0x16")?function(e,t){var r=Lt(String(e),3);return Dt(r,t>>>0||(Ut.test(r)?16:10))}:Dt;R(R.G+R.F*(parseInt!=jt),{parseInt:jt});var Ft=i.parseFloat,Bt=Mt.trim,Vt=1/Ft(xt+"-0")!=-1/0?function(e){var t=Bt(String(e),3),r=Ft(t);return 0===r&&"-"==t.charAt(0)?-0:r}:Ft;R(R.G+R.F*(parseFloat!=Vt),{parseFloat:Vt});var Gt=ht.set,qt=function(e,t,r){var n,i=t.constructor;return i!==r&&"function"==typeof i&&(n=i.prototype)!==r.prototype&&l(n)&&Gt&&Gt(e,n),e},Kt=ye.f,Ht=we.f,zt=y.f,Wt=Mt.trim,Yt=i.Number,Xt=Yt,$t=Yt.prototype,Qt="Number"==B(me($t)),Jt="trim"in String.prototype,Zt=function(e){var t=m(e,!1);if("string"==typeof t&&t.length>2){var r,n,i,a=(t=Jt?t.trim():Wt(t,3)).charCodeAt(0);if(43===a||45===a){if(88===(r=t.charCodeAt(2))||120===r)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+t}for(var o,s=t.slice(2),u=0,c=s.length;u<c;u++)if((o=s.charCodeAt(u))<48||o>i)return NaN;return parseInt(s,n)}}return+t};if(!Yt(" 0o1")||!Yt("0b1")||Yt("+0x1")){Yt=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof Yt&&(Qt?s(function(){$t.valueOf.call(r)}):"Number"!=B(r))?qt(new Xt(Zt(t)),r,Yt):Zt(t)};for(var er,tr=u?Kt(Xt):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),rr=0;tr.length>rr;rr++)o(Xt,er=tr[rr])&&!o(Yt,er)&&zt(Yt,er,Ht(Xt,er));Yt.prototype=$t,$t.constructor=Yt,A(i,"Number",Yt)}var nr=function(e,t){if("number"!=typeof e&&"Number"!=B(e))throw TypeError(t);return+e},ir=function(e){var t=String(G(this)),r="",n=z(e);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(r+=t);return r},ar=1..toFixed,or=Math.floor,sr=[0,0,0,0,0,0],ur="Number.toFixed: incorrect invocation!",cr=function(e,t){for(var r=-1,n=t;++r<6;)n+=e*sr[r],sr[r]=n%1e7,n=or(n/1e7)},lr=function(e){for(var t=6,r=0;--t>=0;)r+=sr[t],sr[t]=or(r/e),r=r%e*1e7},fr=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==sr[e]){var r=String(sr[e]);t=""===t?r:t+ir.call("0",7-r.length)+r}return t},dr=function(e,t,r){return 0===t?r:t%2==1?dr(e,t-1,r*e):dr(e*e,t/2,r)};R(R.P+R.F*(!!ar&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s(function(){ar.call({})})),"Number",{toFixed:function(e){var t,r,n,i,a=nr(this,ur),o=z(e),s="",u="0";if(o<0||o>20)throw RangeError(ur);if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return String(a);if(a<0&&(s="-",a=-a),a>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(a*dr(2,69,1))-69)<0?a*dr(2,-t,1):a/dr(2,t,1),r*=4503599627370496,(t=52-t)>0){for(cr(0,r),n=o;n>=7;)cr(1e7,0),n-=7;for(cr(dr(10,n,1),0),n=t-1;n>=23;)lr(1<<23),n-=23;lr(1<<n),cr(1,1),lr(2),u=fr()}else cr(0,r),cr(1<<-t,0),u=fr()+ir.call("0",o);return u=o>0?s+((i=u.length)<=o?"0."+ir.call("0",o-i)+u:u.slice(0,i-o)+"."+u.slice(i-o)):s+u}});var pr=1..toPrecision;R(R.P+R.F*(s(function(){return"1"!==pr.call(1,void 0)})||!s(function(){pr.call({})})),"Number",{toPrecision:function(e){var t=nr(this,"Number#toPrecision: incorrect invocation!");return void 0===e?pr.call(t):pr.call(t,e)}}),R(R.S,"Number",{EPSILON:Math.pow(2,-52)});var hr=i.isFinite;R(R.S,"Number",{isFinite:function(e){return"number"==typeof e&&hr(e)}});var vr=Math.floor,mr=function(e){return!l(e)&&isFinite(e)&&vr(e)===e};R(R.S,"Number",{isInteger:mr}),R(R.S,"Number",{isNaN:function(e){return e!=e}});var gr=Math.abs;R(R.S,"Number",{isSafeInteger:function(e){return mr(e)&&gr(e)<=9007199254740991}}),R(R.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),R(R.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991}),R(R.S+R.F*(Number.parseFloat!=Vt),"Number",{parseFloat:Vt}),R(R.S+R.F*(Number.parseInt!=jt),"Number",{parseInt:jt});var yr=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)},Er=Math.sqrt,br=Math.acosh;R(R.S+R.F*!(br&&710==Math.floor(br(Number.MAX_VALUE))&&br(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:yr(e-1+Er(e-1)*Er(e+1))}});var _r=Math.asinh;R(R.S+R.F*!(_r&&1/_r(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}});var Sr=Math.atanh;R(R.S+R.F*!(Sr&&1/Sr(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}});var Tr=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1};R(R.S,"Math",{cbrt:function(e){return Tr(e=+e)*Math.pow(Math.abs(e),1/3)}}),R(R.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}});var wr=Math.exp;R(R.S,"Math",{cosh:function(e){return(wr(e=+e)+wr(-e))/2}});var Ir=Math.expm1,Ar=!Ir||Ir(10)>22025.465794806718||Ir(10)<22025.465794806718||-2e-17!=Ir(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:Ir;R(R.S+R.F*(Ar!=Math.expm1),"Math",{expm1:Ar});var Cr=Math.pow,xr=Cr(2,-52),Or=Cr(2,-23),Rr=Cr(2,127)*(2-Or),Nr=Cr(2,-126),kr=Math.fround||function(e){var t,r,n=Math.abs(e),i=Tr(e);return n<Nr?i*(n/Nr/Or+1/xr-1/xr)*Nr*Or:(r=(t=(1+Or/xr)*n)-(t-n))>Rr||r!=r?i*(1/0):i*r};R(R.S,"Math",{fround:kr});var Pr=Math.abs;R(R.S,"Math",{hypot:function(e,t){for(var r,n,i=0,a=0,o=arguments.length,s=0;a<o;)s<(r=Pr(arguments[a++]))?(i=i*(n=s/r)*n+1,s=r):i+=r>0?(n=r/s)*n:r;return s===1/0?1/0:s*Math.sqrt(i)}});var Mr=Math.imul;R(R.S+R.F*s(function(){return-5!=Mr(4294967295,5)||2!=Mr.length}),"Math",{imul:function(e,t){var r=+e,n=+t,i=65535&r,a=65535&n;return 0|i*a+((65535&r>>>16)*a+i*(65535&n>>>16)<<16>>>0)}}),R(R.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}}),R(R.S,"Math",{log1p:yr}),R(R.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}}),R(R.S,"Math",{sign:Tr});var Dr=Math.exp;R(R.S+R.F*s(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(Ar(e)-Ar(-e))/2:(Dr(e-1)-Dr(-e-1))*(Math.E/2)}});var Lr=Math.exp;R(R.S,"Math",{tanh:function(e){var t=Ar(e=+e),r=Ar(-e);return t==1/0?1:r==1/0?-1:(t-r)/(Lr(e)+Lr(-e))}}),R(R.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}});var Ur=String.fromCharCode,jr=String.fromCodePoint;R(R.S+R.F*(!!jr&&1!=jr.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,i=0;n>i;){if(t=+arguments[i++],Q(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?Ur(t):Ur(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}}),R(R.S,"String",{raw:function(e){for(var t=q(e.raw),r=Y(t.length),n=arguments.length,i=[],a=0;r>a;)i.push(String(t[a++])),a<n&&i.push(String(arguments[a]));return i.join("")}}),Mt("trim",function(e){return function(){return e(this,3)}});var Fr=function(e){return function(t,r){var n,i,a=String(G(t)),o=z(r),s=a.length;return o<0||o>=s?e?"":void 0:(n=a.charCodeAt(o))<55296||n>56319||o+1===s||(i=a.charCodeAt(o+1))<56320||i>57343?e?a.charAt(o):n:e?a.slice(o,o+2):i-56320+(n-55296<<10)+65536}},Br={},Vr={};b(Vr,k("iterator"),function(){return this});var Gr=function(e,t,r){e.prototype=me(Vr,{next:E(1,r)}),D(e,t+" Iterator")},qr=k("iterator"),Kr=!([].keys&&"next"in[].keys()),Hr=function(){return this},zr=function(e,t,r,n,i,a,o){Gr(r,t,n);var s,u,c,l=function(e){if(!Kr&&e in h)return h[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},f=t+" Iterator",d="values"==i,p=!1,h=e.prototype,v=h[qr]||h["@@iterator"]||i&&h[i],m=v||l(i),g=i?d?l("entries"):m:void 0,y="Array"==t&&h.entries||v;if(y&&(c=ot(y.call(new e)))!==Object.prototype&&c.next&&(D(c,f,!0),"function"!=typeof c[qr]&&b(c,qr,Hr)),d&&v&&"values"!==v.name&&(p=!0,m=function(){return v.call(this)}),(Kr||p||!h[qr])&&b(h,qr,m),Br[t]=m,Br[f]=Hr,i)if(s={values:d?m:l("values"),keys:a?m:l("keys"),entries:g},o)for(u in s)u in h||A(h,u,s[u]);else R(R.P+R.F*(Kr||p),t,s);return s},Wr=Fr(!0);zr(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=Wr(t,r),this._i+=e.length,{value:e,done:!1})});var Yr=Fr(!1);R(R.P,"String",{codePointAt:function(e){return Yr(this,e)}});var Xr=k("match"),$r=function(e){var t;return l(e)&&(void 0!==(t=e[Xr])?!!t:"RegExp"==B(e))},Qr=function(e,t,r){if($r(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(G(e))},Jr=k("match"),Zr=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[Jr]=!1,!"/./"[e](t)}catch(e){}}return!0},en="".endsWith;R(R.P+R.F*Zr("endsWith"),"String",{endsWith:function(e){var t=Qr(this,e,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=Y(t.length),i=void 0===r?n:Math.min(Y(r),n),a=String(e);return en?en.call(t,a,i):t.slice(i-a.length,i)===a}});R(R.P+R.F*Zr("includes"),"String",{includes:function(e){return!!~Qr(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}}),R(R.P,"String",{repeat:ir});var tn="".startsWith;R(R.P+R.F*Zr("startsWith"),"String",{startsWith:function(e){var t=Qr(this,e,"startsWith"),r=Y(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return tn?tn.call(t,n,r):t.slice(r,r+n.length)===n}});var rn=/"/g,nn=function(e,t,r,n){var i=String(G(e)),a="<"+t;return""!==r&&(a+=" "+r+'="'+String(n).replace(rn,"&quot;")+'"'),a+">"+i+"</"+t+">"},an=function(e,t){var r={};r[e]=t(nn),R(R.P+R.F*s(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",r)};an("anchor",function(e){return function(t){return e(this,"a","name",t)}}),an("big",function(e){return function(){return e(this,"big","","")}}),an("blink",function(e){return function(){return e(this,"blink","","")}}),an("bold",function(e){return function(){return e(this,"b","","")}}),an("fixed",function(e){return function(){return e(this,"tt","","")}}),an("fontcolor",function(e){return function(t){return e(this,"font","color",t)}}),an("fontsize",function(e){return function(t){return e(this,"font","size",t)}}),an("italics",function(e){return function(){return e(this,"i","","")}}),an("link",function(e){return function(t){return e(this,"a","href",t)}}),an("small",function(e){return function(){return e(this,"small","","")}}),an("strike",function(e){return function(){return e(this,"strike","","")}}),an("sub",function(e){return function(){return e(this,"sub","","")}}),an("sup",function(e){return function(){return e(this,"sup","","")}}),R(R.S,"Date",{now:function(){return(new Date).getTime()}}),R(R.P+R.F*s(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=ce(this),r=m(t);return"number"!=typeof r||isFinite(r)?t.toISOString():null}});var on=Date.prototype.getTime,sn=Date.prototype.toISOString,un=function(e){return e>9?e:"0"+e},cn=s(function(){return"0385-07-25T07:06:39.999Z"!=sn.call(new Date(-5e13-1))})||!s(function(){sn.call(new Date(NaN))})?function(){if(!isFinite(on.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),r=e.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+un(e.getUTCMonth()+1)+"-"+un(e.getUTCDate())+"T"+un(e.getUTCHours())+":"+un(e.getUTCMinutes())+":"+un(e.getUTCSeconds())+"."+(r>99?r:"0"+un(r))+"Z"}:sn;R(R.P+R.F*(Date.prototype.toISOString!==cn),"Date",{toISOString:cn});var ln=Date.prototype,fn=ln.toString,dn=ln.getTime;new Date(NaN)+""!="Invalid Date"&&A(ln,"toString",function(){var e=dn.call(this);return e==e?fn.call(this):"Invalid Date"});var pn=k("toPrimitive"),hn=Date.prototype;pn in hn||b(hn,pn,function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return m(f(this),"number"!=e)}),R(R.S,"Array",{isArray:ue});var vn=function(e,t,r,n){try{return n?t(f(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&f(i.call(e)),t}},mn=k("iterator"),gn=Array.prototype,yn=function(e){return void 0!==e&&(Br.Array===e||gn[mn]===e)},En=function(e,t,r){t in e?y.f(e,t,E(0,r)):e[t]=r},bn=k("iterator"),_n=c.getIteratorMethod=function(e){if(null!=e)return e[bn]||e["@@iterator"]||Br[gt(e)]},Sn=k("iterator"),Tn=!1;try{[7][Sn]().return=function(){Tn=!0}}catch(e){}var wn=function(e,t){if(!t&&!Tn)return!1;var r=!1;try{var n=[7],i=n[Sn]();i.next=function(){return{done:r=!0}},n[Sn]=function(){return i},e(n)}catch(e){}return r};R(R.S+R.F*!wn(function(e){}),"Array",{from:function(e){var t,r,n,i,a=ce(e),o="function"==typeof this?this:Array,s=arguments.length,u=s>1?arguments[1]:void 0,c=void 0!==u,l=0,f=_n(a);if(c&&(u=x(u,s>2?arguments[2]:void 0,2)),null==f||o==Array&&yn(f))for(r=new o(t=Y(a.length));t>l;l++)En(r,l,c?u(a[l],l):a[l]);else for(i=f.call(a),r=new o;!(n=i.next()).done;l++)En(r,l,c?vn(i,u,[n.value,l],!0):n.value);return r.length=l,r}}),R(R.S+R.F*s(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)En(r,e,arguments[e++]);return r.length=t,r}});var In=function(e,t){return!!e&&s(function(){t?e.call(null,function(){},1):e.call(null)})},An=[].join;R(R.P+R.F*(V!=Object||!In(An)),"Array",{join:function(e){return An.call(q(this),void 0===e?",":e)}});var Cn=[].slice;R(R.P+R.F*s(function(){de&&Cn.call(de)}),"Array",{slice:function(e,t){var r=Y(this.length),n=B(this);if(t=void 0===t?r:t,"Array"==n)return Cn.call(this,e,t);for(var i=Q(e,r),a=Q(t,r),o=Y(a-i),s=new Array(o),u=0;u<o;u++)s[u]="String"==n?this.charAt(i+u):this[i+u];return s}});var xn=[].sort,On=[1,2,3];R(R.P+R.F*(s(function(){On.sort(void 0)})||!s(function(){On.sort(null)})||!In(xn)),"Array",{sort:function(e){return void 0===e?xn.call(ce(this)):xn.call(ce(this),C(e))}});var Rn=k("species"),Nn=function(e,t){return new(function(e){var t;return ue(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!ue(t.prototype)||(t=void 0),l(t)&&null===(t=t[Rn])&&(t=void 0)),void 0===t?Array:t}(e))(t)},kn=function(e,t){var r=1==e,n=2==e,i=3==e,a=4==e,o=6==e,s=5==e||o,u=t||Nn;return function(t,c,l){for(var f,d,p=ce(t),h=V(p),v=x(c,l,3),m=Y(h.length),g=0,y=r?u(t,m):n?u(t,0):void 0;m>g;g++)if((s||g in h)&&(d=v(f=h[g],g,p),e))if(r)y[g]=d;else if(d)switch(e){case 3:return!0;case 5:return f;case 6:return g;case 2:y.push(f)}else if(a)return!1;return o?-1:i||a?a:y}},Pn=kn(0),Mn=In([].forEach,!0);R(R.P+R.F*!Mn,"Array",{forEach:function(e){return Pn(this,e,arguments[1])}});var Dn=kn(1);R(R.P+R.F*!In([].map,!0),"Array",{map:function(e){return Dn(this,e,arguments[1])}});var Ln=kn(2);R(R.P+R.F*!In([].filter,!0),"Array",{filter:function(e){return Ln(this,e,arguments[1])}});var Un=kn(3);R(R.P+R.F*!In([].some,!0),"Array",{some:function(e){return Un(this,e,arguments[1])}});var jn=kn(4);R(R.P+R.F*!In([].every,!0),"Array",{every:function(e){return jn(this,e,arguments[1])}});var Fn=function(e,t,r,n,i){C(t);var a=ce(e),o=V(a),s=Y(a.length),u=i?s-1:0,c=i?-1:1;if(r<2)for(;;){if(u in o){n=o[u],u+=c;break}if(u+=c,i?u<0:s<=u)throw TypeError("Reduce of empty array with no initial value")}for(;i?u>=0:s>u;u+=c)u in o&&(n=t(n,o[u],u,a));return n};R(R.P+R.F*!In([].reduce,!0),"Array",{reduce:function(e){return Fn(this,e,arguments.length,arguments[1],!1)}}),R(R.P+R.F*!In([].reduceRight,!0),"Array",{reduceRight:function(e){return Fn(this,e,arguments.length,arguments[1],!0)}});var Bn=J(!1),Vn=[].indexOf,Gn=!!Vn&&1/[1].indexOf(1,-0)<0;R(R.P+R.F*(Gn||!In(Vn)),"Array",{indexOf:function(e){return Gn?Vn.apply(this,arguments)||0:Bn(this,e,arguments[1])}});var qn=[].lastIndexOf,Kn=!!qn&&1/[1].lastIndexOf(1,-0)<0;R(R.P+R.F*(Kn||!In(qn)),"Array",{lastIndexOf:function(e){if(Kn)return qn.apply(this,arguments)||0;var t=q(this),r=Y(t.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,z(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in t&&t[n]===e)return n||0;return-1}});var Hn=[].copyWithin||function(e,t){var r=ce(this),n=Y(r.length),i=Q(e,n),a=Q(t,n),o=arguments.length>2?arguments[2]:void 0,s=Math.min((void 0===o?n:Q(o,n))-a,n-i),u=1;for(a<i&&i<a+s&&(u=-1,a+=s-1,i+=s-1);s-- >0;)a in r?r[i]=r[a]:delete r[i],i+=u,a+=u;return r},zn=k("unscopables"),Wn=Array.prototype;null==Wn[zn]&&b(Wn,zn,{});var Yn=function(e){Wn[zn][e]=!0};R(R.P,"Array",{copyWithin:Hn}),Yn("copyWithin");var Xn=function(e){for(var t=ce(this),r=Y(t.length),n=arguments.length,i=Q(n>1?arguments[1]:void 0,r),a=n>2?arguments[2]:void 0,o=void 0===a?r:Q(a,r);o>i;)t[i++]=e;return t};R(R.P,"Array",{fill:Xn}),Yn("fill");var $n=kn(5),Qn=!0;"find"in[]&&Array(1).find(function(){Qn=!1}),R(R.P+R.F*Qn,"Array",{find:function(e){return $n(this,e,arguments.length>1?arguments[1]:void 0)}}),Yn("find");var Jn=kn(6),Zn=!0;"findIndex"in[]&&Array(1).findIndex(function(){Zn=!1}),R(R.P+R.F*Zn,"Array",{findIndex:function(e){return Jn(this,e,arguments.length>1?arguments[1]:void 0)}}),Yn("findIndex");var ei=k("species"),ti=function(e){var t=i[e];u&&t&&!t[ei]&&y.f(t,ei,{configurable:!0,get:function(){return this}})};ti("Array");var ri=function(e,t){return{value:t,done:!!e}},ni=zr(Array,"Array",function(e,t){this._t=q(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,ri(1)):ri(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values");Br.Arguments=Br.Array,Yn("keys"),Yn("values"),Yn("entries");var ii=function(){var e=f(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},ai=y.f,oi=ye.f,si=i.RegExp,ui=si,ci=si.prototype,li=/a/g,fi=/a/g,di=new si(li)!==li;if(u&&(!di||s(function(){return fi[k("match")]=!1,si(li)!=li||si(fi)==fi||"/a/i"!=si(li,"i")}))){si=function(e,t){var r=this instanceof si,n=$r(e),i=void 0===t;return!r&&n&&e.constructor===si&&i?e:qt(di?new ui(n&&!i?e.source:e,t):ui((n=e instanceof si)?e.source:e,n&&i?ii.call(e):t),r?this:ci,si)};for(var pi=function(e){e in si||ai(si,e,{configurable:!0,get:function(){return ui[e]},set:function(t){ui[e]=t}})},hi=oi(ui),vi=0;hi.length>vi;)pi(hi[vi++]);ci.constructor=si,si.prototype=ci,A(i,"RegExp",si)}ti("RegExp");var mi=RegExp.prototype.exec,gi=String.prototype.replace,yi=mi,Ei=function(){var e=/a/,t=/b*/g;return mi.call(e,"a"),mi.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),bi=void 0!==/()??/.exec("")[1];(Ei||bi)&&(yi=function(e){var t,r,n,i,a=this;return bi&&(r=new RegExp("^"+a.source+"$(?!\\s)",ii.call(a))),Ei&&(t=a.lastIndex),n=mi.call(a,e),Ei&&n&&(a.lastIndex=a.global?n.index+n[0].length:t),bi&&n&&n.length>1&&gi.call(n[0],r,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)}),n});var _i=yi;R({target:"RegExp",proto:!0,forced:_i!==/./.exec},{exec:_i}),u&&"g"!=/./g.flags&&y.f(RegExp.prototype,"flags",{configurable:!0,get:ii});var Si=/./.toString,Ti=function(e){A(RegExp.prototype,"toString",e,!0)};s(function(){return"/a/b"!=Si.call({source:"a",flags:"b"})})?Ti(function(){var e=f(this);return"/".concat(e.source,"/","flags"in e?e.flags:!u&&e instanceof RegExp?ii.call(e):void 0)}):"toString"!=Si.name&&Ti(function(){return Si.call(this)});var wi=Fr(!0),Ii=function(e,t,r){return t+(r?wi(e,t).length:1)},Ai=RegExp.prototype.exec,Ci=function(e,t){var r=e.exec;if("function"==typeof r){var n=r.call(e,t);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==gt(e))throw new TypeError("RegExp#exec called on incompatible receiver");return Ai.call(e,t)},xi=k("species"),Oi=!s(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),Ri=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2===r.length&&"a"===r[0]&&"b"===r[1]}(),Ni=function(e,t,r){var n=k(e),i=!s(function(){var t={};return t[n]=function(){return 7},7!=""[e](t)}),a=i?!s(function(){var t=!1,r=/a/;return r.exec=function(){return t=!0,null},"split"===e&&(r.constructor={},r.constructor[xi]=function(){return r}),r[n](""),!t}):void 0;if(!i||!a||"replace"===e&&!Oi||"split"===e&&!Ri){var o=/./[n],u=r(G,n,""[e],function(e,t,r,n,a){return t.exec===_i?i&&!a?{done:!0,value:o.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),c=u[0],l=u[1];A(String.prototype,e,c),b(RegExp.prototype,n,2==t?function(e,t){return l.call(e,this,t)}:function(e){return l.call(e,this)})}};Ni("match",1,function(e,t,r,n){return[function(r){var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=n(r,e,this);if(t.done)return t.value;var i=f(e),a=String(this);if(!i.global)return Ci(i,a);var o=i.unicode;i.lastIndex=0;for(var s,u=[],c=0;null!==(s=Ci(i,a));){var l=String(s[0]);u[c]=l,""===l&&(i.lastIndex=Ii(a,Y(i.lastIndex),o)),c++}return 0===c?null:u}]});var ki=Math.max,Pi=Math.min,Mi=Math.floor,Di=/\$([$&`']|\d\d?|<[^>]*>)/g,Li=/\$([$&`']|\d\d?)/g;Ni("replace",2,function(e,t,r,n){return[function(n,i){var a=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,a,i):r.call(String(a),n,i)},function(e,t){var a=n(r,e,this,t);if(a.done)return a.value;var o=f(e),s=String(this),u="function"==typeof t;u||(t=String(t));var c=o.global;if(c){var l=o.unicode;o.lastIndex=0}for(var d=[];;){var p=Ci(o,s);if(null===p)break;if(d.push(p),!c)break;""===String(p[0])&&(o.lastIndex=Ii(s,Y(o.lastIndex),l))}for(var h,v="",m=0,g=0;g<d.length;g++){p=d[g];for(var y=String(p[0]),E=ki(Pi(z(p.index),s.length),0),b=[],_=1;_<p.length;_++)b.push(void 0===(h=p[_])?h:String(h));var S=p.groups;if(u){var T=[y].concat(b,E,s);void 0!==S&&T.push(S);var w=String(t.apply(void 0,T))}else w=i(y,s,E,b,S,t);E>=m&&(v+=s.slice(m,E)+w,m=E+y.length)}return v+s.slice(m)}];function i(e,t,n,i,a,o){var s=n+e.length,u=i.length,c=Li;return void 0!==a&&(a=ce(a),c=Di),r.call(o,c,function(r,o){var c;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(s);case"<":c=a[o.slice(1,-1)];break;default:var l=+o;if(0===l)return r;if(l>u){var f=Mi(l/10);return 0===f?r:f<=u?void 0===i[f-1]?o.charAt(1):i[f-1]+o.charAt(1):r}c=i[l-1]}return void 0===c?"":c})}}),Ni("search",1,function(e,t,r,n){return[function(r){var n=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},function(e){var t=n(r,e,this);if(t.done)return t.value;var i=f(e),a=String(this),o=i.lastIndex;dt(o,0)||(i.lastIndex=0);var s=Ci(i,a);return dt(i.lastIndex,o)||(i.lastIndex=o),null===s?-1:s.index}]});var Ui=k("species"),ji=function(e,t){var r,n=f(e).constructor;return void 0===n||null==(r=f(n)[Ui])?t:C(r)},Fi=Math.min,Bi=[].push,Vi=!s(function(){});Ni("split",2,function(e,t,r,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!$r(e))return r.call(n,e,t);for(var i,a,o,s=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,l=void 0===t?4294967295:t>>>0,f=new RegExp(e.source,u+"g");(i=_i.call(f,n))&&!((a=f.lastIndex)>c&&(s.push(n.slice(c,i.index)),i.length>1&&i.index<n.length&&Bi.apply(s,i.slice(1)),o=i[0].length,c=a,s.length>=l));)f.lastIndex===i.index&&f.lastIndex++;return c===n.length?!o&&f.test("")||s.push(""):s.push(n.slice(c)),s.length>l?s.slice(0,l):s}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)}:r,[function(r,n){var a=e(this),o=null==r?void 0:r[t];return void 0!==o?o.call(r,a,n):i.call(String(a),r,n)},function(e,t){var a=n(i,e,this,t,i!==r);if(a.done)return a.value;var o=f(e),s=String(this),u=ji(o,RegExp),c=o.unicode,l=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(Vi?"y":"g"),d=new u(Vi?o:"^(?:"+o.source+")",l),p=void 0===t?4294967295:t>>>0;if(0===p)return[];if(0===s.length)return null===Ci(d,s)?[s]:[];for(var h=0,v=0,m=[];v<s.length;){d.lastIndex=Vi?v:0;var g,y=Ci(d,Vi?s:s.slice(v));if(null===y||(g=Fi(Y(d.lastIndex+(Vi?0:v)),s.length))===h)v=Ii(s,v,c);else{if(m.push(s.slice(h,v)),m.length===p)return m;for(var E=1;E<=y.length-1;E++)if(m.push(y[E]),m.length===p)return m;v=h=g}}return m.push(s.slice(h)),m}]});var Gi,qi,Ki,Hi=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e},zi=n(function(e){var t={},r={},n=e.exports=function(e,n,i,a,o){var s,u,c,l,d=o?function(){return e}:_n(e),p=x(i,a,n?2:1),h=0;if("function"!=typeof d)throw TypeError(e+" is not iterable!");if(yn(d)){for(s=Y(e.length);s>h;h++)if((l=n?p(f(u=e[h])[0],u[1]):p(e[h]))===t||l===r)return l}else for(c=d.call(e);!(u=c.next()).done;)if((l=vn(c,p,u.value,n))===t||l===r)return l};n.BREAK=t,n.RETURN=r}),Wi=i.process,Yi=i.setImmediate,Xi=i.clearImmediate,$i=i.MessageChannel,Qi=i.Dispatch,Ji=0,Zi={},ea=function(){var e=+this;if(Zi.hasOwnProperty(e)){var t=Zi[e];delete Zi[e],t()}},ta=function(e){ea.call(e.data)};Yi&&Xi||(Yi=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return Zi[++Ji]=function(){Et("function"==typeof e?e:Function(e),t)},Gi(Ji),Ji},Xi=function(e){delete Zi[e]},"process"==B(Wi)?Gi=function(e){Wi.nextTick(x(ea,e,1))}:Qi&&Qi.now?Gi=function(e){Qi.now(x(ea,e,1))}:$i?(Ki=(qi=new $i).port2,qi.port1.onmessage=ta,Gi=x(Ki.postMessage,Ki,1)):i.addEventListener&&"function"==typeof postMessage&&!i.importScripts?(Gi=function(e){i.postMessage(e+"","*")},i.addEventListener("message",ta,!1)):Gi="onreadystatechange"in h("script")?function(e){de.appendChild(h("script")).onreadystatechange=function(){de.removeChild(this),ea.call(e)}}:function(e){setTimeout(x(ea,e,1),0)});var ra={set:Yi,clear:Xi},na=ra.set,ia=i.MutationObserver||i.WebKitMutationObserver,aa=i.process,oa=i.Promise,sa="process"==B(aa),ua=function(){var e,t,r,n=function(){var n,i;for(sa&&(n=aa.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(sa)r=function(){aa.nextTick(n)};else if(!ia||i.navigator&&i.navigator.standalone)if(oa&&oa.resolve){var a=oa.resolve(void 0);r=function(){a.then(n)}}else r=function(){na.call(i,n)};else{var o=!0,s=document.createTextNode("");new ia(n).observe(s,{characterData:!0}),r=function(){s.data=o=!o}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}};function ca(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=C(t),this.reject=C(r)}var la,fa,da,pa,ha={f:function(e){return new ca(e)}},va=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},ma=i.navigator,ga=ma&&ma.userAgent||"",ya=function(e,t){if(f(e),l(t)&&t.constructor===e)return t;var r=ha.f(e);return(0,r.resolve)(t),r.promise},Ea=function(e,t,r){for(var n in t)A(e,n,t[n],r);return e},ba=ra.set,_a=ua(),Sa=i.TypeError,Ta=i.process,wa=Ta&&Ta.versions,Ia=wa&&wa.v8||"",Aa=i.Promise,Ca="process"==gt(Ta),xa=function(){},Oa=fa=ha.f,Ra=!!function(){try{var e=Aa.resolve(1),t=(e.constructor={})[k("species")]=function(e){e(xa,xa)};return(Ca||"function"==typeof PromiseRejectionEvent)&&e.then(xa)instanceof t&&0!==Ia.indexOf("6.6")&&-1===ga.indexOf("Chrome/66")}catch(e){}}(),Na=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},ka=function(e,t){if(!e._n){e._n=!0;var r=e._c;_a(function(){for(var n=e._v,i=1==e._s,a=0,o=function(t){var r,a,o,s=i?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{s?(i||(2==e._h&&Da(e),e._h=1),!0===s?r=n:(l&&l.enter(),r=s(n),l&&(l.exit(),o=!0)),r===t.promise?c(Sa("Promise-chain cycle")):(a=Na(r))?a.call(r,u,c):u(r)):c(n)}catch(e){l&&!o&&l.exit(),c(e)}};r.length>a;)o(r[a++]);e._c=[],e._n=!1,t&&!e._h&&Pa(e)})}},Pa=function(e){ba.call(i,function(){var t,r,n,a=e._v,o=Ma(e);if(o&&(t=va(function(){Ca?Ta.emit("unhandledRejection",a,e):(r=i.onunhandledrejection)?r({promise:e,reason:a}):(n=i.console)&&n.error&&n.error("Unhandled promise rejection",a)}),e._h=Ca||Ma(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},Ma=function(e){return 1!==e._h&&0===(e._a||e._c).length},Da=function(e){ba.call(i,function(){var t;Ca?Ta.emit("rejectionHandled",e):(t=i.onrejectionhandled)&&t({promise:e,reason:e._v})})},La=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),ka(t,!0))},Ua=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw Sa("Promise can't be resolved itself");(t=Na(e))?_a(function(){var n={_w:r,_d:!1};try{t.call(e,x(Ua,n,1),x(La,n,1))}catch(e){La.call(n,e)}}):(r._v=e,r._s=1,ka(r,!1))}catch(e){La.call({_w:r,_d:!1},e)}}};Ra||(Aa=function(e){Hi(this,Aa,"Promise","_h"),C(e),la.call(this);try{e(x(Ua,this,1),x(La,this,1))}catch(e){La.call(this,e)}},(la=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=Ea(Aa.prototype,{then:function(e,t){var r=Oa(ji(this,Aa));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=Ca?Ta.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&ka(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),da=function(){var e=new la;this.promise=e,this.resolve=x(Ua,e,1),this.reject=x(La,e,1)},ha.f=Oa=function(e){return e===Aa||e===pa?new da(e):fa(e)}),R(R.G+R.W+R.F*!Ra,{Promise:Aa}),D(Aa,"Promise"),ti("Promise"),pa=c.Promise,R(R.S+R.F*!Ra,"Promise",{reject:function(e){var t=Oa(this);return(0,t.reject)(e),t.promise}}),R(R.S+R.F*!Ra,"Promise",{resolve:function(e){return ya(this,e)}}),R(R.S+R.F*!(Ra&&wn(function(e){Aa.all(e).catch(xa)})),"Promise",{all:function(e){var t=this,r=Oa(t),n=r.resolve,i=r.reject,a=va(function(){var r=[],a=0,o=1;zi(e,!1,function(e){var s=a++,u=!1;r.push(void 0),o++,t.resolve(e).then(function(e){u||(u=!0,r[s]=e,--o||n(r))},i)}),--o||n(r)});return a.e&&i(a.v),r.promise},race:function(e){var t=this,r=Oa(t),n=r.reject,i=va(function(){zi(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}});var ja=function(e,t){if(!l(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e},Fa=y.f,Ba=N.fastKey,Va=u?"_s":"size",Ga=function(e,t){var r,n=Ba(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r},qa={getConstructor:function(e,t,r,n){var i=e(function(e,a){Hi(e,i,t,"_i"),e._t=t,e._i=me(null),e._f=void 0,e._l=void 0,e[Va]=0,null!=a&&zi(a,r,e[n],e)});return Ea(i.prototype,{clear:function(){for(var e=ja(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[Va]=0},delete:function(e){var r=ja(this,t),n=Ga(r,e);if(n){var i=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=i),i&&(i.p=a),r._f==n&&(r._f=i),r._l==n&&(r._l=a),r[Va]--}return!!n},forEach:function(e){ja(this,t);for(var r,n=x(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!Ga(ja(this,t),e)}}),u&&Fa(i.prototype,"size",{get:function(){return ja(this,t)[Va]}}),i},def:function(e,t,r){var n,i,a=Ga(e,t);return a?a.v=r:(e._l=a={i:i=Ba(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[Va]++,"F"!==i&&(e._i[i]=a)),e},getEntry:Ga,setStrong:function(e,t,r){zr(e,t,function(e,r){this._t=ja(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?ri(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,ri(1))},r?"entries":"values",!r,!0),ti(t)}},Ka=function(e,t,r,n,a,o){var u=i[e],c=u,f=a?"set":"add",d=c&&c.prototype,p={},h=function(e){var t=d[e];A(d,e,"delete"==e?function(e){return!(o&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return o&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof c&&(o||d.forEach&&!s(function(){(new c).entries().next()}))){var v=new c,m=v[f](o?{}:-0,1)!=v,g=s(function(){v.has(1)}),y=wn(function(e){new c(e)}),E=!o&&s(function(){for(var e=new c,t=5;t--;)e[f](t,t);return!e.has(-0)});y||((c=t(function(t,r){Hi(t,c,e);var n=qt(new u,t,c);return null!=r&&zi(r,a,n[f],n),n})).prototype=d,d.constructor=c),(g||E)&&(h("delete"),h("has"),a&&h("get")),(E||m)&&h(f),o&&d.clear&&delete d.clear}else c=n.getConstructor(t,e,a,f),Ea(c.prototype,r),N.NEED=!0;return D(c,e),p[e]=c,R(R.G+R.W+R.F*(c!=u),p),o||n.setStrong(c,e,a),c},Ha=Ka("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=qa.getEntry(ja(this,"Map"),e);return t&&t.v},set:function(e,t){return qa.def(ja(this,"Map"),0===e?0:e,t)}},qa,!0),za=Ka("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return qa.def(ja(this,"Set"),e=0===e?0:e,e)}},qa),Wa=N.getWeak,Ya=kn(5),Xa=kn(6),$a=0,Qa=function(e){return e._l||(e._l=new Ja)},Ja=function(){this.a=[]},Za=function(e,t){return Ya(e.a,function(e){return e[0]===t})};Ja.prototype={get:function(e){var t=Za(this,e);if(t)return t[1]},has:function(e){return!!Za(this,e)},set:function(e,t){var r=Za(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=Xa(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}};var eo={getConstructor:function(e,t,r,n){var i=e(function(e,a){Hi(e,i,t,"_i"),e._t=t,e._i=$a++,e._l=void 0,null!=a&&zi(a,r,e[n],e)});return Ea(i.prototype,{delete:function(e){if(!l(e))return!1;var r=Wa(e);return!0===r?Qa(ja(this,t)).delete(e):r&&o(r,this._i)&&delete r[this._i]},has:function(e){if(!l(e))return!1;var r=Wa(e);return!0===r?Qa(ja(this,t)).has(e):r&&o(r,this._i)}}),i},def:function(e,t,r){var n=Wa(f(t),!0);return!0===n?Qa(e).set(t,r):n[e._i]=r,e},ufstore:Qa},to=n(function(e){var t,r=kn(0),n=ja,a=!i.ActiveXObject&&"ActiveXObject"in i,o=N.getWeak,s=Object.isExtensible,u=eo.ufstore,c=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},f={get:function(e){if(l(e)){var t=o(e);return!0===t?u(ja(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return eo.def(ja(this,"WeakMap"),e,t)}},d=e.exports=Ka("WeakMap",c,f,eo,!0,!0);n&&a&&(t=eo.getConstructor(c,"WeakMap"),ft(t.prototype,f),N.NEED=!0,r(["delete","has","get","set"],function(e){var r=d.prototype,n=r[e];A(r,e,function(r,i){if(l(r)&&!s(r)){this._f||(this._f=new t);var a=this._f[e](r,i);return"set"==e?this:a}return n.call(this,r,i)})}))});Ka("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return eo.def(ja(this,"WeakSet"),e,!0)}},eo,!1,!0);for(var ro,no=T("typed_array"),io=T("view"),ao=!(!i.ArrayBuffer||!i.DataView),oo=ao,so=0,uo="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");so<9;)(ro=i[uo[so++]])?(b(ro.prototype,no,!0),b(ro.prototype,io,!0)):oo=!1;var co={ABV:ao,CONSTR:oo,TYPED:no,VIEW:io},lo=function(e){if(void 0===e)return 0;var t=z(e),r=Y(t);if(t!==r)throw RangeError("Wrong length!");return r},fo=n(function(e,t){var r=ye.f,n=y.f,a="prototype",o="Wrong index!",c=i.ArrayBuffer,l=i.DataView,f=i.Math,d=i.RangeError,p=i.Infinity,h=c,v=f.abs,m=f.pow,g=f.floor,E=f.log,_=f.LN2,S=u?"_b":"buffer",T=u?"_l":"byteLength",w=u?"_o":"byteOffset";function I(e,t,r){var n,i,a,o=new Array(r),s=8*r-t-1,u=(1<<s)-1,c=u>>1,l=23===t?m(2,-24)-m(2,-77):0,f=0,d=e<0||0===e&&1/e<0?1:0;for((e=v(e))!=e||e===p?(i=e!=e?1:0,n=u):(n=g(E(e)/_),e*(a=m(2,-n))<1&&(n--,a*=2),(e+=n+c>=1?l/a:l*m(2,1-c))*a>=2&&(n++,a/=2),n+c>=u?(i=0,n=u):n+c>=1?(i=(e*a-1)*m(2,t),n+=c):(i=e*m(2,c-1)*m(2,t),n=0));t>=8;o[f++]=255&i,i/=256,t-=8);for(n=n<<t|i,s+=t;s>0;o[f++]=255&n,n/=256,s-=8);return o[--f]|=128*d,o}function A(e,t,r){var n,i=8*r-t-1,a=(1<<i)-1,o=a>>1,s=i-7,u=r-1,c=e[u--],l=127&c;for(c>>=7;s>0;l=256*l+e[u],u--,s-=8);for(n=l&(1<<-s)-1,l>>=-s,s+=t;s>0;n=256*n+e[u],u--,s-=8);if(0===l)l=1-o;else{if(l===a)return n?NaN:c?-p:p;n+=m(2,t),l-=o}return(c?-1:1)*n*m(2,l-t)}function C(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function x(e){return[255&e]}function O(e){return[255&e,e>>8&255]}function R(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function N(e){return I(e,52,8)}function k(e){return I(e,23,4)}function P(e,t,r){n(e[a],t,{get:function(){return this[r]}})}function M(e,t,r,n){var i=lo(+r);if(i+t>e[T])throw d(o);var a=e[S]._b,s=i+e[w],u=a.slice(s,s+t);return n?u:u.reverse()}function L(e,t,r,n,i,a){var s=lo(+r);if(s+t>e[T])throw d(o);for(var u=e[S]._b,c=s+e[w],l=n(+i),f=0;f<t;f++)u[c+f]=l[a?f:t-f-1]}if(co.ABV){if(!s(function(){c(1)})||!s(function(){new c(-1)})||s(function(){return new c,new c(1.5),new c(NaN),"ArrayBuffer"!=c.name})){for(var U,j=(c=function(e){return Hi(this,c),new h(lo(e))})[a]=h[a],F=r(h),B=0;F.length>B;)(U=F[B++])in c||b(c,U,h[U]);j.constructor=c}var V=new l(new c(2)),G=l[a].setInt8;V.setInt8(0,2147483648),V.setInt8(1,2147483649),!V.getInt8(0)&&V.getInt8(1)||Ea(l[a],{setInt8:function(e,t){G.call(this,e,t<<24>>24)},setUint8:function(e,t){G.call(this,e,t<<24>>24)}},!0)}else c=function(e){Hi(this,c,"ArrayBuffer");var t=lo(e);this._b=Xn.call(new Array(t),0),this[T]=t},l=function(e,t,r){Hi(this,l,"DataView"),Hi(e,c,"DataView");var n=e[T],i=z(t);if(i<0||i>n)throw d("Wrong offset!");if(i+(r=void 0===r?n-i:Y(r))>n)throw d("Wrong length!");this[S]=e,this[w]=i,this[T]=r},u&&(P(c,"byteLength","_l"),P(l,"buffer","_b"),P(l,"byteLength","_l"),P(l,"byteOffset","_o")),Ea(l[a],{getInt8:function(e){return M(this,1,e)[0]<<24>>24},getUint8:function(e){return M(this,1,e)[0]},getInt16:function(e){var t=M(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=M(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return C(M(this,4,e,arguments[1]))},getUint32:function(e){return C(M(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return A(M(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return A(M(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){L(this,1,e,x,t)},setUint8:function(e,t){L(this,1,e,x,t)},setInt16:function(e,t){L(this,2,e,O,t,arguments[2])},setUint16:function(e,t){L(this,2,e,O,t,arguments[2])},setInt32:function(e,t){L(this,4,e,R,t,arguments[2])},setUint32:function(e,t){L(this,4,e,R,t,arguments[2])},setFloat32:function(e,t){L(this,4,e,k,t,arguments[2])},setFloat64:function(e,t){L(this,8,e,N,t,arguments[2])}});D(c,"ArrayBuffer"),D(l,"DataView"),b(l[a],co.VIEW,!0),t.ArrayBuffer=c,t.DataView=l}),po=i.ArrayBuffer,ho=fo.ArrayBuffer,vo=fo.DataView,mo=co.ABV&&po.isView,go=ho.prototype.slice,yo=co.VIEW;R(R.G+R.W+R.F*(po!==ho),{ArrayBuffer:ho}),R(R.S+R.F*!co.CONSTR,"ArrayBuffer",{isView:function(e){return mo&&mo(e)||l(e)&&yo in e}}),R(R.P+R.U+R.F*s(function(){return!new ho(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==go&&void 0===t)return go.call(f(this),e);for(var r=f(this).byteLength,n=Q(e,r),i=Q(void 0===t?r:t,r),a=new(ji(this,ho))(Y(i-n)),o=new vo(this),s=new vo(a),u=0;n<i;)s.setUint8(u++,o.getUint8(n++));return a}}),ti("ArrayBuffer"),R(R.G+R.W+R.F*!co.ABV,{DataView:fo.DataView});var Eo=n(function(e){if(u){var t=i,r=s,n=R,a=co,c=fo,f=x,d=Hi,p=E,h=b,v=Ea,g=z,_=Y,S=lo,w=Q,I=m,A=o,C=gt,O=l,N=ce,P=yn,M=me,D=ot,L=ye.f,U=_n,j=T,F=k,B=kn,V=J,G=ji,q=ni,K=Br,H=wn,W=ti,X=Xn,$=Hn,Z=y,ee=we,te=Z.f,re=ee.f,ne=t.RangeError,ie=t.TypeError,ae=t.Uint8Array,oe=Array.prototype,se=c.ArrayBuffer,ue=c.DataView,le=B(0),fe=B(2),de=B(3),pe=B(4),he=B(5),ve=B(6),ge=V(!0),Ee=V(!1),be=q.values,_e=q.keys,Se=q.entries,Te=oe.lastIndexOf,Ie=oe.reduce,Ae=oe.reduceRight,Ce=oe.join,xe=oe.sort,Oe=oe.slice,Re=oe.toString,Ne=oe.toLocaleString,ke=F("iterator"),Pe=F("toStringTag"),Me=j("typed_constructor"),De=j("def_constructor"),Le=a.CONSTR,Ue=a.TYPED,je=a.VIEW,Fe=B(1,function(e,t){return Ke(G(e,e[De]),t)}),Be=r(function(){return 1===new ae(new Uint16Array([1]).buffer)[0]}),Ve=!!ae&&!!ae.prototype.set&&r(function(){new ae(1).set({})}),Ge=function(e,t){var r=g(e);if(r<0||r%t)throw ne("Wrong offset!");return r},qe=function(e){if(O(e)&&Ue in e)return e;throw ie(e+" is not a typed array!")},Ke=function(e,t){if(!(O(e)&&Me in e))throw ie("It is not a typed array constructor!");return new e(t)},He=function(e,t){return ze(G(e,e[De]),t)},ze=function(e,t){for(var r=0,n=t.length,i=Ke(e,n);n>r;)i[r]=t[r++];return i},We=function(e,t,r){te(e,t,{get:function(){return this._d[r]}})},Ye=function(e){var t,r,n,i,a,o,s=N(e),u=arguments.length,c=u>1?arguments[1]:void 0,l=void 0!==c,d=U(s);if(null!=d&&!P(d)){for(o=d.call(s),n=[],t=0;!(a=o.next()).done;t++)n.push(a.value);s=n}for(l&&u>2&&(c=f(c,arguments[2],2)),t=0,r=_(s.length),i=Ke(this,r);r>t;t++)i[t]=l?c(s[t],t):s[t];return i},Xe=function(){for(var e=0,t=arguments.length,r=Ke(this,t);t>e;)r[e]=arguments[e++];return r},$e=!!ae&&r(function(){Ne.call(new ae(1))}),Qe=function(){return Ne.apply($e?Oe.call(qe(this)):qe(this),arguments)},Je={copyWithin:function(e,t){return $.call(qe(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return pe(qe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return X.apply(qe(this),arguments)},filter:function(e){return He(this,fe(qe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return he(qe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ve(qe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){le(qe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return Ee(qe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ge(qe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return Ce.apply(qe(this),arguments)},lastIndexOf:function(e){return Te.apply(qe(this),arguments)},map:function(e){return Fe(qe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return Ie.apply(qe(this),arguments)},reduceRight:function(e){return Ae.apply(qe(this),arguments)},reverse:function(){for(var e,t=qe(this).length,r=Math.floor(t/2),n=0;n<r;)e=this[n],this[n++]=this[--t],this[t]=e;return this},some:function(e){return de(qe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return xe.call(qe(this),e)},subarray:function(e,t){var r=qe(this),n=r.length,i=w(e,n);return new(G(r,r[De]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,_((void 0===t?n:w(t,n))-i))}},Ze=function(e,t){return He(this,Oe.call(qe(this),e,t))},et=function(e){qe(this);var t=Ge(arguments[1],1),r=this.length,n=N(e),i=_(n.length),a=0;if(i+t>r)throw ne("Wrong length!");for(;a<i;)this[t+a]=n[a++]},tt={entries:function(){return Se.call(qe(this))},keys:function(){return _e.call(qe(this))},values:function(){return be.call(qe(this))}},rt=function(e,t){return O(e)&&e[Ue]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},nt=function(e,t){return rt(e,t=I(t,!0))?p(2,e[t]):re(e,t)},it=function(e,t,r){return!(rt(e,t=I(t,!0))&&O(r)&&A(r,"value"))||A(r,"get")||A(r,"set")||r.configurable||A(r,"writable")&&!r.writable||A(r,"enumerable")&&!r.enumerable?te(e,t,r):(e[t]=r.value,e)};Le||(ee.f=nt,Z.f=it),n(n.S+n.F*!Le,"Object",{getOwnPropertyDescriptor:nt,defineProperty:it}),r(function(){Re.call({})})&&(Re=Ne=function(){return Ce.call(this)});var at=v({},Je);v(at,tt),h(at,ke,tt.values),v(at,{slice:Ze,set:et,constructor:function(){},toString:Re,toLocaleString:Qe}),We(at,"buffer","b"),We(at,"byteOffset","o"),We(at,"byteLength","l"),We(at,"length","e"),te(at,Pe,{get:function(){return this[Ue]}}),e.exports=function(e,i,o,s){var u=e+((s=!!s)?"Clamped":"")+"Array",c="get"+e,l="set"+e,f=t[u],p=f||{},v=f&&D(f),m=!f||!a.ABV,g={},y=f&&f.prototype,E=function(e,t){te(e,t,{get:function(){return function(e,t){var r=e._d;return r.v[c](t*i+r.o,Be)}(this,t)},set:function(e){return function(e,t,r){var n=e._d;s&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),n.v[l](t*i+n.o,r,Be)}(this,t,e)},enumerable:!0})};m?(f=o(function(e,t,r,n){d(e,f,u,"_d");var a,o,s,c,l=0,p=0;if(O(t)){if(!(t instanceof se||"ArrayBuffer"==(c=C(t))||"SharedArrayBuffer"==c))return Ue in t?ze(f,t):Ye.call(f,t);a=t,p=Ge(r,i);var v=t.byteLength;if(void 0===n){if(v%i)throw ne("Wrong length!");if((o=v-p)<0)throw ne("Wrong length!")}else if((o=_(n)*i)+p>v)throw ne("Wrong length!");s=o/i}else s=S(t),a=new se(o=s*i);for(h(e,"_d",{b:a,o:p,l:o,e:s,v:new ue(a)});l<s;)E(e,l++)}),y=f.prototype=M(at),h(y,"constructor",f)):r(function(){f(1)})&&r(function(){new f(-1)})&&H(function(e){new f,new f(null),new f(1.5),new f(e)},!0)||(f=o(function(e,t,r,n){var a;return d(e,f,u),O(t)?t instanceof se||"ArrayBuffer"==(a=C(t))||"SharedArrayBuffer"==a?void 0!==n?new p(t,Ge(r,i),n):void 0!==r?new p(t,Ge(r,i)):new p(t):Ue in t?ze(f,t):Ye.call(f,t):new p(S(t))}),le(v!==Function.prototype?L(p).concat(L(v)):L(p),function(e){e in f||h(f,e,p[e])}),f.prototype=y,y.constructor=f);var b=y[ke],T=!!b&&("values"==b.name||null==b.name),w=tt.values;h(f,Me,!0),h(y,Ue,u),h(y,je,!0),h(y,De,f),(s?new f(1)[Pe]==u:Pe in y)||te(y,Pe,{get:function(){return u}}),g[u]=f,n(n.G+n.W+n.F*(f!=p),g),n(n.S,u,{BYTES_PER_ELEMENT:i}),n(n.S+n.F*r(function(){p.of.call(f,1)}),u,{from:Ye,of:Xe}),"BYTES_PER_ELEMENT"in y||h(y,"BYTES_PER_ELEMENT",i),n(n.P,u,Je),W(u),n(n.P+n.F*Ve,u,{set:et}),n(n.P+n.F*!T,u,tt),y.toString!=Re&&(y.toString=Re),n(n.P+n.F*r(function(){new f(1).slice()}),u,{slice:Ze}),n(n.P+n.F*(r(function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()})||!r(function(){y.toLocaleString.call([1,2])})),u,{toLocaleString:Qe}),K[u]=T?b:w,T||h(y,ke,w)}}else e.exports=function(){}});Eo("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}}),Eo("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}}),Eo("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0),Eo("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}}),Eo("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}}),Eo("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}}),Eo("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}}),Eo("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}}),Eo("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}});var bo=(i.Reflect||{}).apply,_o=Function.apply;R(R.S+R.F*!s(function(){bo(function(){})}),"Reflect",{apply:function(e,t,r){var n=C(e),i=f(r);return bo?bo(n,t,i):_o.call(n,t,i)}});var So=(i.Reflect||{}).construct,To=s(function(){function e(){}return!(So(function(){},[],e)instanceof e)}),wo=!s(function(){So(function(){})});R(R.S+R.F*(To||wo),"Reflect",{construct:function(e,t){C(e),f(t);var r=arguments.length<3?e:C(arguments[2]);if(wo&&!To)return So(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(St.apply(e,n))}var i=r.prototype,a=me(l(i)?i:Object.prototype),o=Function.apply.call(e,a,t);return l(o)?o:a}}),R(R.S+R.F*s(function(){Reflect.defineProperty(y.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){f(e),t=m(t,!0),f(r);try{return y.f(e,t,r),!0}catch(e){return!1}}});var Io=we.f;R(R.S,"Reflect",{deleteProperty:function(e,t){var r=Io(f(e),t);return!(r&&!r.configurable)&&delete e[t]}});var Ao=function(e){this._t=f(e),this._i=0;var t,r=this._k=[];for(t in e)r.push(t)};Gr(Ao,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),R(R.S,"Reflect",{enumerate:function(e){return new Ao(e)}}),R(R.S,"Reflect",{get:function e(t,r){var n,i,a=arguments.length<3?t:arguments[2];return f(t)===a?t[r]:(n=we.f(t,r))?o(n,"value")?n.value:void 0!==n.get?n.get.call(a):void 0:l(i=ot(t))?e(i,r,a):void 0}}),R(R.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return we.f(f(e),t)}}),R(R.S,"Reflect",{getPrototypeOf:function(e){return ot(f(e))}}),R(R.S,"Reflect",{has:function(e,t){return t in e}});var Co=Object.isExtensible;R(R.S,"Reflect",{isExtensible:function(e){return f(e),!Co||Co(e)}});var xo=i.Reflect,Oo=xo&&xo.ownKeys||function(e){var t=ye.f(f(e)),r=oe.f;return r?t.concat(r(e)):t};R(R.S,"Reflect",{ownKeys:Oo});var Ro=Object.preventExtensions;R(R.S,"Reflect",{preventExtensions:function(e){f(e);try{return Ro&&Ro(e),!0}catch(e){return!1}}}),R(R.S,"Reflect",{set:function e(t,r,n){var i,a,s=arguments.length<4?t:arguments[3],u=we.f(f(t),r);if(!u){if(l(a=ot(t)))return e(a,r,n,s);u=E(0)}if(o(u,"value")){if(!1===u.writable||!l(s))return!1;if(i=we.f(s,r)){if(i.get||i.set||!1===i.writable)return!1;i.value=n,y.f(s,r,i)}else y.f(s,r,E(0,n));return!0}return void 0!==u.set&&(u.set.call(s,n),!0)}}),ht&&R(R.S,"Reflect",{setPrototypeOf:function(e,t){ht.check(e,t);try{return ht.set(e,t),!0}catch(e){return!1}}});var No=J(!0);R(R.P,"Array",{includes:function(e){return No(this,e,arguments.length>1?arguments[1]:void 0)}}),Yn("includes");var ko=k("isConcatSpreadable");var Po=function e(t,r,n,i,a,o,s,u){for(var c,f,d=a,p=0,h=!!s&&x(s,u,3);p<i;){if(p in n){if(c=h?h(n[p],p,r):n[p],f=!1,l(c)&&(f=void 0!==(f=c[ko])?!!f:ue(c)),f&&o>0)d=e(t,r,c,Y(c.length),d,o-1)-1;else{if(d>=9007199254740991)throw TypeError();t[d]=c}d++}p++}return d};R(R.P,"Array",{flatMap:function(e){var t,r,n=ce(this);return C(e),t=Y(n.length),r=Nn(n,0),Po(r,n,n,t,0,1,e,arguments[1]),r}}),Yn("flatMap"),R(R.P,"Array",{flatten:function(){var e=arguments[0],t=ce(this),r=Y(t.length),n=Nn(t,0);return Po(n,t,t,r,0,void 0===e?1:z(e)),n}}),Yn("flatten");var Mo=Fr(!0);R(R.P,"String",{at:function(e){return Mo(this,e)}});var Do=function(e,t,r,n){var i=String(G(e)),a=i.length,o=void 0===r?" ":String(r),s=Y(t);if(s<=a||""==o)return i;var u=s-a,c=ir.call(o,Math.ceil(u/o.length));return c.length>u&&(c=c.slice(0,u)),n?c+i:i+c},Lo=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(ga);R(R.P+R.F*Lo,"String",{padStart:function(e){return Do(this,e,arguments.length>1?arguments[1]:void 0,!0)}});var Uo=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(ga);R(R.P+R.F*Uo,"String",{padEnd:function(e){return Do(this,e,arguments.length>1?arguments[1]:void 0,!1)}}),Mt("trimLeft",function(e){return function(){return e(this,1)}},"trimStart"),Mt("trimRight",function(e){return function(){return e(this,2)}},"trimEnd");var jo=RegExp.prototype,Fo=function(e,t){this._r=e,this._s=t};Gr(Fo,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),R(R.P,"String",{matchAll:function(e){if(G(this),!$r(e))throw TypeError(e+" is not a regexp!");var t=String(this),r="flags"in jo?String(e.flags):ii.call(e),n=new RegExp(e.source,~r.indexOf("g")?r:"g"+r);return n.lastIndex=Y(e.lastIndex),new Fo(n,t)}}),j("asyncIterator"),j("observable"),R(R.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=q(e),i=we.f,a=Oo(n),o={},s=0;a.length>s;)void 0!==(r=i(n,t=a[s++]))&&En(o,t,r);return o}});var Bo=se.f,Vo=function(e){return function(t){for(var r,n=q(t),i=ae(n),a=i.length,o=0,s=[];a>o;)r=i[o++],u&&!Bo.call(n,r)||s.push(e?[r,n[r]]:n[r]);return s}},Go=Vo(!1);R(R.S,"Object",{values:function(e){return Go(e)}});var qo=Vo(!0);R(R.S,"Object",{entries:function(e){return qo(e)}});var Ko=!s(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete i[e]});u&&R(R.P+Ko,"Object",{__defineGetter__:function(e,t){y.f(ce(this),e,{get:C(t),enumerable:!0,configurable:!0})}}),u&&R(R.P+Ko,"Object",{__defineSetter__:function(e,t){y.f(ce(this),e,{set:C(t),enumerable:!0,configurable:!0})}});var Ho=we.f;u&&R(R.P+Ko,"Object",{__lookupGetter__:function(e){var t,r=ce(this),n=m(e,!0);do{if(t=Ho(r,n))return t.get}while(r=ot(r))}});var zo=we.f;u&&R(R.P+Ko,"Object",{__lookupSetter__:function(e){var t,r=ce(this),n=m(e,!0);do{if(t=zo(r,n))return t.set}while(r=ot(r))}});var Wo=function(e,t){var r=[];return zi(e,!1,r.push,r,t),r},Yo=function(e){return function(){if(gt(this)!=e)throw TypeError(e+"#toJSON isn't generic");return Wo(this)}};R(R.P+R.R,"Map",{toJSON:Yo("Map")}),R(R.P+R.R,"Set",{toJSON:Yo("Set")});var Xo=function(e){R(R.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})};Xo("Map"),Xo("Set"),Xo("WeakMap"),Xo("WeakSet");var $o=function(e){R(R.S,e,{from:function(e){var t,r,n,i,a=arguments[1];return C(this),(t=void 0!==a)&&C(a),null==e?new this:(r=[],t?(n=0,i=x(a,arguments[2],2),zi(e,!1,function(e){r.push(i(e,n++))})):zi(e,!1,r.push,r),new this(r))}})};$o("Map"),$o("Set"),$o("WeakMap"),$o("WeakSet"),R(R.G,{global:i}),R(R.S,"System",{global:i}),R(R.S,"Error",{isError:function(e){return"Error"===B(e)}}),R(R.S,"Math",{clamp:function(e,t,r){return Math.min(r,Math.max(t,e))}}),R(R.S,"Math",{DEG_PER_RAD:Math.PI/180});var Qo=180/Math.PI;R(R.S,"Math",{degrees:function(e){return e*Qo}});var Jo=Math.scale||function(e,t,r,n,i){return 0===arguments.length||e!=e||t!=t||r!=r||n!=n||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-n)/(r-t)+n};R(R.S,"Math",{fscale:function(e,t,r,n,i){return kr(Jo(e,t,r,n,i))}}),R(R.S,"Math",{iaddh:function(e,t,r,n){var i=e>>>0,a=r>>>0;return(t>>>0)+(n>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}}),R(R.S,"Math",{isubh:function(e,t,r,n){var i=e>>>0,a=r>>>0;return(t>>>0)-(n>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}}),R(R.S,"Math",{imulh:function(e,t){var r=+e,n=+t,i=65535&r,a=65535&n,o=r>>16,s=n>>16,u=(o*a>>>0)+(i*a>>>16);return o*s+(u>>16)+((i*s>>>0)+(65535&u)>>16)}}),R(R.S,"Math",{RAD_PER_DEG:180/Math.PI});var Zo=Math.PI/180;R(R.S,"Math",{radians:function(e){return e*Zo}}),R(R.S,"Math",{scale:Jo}),R(R.S,"Math",{umulh:function(e,t){var r=+e,n=+t,i=65535&r,a=65535&n,o=r>>>16,s=n>>>16,u=(o*a>>>0)+(i*a>>>16);return o*s+(u>>>16)+((i*s>>>0)+(65535&u)>>>16)}}),R(R.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}}),R(R.P+R.R,"Promise",{finally:function(e){var t=ji(this,c.Promise||i.Promise),r="function"==typeof e;return this.then(r?function(r){return ya(t,e()).then(function(){return r})}:e,r?function(r){return ya(t,e()).then(function(){throw r})}:e)}}),R(R.S,"Promise",{try:function(e){var t=ha.f(this),r=va(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}});var es=w("metadata"),ts=es.store||(es.store=new to),rs=function(e,t,r){var n=ts.get(e);if(!n){if(!r)return;ts.set(e,n=new Ha)}var i=n.get(t);if(!i){if(!r)return;n.set(t,i=new Ha)}return i},ns={store:ts,map:rs,has:function(e,t,r){var n=rs(t,r,!1);return void 0!==n&&n.has(e)},get:function(e,t,r){var n=rs(t,r,!1);return void 0===n?void 0:n.get(e)},set:function(e,t,r,n){rs(r,n,!0).set(e,t)},keys:function(e,t){var r=rs(e,t,!1),n=[];return r&&r.forEach(function(e,t){n.push(t)}),n},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){R(R.S,"Reflect",e)}},is=ns.key,as=ns.set;ns.exp({defineMetadata:function(e,t,r,n){as(e,t,f(r),is(n))}});var os=ns.key,ss=ns.map,us=ns.store;ns.exp({deleteMetadata:function(e,t){var r=arguments.length<3?void 0:os(arguments[2]),n=ss(f(t),r,!1);if(void 0===n||!n.delete(e))return!1;if(n.size)return!0;var i=us.get(t);return i.delete(r),!!i.size||us.delete(t)}});var cs=ns.has,ls=ns.get,fs=ns.key,ds=function(e,t,r){if(cs(e,t,r))return ls(e,t,r);var n=ot(t);return null!==n?ds(e,n,r):void 0};ns.exp({getMetadata:function(e,t){return ds(e,f(t),arguments.length<3?void 0:fs(arguments[2]))}});var ps=ns.keys,hs=ns.key,vs=function(e,t){var r=ps(e,t),n=ot(e);if(null===n)return r;var i=vs(n,t);return i.length?r.length?Wo(new za(r.concat(i))):i:r};ns.exp({getMetadataKeys:function(e){return vs(f(e),arguments.length<2?void 0:hs(arguments[1]))}});var ms=ns.get,gs=ns.key;ns.exp({getOwnMetadata:function(e,t){return ms(e,f(t),arguments.length<3?void 0:gs(arguments[2]))}});var ys=ns.keys,Es=ns.key;ns.exp({getOwnMetadataKeys:function(e){return ys(f(e),arguments.length<2?void 0:Es(arguments[1]))}});var bs=ns.has,_s=ns.key,Ss=function(e,t,r){if(bs(e,t,r))return!0;var n=ot(t);return null!==n&&Ss(e,n,r)};ns.exp({hasMetadata:function(e,t){return Ss(e,f(t),arguments.length<3?void 0:_s(arguments[2]))}});var Ts=ns.has,ws=ns.key;ns.exp({hasOwnMetadata:function(e,t){return Ts(e,f(t),arguments.length<3?void 0:ws(arguments[2]))}});var Is=ns.key,As=ns.set;ns.exp({metadata:function(e,t){return function(r,n){As(e,t,(void 0!==n?f:C)(r),Is(n))}}});var Cs=ua(),xs=i.process,Os="process"==B(xs);R(R.G,{asap:function(e){var t=Os&&xs.domain;Cs(t?t.bind(e):e)}});var Rs=ua(),Ns=k("observable"),ks=zi.RETURN,Ps=function(e){return null==e?void 0:C(e)},Ms=function(e){var t=e._c;t&&(e._c=void 0,t())},Ds=function(e){return void 0===e._o},Ls=function(e){Ds(e)||(e._o=void 0,Ms(e))},Us=function(e,t){f(e),this._c=void 0,this._o=e,e=new js(this);try{var r=t(e),n=r;null!=r&&("function"==typeof r.unsubscribe?r=function(){n.unsubscribe()}:C(r),this._c=r)}catch(t){return void e.error(t)}Ds(this)&&Ms(this)};Us.prototype=Ea({},{unsubscribe:function(){Ls(this)}});var js=function(e){this._s=e};js.prototype=Ea({},{next:function(e){var t=this._s;if(!Ds(t)){var r=t._o;try{var n=Ps(r.next);if(n)return n.call(r,e)}catch(e){try{Ls(t)}finally{throw e}}}},error:function(e){var t=this._s;if(Ds(t))throw e;var r=t._o;t._o=void 0;try{var n=Ps(r.error);if(!n)throw e;e=n.call(r,e)}catch(e){try{Ms(t)}finally{throw e}}return Ms(t),e},complete:function(e){var t=this._s;if(!Ds(t)){var r=t._o;t._o=void 0;try{var n=Ps(r.complete);e=n?n.call(r,e):void 0}catch(e){try{Ms(t)}finally{throw e}}return Ms(t),e}}});var Fs=function(e){Hi(this,Fs,"Observable","_f")._f=C(e)};Ea(Fs.prototype,{subscribe:function(e){return new Us(e,this._f)},forEach:function(e){var t=this;return new(c.Promise||i.Promise)(function(r,n){C(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){n(e),i.unsubscribe()}},error:n,complete:r})})}}),Ea(Fs,{from:function(e){var t="function"==typeof this?this:Fs,r=Ps(f(e)[Ns]);if(r){var n=f(r.call(e));return n.constructor===t?n:new t(function(e){return n.subscribe(e)})}return new t(function(t){var r=!1;return Rs(function(){if(!r){try{if(zi(e,!1,function(e){if(t.next(e),r)return ks})===ks)return}catch(e){if(r)throw e;return void t.error(e)}t.complete()}}),function(){r=!0}})},of:function(){for(var e=0,t=arguments.length,r=new Array(t);e<t;)r[e]=arguments[e++];return new("function"==typeof this?this:Fs)(function(e){var t=!1;return Rs(function(){if(!t){for(var n=0;n<r.length;++n)if(e.next(r[n]),t)return;e.complete()}}),function(){t=!0}})}}),b(Fs.prototype,Ns,function(){return this}),R(R.G,{Observable:Fs}),ti("Observable");var Bs=[].slice,Vs=/MSIE .\./.test(ga),Gs=function(e){return function(t,r){var n=arguments.length>2,i=!!n&&Bs.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,r)}};R(R.G+R.B+R.F*Vs,{setTimeout:Gs(i.setTimeout),setInterval:Gs(i.setInterval)}),R(R.G+R.B,{setImmediate:ra.set,clearImmediate:ra.clear});for(var qs=k("iterator"),Ks=k("toStringTag"),Hs=Br.Array,zs={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Ws=ae(zs),Ys=0;Ys<Ws.length;Ys++){var Xs,$s=Ws[Ys],Qs=zs[$s],Js=i[$s],Zs=Js&&Js.prototype;if(Zs&&(Zs[qs]||b(Zs,qs,Hs),Zs[Ks]||b(Zs,Ks,$s),Br[$s]=Hs,Qs))for(Xs in ni)Zs[Xs]||A(Zs,Xs,ni[Xs],!0)}n(function(t){!function(e){var r,n=Object.prototype,i=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",c=e.regeneratorRuntime;if(c)t.exports=c;else{(c=e.regeneratorRuntime=t.exports).wrap=E;var l="suspendedStart",f="suspendedYield",d="executing",p="completed",h={},v={};v[o]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(R([])));g&&g!==n&&i.call(g,o)&&(v=g);var y=T.prototype=_.prototype=Object.create(v);S.prototype=y.constructor=T,T.constructor=S,T[u]=S.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,T):(e.__proto__=T,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(y),e},c.awrap=function(e){return{__await:e}},w(I.prototype),I.prototype[s]=function(){return this},c.AsyncIterator=I,c.async=function(e,t,r,n){var i=new I(E(e,t,r,n));return c.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},w(y),y[u]="Generator",y[o]=function(){return this},y.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},c.values=R,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return s.type="throw",s.arg=e,t.next=n,i&&(t.method="next",t.arg=r),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),h}}}function E(e,t,r,n){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),o=new O(n||[]);return a._invoke=function(e,t,r){var n=l;return function(i,a){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw a;return N()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=A(o,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var u=b(e,t,r);if("normal"===u.type){if(n=r.done?p:f,u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}(e,r,o),a}function b(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function _(){}function S(){}function T(){}function w(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function I(t){function r(e,n,a,o){var s=b(t[e],t,n);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(e){r("next",e,a,o)},function(e){r("throw",e,a,o)}):Promise.resolve(c).then(function(e){u.value=e,a(u)},o)}o(s.arg)}var n;"object"==typeof e.process&&e.process.domain&&(r=e.process.domain.bind(r)),this._invoke=function(e,t){function i(){return new Promise(function(n,i){r(e,t,n,i)})}return n=n?n.then(i,i):i()}}function A(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,A(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=b(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return a.next=a}}return{next:N}}function N(){return{value:r,done:!0}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:e)});var eu=function(e,t){var r=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,r)}}(/[\\^$*+?.()|[\]{}]/g,"\\$&");R(R.S,"RegExp",{escape:function(e){return eu(e)}});c.RegExp.escape;if(e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var tu="defineProperty";function ru(e,t,r){e[t]||Object[tu](e,t,{writable:!0,configurable:!0,value:r})}ru(String.prototype,"padLeft","".padStart),ru(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&ru(Array,e,Function.call.bind([][e]))});var nu="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function iu(){throw new Error("setTimeout has not been defined")}function au(){throw new Error("clearTimeout has not been defined")}var ou=iu,su=au;function uu(e){if(ou===setTimeout)return setTimeout(e,0);if((ou===iu||!ou)&&setTimeout)return ou=setTimeout,setTimeout(e,0);try{return ou(e,0)}catch(t){try{return ou.call(null,e,0)}catch(t){return ou.call(this,e,0)}}}"function"==typeof nu.setTimeout&&(ou=setTimeout),"function"==typeof nu.clearTimeout&&(su=clearTimeout);var cu,lu=[],fu=!1,du=-1;function pu(){fu&&cu&&(fu=!1,cu.length?lu=cu.concat(lu):du=-1,lu.length&&hu())}function hu(){if(!fu){var e=uu(pu);fu=!0;for(var t=lu.length;t;){for(cu=lu,lu=[];++du<t;)cu&&cu[du].run();du=-1,t=lu.length}cu=null,fu=!1,function(e){if(su===clearTimeout)return clearTimeout(e);if((su===au||!su)&&clearTimeout)return su=clearTimeout,clearTimeout(e);try{su(e)}catch(t){try{return su.call(null,e)}catch(t){return su.call(this,e)}}}(e)}}function vu(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];lu.push(new mu(e,t)),1!==lu.length||fu||uu(hu)}function mu(e,t){this.fun=e,this.array=t}mu.prototype.run=function(){this.fun.apply(null,this.array)};function gu(){}var yu=gu,Eu=gu,bu=gu,_u=gu,Su=gu,Tu=gu,wu=gu;var Iu=nu.performance||{},Au=Iu.now||Iu.mozNow||Iu.msNow||Iu.oNow||Iu.webkitNow||function(){return(new Date).getTime()};var Cu=new Date;var xu={nextTick:vu,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:yu,addListener:Eu,once:bu,off:_u,removeListener:Su,removeAllListeners:Tu,emit:wu,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Au.call(Iu),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Cu)/1e3}},Ou={}.toString,Ru=function(e){return Ou.call(e).slice(8,-1)},Nu=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==Ru(e)?e.split(""):Object(e)},ku=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},Pu=function(e){return Nu(ku(e))},Mu={f:{}.propertyIsEnumerable},Du=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Lu=function(e){return"object"==typeof e?null!==e:"function"==typeof e},Uu=function(e,t){if(!Lu(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!Lu(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!Lu(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!Lu(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")},ju={}.hasOwnProperty,Fu=function(e,t){return ju.call(e,t)},Bu=function(e){try{return!!e()}catch(e){return!0}},Vu=!Bu(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Gu=n(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),qu=Gu.document,Ku=Lu(qu)&&Lu(qu.createElement),Hu=function(e){return Ku?qu.createElement(e):{}},zu=!Vu&&!Bu(function(){return 7!=Object.defineProperty(Hu("div"),"a",{get:function(){return 7}}).a}),Wu=Object.getOwnPropertyDescriptor,Yu={f:Vu?Wu:function(e,t){if(e=Pu(e),t=Uu(t,!0),zu)try{return Wu(e,t)}catch(e){}if(Fu(e,t))return Du(!Mu.f.call(e,t),e[t])}},Xu=n(function(e){var t=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=t)}),$u=(Xu.version,function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}),Qu=function(e,t,r){if($u(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}},Ju=function(e){if(!Lu(e))throw TypeError(e+" is not an object!");return e},Zu=Object.defineProperty,ec={f:Vu?Object.defineProperty:function(e,t,r){if(Ju(e),t=Uu(t,!0),Ju(r),zu)try{return Zu(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},tc=Vu?function(e,t,r){return ec.f(e,t,Du(1,r))}:function(e,t,r){return e[t]=r,e},rc=function(e,t,r){var n,i,a,o=e&rc.F,s=e&rc.G,u=e&rc.S,c=e&rc.P,l=e&rc.B,f=e&rc.W,d=s?Xu:Xu[t]||(Xu[t]={}),p=d.prototype,h=s?Gu:u?Gu[t]:(Gu[t]||{}).prototype;for(n in s&&(r=t),r)(i=!o&&h&&void 0!==h[n])&&Fu(d,n)||(a=i?h[n]:r[n],d[n]=s&&"function"!=typeof h[n]?r[n]:l&&i?Qu(a,Gu):f&&h[n]==a?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(a):c&&"function"==typeof a?Qu(Function.call,a):a,c&&((d.virtual||(d.virtual={}))[n]=a,e&rc.R&&p&&!p[n]&&tc(p,n,a)))};rc.F=1,rc.G=2,rc.S=4,rc.P=8,rc.B=16,rc.W=32,rc.U=64,rc.R=128;var nc=rc,ic=function(e,t){var r=(Xu.Object||{})[e]||Object[e],n={};n[e]=t(r),nc(nc.S+nc.F*Bu(function(){r(1)}),"Object",n)},ac=Yu.f;ic("getOwnPropertyDescriptor",function(){return function(e,t){return ac(Pu(e),t)}});var oc=Xu.Object,sc=function(e,t){return oc.getOwnPropertyDescriptor(e,t)},uc=n(function(e){e.exports={default:sc,__esModule:!0}});r(uc);var cc=Yu.f;nc(nc.S,"Reflect",{deleteProperty:function(e,t){var r=cc(Ju(e),t);return!(r&&!r.configurable)&&delete e[t]}});var lc=Xu.Reflect.deleteProperty,fc=n(function(e){e.exports={default:lc,__esModule:!0}});r(fc);var dc,pc=Math.ceil,hc=Math.floor,vc=function(e){return isNaN(e=+e)?0:(e>0?hc:pc)(e)},mc=tc,gc={},yc=Math.min,Ec=function(e){return e>0?yc(vc(e),9007199254740991):0},bc=Math.max,_c=Math.min,Sc=n(function(e){var t=Gu["__core-js_shared__"]||(Gu["__core-js_shared__"]={});(e.exports=function(e,r){return t[e]||(t[e]=void 0!==r?r:{})})("versions",[]).push({version:Xu.version,mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),Tc=0,wc=Math.random(),Ic=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++Tc+wc).toString(36))},Ac=Sc("keys"),Cc=function(e){return Ac[e]||(Ac[e]=Ic(e))},xc=(dc=!1,function(e,t,r){var n,i=Pu(e),a=Ec(i.length),o=function(e,t){return(e=vc(e))<0?bc(e+t,0):_c(e,t)}(r,a);if(dc&&t!=t){for(;a>o;)if((n=i[o++])!=n)return!0}else for(;a>o;o++)if((dc||o in i)&&i[o]===t)return dc||o||0;return!dc&&-1}),Oc=Cc("IE_PROTO"),Rc=function(e,t){var r,n=Pu(e),i=0,a=[];for(r in n)r!=Oc&&Fu(n,r)&&a.push(r);for(;t.length>i;)Fu(n,r=t[i++])&&(~xc(a,r)||a.push(r));return a},Nc="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),kc=Object.keys||function(e){return Rc(e,Nc)},Pc=Vu?Object.defineProperties:function(e,t){Ju(e);for(var r,n=kc(t),i=n.length,a=0;i>a;)ec.f(e,r=n[a++],t[r]);return e},Mc=Gu.document,Dc=Mc&&Mc.documentElement,Lc=Cc("IE_PROTO"),Uc=function(){},jc=function(){var e,t=Hu("iframe"),r=Nc.length;for(t.style.display="none",Dc.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),jc=e.F;r--;)delete jc.prototype[Nc[r]];return jc()},Fc=Object.create||function(e,t){var r;return null!==e?(Uc.prototype=Ju(e),r=new Uc,Uc.prototype=null,r[Lc]=e):r=jc(),void 0===t?r:Pc(r,t)},Bc=n(function(e){var t=Sc("wks"),r=Gu.Symbol,n="function"==typeof r;(e.exports=function(e){return t[e]||(t[e]=n&&r[e]||(n?r:Ic)("Symbol."+e))}).store=t}),Vc=ec.f,Gc=Bc("toStringTag"),qc=function(e,t,r){e&&!Fu(e=r?e:e.prototype,Gc)&&Vc(e,Gc,{configurable:!0,value:t})},Kc={};tc(Kc,Bc("iterator"),function(){return this});var Hc=function(e){return Object(ku(e))},zc=Cc("IE_PROTO"),Wc=Object.prototype,Yc=Object.getPrototypeOf||function(e){return e=Hc(e),Fu(e,zc)?e[zc]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Wc:null},Xc=Bc("iterator"),$c=!([].keys&&"next"in[].keys()),Qc=function(){return this},Jc=function(e,t,r,n,i,a,o){!function(e,t,r){e.prototype=Fc(Kc,{next:Du(1,r)}),qc(e,t+" Iterator")}(r,t,n);var s,u,c,l=function(e){if(!$c&&e in h)return h[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},f=t+" Iterator",d="values"==i,p=!1,h=e.prototype,v=h[Xc]||h["@@iterator"]||i&&h[i],m=v||l(i),g=i?d?l("entries"):m:void 0,y="Array"==t&&h.entries||v;if(y&&(c=Yc(y.call(new e)))!==Object.prototype&&c.next&&qc(c,f,!0),d&&v&&"values"!==v.name&&(p=!0,m=function(){return v.call(this)}),o&&($c||p||!h[Xc])&&tc(h,Xc,m),gc[t]=m,gc[f]=Qc,i)if(s={values:d?m:l("values"),keys:a?m:l("keys"),entries:g},o)for(u in s)u in h||mc(h,u,s[u]);else nc(nc.P+nc.F*($c||p),t,s);return s},Zc=function(e){return function(t,r){var n,i,a=String(ku(t)),o=vc(r),s=a.length;return o<0||o>=s?e?"":void 0:(n=a.charCodeAt(o))<55296||n>56319||o+1===s||(i=a.charCodeAt(o+1))<56320||i>57343?e?a.charAt(o):n:e?a.slice(o,o+2):i-56320+(n-55296<<10)+65536}}(!0);Jc(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=Zc(t,r),this._i+=e.length,{value:e,done:!1})});var el=function(e,t){return{value:t,done:!!e}};Jc(Array,"Array",function(e,t){this._t=Pu(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,el(1)):el(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values");gc.Arguments=gc.Array;for(var tl=Bc("toStringTag"),rl="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),nl=0;nl<rl.length;nl++){var il=rl[nl],al=Gu[il],ol=al&&al.prototype;ol&&!ol[tl]&&tc(ol,tl,il),gc[il]=gc.Array}var sl,ul,cl,ll=Bc("toStringTag"),fl="Arguments"==Ru(function(){return arguments}()),dl=function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),ll))?r:fl?Ru(t):"Object"==(n=Ru(t))&&"function"==typeof t.callee?"Arguments":n},pl=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e},hl=function(e,t,r,n){try{return n?t(Ju(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&Ju(i.call(e)),t}},vl=Bc("iterator"),ml=Array.prototype,gl=function(e){return void 0!==e&&(gc.Array===e||ml[vl]===e)},yl=Bc("iterator"),El=Xu.getIteratorMethod=function(e){if(null!=e)return e[yl]||e["@@iterator"]||gc[dl(e)]},bl=n(function(e){var t={},r={},n=e.exports=function(e,n,i,a,o){var s,u,c,l,f=o?function(){return e}:El(e),d=Qu(i,a,n?2:1),p=0;if("function"!=typeof f)throw TypeError(e+" is not iterable!");if(gl(f)){for(s=Ec(e.length);s>p;p++)if((l=n?d(Ju(u=e[p])[0],u[1]):d(e[p]))===t||l===r)return l}else for(c=f.call(e);!(u=c.next()).done;)if((l=hl(c,d,u.value,n))===t||l===r)return l};n.BREAK=t,n.RETURN=r}),_l=Bc("species"),Sl=function(e,t){var r,n=Ju(e).constructor;return void 0===n||null==(r=Ju(n)[_l])?t:$u(r)},Tl=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)},wl=Gu.process,Il=Gu.setImmediate,Al=Gu.clearImmediate,Cl=Gu.MessageChannel,xl=Gu.Dispatch,Ol=0,Rl={},Nl=function(){var e=+this;if(Rl.hasOwnProperty(e)){var t=Rl[e];delete Rl[e],t()}},kl=function(e){Nl.call(e.data)};Il&&Al||(Il=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return Rl[++Ol]=function(){Tl("function"==typeof e?e:Function(e),t)},sl(Ol),Ol},Al=function(e){delete Rl[e]},"process"==Ru(wl)?sl=function(e){wl.nextTick(Qu(Nl,e,1))}:xl&&xl.now?sl=function(e){xl.now(Qu(Nl,e,1))}:Cl?(cl=(ul=new Cl).port2,ul.port1.onmessage=kl,sl=Qu(cl.postMessage,cl,1)):Gu.addEventListener&&"function"==typeof postMessage&&!Gu.importScripts?(sl=function(e){Gu.postMessage(e+"","*")},Gu.addEventListener("message",kl,!1)):sl="onreadystatechange"in Hu("script")?function(e){Dc.appendChild(Hu("script")).onreadystatechange=function(){Dc.removeChild(this),Nl.call(e)}}:function(e){setTimeout(Qu(Nl,e,1),0)});var Pl={set:Il,clear:Al},Ml=Pl.set,Dl=Gu.MutationObserver||Gu.WebKitMutationObserver,Ll=Gu.process,Ul=Gu.Promise,jl="process"==Ru(Ll);function Fl(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=$u(t),this.reject=$u(r)}var Bl={f:function(e){return new Fl(e)}},Vl=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}},Gl=Gu.navigator,ql=Gl&&Gl.userAgent||"",Kl=function(e,t){if(Ju(e),Lu(t)&&t.constructor===e)return t;var r=Bl.f(e);return(0,r.resolve)(t),r.promise},Hl=function(e,t,r){for(var n in t)r&&e[n]?e[n]=t[n]:tc(e,n,t[n]);return e},zl=Bc("species"),Wl=function(e){var t="function"==typeof Xu[e]?Xu[e]:Gu[e];Vu&&t&&!t[zl]&&ec.f(t,zl,{configurable:!0,get:function(){return this}})},Yl=Bc("iterator"),Xl=!1;try{[7][Yl]().return=function(){Xl=!0}}catch(e){}var $l,Ql,Jl,Zl,ef=function(e,t){if(!t&&!Xl)return!1;var r=!1;try{var n=[7],i=n[Yl]();i.next=function(){return{done:r=!0}},n[Yl]=function(){return i},e(n)}catch(e){}return r},tf=Pl.set,rf=function(){var e,t,r,n=function(){var n,i;for(jl&&(n=Ll.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(jl)r=function(){Ll.nextTick(n)};else if(!Dl||Gu.navigator&&Gu.navigator.standalone)if(Ul&&Ul.resolve){var i=Ul.resolve(void 0);r=function(){i.then(n)}}else r=function(){Ml.call(Gu,n)};else{var a=!0,o=document.createTextNode("");new Dl(n).observe(o,{characterData:!0}),r=function(){o.data=a=!a}}return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}(),nf=Gu.TypeError,af=Gu.process,of=af&&af.versions,sf=of&&of.v8||"",uf=Gu.Promise,cf="process"==dl(af),lf=function(){},ff=Ql=Bl.f,df=!!function(){try{var e=uf.resolve(1),t=(e.constructor={})[Bc("species")]=function(e){e(lf,lf)};return(cf||"function"==typeof PromiseRejectionEvent)&&e.then(lf)instanceof t&&0!==sf.indexOf("6.6")&&-1===ql.indexOf("Chrome/66")}catch(e){}}(),pf=function(e){var t;return!(!Lu(e)||"function"!=typeof(t=e.then))&&t},hf=function(e,t){if(!e._n){e._n=!0;var r=e._c;rf(function(){for(var n=e._v,i=1==e._s,a=0,o=function(t){var r,a,o,s=i?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{s?(i||(2==e._h&&gf(e),e._h=1),!0===s?r=n:(l&&l.enter(),r=s(n),l&&(l.exit(),o=!0)),r===t.promise?c(nf("Promise-chain cycle")):(a=pf(r))?a.call(r,u,c):u(r)):c(n)}catch(e){l&&!o&&l.exit(),c(e)}};r.length>a;)o(r[a++]);e._c=[],e._n=!1,t&&!e._h&&vf(e)})}},vf=function(e){tf.call(Gu,function(){var t,r,n,i=e._v,a=mf(e);if(a&&(t=Vl(function(){cf?af.emit("unhandledRejection",i,e):(r=Gu.onunhandledrejection)?r({promise:e,reason:i}):(n=Gu.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=cf||mf(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},mf=function(e){return 1!==e._h&&0===(e._a||e._c).length},gf=function(e){tf.call(Gu,function(){var t;cf?af.emit("rejectionHandled",e):(t=Gu.onrejectionhandled)&&t({promise:e,reason:e._v})})},yf=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),hf(t,!0))},Ef=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw nf("Promise can't be resolved itself");(t=pf(e))?rf(function(){var n={_w:r,_d:!1};try{t.call(e,Qu(Ef,n,1),Qu(yf,n,1))}catch(e){yf.call(n,e)}}):(r._v=e,r._s=1,hf(r,!1))}catch(e){yf.call({_w:r,_d:!1},e)}}};df||(uf=function(e){pl(this,uf,"Promise","_h"),$u(e),$l.call(this);try{e(Qu(Ef,this,1),Qu(yf,this,1))}catch(e){yf.call(this,e)}},($l=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=Hl(uf.prototype,{then:function(e,t){var r=ff(Sl(this,uf));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=cf?af.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&hf(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),Jl=function(){var e=new $l;this.promise=e,this.resolve=Qu(Ef,e,1),this.reject=Qu(yf,e,1)},Bl.f=ff=function(e){return e===uf||e===Zl?new Jl(e):Ql(e)}),nc(nc.G+nc.W+nc.F*!df,{Promise:uf}),qc(uf,"Promise"),Wl("Promise"),Zl=Xu.Promise,nc(nc.S+nc.F*!df,"Promise",{reject:function(e){var t=ff(this);return(0,t.reject)(e),t.promise}}),nc(nc.S+!0*nc.F,"Promise",{resolve:function(e){return Kl(this===Zl?uf:this,e)}}),nc(nc.S+nc.F*!(df&&ef(function(e){uf.all(e).catch(lf)})),"Promise",{all:function(e){var t=this,r=ff(t),n=r.resolve,i=r.reject,a=Vl(function(){var r=[],a=0,o=1;bl(e,!1,function(e){var s=a++,u=!1;r.push(void 0),o++,t.resolve(e).then(function(e){u||(u=!0,r[s]=e,--o||n(r))},i)}),--o||n(r)});return a.e&&i(a.v),r.promise},race:function(e){var t=this,r=ff(t),n=r.reject,i=Vl(function(){bl(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}}),nc(nc.P+nc.R,"Promise",{finally:function(e){var t=Sl(this,Xu.Promise||Gu.Promise),r="function"==typeof e;return this.then(r?function(r){return Kl(t,e()).then(function(){return r})}:e,r?function(r){return Kl(t,e()).then(function(){throw r})}:e)}}),nc(nc.S,"Promise",{try:function(e){var t=Bl.f(this),r=Vl(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}});var bf=Xu.Promise,_f=n(function(e){e.exports={default:bf,__esModule:!0}});r(_f);var Sf={f:Object.getOwnPropertySymbols},Tf=Object.assign,wf=!Tf||Bu(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=Tf({},e)[r]||Object.keys(Tf({},t)).join("")!=n})?function(e,t){for(var r=Hc(e),n=arguments.length,i=1,a=Sf.f,o=Mu.f;n>i;)for(var s,u=Nu(arguments[i++]),c=a?kc(u).concat(a(u)):kc(u),l=c.length,f=0;l>f;)s=c[f++],Vu&&!o.call(u,s)||(r[s]=u[s]);return r}:Tf;nc(nc.S+nc.F,"Object",{assign:wf});var If=Xu.Object.assign,Af=n(function(e){e.exports={default:If,__esModule:!0}});r(Af);var Cf=(Gu.Reflect||{}).apply,xf=Function.apply;nc(nc.S+nc.F*!Bu(function(){Cf(function(){})}),"Reflect",{apply:function(e,t,r){var n=$u(e),i=Ju(r);return Cf?Cf(n,t,i):xf.call(n,t,i)}});var Of=Xu.Reflect.apply,Rf=n(function(e){e.exports={default:Of,__esModule:!0}});r(Rf);var Nf=Xu.JSON||(Xu.JSON={stringify:JSON.stringify}),kf=function(e){return Nf.stringify.apply(Nf,arguments)},Pf=n(function(e){e.exports={default:kf,__esModule:!0}});r(Pf);var Mf=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i};var Df=function(){this.__data__=[],this.size=0};var Lf=function(e,t){return e===t||e!=e&&t!=t};var Uf=function(e,t){for(var r=e.length;r--;)if(Lf(e[r][0],t))return r;return-1},jf=Array.prototype.splice;var Ff=function(e){var t=this.__data__,r=Uf(t,e);return!(r<0||(r==t.length-1?t.pop():jf.call(t,r,1),--this.size,0))};var Bf=function(e){var t=this.__data__,r=Uf(t,e);return r<0?void 0:t[r][1]};var Vf=function(e){return Uf(this.__data__,e)>-1};var Gf=function(e,t){var r=this.__data__,n=Uf(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function qf(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}qf.prototype.clear=Df,qf.prototype.delete=Ff,qf.prototype.get=Bf,qf.prototype.has=Vf,qf.prototype.set=Gf;var Kf=qf;var Hf=function(){this.__data__=new Kf,this.size=0};var zf=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var Wf=function(e){return this.__data__.get(e)};var Yf=function(e){return this.__data__.has(e)},Xf="object"==typeof e&&e&&e.Object===Object&&e,$f="object"==typeof self&&self&&self.Object===Object&&self,Qf=Xf||$f||Function("return this")(),Jf=Qf.Symbol,Zf=Object.prototype,ed=Zf.hasOwnProperty,td=Zf.toString,rd=Jf?Jf.toStringTag:void 0;var nd=function(e){var t=ed.call(e,rd),r=e[rd];try{e[rd]=void 0;var n=!0}catch(e){}var i=td.call(e);return n&&(t?e[rd]=r:delete e[rd]),i},id=Object.prototype.toString;var ad=function(e){return id.call(e)},od="[object Null]",sd="[object Undefined]",ud=Jf?Jf.toStringTag:void 0;var cd=function(e){return null==e?void 0===e?sd:od:ud&&ud in Object(e)?nd(e):ad(e)};var ld=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},fd="[object AsyncFunction]",dd="[object Function]",pd="[object GeneratorFunction]",hd="[object Proxy]";var vd,md=function(e){if(!ld(e))return!1;var t=cd(e);return t==dd||t==pd||t==fd||t==hd},gd=Qf["__core-js_shared__"],yd=(vd=/[^.]+$/.exec(gd&&gd.keys&&gd.keys.IE_PROTO||""))?"Symbol(src)_1."+vd:"";var Ed=function(e){return!!yd&&yd in e},bd=Function.prototype.toString;var _d=function(e){if(null!=e){try{return bd.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Sd=/^\[object .+?Constructor\]$/,Td=Function.prototype,wd=Object.prototype,Id=Td.toString,Ad=wd.hasOwnProperty,Cd=RegExp("^"+Id.call(Ad).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var xd=function(e){return!(!ld(e)||Ed(e))&&(md(e)?Cd:Sd).test(_d(e))};var Od=function(e,t){return null==e?void 0:e[t]};var Rd=function(e,t){var r=Od(e,t);return xd(r)?r:void 0},Nd=Rd(Qf,"Map"),kd=Rd(Object,"create");var Pd=function(){this.__data__=kd?kd(null):{},this.size=0};var Md=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Dd="__lodash_hash_undefined__",Ld=Object.prototype.hasOwnProperty;var Ud=function(e){var t=this.__data__;if(kd){var r=t[e];return r===Dd?void 0:r}return Ld.call(t,e)?t[e]:void 0},jd=Object.prototype.hasOwnProperty;var Fd=function(e){var t=this.__data__;return kd?void 0!==t[e]:jd.call(t,e)},Bd="__lodash_hash_undefined__";var Vd=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=kd&&void 0===t?Bd:t,this};function Gd(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Gd.prototype.clear=Pd,Gd.prototype.delete=Md,Gd.prototype.get=Ud,Gd.prototype.has=Fd,Gd.prototype.set=Vd;var qd=Gd;var Kd=function(){this.size=0,this.__data__={hash:new qd,map:new(Nd||Kf),string:new qd}};var Hd=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var zd=function(e,t){var r=e.__data__;return Hd(t)?r["string"==typeof t?"string":"hash"]:r.map};var Wd=function(e){var t=zd(this,e).delete(e);return this.size-=t?1:0,t};var Yd=function(e){return zd(this,e).get(e)};var Xd=function(e){return zd(this,e).has(e)};var $d=function(e,t){var r=zd(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Qd(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Qd.prototype.clear=Kd,Qd.prototype.delete=Wd,Qd.prototype.get=Yd,Qd.prototype.has=Xd,Qd.prototype.set=$d;var Jd=Qd,Zd=200;var ep=function(e,t){var r=this.__data__;if(r instanceof Kf){var n=r.__data__;if(!Nd||n.length<Zd-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Jd(n)}return r.set(e,t),this.size=r.size,this};function tp(e){var t=this.__data__=new Kf(e);this.size=t.size}tp.prototype.clear=Hf,tp.prototype.delete=zf,tp.prototype.get=Wf,tp.prototype.has=Yf,tp.prototype.set=ep;var rp=tp;var np=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},ip=function(){try{var e=Rd(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var ap=function(e,t,r){"__proto__"==t&&ip?ip(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},op=Object.prototype.hasOwnProperty;var sp=function(e,t,r){var n=e[t];op.call(e,t)&&Lf(n,r)&&(void 0!==r||t in e)||ap(e,t,r)};var up=function(e,t,r,n){var i=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],u=n?n(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),i?ap(r,s,u):sp(r,s,u)}return r};var cp=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var lp=function(e){return null!=e&&"object"==typeof e},fp="[object Arguments]";var dp=function(e){return lp(e)&&cd(e)==fp},pp=Object.prototype,hp=pp.hasOwnProperty,vp=pp.propertyIsEnumerable,mp=dp(function(){return arguments}())?dp:function(e){return lp(e)&&hp.call(e,"callee")&&!vp.call(e,"callee")},gp=Array.isArray;var yp=function(){return!1},Ep=n(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?Qf.Buffer:void 0,a=(i?i.isBuffer:void 0)||yp;e.exports=a}),bp=9007199254740991,_p=/^(?:0|[1-9]\d*)$/;var Sp=function(e,t){var r=typeof e;return!!(t=null==t?bp:t)&&("number"==r||"symbol"!=r&&_p.test(e))&&e>-1&&e%1==0&&e<t},Tp=9007199254740991;var wp=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Tp},Ip={};Ip["[object Float32Array]"]=Ip["[object Float64Array]"]=Ip["[object Int8Array]"]=Ip["[object Int16Array]"]=Ip["[object Int32Array]"]=Ip["[object Uint8Array]"]=Ip["[object Uint8ClampedArray]"]=Ip["[object Uint16Array]"]=Ip["[object Uint32Array]"]=!0,Ip["[object Arguments]"]=Ip["[object Array]"]=Ip["[object ArrayBuffer]"]=Ip["[object Boolean]"]=Ip["[object DataView]"]=Ip["[object Date]"]=Ip["[object Error]"]=Ip["[object Function]"]=Ip["[object Map]"]=Ip["[object Number]"]=Ip["[object Object]"]=Ip["[object RegExp]"]=Ip["[object Set]"]=Ip["[object String]"]=Ip["[object WeakMap]"]=!1;var Ap=function(e){return lp(e)&&wp(e.length)&&!!Ip[cd(e)]};var Cp=function(e){return function(t){return e(t)}},xp=n(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r&&Xf.process,a=function(){try{var e=n&&n.require&&n.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=a}),Op=xp&&xp.isTypedArray,Rp=Op?Cp(Op):Ap,Np=Object.prototype.hasOwnProperty;var kp=function(e,t){var r=gp(e),n=!r&&mp(e),i=!r&&!n&&Ep(e),a=!r&&!n&&!i&&Rp(e),o=r||n||i||a,s=o?cp(e.length,String):[],u=s.length;for(var c in e)!t&&!Np.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Sp(c,u))||s.push(c);return s},Pp=Object.prototype;var Mp=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pp)};var Dp=function(e,t){return function(r){return e(t(r))}},Lp=Dp(Object.keys,Object),Up=Object.prototype.hasOwnProperty;var jp=function(e){if(!Mp(e))return Lp(e);var t=[];for(var r in Object(e))Up.call(e,r)&&"constructor"!=r&&t.push(r);return t};var Fp=function(e){return null!=e&&wp(e.length)&&!md(e)};var Bp=function(e){return Fp(e)?kp(e):jp(e)};var Vp=function(e,t){return e&&up(t,Bp(t),e)};var Gp=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},qp=Object.prototype.hasOwnProperty;var Kp=function(e){if(!ld(e))return Gp(e);var t=Mp(e),r=[];for(var n in e)("constructor"!=n||!t&&qp.call(e,n))&&r.push(n);return r};var Hp=function(e){return Fp(e)?kp(e,!0):Kp(e)};var zp=function(e,t){return e&&up(t,Hp(t),e)},Wp=n(function(e,t){var r=t&&!t.nodeType&&t,n=r&&e&&!e.nodeType&&e,i=n&&n.exports===r?Qf.Buffer:void 0,a=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}});var Yp=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t};var Xp=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a};var $p=function(){return[]},Qp=Object.prototype.propertyIsEnumerable,Jp=Object.getOwnPropertySymbols,Zp=Jp?function(e){return null==e?[]:(e=Object(e),Xp(Jp(e),function(t){return Qp.call(e,t)}))}:$p;var eh=function(e,t){return up(e,Zp(e),t)};var th=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e},rh=Dp(Object.getPrototypeOf,Object),nh=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)th(t,Zp(e)),e=rh(e);return t}:$p;var ih=function(e,t){return up(e,nh(e),t)};var ah=function(e,t,r){var n=t(e);return gp(e)?n:th(n,r(e))};var oh=function(e){return ah(e,Bp,Zp)};var sh=function(e){return ah(e,Hp,nh)},uh=Rd(Qf,"DataView"),ch=Rd(Qf,"Promise"),lh=Rd(Qf,"Set"),fh=Rd(Qf,"WeakMap"),dh=_d(uh),ph=_d(Nd),hh=_d(ch),vh=_d(lh),mh=_d(fh),gh=cd;(uh&&"[object DataView]"!=gh(new uh(new ArrayBuffer(1)))||Nd&&"[object Map]"!=gh(new Nd)||ch&&"[object Promise]"!=gh(ch.resolve())||lh&&"[object Set]"!=gh(new lh)||fh&&"[object WeakMap]"!=gh(new fh))&&(gh=function(e){var t=cd(e),r="[object Object]"==t?e.constructor:void 0,n=r?_d(r):"";if(n)switch(n){case dh:return"[object DataView]";case ph:return"[object Map]";case hh:return"[object Promise]";case vh:return"[object Set]";case mh:return"[object WeakMap]"}return t});var yh=gh,Eh=Object.prototype.hasOwnProperty;var bh=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Eh.call(e,"index")&&(r.index=e.index,r.input=e.input),r},_h=Qf.Uint8Array;var Sh=function(e){var t=new e.constructor(e.byteLength);return new _h(t).set(new _h(e)),t};var Th=function(e,t){var r=t?Sh(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},wh=/\w*$/;var Ih=function(e){var t=new e.constructor(e.source,wh.exec(e));return t.lastIndex=e.lastIndex,t},Ah=Jf?Jf.prototype:void 0,Ch=Ah?Ah.valueOf:void 0;var xh=function(e){return Ch?Object(Ch.call(e)):{}};var Oh=function(e,t){var r=t?Sh(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},Rh="[object Boolean]",Nh="[object Date]",kh="[object Map]",Ph="[object Number]",Mh="[object RegExp]",Dh="[object Set]",Lh="[object String]",Uh="[object Symbol]",jh="[object ArrayBuffer]",Fh="[object DataView]",Bh="[object Float32Array]",Vh="[object Float64Array]",Gh="[object Int8Array]",qh="[object Int16Array]",Kh="[object Int32Array]",Hh="[object Uint8Array]",zh="[object Uint8ClampedArray]",Wh="[object Uint16Array]",Yh="[object Uint32Array]";var Xh=function(e,t,r){var n=e.constructor;switch(t){case jh:return Sh(e);case Rh:case Nh:return new n(+e);case Fh:return Th(e,r);case Bh:case Vh:case Gh:case qh:case Kh:case Hh:case zh:case Wh:case Yh:return Oh(e,r);case kh:return new n;case Ph:case Lh:return new n(e);case Mh:return Ih(e);case Dh:return new n;case Uh:return xh(e)}},$h=Object.create,Qh=function(){function e(){}return function(t){if(!ld(t))return{};if($h)return $h(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();var Jh=function(e){return"function"!=typeof e.constructor||Mp(e)?{}:Qh(rh(e))},Zh="[object Map]";var ev=function(e){return lp(e)&&yh(e)==Zh},tv=xp&&xp.isMap,rv=tv?Cp(tv):ev,nv="[object Set]";var iv=function(e){return lp(e)&&yh(e)==nv},av=xp&&xp.isSet,ov=av?Cp(av):iv,sv=1,uv=2,cv=4,lv="[object Arguments]",fv="[object Function]",dv="[object GeneratorFunction]",pv="[object Object]",hv={};hv[lv]=hv["[object Array]"]=hv["[object ArrayBuffer]"]=hv["[object DataView]"]=hv["[object Boolean]"]=hv["[object Date]"]=hv["[object Float32Array]"]=hv["[object Float64Array]"]=hv["[object Int8Array]"]=hv["[object Int16Array]"]=hv["[object Int32Array]"]=hv["[object Map]"]=hv["[object Number]"]=hv[pv]=hv["[object RegExp]"]=hv["[object Set]"]=hv["[object String]"]=hv["[object Symbol]"]=hv["[object Uint8Array]"]=hv["[object Uint8ClampedArray]"]=hv["[object Uint16Array]"]=hv["[object Uint32Array]"]=!0,hv["[object Error]"]=hv[fv]=hv["[object WeakMap]"]=!1;var vv=function e(t,r,n,i,a,o){var s,u=r&sv,c=r&uv,l=r&cv;if(n&&(s=a?n(t,i,a,o):n(t)),void 0!==s)return s;if(!ld(t))return t;var f=gp(t);if(f){if(s=bh(t),!u)return Yp(t,s)}else{var d=yh(t),p=d==fv||d==dv;if(Ep(t))return Wp(t,u);if(d==pv||d==lv||p&&!a){if(s=c||p?{}:Jh(t),!u)return c?ih(t,zp(s,t)):eh(t,Vp(s,t))}else{if(!hv[d])return a?t:{};s=Xh(t,d,u)}}o||(o=new rp);var h=o.get(t);if(h)return h;o.set(t,s),ov(t)?t.forEach(function(i){s.add(e(i,r,n,i,t,o))}):rv(t)&&t.forEach(function(i,a){s.set(a,e(i,r,n,a,t,o))});var v=l?c?sh:oh:c?keysIn:Bp,m=f?void 0:v(t);return np(m||t,function(i,a){m&&(i=t[a=i]),sp(s,a,e(i,r,n,a,t,o))}),s},mv="[object Symbol]";var gv=function(e){return"symbol"==typeof e||lp(e)&&cd(e)==mv},yv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ev=/^\w*$/;var bv=function(e,t){if(gp(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!gv(e))||Ev.test(e)||!yv.test(e)||null!=t&&e in Object(t)},_v="Expected a function";function Sv(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(_v);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(Sv.Cache||Jd),r}Sv.Cache=Jd;var Tv=Sv,wv=500;var Iv=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Av=/\\(\\)?/g,Cv=function(e){var t=Tv(e,function(e){return r.size===wv&&r.clear(),e}),r=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Iv,function(e,r,n,i){t.push(n?i.replace(Av,"$1"):r||e)}),t}),xv=1/0,Ov=Jf?Jf.prototype:void 0,Rv=Ov?Ov.toString:void 0;var Nv=function e(t){if("string"==typeof t)return t;if(gp(t))return Mf(t,e)+"";if(gv(t))return Rv?Rv.call(t):"";var r=t+"";return"0"==r&&1/t==-xv?"-0":r};var kv=function(e){return null==e?"":Nv(e)};var Pv=function(e,t){return gp(e)?e:bv(e,t)?[e]:Cv(kv(e))};var Mv=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},Dv=1/0;var Lv=function(e){if("string"==typeof e||gv(e))return e;var t=e+"";return"0"==t&&1/e==-Dv?"-0":t};var Uv=function(e,t){for(var r=0,n=(t=Pv(t,e)).length;null!=e&&r<n;)e=e[Lv(t[r++])];return r&&r==n?e:void 0};var jv=function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a};var Fv=function(e,t){return t.length<2?e:Uv(e,jv(t,0,-1))};var Bv=function(e,t){return t=Pv(t,e),null==(e=Fv(e,t))||delete e[Lv(Mv(t))]},Vv="[object Object]",Gv=Function.prototype,qv=Object.prototype,Kv=Gv.toString,Hv=qv.hasOwnProperty,zv=Kv.call(Object);var Wv=function(e){if(!lp(e)||cd(e)!=Vv)return!1;var t=rh(e);if(null===t)return!0;var r=Hv.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Kv.call(r)==zv};var Yv=function(e){return Wv(e)?void 0:e},Xv=Jf?Jf.isConcatSpreadable:void 0;var $v=function(e){return gp(e)||mp(e)||!!(Xv&&e&&e[Xv])};var Qv=function e(t,r,n,i,a){var o=-1,s=t.length;for(n||(n=$v),a||(a=[]);++o<s;){var u=t[o];r>0&&n(u)?r>1?e(u,r-1,n,i,a):th(a,u):i||(a[a.length]=u)}return a};var Jv=function(e){return null!=e&&e.length?Qv(e,1):[]};var Zv=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},em=Math.max;var tm=function(e,t,r){return t=em(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=em(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),Zv(e,this,s)}};var rm=function(e){return function(){return e}};var nm=function(e){return e},im=ip?function(e,t){return ip(e,"toString",{configurable:!0,enumerable:!1,value:rm(t),writable:!0})}:nm,am=800,om=16,sm=Date.now;var um=function(e){var t=0,r=0;return function(){var n=sm(),i=om-(n-r);if(r=n,i>0){if(++t>=am)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},cm=um(im);var lm=function(e){return cm(tm(e,void 0,Jv),e+"")},fm=lm(function(e,t){var r={};if(null==e)return r;var n=!1;t=Mf(t,function(t){return t=Pv(t,e),n||(n=t.length>1),t}),up(e,sh(e),r),n&&(r=vv(r,7,Yv));for(var i=t.length;i--;)Bv(r,t[i]);return r}),dm="[object Map]",pm="[object Set]",hm=Object.prototype.hasOwnProperty;var vm=function(e){if(null==e)return!0;if(Fp(e)&&(gp(e)||"string"==typeof e||"function"==typeof e.splice||Ep(e)||Rp(e)||mp(e)))return!e.length;var t=yh(e);if(t==dm||t==pm)return!e.size;if(Mp(e))return!jp(e).length;for(var r in e)if(hm.call(e,r))return!1;return!0},mm=1,gm=4;var ym=function(e){return vv(e,mm|gm)};function Em(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var bm=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function _m(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function Sm(e,t,r,n){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Tm(wm(e),function(n){var i=encodeURIComponent(_m(n))+r;return bm(e[n])?Tm(e[n],function(e){return i+encodeURIComponent(_m(e))}).join(t):i+encodeURIComponent(_m(e[n]))}).join(t):n?encodeURIComponent(_m(n))+r+encodeURIComponent(_m(e)):""}function Tm(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var wm=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function Im(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var o=1e3;n&&"number"==typeof n.maxKeys&&(o=n.maxKeys);var s=e.length;o>0&&s>o&&(s=o);for(var u=0;u<s;++u){var c,l,f,d,p=e[u].replace(a,"%20"),h=p.indexOf(r);h>=0?(c=p.substr(0,h),l=p.substr(h+1)):(c=p,l=""),f=decodeURIComponent(c),d=decodeURIComponent(l),Em(i,f)?bm(i[f])?i[f].push(d):i[f]=[i[f],d]:i[f]=d}return i}var Am={encode:Sm,stringify:Sm,decode:Im,parse:Im},Cm=2147483647,xm=36,Om=1,Rm=26,Nm=38,km=700,Pm=72,Mm=128,Dm="-",Lm=/[^\x20-\x7E]/,Um=/[\x2E\u3002\uFF0E\uFF61]/g,jm={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Fm=xm-Om,Bm=Math.floor,Vm=String.fromCharCode;function Gm(e){throw new RangeError(jm[e])}function qm(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function Km(e,t,r){var n=0;for(e=r?Bm(e/km):e>>1,e+=Bm(e/t);e>Fm*Rm>>1;n+=xm)e=Bm(e/Fm);return Bm(n+(Fm+1)*e/(e+Nm))}function Hm(e){return function(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}((e=e.replace(Um,".")).split("."),t).join(".");return n+i}(e,function(e){return Lm.test(e)?"xn--"+function(e){var t,r,n,i,a,o,s,u,c,l,f,d,p,h,v,m=[];for(d=(e=function(e){for(var t,r,n=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}(e)).length,t=Mm,r=0,a=Pm,o=0;o<d;++o)(f=e[o])<128&&m.push(Vm(f));for(n=i=m.length,i&&m.push(Dm);n<d;){for(s=Cm,o=0;o<d;++o)(f=e[o])>=t&&f<s&&(s=f);for(s-t>Bm((Cm-r)/(p=n+1))&&Gm("overflow"),r+=(s-t)*p,t=s,o=0;o<d;++o)if((f=e[o])<t&&++r>Cm&&Gm("overflow"),f==t){for(u=r,c=xm;!(u<(l=c<=a?Om:c>=a+Rm?Rm:c-a));c+=xm)v=u-l,h=xm-l,m.push(Vm(qm(l+v%h,0))),u=Bm(v/h);m.push(Vm(qm(u,0))),a=Km(r,p,n==i),r=0,++n}++r,++t}return m.join("")}(e):e})}var zm=[],Wm=[],Ym="undefined"!=typeof Uint8Array?Uint8Array:Array,Xm=!1;function $m(){Xm=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)zm[t]=e[t],Wm[e.charCodeAt(t)]=t;Wm["-".charCodeAt(0)]=62,Wm["_".charCodeAt(0)]=63}function Qm(e,t,r){for(var n,i,a=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],a.push(zm[(i=n)>>18&63]+zm[i>>12&63]+zm[i>>6&63]+zm[63&i]);return a.join("")}function Jm(e){var t;Xm||$m();for(var r=e.length,n=r%3,i="",a=[],o=0,s=r-n;o<s;o+=16383)a.push(Qm(e,o,o+16383>s?s:o+16383));return 1===n?(t=e[r-1],i+=zm[t>>2],i+=zm[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=zm[t>>10],i+=zm[t>>4&63],i+=zm[t<<2&63],i+="="),a.push(i),a.join("")}function Zm(e,t,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,d=r?-1:1,p=e[t+f];for(f+=d,a=p&(1<<-l)-1,p>>=-l,l+=s;l>0;a=256*a+e[t+f],f+=d,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=n;l>0;o=256*o+e[t+f],f+=d,l-=8);if(0===a)a=1-c;else{if(a===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),a-=c}return(p?-1:1)*o*Math.pow(2,a-n)}function eg(e,t,r,n,i,a){var o,s,u,c=8*a-i-1,l=(1<<c)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:a-1,h=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[r+p]=255&s,p+=h,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;e[r+p]=255&o,p+=h,o/=256,c-=8);e[r+p-h]|=128*v}var tg={}.toString,rg=Array.isArray||function(e){return"[object Array]"==tg.call(e)};function ng(){return ag.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ig(e,t){if(ng()<t)throw new RangeError("Invalid typed array length");return ag.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=ag.prototype:(null===e&&(e=new ag(t)),e.length=t),e}function ag(e,t,r){if(!(ag.TYPED_ARRAY_SUPPORT||this instanceof ag))return new ag(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return ug(this,e)}return og(this,e,t,r)}function og(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);ag.TYPED_ARRAY_SUPPORT?(e=t).__proto__=ag.prototype:e=cg(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!ag.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|dg(t,r),i=(e=ig(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(fg(t)){var r=0|lg(t.length);return 0===(e=ig(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?ig(e,0):cg(e,t);if("Buffer"===t.type&&rg(t.data))return cg(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function sg(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function ug(e,t){if(sg(t),e=ig(e,t<0?0:0|lg(t)),!ag.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function cg(e,t){var r=t.length<0?0:0|lg(t.length);e=ig(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function lg(e){if(e>=ng())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ng().toString(16)+" bytes");return 0|e}function fg(e){return!(null==e||!e._isBuffer)}function dg(e,t){if(fg(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return jg(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Fg(e).length;default:if(n)return jg(e).length;t=(""+t).toLowerCase(),n=!0}}function pg(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function hg(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=ag.from(t,n)),fg(t))return 0===t.length?-1:vg(e,t,r,n,i);if("number"==typeof t)return t&=255,ag.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):vg(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function vg(e,t,r,n,i){var a,o=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var l=-1;for(a=r;a<s;a++)if(c(e,a)===c(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*o}else-1!==l&&(a-=a-l),l=-1}else for(r+u>s&&(r=s-u),a=r;a>=0;a--){for(var f=!0,d=0;d<u;d++)if(c(e,a+d)!==c(t,d)){f=!1;break}if(f)return a}return-1}function mg(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function gg(e,t,r,n){return Bg(jg(t,e.length-r),e,r,n)}function yg(e,t,r,n){return Bg(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function Eg(e,t,r,n){return yg(e,t,r,n)}function bg(e,t,r,n){return Bg(Fg(t),e,r,n)}function _g(e,t,r,n){return Bg(function(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}(t,e.length-r),e,r,n)}function Sg(e,t,r){return 0===t&&r===e.length?Jm(e):Jm(e.slice(t,r))}function Tg(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,o,s,u,c=e[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(u=(15&c)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&c)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return function(e){var t=e.length;if(t<=wg)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=wg));return r}(n)}ag.TYPED_ARRAY_SUPPORT=void 0===nu.TYPED_ARRAY_SUPPORT||nu.TYPED_ARRAY_SUPPORT,ag.poolSize=8192,ag._augment=function(e){return e.__proto__=ag.prototype,e},ag.from=function(e,t,r){return og(null,e,t,r)},ag.TYPED_ARRAY_SUPPORT&&(ag.prototype.__proto__=Uint8Array.prototype,ag.__proto__=Uint8Array),ag.alloc=function(e,t,r){return function(e,t,r,n){return sg(t),t<=0?ig(e,t):void 0!==r?"string"==typeof n?ig(e,t).fill(r,n):ig(e,t).fill(r):ig(e,t)}(null,e,t,r)},ag.allocUnsafe=function(e){return ug(null,e)},ag.allocUnsafeSlow=function(e){return ug(null,e)},ag.isBuffer=Vg,ag.compare=function(e,t){if(!fg(e)||!fg(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},ag.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ag.concat=function(e,t){if(!rg(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return ag.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=ag.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!fg(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},ag.byteLength=dg,ag.prototype._isBuffer=!0,ag.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)pg(this,t,t+1);return this},ag.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)pg(this,t,t+3),pg(this,t+1,t+2);return this},ag.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)pg(this,t,t+7),pg(this,t+1,t+6),pg(this,t+2,t+5),pg(this,t+3,t+4);return this},ag.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Tg(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Cg(this,t,r);case"utf8":case"utf-8":return Tg(this,t,r);case"ascii":return Ig(this,t,r);case"latin1":case"binary":return Ag(this,t,r);case"base64":return Sg(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xg(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},ag.prototype.equals=function(e){if(!fg(e))throw new TypeError("Argument must be a Buffer");return this===e||0===ag.compare(this,e)},ag.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},ag.prototype.compare=function(e,t,r,n,i){if(!fg(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(n,i),c=e.slice(t,r),l=0;l<s;++l)if(u[l]!==c[l]){a=u[l],o=c[l];break}return a<o?-1:o<a?1:0},ag.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},ag.prototype.indexOf=function(e,t,r){return hg(this,e,t,r,!0)},ag.prototype.lastIndexOf=function(e,t,r){return hg(this,e,t,r,!1)},ag.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return mg(this,e,t,r);case"utf8":case"utf-8":return gg(this,e,t,r);case"ascii":return yg(this,e,t,r);case"latin1":case"binary":return Eg(this,e,t,r);case"base64":return bg(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _g(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},ag.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var wg=4096;function Ig(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function Ag(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function Cg(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=Ug(e[a]);return i}function xg(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function Og(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function Rg(e,t,r,n,i,a){if(!fg(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function Ng(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function kg(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function Pg(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Mg(e,t,r,n,i){return i||Pg(e,0,r,4),eg(e,t,r,n,23,4),r+4}function Dg(e,t,r,n,i){return i||Pg(e,0,r,8),eg(e,t,r,n,52,8),r+8}ag.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),ag.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=ag.prototype;else{var i=t-e;r=new ag(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},ag.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||Og(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},ag.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||Og(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},ag.prototype.readUInt8=function(e,t){return t||Og(e,1,this.length),this[e]},ag.prototype.readUInt16LE=function(e,t){return t||Og(e,2,this.length),this[e]|this[e+1]<<8},ag.prototype.readUInt16BE=function(e,t){return t||Og(e,2,this.length),this[e]<<8|this[e+1]},ag.prototype.readUInt32LE=function(e,t){return t||Og(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ag.prototype.readUInt32BE=function(e,t){return t||Og(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ag.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||Og(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},ag.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||Og(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},ag.prototype.readInt8=function(e,t){return t||Og(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},ag.prototype.readInt16LE=function(e,t){t||Og(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},ag.prototype.readInt16BE=function(e,t){t||Og(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},ag.prototype.readInt32LE=function(e,t){return t||Og(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ag.prototype.readInt32BE=function(e,t){return t||Og(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ag.prototype.readFloatLE=function(e,t){return t||Og(e,4,this.length),Zm(this,e,!0,23,4)},ag.prototype.readFloatBE=function(e,t){return t||Og(e,4,this.length),Zm(this,e,!1,23,4)},ag.prototype.readDoubleLE=function(e,t){return t||Og(e,8,this.length),Zm(this,e,!0,52,8)},ag.prototype.readDoubleBE=function(e,t){return t||Og(e,8,this.length),Zm(this,e,!1,52,8)},ag.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||Rg(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},ag.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||Rg(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},ag.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||Rg(this,e,t,1,255,0),ag.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},ag.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||Rg(this,e,t,2,65535,0),ag.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Ng(this,e,t,!0),t+2},ag.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||Rg(this,e,t,2,65535,0),ag.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Ng(this,e,t,!1),t+2},ag.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||Rg(this,e,t,4,4294967295,0),ag.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):kg(this,e,t,!0),t+4},ag.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||Rg(this,e,t,4,4294967295,0),ag.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):kg(this,e,t,!1),t+4},ag.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Rg(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},ag.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Rg(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},ag.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||Rg(this,e,t,1,127,-128),ag.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},ag.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||Rg(this,e,t,2,32767,-32768),ag.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Ng(this,e,t,!0),t+2},ag.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||Rg(this,e,t,2,32767,-32768),ag.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Ng(this,e,t,!1),t+2},ag.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||Rg(this,e,t,4,2147483647,-2147483648),ag.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):kg(this,e,t,!0),t+4},ag.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||Rg(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),ag.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):kg(this,e,t,!1),t+4},ag.prototype.writeFloatLE=function(e,t,r){return Mg(this,e,t,!0,r)},ag.prototype.writeFloatBE=function(e,t,r){return Mg(this,e,t,!1,r)},ag.prototype.writeDoubleLE=function(e,t,r){return Dg(this,e,t,!0,r)},ag.prototype.writeDoubleBE=function(e,t,r){return Dg(this,e,t,!1,r)},ag.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!ag.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},ag.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!ag.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var o=fg(e)?e:jg(new ag(e,n).toString()),s=o.length;for(a=0;a<r-t;++a)this[a+t]=o[a%s]}return this};var Lg=/[^+\/0-9A-Za-z-_]/g;function Ug(e){return e<16?"0"+e.toString(16):e.toString(16)}function jg(e,t){var r;t=t||1/0;for(var n=e.length,i=null,a=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function Fg(e){return function(e){var t,r,n,i,a,o;Xm||$m();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a="="===e[s-2]?2:"="===e[s-1]?1:0,o=new Ym(3*s/4-a),n=a>0?s-4:s;var u=0;for(t=0,r=0;t<n;t+=4,r+=3)i=Wm[e.charCodeAt(t)]<<18|Wm[e.charCodeAt(t+1)]<<12|Wm[e.charCodeAt(t+2)]<<6|Wm[e.charCodeAt(t+3)],o[u++]=i>>16&255,o[u++]=i>>8&255,o[u++]=255&i;return 2===a?(i=Wm[e.charCodeAt(t)]<<2|Wm[e.charCodeAt(t+1)]>>4,o[u++]=255&i):1===a&&(i=Wm[e.charCodeAt(t)]<<10|Wm[e.charCodeAt(t+1)]<<4|Wm[e.charCodeAt(t+2)]>>2,o[u++]=i>>8&255,o[u++]=255&i),o}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(Lg,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Bg(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Vg(e){return null!=e&&(!!e._isBuffer||Gg(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Gg(e.slice(0,0))}(e))}function Gg(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var qg="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},Kg=/%[sdj%]/g;function Hg(e){if(!sy(e)){for(var t=[],r=0;r<arguments.length;r++)t.push($g(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(Kg,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),o=n[r];r<i;o=n[++r])iy(o)||!ly(o)?a+=" "+o:a+=" "+$g(o);return a}function zg(e,t){if(uy(nu.process))return function(){return zg(e,t).apply(this,arguments)};if(!0===xu.noDeprecation)return e;var r=!1;return function(){if(!r){if(xu.throwDeprecation)throw new Error(t);xu.traceDeprecation?console.trace(t):console.error(t),r=!0}return e.apply(this,arguments)}}var Wg,Yg={};function Xg(e){if(uy(Wg)&&(Wg=xu.env.NODE_DEBUG||""),e=e.toUpperCase(),!Yg[e])if(new RegExp("\\b"+e+"\\b","i").test(Wg)){Yg[e]=function(){var t=Hg.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else Yg[e]=function(){};return Yg[e]}function $g(e,t){var r={seen:[],stylize:Jg};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),ny(t)?r.showHidden=t:t&&yy(r,t),uy(r.showHidden)&&(r.showHidden=!1),uy(r.depth)&&(r.depth=2),uy(r.colors)&&(r.colors=!1),uy(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=Qg),Zg(r,e,r.depth)}function Qg(e,t){var r=$g.styles[t];return r?"["+$g.colors[r][0]+"m"+e+"["+$g.colors[r][1]+"m":e}function Jg(e,t){return e}function Zg(e,t,r){if(e.customInspect&&t&&py(t.inspect)&&t.inspect!==$g&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return sy(n)||(n=Zg(e,n,r)),n}var i=function(e,t){if(uy(t))return e.stylize("undefined","undefined");if(sy(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(oy(t))return e.stylize(""+t,"number");if(ny(t))return e.stylize(""+t,"boolean");if(iy(t))return e.stylize("null","null")}(e,t);if(i)return i;var a=Object.keys(t),o=function(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),dy(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return ey(t);if(0===a.length){if(py(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(cy(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(fy(t))return e.stylize(Date.prototype.toString.call(t),"date");if(dy(t))return ey(t)}var u,c="",l=!1,f=["{","}"];(ry(t)&&(l=!0,f=["[","]"]),py(t))&&(c=" [Function"+(t.name?": "+t.name:"")+"]");return cy(t)&&(c=" "+RegExp.prototype.toString.call(t)),fy(t)&&(c=" "+Date.prototype.toUTCString.call(t)),dy(t)&&(c=" "+ey(t)),0!==a.length||l&&0!=t.length?r<0?cy(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=l?function(e,t,r,n,i){for(var a=[],o=0,s=t.length;o<s;++o)Ey(t,String(o))?a.push(ty(e,t,r,n,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(ty(e,t,r,n,i,!0))}),a}(e,t,r,o,a):a.map(function(n){return ty(e,t,r,o,n,l)}),e.seen.pop(),function(e,t,r){if(e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,c,f)):f[0]+c+f[1]}function ey(e){return"["+Error.prototype.toString.call(e)+"]"}function ty(e,t,r,n,i,a){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),Ey(n,i)||(o="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=iy(r)?Zg(e,u.value,null):Zg(e,u.value,r-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),uy(o)){if(a&&i.match(/^\d+$/))return s;(o=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function ry(e){return Array.isArray(e)}function ny(e){return"boolean"==typeof e}function iy(e){return null===e}function ay(e){return null==e}function oy(e){return"number"==typeof e}function sy(e){return"string"==typeof e}function uy(e){return void 0===e}function cy(e){return ly(e)&&"[object RegExp]"===vy(e)}function ly(e){return"object"==typeof e&&null!==e}function fy(e){return ly(e)&&"[object Date]"===vy(e)}function dy(e){return ly(e)&&("[object Error]"===vy(e)||e instanceof Error)}function py(e){return"function"==typeof e}function hy(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function vy(e){return Object.prototype.toString.call(e)}function my(e){return e<10?"0"+e.toString(10):e.toString(10)}$g.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},$g.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var gy=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function yy(e,t){if(!t||!ly(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}function Ey(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var by={inherits:qg,_extend:yy,log:function(){var e,t;console.log("%s - %s",(e=new Date,t=[my(e.getHours()),my(e.getMinutes()),my(e.getSeconds())].join(":"),[e.getDate(),gy[e.getMonth()],t].join(" ")),Hg.apply(null,arguments))},isBuffer:function(e){return Vg(e)},isPrimitive:hy,isFunction:py,isError:dy,isDate:fy,isObject:ly,isRegExp:cy,isUndefined:uy,isSymbol:function(e){return"symbol"==typeof e},isString:sy,isNumber:oy,isNullOrUndefined:ay,isNull:iy,isBoolean:ny,isArray:ry,inspect:$g,deprecate:zg,format:Hg,debuglog:Xg},_y={parse:Ly,resolve:function(e,t){return Ly(e,!1,!0).resolve(t)},resolveObject:function(e,t){return e?Ly(e,!1,!0).resolveObject(t):t},format:function(e){sy(e)&&(e=Uy({},e));return jy(e)},Url:Sy};function Sy(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Ty=/^([a-z0-9.+-]+:)/i,wy=/:[0-9]*$/,Iy=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Ay=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Cy=["'"].concat(Ay),xy=["%","/","?",";","#"].concat(Cy),Oy=["/","?","#"],Ry=255,Ny=/^[+a-z0-9A-Z_-]{0,63}$/,ky=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Py={javascript:!0,"javascript:":!0},My={javascript:!0,"javascript:":!0},Dy={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Ly(e,t,r){if(e&&ly(e)&&e instanceof Sy)return e;var n=new Sy;return n.parse(e,t,r),n}function Uy(e,t,r,n){if(!sy(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),a=-1!==i&&i<t.indexOf("#")?"?":"#",o=t.split(a);o[0]=o[0].replace(/\\/g,"/");var s=t=o.join(a);if(s=s.trim(),!n&&1===t.split("#").length){var u=Iy.exec(s);if(u)return e.path=s,e.href=s,e.pathname=u[1],u[2]?(e.search=u[2],e.query=r?Im(e.search.substr(1)):e.search.substr(1)):r&&(e.search="",e.query={}),e}var c,l,f,d,p=Ty.exec(s);if(p){var h=(p=p[0]).toLowerCase();e.protocol=h,s=s.substr(p.length)}if(n||p||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var v="//"===s.substr(0,2);!v||p&&My[p]||(s=s.substr(2),e.slashes=!0)}if(!My[p]&&(v||p&&!Dy[p])){var m,g,y=-1;for(c=0;c<Oy.length;c++)-1!==(l=s.indexOf(Oy[c]))&&(-1===y||l<y)&&(y=l);for(-1!==(g=-1===y?s.lastIndexOf("@"):s.lastIndexOf("@",y))&&(m=s.slice(0,g),s=s.slice(g+1),e.auth=decodeURIComponent(m)),y=-1,c=0;c<xy.length;c++)-1!==(l=s.indexOf(xy[c]))&&(-1===y||l<y)&&(y=l);-1===y&&(y=s.length),e.host=s.slice(0,y),s=s.slice(y),Fy(e),e.hostname=e.hostname||"";var E="["===e.hostname[0]&&"]"===e.hostname[e.hostname.length-1];if(!E){var b=e.hostname.split(/\./);for(c=0,f=b.length;c<f;c++){var _=b[c];if(_&&!_.match(Ny)){for(var S="",T=0,w=_.length;T<w;T++)_.charCodeAt(T)>127?S+="x":S+=_[T];if(!S.match(Ny)){var I=b.slice(0,c),A=b.slice(c+1),C=_.match(ky);C&&(I.push(C[1]),A.unshift(C[2])),A.length&&(s="/"+A.join(".")+s),e.hostname=I.join(".");break}}}}e.hostname.length>Ry?e.hostname="":e.hostname=e.hostname.toLowerCase(),E||(e.hostname=Hm(e.hostname)),d=e.port?":"+e.port:"";var x=e.hostname||"";e.host=x+d,e.href+=e.host,E&&(e.hostname=e.hostname.substr(1,e.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!Py[h])for(c=0,f=Cy.length;c<f;c++){var O=Cy[c];if(-1!==s.indexOf(O)){var R=encodeURIComponent(O);R===O&&(R=escape(O)),s=s.split(O).join(R)}}var N=s.indexOf("#");-1!==N&&(e.hash=s.substr(N),s=s.slice(0,N));var k=s.indexOf("?");if(-1!==k?(e.search=s.substr(k),e.query=s.substr(k+1),r&&(e.query=Im(e.query)),s=s.slice(0,k)):r&&(e.search="",e.query={}),s&&(e.pathname=s),Dy[h]&&e.hostname&&!e.pathname&&(e.pathname="/"),e.pathname||e.search){d=e.pathname||"";var P=e.search||"";e.path=d+P}return e.href=jy(e),e}function jy(e){var t=e.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var r=e.protocol||"",n=e.pathname||"",i=e.hash||"",a=!1,o="";e.host?a=t+e.host:e.hostname&&(a=t+(-1===e.hostname.indexOf(":")?e.hostname:"["+this.hostname+"]"),e.port&&(a+=":"+e.port)),e.query&&ly(e.query)&&Object.keys(e.query).length&&(o=Sm(e.query));var s=e.search||o&&"?"+o||"";return r&&":"!==r.substr(-1)&&(r+=":"),e.slashes||(!r||Dy[r])&&!1!==a?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),r+a+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+i}function Fy(e){var t=e.host,r=wy.exec(t);r&&(":"!==(r=r[0])&&(e.port=r.substr(1)),t=t.substr(0,t.length-r.length)),t&&(e.hostname=t)}Sy.prototype.parse=function(e,t,r){return Uy(this,e,t,r)},Sy.prototype.format=function(){return jy(this)},Sy.prototype.resolve=function(e){return this.resolveObject(Ly(e,!1,!0)).format()},Sy.prototype.resolveObject=function(e){if(sy(e)){var t=new Sy;t.parse(e,!1,!0),e=t}for(var r,n=new Sy,i=Object.keys(this),a=0;a<i.length;a++){var o=i[a];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var c=s[u];"protocol"!==c&&(n[c]=e[c])}return Dy[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!Dy[e.protocol]){for(var l=Object.keys(e),f=0;f<l.length;f++){var d=l[f];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||My[e.protocol])n.pathname=e.pathname;else{for(r=(e.pathname||"").split("/");r.length&&!(e.host=r.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),n.pathname=r.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var p=n.pathname||"",h=n.search||"";n.path=p+h}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v,m=n.pathname&&"/"===n.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=g||m||n.host&&e.pathname,E=y,b=n.pathname&&n.pathname.split("/")||[],_=n.protocol&&!Dy[n.protocol];if(r=e.pathname&&e.pathname.split("/")||[],_&&(n.hostname="",n.port=null,n.host&&(""===b[0]?b[0]=n.host:b.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===r[0]?r[0]=e.host:r.unshift(e.host)),e.host=null),y=y&&(""===r[0]||""===b[0])),g)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,b=r;else if(r.length)b||(b=[]),b.pop(),b=b.concat(r),n.search=e.search,n.query=e.query;else if(!ay(e.search))return _&&(n.hostname=n.host=b.shift(),(v=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=v.shift(),n.host=n.hostname=v.shift())),n.search=e.search,n.query=e.query,iy(n.pathname)&&iy(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!b.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=b.slice(-1)[0],T=(n.host||e.host||b.length>1)&&("."===S||".."===S)||""===S,w=0,I=b.length;I>=0;I--)"."===(S=b[I])?b.splice(I,1):".."===S?(b.splice(I,1),w++):w&&(b.splice(I,1),w--);if(!y&&!E)for(;w--;w)b.unshift("..");!y||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),T&&"/"!==b.join("/").substr(-1)&&b.push("");var A=""===b[0]||b[0]&&"/"===b[0].charAt(0);return _&&(n.hostname=n.host=A?"":b.length?b.shift():"",(v=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=v.shift(),n.host=n.hostname=v.shift())),(y=y||n.host&&b.length)&&!A&&b.unshift(""),b.length?n.pathname=b.join("/"):(n.pathname=null,n.path=null),iy(n.pathname)&&iy(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},Sy.prototype.parseHost=function(){return Fy(this)};var By={version:"1.0.0",encode:function(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},decode:function(e){return new ag(e=(e+=Array(5-e.length%4).join("=")).replace(/\-/g,"+").replace(/\_/g,"/"),"base64")},validate:function(e){return/^[A-Za-z0-9\-_]+$/.test(e)}},Vy=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fromBase64url=i,t.toBase64Url=a,t.encode=o,t.decode=s,t.validate=u;var r,n=(r=By)&&r.__esModule?r:{default:r};function i(e){return n.default.decode(e).toString()}function a(e){var t=e;return Vg(t)||(t=ag.from(t)),n.default.encode(t)}function o(e){return a(e)}function s(e){return i(e)}function u(e){return n.default.validate(e)}t.default={fromBase64url:i,toBase64Url:a,encode:o,decode:s,validate:u}});r(Vy);Vy.fromBase64url,Vy.toBase64Url,Vy.encode,Vy.decode,Vy.validate;var Gy=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=Rf)&&r.__esModule?r:{default:r};t.default=function(e,t,r){if(!e)throw new Error("`fn` must be a function");if(!t)throw new Error("`wait` is required");if(!(r=r||{}).maxWait)throw new Error("`options.maxWait` is required");if(!r.maxCalls)throw new Error("`options.maxCalls` is required");var i=r,a=i.maxCalls,o=i.maxWait,s=0,u=void 0,c=void 0;return function(){s+=1,clearTimeout(c),c=setTimeout(function(){return l()},t),u||(u=setTimeout(function(){return l()},o)),s>=a&&(0,n.default)(l,this,[])};function l(){clearTimeout(c),c=null,clearTimeout(u),u=null,s=0,(0,n.default)(e,this,[])}}});r(Gy);var qy=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.forEach(function(e){if(!t[e])throw new Error("missing required property "+e+" from "+t)})}});r(qy);var Ky=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=_f)&&r.__esModule?r:{default:r};t.default=function(){var e=this;this.promise=new n.default(function(t,r){e.resolve=t,e.reject=r})}});r(Ky);var Hy=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e||!t)throw new Error("missing parameter for makeStateDataType");return{dataType:{set:function(r){return r instanceof e?(r.parent=this,{val:r,type:t}):{val:r?new e(r,{parent:this}):void 0,type:t}},compare:function(e,t){return e===t},onChange:function(e,t,r){t&&this.stopListening(t,"all",this._getCachedEventBubblingHandler(r)),e&&this.listenTo(e,"all",this._getCachedEventBubblingHandler(r))}},prop:{test:function(e){return!!e&&(e.parent=this,!1)},type:t}}}});r(Hy);var zy=n(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}});r(zy),nc(nc.S+nc.F*!Vu,"Object",{defineProperty:ec.f});var Wy=Xu.Object,Yy=function(e,t,r){return Wy.defineProperty(e,t,r)},Xy=n(function(e){e.exports={default:Yy,__esModule:!0}});r(Xy);var $y=n(function(e,t){t.__esModule=!0;var r,n=(r=Xy)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,n.default)(e,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()});r($y);var Qy=Array.isArray||function(e){return"Array"==Ru(e)},Jy=Bc("species"),Zy=function(e,t){return new(function(e){var t;return Qy(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!Qy(t.prototype)||(t=void 0),Lu(t)&&null===(t=t[Jy])&&(t=void 0)),void 0===t?Array:t}(e))(t)},eE=function(e,t){var r=1==e,n=2==e,i=3==e,a=4==e,o=6==e,s=5==e||o,u=t||Zy;return function(t,c,l){for(var f,d,p=Hc(t),h=Nu(p),v=Qu(c,l,3),m=Ec(h.length),g=0,y=r?u(t,m):n?u(t,0):void 0;m>g;g++)if((s||g in h)&&(d=v(f=h[g],g,p),e))if(r)y[g]=d;else if(d)switch(e){case 3:return!0;case 5:return f;case 6:return g;case 2:y.push(f)}else if(a)return!1;return o?-1:i||a?a:y}},tE=n(function(e){var t=Ic("meta"),r=ec.f,n=0,i=Object.isExtensible||function(){return!0},a=!Bu(function(){return i(Object.preventExtensions({}))}),o=function(e){r(e,t,{value:{i:"O"+ ++n,w:{}}})},s=e.exports={KEY:t,NEED:!1,fastKey:function(e,r){if(!Lu(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Fu(e,t)){if(!i(e))return"F";if(!r)return"E";o(e)}return e[t].i},getWeak:function(e,r){if(!Fu(e,t)){if(!i(e))return!0;if(!r)return!1;o(e)}return e[t].w},onFreeze:function(e){return a&&s.NEED&&i(e)&&!Fu(e,t)&&o(e),e}}}),rE=(tE.KEY,tE.NEED,tE.fastKey,tE.getWeak,tE.onFreeze,function(e,t){if(!Lu(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}),nE=tE.getWeak,iE=eE(5),aE=eE(6),oE=0,sE=function(e){return e._l||(e._l=new uE)},uE=function(){this.a=[]},cE=function(e,t){return iE(e.a,function(e){return e[0]===t})};uE.prototype={get:function(e){var t=cE(this,e);if(t)return t[1]},has:function(e){return!!cE(this,e)},set:function(e,t){var r=cE(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=aE(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}};var lE={getConstructor:function(e,t,r,n){var i=e(function(e,a){pl(e,i,t,"_i"),e._t=t,e._i=oE++,e._l=void 0,null!=a&&bl(a,r,e[n],e)});return Hl(i.prototype,{delete:function(e){if(!Lu(e))return!1;var r=nE(e);return!0===r?sE(rE(this,t)).delete(e):r&&Fu(r,this._i)&&delete r[this._i]},has:function(e){if(!Lu(e))return!1;var r=nE(e);return!0===r?sE(rE(this,t)).has(e):r&&Fu(r,this._i)}}),i},def:function(e,t,r){var n=nE(Ju(t),!0);return!0===n?sE(e).set(t,r):n[e._i]=r,e},ufstore:sE},fE=ec.f,dE=eE(0),pE=function(e,t,r,n,i,a){var o=Gu[e],s=o,u=i?"set":"add",c=s&&s.prototype,l={};return Vu&&"function"==typeof s&&(a||c.forEach&&!Bu(function(){(new s).entries().next()}))?(s=t(function(t,r){pl(t,s,e,"_c"),t._c=new o,null!=r&&bl(r,i,t[u],t)}),dE("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in c&&(!a||"clear"!=e)&&tc(s.prototype,e,function(r,n){if(pl(this,s,e),!t&&a&&!Lu(r))return"get"==e&&void 0;var i=this._c[e](0===r?0:r,n);return t?this:i})}),a||fE(s.prototype,"size",{get:function(){return this._c.size}})):(s=n.getConstructor(t,e,i,u),Hl(s.prototype,r),tE.NEED=!0),qc(s,e),l[e]=s,nc(nc.G+nc.W+nc.F,l),a||n.setStrong(s,e,i),s},hE=(n(function(e){var t,r=eE(0),n=rE,i=!Gu.ActiveXObject&&"ActiveXObject"in Gu,a=tE.getWeak,o=Object.isExtensible,s=lE.ufstore,u=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},c={get:function(e){if(Lu(e)){var t=a(e);return!0===t?s(rE(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return lE.def(rE(this,"WeakMap"),e,t)}},l=e.exports=pE("WeakMap",u,c,lE,!0,!0);n&&i&&(t=lE.getConstructor(u,"WeakMap"),wf(t.prototype,c),tE.NEED=!0,r(["delete","has","get","set"],function(e){var r=l.prototype,n=r[e];mc(r,e,function(r,i){if(Lu(r)&&!o(r)){this._f||(this._f=new t);var a=this._f[e](r,i);return"set"==e?this:a}return n.call(this,r,i)})}))}),function(e){nc(nc.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})});hE("WeakMap");var vE=function(e){nc(nc.S,e,{from:function(e){var t,r,n,i,a=arguments[1];return $u(this),(t=void 0!==a)&&$u(a),null==e?new this:(r=[],t?(n=0,i=Qu(a,arguments[2],2),bl(e,!1,function(e){r.push(i(e,n++))})):bl(e,!1,r.push,r),new this(r))}})};vE("WeakMap");var mE=Xu.WeakMap,gE=n(function(e){e.exports={default:mE,__esModule:!0}});r(gE);var yE=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(zy),n=o($y),i=o(gE),a=o(by);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(e.add)e.add.apply(e,r);else if(e.set)e.set.apply(e,r);else{if(!e.push)throw new TypeError("Could not determine how to insert into the specified container");e.push.apply(e,r)}}t.default=function e(){for(var t=arguments.length,o=Array(t),u=0;u<t;u++)o[u]=arguments[u];var c=o.shift(),l=new i.default,f=new i.default,d=o.length>1?e.apply(void 0,o):o[0],p="("+[c.name].concat(o.map(function(e){return e.name})).join(", ")+")";return function(){function e(){(0,r.default)(this,e);for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];l.set(this,new(Function.prototype.bind.apply(c,[null].concat(n)))),f.set(this,0)}return(0,n.default)(e,[{key:"add",value:function(){return this.set.apply(this,arguments)}},{key:"clear",value:function(){var e=l.get(this).clear();return f.set(this,0),e}},{key:"delete",value:function(e){for(var t=l.get(this),r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(!n.length)return t.delete(e);var a=t.get(e);if(!a)return!1;var o=a.delete.apply(a,n);return o&&f.set(this,f.get(this)-1),0===a.size&&t.delete(e),o}},{key:"get",value:function(e){var t=l.get(this);if(!t.get)return t;for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(!n.length)return t.get(e);var a=t.get(e);return a?a.get?a.get.apply(a,n):a:void 0}},{key:"has",value:function(){return void 0!==this.get.apply(this,arguments)}},{key:"set",value:function(){for(var e=!1,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];this.has.apply(this,r)&&(e=!0);var i=l.get(this),a=r.shift();if(!i.get)return s.apply(void 0,[i,a].concat(r)),this;var o=i.get(a);if(!o){if(!d)return s.apply(void 0,[i,a].concat(r)),this;s(i,a,o=new d)}return s.apply(void 0,[o].concat(r)),e||f.set(this,f.get(this)+1),this}},{key:"inspect",value:function(){return"Container"+p+" {\n  "+a.default.inspect(l.get(this),{depth:null})+"\n}"}},{key:"size",get:function(){return f.get(this)}}]),e}()}});r(yE);var EE={f:Bc},bE=EE.f("iterator"),_E=n(function(e){e.exports={default:bE,__esModule:!0}});r(_E);var SE=ec.f,TE=function(e){var t=Xu.Symbol||(Xu.Symbol={});"_"==e.charAt(0)||e in t||SE(t,e,{value:EE.f(e)})},wE=Nc.concat("length","prototype"),IE={f:Object.getOwnPropertyNames||function(e){return Rc(e,wE)}},AE=IE.f,CE={}.toString,xE="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],OE={f:function(e){return xE&&"[object Window]"==CE.call(e)?function(e){try{return AE(e)}catch(e){return xE.slice()}}(e):AE(Pu(e))}},RE=tE.KEY,NE=Yu.f,kE=ec.f,PE=OE.f,ME=Gu.Symbol,DE=Gu.JSON,LE=DE&&DE.stringify,UE=Bc("_hidden"),jE=Bc("toPrimitive"),FE={}.propertyIsEnumerable,BE=Sc("symbol-registry"),VE=Sc("symbols"),GE=Sc("op-symbols"),qE=Object.prototype,KE="function"==typeof ME&&!!Sf.f,HE=Gu.QObject,zE=!HE||!HE.prototype||!HE.prototype.findChild,WE=Vu&&Bu(function(){return 7!=Fc(kE({},"a",{get:function(){return kE(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=NE(qE,t);n&&delete qE[t],kE(e,t,r),n&&e!==qE&&kE(qE,t,n)}:kE,YE=function(e){var t=VE[e]=Fc(ME.prototype);return t._k=e,t},XE=KE&&"symbol"==typeof ME.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof ME},$E=function(e,t,r){return e===qE&&$E(GE,t,r),Ju(e),t=Uu(t,!0),Ju(r),Fu(VE,t)?(r.enumerable?(Fu(e,UE)&&e[UE][t]&&(e[UE][t]=!1),r=Fc(r,{enumerable:Du(0,!1)})):(Fu(e,UE)||kE(e,UE,Du(1,{})),e[UE][t]=!0),WE(e,t,r)):kE(e,t,r)},QE=function(e,t){Ju(e);for(var r,n=function(e){var t=kc(e),r=Sf.f;if(r)for(var n,i=r(e),a=Mu.f,o=0;i.length>o;)a.call(e,n=i[o++])&&t.push(n);return t}(t=Pu(t)),i=0,a=n.length;a>i;)$E(e,r=n[i++],t[r]);return e},JE=function(e){var t=FE.call(this,e=Uu(e,!0));return!(this===qE&&Fu(VE,e)&&!Fu(GE,e))&&(!(t||!Fu(this,e)||!Fu(VE,e)||Fu(this,UE)&&this[UE][e])||t)},ZE=function(e,t){if(e=Pu(e),t=Uu(t,!0),e!==qE||!Fu(VE,t)||Fu(GE,t)){var r=NE(e,t);return!r||!Fu(VE,t)||Fu(e,UE)&&e[UE][t]||(r.enumerable=!0),r}},eb=function(e){for(var t,r=PE(Pu(e)),n=[],i=0;r.length>i;)Fu(VE,t=r[i++])||t==UE||t==RE||n.push(t);return n},tb=function(e){for(var t,r=e===qE,n=PE(r?GE:Pu(e)),i=[],a=0;n.length>a;)!Fu(VE,t=n[a++])||r&&!Fu(qE,t)||i.push(VE[t]);return i};KE||(mc((ME=function(){if(this instanceof ME)throw TypeError("Symbol is not a constructor!");var e=Ic(arguments.length>0?arguments[0]:void 0),t=function(r){this===qE&&t.call(GE,r),Fu(this,UE)&&Fu(this[UE],e)&&(this[UE][e]=!1),WE(this,e,Du(1,r))};return Vu&&zE&&WE(qE,e,{configurable:!0,set:t}),YE(e)}).prototype,"toString",function(){return this._k}),Yu.f=ZE,ec.f=$E,IE.f=OE.f=eb,Mu.f=JE,Sf.f=tb,EE.f=function(e){return YE(Bc(e))}),nc(nc.G+nc.W+nc.F*!KE,{Symbol:ME});for(var rb="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nb=0;rb.length>nb;)Bc(rb[nb++]);for(var ib=kc(Bc.store),ab=0;ib.length>ab;)TE(ib[ab++]);nc(nc.S+nc.F*!KE,"Symbol",{for:function(e){return Fu(BE,e+="")?BE[e]:BE[e]=ME(e)},keyFor:function(e){if(!XE(e))throw TypeError(e+" is not a symbol!");for(var t in BE)if(BE[t]===e)return t},useSetter:function(){zE=!0},useSimple:function(){zE=!1}}),nc(nc.S+nc.F*!KE,"Object",{create:function(e,t){return void 0===t?Fc(e):QE(Fc(e),t)},defineProperty:$E,defineProperties:QE,getOwnPropertyDescriptor:ZE,getOwnPropertyNames:eb,getOwnPropertySymbols:tb});var ob=Bu(function(){Sf.f(1)});nc(nc.S+nc.F*ob,"Object",{getOwnPropertySymbols:function(e){return Sf.f(Hc(e))}}),DE&&nc(nc.S+nc.F*(!KE||Bu(function(){var e=ME();return"[null]"!=LE([e])||"{}"!=LE({a:e})||"{}"!=LE(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(Lu(t)||void 0!==e)&&!XE(e))return Qy(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!XE(t))return t}),n[1]=t,LE.apply(DE,n)}}),ME.prototype[jE]||tc(ME.prototype,jE,ME.prototype.valueOf),qc(ME,"Symbol"),qc(Math,"Math",!0),qc(Gu.JSON,"JSON",!0),TE("asyncIterator"),TE("observable");var sb=Xu.Symbol,ub=n(function(e){e.exports={default:sb,__esModule:!0}});r(ub);var cb=n(function(e,t){t.__esModule=!0;var r=a(_E),n=a(ub),i="function"==typeof n.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof n.default&&"symbol"===i(r.default)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":void 0===e?"undefined":i(e)}});r(cb);var lb=ec.f,fb=tE.fastKey,db=Vu?"_s":"size",pb=function(e,t){var r,n=fb(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r},hb={getConstructor:function(e,t,r,n){var i=e(function(e,a){pl(e,i,t,"_i"),e._t=t,e._i=Fc(null),e._f=void 0,e._l=void 0,e[db]=0,null!=a&&bl(a,r,e[n],e)});return Hl(i.prototype,{clear:function(){for(var e=rE(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[db]=0},delete:function(e){var r=rE(this,t),n=pb(r,e);if(n){var i=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=i),i&&(i.p=a),r._f==n&&(r._f=i),r._l==n&&(r._l=a),r[db]--}return!!n},forEach:function(e){rE(this,t);for(var r,n=Qu(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!pb(rE(this,t),e)}}),Vu&&lb(i.prototype,"size",{get:function(){return rE(this,t)[db]}}),i},def:function(e,t,r){var n,i,a=pb(e,t);return a?a.v=r:(e._l=a={i:i=fb(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[db]++,"F"!==i&&(e._i[i]=a)),e},getEntry:pb,setStrong:function(e,t,r){Jc(e,t,function(e,r){this._t=rE(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?el(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,el(1))},r?"entries":"values",!r,!0),Wl(t)}},vb=(pE("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=hb.getEntry(rE(this,"Map"),e);return t&&t.v},set:function(e,t){return hb.def(rE(this,"Map"),0===e?0:e,t)}},hb,!0),function(e){return function(){if(dl(this)!=e)throw TypeError(e+"#toJSON isn't generic");return bl(this,!1,(r=[]).push,r,t),r;var t,r}});nc(nc.P+nc.R,"Map",{toJSON:vb("Map")}),hE("Map"),vE("Map");var mb=Xu.Map,gb=n(function(e){e.exports={default:mb,__esModule:!0}});r(gb);var yb=function(e){return"function"==typeof e?e:nm};var Eb=function(e,t){return cm(tm(e,t,nm),e+"")},bb=fh&&new fh,_b=bb?function(e,t){return bb.set(e,t),e}:nm;var Sb=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Qh(e.prototype),n=e.apply(r,t);return ld(n)?n:r}},Tb=1;var wb=function(e,t,r){var n=t&Tb,i=Sb(e);return function t(){return(this&&this!==Qf&&this instanceof t?i:e).apply(n?r:this,arguments)}},Ib=Math.max;var Ab=function(e,t,r,n){for(var i=-1,a=e.length,o=r.length,s=-1,u=t.length,c=Ib(a-o,0),l=Array(u+c),f=!n;++s<u;)l[s]=t[s];for(;++i<o;)(f||i<a)&&(l[r[i]]=e[i]);for(;c--;)l[s++]=e[i++];return l},Cb=Math.max;var xb=function(e,t,r,n){for(var i=-1,a=e.length,o=-1,s=r.length,u=-1,c=t.length,l=Cb(a-s,0),f=Array(l+c),d=!n;++i<l;)f[i]=e[i];for(var p=i;++u<c;)f[p+u]=t[u];for(;++o<s;)(d||i<a)&&(f[p+r[o]]=e[i++]);return f};var Ob=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n};var Rb=function(){},Nb=4294967295;function kb(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Nb,this.__views__=[]}kb.prototype=Qh(Rb.prototype),kb.prototype.constructor=kb;var Pb=kb;var Mb=function(){},Db=bb?function(e){return bb.get(e)}:Mb,Lb={},Ub=Object.prototype.hasOwnProperty;var jb=function(e){for(var t=e.name+"",r=Lb[t],n=Ub.call(Lb,t)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==e)return i.name}return t};function Fb(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Fb.prototype=Qh(Rb.prototype),Fb.prototype.constructor=Fb;var Bb=Fb;var Vb=function(e){if(e instanceof Pb)return e.clone();var t=new Bb(e.__wrapped__,e.__chain__);return t.__actions__=Yp(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t},Gb=Object.prototype.hasOwnProperty;function qb(e){if(lp(e)&&!gp(e)&&!(e instanceof Pb)){if(e instanceof Bb)return e;if(Gb.call(e,"__wrapped__"))return Vb(e)}return new Bb(e)}qb.prototype=Rb.prototype,qb.prototype.constructor=qb;var Kb=qb;var Hb=function(e){var t=jb(e),r=Kb[t];if("function"!=typeof r||!(t in Pb.prototype))return!1;if(e===r)return!0;var n=Db(r);return!!n&&e===n[0]},zb=um(_b),Wb=/\{\n\/\* \[wrapped with (.+)\] \*/,Yb=/,? & /;var Xb=function(e){var t=e.match(Wb);return t?t[1].split(Yb):[]},$b=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;var Qb=function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace($b,"{\n/* [wrapped with "+t+"] */\n")};var Jb=function(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1};var Zb=function(e){return e!=e};var e_=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1};var t_=function(e,t,r){return t==t?e_(e,t,r):Jb(e,Zb,r)};var r_=function(e,t){return!(null==e||!e.length)&&t_(e,t,0)>-1},n_=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];var i_=function(e,t){return np(n_,function(r){var n="_."+r[0];t&r[1]&&!r_(e,n)&&e.push(n)}),e.sort()};var a_=function(e,t,r){var n=t+"";return cm(e,Qb(n,i_(Xb(n),r)))},o_=1,s_=2,u_=4,c_=8,l_=32,f_=64;var d_=function(e,t,r,n,i,a,o,s,u,c){var l=t&c_;t|=l?l_:f_,(t&=~(l?f_:l_))&u_||(t&=~(o_|s_));var f=[e,t,i,l?a:void 0,l?o:void 0,l?void 0:a,l?void 0:o,s,u,c],d=r.apply(void 0,f);return Hb(e)&&zb(d,f),d.placeholder=n,a_(d,e,t)};var p_=function(e){return e.placeholder},h_=Math.min;var v_=function(e,t){for(var r=e.length,n=h_(t.length,r),i=Yp(e);n--;){var a=t[n];e[n]=Sp(a,r)?i[a]:void 0}return e},m_="__lodash_placeholder__";var g_=function(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r];o!==t&&o!==m_||(e[r]=m_,a[i++]=r)}return a},y_=1,E_=2,b_=8,__=16,S_=128,T_=512;var w_=function e(t,r,n,i,a,o,s,u,c,l){var f=r&S_,d=r&y_,p=r&E_,h=r&(b_|__),v=r&T_,m=p?void 0:Sb(t);return function g(){for(var y=arguments.length,E=Array(y),b=y;b--;)E[b]=arguments[b];if(h)var _=p_(g),S=Ob(E,_);if(i&&(E=Ab(E,i,a,h)),o&&(E=xb(E,o,s,h)),y-=S,h&&y<l){var T=g_(E,_);return d_(t,r,e,g.placeholder,n,E,T,u,c,l-y)}var w=d?n:this,I=p?w[t]:t;return y=E.length,u?E=v_(E,u):v&&y>1&&E.reverse(),f&&c<y&&(E.length=c),this&&this!==Qf&&this instanceof g&&(I=m||Sb(I)),I.apply(w,E)}};var I_=function(e,t,r){var n=Sb(e);return function i(){for(var a=arguments.length,o=Array(a),s=a,u=p_(i);s--;)o[s]=arguments[s];var c=a<3&&o[0]!==u&&o[a-1]!==u?[]:g_(o,u);return(a-=c.length)<r?d_(e,t,w_,i.placeholder,void 0,o,c,void 0,void 0,r-a):Zv(this&&this!==Qf&&this instanceof i?n:e,this,o)}},A_=1;var C_=function(e,t,r,n){var i=t&A_,a=Sb(e);return function t(){for(var o=-1,s=arguments.length,u=-1,c=n.length,l=Array(c+s),f=this&&this!==Qf&&this instanceof t?a:e;++u<c;)l[u]=n[u];for(;s--;)l[u++]=arguments[++o];return Zv(f,i?r:this,l)}},x_="__lodash_placeholder__",O_=1,R_=2,N_=4,k_=8,P_=128,M_=256,D_=Math.min;var L_=function(e,t){var r=e[1],n=t[1],i=r|n,a=i<(O_|R_|P_),o=n==P_&&r==k_||n==P_&&r==M_&&e[7].length<=t[8]||n==(P_|M_)&&t[7].length<=t[8]&&r==k_;if(!a&&!o)return e;n&O_&&(e[2]=t[2],i|=r&O_?0:N_);var s=t[3];if(s){var u=e[3];e[3]=u?Ab(u,s,t[4]):s,e[4]=u?g_(e[3],x_):t[4]}return(s=t[5])&&(u=e[5],e[5]=u?xb(u,s,t[6]):s,e[6]=u?g_(e[5],x_):t[6]),(s=t[7])&&(e[7]=s),n&P_&&(e[8]=null==e[8]?t[8]:D_(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e},U_=NaN,j_=/^\s+|\s+$/g,F_=/^[-+]0x[0-9a-f]+$/i,B_=/^0b[01]+$/i,V_=/^0o[0-7]+$/i,G_=parseInt;var q_=function(e){if("number"==typeof e)return e;if(gv(e))return U_;if(ld(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ld(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(j_,"");var r=B_.test(e);return r||V_.test(e)?G_(e.slice(2),r?2:8):F_.test(e)?U_:+e},K_=1/0,H_=1.7976931348623157e308;var z_=function(e){return e?(e=q_(e))===K_||e===-K_?(e<0?-1:1)*H_:e==e?e:0:0===e?e:0};var W_=function(e){var t=z_(e),r=t%1;return t==t?r?t-r:t:0},Y_="Expected a function",X_=1,$_=2,Q_=8,J_=16,Z_=32,eS=64,tS=Math.max;var rS=function(e,t,r,n,i,a,o,s){var u=t&$_;if(!u&&"function"!=typeof e)throw new TypeError(Y_);var c=n?n.length:0;if(c||(t&=~(Z_|eS),n=i=void 0),o=void 0===o?o:tS(W_(o),0),s=void 0===s?s:W_(s),c-=i?i.length:0,t&eS){var l=n,f=i;n=i=void 0}var d=u?void 0:Db(e),p=[e,t,r,n,i,l,f,a,o,s];if(d&&L_(p,d),e=p[0],t=p[1],r=p[2],n=p[3],i=p[4],!(s=p[9]=void 0===p[9]?u?0:e.length:tS(p[9]-c,0))&&t&(Q_|J_)&&(t&=~(Q_|J_)),t&&t!=X_)h=t==Q_||t==J_?I_(e,t,s):t!=Z_&&t!=(X_|Z_)||i.length?w_.apply(void 0,p):C_(e,t,r,n);else var h=wb(e,t,r);return a_((d?_b:zb)(h,p),e,t)},nS=Eb(function(e,t){var r=g_(t,p_(nS));return rS(e,32,void 0,t,r)});nS.placeholder={};var iS=nS;var aS=function(e,t){return iS(yb(t),e)},oS=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=c(cb),n=c(_f),i=c(Rf),a=c(gb),o=c(gE),s=c(aS);t.default=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];if(3===t.length)return(0,i.default)(f,null,t);var o=t[0]||{},u=o.cacheFailures,c=o.cacheSuccesses,l=o.keyFactory;return f;function f(e,t,a){var o=t;return a.value=(0,s.default)(a.value,function(t){for(var r=this,a=o,s=arguments.length,f=Array(s>1?s-1:0),p=1;p<s;p++)f[p-1]=arguments[p];l&&(a=a+"_"+l.apply(void 0,f));var h=d.get(this,e,a);return h||(h=(0,i.default)(t,this,f),!u&&h&&h.catch&&(h=h.catch(function(t){return d.delete(r,e,a),n.default.reject(t)})),!c&&h&&h.then&&(h=h.then(function(t){return d.delete(r,e,a),t})),d.set(this,e,a,h),h)}),"object"!==(void 0===e?"undefined":(0,r.default)(e))||e.prototype||(e[t]=a.value),a}};var u=c(yE);function c(e){return e&&e.__esModule?e:{default:e}}var l=o.default,f=a.default,d=new((0,u.default)(l,f,f))});r(oS);var sS=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={email:/^[^\s]+?@[^\s]+?$/,uuid:/^[a-f\d]{8}(?:-[a-f\d]{4}){3}-[a-f\d]{12}$/,execEmail:/[^\s]+?@[^\s]+?/,execUuid:/[a-f\d]{8}(?:-[a-f\d]{4}){3}-[a-f\d]{12}/}});r(sS);var uS=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(Rf),n=i(gp);function i(e){return e&&e.__esModule?e:{default:e}}t.proxyEvents=function(e,t){return["on","once"].forEach(function(r){t[r]=function(){return e[r].apply(e,arguments),t}}),e},t.transferEvents=function(e,t,i){(e=(0,n.default)(e)?e:[e]).forEach(function(e){t.on&&t.on(e,function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return function(e){var t=e.trigger||e.emit;if(!t)throw new Error("count not determine emit method");for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];return(0,r.default)(t,e,i)}.apply(void 0,[i,e].concat(n))})})}});r(uS);uS.proxyEvents,uS.transferEvents;var cS=n(function(e){!function(t){var r,n=Object.prototype,i=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",c=t.regeneratorRuntime;if(c)e.exports=c;else{(c=t.regeneratorRuntime=e.exports).wrap=E;var l="suspendedStart",f="suspendedYield",d="executing",p="completed",h={},v={};v[o]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(R([])));g&&g!==n&&i.call(g,o)&&(v=g);var y=T.prototype=_.prototype=Object.create(v);S.prototype=y.constructor=T,T.constructor=S,T[u]=S.displayName="GeneratorFunction",c.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},c.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,T):(e.__proto__=T,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(y),e},c.awrap=function(e){return{__await:e}},w(I.prototype),I.prototype[s]=function(){return this},c.AsyncIterator=I,c.async=function(e,t,r,n){var i=new I(E(e,t,r,n));return c.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},w(y),y[u]="Generator",y[o]=function(){return this},y.toString=function(){return"[object Generator]"},c.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},c.values=R,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return s.type="throw",s.arg=e,t.next=n,i&&(t.method="next",t.arg=r),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),h}}}function E(e,t,r,n){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),o=new O(n||[]);return a._invoke=function(e,t,r){var n=l;return function(i,a){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw a;return N()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=A(o,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var u=b(e,t,r);if("normal"===u.type){if(n=r.done?p:f,u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}(e,r,o),a}function b(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function _(){}function S(){}function T(){}function w(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function I(e){var t;this._invoke=function(r,n){function a(){return new Promise(function(t,a){!function t(r,n,a,o){var s=b(e[r],e,n);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,a,o)},function(e){t("throw",e,a,o)}):Promise.resolve(c).then(function(e){u.value=e,a(u)},o)}o(s.arg)}(r,n,t,a)})}return t=t?t.then(a,a):a()}}function A(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,A(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=b(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return a.next=a}}return{next:N}}function N(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())}),lS=function(){return this}()||Function("return this")(),fS=lS.regeneratorRuntime&&Object.getOwnPropertyNames(lS).indexOf("regeneratorRuntime")>=0,dS=fS&&lS.regeneratorRuntime;lS.regeneratorRuntime=void 0;var pS=cS;if(fS)lS.regeneratorRuntime=dS;else try{delete lS.regeneratorRuntime}catch(e){lS.regeneratorRuntime=void 0}var hS=pS,vS=n(function(e,t){t.__esModule=!0;var r,n=(r=_f)&&r.__esModule?r:{default:r};t.default=function(e){return function(){var t=e.apply(this,arguments);return new n.default(function(e,r){return function i(a,o){try{var s=t[a](o),u=s.value}catch(e){return void r(e)}if(!s.done)return n.default.resolve(u).then(function(e){i("next",e)},function(e){i("throw",e)});e(u)}("next")})}}});r(vS);var mS=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ensureMyIdIsAvailable=void 0;var r,n=s(hS),i=s(vS),a=s(_f),o=t.ensureMyIdIsAvailable=(r=(0,i.default)(n.default.mark(function e(t){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!("me"in t.internal)){e.next=2;break}return e.abrupt("return",a.default.resolve());case 2:return e.abrupt("return",t.people.get("me").then(function(e){return t.internal.me=e,a.default.resolve()}));case 3:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)});function s(e){return e&&e.__esModule?e:{default:e}}t.createEventEnvelope=function(e,t){return o(e).then(function(){return a.default.resolve({createdBy:e.internal.me.id,orgId:e.internal.me.orgId,resource:t,ownedBy:cI.SDK_EVENT.EXTERNAL.OWNER.CREATOR,status:cI.SDK_EVENT.EXTERNAL.STATUS.ACTIVE,created:(new Date).toISOString(),data:{}})}).catch(function(e){a.default.reject(new Error("Unable to get person info for "+t+" event envelope: "+e.message))})}});r(mS);mS.ensureMyIdIsAvailable,mS.createEventEnvelope;var gS=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=_f)&&r.__esModule?r:{default:r};t.default=function(e){return function(){return n.default.resolve(e)}}});r(gS);var yS=function(e,t,r){if(!ld(r))return!1;var n=typeof t;return!!("number"==n?Fp(r)&&Sp(t,r.length):"string"==n&&t in r)&&Lf(r[t],e)},ES=Object.prototype,bS=ES.hasOwnProperty,_S=Eb(function(e,t){e=Object(e);var r=-1,n=t.length,i=n>2?t[2]:void 0;for(i&&yS(t[0],t[1],i)&&(n=1);++r<n;)for(var a=t[r],o=Hp(a),s=-1,u=o.length;++s<u;){var c=o[s],l=e[c];(void 0===l||Lf(l,ES[c])&&!bS.call(e,c))&&(e[c]=a[c])}return e});function SS(){}function TS(){TS.init.call(this)}function wS(e){return void 0===e._maxListeners?TS.defaultMaxListeners:e._maxListeners}function IS(e,t,r,n){var i,a,o,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),o=a[t]):(a=e._events=new SS,e._eventsCount=0),o){if("function"==typeof o?o=a[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),!o.warned&&(i=wS(e))&&i>0&&o.length>i){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,s=u,"function"==typeof console.warn?console.warn(s):console.log(s)}}else o=a[t]=r,++e._eventsCount;return e}function AS(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}function CS(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function xS(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}function OS(e){Error.call(this,e),this.message=e}function RS(e){Error.call(this,e),this.message=e}SS.prototype=Object.create(null),TS.EventEmitter=TS,TS.usingDomains=!1,TS.prototype.domain=void 0,TS.prototype._events=void 0,TS.prototype._maxListeners=void 0,TS.defaultMaxListeners=10,TS.init=function(){this.domain=null,TS.usingDomains&&(void 0).active&&(void 0).Domain,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new SS,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},TS.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},TS.prototype.getMaxListeners=function(){return wS(this)},TS.prototype.emit=function(e){var t,r,n,i,a,o,s,u="error"===e;if(o=this._events)u=u&&null==o.error;else if(!u)return!1;if(s=this.domain,u){if(t=arguments[1],!s){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(r=o[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:!function(e,t,r){if(t)e.call(r);else for(var n=e.length,i=xS(e,n),a=0;a<n;++a)i[a].call(r)}(r,l,this);break;case 2:!function(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,a=xS(e,i),o=0;o<i;++o)a[o].call(r,n)}(r,l,this,arguments[1]);break;case 3:!function(e,t,r,n,i){if(t)e.call(r,n,i);else for(var a=e.length,o=xS(e,a),s=0;s<a;++s)o[s].call(r,n,i)}(r,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,r,n,i,a){if(t)e.call(r,n,i,a);else for(var o=e.length,s=xS(e,o),u=0;u<o;++u)s[u].call(r,n,i,a)}(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),a=1;a<n;a++)i[a-1]=arguments[a];!function(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,a=xS(e,i),o=0;o<i;++o)a[o].apply(r,n)}(r,l,this,i)}return!0},TS.prototype.addListener=function(e,t){return IS(this,e,t,!1)},TS.prototype.on=TS.prototype.addListener,TS.prototype.prependListener=function(e,t){return IS(this,e,t,!0)},TS.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,AS(this,e,t)),this},TS.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,AS(this,e,t)),this},TS.prototype.removeListener=function(e,t){var r,n,i,a,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new SS:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,a=r.length;a-- >0;)if(r[a]===t||r[a].listener&&r[a].listener===t){o=r[a].listener,i=a;break}if(i<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new SS,this;delete n[e]}else!function(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}(r,i);n.removeListener&&this.emit("removeListener",e,o||t)}return this},TS.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new SS,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new SS:delete r[e]),this;if(0===arguments.length){for(var n,i=Object.keys(r),a=0;a<i.length;++a)"removeListener"!==(n=i[a])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new SS,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},TS.prototype.listeners=function(e){var t,r=this._events;return r&&(t=r[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):[]},TS.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):CS.call(e,t)},TS.prototype.listenerCount=CS,TS.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},by.inherits(OS,Error),OS.prototype.name="IllegalArgumentError",by.inherits(RS,Error),RS.prototype.name="IllegalStateError";var NS={IllegalStateError:RS,IllegalArgumentError:OS},kS=n(function(e){var t=e.exports=NS;function r(e,t,r,n){r=r||"";var i=new e(by.format.apply(this,[r].concat(n)));throw Error.captureStackTrace(i,t),i}function n(e,n,i){r(t.IllegalArgumentError,e,n,i)}function i(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array"}return t}function a(e){return function(t,r){var a=i(t);if(a==e)return t;n(arguments.callee,r||'Expected "'+e+'" but got "'+a+'".',Array.prototype.slice.call(arguments,2))}}e.exports.checkArgument=function(e,t){e||n(arguments.callee,t,Array.prototype.slice.call(arguments,2))},e.exports.checkState=function(e,n){e||function(e,n,i){r(t.IllegalStateError,e,n,i)}(arguments.callee,n,Array.prototype.slice.call(arguments,2))},e.exports.checkIsDef=function(e,t){if(void 0!==e)return e;n(arguments.callee,t||"Expected value to be defined but was undefined.",Array.prototype.slice.call(arguments,2))},e.exports.checkIsDefAndNotNull=function(e,t){if(null!=e)return e;n(arguments.callee,t||'Expected value to be defined and not null but got "'+i(e)+'".',Array.prototype.slice.call(arguments,2))},e.exports.checkIsString=a("string"),e.exports.checkIsArray=a("array"),e.exports.checkIsNumber=a("number"),e.exports.checkIsBoolean=a("boolean"),e.exports.checkIsFunction=a("function"),e.exports.checkIsObject=a("object")}),PS=(kS.checkArgument,kS.checkState,kS.checkIsDef,kS.checkIsDefAndNotNull,kS.checkIsString,kS.checkIsArray,kS.checkIsNumber,kS.checkIsBoolean,kS.checkIsFunction,kS.checkIsObject,kS);function MS(e){TS.EventEmitter.call(this),this.backoffStrategy_=e,this.maxNumberOfRetry_=-1,this.backoffNumber_=0,this.backoffDelay_=0,this.timeoutID_=-1,this.handlers={backoff:this.onBackoff_.bind(this)}}by.inherits(MS,TS.EventEmitter),MS.prototype.failAfter=function(e){PS.checkArgument(e>0,"Expected a maximum number of retry greater than 0 but got %s.",e),this.maxNumberOfRetry_=e},MS.prototype.backoff=function(e){PS.checkState(-1===this.timeoutID_,"Backoff in progress."),this.backoffNumber_===this.maxNumberOfRetry_?(this.emit("fail",e),this.reset()):(this.backoffDelay_=this.backoffStrategy_.next(),this.timeoutID_=setTimeout(this.handlers.backoff,this.backoffDelay_),this.emit("backoff",this.backoffNumber_,this.backoffDelay_,e))},MS.prototype.onBackoff_=function(){this.timeoutID_=-1,this.emit("ready",this.backoffNumber_,this.backoffDelay_),this.backoffNumber_++},MS.prototype.reset=function(){this.backoffNumber_=0,this.backoffStrategy_.reset(),clearTimeout(this.timeoutID_),this.timeoutID_=-1};var DS=MS;function LS(e){return null!=e}function US(e){if(LS((e=e||{}).initialDelay)&&e.initialDelay<1)throw new Error("The initial timeout must be greater than 0.");if(LS(e.maxDelay)&&e.maxDelay<1)throw new Error("The maximal timeout must be greater than 0.");if(this.initialDelay_=e.initialDelay||100,this.maxDelay_=e.maxDelay||1e4,this.maxDelay_<=this.initialDelay_)throw new Error("The maximal backoff delay must be greater than the initial backoff delay.");if(LS(e.randomisationFactor)&&(e.randomisationFactor<0||e.randomisationFactor>1))throw new Error("The randomisation factor must be between 0 and 1.");this.randomisationFactor_=e.randomisationFactor||0}US.prototype.getMaxDelay=function(){return this.maxDelay_},US.prototype.getInitialDelay=function(){return this.initialDelay_},US.prototype.next=function(){var e=this.next_(),t=1+Math.random()*this.randomisationFactor_;return Math.round(e*t)},US.prototype.next_=function(){throw new Error("BackoffStrategy.next_() unimplemented.")},US.prototype.reset=function(){this.reset_()},US.prototype.reset_=function(){throw new Error("BackoffStrategy.reset_() unimplemented.")};var jS=US;function FS(e){jS.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay(),this.factor_=FS.DEFAULT_FACTOR,e&&void 0!==e.factor&&(PS.checkArgument(e.factor>1,"Exponential factor should be greater than 1 but got %s.",e.factor),this.factor_=e.factor)}by.inherits(FS,jS),FS.DEFAULT_FACTOR=2,FS.prototype.next_=function(){return this.backoffDelay_=Math.min(this.nextBackoffDelay_,this.getMaxDelay()),this.nextBackoffDelay_=this.backoffDelay_*this.factor_,this.backoffDelay_},FS.prototype.reset_=function(){this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()};var BS=FS;function VS(e){jS.call(this,e),this.backoffDelay_=0,this.nextBackoffDelay_=this.getInitialDelay()}by.inherits(VS,jS),VS.prototype.next_=function(){var e=Math.min(this.nextBackoffDelay_,this.getMaxDelay());return this.nextBackoffDelay_+=this.backoffDelay_,this.backoffDelay_=e,e},VS.prototype.reset_=function(){this.nextBackoffDelay_=this.getInitialDelay(),this.backoffDelay_=0};var GS=VS;function qS(e,t,r){TS.EventEmitter.call(this),PS.checkIsFunction(e,"Expected fn to be a function."),PS.checkIsArray(t,"Expected args to be an array."),PS.checkIsFunction(r,"Expected callback to be a function."),this.function_=e,this.arguments_=t,this.callback_=r,this.lastResult_=[],this.numRetries_=0,this.backoff_=null,this.strategy_=null,this.failAfter_=-1,this.retryPredicate_=qS.DEFAULT_RETRY_PREDICATE_,this.state_=qS.State_.PENDING}by.inherits(qS,TS.EventEmitter),qS.State_={PENDING:0,RUNNING:1,COMPLETED:2,ABORTED:3},qS.DEFAULT_RETRY_PREDICATE_=function(e){return!0},qS.prototype.isPending=function(){return this.state_==qS.State_.PENDING},qS.prototype.isRunning=function(){return this.state_==qS.State_.RUNNING},qS.prototype.isCompleted=function(){return this.state_==qS.State_.COMPLETED},qS.prototype.isAborted=function(){return this.state_==qS.State_.ABORTED},qS.prototype.setStrategy=function(e){return PS.checkState(this.isPending(),"FunctionCall in progress."),this.strategy_=e,this},qS.prototype.retryIf=function(e){return PS.checkState(this.isPending(),"FunctionCall in progress."),this.retryPredicate_=e,this},qS.prototype.getLastResult=function(){return this.lastResult_.concat()},qS.prototype.getNumRetries=function(){return this.numRetries_},qS.prototype.failAfter=function(e){return PS.checkState(this.isPending(),"FunctionCall in progress."),this.failAfter_=e,this},qS.prototype.abort=function(){this.isCompleted()||this.isAborted()||(this.isRunning()&&this.backoff_.reset(),this.state_=qS.State_.ABORTED,this.lastResult_=[new Error("Backoff aborted.")],this.emit("abort"),this.doCallback_())},qS.prototype.start=function(e){PS.checkState(!this.isAborted(),"FunctionCall is aborted."),PS.checkState(this.isPending(),"FunctionCall already started.");var t=this.strategy_||new GS;this.backoff_=e?e(t):new DS(t),this.backoff_.on("ready",this.doCall_.bind(this,!0)),this.backoff_.on("fail",this.doCallback_.bind(this)),this.backoff_.on("backoff",this.handleBackoff_.bind(this)),this.failAfter_>0&&this.backoff_.failAfter(this.failAfter_),this.state_=qS.State_.RUNNING,this.doCall_(!1)},qS.prototype.doCall_=function(e){e&&this.numRetries_++;var t=["call"].concat(this.arguments_);TS.EventEmitter.prototype.emit.apply(this,t);var r=this.handleFunctionCallback_.bind(this);this.function_.apply(null,this.arguments_.concat(r))},qS.prototype.doCallback_=function(){this.callback_.apply(null,this.lastResult_)},qS.prototype.handleFunctionCallback_=function(){if(!this.isAborted()){var e=Array.prototype.slice.call(arguments);this.lastResult_=e,TS.EventEmitter.prototype.emit.apply(this,["callback"].concat(e));var t=e[0];t&&this.retryPredicate_(t)?this.backoff_.backoff(t):(this.state_=qS.State_.COMPLETED,this.doCallback_())}},qS.prototype.handleBackoff_=function(e,t,r){this.emit("backoff",e,t,r)};var KS=qS,HS={Backoff:DS,FunctionCall:KS,FibonacciStrategy:GS,ExponentialStrategy:BS,fibonacci:function(e){return new DS(new GS(e))},exponential:function(e){return new DS(new BS(e))},call:function(e,t,r){var n=Array.prototype.slice.call(arguments);return e=n[0],t=n.slice(1,n.length-1),r=n[n.length-1],new KS(e,t,r)}},zS=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(cb),n=l(_f),i=l(Rf),a=l(Af),o=l(aS),s=l(md),u=l(_S);t.default=function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];var f=t[0]||{};f=(0,a.default)({},f),(0,u.default)(f,{backoff:!0,delay:1,maxAttempts:3});var d=void 0;d=f.backoff?{initialDelay:f.delay,maxDelay:f.maxDelay}:{initialDelay:1,maxDelay:1};if(3===t.length)return(0,i.default)(p,null,t);return p;function p(e,t,a){return a.value=(0,o.default)(a.value,function(e){for(var t=this,r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];var u=new TS.EventEmitter,l=new n.default(function(r,n){var o=c.default.call(function(r){var n=(0,i.default)(e,t,a);return(0,s.default)(n.on)&&(n.on("progress",u.emit.bind(u,"progress")),n.on("upload-progress",u.emit.bind(u,"upload-progress")),n.on("download-progress",u.emit.bind(u,"download-progress"))),n.then(function(e){r(null,e)}).catch(function(e){e||(e=new Error("retryable method failed without providing an error object")),r(e)})},function(e,t){return e?n(e):r(t)});o.setStrategy(new c.default.ExponentialStrategy(d)),f.maxAttempts&&o.failAfter(f.maxAttempts-1),o.start()});return l.on=function(e,t){return u.on(e,t),l},l}),"object"!==(void 0===e?"undefined":(0,r.default)(e))||e.prototype||(e[t]=a.value),a}};var c=l(HS);function l(e){return e&&e.__esModule?e:{default:e}}});r(zS);var WS=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=_f)&&r.__esModule?r:{default:r};t.default=function(e){return function(t){return new n.default(function(r){r(e(t))}).then(function(){return t}).catch(function(){return t})}}});r(WS);var YS=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(Rf),n=o(_f),i=o(aS);t.default=function(e){return function(t,o,s){s.value=(0,i.default)(s.value,function(t){for(var i=this,o=arguments.length,s=Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];return new n.default(function(o){i[e]=!0,o((0,r.default)(t,i,s).then((0,a.default)(function(){i[e]=!1})).catch(function(t){return i[e]=!1,n.default.reject(t)}))})})}};var a=o(WS);function o(e){return e&&e.__esModule?e:{default:e}}});r(YS),nc(nc.S,"Object",{create:Fc});var XS=Xu.Object,$S=function(e,t){return XS.create(e,t)},QS=n(function(e){e.exports={default:$S,__esModule:!0}});r(QS);var JS=function(e,t){if(Ju(e),!Lu(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},ZS={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=Qu(Function.call,Yu.f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return JS(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:JS};nc(nc.S,"Object",{setPrototypeOf:ZS.set});var eT=Xu.Object.setPrototypeOf,tT=n(function(e){e.exports={default:eT,__esModule:!0}});r(tT);var rT=function(e,t,r){t in e?ec.f(e,t,Du(0,r)):e[t]=r};nc(nc.S+nc.F*!ef(function(e){}),"Array",{from:function(e){var t,r,n,i,a=Hc(e),o="function"==typeof this?this:Array,s=arguments.length,u=s>1?arguments[1]:void 0,c=void 0!==u,l=0,f=El(a);if(c&&(u=Qu(u,s>2?arguments[2]:void 0,2)),null==f||o==Array&&gl(f))for(r=new o(t=Ec(a.length));t>l;l++)rT(r,l,c?u(a[l],l):a[l]);else for(i=f.call(a),r=new o;!(n=i.next()).done;l++)rT(r,l,c?hl(i,u,[n.value,l],!0):n.value);return r.length=l,r}});var nT=Xu.Array.from,iT=n(function(e){e.exports={default:nT,__esModule:!0}});r(iT);var aT=[].slice,oT={},sT=Function.bind||function(e){var t=$u(this),r=aT.call(arguments,1),n=function(){var i=r.concat(aT.call(arguments));return this instanceof n?function(e,t,r){if(!(t in oT)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";oT[t]=Function("F,a","return new F("+n.join(",")+")")}return oT[t](e,r)}(t,i.length,i):Tl(t,i,e)};return Lu(t.prototype)&&(n.prototype=t.prototype),n},uT=(Gu.Reflect||{}).construct,cT=Bu(function(){function e(){}return!(uT(function(){},[],e)instanceof e)}),lT=!Bu(function(){uT(function(){})});nc(nc.S+nc.F*(cT||lT),"Reflect",{construct:function(e,t){$u(e),Ju(t);var r=arguments.length<3?e:$u(arguments[2]);if(lT&&!cT)return uT(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(sT.apply(e,n))}var i=r.prototype,a=Fc(Lu(i)?i:Object.prototype),o=Function.apply.call(e,a,t);return Lu(o)?o:a}});var fT=Xu.Reflect.construct,dT=n(function(e){e.exports={default:fT,__esModule:!0}});r(dT),ic("getPrototypeOf",function(){return function(e){return Yc(Hc(e))}});var pT=Xu.Object.getPrototypeOf,hT=n(function(e){e.exports={default:pT,__esModule:!0}});r(hT);var vT=n(function(e,t){t.__esModule=!0;var r,n=(r=cb)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,n.default)(t))&&"function"!=typeof t?e:t}});r(vT);var mT=n(function(e,t){t.__esModule=!0;var r=a(tT),n=a(QS),i=a(cb);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,i.default)(t)));e.prototype=(0,n.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}});r(mT);var gT=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,i=p(QS),a=p(tT),o=p(iT),s=p(dT),u=p(hT),c=p(zy),l=p($y),f=p(vT),d=p(mT);function p(e){return e&&e.__esModule?e:{default:e}}var h=(n=r=function(e){function t(){var e;(0,c.default)(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];var a=(0,f.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(n))),o=void 0;if(a.parse)o=a.parse.apply(a,n);else if(a.constructor.parse){var s;o=(s=a.constructor).parse.apply(s,n)}return o||(o=a.constructor.defaultMessage),a.name=a.constructor.name,a.message=o,a}return(0,d.default)(t,e),(0,l.default)(t,null,[{key:"parse",value:function(){return arguments.length<=0?void 0:arguments[0]}}]),t}(function(e){function t(){var t=(0,s.default)(e,(0,o.default)(arguments));return(0,a.default)(t,(0,u.default)(this)),t}return t.prototype=(0,i.default)(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a.default?(0,a.default)(t,e):t.__proto__=e,t}(Error)),r.defaultMessage="An error occurred",n);t.default=h});r(gT);var yT=Object.defineProperty;function ET(e,t,r){var n=r.configurable,i=r.enumerable,a=r.initializer,o=r.value;return{configurable:n,enumerable:i,get:function(){if(this!==e){var r=a?a.call(this):o;return yT(this,t,{configurable:n,enumerable:i,writable:!0,value:r}),r}},set:VT(t)}}function bT(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return DT(ET,t)}var _T,ST,TT,wT,IT,AT,CT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function xT(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function OT(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function RT(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var NT=Object.defineProperty,kT=Object.getOwnPropertyDescriptor,PT=Object.getOwnPropertyNames,MT=Object.getOwnPropertySymbols;function DT(e,t){return function(e){if(!e||!e.hasOwnProperty)return!1;for(var t=["value","initializer","get","set"],r=0,n=t.length;r<n;r++)if(e.hasOwnProperty(t[r]))return!0;return!1}(t[t.length-1])?e.apply(void 0,RT(t).concat([[]])):function(){return e.apply(void 0,RT(Array.prototype.slice.call(arguments)).concat([t]))}}var LT=(ST=OT((_T=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xT(this,"debounceTimeoutIds",ST,this),xT(this,"throttleTimeoutIds",TT,this),xT(this,"throttlePreviousTimestamps",wT,this),xT(this,"throttleTrailingArgs",IT,this),xT(this,"profileLastRan",AT,this)}).prototype,"debounceTimeoutIds",[bT],{enumerable:!0,initializer:function(){return{}}}),TT=OT(_T.prototype,"throttleTimeoutIds",[bT],{enumerable:!0,initializer:function(){return{}}}),wT=OT(_T.prototype,"throttlePreviousTimestamps",[bT],{enumerable:!0,initializer:function(){return{}}}),IT=OT(_T.prototype,"throttleTrailingArgs",[bT],{enumerable:!0,initializer:function(){return null}}),AT=OT(_T.prototype,"profileLastRan",[bT],{enumerable:!0,initializer:function(){return null}}),_T),UT="function"==typeof Symbol?Symbol("__core_decorators__"):"__core_decorators__";function jT(e){return!1===e.hasOwnProperty(UT)&&NT(e,UT,{value:new LT}),e[UT]}var FT=MT?function(e){return PT(e).concat(MT(e))}:PT;function BT(e){var t={};return FT(e).forEach(function(r){return t[r]=kT(e,r)}),t}function VT(e){return function(t){return Object.defineProperty(this,e,{configurable:!0,writable:!0,enumerable:!0,value:t}),t}}function GT(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}}var qT="object"===("undefined"==typeof console?"undefined":CT(console))&&console&&"function"==typeof console.warn?GT(console.warn,console):function(){},KT={};function HT(e){!0!==KT[e]&&(KT[e]=!0,qT("DEPRECATION: "+e))}var zT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WT=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var YT=/^function ([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?(\([^\)]*\))[\s\S]+$/,XT=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentKlass=t,this.childKlass=r,this.parentDescriptor=n,this.childDescriptor=i}return WT(e,[{key:"_getTopic",value:function(e){return void 0===e?null:"value"in e?e.value:"get"in e?e.get:"set"in e?e.set:void 0}},{key:"_extractTopicSignature",value:function(e){switch(void 0===e?"undefined":zT(e)){case"function":return this._extractFunctionSignature(e);default:return this.key}}},{key:"_extractFunctionSignature",value:function(e){var t=this;return e.toString().replace(YT,function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.key)+arguments[2]})}},{key:"key",get:function(){return this.childDescriptor.key}},{key:"parentNotation",get:function(){return this.parentKlass.constructor.name+"#"+this.parentPropertySignature}},{key:"childNotation",get:function(){return this.childKlass.constructor.name+"#"+this.childPropertySignature}},{key:"parentTopic",get:function(){return this._getTopic(this.parentDescriptor)}},{key:"childTopic",get:function(){return this._getTopic(this.childDescriptor)}},{key:"parentPropertySignature",get:function(){return this._extractTopicSignature(this.parentTopic)}},{key:"childPropertySignature",get:function(){return this._extractTopicSignature(this.childTopic)}}]),WT(e,[{key:"assert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!0!==e&&this.error("{child} does not properly override {parent}"+t)}},{key:"error",value:function(e){var t=this;throw e=e.replace("{parent}",function(e){return t.parentNotation}).replace("{child}",function(e){return t.childNotation}),new SyntaxError(e)}}]),e}();function $T(e){return e.hasOwnProperty("value")?"data":e.hasOwnProperty("get")||e.hasOwnProperty("set")?"accessor":"data"}function QT(e,t,r){r.assert(e.length===t.length)}function JT(e,t,r){var n=$T(e),i=$T(t);switch(n!==i&&r.error('descriptor types do not match. {parent} is "'+n+'", {child} is "'+i+'"'),i){case"data":!function(e,t,r){var n=zT(e.value),i=zT(t.value);switch("undefined"===n&&"undefined"===i&&r.error("descriptor values are both undefined. (class properties are are not currently supported)'"),n!==i&&("function"===i&&void 0===n||void 0!==n)&&r.error('value types do not match. {parent} is "'+n+'", {child} is "'+i+'"'),i){case"function":QT(e.value,t.value,r);break;default:r.error('Unexpected error. Please file a bug with: {parent} is "'+n+'", {child} is "'+i+'"')}}(e,t,r);break;case"accessor":!function(e,t,r){var n="function"==typeof e.get,i="function"==typeof t.get,a="function"==typeof e.set,o="function"==typeof t.set;(n||i)&&(!n&&a&&r.error("{parent} is setter but {child} is getter"),!i&&o&&r.error("{parent} is getter but {child} is setter"),QT(e.get,t.get,r)),(a||o)&&(!a&&n&&r.error("{parent} is getter but {child} is setter"),!o&&i&&r.error("{parent} is setter but {child} is getter"),QT(e.set,t.set,r))}(e,t,r)}}var ZT=[function(e){return e.toLowerCase()},function(e){return e.toUpperCase()},function(e){return e+"s"},function(e){return e.slice(0,-1)},function(e){return e.slice(1,e.length)}];function ew(e,t,r){r.key=t;var n=Object.getPrototypeOf(e),i=Object.getOwnPropertyDescriptor(n,t),a=new XT(n,e,i,r);if(void 0===i){var o=function(e,t){for(var r=0,n=ZT.length;r<n;r++){var i=(0,ZT[r])(t);if(i in e)return i}return null}(n,t),s=o?'\n\n  Did you mean "'+o+'"?':"";a.error("No descriptor matching {child} was found on the prototype chain."+s)}return JT(i,r,a),r}var tw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rw=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),nw="This function will be removed in future versions.";function iw(e,t,r,n){var i=rw(n,2),a=i[0],o=void 0===a?nw:a,s=i[1],u=void 0===s?{}:s;if("function"!=typeof r.value)throw new SyntaxError("Only functions can be marked as deprecated");var c=e.constructor.name+"#"+t;return u.url&&(o+="\n\n    See "+u.url+" for more details.\n\n"),tw({},r,{value:function(){return qT("DEPRECATION "+c+": "+o),r.value.apply(this,arguments)}})}function aw(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return DT(iw,t)}var ow=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function uw(){}function cw(e,t,r){return ow({},r,{value:function(){return function(e,t,r){if("object"===("undefined"==typeof console?"undefined":sw(console))){var n=console.warn;console.warn=uw;var i=t.apply(e,r);return console.warn=n,i}return t.apply(e,r)}(this,r.value,arguments)}})}var lw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function fw(e,t,r){var n=function(e){var t=void 0,r=void 0;return e.value?(t=e.value,r="value"):e.get?(t=e.get,r="get"):e.set&&(t=e.set,r="set"),{fn:t,wrapKey:r}}(r),i=n.fn,a=n.wrapKey,o=new WeakMap,s=Object.create(null),u=Object.create(null),c=0;return lw({},r,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},a,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n,a,l="0",f=0,d=t.length;f<d;f++){var p=t[f],h=(n=u,(a=p)===Object(a)?a:n[a]||(n[a]={})),v=o.get(h);void 0===v&&(v=++c,o.set(h,v)),l+=v}return s[l]||function(e,t,r,n,i){var a=t.apply(e,r);return n[i]=a,a}(this,i,arguments,s,l)}))}function dw(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var pw=Object.defineProperty,hw=Object.getPrototypeOf,vw=void 0;function mw(e,t,r){var n=r.value,i=r.configurable,a=r.enumerable;if("function"!=typeof n)throw new SyntaxError("@autobind can only be used on functions, not: "+n);var o=e.constructor;return{configurable:i,enumerable:a,get:function(){if(this===e)return n;if(this.constructor!==o&&hw(this).constructor===o)return n;if(this.constructor!==o&&t in this.constructor.prototype)return function(e,t){if("undefined"==typeof WeakMap)throw new Error("Using @autobind on "+t.name+"() requires WeakMap support due to its use of super."+t.name+"()\n      See https://github.com/jayphelps/core-decorators.js/issues/20");vw||(vw=new WeakMap),!1===vw.has(e)&&vw.set(e,new WeakMap);var r=vw.get(e);return!1===r.has(t)&&r.set(t,GT(t,e)),r.get(t)}(this,n);var r=GT(n,this);return pw(this,t,{configurable:!0,writable:!0,enumerable:!1,value:r}),r},set:VT(t)}}function gw(e){return 1===e.length?function(e){for(var t=BT(e.prototype),r=FT(t),n=0,i=r.length;n<i;n++){var a=r[n],o=t[a];"function"==typeof o.value&&"constructor"!==a&&pw(e.prototype,a,mw(e.prototype,a,o))}}.apply(void 0,dw(e)):mw.apply(void 0,dw(e))}function yw(e,t,r){return r.writable=!1,r}function Ew(e,t,r){return r.enumerable=!0,r}function bw(e,t,r){return r.enumerable=!1,r}function _w(e,t,r){return r.configurable=!1,r}var Sw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tw=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ww=300;function Iw(e,t,r,n){var i=Tw(n,2),a=i[0],o=void 0===a?ww:a,s=i[1],u=void 0!==s&&s,c=r.value;if("function"!=typeof c)throw new SyntaxError("Only functions can be debounced");return Sw({},r,{value:function(){var e=this,r=jT(this).debounceTimeoutIds,n=r[t],i=u&&!n,a=arguments;clearTimeout(n),r[t]=setTimeout(function(){delete r[t],u||c.apply(e,a)},o),i&&c.apply(this,a)}})}var Aw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cw=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),xw=300;function Ow(e,t,r,n){var i=Cw(n,2),a=i[0],o=void 0===a?xw:a,s=i[1],u=void 0===s?{}:s,c=r.value;if("function"!=typeof c)throw new SyntaxError("Only functions can be throttled");return!1!==u.leading&&(u.leading=!0),!1!==u.trailing&&(u.trailing=!0),Aw({},r,{value:function(){var e=this,r=jT(this),n=r.throttleTimeoutIds,i=r.throttlePreviousTimestamps,a=n[t],s=i[t]||0,l=Date.now();u.trailing&&(r.throttleTrailingArgs=arguments),s||!1!==u.leading||(s=l);var f=o-(l-s);f<=0?(clearTimeout(a),delete n[t],i[t]=l,c.apply(this,arguments)):!a&&u.trailing&&(n[t]=setTimeout(function(){i[t]=!1===u.leading?0:Date.now(),delete n[t],c.apply(e,r.throttleTrailingArgs),r.throttleTrailingArgs=null},f))}})}var Rw=Object.defineProperty;function Nw(e,t,r,n){var i,a=(i=n,Array.isArray(i)?i:Array.from(i)),o=a[0],s=a.slice(1),u=r.configurable,c=r.enumerable,l=r.writable,f=r.get,d=r.set,p=r.value,h=!!f;return{configurable:u,enumerable:c,get:function(){var e=h?f.call(this):p,r=o.call.apply(o,[this,e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(s)));if(h)return r;var n={configurable:u,enumerable:c};return n.value=r,n.writable=l,Rw(this,t,n),r},set:h?d:VT()}}var Pw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mw=Object.defineProperty,Dw=Object.getPrototypeOf;function Lw(e,t){if(r=e,"[object Symbol]"===Object.prototype.toString.call(r)&&"object"===(void 0===r?"undefined":Pw(r))){do{if(t===Object.prototype)return void 0!==t[e];if(t.hasOwnProperty(e))return!0}while(t=Dw(t));return!1}return e in t;var r}function Uw(e,t){if(!t.length)throw new SyntaxError("@mixin() class "+e.name+" requires at least one mixin as an argument");for(var r=0,n=t.length;r<n;r++)for(var i=BT(t[r]),a=FT(i),o=0,s=a.length;o<s;o++){var u=a[o];Lw(u,e.prototype)||Mw(e.prototype,u,i[u])}}function jw(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return HT("@mixin is deprecated and will be removed shortly. Use @mixin from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators"),"function"==typeof t[0]?Uw(t[0],[]):function(e){return Uw(e,t)}}var Fw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bw=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Vw={},Gw={time:console.time?console.time.bind(console):function(e){Vw[e]=new Date},timeEnd:console.timeEnd?console.timeEnd.bind(console):function(e){var t=new Date-Vw[e];delete Vw[e],console.log(e+": "+t+"ms")}},qw=0;function Kw(e,t,r,n){var i=Bw(n,2),a=i[0],o=void 0===a?null:a,s=i[1],u=void 0===s?Gw:s,c=r.value;if(null===o&&(o=e.constructor.name+"."+t),"function"!=typeof c)throw new SyntaxError("@time can only be used on functions, not: "+c);return Fw({},r,{value:function(){var e=o+"-"+qw;qw++,u.time(e);try{return c.apply(this,arguments)}finally{u.timeEnd(e)}}})}var Hw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zw=Object.getPrototypeOf,Ww=Object.getOwnPropertyDescriptor;function Yw(e,t,r){var n=zw(e),i=Ww(n,t);return Hw({},i,{value:r.value,initializer:r.initializer,get:r.get||i.get,set:r.set||i.set})}var Xw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$w=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Qw={profile:console.profile?GT(console.profile,console):function(){},profileEnd:console.profileEnd?GT(console.profileEnd,console):function(){},warn:qT};function Jw(e,t,r,n){var i=$w(n,3),a=i[0],o=void 0===a?null:a,s=i[1],u=void 0!==s&&s,c=i[2],l=void 0===c?Qw:c;if(!Zw.__enabled)return Zw.__warned||(l.warn("console.profile is not supported. All @profile decorators are disabled."),Zw.__warned=!0),r;var f=r.value;if(null===o&&(o=e.constructor.name+"."+t),"function"!=typeof f)throw new SyntaxError("@profile can only be used on functions, not: "+f);return Xw({},r,{value:function(){var e=Date.now(),t=jT(this);(!0===u&&!t.profileLastRan||!1===u||"number"==typeof u&&e-t.profileLastRan>u||"function"==typeof u&&u.apply(this,arguments))&&(l.profile(o),t.profileLastRan=e);try{return f.apply(this,arguments)}finally{l.profileEnd(o)}}})}function Zw(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return DT(Jw,t)}Zw.__enabled=!!console.profile,Zw.__warned=!1;var eI=Object.defineProperty,tI=Object.getOwnPropertyDescriptor;var rI=Object.freeze({override:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return DT(ew,t)},deprecate:aw,deprecated:aw,suppressWarnings:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return DT(cw,t)},memoize:function(){HT("@memoize is deprecated and will be removed shortly. Use @memoize from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators");for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return DT(fw,t)},autobind:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(){return gw(arguments)}:gw(t)},readonly:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return DT(yw,t)},enumerable:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return DT(Ew,t)},nonenumerable:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return DT(bw,t)},nonconfigurable:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return DT(_w,t)},debounce:function(){HT("@debounce is deprecated and will be removed shortly. Use @debounce from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators");for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return DT(Iw,t)},throttle:function(){HT("@throttle is deprecated and will be removed shortly. Use @throttle from lodash-decorators.\n\n  https://www.npmjs.com/package/lodash-decorators");for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return DT(Ow,t)},decorate:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return DT(Nw,t)},mixin:jw,mixins:jw,lazyInitialize:bT,time:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return DT(Kw,t)},extendDescriptor:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return DT(Yw,t)},profile:Zw,applyDecorators:function(e,t){var r=e.prototype;for(var n in t)for(var i=t[n],a=0,o=i.length;a<o;a++){var s=i[a];eI(r,n,s(r,n,tI(r,n)))}return e}}),nI=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="production"===xu.env.NODE_ENV?function(){return function(){}}:rI.deprecated;t.default=r});r(nI);var iI=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=!0});r(iI);var aI=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=iI,e&&e.__esModule?e:{default:e}).default;var e}})});r(aI);var oI=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.SDK_EVENT={INTERNAL:{TEAMS_ACTIVITY:"event:conversation.activity",ACTIVITY_FIELD:{ACTOR:"actor",OBJECT:"object",TARGET:"target"},ACTIVITY_VERB:{ACKNOWLEDGE:"acknowledge",CREATE:"create",POST:"post",SHARE:"share",DELETE:"delete",ADD:"add",LEAVE:"leave",ADD_MODERATOR:"assignModerator",REMOVE_MODERATOR:"unassignModerator",HIDE:"hide",UPDATE:"update"},ACTIVITY_TAG:{HIDDEN:"HIDDEN",ONE_ON_ONE:"ONE_ON_ONE",LOCKED:"LOCKED"}},EXTERNAL:{EVENT_TYPE:{CREATED:"created",DELETED:"deleted",UPDATED:"updated",SEEN:"seen"},OWNER:{CREATOR:"creator",ORG:"org"},STATUS:{ACTIVE:"active",DISABLED:"disabled"},SPACE_TYPE:{DIRECT:"direct",GROUP:"group"},RESOURCE:{MEMBERSHIPS:"memberships",MESSAGES:"messages",ROOMS:"rooms"}}},t.hydraTypes={CONTENT:"CONTENT",MEMBERSHIP:"MEMBERSHIP",MESSAGE:"MESSAGE",ORGANIZATION:"ORGANIZATION",PEOPLE:"PEOPLE",ROOM:"ROOM",TEAM:"TEAM"}});r(oI);oI.SDK_EVENT,oI.hydraTypes;var sI=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.constructHydraId=i,t.deconstructHydraId=function(e){var t=(0,Vy.decode)(e).split("/");return{id:t.pop(),type:t.pop(),cluster:t.pop()}},t.buildHydraMessageId=function(e){return i(oI.hydraTypes.MESSAGE,e)},t.buildHydraPersonId=function(e){return i(oI.hydraTypes.PEOPLE,e)},t.buildHydraRoomId=function(e){return i(oI.hydraTypes.ROOM,e)},t.buildHydraOrgId=function(e){return i(oI.hydraTypes.ORGANIZATION,e)},t.buildHydraMembershipId=function(e,t){return i(oI.hydraTypes.MEMBERSHIP,e+":"+t)},t.getHydraRoomType=function(e){if(e.includes(oI.SDK_EVENT.INTERNAL.ACTIVITY_TAG.ONE_ON_ONE))return oI.SDK_EVENT.EXTERNAL.SPACE_TYPE.DIRECT;return oI.SDK_EVENT.EXTERNAL.SPACE_TYPE.GROUP},t.getHydraFiles=function(e){var t=[],r=e.object.files;if(r)for(var a=r.items,o=0;o<a.length;o+=1){var s=i(oI.hydraTypes.CONTENT,e.id+"/"+o);t.push(n+"/contents/"+s)}return t};var r="ciscospark://us",n="https://api.ciscospark.com/v1";function i(e,t){return(0,Vy.encode)(r+"/"+e.toUpperCase()+"/"+t)}});r(sI);sI.constructHydraId,sI.deconstructHydraId,sI.buildHydraMessageId,sI.buildHydraPersonId,sI.buildHydraRoomId,sI.buildHydraOrgId,sI.buildHydraMembershipId,sI.getHydraRoomType,sI.getHydraFiles;var uI=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(hS),n=a(_f),i=a(vS);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=(0,i.default)(r.default.mark(function e(t){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.internal.device.services.conversationServiceUrl){e.next=2;break}return e.abrupt("return",n.default.resolve());case 2:return e.abrupt("return",t.internal.device.register());case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()});r(uI);var cI=n(function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"base64",{enumerable:!0,get:function(){return r(Vy).default}}),Object.defineProperty(t,"cappedDebounce",{enumerable:!0,get:function(){return r(Gy).default}}),Object.defineProperty(t,"checkRequired",{enumerable:!0,get:function(){return r(qy).default}}),Object.defineProperty(t,"Defer",{enumerable:!0,get:function(){return r(Ky).default}}),Object.defineProperty(t,"makeStateDataType",{enumerable:!0,get:function(){return r(Hy).default}}),Object.defineProperty(t,"make",{enumerable:!0,get:function(){return r(yE).default}}),Object.defineProperty(t,"oneFlight",{enumerable:!0,get:function(){return r(oS).default}}),Object.defineProperty(t,"patterns",{enumerable:!0,get:function(){return r(sS).default}}),Object.defineProperty(t,"proxyEvents",{enumerable:!0,get:function(){return uS.proxyEvents}}),Object.defineProperty(t,"transferEvents",{enumerable:!0,get:function(){return uS.transferEvents}}),Object.defineProperty(t,"createEventEnvelope",{enumerable:!0,get:function(){return mS.createEventEnvelope}}),Object.defineProperty(t,"ensureMyIdIsAvailable",{enumerable:!0,get:function(){return mS.ensureMyIdIsAvailable}}),Object.defineProperty(t,"resolveWith",{enumerable:!0,get:function(){return r(gS).default}}),Object.defineProperty(t,"retry",{enumerable:!0,get:function(){return r(zS).default}}),Object.defineProperty(t,"tap",{enumerable:!0,get:function(){return r(WS).default}}),Object.defineProperty(t,"whileInFlight",{enumerable:!0,get:function(){return r(YS).default}}),Object.defineProperty(t,"Exception",{enumerable:!0,get:function(){return r(gT).default}}),Object.defineProperty(t,"deprecated",{enumerable:!0,get:function(){return r(nI).default}}),Object.defineProperty(t,"inBrowser",{enumerable:!0,get:function(){return r(aI).default}}),Object.defineProperty(t,"hydraTypes",{enumerable:!0,get:function(){return oI.hydraTypes}}),Object.defineProperty(t,"SDK_EVENT",{enumerable:!0,get:function(){return oI.SDK_EVENT}}),Object.defineProperty(t,"buildHydraMembershipId",{enumerable:!0,get:function(){return sI.buildHydraMembershipId}}),Object.defineProperty(t,"buildHydraMessageId",{enumerable:!0,get:function(){return sI.buildHydraMessageId}}),Object.defineProperty(t,"buildHydraOrgId",{enumerable:!0,get:function(){return sI.buildHydraOrgId}}),Object.defineProperty(t,"buildHydraPersonId",{enumerable:!0,get:function(){return sI.buildHydraPersonId}}),Object.defineProperty(t,"buildHydraRoomId",{enumerable:!0,get:function(){return sI.buildHydraRoomId}}),Object.defineProperty(t,"getHydraRoomType",{enumerable:!0,get:function(){return sI.getHydraRoomType}}),Object.defineProperty(t,"getHydraFiles",{enumerable:!0,get:function(){return sI.getHydraFiles}}),Object.defineProperty(t,"constructHydraId",{enumerable:!0,get:function(){return sI.constructHydraId}}),Object.defineProperty(t,"deconstructHydraId",{enumerable:!0,get:function(){return sI.deconstructHydraId}}),Object.defineProperty(t,"ensureConvoAvailability",{enumerable:!0,get:function(){return r(uI).default}})});r(cI),ic("keys",function(){return function(e){return kc(Hc(e))}});var lI=Xu.Object.keys,fI=n(function(e){e.exports={default:lI,__esModule:!0}});r(fI);var dI=4;var pI=function(e){return vv(e,dI)},hI=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.safeSetTimeout=function(){var e=setTimeout.apply(void 0,arguments);e.unref&&e.unref();return e},t.safeSetInterval=function(){var e=setInterval.apply(void 0,arguments);e.unref&&e.unref();return e}});r(hI);hI.safeSetTimeout,hI.safeSetInterval;var vI=0;var mI=function(e){var t=++vI;return kv(e)+t};var gI=function(e){return Eb(function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,o&&yS(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,a)}return t})},yI=Object.prototype.hasOwnProperty,EI=gI(function(e,t){if(Mp(t)||Fp(t))up(t,Bp(t),e);else for(var r in t)yI.call(t,r)&&sp(e,r,t[r])});var bI=function(e){return function(t){return null==e?void 0:e[t]}},_I=bI({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),SI=/[&<>"']/g,TI=RegExp(SI.source);var wI=function(e){return(e=kv(e))&&TI.test(e)?e.replace(SI,_I):e};var II=function(e){return function(t,r,n){for(var i=-1,a=Object(t),o=n(t),s=o.length;s--;){var u=o[e?s:++i];if(!1===r(a[u],u,a))break}return t}}();var AI=function(e,t){return e&&II(e,t,Bp)};var CI=function(e,t){return e&&AI(e,yb(t))},xI="[object String]";var OI=function(e){return"string"==typeof e||!gp(e)&&lp(e)&&cd(e)==xI};var RI=function(e,t){return Mf(t,function(t){return e[t]})};var NI=function(e){return null==e?[]:RI(e,Bp(e))},kI=Math.max;var PI=function(e,t,r,n){e=Fp(e)?e:NI(e),r=r&&!n?W_(r):0;var i=e.length;return r<0&&(r=kI(i+r,0)),OI(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&t_(e,t,r)>-1},MI="[object Date]";var DI=function(e){return lp(e)&&cd(e)==MI},LI=xp&&xp.isDate,UI=LI?Cp(LI):DI,jI="__lodash_hash_undefined__";var FI=function(e){return this.__data__.set(e,jI),this};var BI=function(e){return this.__data__.has(e)};function VI(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Jd;++t<r;)this.add(e[t])}VI.prototype.add=VI.prototype.push=FI,VI.prototype.has=BI;var GI=VI;var qI=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1};var KI=function(e,t){return e.has(t)},HI=1,zI=2;var WI=function(e,t,r,n,i,a){var o=r&HI,s=e.length,u=t.length;if(s!=u&&!(o&&u>s))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var l=-1,f=!0,d=r&zI?new GI:void 0;for(a.set(e,t),a.set(t,e);++l<s;){var p=e[l],h=t[l];if(n)var v=o?n(h,p,l,t,e,a):n(p,h,l,e,t,a);if(void 0!==v){if(v)continue;f=!1;break}if(d){if(!qI(t,function(e,t){if(!KI(d,t)&&(p===e||i(p,e,r,n,a)))return d.push(t)})){f=!1;break}}else if(p!==h&&!i(p,h,r,n,a)){f=!1;break}}return a.delete(e),a.delete(t),f};var YI=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r};var XI=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},$I=1,QI=2,JI="[object Boolean]",ZI="[object Date]",eA="[object Error]",tA="[object Map]",rA="[object Number]",nA="[object RegExp]",iA="[object Set]",aA="[object String]",oA="[object Symbol]",sA="[object ArrayBuffer]",uA="[object DataView]",cA=Jf?Jf.prototype:void 0,lA=cA?cA.valueOf:void 0;var fA=function(e,t,r,n,i,a,o){switch(r){case uA:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case sA:return!(e.byteLength!=t.byteLength||!a(new _h(e),new _h(t)));case JI:case ZI:case rA:return Lf(+e,+t);case eA:return e.name==t.name&&e.message==t.message;case nA:case aA:return e==t+"";case tA:var s=YI;case iA:var u=n&$I;if(s||(s=XI),e.size!=t.size&&!u)return!1;var c=o.get(e);if(c)return c==t;n|=QI,o.set(e,t);var l=WI(s(e),s(t),n,i,a,o);return o.delete(e),l;case oA:if(lA)return lA.call(e)==lA.call(t)}return!1},dA=1,pA=Object.prototype.hasOwnProperty;var hA=function(e,t,r,n,i,a){var o=r&dA,s=oh(e),u=s.length;if(u!=oh(t).length&&!o)return!1;for(var c=u;c--;){var l=s[c];if(!(o?l in t:pA.call(t,l)))return!1}var f=a.get(e);if(f&&a.get(t))return f==t;var d=!0;a.set(e,t),a.set(t,e);for(var p=o;++c<u;){var h=e[l=s[c]],v=t[l];if(n)var m=o?n(v,h,l,t,e,a):n(h,v,l,e,t,a);if(!(void 0===m?h===v||i(h,v,r,n,a):m)){d=!1;break}p||(p="constructor"==l)}if(d&&!p){var g=e.constructor,y=t.constructor;g!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y)&&(d=!1)}return a.delete(e),a.delete(t),d},vA=1,mA="[object Arguments]",gA="[object Array]",yA="[object Object]",EA=Object.prototype.hasOwnProperty;var bA=function(e,t,r,n,i,a){var o=gp(e),s=gp(t),u=o?gA:yh(e),c=s?gA:yh(t),l=(u=u==mA?yA:u)==yA,f=(c=c==mA?yA:c)==yA,d=u==c;if(d&&Ep(e)){if(!Ep(t))return!1;o=!0,l=!1}if(d&&!l)return a||(a=new rp),o||Rp(e)?WI(e,t,r,n,i,a):fA(e,t,u,r,n,i,a);if(!(r&vA)){var p=l&&EA.call(e,"__wrapped__"),h=f&&EA.call(t,"__wrapped__");if(p||h){var v=p?e.value():e,m=h?t.value():t;return a||(a=new rp),i(v,m,r,n,a)}}return!!d&&(a||(a=new rp),hA(e,t,r,n,i,a))};var _A=function e(t,r,n,i,a){return t===r||(null==t||null==r||!lp(t)&&!lp(r)?t!=t&&r!=r:bA(t,r,n,i,e,a))};var SA=function(e,t){return _A(e,t)},TA=Object.prototype.hasOwnProperty;var wA=function(e,t){return null!=e&&TA.call(e,t)};var IA=function(e,t,r){for(var n=-1,i=(t=Pv(t,e)).length,a=!1;++n<i;){var o=Lv(t[n]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&wp(i)&&Sp(o,i)&&(gp(e)||mp(e))};var AA=function(e,t){return null!=e&&IA(e,t,wA)};var CA=function(e,t,r){var n=-1,i=(t=Pv(t,e)).length;for(i||(i=1,e=void 0);++n<i;){var a=null==e?void 0:e[Lv(t[n])];void 0===a&&(n=i,a=r),e=md(a)?a.call(e):a}return e};var xA=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1},OA=lh&&1/XI(new lh([,-0]))[1]==1/0?function(e){return new lh(e)}:Mb,RA=200;var NA=function(e,t,r){var n=-1,i=r_,a=e.length,o=!0,s=[],u=s;if(r)o=!1,i=xA;else if(a>=RA){var c=t?null:OA(e);if(c)return XI(c);o=!1,i=KI,u=new GI}else u=t?[]:s;e:for(;++n<a;){var l=e[n],f=t?t(l):l;if(l=r||0!==l?l:0,o&&f==f){for(var d=u.length;d--;)if(u[d]===f)continue e;t&&u.push(f),s.push(l)}else i(u,f,r)||(u!==s&&u.push(f),s.push(l))}return s};var kA=function(e){return lp(e)&&Fp(e)},PA=Eb(function(e){return NA(Qv(e,1,kA,!0))}),MA="Expected a function";var DA=function(e,t){var r;if("function"!=typeof t)throw new TypeError(MA);return e=W_(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}};var LA=function(e){return DA(2,e)};var UA=function(e,t){return function(r,n){if(null==r)return r;if(!Fp(r))return e(r,n);for(var i=r.length,a=t?i:-1,o=Object(r);(t?a--:++a<i)&&!1!==n(o[a],a,o););return r}}(AI);var jA=function(e,t){return(gp(e)?np:UA)(e,yb(t))},FA=/\s+/,BA=function(e,t){var r,n=-1,i=e.length,a=t[0],o=t[1],s=t[2];switch(t.length){case 0:for(;++n<i;)(r=e[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=e[n]).callback.call(r.ctx,a);return;case 2:for(;++n<i;)(r=e[n]).callback.call(r.ctx,a,o);return;case 3:for(;++n<i;)(r=e[n]).callback.call(r.ctx,a,o,s);return;default:for(;++n<i;)(r=e[n]).callback.apply(r.ctx,t);return}},VA=function(e,t,r,n){if(!r)return!0;if("object"==typeof r){for(var i in r)e[t].apply(e,[i,r[i]].concat(n));return!1}if(FA.test(r)){for(var a=r.split(FA),o=0,s=a.length;o<s;o++)e[t].apply(e,[a[o]].concat(n));return!1}return!0},GA=function(e){return function(t,r,n){if(!t)throw new Error("Trying to listenTo event: '"+r+"' but the target object is undefined");if((this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=mI("l"))]=t,n||"object"!=typeof r||(n=this),"function"!=typeof t[e])throw new Error("Trying to listenTo event: '"+r+"' on object: "+t.toString()+" but it does not have an 'on' method so is unbindable");return t[e](r,n,this),this}},qA=Array.prototype.slice,KA={on:function(e,t,r){return VA(this,"on",e,[t,r])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:r,ctx:r||this}),this):this},once:function(e,t,r){if(!VA(this,"once",e,[t,r])||!t)return this;var n=this,i=LA(function(){n.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,r)},off:function(e,t,r){var n,i,a,o,s,u,c,l;if(!this._events||!VA(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;for(s=0,u=(o=e?[e]:Bp(this._events)).length;s<u;s++)if(e=o[s],a=this._events[e]){if(this._events[e]=n=[],t||r)for(c=0,l=a.length;c<l;c++)i=a[c],(t&&t!==i.callback&&t!==i.callback._callback||r&&r!==i.context)&&n.push(i);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=qA.call(arguments,1);if(!VA(this,"trigger",e,t))return this;var r=this._events[e],n=this._events.all;return r&&BA(r,t),n&&BA(n,arguments),this},stopListening:function(e,t,r){var n=this._listeningTo;if(!n)return this;var i=!t&&!r;r||"object"!=typeof t||(r=this),e&&((n={})[e._listenId]=e);var a=this;return jA(n,function(e,n){e.off(t,r,a),(i||vm(e._events))&&delete a._listeningTo[n]}),this},createEmitter:function(e){return EI(e||{},KA)},listenTo:GA("on"),listenToOnce:GA("once"),listenToAndRun:function(e,t,r){return this.listenTo.apply(this,arguments),r||"object"!=typeof t||(r=this),r.apply(this),this}};KA.bind=KA.on,KA.unbind=KA.off,KA.removeListener=KA.off,KA.removeAllListeners=KA.off,KA.emit=KA.trigger;var HA=KA,zA=Array.prototype.slice;function WA(e){if("object"!=typeof(e=e||{}))throw new TypeError("Options must be an object");this.storage={},this.separator=e.separator||"."}WA.prototype.add=function(e,t){(this.storage[e]||(this.storage[e]=[])).push(t)},WA.prototype.remove=function(e){var t,r;for(t in this.storage)(r=this.storage[t]).some(function(t,n){if(t===e)return r.splice(n,1),!0})},WA.prototype.get=function(e){var t,r=[];for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+this.separator)||(r=r.concat(this.storage[t]));return r},WA.prototype.getGrouped=function(e){var t,r={};for(t in this.storage)e&&e!==t&&0!==t.indexOf(e+this.separator)||(r[t]=zA.call(this.storage[t]));return r},WA.prototype.getAll=function(e){var t,r={};for(t in this.storage)e!==t&&0!==t.indexOf(e+this.separator)||(r[t]=zA.call(this.storage[t]));return r},WA.prototype.run=function(e,t){var r=zA.call(arguments,2);this.get(e).forEach(function(e){e.apply(t||this,r)})};var YA=WA,XA=function(e){return EI({},e)},$A=/^change:/,QA=function(){};function JA(e,t){t||(t={}),this.cid||(this.cid=mI("state")),this._events={},this._values={},this._eventBubblingHandlerCache={},this._definition=Object.create(this._definition),t.parse&&(e=this.parse(e,t)),this.parent=t.parent,this.collection=t.collection,this._keyTree=new YA,this._initCollections(),this._initChildren(),this._cache={},this._previousAttributes={},e&&this.set(e,EI({silent:!0,initial:!0},t)),this._changed={},this._derived&&this._initDerived(),!1!==t.init&&this.initialize.apply(this,arguments)}function ZA(e,t,r,n){var i,a,o=e._definition[t]={};if(OI(r))(i=e._ensureValidType(r))&&(o.type=i);else{if(Array.isArray(r)&&(r={type:(a=r)[0],required:a[1],default:a[2]}),(i=e._ensureValidType(r.type))&&(o.type=i),r.required&&(o.required=!0),r.default&&"object"==typeof r.default)throw new TypeError("The default value for "+t+" cannot be an object/array, must be a value or a function which returns a value/object/array");o.default=r.default,o.allowNull=!!r.allowNull&&r.allowNull,r.setOnce&&(o.setOnce=!0),o.required&&void 0===o.default&&!o.setOnce&&(o.default=e._getDefaultForType(i)),o.test=r.test,o.values=r.values}return n&&(o.session=!0),i||(i=OI(r)?r:r.type,console.warn("Invalid data type of `"+i+"` for `"+t+"` property. Use one of the default types or define your own")),Object.defineProperty(e,t,{set:function(e){this.set(t,e)},get:function(){if(!this._values)throw Error('You may be trying to `extend` a state object with "'+t+'" which has been defined in `props` on the object being extended');var e=this._values[t],r=this._dataTypes[o.type];if(void 0!==e)return r&&r.get&&(e=r.get(e)),e;var n=CA(o,"default");(this._values[t]=n,void 0!==n)&&this._getOnChangeForType(o.type)(n,e,t);return n}}),o}function eC(e,t,r){(e._derived[t]={fn:md(r)?r:r.fn,cache:!1!==r.cache,depList:r.deps||[]}).depList.forEach(function(r){e._deps[r]=PA(e._deps[r]||[],[t])}),Object.defineProperty(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError("`"+t+"` is a derived property, it can't be set directly.")}})}EI(JA.prototype,HA,{extraProperties:"ignore",idAttribute:"id",namespaceAttribute:"namespace",typeAttribute:"modelType",initialize:function(){return this},getId:function(){return this[this.idAttribute]},getNamespace:function(){return this[this.namespaceAttribute]},getType:function(){return this[this.typeAttribute]},isNew:function(){return null==this.getId()},escape:function(e){return wI(this.get(e))},isValid:function(e){return this._validate({},EI(e||{},{validate:!0}))},parse:function(e,t){return e},serialize:function(e){var t=EI({props:!0},e),r=this.getAttributes(t,!0),n=function(e,t){r[t]=this[t].serialize()}.bind(this);return CI(this._children,n),CI(this._collections,n),r},set:function(e,t,r){var n,i,a,o,s,u,c,l,f,d,p,h,v,m,g,y,E,b=this,_=this.extraProperties;if(ld(e)||null===e?(f=e,r=t):(f={})[e]=t,r=r||{},!this._validate(f,r))return!1;h=r.unset,p=r.silent,m=r.initial,n=this._changing,this._changing=!0,i=[],m?this._previousAttributes={}:n||(this._previousAttributes=this.attributes,this._changed={});for(var S=0,T=Object.keys(f),w=T.length;S<w;S++){if(a=typeof(o=f[l=T[S]]),v=this._values[l],!(s=this._definition[l])){if(this._children[l]||this._collections[l]){ld(o)||(o={}),this[l].set(o,r);continue}if("ignore"===_)continue;if("reject"===_)throw new TypeError('No "'+l+'" property defined on '+(this.type||"this")+' model and extraProperties not set to "ignore" or "allow"');if("allow"===_)s=this._createPropertyDefinition(l,"any");else if(_)throw new TypeError('Invalid value for extraProperties: "'+_+'"')}if(y=this._getCompareForType(s.type),E=this._getOnChangeForType(s.type),(d=this._dataTypes[s.type])&&d.set&&(o=(u=d.set(o)).val,a=u.type),s.test&&(c=s.test.call(this,o,a)))throw new TypeError("Property '"+l+"' failed validation with error: "+c);if(void 0===o&&s.required)throw new TypeError("Required property '"+l+"' must be of type "+s.type+". Tried to set "+o);if(null===o&&s.required&&!s.allowNull)throw new TypeError("Property '"+l+"' must be of type "+s.type+" (cannot be null). Tried to set "+o);if(s.type&&"any"!==s.type&&s.type!==a&&null!=o)throw new TypeError("Property '"+l+"' must be of type "+s.type+". Tried to set "+o);if(s.values&&!PI(s.values,o)){var I=CA(s,"default");if(h&&void 0!==I)o=I;else if(!h||h&&void 0!==o)throw new TypeError("Property '"+l+"' must be one of values: "+s.values.join(", ")+". Tried to set "+o)}if(g=m||!y(v,o,l),s.setOnce&&void 0!==v&&g)throw new TypeError("Property '"+l+"' can only be set once.");g?(E(o,v,l),m||(this._changed[l]=o,this._previousAttributes[l]=v,h&&delete this._values[l],p||i.push({prev:v,val:o,key:l})),h||(this._values[l]=o)):delete this._changed[l]}if(i.length&&(this._pending=!0),i.forEach(function(e){b.trigger("change:"+e.key,b,e.val,r)}),n)return this;for(;this._pending;)this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},get:function(e){return this[e]},toggle:function(e){var t,r,n,i,a=this._definition[e];if("boolean"===a.type)this[e]=!this[e];else{if(!a||!a.values)throw new TypeError("Can only toggle properties that are type `boolean` or have `values` array.");this[e]=(t=a.values,r=this[e],n=t.length,(i=t.indexOf(r)+1)>n-1&&(i=0),t[i])}return this},previousAttributes:function(){return XA(this._previousAttributes)},hasChanged:function(e){return null==e?!!Object.keys(this._changed).length:AA(this._derived,e)?this._derived[e].depList.some(function(e){return this.hasChanged(e)},this):AA(this._changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&XA(this._changed);var t,r,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var a in e)(r=this._definition[a])&&(this._getCompareForType(r.type)(i[a],t=e[a])||((n||(n={}))[a]=t));return n},toJSON:function(){return this.serialize()},unset:function(e,t){var r=this;(e=Array.isArray(e)?e:[e]).forEach(function(e){var n,i=r._definition[e];if(i)return i.required?(n=CA(i,"default"),r.set(e,n,t)):r.set(e,n,EI({},t,{unset:!0}))})},clear:function(e){var t=this;return Object.keys(this.attributes).forEach(function(r){t.unset(r,e)}),this},previous:function(e){return null!=e&&Object.keys(this._previousAttributes).length?this._previousAttributes[e]:null},_getDefaultForType:function(e){var t=this._dataTypes[e];return t&&t.default},_getCompareForType:function(e){var t=this._dataTypes[e];return t&&t.compare?t.compare.bind(this):SA},_getOnChangeForType:function(e){var t=this._dataTypes[e];return t&&t.onChange?t.onChange.bind(this):QA},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=EI({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return!r||(this.trigger("invalid",this,r,EI(t||{},{validationError:r})),!1)},_createPropertyDefinition:function(e,t,r){return ZA(this,e,t,r)},_ensureValidType:function(e){return PI(["string","number","boolean","array","object","date","state","any"].concat(Object.keys(this._dataTypes)),e)?e:void 0},getAttributes:function(e,t){e=EI({session:!1,props:!1,derived:!1},e||{});var r,n,i={};for(var a in this._definition)n=this._definition[a],(e.session&&n.session||e.props&&!n.session)&&(r=t?this._values[a]:this[a],t&&r&&md(r.serialize)&&(r=r.serialize()),void 0===r&&(r=CA(n,"default")),void 0!==r&&(i[a]=r));if(e.derived)for(var o in this._derived)i[o]=this[o];return i},_initDerived:function(){var e=this;CI(this._derived,function(t,r){var n=e._derived[r];n.deps=n.depList;var i=function(){var t=n.fn.call(e);e._cache[r]===t&&n.cache||(n.cache&&(e._previousAttributes[r]=e._cache[r]),e._cache[r]=t,e.trigger("change:"+r,e,e._cache[r]))};n.deps.forEach(function(t){e._keyTree.add(t,i)})}),this.on("all",function(t){$A.test(t)&&e._keyTree.get(t.split(":")[1]).forEach(function(e){e()})},this)},_getDerivedProperty:function(e,t){return this._derived[e].cache?(!t&&this._cache.hasOwnProperty(e)||(this._cache[e]=this._derived[e].fn.apply(this)),this._cache[e]):this._derived[e].fn.apply(this)},_initCollections:function(){var e;if(this._collections)for(e in this._collections)this._safeSet(e,new this._collections[e](null,{parent:this}))},_initChildren:function(){var e;if(this._children)for(e in this._children)this._safeSet(e,new this._children[e]({},{parent:this})),this.listenTo(this[e],"all",this._getCachedEventBubblingHandler(e))},_getCachedEventBubblingHandler:function(e){return this._eventBubblingHandlerCache[e]||(this._eventBubblingHandlerCache[e]=function(t,r,n){$A.test(t)?this.trigger("change:"+e+"."+t.split(":")[1],r,n):"change"===t&&this.trigger("change",this)}.bind(this)),this._eventBubblingHandlerCache[e]},_verifyRequired:function(){var e=this.attributes;for(var t in this._definition)if(this._definition[t].required&&void 0===e[t])return!1;return!0},_safeSet:function(e,t){if(e in this)throw new Error("Encountered namespace collision while setting instance property `"+e+"`");return this[e]=t,this}}),Object.defineProperties(JA.prototype,{attributes:{get:function(){return this.getAttributes({props:!0,session:!0})}},all:{get:function(){return this.getAttributes({session:!0,props:!0,derived:!0})}},isState:{get:function(){return!0},set:function(){}}});var tC={string:{default:function(){return""}},date:{set:function(e){var t;if(null==e)t="object";else if(UI(e))t="date",e=e.valueOf();else{var r=null,n=new Date(e).valueOf();isNaN(n)&&(n=new Date(parseInt(e,10)).valueOf(),isNaN(n)&&(r=!0)),e=n,t="date",r&&(t=typeof e)}return{val:e,type:t}},get:function(e){return null==e?e:new Date(e)},default:function(){return new Date}},array:{set:function(e){return{val:e,type:Array.isArray(e)?"array":typeof e}},default:function(){return[]}},object:{set:function(e){var t=typeof e;return"object"!==t&&void 0===e&&(e=null,t="object"),{val:e,type:t}},default:function(){return{}}},state:{set:function(e){return e instanceof JA||e&&e.isState?{val:e,type:"state"}:{val:e,type:typeof e}},compare:function(e,t){return e===t},onChange:function(e,t,r){t&&this.stopListening(t,"all",this._getCachedEventBubblingHandler(r)),null!=e&&this.listenTo(e,"all",this._getCachedEventBubblingHandler(r))}}};JA.extend=function(e){var t,r=this;t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return r.apply(this,arguments)},EI(t,r);var n=function(){this.constructor=t};if(n.prototype=r.prototype,t.prototype=new n,t.prototype._derived=EI({},r.prototype._derived),t.prototype._deps=EI({},r.prototype._deps),t.prototype._definition=EI({},r.prototype._definition),t.prototype._collections=EI({},r.prototype._collections),t.prototype._children=EI({},r.prototype._children),t.prototype._dataTypes=EI({},r.prototype._dataTypes||tC),e)for(var i=["dataTypes","props","session","derived","collections","children"],a=0;a<arguments.length;a++){var o=arguments[a];o.dataTypes&&CI(o.dataTypes,function(e,r){t.prototype._dataTypes[r]=e}),o.props&&CI(o.props,function(e,r){ZA(t.prototype,r,e)}),o.session&&CI(o.session,function(e,r){ZA(t.prototype,r,e,!0)}),o.derived&&CI(o.derived,function(e,r){eC(t.prototype,r,e)}),o.collections&&CI(o.collections,function(e,r){t.prototype._collections[r]=e}),o.children&&CI(o.children,function(e,r){t.prototype._children[r]=e}),EI(t.prototype,fm(o,i))}return t.__super__=r.prototype,t};var rC=JA,nC=n(function(e,t){t.__esModule=!0;var r,n=(r=Xy)&&r.__esModule?r:{default:r};t.default=function(e,t,r){return t in e?(0,n.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}});r(nC);var iC=n(function(e,t){t.__esModule=!0;var r,n=(r=iT)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,n.default)(e)}});r(iC);pE("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return hb.def(rE(this,"Set"),e=0===e?0:e,e)}},hb);nc(nc.P+nc.R,"Set",{toJSON:vb("Set")}),hE("Set"),vE("Set");var aC=Xu.Set,oC=n(function(e){e.exports={default:aC,__esModule:!0}});r(oC);var sC=function(){return Qf.Date.now()},uC="Expected a function",cC=Math.max,lC=Math.min;var fC=function(e,t,r){var n,i,a,o,s,u,c=0,l=!1,f=!1,d=!0;if("function"!=typeof e)throw new TypeError(uC);function p(t){var r=n,a=i;return n=i=void 0,c=t,o=e.apply(a,r)}function h(e){var r=e-u;return void 0===u||r>=t||r<0||f&&e-c>=a}function v(){var e=sC();if(h(e))return m(e);s=setTimeout(v,function(e){var r=t-(e-u);return f?lC(r,a-(e-c)):r}(e))}function m(e){return s=void 0,d&&n?p(e):(n=i=void 0,o)}function g(){var e=sC(),r=h(e);if(n=arguments,i=this,u=e,r){if(void 0===s)return function(e){return c=e,s=setTimeout(v,t),l?p(e):o}(u);if(f)return clearTimeout(s),s=setTimeout(v,t),p(u)}return void 0===s&&(s=setTimeout(v,t)),o}return t=q_(t)||0,ld(r)&&(l=!!r.leading,a=(f="maxWait"in r)?cC(q_(r.maxWait)||0,t):a,d="trailing"in r?!!r.trailing:d),g.cancel=function(){void 0!==s&&clearTimeout(s),c=0,n=u=i=s=void 0},g.flush=function(){return void 0===s?o:m(sC())},g},dC=8;function pC(e,t,r){var n=rS(e,dC,void 0,void 0,void 0,void 0,void 0,t=r?void 0:t);return n.placeholder=pC.placeholder,n}pC.placeholder={};var hC=pC,vC=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NotFoundError=t.StorageError=void 0;var r=o(hT),n=o(zy),i=o(vT),a=o(mT);function o(e){return e&&e.__esModule?e:{default:e}}var s=t.StorageError=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(cI.Exception);t.NotFoundError=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(s)});r(vC);vC.NotFoundError,vC.StorageError;var mC=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=h(nC),n=h(cb),i=h(iC),a=h(oC),o=h(gb),s=h(_f),u=h(Rf),c=h(aS),l=h(CA),f=h(nm),d=h(fC),p=h(hC);function h(e){return e&&e.__esModule?e:{default:e}}t.persist=function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(3===r.length)return e("@").apply(void 0,r);var i=r[0],a=r[1];return function(e,t,r){if("initialize"!==t)throw new TypeError("@persist can only currently be applied to AmpersandState objects or their derivatives and must be applied to the initialize method");r.value=(0,c.default)(r.value,function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var c=(0,u.default)(e,this,n),l="@"===i?"change":"change:"+i;return this.on(l,(0,d.default)(function(){var e=!a||u.default.apply(Reflect,[a,t].concat(n));return e?"@"===i?t.boundedStorage.put(i,t):t.boundedStorage.put(i,t[i]):s.default.resolve()},0)),c}),b(e,t)}},t.waitForValue=function(e){if(!e)throw new Error("`key` is required");return function(t,r,a){return g.add(t,r,e),a.value=(0,c.default)(a.value,function(e){for(var n=this,a=arguments.length,o=Array(a>1?a-1:0),c=1;c<a;c++)o[c-1]=arguments[c];var l=g.get(t,r);return s.default.all([].concat((0,i.default)(l)).map(function(e){return n.boundedStorage.waitFor(e)})).then(function(){return(0,u.default)(e,n,o)})}),"object"!==(void 0===t?"undefined":(0,n.default)(t))||t.prototype||(t[r]=a.value),b(t,r),a}};var v=o.default,m=a.default,g=new((0,cI.make)(v,v,m));var y=new a.default;var E=new a.default;function b(e,t){var n=function(e){return e.namespace?e.namespace:e}(e);if(!y.has(n)){if(y.add(n),e.initialize)return void(e.initialize=(0,c.default)(e.initialize,function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=(0,u.default)(e,this,r);return(0,u.default)(i,this,r),a}));e.initialize=i}function i(){var n=this,i=this.getNamespace();this.webex.initialize=(0,c.default)(this.webex.initialize||f.default,function(a){var o=this;E.add(i);for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];(0,u.default)(a,this,f);var h=(0,p.default)(function(e,t){o.logger.debug("storage:("+i+"): got `"+e+"` for first time"),"@"===e?n.parent.set((0,r.default)({},i.toLowerCase(),t)):(0,l.default)(n[e],"isState")?n[e].set(t):n.set(e,t),o.logger.debug("storage:("+i+"): set `"+e+"` for first time")}),v=(0,p.default)(function(e,t){return t instanceof vC.NotFoundError||"production"!==xu.env.NODE_ENV&&t.toString().includes("MockNotFoundError")?(o.logger.debug("storage("+i+"): no data for `"+e+"`, continuing"),s.default.resolve()):(o.logger.error("storage("+i+"): failed to init `"+e+"`",t),s.default.reject(t))}),m=g.get(e,t),y=[];m.forEach(function(e){y.push(o.boundedStorage.get(i,e).then(h(e)).catch(v(e)))}),s.default.all(y).then(function(){E.delete(i),0===E.size&&(o.loaded=!0)})})}}});r(mC);mC.persist,mC.waitForValue;var gC=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(Af),n=l(uc),i=l(_f),a=l(gb),o=l(zy),s=l($y),u=l(gE);t.default=function(e,t){var u,l,d=(u=(0,cI.oneFlight)({keyFactory:function(e){return e}}),function(e,t,r,n,i){var a={};Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0);a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0);void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}((l=function(){function r(){(0,o.default)(this,r),t.logger.debug("webex-store: constructing "+e+"Storage"),f.set(this,new a.default)}return(0,s.default)(r,[{key:"clear",value:function(){var e=[];return this.bindings.forEach(function(t){e.push(t.clear())}),i.default.all(e)}},{key:"del",value:function(e,r){return t.logger.debug("webex-store: removing "+e+":"+r),this._getBinding(e).then(function(e){return e.del(r)})}},{key:"get",value:function(e,r){return t.logger.debug("webex-store: retrieving "+e+":"+r),this._getBinding(e).then(function(e){return e.get(r)})}},{key:"put",value:function(e,r,n){return void 0===n?this.del(e,r):(t.logger.debug("webex-store: setting "+e+":"+r),this._getBinding(e).then(function(e){return e.put(r,n.serialize?n.serialize():n)}).then(function(){return n}))}},{key:"_getBinding",value:function(e){var r=this;return new i.default(function(n){t.logger.debug("storage: getting binding for `"+e+"`");var i=r.bindings.get(e);return i?(t.logger.debug("storage: found binding for `"+e+"`"),n(i)):n(r.adapter.bind(e,{logger:t.logger}).then(function(n){return t.logger.debug("storage: made binding for `"+e+"`"),r.bindings.set(e,n),n}))})}},{key:"adapter",get:function(){return t.config.storage[e+"Adapter"]}},{key:"bindings",get:function(){return f.get(this)}}]),r}()).prototype,"_getBinding",[u],(0,n.default)(l.prototype,"_getBinding"),l.prototype),l);return(0,r.default)(d.prototype,c.default),new d};var c=l(HA);function l(e){return e&&e.__esModule?e:{default:e}}var f=new u.default});r(gC);var yC=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=f(uc),n=f(gb),i=f(zy),a=f($y),o=f(fI),s=f(gE),u=f(CA),c=f(ld),l=f(gp);function f(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var o,s;return new(o=(0,cI.oneFlight)({keyFactory:function(e){return"initValue-"+e}}),function(e,t,r,n,i){var a={};Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0);a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0);void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null)}((s=function(){function r(){(0,i.default)(this,r),d.set(this,new n.default)}return(0,a.default)(r,[{key:"clear",value:function(){return t.webex[e+"Storage"].del(t.getNamespace())}},{key:"del",value:function(){for(var r,n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];return(r=t.webex[e+"Storage"]).del.apply(r,[t.getNamespace()].concat(i))}},{key:"get",value:function(r){var n=d.get(this).get(r);return n||(n=new cI.Defer,d.get(this).set(r,n)),t.webex[e+"Storage"].get(t.getNamespace(),r).then(function(e){return n.resolve(),e})}},{key:"put",value:function(r,n){return t.webex[e+"Storage"].put(t.getNamespace(),r,p(n))}},{key:"waitFor",value:function(e){t.logger.debug("plugin-storage("+t.getNamespace()+"): waiting to init key `"+e+"`");var r=d.get(this).get(e);return r?(t.logger.debug("plugin-storage("+t.getNamespace()+"): already inited `"+e+"`"),r.promise):(t.logger.debug("plugin-storage("+t.getNamespace()+"): initing `"+e+"`"),this.initValue(e))}},{key:"initValue",value:function(r){var n=new cI.Defer;return d.get(this).set(r,n),t.webex[e+"Storage"].get(t.getNamespace(),r).then(function(e){t.logger.debug("plugin-storage("+t.getNamespace()+"): got `"+r+"` for first time"),"@"===r?t.parent.set(e):(0,u.default)(t[r],"isState")?t[r].set(e):t.set(r,e),t.logger.debug("plugin-storage("+t.getNamespace()+"): set `"+r+"` for first time"),n.resolve(),t.logger.debug("plugin-storage("+t.getNamespace()+"): inited `"+r+"`")}).catch(function(e){return e instanceof vC.NotFoundError||"production"!==xu.env.NODE_ENV&&e.toString().includes("MockNotFoundError")?(t.logger.debug("plugin-storage("+t.getNamespace()+"): no data for `"+r+"`, continuing"),n.resolve()):(t.logger.warn("plugin-storage("+t.getNamespace()+"): failed to init `"+r+"`",e),n.reject(e))}),n.promise}}]),r}()).prototype,"initValue",[o],(0,r.default)(s.prototype,"initValue"),s.prototype),s)};var d=new s.default;function p(e){if(!(0,c.default)(e))return e;var t=e.serialize?e.serialize():e;return(0,o.default)(t).forEach(function(e){var r=t[e];(0,l.default)(r)?0===r.length?t[e]=void 0:t[e]=r.map(p):(0,c.default)(r)&&(0,o.default)(r).forEach(function(e){r[e]=p(r[e])})}),(0,o.default)(t).reduce(function(e,r){return e&&!t[r]},!0)?void 0:t}});r(yC);var EC=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(fI),n=a(gb),i=a(_f);function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t=t||{},!e)return i.default.reject(new Error("`namespace` is required"));if(!t.logger)return i.default.reject(new Error("`options.logger` is required"));var a=t.logger,o=new n.default;return t.data&&(0,r.default)(t.data).forEach(function(e){o.set(e,t.data[e])}),a.debug("memory-store-adapter: returning binding"),i.default.resolve({clear:function(){return a.debug("memory-store-adapter: clearing the binding"),i.default.resolve(o.clear())},del:function(e){return a.debug("memory-store-adapter: deleting `"+e+"`"),i.default.resolve(o.delete(e))},get:function(e){a.debug("memory-store-adapter: reading `"+e+"`");var t=o.get(e);return void 0===t?i.default.reject(new vC.NotFoundError):i.default.resolve(t)},put:function(e,t){return a.debug("memory-store-adapter: writing `"+e+"`"),i.default.resolve(o.set(e,t))}})}t.default={bind:o,preload:function(e){return{bind:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[t]&&(r.data=e[t]),o(t,r)}}}}});r(EC);var bC=n(function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"persist",{enumerable:!0,get:function(){return mC.persist}}),Object.defineProperty(t,"waitForValue",{enumerable:!0,get:function(){return mC.waitForValue}}),Object.defineProperty(t,"makeWebexStore",{enumerable:!0,get:function(){return r(gC).default}}),Object.defineProperty(t,"makeWebexPluginStore",{enumerable:!0,get:function(){return r(yC).default}}),Object.defineProperty(t,"MemoryStoreAdapter",{enumerable:!0,get:function(){return r(EC).default}}),Object.defineProperty(t,"StorageError",{enumerable:!0,get:function(){return vC.StorageError}}),Object.defineProperty(t,"NotFoundError",{enumerable:!0,get:function(){return vC.NotFoundError}})});r(bC);var _C=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(_f),n=l(Rf),i=l(fI),a=l(fm),o=l(ld),s=l(ym),u=l(by),c=l(rC);function l(e){return e&&e.__esModule?e:{default:e}}var f=c.default.extend({derived:{boundedStorage:{deps:[],fn:function(){return(0,bC.makeWebexPluginStore)("bounded",this)}},unboundedStorage:{deps:[],fn:function(){return(0,bC.makeWebexPluginStore)("unbounded",this)}},config:{cache:!1,deps:["webex","webex.config"],fn:function(){if(this.webex&&this.webex.config){var e=this.getNamespace();return e?this.webex.config[e.toLowerCase()]:this.webex.config}return{}}},logger:{deps:["webex","webex.logger"],fn:function(){return this.webex.logger||console}},webex:{deps:["parent"],fn:function(){if(!this.parent&&!this.collection)throw new Error("Cannot determine `this.webex` without `this.parent` or `this.collection`. Please initialize `this` via `children` or `collection` or set `this.parent` manually");for(var e=this;e.parent||e.collection;)e=e.parent||e.collection;return e}}},session:{parent:{type:"any"},ready:{default:!0,type:"boolean"}},clear:function(e){var t=this;return(0,i.default)(this.attributes).forEach(function(r){"parent"!==r&&t.unset(r,e)}),(0,i.default)(this._children).forEach(function(e){t[e].clear()}),(0,i.default)(this._collections).forEach(function(e){t[e].reset()}),this},initialize:function(){for(var e=this,t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];(0,n.default)(c.default.prototype.initialize,this,r),this._dataTypes=(0,s.default)(this._dataTypes),(0,i.default)(this._dataTypes).forEach(function(t){e._dataTypes[t].set&&(e._dataTypes[t].set=e._dataTypes[t].set.bind(e))}),this.on("change",function(t,r){e.parent&&e.parent.trigger("change:"+e.getNamespace().toLowerCase(),e.parent,e,r)})},inspect:function(e){return u.default.inspect((0,a.default)(this.serialize({props:!0,session:!0,derived:!0}),"boundedStorage","unboundedStorage","config","logger","webex","parent"),{depth:e})},request:function(){var e;return(e=this.webex).request.apply(e,arguments)},upload:function(){var e;return(e=this.webex).upload.apply(e,arguments)},when:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];if(i&&i.length>0)throw new Error("#when() does not accept a callback, you must attach to its promise");return new r.default(function(r){t.once(e,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(t)})})},_filterSetParameters:function(e,t,r){var n=void 0;return(0,o.default)(e)||null===e?(n=e,r=t):(n={})[e]=t,[n,r=r||{}]}});t.default=f});r(_C),nc(nc.S+nc.F*!Vu,"Object",{defineProperties:Pc});var SC=Xu.Object,TC=function(e,t){return SC.defineProperties(e,t)},wC=n(function(e){e.exports={default:TC,__esModule:!0}});r(wC);var IC=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.OAuthError=void 0;var r=u(wC),n=u(hT),i=u(zy),a=u($y),o=u(vT),s=u(mT);function u(e){return e&&e.__esModule?e:{default:e}}var c=t.OAuthError=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"parse",value:function(e){var t=e.body||e;return(0,r.default)(this,{error:{enumerable:!0,value:t.error},errorDescription:{enumerable:!0,value:t.error_description},errorUri:{enumerable:!0,value:t.error_uri},res:{enumerable:!1,value:e}}),this.errorDescription}}]),t}(cI.Exception),l=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),t}(c),f=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),t}(c),d=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),t}(c),p=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),t}(c),h=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),t}(c),v=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),t}(c),m={OAuthError:c,InvalidRequestError:l,InvalidClientError:f,InvalidGrantError:d,UnauthorizedClientError:p,UnsupportGrantTypeError:h,InvalidScopeError:v,invalid_request:l,invalid_client:f,invalid_grant:d,unauthorized_client:p,unsupported_grant_type:h,invalid_scope:v,select:function(e){return m[e]||c}};t.default=m});r(IC);IC.OAuthError;var AC=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.sortScope=function(e){if(!e)return"";return e.split(" ").sort().join(" ")},t.filterScope=function(e,t){if(!t)return"";return t.split(" ").filter(function(t){return t!==e}).sort().join(" ")}});r(AC);AC.sortScope,AC.filterScope;var CC=Bc("iterator"),xC=Xu.isIterable=function(e){var t=Object(e);return void 0!==t[CC]||"@@iterator"in t||gc.hasOwnProperty(dl(t))},OC=n(function(e){e.exports={default:xC,__esModule:!0}});r(OC);var RC=Xu.getIterator=function(e){var t=El(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return Ju(t.call(e))},NC=n(function(e){e.exports={default:RC,__esModule:!0}});r(NC);var kC=n(function(e,t){t.__esModule=!0;var r=i(OC),n=i(NC);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var r=[],i=!0,a=!1,o=void 0;try{for(var s,u=(0,n.default)(e);!(i=(s=u.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()});r(kC);var PC=function(e,t,r,n){if(!ld(e))return e;for(var i=-1,a=(t=Pv(t,e)).length,o=a-1,s=e;null!=s&&++i<a;){var u=Lv(t[i]),c=r;if(i!=o){var l=s[u];void 0===(c=n?n(l,u,s):void 0)&&(c=ld(l)?l:Sp(t[i+1])?[]:{})}sp(s,u,c),s=s[u]}return e};var MC=function(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=Uv(e,o);r(s,o)&&PC(a,Pv(o,e),s)}return a};var DC=function(e,t){return null!=e&&t in Object(e)};var LC=function(e,t){return null!=e&&IA(e,t,DC)};var UC=function(e,t){return MC(e,t,function(t,r){return LC(e,r)})},jC=lm(function(e,t){return null==e?{}:UC(e,t)});nc(nc.S+nc.F*Bu(function(){Reflect.defineProperty(ec.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){Ju(e),t=Uu(t,!0),Ju(r);try{return ec.f(e,t,r),!0}catch(e){return!1}}});var FC=Xu.Reflect.defineProperty,BC=n(function(e){e.exports={default:FC,__esModule:!0}});r(BC),nc(nc.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return Yu.f(Ju(e),t)}});var VC=Xu.Reflect.getOwnPropertyDescriptor,GC=n(function(e){e.exports={default:VC,__esModule:!0}});r(GC),nc(nc.S,"Number",{isNaN:function(e){return e!=e}});var qC=Xu.Number.isNaN,KC=n(function(e){e.exports={default:qC,__esModule:!0}});r(KC);var HC="[object Number]";var zC=function(e){return"number"==typeof e||lp(e)&&cd(e)==HC},WC=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(KC),n=a(wC),i=a(zC);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){(0,n.default)(this,{loaded:{enumerable:!0,value:e,writable:!1},total:{enumerable:!0,value:t,writable:!1},lengthComputable:{enumerable:!0,value:(0,i.default)(e)&&!(0,r.default)(e)&&(0,i.default)(t)&&!(0,r.default)(t)&&t>0,writable:!1}})}});r(WC);var YC=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(_f),n=s(BC),i=s(fI),a=s(zy),o=s($y);function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){var r=this;(0,a.default)(this,e),t&&(0,i.default)(t).forEach(function(e){var i=t[e];(0,n.default)(r,e,{enumerable:!0,value:i})})}return(0,o.default)(e,[{key:"onRequest",value:function(e){return r.default.resolve(e)}},{key:"onRequestError",value:function(e,t){return r.default.reject(t)}},{key:"onResponse",value:function(e,t){return r.default.resolve(t)}},{key:"onResponseError",value:function(e,t){return r.default.reject(t)}}],[{key:"create",value:function(){throw new Error("`Interceptor.create()` must be defined")}}]),e}();t.default=u});r(YC);var XC=Mu.f,$C=function(e){return function(t){for(var r,n=Pu(t),i=kc(n),a=i.length,o=0,s=[];a>o;)r=i[o++],Vu&&!XC.call(n,r)||s.push(e?[r,n[r]]:n[r]);return s}},QC=$C(!1);nc(nc.S,"Object",{values:function(e){return QC(e)}});var JC=Xu.Object.values,ZC=n(function(e){e.exports={default:JC,__esModule:!0}});r(ZC);var ex=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s(Af),n=s(hT),i=s(zy),a=s(vT),o=s(mT);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(e),s=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(e),u=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),c=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),l=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),f=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),d=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),p=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),h=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),v=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),m=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),g=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),y=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),E=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),b=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),_=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),S=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),T=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),w=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),I=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(s),A=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(e),C=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(A),x=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(A),O=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(A),R=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(A),N=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),t}(A);(0,r.default)(e,{0:t,NetworkOrCORSError:t,400:s,BadRequest:s,401:u,Unauthorized:u,402:c,PaymentRequired:c,403:l,Forbidden:l,404:f,NotFound:f,405:d,MethodNotAllowed:d,406:p,NotAcceptable:p,407:h,ProxyAuthenticationRequired:h,408:v,RequestTimeout:v,409:m,Conflict:m,410:g,Gone:g,411:y,LengthRequired:y,412:E,PreconditionFailed:E,413:b,RequestEntityTooLarge:b,414:_,RequestUriTooLong:_,415:S,UnsupportedMediaType:S,416:T,RequestRangeNotSatisfiable:T,417:w,ExpectationFailed:w,429:I,TooManyRequests:I,500:A,InternalServerError:A,501:C,NotImplemented:C,502:x,BadGateway:x,503:O,ServiceUnavailable:O,504:R,GatewayTimeout:R,505:N,HttpVersionNotSupported:N,select:function(t){if(null==t)return e;t=t.statusCode||t;var r=e[t];return r||(t=t.toString().split("").shift()+"00",t=parseInt(t,10),e[t]||e)}})}});r(ex);var tx=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,i=v(Pf),a=v(ZC),o=v(wC),s=v(cb),u=v(hT),c=v(zy),l=v($y),f=v(vT),d=v(mT),p=v(jC),h=v(ex);function v(e){return e&&e.__esModule?e:{default:e}}var m=(n=r=function(e){function t(){return(0,c.default)(this,t),(0,f.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,l.default)(t,[{key:"parse",value:function(e){var t=e.body,r=void 0;switch(void 0===t?"undefined":(0,s.default)(t)){case"string":try{t=JSON.parse(t),r=this.parseObject(t)}catch(e){r=t}break;case"object":r=this.parseObject(t)}return r||(r=this.defaultMessage),(0,o.default)(this,{body:{enumerable:!1,value:t},httpVersion:{enumerable:!1,value:e.httpVersion},headers:{enumerable:!1,value:e.headers||{}},rawHeaders:{enumerable:!1,value:e.rawHeaders||[]},trailers:{enumerable:!1,value:e.trailers||{}},rawTrailers:{enumerable:!1,value:e.rawTrailers||[]},method:{enumerable:!1,value:e.method},url:{enumerable:!1,value:e.url},statusCode:{enumerable:!1,value:e.statusCode},statusMessage:{enumerable:!1,value:e.statusMessage},socket:{enumerable:!1,value:e.socket},_res:{enumerable:!1,value:e}}),r}},{key:"parseObject",value:function(e){var r=(0,a.default)((0,p.default)(e,t.errorKeys));if(0===r.length)return(0,i.default)(e,null,2);var n=r[0];return"object"===(void 0===n?"undefined":(0,s.default)(n))?this.parseObject(n):n}}]),t}(cI.Exception),r.errorKeys=["error","errorString","response","errorResponse","message","msg"],r.defaultMessage="An error was received while trying to fulfill the request",n);t.default=m,(0,h.default)(m),m.makeSubTypes=h.default});r(tx);var rx=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(_f),n=f(wC),i=f(hT),a=f(zy),o=f($y),s=f(vT),u=f(mT),c=f(tx),l=f(YC);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e,r){(0,a.default)(this,t);var o=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e)),u=r&&(r.error||r.ErrorConstructor)||c.default;return(0,n.default)(o,{ErrorConstructor:{value:u}}),o}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onResponse",value:function(e,t){if(t.statusCode){if(t.statusCode<400)return r.default.resolve(t);if(404===t.statusCode&&t.body&&2000002===t.body.errorCode)return r.default.resolve(t)}return r.default.reject(new(this.ErrorConstructor.select(t.statusCode))(t))}}],[{key:"create",value:function(e){return new t(this,e)}}]),t}(l.default);t.default=d});r(rx);var nx=function(e){return e&&e.length>1?255===e[0]&&216===e[1]&&255===e[2]?{ext:"jpg",mime:"image/jpeg"}:137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]?{ext:"png",mime:"image/png"}:71===e[0]&&73===e[1]&&70===e[2]?{ext:"gif",mime:"image/gif"}:87===e[8]&&69===e[9]&&66===e[10]&&80===e[11]?{ext:"webp",mime:"image/webp"}:70===e[0]&&76===e[1]&&73===e[2]&&70===e[3]?{ext:"flif",mime:"image/flif"}:(73===e[0]&&73===e[1]&&42===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&42===e[3])&&67===e[8]&&82===e[9]?{ext:"cr2",mime:"image/x-canon-cr2"}:73===e[0]&&73===e[1]&&42===e[2]&&0===e[3]||77===e[0]&&77===e[1]&&0===e[2]&&42===e[3]?{ext:"tif",mime:"image/tiff"}:66===e[0]&&77===e[1]?{ext:"bmp",mime:"image/bmp"}:73===e[0]&&73===e[1]&&188===e[2]?{ext:"jxr",mime:"image/vnd.ms-photo"}:56===e[0]&&66===e[1]&&80===e[2]&&83===e[3]?{ext:"psd",mime:"image/vnd.adobe.photoshop"}:80===e[0]&&75===e[1]&&3===e[2]&&4===e[3]&&109===e[30]&&105===e[31]&&109===e[32]&&101===e[33]&&116===e[34]&&121===e[35]&&112===e[36]&&101===e[37]&&97===e[38]&&112===e[39]&&112===e[40]&&108===e[41]&&105===e[42]&&99===e[43]&&97===e[44]&&116===e[45]&&105===e[46]&&111===e[47]&&110===e[48]&&47===e[49]&&101===e[50]&&112===e[51]&&117===e[52]&&98===e[53]&&43===e[54]&&122===e[55]&&105===e[56]&&112===e[57]?{ext:"epub",mime:"application/epub+zip"}:80===e[0]&&75===e[1]&&3===e[2]&&4===e[3]&&77===e[30]&&69===e[31]&&84===e[32]&&65===e[33]&&45===e[34]&&73===e[35]&&78===e[36]&&70===e[37]&&47===e[38]&&109===e[39]&&111===e[40]&&122===e[41]&&105===e[42]&&108===e[43]&&108===e[44]&&97===e[45]&&46===e[46]&&114===e[47]&&115===e[48]&&97===e[49]?{ext:"xpi",mime:"application/x-xpinstall"}:80!==e[0]||75!==e[1]||3!==e[2]&&5!==e[2]&&7!==e[2]||4!==e[3]&&6!==e[3]&&8!==e[3]?117===e[257]&&115===e[258]&&116===e[259]&&97===e[260]&&114===e[261]?{ext:"tar",mime:"application/x-tar"}:82!==e[0]||97!==e[1]||114!==e[2]||33!==e[3]||26!==e[4]||7!==e[5]||0!==e[6]&&1!==e[6]?31===e[0]&&139===e[1]&&8===e[2]?{ext:"gz",mime:"application/gzip"}:66===e[0]&&90===e[1]&&104===e[2]?{ext:"bz2",mime:"application/x-bzip2"}:55===e[0]&&122===e[1]&&188===e[2]&&175===e[3]&&39===e[4]&&28===e[5]?{ext:"7z",mime:"application/x-7z-compressed"}:120===e[0]&&1===e[1]?{ext:"dmg",mime:"application/x-apple-diskimage"}:0===e[0]&&0===e[1]&&0===e[2]&&(24===e[3]||32===e[3])&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]||51===e[0]&&103===e[1]&&112===e[2]&&53===e[3]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&109===e[8]&&112===e[9]&&52===e[10]&&50===e[11]&&109===e[16]&&112===e[17]&&52===e[18]&&49===e[19]&&109===e[20]&&112===e[21]&&52===e[22]&&50===e[23]&&105===e[24]&&115===e[25]&&111===e[26]&&109===e[27]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&105===e[8]&&115===e[9]&&111===e[10]&&109===e[11]||0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&109===e[8]&&112===e[9]&&52===e[10]&&50===e[11]&&0===e[12]&&0===e[13]&&0===e[14]&&0===e[15]?{ext:"mp4",mime:"video/mp4"}:0===e[0]&&0===e[1]&&0===e[2]&&28===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&77===e[8]&&52===e[9]&&86===e[10]?{ext:"m4v",mime:"video/x-m4v"}:77===e[0]&&84===e[1]&&104===e[2]&&100===e[3]?{ext:"mid",mime:"audio/midi"}:109===e[31]&&97===e[32]&&116===e[33]&&114===e[34]&&111===e[35]&&115===e[36]&&107===e[37]&&97===e[38]?{ext:"mkv",mime:"video/x-matroska"}:26===e[0]&&69===e[1]&&223===e[2]&&163===e[3]?{ext:"webm",mime:"video/webm"}:0===e[0]&&0===e[1]&&0===e[2]&&20===e[3]&&102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]?{ext:"mov",mime:"video/quicktime"}:82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&65===e[8]&&86===e[9]&&73===e[10]?{ext:"avi",mime:"video/x-msvideo"}:48===e[0]&&38===e[1]&&178===e[2]&&117===e[3]&&142===e[4]&&102===e[5]&&207===e[6]&&17===e[7]&&166===e[8]&&217===e[9]?{ext:"wmv",mime:"video/x-ms-wmv"}:0===e[0]&&0===e[1]&&1===e[2]&&"b"===e[3].toString(16)[0]?{ext:"mpg",mime:"video/mpeg"}:73===e[0]&&68===e[1]&&51===e[2]||255===e[0]&&251===e[1]?{ext:"mp3",mime:"audio/mpeg"}:102===e[4]&&116===e[5]&&121===e[6]&&112===e[7]&&77===e[8]&&52===e[9]&&65===e[10]||77===e[0]&&52===e[1]&&65===e[2]&&32===e[3]?{ext:"m4a",mime:"audio/m4a"}:79===e[28]&&112===e[29]&&117===e[30]&&115===e[31]&&72===e[32]&&101===e[33]&&97===e[34]&&100===e[35]?{ext:"opus",mime:"audio/opus"}:79===e[0]&&103===e[1]&&103===e[2]&&83===e[3]?{ext:"ogg",mime:"audio/ogg"}:102===e[0]&&76===e[1]&&97===e[2]&&67===e[3]?{ext:"flac",mime:"audio/x-flac"}:82===e[0]&&73===e[1]&&70===e[2]&&70===e[3]&&87===e[8]&&65===e[9]&&86===e[10]&&69===e[11]?{ext:"wav",mime:"audio/x-wav"}:35===e[0]&&33===e[1]&&65===e[2]&&77===e[3]&&82===e[4]&&10===e[5]?{ext:"amr",mime:"audio/amr"}:37===e[0]&&80===e[1]&&68===e[2]&&70===e[3]?{ext:"pdf",mime:"application/pdf"}:77===e[0]&&90===e[1]?{ext:"exe",mime:"application/x-msdownload"}:67!==e[0]&&70!==e[0]||87!==e[1]||83!==e[2]?123===e[0]&&92===e[1]&&114===e[2]&&116===e[3]&&102===e[4]?{ext:"rtf",mime:"application/rtf"}:119===e[0]&&79===e[1]&&70===e[2]&&70===e[3]&&(0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]||79===e[4]&&84===e[5]&&84===e[6]&&79===e[7])?{ext:"woff",mime:"application/font-woff"}:119===e[0]&&79===e[1]&&70===e[2]&&50===e[3]&&(0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]||79===e[4]&&84===e[5]&&84===e[6]&&79===e[7])?{ext:"woff2",mime:"application/font-woff"}:76===e[34]&&80===e[35]&&(0===e[8]&&0===e[9]&&1===e[10]||1===e[8]&&0===e[9]&&2===e[10]||2===e[8]&&0===e[9]&&2===e[10])?{ext:"eot",mime:"application/octet-stream"}:0===e[0]&&1===e[1]&&0===e[2]&&0===e[3]&&0===e[4]?{ext:"ttf",mime:"application/font-sfnt"}:79===e[0]&&84===e[1]&&84===e[2]&&79===e[3]&&0===e[4]?{ext:"otf",mime:"application/font-sfnt"}:0===e[0]&&0===e[1]&&1===e[2]&&0===e[3]?{ext:"ico",mime:"image/x-icon"}:70===e[0]&&76===e[1]&&86===e[2]&&1===e[3]?{ext:"flv",mime:"video/x-flv"}:37===e[0]&&33===e[1]?{ext:"ps",mime:"application/postscript"}:253===e[0]&&55===e[1]&&122===e[2]&&88===e[3]&&90===e[4]&&0===e[5]?{ext:"xz",mime:"application/x-xz"}:83===e[0]&&81===e[1]&&76===e[2]&&105===e[3]?{ext:"sqlite",mime:"application/x-sqlite3"}:78===e[0]&&69===e[1]&&83===e[2]&&26===e[3]?{ext:"nes",mime:"application/x-nintendo-nes-rom"}:67===e[0]&&114===e[1]&&50===e[2]&&52===e[3]?{ext:"crx",mime:"application/x-google-chrome-extension"}:77===e[0]&&83===e[1]&&67===e[2]&&70===e[3]||73===e[0]&&83===e[1]&&99===e[2]&&40===e[3]?{ext:"cab",mime:"application/vnd.ms-cab-compressed"}:33===e[0]&&60===e[1]&&97===e[2]&&114===e[3]&&99===e[4]&&104===e[5]&&62===e[6]&&10===e[7]&&100===e[8]&&101===e[9]&&98===e[10]&&105===e[11]&&97===e[12]&&110===e[13]&&45===e[14]&&98===e[15]&&105===e[16]&&110===e[17]&&97===e[18]&&114===e[19]&&121===e[20]?{ext:"deb",mime:"application/x-deb"}:33===e[0]&&60===e[1]&&97===e[2]&&114===e[3]&&99===e[4]&&104===e[5]&&62===e[6]?{ext:"ar",mime:"application/x-unix-archive"}:237===e[0]&&171===e[1]&&238===e[2]&&219===e[3]?{ext:"rpm",mime:"application/x-rpm"}:31===e[0]&&160===e[1]||31===e[0]&&157===e[1]?{ext:"Z",mime:"application/x-compress"}:76===e[0]&&90===e[1]&&73===e[2]&&80===e[3]?{ext:"lz",mime:"application/x-lzip"}:208===e[0]&&207===e[1]&&17===e[2]&&224===e[3]&&161===e[4]&&177===e[5]&&26===e[6]&&225===e[7]?{ext:"msi",mime:"application/x-msi"}:null:{ext:"swf",mime:"application/x-shockwave-flash"}:{ext:"rar",mime:"application/x-rar-compressed"}:{ext:"zip",mime:"application/zip"}:null},ix=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.detect=void 0;var r=i(_f);t.default=a,t.detectSync=o;var n=i(nx);function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return new r.default(function(t){t(o(e))})}function o(e){var t=e;if(cI.inBrowser){if(e instanceof Blob)return e.type;if(e instanceof ArrayBuffer)t=new Uint8Array(e);else if(!(e instanceof Uint8Array))throw new Error("`detect` requires a buffer of type Blob, ArrayBuffer, or Uint8Array")}var r=(0,n.default)(t);return r?r.mime:"application/octet-stream"}t.detect=a});r(ix);ix.detect,ix.detectSync;var ax=Object.prototype.hasOwnProperty,ox=Array.isArray,sx=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),ux=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},cx={arrayToObject:ux,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],o=Object.keys(a),s=0;s<o.length;++s){var u=o[s],c=a[u];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:a,prop:u}),r.push(c))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(ox(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r){if(0===e.length)return e;var n="string"==typeof e?e:String(e);if("iso-8859-1"===r)return escape(n).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var i="",a=0;a<n.length;++a){var o=n.charCodeAt(a);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?i+=n.charAt(a):o<128?i+=sx[o]:o<2048?i+=sx[192|o>>6]+sx[128|63&o]:o<55296||o>=57344?i+=sx[224|o>>12]+sx[128|o>>6&63]+sx[128|63&o]:(a+=1,o=65536+((1023&o)<<10|1023&n.charCodeAt(a)),i+=sx[240|o>>18]+sx[128|o>>12&63]+sx[128|o>>6&63]+sx[128|63&o])}return i},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(ox(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!ax.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var i=t;return ox(t)&&!ox(r)&&(i=ux(t,n)),ox(t)&&ox(r)?(r.forEach(function(r,i){if(ax.call(t,i)){var a=t[i];a&&"object"==typeof a&&r&&"object"==typeof r?t[i]=e(a,r,n):t.push(r)}else t[i]=r}),t):Object.keys(r).reduce(function(t,i){var a=r[i];return ax.call(t,i)?t[i]=e(t[i],a,n):t[i]=a,t},i)}},lx=String.prototype.replace,fx=/%20/g,dx={default:"RFC3986",formatters:{RFC1738:function(e){return lx.call(e,fx,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},px=Object.prototype.hasOwnProperty,hx={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},vx=Array.isArray,mx=Array.prototype.push,gx=function(e,t){mx.apply(e,vx(t)?t:[t])},yx=Date.prototype.toISOString,Ex={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:cx.encode,encodeValuesOnly:!1,formatter:dx.formatters[dx.default],indices:!1,serializeDate:function(e){return yx.call(e)},skipNulls:!1,strictNullHandling:!1},bx=function e(t,r,n,i,a,o,s,u,c,l,f,d,p){var h=t;if("function"==typeof s?h=s(r,h):h instanceof Date?h=l(h):"comma"===n&&vx(h)&&(h=h.join(",")),null===h){if(i)return o&&!d?o(r,Ex.encoder,p):r;h=""}if("string"==typeof h||"number"==typeof h||"boolean"==typeof h||cx.isBuffer(h))return o?[f(d?r:o(r,Ex.encoder,p))+"="+f(o(h,Ex.encoder,p))]:[f(r)+"="+f(String(h))];var v,m=[];if(void 0===h)return m;if(vx(s))v=s;else{var g=Object.keys(h);v=u?g.sort(u):g}for(var y=0;y<v.length;++y){var E=v[y];a&&null===h[E]||(vx(h)?gx(m,e(h[E],"function"==typeof n?n(r,E):r,n,i,a,o,s,u,c,l,f,d,p)):gx(m,e(h[E],r+(c?"."+E:"["+E+"]"),n,i,a,o,s,u,c,l,f,d,p)))}return m},_x=Object.prototype.hasOwnProperty,Sx={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:cx.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Tx=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},wx=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(n),o=a?n.slice(0,a.index):n,s=[];if(o){if(!r.plainObjects&&_x.call(Object.prototype,o)&&!r.allowPrototypes)return;s.push(o)}for(var u=0;null!==(a=i.exec(n))&&u<r.depth;){if(u+=1,!r.plainObjects&&_x.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;s.push(a[1])}return a&&s.push("["+n.slice(a.index)+"]"),function(e,t,r){for(var n=t,i=e.length-1;i>=0;--i){var a,o=e[i];if("[]"===o&&r.parseArrays)a=[].concat(n);else{a=r.plainObjects?Object.create(null):{};var s="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,u=parseInt(s,10);r.parseArrays||""!==s?!isNaN(u)&&o!==s&&String(u)===s&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(a=[])[u]=n:a[s]=n:a={0:n}}n=a}return n}(s,t,r)}},Ix={formats:dx,parse:function(e,t){var r=function(e){if(!e)return Sx;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?Sx.charset:e.charset;return{allowDots:void 0===e.allowDots?Sx.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:Sx.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:Sx.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:Sx.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:Sx.comma,decoder:"function"==typeof e.decoder?e.decoder:Sx.decoder,delimiter:"string"==typeof e.delimiter||cx.isRegExp(e.delimiter)?e.delimiter:Sx.delimiter,depth:"number"==typeof e.depth?e.depth:Sx.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:Sx.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:Sx.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:Sx.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:Sx.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?function(e,t){var r,n={},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,a=t.parameterLimit===1/0?void 0:t.parameterLimit,o=i.split(t.delimiter,a),s=-1,u=t.charset;if(t.charsetSentinel)for(r=0;r<o.length;++r)0===o[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===o[r]?u="utf-8":"utf8=%26%2310003%3B"===o[r]&&(u="iso-8859-1"),s=r,r=o.length);for(r=0;r<o.length;++r)if(r!==s){var c,l,f=o[r],d=f.indexOf("]="),p=-1===d?f.indexOf("="):d+1;-1===p?(c=t.decoder(f,Sx.decoder,u),l=t.strictNullHandling?null:""):(c=t.decoder(f.slice(0,p),Sx.decoder,u),l=t.decoder(f.slice(p+1),Sx.decoder,u)),l&&t.interpretNumericEntities&&"iso-8859-1"===u&&(l=Tx(l)),l&&t.comma&&l.indexOf(",")>-1&&(l=l.split(",")),_x.call(n,c)?n[c]=cx.combine(n[c],l):n[c]=l}return n}(e,r):e,i=r.plainObjects?Object.create(null):{},a=Object.keys(n),o=0;o<a.length;++o){var s=a[o],u=wx(s,n[s],r);i=cx.merge(i,u,r)}return cx.compact(i)},stringify:function(e,t){var r,n=e,i=function(e){if(!e)return Ex;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||Ex.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=dx.default;if(void 0!==e.format){if(!px.call(dx.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=dx.formatters[r],i=Ex.filter;return("function"==typeof e.filter||vx(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:Ex.addQueryPrefix,allowDots:void 0===e.allowDots?Ex.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:Ex.charsetSentinel,delimiter:void 0===e.delimiter?Ex.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:Ex.encode,encoder:"function"==typeof e.encoder?e.encoder:Ex.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:Ex.encodeValuesOnly,filter:i,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:Ex.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:Ex.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:Ex.strictNullHandling}}(t);"function"==typeof i.filter?n=(0,i.filter)("",n):vx(i.filter)&&(r=i.filter);var a,o=[];if("object"!=typeof n||null===n)return"";a=t&&t.arrayFormat in hx?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var s=hx[a];r||(r=Object.keys(n)),i.sort&&r.sort(i.sort);for(var u=0;u<r.length;++u){var c=r[u];i.skipNulls&&null===n[c]||gx(o,bx(n[c],c,s,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.formatter,i.encodeValuesOnly,i.charset))}var l=o.join(i.delimiter),f=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&("iso-8859-1"===i.charset?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),l.length>0?f+l:""}},Ax="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},Cx=function(e){var t=xx.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)},xx=Object.prototype.toString;var Ox,Rx=Array.prototype.slice,Nx=Object.prototype.toString,kx=Function.prototype.bind||function(e){var t=this;if("function"!=typeof t||"[object Function]"!==Nx.call(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var r,n=Rx.call(arguments,1),i=Math.max(0,t.length-n.length),a=[],o=0;o<i;o++)a.push("$"+o);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof r){var i=t.apply(this,n.concat(Rx.call(arguments)));return Object(i)===i?i:this}return t.apply(e,n.concat(Rx.call(arguments)))}),t.prototype){var s=function(){};s.prototype=t.prototype,r.prototype=new s,s.prototype=null}return r},Px=Object.prototype.toString,Mx=function(e){var t=Px.call(e),r="[object Arguments]"===t;return r||(r="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===Px.call(e.callee)),r};if(!Object.keys){var Dx=Object.prototype.hasOwnProperty,Lx=Object.prototype.toString,Ux=Mx,jx=Object.prototype.propertyIsEnumerable,Fx=!jx.call({toString:null},"toString"),Bx=jx.call(function(){},"prototype"),Vx=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Gx=function(e){var t=e.constructor;return t&&t.prototype===e},qx={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Kx=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!qx["$"+e]&&Dx.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{Gx(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();Ox=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===Lx.call(e),n=Ux(e),i=t&&"[object String]"===Lx.call(e),a=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var o=Bx&&r;if(i&&e.length>0&&!Dx.call(e,0))for(var s=0;s<e.length;++s)a.push(String(s));if(n&&e.length>0)for(var u=0;u<e.length;++u)a.push(String(u));else for(var c in e)o&&"prototype"===c||!Dx.call(e,c)||a.push(String(c));if(Fx)for(var l=function(e){if("undefined"==typeof window||!Kx)return Gx(e);try{return Gx(e)}catch(e){return!1}}(e),f=0;f<Vx.length;++f)l&&"constructor"===Vx[f]||!Dx.call(e,Vx[f])||a.push(Vx[f]);return a}}var Hx=Ox,zx=Array.prototype.slice,Wx=Object.keys,Yx=Wx?function(e){return Wx(e)}:Hx,Xx=Object.keys;Yx.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return Mx(e)?Xx(zx.call(e)):Xx(e)}):Object.keys=Yx;return Object.keys||Yx};var $x=Yx,Qx="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Jx=Object.prototype.toString,Zx=Array.prototype.concat,eO=Object.defineProperty,tO=eO&&function(){var e={};try{for(var t in eO(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),rO=function(e,t,r,n){var i;t in e&&("function"!=typeof(i=n)||"[object Function]"!==Jx.call(i)||!n())||(tO?eO(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},nO=function(e,t){var r=arguments.length>2?arguments[2]:{},n=$x(t);Qx&&(n=Zx.call(n,Object.getOwnPropertySymbols(t)));for(var i=0;i<n.length;i+=1)rO(e,n[i],t[n[i]],r[n[i]])};nO.supportsDescriptors=!!tO;var iO=nO,aO=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},oO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,sO=Object.getPrototypeOf||function(e){return e.__proto__},uO="undefined"==typeof Uint8Array?void 0:sO(Uint8Array),cO={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":oO?sO([][Symbol.iterator]()):void 0,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":void 0,"$ %AsyncFunction%":void 0,"$ %AsyncFunctionPrototype%":void 0,"$ %AsyncGenerator%":void 0,"$ %AsyncGeneratorFunction%":void 0,"$ %AsyncGeneratorPrototype%":void 0,"$ %AsyncIteratorPrototype%":void 0,"$ %Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?void 0:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":void 0,"$ %GeneratorFunction%":void 0,"$ %GeneratorPrototype%":void 0,"$ %Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":oO?sO(sO([][Symbol.iterator]())):void 0,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?void 0:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&oO?sO((new Map)[Symbol.iterator]()):void 0,"$ %MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?void 0:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?void 0:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&oO?sO((new Set)[Symbol.iterator]()):void 0,"$ %SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":oO?sO(""[Symbol.iterator]()):void 0,"$ %StringPrototype%":String.prototype,"$ %Symbol%":oO?Symbol:void 0,"$ %SymbolPrototype%":oO?Symbol.prototype:void 0,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":aO,"$ %TypedArray%":uO,"$ %TypedArrayPrototype%":uO?uO.prototype:void 0,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},lO=function(e,t){if(arguments.length>1&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean');var r="$ "+e;if(!(r in cO))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===cO[r]&&!t)throw new TypeError("intrinsic "+e+" exists, but is not available. Please file an issue!");return cO[r]},fO=kx.call(Function.call,Object.prototype.hasOwnProperty),dO=lO("%TypeError%"),pO=lO("%SyntaxError%"),hO={"Property Descriptor":function(e,t){if("Object"!==e.Type(t))return!1;var r={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in t)if(fO(t,n)&&!r[n])return!1;var i=fO(t,"[[Value]]"),a=fO(t,"[[Get]]")||fO(t,"[[Set]]");if(i&&a)throw new dO("Property Descriptors may not be both accessor and data descriptors");return!0}},vO=function(e,t,r,n){var i=hO[t];if("function"!=typeof i)throw new pO("unknown record type: "+t);if(!i(e,n))throw new dO(r+" must be a "+t);console.log(i(e,n),n)},mO=Number.isNaN||function(e){return e!=e},gO=Number.isNaN||function(e){return e!=e},yO=Number.isFinite||function(e){return"number"==typeof e&&!gO(e)&&e!==1/0&&e!==-1/0},EO=function(e){return e>=0?1:-1},bO=Function.prototype.toString,_O=/^\s*class\b/,SO=function(e){try{var t=bO.call(e);return _O.test(t)}catch(e){return!1}},TO=Object.prototype.toString,wO="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,IO=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(wO)return function(e){try{return!SO(e)&&(bO.call(e),!0)}catch(e){return!1}}(e);if(SO(e))return!1;var t=TO.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t},AO=function(e){return null===e||"function"!=typeof e&&"object"!=typeof e},CO=Object.prototype.toString,xO=function(e){var t;if((t=arguments.length>1?arguments[1]:"[object Date]"===CO.call(e)?String:Number)===String||t===Number){var r,n,i=t===String?["toString","valueOf"]:["valueOf","toString"];for(n=0;n<i.length;++n)if(IO(e[i[n]])&&(r=e[i[n]](),AO(r)))return r;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")},OO=lO("%Object%"),RO=lO("%TypeError%"),NO=lO("%String%"),kO={ToPrimitive:function(e){return AO(e)?e:arguments.length>1?xO(e,arguments[1]):xO(e)},ToBoolean:function(e){return!!e},ToNumber:function(e){return+e},ToInteger:function(e){var t=this.ToNumber(e);return mO(t)?0:0!==t&&yO(t)?EO(t)*Math.floor(Math.abs(t)):t},ToInt32:function(e){return this.ToNumber(e)>>0},ToUint32:function(e){return this.ToNumber(e)>>>0},ToUint16:function(e){var t=this.ToNumber(e);return mO(t)||0===t||!yO(t)?0:function(e,t){var r=e%t;return Math.floor(r>=0?r:r+t)}(EO(t)*Math.floor(Math.abs(t)),65536)},ToString:function(e){return NO(e)},ToObject:function(e){return this.CheckObjectCoercible(e),OO(e)},CheckObjectCoercible:function(e,t){if(null==e)throw new RO(t||"Cannot call method on "+e);return e},IsCallable:IO,SameValue:function(e,t){return e===t?0!==e||1/e==1/t:mO(e)&&mO(t)},Type:function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0},IsPropertyDescriptor:function(e){if("Object"!==this.Type(e))return!1;var t={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var r in e)if(fO(e,r)&&!t[r])return!1;var n=fO(e,"[[Value]]"),i=fO(e,"[[Get]]")||fO(e,"[[Set]]");if(n&&i)throw new RO("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(e){return void 0!==e&&(vO(this,"Property Descriptor","Desc",e),!(!fO(e,"[[Get]]")&&!fO(e,"[[Set]]")))},IsDataDescriptor:function(e){return void 0!==e&&(vO(this,"Property Descriptor","Desc",e),!(!fO(e,"[[Value]]")&&!fO(e,"[[Writable]]")))},IsGenericDescriptor:function(e){return void 0!==e&&(vO(this,"Property Descriptor","Desc",e),!this.IsAccessorDescriptor(e)&&!this.IsDataDescriptor(e))},FromPropertyDescriptor:function(e){if(void 0===e)return e;if(vO(this,"Property Descriptor","Desc",e),this.IsDataDescriptor(e))return{value:e["[[Value]]"],writable:!!e["[[Writable]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};if(this.IsAccessorDescriptor(e))return{get:e["[[Get]]"],set:e["[[Set]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};throw new RO("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(e){if("Object"!==this.Type(e))throw new RO("ToPropertyDescriptor requires an object");var t={};if(fO(e,"enumerable")&&(t["[[Enumerable]]"]=this.ToBoolean(e.enumerable)),fO(e,"configurable")&&(t["[[Configurable]]"]=this.ToBoolean(e.configurable)),fO(e,"value")&&(t["[[Value]]"]=e.value),fO(e,"writable")&&(t["[[Writable]]"]=this.ToBoolean(e.writable)),fO(e,"get")){var r=e.get;if(void 0!==r&&!this.IsCallable(r))throw new TypeError("getter must be a function");t["[[Get]]"]=r}if(fO(e,"set")){var n=e.set;if(void 0!==n&&!this.IsCallable(n))throw new RO("setter must be a function");t["[[Set]]"]=n}if((fO(t,"[[Get]]")||fO(t,"[[Set]]"))&&(fO(t,"[[Value]]")||fO(t,"[[Writable]]")))throw new RO("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t}},PO=kx.call(Function.call,String.prototype.replace),MO=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,DO=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,LO=function(){var e=kO.ToString(kO.CheckObjectCoercible(this));return PO(PO(e,MO,""),DO,"")},UO=function(){return String.prototype.trim&&"​"==="​".trim()?String.prototype.trim:LO},jO=kx.call(Function.call,UO());iO(jO,{getPolyfill:UO,implementation:LO,shim:function(){var e=UO();return iO(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}});var FO=jO,BO=Object.prototype.toString,VO=Object.prototype.hasOwnProperty,GO=function(e,t,r){if(!IO(t))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=r),"[object Array]"===BO.call(e)?function(e,t,r){for(var n=0,i=e.length;n<i;n++)VO.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,n):"string"==typeof e?function(e,t,r){for(var n=0,i=e.length;n<i;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)}(e,t,n):function(e,t,r){for(var n in e)VO.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,n)},qO=function(e){if(!e)return{};var t={};return GO(FO(e).split("\n"),function(e){var r,n=e.indexOf(":"),i=FO(e.slice(0,n)).toLowerCase(),a=FO(e.slice(n+1));void 0===t[i]?t[i]=a:(r=t[i],"[object Array]"===Object.prototype.toString.call(r)?t[i].push(a):t[i]=[t[i],a])}),t},KO=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)HO.call(r,n)&&(e[n]=r[n])}return e},HO=Object.prototype.hasOwnProperty;var zO=n(function(e){var t,r=(t=Pf)&&t.__esModule?t:{default:t};function n(e,t,r){var n=e;return Cx(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=KO(t,{uri:e}),n.callback=r,n}function i(e,t,r){return a(t=n(e,t,r))}function a(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(r,n,i){t||(t=!0,e.callback(r,n,i))};function a(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML;return null}(l),g)try{e=JSON.parse(e)}catch(e){}return e}function o(e){return clearTimeout(f),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,y)}function s(){if(!c){var t;clearTimeout(f),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=y,i=null;return 0!==t?(r={body:a(),statusCode:t,method:p,headers:{},url:d,rawRequest:l},l.getAllResponseHeaders&&(r.headers=qO(l.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),n(i,r,r.body)}}var u,c,l=e.xhr||null;l||(l=e.cors||e.useXDR?new i.XDomainRequest:new i.XMLHttpRequest);var f,d=e.uri||e.url,p=e.method||"GET",h=e.body||e.data,v=e.headers||{},m=!!e.sync,g=!1,y={body:void 0,headers:{},statusCode:0,method:p,url:d,rawRequest:l};if("json"in e&&!1!==e.json&&(g=!0,v.accept||v.Accept||(v.Accept="application/json"),"GET"!==p&&"HEAD"!==p&&(v["content-type"]||v["Content-Type"]||(v["Content-Type"]="application/json"),h=(0,r.default)(!0===e.json?h:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(s,0)},l.onload=s,l.onerror=o,l.onprogress=function(){},l.onabort=function(){c=!0},l.ontimeout=o,l.open(p,d,!m,e.username,e.password),m||(l.withCredentials=!!e.withCredentials),!m&&e.timeout>0&&(f=setTimeout(function(){if(!c){c=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",o(e)}},e.timeout)),l.setRequestHeader)for(u in v)v.hasOwnProperty(u)&&l.setRequestHeader(u,v[u]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(h||null),l}e.exports=i,i.XMLHttpRequest=Ax.XMLHttpRequest||function(){},i.XDomainRequest="withCredentials"in new i.XMLHttpRequest?i.XMLHttpRequest:Ax.XDomainRequest,function(e,t){for(var r=0;r<e.length;r+=1)t(e[r])}(["get","put","post","patch","head","delete"],function(e){i["delete"===e?"del":e]=function(t,r,i){return(r=n(t,r,i)).method=e.toUpperCase(),a(r)}})});r(zO);var WO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=d(cb),n=d(fc),i=d(NC),a=d(fI),o=d(_f),s=d(jC),u=d(gp),c=d(_S);t.default=function(e){return new o.default(function(t){var o=(0,s.default)(e,"method","uri","withCredentials","headers","timeout","responseType");o.response=!0,function(e,t){e.method&&["PATCH","POST","PUT"].includes(e.method.toUpperCase())&&(e.xhr=new XMLHttpRequest,e.xhr.upload.onprogress=t.upload.emit.bind(t.upload,"progress"))}(o,e),function(e,t){if(t.auth)if(t.auth.bearer)e.headers.authorization="Bearer "+t.auth.bearer;else{var r=t.auth.user||t.auth.username,n=t.auth.pass||t.auth.password,i=btoa(r+":"+n);e.headers.authorization="Basic "+i}}(o,e),function(e,t){t.jar&&(e.withCredentials=!0)}(o,e),function(e,t){var r={cors:!0,withCredentials:!1,timeout:0};(0,c.default)(e,(0,s.default)(t,(0,a.default)(r)),r)}(o,e),function(e,t){"buffer"===t.responseType&&(e.responseType="arraybuffer")}(o,e),function(e,t){(t.body instanceof Blob||t.body instanceof ArrayBuffer)&&(t.json=e.json=!1,e.headers["content-type"]=e.headers["content-type"]||(0,ix.detectSync)(t.body))}(o,e),function(e,t){"json"in t&&!0!==t.json||!t.body?t.form?(e.headers["Content-Type"]="application/x-www-form-urlencoded",e.body=l.default.stringify(t.form),(0,n.default)(e,"json")):t.formData?e.body=(0,a.default)(t.formData).reduce(function(e,r){var n=t.formData[r];return function e(t,r,n){if((0,u.default)(n)){var a=!0,o=!1,s=void 0;try{for(var c,l=(0,i.default)(n);!(a=(c=l.next()).done);a=!0){var f=c.value;e(t,r,f)}}catch(e){o=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw s}}return}n=function(e){if(e instanceof ArrayBuffer){var t=e.type?new Blob([e],{type:e.type}):new Blob([e]);return t.filename=e.filename||e.name||"untitled",t}return e}(n);n.name?(n.filename=n.name,t.append(r,n,n.name)):t.append(r,n)}(e,r,n),e},new FormData):(e.body=t.body,(0,n.default)(e,"json")):e.json=t.body}(o,e),function(e,t){t.qs&&(e.uri+="?"+l.default.stringify(t.qs))}(o,e);var d=(0,f.default)(o,function(n,i){n&&e.logger.warn(n),i?(i.options=e,function(e,t){if(!t.json&&"object"!==(0,r.default)(e.body))try{e.body=JSON.parse(e.body)}catch(e){}}(i,o),t(i)):t({statusCode:0,options:e,headers:e.headers,method:e.method,url:e.uri,body:n})});d.onprogress=e.download.emit.bind(e.download,"progress")}).catch(function(t){return{statusCode:0,options:e,headers:e.headers,method:e.method,url:e.uri,body:t}})};var l=d(Ix),f=d(zO);function d(e){return e&&e.__esModule?e:{default:e}}});r(WO);var YO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(_f);t.default=function(e){e.url&&(e.uri=e.url,e.url=null);return e.headers=e.headers||{},e.download=new TS.EventEmitter,e.upload=new TS.EventEmitter,t(e.interceptors,"Request").then(function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return n.default.apply(void 0,[e].concat(r))}).then(function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.apply(void 0,[e.interceptors.slice().reverse(),"Response"].concat(n))});function t(t,n,i){var a="on"+n,o="on"+n+"Error";return t.reduce(function(t,n){return t.then(function(t){return n[a]?n[a](e,t):r.default.resolve(t)},function(t){return n[o]?n[o](e,t):r.default.reject(t)})},r.default.resolve(i))}};var n=i(WO);function i(e){return e&&e.__esModule?e:{default:e}}});r(YO);var XO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.detectSync=t.detect=t.HttpStatusInterceptor=t.HttpError=t.Interceptor=t.ProgressEvent=t.request=t.defaults=void 0;var r=f(fc),n=f(BC),i=f(GC),a=f(OI),o=f(_S),s=f(hC),u=f(EI);Object.defineProperty(t,"ProgressEvent",{enumerable:!0,get:function(){return f(WC).default}}),Object.defineProperty(t,"Interceptor",{enumerable:!0,get:function(){return f(YC).default}}),Object.defineProperty(t,"HttpError",{enumerable:!0,get:function(){return f(tx).default}}),Object.defineProperty(t,"HttpStatusInterceptor",{enumerable:!0,get:function(){return f(rx).default}}),Object.defineProperty(t,"detect",{enumerable:!0,get:function(){return ix.detect}}),Object.defineProperty(t,"detectSync",{enumerable:!0,get:function(){return ix.detectSync}});var c=f(rx),l=f(YO);function f(e){return e&&e.__esModule?e:{default:e}}var d=(0,s.default)(function(e,t){if((0,a.default)(t)){var s=t;(t=arguments[2]||{}).uri=s}return["download","interceptors","logger","upload"].forEach(function(e){var r=(0,i.default)(t,e);r=(0,u.default)({},r,{enumerable:!1,writable:!0}),(0,n.default)(t,e,r)}),(0,o.default)(t,e),t.json||(0,r.default)(t,"json"),t.logger=t.logger||console,(0,l.default)(t)}),p={json:!0,interceptors:[c.default.create()]};t.defaults=d,t.request=d(p)});r(XO);XO.detectSync,XO.detect,XO.HttpStatusInterceptor,XO.HttpError,XO.Interceptor,XO.ProgressEvent,XO.request,XO.defaults;var $O=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(BC),n=c(Rf),i=c(hT),a=c(zy),o=c($y),s=c(vT),u=c(mT);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"parse",value:function(e){var t=(0,n.default)(XO.HttpError.prototype.parse,this,[e]);return(0,r.default)(this,"options",{enumerable:!1,value:e.options}),this.options.url?t+="\n"+this.options.method+" "+this.options.url:this.options.uri?t+="\n"+this.options.method+" "+this.options.uri:t+="\n"+this.options.method+" "+this.options.service.toUpperCase()+"/"+this.options.resource,t+="\nWEBEX_TRACKING_ID: "+this.options.headers.trackingid,this.options.headers&&this.options.headers["x-trans-id"]&&(t+="\nX-Trans-Id: "+this.options.headers["x-trans-id"]),this.headers["retry-after"]&&((0,r.default)(this,"retryAfter",{enumerable:!0,value:this.headers["retry-after"],writeable:!1}),t+="\nRETRY-AFTER: "+this.retryAfter),t+="\n"}}]),t}(XO.HttpError);t.default=l,XO.HttpError.makeSubTypes(l);var f=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),t}(XO.HttpError.BadRequest);XO.HttpError[429]=f,XO.HttpError.TooManyRequests=f});r($O);var QO=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=d(uc),i=d(kC),a=d(Rf),o=d(Af),s=d(_f),u=d(jC),c=d($O),l=d(_C),f=d(IC);function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}function h(e){if(400!==e.statusCode)return s.default.reject(e);var t=f.default.select(e.body.error);return t===IC.OAuthError&&e instanceof c.default?s.default.reject(e):t?s.default.reject(new t(e._res||e)):s.default.reject(e)}var v=l.default.extend((p(r={derived:{canAuthorize:{deps:["access_token","isExpired"],fn:function(){return!!this.access_token&&!this.isExpired}},canDownscope:{deps:["canAuthorize"],fn:function(){return this.canAuthorize&&!!this.config.client_id}},canRefresh:{deps:["refresh_token"],fn:function(){return cI.inBrowser?!!this.refresh_token&&!!this.config.refreshCallback:!!this.refresh_token&&!!this.config.client_secret}},isExpired:{deps:["expires","_isExpired"],fn:function(){return!!this.expires&&this._isExpired}},_string:{deps:["access_token","token_type"],fn:function(){return this.access_token&&this.token_type?this.token_type+" "+this.access_token:""}}},namespace:"Credentials",props:{scope:"string",access_token:"string",expires:"number",expires_in:"number",refresh_token:"string",refresh_token_expires:"number",refresh_token_expires_in:"number",token_type:{default:"Bearer",type:"string"}},session:{_isExpired:{default:!1,type:"boolean"},previousToken:{type:"state"}},downscope:function(e){var t=this;return this.logger.info("token: downscoping token to "+e),this.isExpired?(this.logger.info("token: request received to downscope expired access_token"),s.default.reject(new Error("cannot downscope expired access token"))):this.canDownscope?(e&&(e=(0,AC.sortScope)(e)),e===(0,AC.sortScope)(this.config.scope)?s.default.reject(new Error("token: scope reduction requires a reduced scope")):this.webex.request({method:"POST",uri:this.config.tokenUrl,addAuthHeader:!1,form:{grant_type:"urn:cisco:oauth:grant-type:scope-reduction",token:this.access_token,scope:e,client_id:this.config.client_id}}).then(function(r){return t.logger.info("token: downscoped token to "+e),new v((0,o.default)(r.body,{scope:e}),{parent:t.parent})})):(this.config.client_id?this.logger.info("token: request received to downscope invalid access_token"):this.logger.trace("token: cannot downscope without client_id"),s.default.reject(new Error("cannot downscope access token")))},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,a.default)(l.default.prototype.initialize,this,[t,r]),"string"==typeof t&&(this.access_token=t),!this.access_token)throw new Error("`access_token` is required");this.expires&&(this.expires<Date.now()?this._isExpired=!0:(0,hI.safeSetTimeout)(function(){e._isExpired=!0},this.expires-Date.now()))},refresh:function(){var e=this;if(!this.canRefresh)throw new Error("Not enough information available to refresh this access token");var t=void 0;if(cI.inBrowser){if(!this.config.refreshCallback)throw new Error("Cannot refresh access token without refreshCallback");t=s.default.resolve(this.config.refreshCallback(this.webex,this))}return(t||this.webex.request({method:"POST",uri:this.config.tokenUrl,form:{grant_type:"refresh_token",redirect_uri:this.config.redirect_uri,refresh_token:this.refresh_token},auth:{user:this.config.client_id,pass:this.config.client_secret,sendImmediately:!0},shouldRefreshAccessToken:!1}).then(function(e){return e.body})).then(function(t){if(!t)throw new Error("token: refreshCallback() did not produce an object");return t.refresh_token||(0,o.default)(t,(0,u.default)(e,"refresh_token","refresh_token_expires","refresh_token_expires_in")),e.access_token===t.access_token?(e.logger.error("token: new token matches current token"),"production"!==xu.env.NODE_ENV&&(e.logger.error("token: current token:",e.access_token),e.logger.error("token: new token:",t.access_token)),s.default.reject(new Error("new token matches current token"))):(e.previousToken&&(e.previousToken.revoke(),e.unset("previousToken")),t.previousToken=e,t.scope=e.scope,new v(t,{parent:e.parent}))}).catch(h)},revoke:function(){var e=this;return this.isExpired?(this.logger.info("token: already expired, not making making revocation request"),s.default.resolve()):this.canAuthorize?this.config.client_secret?(this.logger.info("token: revoking access token"),this.webex.request({method:"POST",uri:this.config.revokeUrl,form:{token:this.access_token,token_type_hint:"access_token"},auth:{user:this.config.client_id,pass:this.config.client_secret,sendImmediately:!0},shouldRefreshAccessToken:!1}).then(function(){e.unset(["access_token","expires","expires_in","token_type"]),e.logger.info("token: access token revoked")}).catch(h)):(this.logger.info("token: no client secret available, not making revocation request"),s.default.resolve()):(this.logger.info("token: no longer valid, not making revocation request"),s.default.resolve())},set:function(){var e=this._filterSetParameters.apply(this,arguments),t=(0,i.default)(e,2),r=t[0],n=t[1];if(!r.token_type&&r.access_token&&r.access_token.includes(" ")){var s=r.access_token.split(" "),u=(0,i.default)(s,2),c=u[0],f=u[1];r=(0,o.default)({},r,{access_token:f,token_type:c})}var d=Date.now();return!r.expires&&r.expires_in&&(r.expires=d+1e3*r.expires_in),!r.refresh_token_expires&&r.refresh_token_expires_in&&(r.refresh_token_expires=d+1e3*r.refresh_token_expires_in),r.scope&&(r.scope=(0,AC.sortScope)(r.scope)),(0,a.default)(l.default.prototype.set,this,[r,n])},toString:function(){if(!this._string)throw new Error("cannot stringify Token");return this._string},validate:function(){var e=this;if("production"===xu.env.NODE_ENV)throw new Error("Token#validate() must not be used in production");return this.webex.request({method:"POST",service:"conversation",resource:"users/validateAuthToken",body:{token:this.access_token}}).catch(function(t){if("statusCode"in t)return s.default.reject(t);e.logger.info("REMINDER: If you're investigating a network error here, it's normal");var r=xu.env.CONVERSATION_SERVICE||xu.env.CONVERSATION_SERVICE_URL||"https://conv-a.wbx2.com/conversation/api/v1";return e.webex.request({method:"POST",uri:r+"/users/validateAuthToken",body:{token:e.access_token},headers:{authorization:"Bearer "+e.access_token}})}).then(function(e){return e.body})},version:"1.77.8"},"downscope",[(0,cI.oneFlight)({keyFactory:function(e){return e}})],(0,n.default)(r,"downscope"),r),p(r,"refresh",[cI.oneFlight],(0,n.default)(r,"refresh"),r),p(r,"revoke",[cI.oneFlight],(0,n.default)(r,"revoke"),r),r));t.default=v});r(QO);var JO=function(e){var t,r=this,n=[].slice.call(arguments);t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return r.apply(this,arguments)},EI(t,r);var i=function(){this.constructor=t};return i.prototype=r.prototype,t.prototype=new i,e&&(n.unshift(t.prototype),EI.apply(null,n)),t.__super__=r.prototype,t},ZO=Eb(function(e,t,r){var n=1;if(r.length){var i=g_(r,p_(ZO));n|=32}return rS(e,n,t,r,i)});ZO.placeholder={};var eR=ZO,tR=[].slice;function rR(e,t){if(t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),t.parent&&(this.parent=t.parent),!this.mainIndex){var r=this.model&&this.model.prototype&&this.model.prototype.idAttribute;this.mainIndex=r||"id"}this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,EI({silent:!0},t))}EI(rR.prototype,HA,{initialize:function(){},isModel:function(e){return this.model&&e instanceof this.model},add:function(e,t){return this.set(e,EI({merge:!1,add:!0,remove:!1},t))},parse:function(e,t){return e},serialize:function(){return this.map(function(e){if(e.serialize)return e.serialize();var t={};return EI(t,e),delete t.collection,t})},toJSON:function(){return this.serialize()},set:function(e,t){(t=EI({add:!0,remove:!0,merge:!0},t)).parse&&(e=this.parse(e,t));var r,n,i,a,o,s,u,c=!gp(e);e=c?e?[e]:[]:e.slice();var l=t.at,f=this.comparator&&null==l&&!1!==t.sort,d="string"==typeof this.comparator?this.comparator:null,p=[],h=[],v={},m=t.add,g=t.merge,y=t.remove,E=!(f||!m||!y)&&[],b=this.model&&this.model.prototype||Object.prototype;for(s=0,u=e.length;s<u;s++){if(i=e[s]||{},this.isModel(i)?r=n=i:b.generateId?r=b.generateId(i):void 0===(r=i[this.mainIndex])&&this._isDerivedIndex(b)&&(r=b._derived[this.mainIndex].fn.call(i)),a=this.get(r))y&&(v[a.cid||a[this.mainIndex]]=!0),g&&(i=i===n?n.attributes:i,t.parse&&(i=a.parse(i,t)),a.set?(a.set(i,t),f&&!o&&a.hasChanged(d)&&(o=!0)):EI(a,i)),e[s]=a;else if(m){if(!(n=e[s]=this._prepareModel(i,t)))continue;p.push(n),this._addReference(n,t)}(n=a||n)&&(E&&(n.isNew&&n.isNew()||!n[this.mainIndex]||!v[n.cid||n[this.mainIndex]])&&E.push(n),v[n[this.mainIndex]]=!0)}if(y){for(s=0,u=this.length;s<u;s++)v[(n=this.models[s]).cid||n[this.mainIndex]]||h.push(n);for(h.length&&this.remove(h,t),s=0,u=p.length;s<u;s++)this._index(p[s])}if(p.length||E&&E.length)if(f&&(o=!0),null!=l)for(s=0,u=p.length;s<u;s++)this.models.splice(l+s,0,p[s]);else{var _=E||p;for(s=0,u=_.length;s<u;s++)this.models.push(_[s])}if(o&&this.sort({silent:!0}),!t.silent){for(s=0,u=p.length;s<u;s++)(n=p[s]).trigger?n.trigger("add",n,this,t):this.trigger("add",n,this,t);(o||E&&E.length)&&this.trigger("sort",this,t)}return c?e[0]:e},get:function(e,t){if(null!=e){var r=this.mainIndex,n=this._indexes[t||r];return n&&(n[e]||void 0!==e[r]&&n[e[r]])||this._indexes.cid[e]||this._indexes.cid[e.cid]}},at:function(e){return this.models[e]},remove:function(e,t){var r,n,i,a,o=!gp(e);for(t||(t={}),r=0,n=(e=o?[e]:tR.call(e)).length;r<n;r++)(i=e[r]=this.get(e[r]))&&(this._deIndex(i),a=this.models.indexOf(i),this.models.splice(a,1),t.silent||(t.index=a,i.trigger?i.trigger("remove",i,this,t):this.trigger("remove",i,this,t)),this._removeReference(i,t));return o?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,n=this.models.length;r<n;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,EI({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},sort:function(e){var t=this;if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),"string"==typeof this.comparator?this.models.sort(function(e,r){return e.get?(e=e.get(t.comparator),r=r.get(t.comparator)):(e=e[t.comparator],r=r[t.comparator]),e>r||void 0===e?1:e<r||void 0===r?-1:0}):1===this.comparator.length?this.models.sort(function(e,r){return(e=t.comparator(e))>(r=t.comparator(r))||void 0===e?1:e<r||void 0===r?-1:0}):this.models.sort(eR(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},_reset:function(){var e=tR.call(this.indexes||[]),t=0;e.push(this.mainIndex),e.push("cid");var r=e.length;for(this.models=[],this._indexes={};t<r;t++)this._indexes[e[t]]={}},_prepareModel:function(e,t){if(!this.model)return e;if(this.isModel(e))return e.collection||(e.collection=this),e;(t=t?EI({},t):{}).collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_deIndex:function(e,t,r){var n;if(void 0===t)for(var i in this._indexes)n=e.hasOwnProperty(i)?e[i]:e.get&&e.get(i),delete this._indexes[i][n];else{if(void 0===this._indexes[t])throw new Error("Given attribute is not an index");delete this._indexes[t][r]}},_index:function(e,t){var r;if(void 0===t)for(var n in this._indexes)null!=(r=e.hasOwnProperty(n)?e[n]:e.get&&e.get(n))&&(this._indexes[n][r]=e);else{if(void 0===this._indexes[t])throw new Error("Given attribute is not an index");(r=e[t]||e.get&&e.get(t))&&(this._indexes[t][r]=e)}},_isDerivedIndex:function(e){return!(!e||"object"!=typeof e._derived)&&Object.keys(e._derived).indexOf(this.mainIndex)>=0},_addReference:function(e,t){this._index(e),e.collection||(e.collection=this),e.on&&e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,this._deIndex(e),e.off&&e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,r,n){var i=e.split(":")[0],a=e.split(":")[1];("add"!==i&&"remove"!==i||r===this)&&("destroy"===i&&this.remove(t,n),t&&"change"===i&&a&&this._indexes[a]&&(this._deIndex(t,a,t.previousAttributes()[a]),this._index(t,a)),this.trigger.apply(this,arguments))}}),Object.defineProperties(rR.prototype,{length:{get:function(){return this.models.length}},isCollection:{get:function(){return!0}}});["indexOf","lastIndexOf","every","some","forEach","map","filter","reduce","reduceRight"].forEach(function(e){rR.prototype[e]=function(){return this.models[e].apply(this.models,arguments)}}),rR.prototype.each=rR.prototype.forEach,rR.extend=JO;var nR=rR,iR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(nR),n=i(QO);function i(e){return e&&e.__esModule?e:{default:e}}var a=r.default.extend({mainIndex:"scope",model:n.default,namespace:"Credentials"});t.default=a});r(iR);var aR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,a,o,s,u,c=A(uc),l=A(_f),f=A(Rf),d=A(fI),p=A(Af),h=A(Pf),v=A(fc),m=A(vm),g=A(ld),y=A(ym),E=A(pI),b=A(Am),_=A(_y),S=A(_C),T=A(IC),w=A(QO),I=A(iR);function A(e){return e&&e.__esModule?e:{default:e}}function C(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var x=S.default.extend((r=(0,cI.oneFlight)({keyFactory:function(e){return e}}),n=(0,mC.waitForValue)("@"),i=(0,mC.persist)("@"),a=(0,mC.waitForValue)("@"),o=(0,cI.whileInFlight)("isRefreshing"),s=(0,mC.waitForValue)("@"),C(u={collections:{userTokens:I.default},dataTypes:{token:(0,cI.makeStateDataType)(w.default,"token").dataType},derived:{canAuthorize:{deps:["supertoken","supertoken.canAuthorize","canRefresh"],fn:function(){return Boolean(this.supertoken&&this.supertoken.canAuthorize||this.canRefresh)}},canRefresh:{deps:["supertoken","supertoken.canRefresh"],fn:function(){return!!this.config.jwtRefreshCallback||Boolean(this.supertoken&&this.supertoken.canRefresh)}}},props:{supertoken:(0,cI.makeStateDataType)(w.default,"token").prop},namespace:"Credentials",session:{isRefreshing:{default:!1,type:"boolean"},ready:{default:!1,type:"boolean"},refreshTimer:{default:void 0,type:"any"}},buildLoginUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clientType:"public"};if(e.state&&!(0,g.default)(e.state))throw new Error("if specified, `options.state` must be an object");return e.client_id=this.config.client_id,e.redirect_uri=this.config.redirect_uri,e.scope=this.config.scope,(e=(0,y.default)(e)).response_type||(e.response_type="public"===e.clientType?"token":"code"),(0,v.default)(e,"clientType"),e.state&&((0,m.default)(e.state)?delete e.state:e.state=cI.base64.toBase64Url((0,h.default)(e.state))),this.config.authorizeUrl+"?"+b.default.stringify(e)},buildLogoutUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.config.logoutUrl+"?"+b.default.stringify((0,p.default)({cisService:this.config.service,goto:this.config.redirect_uri},e))},calcRefreshTimeout:function(e){return Math.floor((Math.floor(4*Math.random())+6)/10*e)},constructor:function(){var e=this;this._dataTypes=(0,y.default)(this._dataTypes),(0,d.default)(this._dataTypes).forEach(function(t){e._dataTypes[t].set&&(e._dataTypes[t].set=e._dataTypes[t].set.bind(e))});for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(0,f.default)(S.default,this,r)},downscope:function(e){var t=this;return this.supertoken.downscope(e).catch(function(r){return t.logger.trace("credentials: failed to downscope supertoken to "+e,r),t.logger.trace("credentials: falling back to supertoken for "+e),l.default.resolve(new w.default((0,p.default)({scope:e},t.supertoken.serialize())),{parent:t})})},getClientToken:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.logger.info("credentials: requesting client credentials grant"),(t=t||{}).scope=t.scope||"webexsquare:admin",this.webex.request({method:"POST",uri:this.config.tokenUrl,form:{grant_type:"client_credentials",scope:t.scope,self_contained_token:!0},auth:{user:this.config.client_id,pass:this.config.client_secret,sendImmediately:!0},shouldRefreshAccessToken:!1}).then(function(t){return new w.default(t.body,{parent:e})}).catch(function(e){if(400!==e.statusCode)return l.default.reject(e);var t=T.default.select(e.body.error);return l.default.reject(new t(e._res||e))})},getUserToken:function(e){var t=this;return l.default.resolve(!this.isRefreshing||new l.default(function(e){t.logger.info("credentials: token refresh inflight; delaying getUserToken until refresh completes"),t.once("change:isRefreshing",function(){t.logger.info("credentials: token refresh complete; reinvoking getUserToken"),e()})})).then(function(){if(!t.canAuthorize)return t.logger.info("credentials: cannot produce an access token from current state"),l.default.reject(new Error("Current state cannot produce an access token"));if(e||(e=(0,AC.filterScope)("spark:kms",t.config.scope)),(e=(0,AC.sortScope)(e))===(0,AC.sortScope)(t.config.scope))return l.default.resolve(t.supertoken);var r=t.userTokens.get(e);return r&&r.access_token?l.default.resolve(r):t.downscope(e).then((0,cI.tap)(function(e){return t.userTokens.add(e)}))})},initialize:function(e,t){var r=this;e&&("string"==typeof e&&(this.supertoken=e),e.access_token&&(this.supertoken=e),e.authorization&&(e.authorization.supertoken?this.supertoken=e.authorization.supertoken:this.supertoken=e.authorization),this.supertoken&&this.supertoken.expires&&this.scheduleRefresh(this.supertoken.expires)),(0,f.default)(S.default.prototype.initialize,this,[e,t]),this.listenToOnce(this.parent,"change:config",function(){if(r.config.authorizationString){var e=_.default.parse(r.config.authorizationString,!0);r.config.client_id=e.query.client_id,r.config.redirect_uri=e.query.redirect_uri,r.config.scope=e.query.scope,r.config.authorizeUrl=e.href.substr(0,e.href.indexOf("?"))}}),this.webex.once("loaded",function(){r.ready=!0})},invalidate:function(){this.logger.info("credentials: invalidating tokens"),this.refreshTimer&&(clearTimeout(this.refreshTimer),this.unset("refreshTimer"));try{this.unset("supertoken")}catch(e){this.logger.warn("credentials: failed to clear supertoken",e)}for(;this.userTokens.models.length;)try{this.userTokens.remove(this.userTokens.models[0])}catch(e){this.logger.warn("credentials: failed to remove user token",e)}return this.logger.info("credentials: finished removing tokens"),l.default.resolve()},refresh:function(){var e=this;this.logger.info("credentials: refresh requested");var t=this.supertoken,r=(0,E.default)(this.userTokens.models);return this.config.jwtRefreshCallback?this.config.jwtRefreshCallback(this.webex).then(function(t){return e.webex.authorization.requestAccessTokenFromJwt({jwt:t})}):t.refresh().then(function(t){return e.refreshTimer&&(clearTimeout(e.refreshTimer),e.unset("refreshTimer")),e.supertoken=t,l.default.all(r.map(function(t){return e.downscope(t.scope).then(function(r){return e.logger.info("credentials: revoking token for "+t.scope),t.revoke().catch(function(t){e.logger.warn("credentials: failed to revoke user token",t)}).then(function(){e.userTokens.remove(t.scope),e.userTokens.add(r)})})}))}).then(function(){e.scheduleRefresh(e.supertoken.expires)}).catch(function(t){if(t instanceof T.default.InvalidRequestError){for(e.unset("supertoken");e.userTokens.models.length;)try{e.userTokens.remove(e.userTokens.models[0])}catch(t){e.logger.warn("credentials: failed to remove user token",t)}e.webex.trigger("client:InvalidRequestError")}return l.default.reject(t)})},scheduleRefresh:function(e){var t=this,r=e-Date.now();if(r>0){var n=this.calcRefreshTimeout(r);this.refreshTimer=(0,hI.safeSetTimeout)(function(){return t.refresh()},n)}else this.refresh()},version:"1.77.8"},"getUserToken",[r,n],(0,c.default)(u,"getUserToken"),u),C(u,"initialize",[i],(0,c.default)(u,"initialize"),u),C(u,"invalidate",[cI.oneFlight,a],(0,c.default)(u,"invalidate"),u),C(u,"refresh",[cI.oneFlight,o,s],(0,c.default)(u,"refresh"),u),u));t.default=x});r(aR);var oR=function(e,t){return null==e||Bv(e,t)};var sR=function(e,t,r){return null==e?e:PC(e,t,r)};var uR=function(e,t,r){(void 0===r||Lf(e[t],r))&&(void 0!==r||t in e)||ap(e,t,r)};var cR=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};var lR=function(e){return up(e,Hp(e))};var fR=function(e,t,r,n,i,a,o){var s=cR(e,r),u=cR(t,r),c=o.get(u);if(c)uR(e,r,c);else{var l=a?a(s,u,r+"",e,t,o):void 0,f=void 0===l;if(f){var d=gp(u),p=!d&&Ep(u),h=!d&&!p&&Rp(u);l=u,d||p||h?gp(s)?l=s:kA(s)?l=Yp(s):p?(f=!1,l=Wp(u,!0)):h?(f=!1,l=Oh(u,!0)):l=[]:Wv(u)||mp(u)?(l=s,mp(s)?l=lR(s):ld(s)&&!md(s)||(l=Jh(u))):f=!1}f&&(o.set(u,l),i(l,u,n,a,o),o.delete(u)),uR(e,r,l)}};var dR=function e(t,r,n,i,a){t!==r&&II(r,function(o,s){if(a||(a=new rp),ld(o))fR(t,r,s,n,e,i,a);else{var u=i?i(cR(t,s),o,s+"",t,r,a):void 0;void 0===u&&(u=o),uR(t,s,u)}},Hp)},pR=gI(function(e,t,r){dR(e,t,r)});for(var hR=function(e,t,r){var n=null==e?void 0:Uv(e,t);return void 0===n?r:n},vR=n(function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}}),mR=[],gR=0;gR<256;++gR)mR[gR]=(gR+256).toString(16).substr(1);var yR,ER,bR=function(e,t){var r=t||0,n=mR;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")},_R=0,SR=0;var TR=function(e,t,r){var n=t&&r||0,i=t||[],a=(e=e||{}).node||yR,o=void 0!==e.clockseq?e.clockseq:ER;if(null==a||null==o){var s=vR();null==a&&(a=yR=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==o&&(o=ER=16383&(s[6]<<8|s[7]))}var u=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:SR+1,l=u-_R+(c-SR)/1e4;if(l<0&&void 0===e.clockseq&&(o=o+1&16383),(l<0||u>_R)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_R=u,SR=c,ER=o;var f=(1e4*(268435455&(u+=122192928e5))+c)%4294967296;i[n++]=f>>>24&255,i[n++]=f>>>16&255,i[n++]=f>>>8&255,i[n++]=255&f;var d=u/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=255&d,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=o>>>8|128,i[n++]=255&o;for(var p=0;p<6;++p)i[n+p]=a[p];return t||bR(i)};var wR=function(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||vR)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;++a)t[n+a]=i[a];return t||bR(i)},IR=wR;IR.v1=TR,IR.v4=wR;var AR=IR,CR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(_f),n=c(fc),i=c(hT),a=c(zy),o=c($y),s=c(vT),u=c(mT);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){var t=this;return e.headers=e.headers||{},"authorization"in e.headers||"auth"in e?(e.headers.authorization||(0,n.default)(e.headers,"authorization"),r.default.resolve(e)):this.requiresCredentials(e).then(function(r){return r?t.webex.credentials.getUserToken().then(function(t){return e.headers.authorization=t.toString(),e}):e})}},{key:"requiresCredentials",value:function(e){var t=this;return e.uri&&(e.uri.includes(this.webex.config.device.preDiscoveryServices.hydra)||e.uri.includes(this.webex.config.device.preDiscoveryServices.hydraServiceUrl))?r.default.resolve(!0):this.webex.internal.device?this.webex.internal.device.isSpecificService("hydra",e.uri).then(function(n){return!!n||(e.service?t.webex.internal.device.isService(e.service):!!e.uri&&t.webex.internal.device.isServiceUrl(e.uri).then(function(n){if(n)return!0;if((void 0===e.addAuthHeader&&t.webex.config.device.validateDomains&&(e.addAuthHeader=!0),e.addAuthHeader)&&t.webex.config.device.whitelistedServiceDomains.filter(function(t){return e.uri.includes(t)}).length)return r.default.resolve(!0);return!1}))}):r.default.resolve(!1)}},{key:"onResponseError",value:function(e,t){var i=this;return this.shouldAttemptReauth(t,e).then(function(a){return a&&(i.webex.logger.info("auth: received 401, attempting to reauthenticate"),t.options.headers&&(0,n.default)(t.options.headers,"authorization"),i.webex.credentials.canRefresh)?i.webex.credentials.refresh().then(function(){return i.replay(e)}):r.default.reject(t)})}},{key:"replay",value:function(e){return e.replayCount?e.replayCount+=1:e.replayCount=1,e.replayCount>this.webex.config.maxAuthenticationReplays?(this.webex.logger.error("auth: failed after "+this.webex.config.maxAuthenticationReplays+" replay attempts"),r.default.reject(new Error("Failed after "+this.webex.config.maxAuthenticationReplays+" replay attempts"))):(this.webex.logger.info("auth: replaying request "+e.replayCount+" time"),this.webex.request(e))}},{key:"shouldAttemptReauth",value:function(e,t){return t&&!1===t.shouldRefreshAccessToken?r.default.resolve(!1):401===e.statusCode?r.default.resolve(!0):r.default.resolve(!1)}}],[{key:"create",value:function(){return new t({webex:this})}}]),t}(XO.Interceptor);t.default=l});r(CR);var xR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(_f),n=u(hT),i=u(zy),a=u($y),o=u(vT),s=u(mT);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){return e.$timings=e.$timings||{},e.$timings.networkStart=Date.now(),e}},{key:"onResponse",value:function(e,t){return e.$timings.networkEnd=Date.now(),t}},{key:"onResponseError",value:function(e,t){return e.$timings.networkEnd=Date.now(),r.default.reject(t)}}],[{key:"create",value:function(e){return new t(this,e)}}]),t}(XO.Interceptor);t.default=c});r(xR);var OR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(_f),n=u(hT),i=u(zy),a=u($y),o=u(vT),s=u(mT);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){return e.noTransform?e:this.webex.transform("outbound",e)}},{key:"onResponse",value:function(e,t){return this.webex.transform("inbound",t)}},{key:"onResponseError",value:function(e,t){return this.webex.transform("inbound",t).then(function(e){return r.default.reject(e||t)})}}],[{key:"create",value:function(){return new t({webex:this})}}]),t}(XO.Interceptor);t.default=c});r(OR);var RR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(_f),n=l(fc),i=l(hT),a=l(zy),o=l($y),s=l(vT),u=l(mT),c=l(pI);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onRequest",value:function(e){return e.uri.includes(this.webex.config.credentials.samlUrl)||e.uri.includes(this.webex.config.credentials.tokenUrl)||e.uri.includes(this.webex.config.credentials.authorizeUrl)?e:"cisco-no-http-redirect"in e.headers?(e.headers["cisco-no-http-redirect"]||(0,n.default)(e.headers,"cisco-no-http-redirect"),e):(e.headers["cisco-no-http-redirect"]=!0,e.$redirectCount=e.$redirectCount||0,e)}},{key:"onResponse",value:function(e,t){if(t.headers&&t.headers["cisco-location"])return(e=(0,c.default)(e)).uri=t.headers["cisco-location"],e.$redirectCount+=1,e.$redirectCount>this.webex.config.maxAppLevelRedirects?r.default.reject(new Error("Maximum redirects exceeded")):this.webex.request(e);if(t.headers&&t.body&&2000002===t.body.errorCode&&t.body.location){if(e=(0,c.default)(e),t.options&&t.options.qs){var n=t.body.location.split("?");e.uri=n[0]}else e.uri=t.body.location;return e.$redirectCount+=1,e.$redirectCount>this.webex.config.maxLocusRedirects?r.default.reject(new Error("Maximum redirects exceeded")):this.webex.request(e)}return t}}],[{key:"create",value:function(){return new t({webex:this})}}]),t}(XO.Interceptor);t.default=f});r(RR);var NR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(_f),n=c(hT),i=c(zy),a=c($y),o=c(vT),s=c(mT),u=c(hR);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){var t=(0,u.default)(this,"webex.logger",console);try{this.webex.trigger("request:start",e)}catch(e){t.warn("event handler for request:start failed ",e)}return r.default.resolve(e)}},{key:"onRequestError",value:function(e,t){var n=(0,u.default)(this,"webex.logger",console);try{this.webex.trigger("request:end",e,t),this.webex.trigger("request:failure",e,t)}catch(e){n.warn("event handler for request:end failed ",e)}return r.default.reject(t)}},{key:"onResponse",value:function(e,t){var n=(0,u.default)(this,"webex.logger",console);try{this.webex.trigger("request:success",t.options,t)}catch(e){n.warn("event handler for request:success failed ",e)}return r.default.resolve(t)}},{key:"onResponseError",value:function(e,t){var n=(0,u.default)(this,"webex.logger",console);try{this.webex.trigger("request:end",e,t),this.webex.trigger("request:failure",e,t)}catch(e){n.warn("event handler for request:failure failed ",e)}return r.default.reject(t)}}],[{key:"create",value:function(){return new t({webex:this})}}]),t}(XO.Interceptor);t.default=l});r(NR);var kR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=h(_f),n=h(hT),i=h(zy),a=h($y),o=h(vT),s=h(mT),u=h(fm),c=h(OI),l=h(gp),f=h(AA),d=h(hR),p=h(by);function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){var t=(0,d.default)(this,"webex.logger",console);t.info("/**********************************************************************\\ "),t.info("Request:",e.method||"GET",e.uri),t.info("WEBEX_TRACKINGID: ",(0,d.default)(e,"headers.trackingid")),(0,f.default)(e,"headers.x-trans-id")&&t.info("X-Trans-ID: ",(0,d.default)(e,"headers.x-trans-id")),(0,f.default)(this,"webex.internal.device.userId")&&t.info("User ID:",(0,d.default)(this,"webex.internal.device.userId"));var n=new Date;if(xu.env.ENABLE_VERBOSE_NETWORK_LOGGING){t.info("timestamp (start): ",n.getTime(),n.toISOString());try{e.body&&e.body.length&&!(0,l.default)(e.body)&&!(0,c.default)(e.body)?t.info("Request Options:",p.default.inspect((0,u.default)(e,"body"),{depth:null})):t.info("Request Options:",p.default.inspect(e,{depth:null}))}catch(e){t.warn("Could not stringify request options:",e)}}return r.default.resolve(e)}},{key:"onRequestError",value:function(e,t){this.onRequest(e);var n=(0,d.default)(this,"webex.logger",console);return n.error("Request Failed: ",t.stack),n.info("\\**********************************************************************/"),r.default.reject(t)}}],[{key:"create",value:function(){return new t({webex:this})}}]),t}(XO.Interceptor);t.default=v});r(kR);var PR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(_f),n=u(hT),i=u(zy),a=u($y),o=u(vT),s=u(mT);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){return e.$timings=e.$timings||{},e.$timings.requestStart=Date.now(),e}},{key:"onRequestError",value:function(e){return e.$timings.requestEnd=e.$timings.requestFail=Date.now(),r.default.reject(e)}},{key:"onResponse",value:function(e,t){return e.$timings.requestEnd=Date.now(),r.default.resolve(t)}},{key:"onResponseError",value:function(e,t){return e.$timings.requestEnd=e.$timings.requestFail=Date.now(),r.default.reject(t)}}],[{key:"create",value:function(e){return new t(this,e)}}]),t}(XO.Interceptor);t.default=c});r(PR);var MR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(_f),n=d(cb),i=d(hT),a=d(zy),o=d($y),s=d(vT),u=d(mT),c=d(fm),l=d(hR),f=d(by);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return(0,a.default)(this,t),(0,s.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"onResponse",value:function(e,t){var r=new Date;this.printResponseHeader(e,t);var i=(0,l.default)(this,"webex.logger",console);if(xu.env.ENABLE_VERBOSE_NETWORK_LOGGING)if(i.info("timestamp (end): ",r.getTime(),r.toISOString()),"string"==typeof t.body||Vg(t.body))i.info("Response: ","Not printed, it`s probably a file");else if("object"===(0,n.default)(t.body))try{i.info("Response: ",f.default.inspect((0,c.default)(t.body,"features"),{depth:null}))}catch(e){i.info("Response: ","[Not Serializable]",e)}return i.info("\\**********************************************************************/"),t}},{key:"onResponseError",value:function(e,t){var n=new Date;this.printResponseHeader(e,t);var i=(0,l.default)(this,"webex.logger",console);if(xu.env.ENABLE_VERBOSE_NETWORK_LOGGING){i.info("timestamp (end): ",n.getTime(),n.toISOString());try{i.error("Response: ",f.default.inspect(t.body,{depth:null}))}catch(e){i.error("Response: ",t.body)}}return i.info("\\**********************************************************************/"),r.default.reject(t)}},{key:"printResponseHeader",value:function(e,t){var r=(0,l.default)(this,"webex.logger",console);r.info("Status Code:",t.statusCode),r.info("WEBEX_TRACKINGID:",(0,l.default)(e,"headers.trackingid")||(0,l.default)(t,"headers.trackingid")),r.info("Network duration:",e.$timings.networkEnd-e.$timings.networkStart),r.info("Processing duration:",e.$timings.requestEnd-e.$timings.requestStart)}}],[{key:"create",value:function(){return new t({webex:this})}}]),t}(XO.Interceptor);t.default=p});r(MR);var DR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(hT),n=c(zy),i=c($y),a=c(vT),o=c(mT),s=c(gE),u=c(hR);function c(e){return e&&e.__esModule?e:{default:e}}var l=new s.default,f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var i=(0,u.default)(e,"webex.config.appName"),o=(0,u.default)(e,"webex.config.appVersion")||"0.0",s=(0,a.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return i?l.set(s,i+"/"+o):l.set(s,"@webex/http-core"),s}return(0,o.default)(t,e),(0,i.default)(t,[{key:"onRequest",value:function(e){return cI.inBrowser?e:(e.headers=e.headers||{},"user-agent"in e.headers&&e.headers["spark-user-agent"]?e:(e.headers["user-agent"]=l.get(this),e))}}],[{key:"create",value:function(){return new t({webex:this})}}]),t}(XO.Interceptor);t.default=f});r(DR);var LR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(fc),n=u(hT),i=u(zy),a=u($y),o=u(vT),s=u(mT);function u(e){return e&&e.__esModule?e:{default:e}}var c=new(u(gE).default),l=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){if(e.headers=e.headers||{},"trackingid"in e.headers)return e.headers.trackingid||(0,r.default)(e.headers,"trackingid"),e;if(this.requiresTrackingId(e)&&(e.headers.trackingid=this.webex.sessionId+"_"+this.sequence),e.headers.trackingid&&e.replayCount){var t=e.headers.trackingid.split("+");t[1]=e.replayCount,e.headers.trackingid=t.join("+")}return e}},{key:"requiresTrackingId",value:function(e){return!e.headers.trackingid}},{key:"sequence",get:function(){var e=c.get(this)||0;return e+=1,c.set(this,e),e}}],[{key:"create",value:function(){return new t({webex:this})}}]),t}(XO.Interceptor);t.default=l});r(LR);var UR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(fc),n=l(hT),i=l(zy),a=l($y),o=l(vT),s=l(mT),u=l(gE),c=l(hR);function l(e){return e&&e.__esModule?e:{default:e}}var f=new u.default,d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(this,t);var r=(0,c.default)(e,"webex.config.appName"),a=(0,c.default)(e,"webex.config.appVersion"),s=(0,c.default)(e,"webex.webex",!1)?"webex":"webex-js-sdk",u=(0,c.default)(e,"webex.version","development"),l=(0,o.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return r&&a?f.set(l,r+"/"+a+" ("+(cI.inBrowser?"web":"node")+") "+s+"/"+u):f.set(l,s+"/"+u+" ("+(cI.inBrowser?"web":"node")+")"),l}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){return e.headers=e.headers||{},e.uri&&(e.uri.includes(this.webex.config.credentials.samlUrl)||e.uri.includes(this.webex.config.credentials.tokenUrl)||e.uri.includes(this.webex.config.credentials.authorizeUrl))?e:"spark-user-agent"in e.headers?(e.headers["spark-user-agent"]||(0,r.default)(e.headers,"spark-user-agent"),e):(e.headers["spark-user-agent"]=f.get(this),e)}}],[{key:"create",value:function(){return new t({webex:this})}}]),t}(XO.Interceptor);t.default=d});r(UR);var jR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(_f),n=c(gb),i=c(hT),a=c(zy),o=c(vT),s=c($y),u=c(mT);function c(e){return e&&e.__esModule?e:{default:e}}var l=new(c(gE).default),f=/.*(idbroker|identity)(bts)?.ciscospark.com\/([^\/]+)/,d=function(e){function t(){var e;(0,a.default)(this,t);for(var r=arguments.length,s=Array(r),u=0;u<r;u++)s[u]=arguments[u];var c=(0,o.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(s)));return l.set(c,new n.default),c}return(0,u.default)(t,e),(0,s.default)(t,null,[{key:"create",value:function(){return new t({webex:this})}}]),(0,s.default)(t,[{key:"onRequest",value:function(e){return this.isRateLimited(e.uri)?r.default.reject(new Error("API rate limited "+e.uri)):r.default.resolve(e)}},{key:"onResponseError",value:function(e,t){return 429===t.statusCode&&(e.uri.includes("idbroker")||e.uri.includes("identity"))&&this.setRateLimitExpiry(e.uri,this.extractRetryAfterTime(e)),r.default.reject(t)}},{key:"extractRetryAfterTime",value:function(e){var t=e.headers["retry-after"]||null;return null===t||t<=0?6e4:t>3600?36e5:1e3*t}},{key:"setRateLimitExpiry",value:function(e,t){var r=this.getApiName(e);if(!r)return!1;var n=(new Date).getTime()+t;return l.get(this).set(r,n)}},{key:"getRateLimitStatus",value:function(e){var t=this.getApiName(e);if(!t)return!1;var r=(new Date).getTime(),n=l.get(this);return void 0!==n.get(t)&&r<n.get(t)}},{key:"getApiName",value:function(e){if(!e)return null;var t=e.match(f);return t?t[2]:null}},{key:"isRateLimited",value:function(e){return!(!e||!e.includes("idbroker")&&!e.includes("identity"))&&this.getRateLimitStatus(e)}}]),t}(XO.Interceptor);t.default=d});r(jR);var FR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=rC)&&r.__esModule?r:{default:r};var i=xu.env.IDBROKER_BASE_URL||"https://idbroker.webex.com",a=n.default.extend({props:{url:["string",!1,i],defaultUrl:["string",!1,i]}}),o=n.default.extend({props:{url:["string",!1,xu.env.IDENTITY_BASE_URL],defaultUrl:["string",!1,xu.env.IDENTITY_BASE_URL]}}),s=n.default.extend({extraProperties:"allow",children:{idbroker:a,identity:o},props:{authorizationString:["string",!1,xu.env.WEBEX_AUTHORIZATION_STRING||xu.env.AUTHORIZATION_STRING],client_id:["string",!1,xu.env.WEBEX_CLIENT_ID||xu.env.COMMON_IDENTITY_CLIENT_ID||xu.env.CLIENT_ID],client_secret:["string",!1,xu.env.WEBEX_CLIENT_SECRET||xu.env.COMMON_IDENTITY_CLIENT_SECRET||xu.env.CLIENT_SECRET],redirect_uri:["string",!1,xu.env.WEBEX_REDIRECT_URI||xu.env.COMMON_IDENTITY_REDIRECT_URI||xu.env.REDIRECT_URI],scope:["string",!1,xu.env.WEBEX_SCOPE||xu.env.WEBEX_SCOPES||xu.env.COMMON_IDENTITY_SCOPE||xu.env.SCOPE],cisService:["string",!1,"webex"]},derived:{activationUrl:{deps:["idbroker.url"],fn:function(){return(this.idbroker.url||"https://idbroker.webex.com")+"/idb/token/v1/actions/UserActivation/invoke"}},authorizeUrl:{deps:["idbroker.url"],fn:function(){return xu.env.AUTHORIZE_URL||this.idbroker.url+"/idb/oauth2/v1/authorize"}},tokenUrl:{deps:["idbroker.url"],fn:function(){return xu.env.TOKEN_URL||this.idbroker.url+"/idb/oauth2/v1/access_token"}},revokeUrl:{deps:["idbroker.url"],fn:function(){return xu.env.REVOKE_URL||this.idbroker.url+"/idb/oauth2/v1/revoke"}},logoutUrl:{deps:["idbroker.url"],fn:function(){return this.idbroker.url+"/idb/oauth2/v1/logout"}},setPasswordUrl:{deps:["identity.url"],fn:function(){return(this.identity.url||"https://identity.webex.com")+"/identity/scim/v1/Users"}}}});t.default=s});r(FR);var BR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=FR)&&r.__esModule?r:{default:r};t.default={maxAppLevelRedirects:10,maxLocusRedirects:5,maxAuthenticationReplays:1,maxReconnectAttempts:1,onBeforeLogout:[],trackingIdPrefix:"webex-js-sdk",trackingIdSuffix:"",AlternateLogger:void 0,credentials:new n.default,device:{preDiscoveryServices:{hydra:xu.env.HYDRA_SERVICE_URL||"https://api.ciscospark.com/v1",hydraServiceUrl:xu.env.HYDRA_SERVICE_URL||"https://api.ciscospark.com/v1"},validateDomains:"true"===xu.env.VALIDATE_DOMAINS||!1,whitelistedServiceDomains:["webexkubed.com","wbx3.com","wbx2.com","ciscospark.com","ciscospark.com"]},payloadTransformer:{predicates:[],transforms:[]},storage:{boundedAdapter:bC.MemoryStoreAdapter,unboundedAdapter:bC.MemoryStoreAdapter}}});r(BR);var VR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(BC),n=l(fI),i=l(PA),a=l(pR),o=l(md),s=l(gp),u=l(AA),c=l(hR);function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){(e._derived[t]={fn:(0,o.default)(n)?n:n.fn,cache:!1!==n.cache,depList:n.deps||[]}).depList.forEach(function(r){e._deps[r]=(0,i.default)(e._deps[r]||[],[t])}),(0,r.default)(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError("`"+t+"` is a derived property, it can't be set directly.")}})}t.default=function(e,t,r){return e.registerPlugin=function(i,o){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if((!e.prototype._children[i]||l.replace)&&(e.prototype._children[i]=o,l.proxies&&l.proxies.forEach(function(t){f(e.prototype,t,{deps:[i+"."+t],fn:function(){return this[i][t]}})}),l.interceptors&&(0,n.default)(l.interceptors).forEach(function(e){r[e]=l.interceptors[e]}),l.config&&(0,a.default)(t,l.config),(0,u.default)(l,"payloadTransformer.predicates")&&(t.payloadTransformer.predicates=t.payloadTransformer.predicates.concat((0,c.default)(l,"payloadTransformer.predicates"))),(0,u.default)(l,"payloadTransformer.transforms")&&(t.payloadTransformer.transforms=t.payloadTransformer.transforms.concat((0,c.default)(l,"payloadTransformer.transforms"))),l.onBeforeLogout&&(t.onBeforeLogout=t.onBeforeLogout||[],((0,s.default)(l.onBeforeLogout)?l.onBeforeLogout:[l.onBeforeLogout]).forEach(function(e){return t.onBeforeLogout.push({plugin:i,fn:e})})),o.prototype._definition&&o.prototype._definition.ready)){var d=e.prototype._derived.ready,p=d.fn,h={deps:d.depList.concat(i+".ready"),fn:p};f(e.prototype,"ready",h)}},e}});r(VR);var GR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(BC),n=l(fI),i=l(PA),a=l(pR),o=l(md),s=l(gp),u=l(AA),c=l(hR);function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,l){return e.registerPlugin=function(f,d){var p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.prototype._children[f]||p.replace){if(e.prototype._children[f]=d,p.proxies)throw new Error("Proxies are not currently supported for private plugins");if(p.interceptors&&(0,n.default)(p.interceptors).forEach(function(e){l[e]=p.interceptors[e]}),p.config&&(0,a.default)(t,p.config),(0,u.default)(p,"payloadTransformer.predicates")&&(t.payloadTransformer.predicates=t.payloadTransformer.predicates.concat((0,c.default)(p,"payloadTransformer.predicates"))),(0,u.default)(p,"payloadTransformer.transforms")&&(t.payloadTransformer.transforms=t.payloadTransformer.transforms.concat((0,c.default)(p,"payloadTransformer.transforms"))),p.onBeforeLogout&&(t.onBeforeLogout=t.onBeforeLogout||[],((0,s.default)(p.onBeforeLogout)?p.onBeforeLogout:[p.onBeforeLogout]).forEach(function(e){return t.onBeforeLogout.push({plugin:f,fn:e})})),d.prototype._definition&&d.prototype._definition.ready){var h=e.prototype._derived.ready,v=h.fn,m={deps:h.depList.concat(f+".ready"),fn:v};!function(e,t,n){(e._derived[t]={fn:(0,o.default)(n)?n:n.fn,cache:!1!==n.cache,depList:n.deps||[]}).depList.forEach(function(r){e._deps[r]=(0,i.default)(e._deps[r]||[],[t])}),(0,r.default)(e,t,{get:function(){return this._getDerivedProperty(t)},set:function(){throw new TypeError("`"+t+"` is a derived property, it can't be set directly.")}})}(e.prototype,"ready",m)}}},e}});r(GR);var qR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(fI),n=a(rC),i=a(by);function a(e){return e&&e.__esModule?e:{default:e}}var o=n.default.extend({derived:{ready:{deps:[],fn:function(){var e=this;return(0,r.default)(this._children).reduce(function(t,r){return t&&e[r]&&!1!==e[r].ready},!0)}}},inspect:function(e){return i.default.inspect(this.serialize({props:!0,session:!0,derived:!0}),{depth:e})}});t.default=o});r(qR);var KR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=V(uc),i=V(fc),a=V(hS),o=V(vS),s=V(Af),u=V(iC),c=V(_f),l=V(fI),f=V(Rf),d=V(oR),p=V(sR),h=V(fm),v=V(pR),m=V(Mv),g=V(OI),y=V(md),E=V(hR),b=V(_S);t.registerPlugin=function(e,t,r){Q.registerPlugin(e,t,r)},t.registerInternalPlugin=function(e,t,r){B.default.registerPlugin(e,t,r)};var _=V(by),S=V(rC),T=V(AR),w=V(CR),I=V(xR),A=V(OR),C=V(RR),x=V(NR),O=V(kR),R=V(PR),N=V(MR),k=V($O),P=V(DR),M=V(LR),D=V(UR),L=V(jR),U=V(BR),j=V(VR),F=V(GR),B=V(qR);function V(e){return e&&e.__esModule?e:{default:e}}var G,q,K,H,z,W,Y={WebexTrackingIdInterceptor:M.default.create,RequestEventInterceptor:x.default.create,RateLimitInterceptor:L.default.create,RequestLoggerInterceptor:xu.env.ENABLE_NETWORK_LOGGING||xu.env.ENABLE_VERBOSE_NETWORK_LOGGING?O.default.create:void 0,ResponseLoggerInterceptor:xu.env.ENABLE_NETWORK_LOGGING||xu.env.ENABLE_VERBOSE_NETWORK_LOGGING?N.default.create:void 0,RequestTimingInterceptor:R.default.create,UrlInterceptor:void 0,UserAgentInterceptor:P.default.create,WebexUserAgentInterceptor:D.default.create,AuthInterceptor:w.default.create,KmsDryErrorInterceptor:void 0,PayloadTransformerInterceptor:A.default.create,ConversationInterceptor:void 0,RedirectInterceptor:C.default.create,HttpStatusInterceptor:function(){return XO.HttpStatusInterceptor.create({error:k.default})},NetworkTimingInterceptor:I.default.create},X=["ResponseLoggerInterceptor","RequestTimingInterceptor","RequestEventInterceptor","WebexTrackingIdInterceptor","RateLimitInterceptor"],$=["HttpStatusInterceptor","NetworkTimingInterceptor","RequestLoggerInterceptor","RateLimitInterceptor"],Q=S.default.extend((r={version:"1.77.8",children:{internal:B.default},constructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return"string"==typeof e?e={credentials:{supertoken:{access_token:e}}}:(["credentials.authorization","authorization","credentials.supertoken.supertoken","supertoken","access_token","credentials.authorization.supertoken"].forEach(function(t){var r=(0,E.default)(e,t);r&&((0,d.default)(e,t),(0,p.default)(e,"credentials.supertoken",r))}),["credentials","credentials.authorization"].forEach(function(t){var r=(0,E.default)(e,t);"string"==typeof r&&((0,d.default)(e,t),(0,p.default)(e,"credentials.supertoken",r))}),"string"==typeof(0,E.default)(e,"credentials.access_token")&&((0,p.default)(e,"credentials.access_token",this.bearerValidator((0,E.default)(e,"credentials.access_token").trim())),(0,p.default)(e,"credentials.supertoken",e.credentials))),(0,f.default)(S.default,this,[e,t])},derived:{boundedStorage:{deps:[],fn:function(){return(0,bC.makeWebexStore)("bounded",this)}},unboundedStorage:{deps:[],fn:function(){return(0,bC.makeWebexStore)("unbounded",this)}},ready:{deps:["loaded","internal.ready"],fn:function(){var e=this;return this.loaded&&(0,l.default)(this._children).reduce(function(t,r){return t&&e[r]&&!1!==e[r].ready},!0)}}},session:{config:{type:"object"},loaded:{default:!1,type:"boolean"},request:{setOnce:!0,type:"any"},sessionId:{setOnce:!0,type:"string"}},refresh:function(){var e;return(e=this.credentials).refresh.apply(e,arguments)},transform:function(e,t){var r=this,n=this.config.payloadTransformer.predicates.filter(function(t){return!t.direction||t.direction===e}),i={webex:this};return c.default.all(n.map(function(e){return e.test(i,t).then(function(r){if(r)return e.extract(t).then(function(t){return{name:e.name,target:t}})})})).then(function(t){return t.filter(function(e){return Boolean(e)}).reduce(function(t,n){var i=n.name,a=n.target,o=n.alias;return t.then(function(){return o?r.applyNamedTransform(e,o,a):r.applyNamedTransform(e,i,a)})},c.default.resolve())}).then(function(){return t})},applyNamedTransform:function(e,t,r){for(var n=arguments.length,i=Array(n>3?n-3:0),a=3;a<n;a++)i[a-3]=arguments[a];var o=this;return(0,g.default)(t)&&(i.unshift(r),r=t,t={webex:this,transform:function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return o.applyNamedTransform.apply(o,[e,t].concat(n))}}),t.webex.config.payloadTransformer.transforms.filter(function(t){return t.name===r&&(!t.direction||t.direction===e)}).reduce(function(e,r){return e.then(function(){var e;return r.alias?(e=t).transform.apply(e,[r.alias].concat((0,u.default)(i))):c.default.resolve(r.fn.apply(r,[t].concat((0,u.default)(i))))})},c.default.resolve()).then(function(){return(0,m.default)(i)})},getWindow:function(){return window},initialize:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};delete U.default.credentials.federation,this.config=(0,v.default)({},U.default,t.config),this.trigger("change:config");var r=function t(){e.loaded&&(e.trigger("loaded"),e.stopListening(e,"change:loaded",t))};vu(function(){e.listenToAndRun(e,"change:loaded",r)});var n=function t(){e.ready&&(e.trigger("ready"),e.stopListening(e,"change:ready",t))};vu(function(){e.listenToAndRun(e,"change:ready",n)}),(0,l.default)(this.constructor.prototype._children).forEach(function(t){e.listenTo(e[t],"change",function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];n.unshift("change:"+t),e.trigger.apply(e,n)})});var i=function(t,r){var n=Y[r];return(0,y.default)(n)?(t.push((0,f.default)(n,e,[])),t):t},a=[];a=X.reduce(i,a),a=(0,l.default)(Y).filter(function(e){return!(X.includes(e)||$.includes(e))}).reduce(i,a),a=$.reduce(i,a),this.request=(0,XO.defaults)({json:!0,interceptors:a});var o=(0,E.default)(this,"config.trackingIdPrefix","webex-js-sdk")+"_"+(0,E.default)(this,"config.trackingIdBase",T.default.v4());(0,E.default)(this,"config.trackingIdSuffix")&&(o+="_"+(0,E.default)(this,"config.trackingIdSuffix")),this.sessionId=o},setConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=(0,v.default)({},this.config,e)},bearerValidator:function(e){return e.includes("Bearer")&&e.split(" ").length-1==0?(console.warn("Your access token does not have a space between 'Bearer' and the token, please add a space to it or replace it with this already fixed version:\n\n"+e.replace("Bearer","Bearer ").replace(/\s+/g," ")),console.info("Tip: You don't need to add 'Bearer' to the access_token field. The token by itself is fine"),e.replace("Bearer","Bearer ").replace(/\s+/g," ")):e.split(" ").length-1>1?(console.warn("Your access token has "+(e.split(" ").length-2)+" too many spaces, please use this format:\n\n"+e.replace(/\s+/g," ")),console.info("Tip: You don't need to add 'Bearer' to the access_token field, the token by itself is fine"),e.replace(/\s+/g," ")):e.replace(/\s+/g," ")},inspect:function(e){return _.default.inspect((0,h.default)(this.serialize({props:!0,session:!0,derived:!0}),"boundedStorage","unboundedStorage","request","config"),{depth:e})},logout:function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var a=this.credentials.supertoken&&(this.credentials.supertoken.refresh_token||this.credentials.supertoken.access_token);return e=(0,s.default)({token:a},e),this.config.onBeforeLogout.reverse().reduce(function(r,i){var a=i.plugin,o=i.fn;return r.then(function(){return c.default.resolve((0,f.default)(o,t[a]||t.internal[a],[e].concat((0,u.default)(n)))).catch(function(e){t.logger.warn("onBeforeLogout from plugin "+a+": failed",e)})})},c.default.resolve()).then(function(){return c.default.all([t.boundedStorage.clear(),t.unboundedStorage.clear()])}).then(function(){var e;return(e=t.credentials).invalidate.apply(e,(0,u.default)(n))}).then(function(){var r;return t.authorization&&t.authorization.logout&&(r=t.authorization).logout.apply(r,[e].concat((0,u.default)(n)))}).then(function(){return t.trigger("client:logout")})},measure:function(){var e;return this.metrics?(e=this.metrics).sendUnstructured.apply(e,arguments):c.default.resolve()},upload:function(){var e=(0,o.default)(a.default.mark(function e(t){var r,n,i,o=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=void 0,!this.internal||!this.internal.feature){e.next=5;break}return e.next=4,this.internal.feature.getFeature("developer","files-s3");case 4:r=e.sent;case 5:if(t.file){e.next=7;break}return e.abrupt("return",c.default.reject(new Error("`options.file` is required")));case 7:return t.phases=t.phases||{},t.phases.initialize=t.phases.initialize||{},t.phases.upload=t.phases.upload||{},t.phases.finalize=t.phases.finalize||{},(0,b.default)(t.phases.initialize,{method:"POST",body:{uploadProtocol:r?"content-length":null}},(0,h.default)(t,"file","phases")),(0,b.default)(t.phases.upload,{method:"PUT",json:!1,withCredentials:!1,body:t.file,headers:{"x-trans-id":T.default.v4(),authorization:void 0}}),(0,b.default)(t.phases.finalize,{method:"POST"},(0,h.default)(t,"file","phases")),n=new TS.EventEmitter,i=this._uploadPhaseInitialize(t).then(function(){var e=o._uploadPhaseUpload(t);return(0,cI.transferEvents)("progress",e,n),e}).then(function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return o._uploadPhaseFinalize.apply(o,[t].concat(r))}).then(function(e){return e.body}),(0,cI.proxyEvents)(n,i),e.abrupt("return",i);case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),_uploadPhaseInitialize:function(e){var t=this;return this.logger.debug("client: initiating upload session"),this.request(e.phases.initialize).then(function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return t._uploadApplySession.apply(t,[e].concat(n))}).then(function(e){return t.logger.debug("client: initiated upload session"),e})},_uploadApplySession:function(e,t){var r=t.body;["upload","finalize"].reduce(function(e,t){return e[t]=(0,l.default)(e[t]).reduce(function(e,t){return t.startsWith("$")&&(e[t.substr(1)]=e[t](r),(0,i.default)(e,t)),e},e[t]),e},e.phases)},_uploadPhaseUpload:function(e){var t=this;this.logger.debug("client: uploading file");var r=this.request(e.phases.upload).then(function(e){return t.logger.debug("client: uploaded file"),e});return(0,cI.proxyEvents)(e.phases.upload.upload,r),"test"===xu.env.NODE_ENV&&r.on("progress",function(e){t.logger.info("upload progress",e.loaded,e.total)}),r},_uploadPhaseFinalize:function(e){var t=this;return this.logger.debug("client: finalizing upload session"),this.request(e.phases.finalize).then(function(e){return t.logger.debug("client: finalized upload session"),e})}},G=r,q="_uploadPhaseUpload",K=[cI.retry],H=(0,n.default)(r,"_uploadPhaseUpload"),z=r,W={},Object.keys(H).forEach(function(e){W[e]=H[e]}),W.enumerable=!!W.enumerable,W.configurable=!!W.configurable,("value"in W||W.initializer)&&(W.writable=!0),W=K.slice().reverse().reduce(function(e,t){return t(G,q,e)||e},W),z&&void 0!==W.initializer&&(W.value=W.initializer?W.initializer.call(z):void 0,W.initializer=void 0),void 0===W.initializer&&(Object.defineProperty(G,q,W),W=null),r));Q.version="1.77.8",(0,F.default)(B.default,U.default,Y),(0,j.default)(Q,U.default,Y),t.default=Q});r(KR);KR.registerPlugin,KR.registerInternalPlugin;var HR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.grantErrors=t.Token=t.sortScope=t.filterScope=t.Credentials=void 0,Object.defineProperty(t,"Credentials",{enumerable:!0,get:function(){return n(aR).default}}),Object.defineProperty(t,"filterScope",{enumerable:!0,get:function(){return AC.filterScope}}),Object.defineProperty(t,"sortScope",{enumerable:!0,get:function(){return AC.sortScope}}),Object.defineProperty(t,"Token",{enumerable:!0,get:function(){return n(QO).default}}),Object.defineProperty(t,"grantErrors",{enumerable:!0,get:function(){return n(IC).default}});var r=n(aR);function n(e){return e&&e.__esModule?e:{default:e}}(0,KR.registerPlugin)("credentials",r.default,{proxies:["canAuthorize","canRefresh"]})});r(HR);HR.grantErrors,HR.Token,HR.sortScope,HR.filterScope,HR.Credentials;var zR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,i=l(Af),a=l(Xy),o=l(zy),s=l($y),u=l(gE),c=l(HA);function l(e){return e&&e.__esModule?e:{default:e}}var f,d,p,h,v,m,g=new u.default,y=(r=function(){function e(){var t,r,i,s,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,e),t=this,r="ready",s=this,(i=n)&&(0,a.default)(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0});var l=u.webex||c.parent;if(!l)throw new Error("One of `attrs.webex` or `options.parent` must be supplied when initializing a StatelessWebexPlugin");for(;l.parent||l.collection;)l=l.parent||l.collection;g.set(this,l)}return(0,s.default)(e,[{key:"config",get:function(){var e=this.getNamespace?this.getNamespace():this.namespace;return e?(e=e.toLowerCase(),this.webex.config[e]):this.webex.config}},{key:"logger",get:function(){return this.webex.logger}},{key:"webex",get:function(){return g.get(this)}}]),(0,s.default)(e,[{key:"request",value:function(){var e;return(e=this.webex).request.apply(e,arguments)}},{key:"upload",value:function(){var e;return(e=this.webex).upload.apply(e,arguments)}}]),e}(),f=r.prototype,d="ready",p=[rI.readonly],h={enumerable:!0,initializer:function(){return!0}},m={},Object.keys(h).forEach(function(e){m[e]=h[e]}),m.enumerable=!!m.enumerable,m.configurable=!!m.configurable,("value"in m||m.initializer)&&(m.writable=!0),m=p.slice().reverse().reduce(function(e,t){return t(f,d,e)||e},m),v&&void 0!==m.initializer&&(m.value=m.initializer?m.initializer.call(v):void 0,m.initializer=void 0),void 0===m.initializer&&(Object.defineProperty(f,d,m),m=null),n=m,r);t.default=y,(0,i.default)(y.prototype,c.default)});r(zR);var WR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s(_f),n=s(gb),i=s(AA),a=s(_C),o=s($O);function s(e){return e&&e.__esModule?e:{default:e}}var u=a.default.extend({session:{deferreds:{type:"object",default:function(){return new n.default}},queue:{type:"array",default:function(){return[]}}},derived:{bounce:{fn:function(){var e=this;return(0,cI.cappedDebounce)(function(){return e.executeQueue.apply(e,arguments)},this.config.batcherWait,{maxCalls:this.config.batcherMaxCalls,maxWait:this.config.batcherMaxWait})}}},request:function(e){var t=this,n=new cI.Defer;return this.fingerprintRequest(e).then(function(i){t.deferreds.has(i)?n.resolve(t.deferreds.get(i).promise):(t.deferreds.set(i,n),t.prepareItem(e).then(function(e){n.promise=n.promise.then((0,cI.tap)(function(){return t.deferreds.delete(i)})).catch(function(e){return t.deferreds.delete(i),r.default.reject(e)}),t.enqueue(e).then(function(){return t.bounce()}).catch(function(e){return n.reject(e)})}).catch(function(e){return n.reject(e)}))}).catch(function(e){return n.reject(e)}),n.promise},enqueue:function(e){return this.queue.push(e),r.default.resolve()},prepareItem:function(e){return r.default.resolve(e)},executeQueue:function(){var e=this,t=this.queue.splice(0,this.config.batcherMaxCalls);return new r.default(function(n){n(e.prepareRequest(t).then(function(t){return e.submitHttpRequest(t).then(function(t){return e.handleHttpSuccess(t)})}).catch(function(n){return n instanceof o.default?e.handleHttpError(n):r.default.all(t.map(function(t){return e.getDeferredForRequest(t).then(function(e){e.reject(n)})}))}))}).catch(function(t){return e.logger.error("production"===xu.env.NODE_ENV?t:t.stack),r.default.reject(t)})},prepareRequest:function(e){return r.default.resolve(e)},submitHttpRequest:function(e){throw new Error("request() must be implemented")},handleHttpSuccess:function(e){var t=this;return r.default.all((e.body&&e.body.items||e.body).map(function(e){return t.acceptItem(e)}))},handleHttpError:function(e){var t=this;return e instanceof o.default&&(0,i.default)(e,"options.body.map")?r.default.all(e.options.body.map(function(r){return t.getDeferredForRequest(r).then(function(t){t.reject(e)})})):(this.logger.error("http error handler called without a WebexHttpError object",e),r.default.reject(e))},acceptItem:function(e){var t=this;return this.didItemFail(e).then(function(r){return r?t.handleItemFailure(e):t.handleItemSuccess(e)})},didItemFail:function(e){return r.default.resolve(!1)},handleItemFailure:function(e){return this.getDeferredForResponse(e).then(function(t){t.reject(e)})},handleItemSuccess:function(e){return this.getDeferredForResponse(e).then(function(t){t.resolve(e)})},getDeferredForRequest:function(e){var t=this;return this.fingerprintRequest(e).then(function(e){var r=t.deferreds.get(e);if(!r)throw new Error("Could not find pending request for received response");return r})},getDeferredForResponse:function(e){var t=this;return this.fingerprintResponse(e).then(function(e){var r=t.deferreds.get(e);if(!r)throw new Error("Could not find pending request for received response");return r})},fingerprintRequest:function(e){throw new Error("fingerprintRequest() must be implemented")},fingerprintResponse:function(e){throw new Error("fingerprintResponse() must be implemented")},version:"1.77.8"});t.default=u});r(WR);var YR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(_E),n=o(zy),i=o($y),a=o(gE);function o(e){return e&&e.__esModule?e:{default:e}}var s=new a.default,u=new a.default,c=new a.default,l=function(){function e(t,r){return(0,n.default)(this,e),s.set(this,t.body.items),u.set(this,e.parseLinkHeaders(t.headers.link)),c.set(this,r),this}return(0,i.default)(e,[{key:"items",get:function(){return s.get(this)}},{key:"length",get:function(){return this.items.length}},{key:"links",get:function(){return u.get(this)}},{key:"webex",get:function(){return c.get(this)}}]),(0,i.default)(e,[{key:"next",value:function(){return this.getLink("next")}},{key:"hasNext",value:function(){return this.hasLink("next")}},{key:"previous",value:function(){return this.getLink("previous")}},{key:"hasPrevious",value:function(){return this.hasLink("previous")}},{key:"getLink",value:function(t){var r=this;return this.webex.request({uri:this.links[t]}).then(function(t){return new e(t,r.webex)})}},{key:"hasLink",value:function(e){return Boolean(this.links[e])}},{key:r.default,value:function(){var e=this,t=-1;return{next:function(){return(t+=1)<e.length?{value:e.items[t]}:{done:!0}}}}}],[{key:"parseLinkHeaders",value:function(e){return e?(e=Array.isArray(e)?e:[e]).reduce(function(e,t){var r=(t=t.split(";"))[0].replace("<","").replace(">","");return e[t[1].split("=")[1].replace(/"/g,"")]=r,e},{}):{}}}]),e}();t.default=l});r(YR),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={error:["log"],warn:["error","log"],info:["log"],debug:["info","log"],trace:["debug","info","log"]};function n(e){var t=r[e];if(t)for(t=t.slice();!console[e];)e=t.pop();return function(){for(var t,r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];"test"===xu.env.NODE_ENV&&this.webex&&this.webex.internal.device&&this.webex.internal.device.url&&n.unshift(this.webex.internal.device.url.slice(-3)),(t=console)[e].apply(t,n)}}var i=XR.WebexPlugin.extend({namespace:"Logger",error:n("error"),warn:n("warn"),log:n("log"),info:n("info"),debug:n("debug"),trace:n("trace"),version:"1.77.8"});(0,XR.registerPlugin)("logger",i),t.default=i}));var XR=n(function(e,t){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.Page=t.Batcher=t.RateLimitInterceptor=t.WebexUserAgentInterceptor=t.WebexTrackingIdInterceptor=t.UserAgentInterceptor=t.RequestTimingInterceptor=t.RequestLoggerInterceptor=t.RequestEventInterceptor=t.ResponseLoggerInterceptor=t.RedirectInterceptor=t.PayloadTransformerInterceptor=t.NetworkTimingInterceptor=t.AuthInterceptor=t.WebexPlugin=t.StatelessWebexPlugin=t.WebexHttpError=t.registerInternalPlugin=t.registerPlugin=t.default=t.children=t.waitForValue=t.StorageError=t.persist=t.NotFoundError=t.MemoryStoreAdapter=t.makeWebexPluginStore=t.makeWebexStore=t.Token=t.sortScope=t.grantErrors=t.filterScope=t.Credentials=void 0,Object.defineProperty(t,"Credentials",{enumerable:!0,get:function(){return HR.Credentials}}),Object.defineProperty(t,"filterScope",{enumerable:!0,get:function(){return HR.filterScope}}),Object.defineProperty(t,"grantErrors",{enumerable:!0,get:function(){return HR.grantErrors}}),Object.defineProperty(t,"sortScope",{enumerable:!0,get:function(){return HR.sortScope}}),Object.defineProperty(t,"Token",{enumerable:!0,get:function(){return HR.Token}}),Object.defineProperty(t,"makeWebexStore",{enumerable:!0,get:function(){return bC.makeWebexStore}}),Object.defineProperty(t,"makeWebexPluginStore",{enumerable:!0,get:function(){return bC.makeWebexPluginStore}}),Object.defineProperty(t,"MemoryStoreAdapter",{enumerable:!0,get:function(){return bC.MemoryStoreAdapter}}),Object.defineProperty(t,"NotFoundError",{enumerable:!0,get:function(){return bC.NotFoundError}}),Object.defineProperty(t,"persist",{enumerable:!0,get:function(){return bC.persist}}),Object.defineProperty(t,"StorageError",{enumerable:!0,get:function(){return bC.StorageError}}),Object.defineProperty(t,"waitForValue",{enumerable:!0,get:function(){return bC.waitForValue}}),Object.defineProperty(t,"children",{enumerable:!0,get:function(){return KR.children}}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(KR).default}}),Object.defineProperty(t,"registerPlugin",{enumerable:!0,get:function(){return KR.registerPlugin}}),Object.defineProperty(t,"registerInternalPlugin",{enumerable:!0,get:function(){return KR.registerInternalPlugin}}),Object.defineProperty(t,"WebexHttpError",{enumerable:!0,get:function(){return r($O).default}}),Object.defineProperty(t,"StatelessWebexPlugin",{enumerable:!0,get:function(){return r(zR).default}}),Object.defineProperty(t,"WebexPlugin",{enumerable:!0,get:function(){return r(_C).default}}),Object.defineProperty(t,"AuthInterceptor",{enumerable:!0,get:function(){return r(CR).default}}),Object.defineProperty(t,"NetworkTimingInterceptor",{enumerable:!0,get:function(){return r(xR).default}}),Object.defineProperty(t,"PayloadTransformerInterceptor",{enumerable:!0,get:function(){return r(OR).default}}),Object.defineProperty(t,"RedirectInterceptor",{enumerable:!0,get:function(){return r(RR).default}}),Object.defineProperty(t,"ResponseLoggerInterceptor",{enumerable:!0,get:function(){return r(MR).default}}),Object.defineProperty(t,"RequestEventInterceptor",{enumerable:!0,get:function(){return r(NR).default}}),Object.defineProperty(t,"RequestLoggerInterceptor",{enumerable:!0,get:function(){return r(kR).default}}),Object.defineProperty(t,"RequestTimingInterceptor",{enumerable:!0,get:function(){return r(PR).default}}),Object.defineProperty(t,"UserAgentInterceptor",{enumerable:!0,get:function(){return r(DR).default}}),Object.defineProperty(t,"WebexTrackingIdInterceptor",{enumerable:!0,get:function(){return r(LR).default}}),Object.defineProperty(t,"WebexUserAgentInterceptor",{enumerable:!0,get:function(){return r(UR).default}}),Object.defineProperty(t,"RateLimitInterceptor",{enumerable:!0,get:function(){return r(jR).default}}),Object.defineProperty(t,"Batcher",{enumerable:!0,get:function(){return r(WR).default}}),Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return r(YR).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return r(BR).default}})});r(XR);XR.config,XR.Page,XR.Batcher,XR.RateLimitInterceptor,XR.WebexUserAgentInterceptor,XR.WebexTrackingIdInterceptor,XR.UserAgentInterceptor,XR.RequestTimingInterceptor,XR.RequestLoggerInterceptor,XR.RequestEventInterceptor,XR.ResponseLoggerInterceptor,XR.RedirectInterceptor,XR.PayloadTransformerInterceptor,XR.NetworkTimingInterceptor,XR.AuthInterceptor,XR.WebexPlugin,XR.StatelessWebexPlugin,XR.WebexHttpError,XR.registerInternalPlugin,XR.registerPlugin,XR.children,XR.waitForValue,XR.StorageError,XR.persist,XR.NotFoundError,XR.MemoryStoreAdapter,XR.makeWebexPluginStore,XR.makeWebexStore,XR.Token,XR.sortScope,XR.grantErrors,XR.filterScope,XR.Credentials;var $R=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,a=g(uc),o=g(fc),s=g(_f),u=g(Af),c=g(Rf),l=g(Pf),f=g(fm),d=g(vm),p=g(ym),h=g(Am),v=g(_y),m=g(AR);function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E=cI.base64.encode((0,l.default)({})),b=XR.WebexPlugin.extend((r=(0,cI.whileInFlight)("isAuthorizing"),n=(0,cI.whileInFlight)("isAuthorizing"),y(i={derived:{isAuthenticating:{deps:["isAuthorizing"],fn:function(){return this.isAuthorizing}}},session:{isAuthorizing:{default:!1,type:"boolean"},ready:{default:!1,type:"boolean"}},namespace:"Credentials",initialize:function(e,t){var r=this,n=(0,c.default)(XR.WebexPlugin.prototype.initialize,this,[e,t]);if(!1===e.parse)return this.ready=!0,n;var i=v.default.parse(this.webex.getWindow().location.href,!0);this._checkForErrors(i);var a=i.hash;if(!a)return this.ready=!0,n;a.includes("#")&&(a=a.substr(1)),i.hash=h.default.parse(a),i.hash.state&&(i.hash.state=JSON.parse(cI.base64.decode(i.hash.state)));var o=this._parseHash(i);return o?(this._cleanUrl(i),vu(function(){r.webex.credentials.set({supertoken:o}),r.ready=!0}),n):n},initiateLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.state=e.state||{},e.state.csrf_token=this._generateSecurityToken(),"confidential"===this.config.clientType?this.initiateAuthorizationCodeGrant(e):this.initiateImplicitGrant(e)},initiateImplicitGrant:function(e){return this.logger.info("authorization: initiating implicit grant flow"),this.webex.getWindow().location=this.webex.credentials.buildLoginUrl((0,u.default)({response_type:"token"},e)),s.default.resolve()},initiateAuthorizationCodeGrant:function(e){return this.logger.info("authorization: initiating authorization code grant flow"),this.webex.getWindow().location=this.webex.credentials.buildLoginUrl((0,u.default)({response_type:"code"},e)),s.default.resolve()},requestAccessTokenFromJwt:function(e){var t=this,r=e.jwt;return this.webex.request({method:"POST",service:"hydra",resource:"jwt/login",headers:{authorization:r}}).then(function(e){var t=e.body;return{access_token:t.token,token_type:"Bearer",expires_in:t.expiresIn}}).then(function(e){t.webex.credentials.set({supertoken:e})})},logout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.noRedirect||(this.webex.getWindow().location=this.webex.credentials.buildLogoutUrl(e))},_checkForErrors:function(e){var t=e.query;if(t&&t.error)throw new(XR.grantErrors.select(t.error))(t)},_cleanUrl:function(e){e=(0,p.default)(e),this.webex.getWindow().history&&this.webex.getWindow().history.replaceState&&(["access_token","token_type","expires_in","refresh_token","refresh_token_expires_in"].forEach(function(t){return(0,o.default)(e.hash,t)}),(0,d.default)(e.hash.state)?(0,o.default)(e.hash,"state"):(e.hash.state=cI.base64.encode((0,l.default)((0,f.default)(e.hash.state,"csrf_token"))),e.hash.state===E&&(0,o.default)(e.hash,"state")),e.hash=h.default.stringify(e.hash),this.webex.getWindow().history.replaceState({},null,v.default.format(e)))},_generateSecurityToken:function(){this.logger.info("authorization: generating csrf token");var e=m.default.v4();return this.webex.getWindow().sessionStorage.setItem("oauth2-csrf-token",e),e},_parseHash:function(e){var t=(0,p.default)(e.hash);if(t&&this._verifySecurityToken(t),t.access_token)return t.expires_in&&(t.expires_in=parseInt(t.expires_in,10)),t.refresh_token_expires_in&&(t.refresh_token_expires_in=parseInt(t.refresh_token_expires_in,10)),t;this.ready=!0},_verifySecurityToken:function(e){var t=this.webex.getWindow().sessionStorage.getItem("oauth2-csrf-token");if(this.webex.getWindow().sessionStorage.removeItem("oauth2-csrf-token"),t){if(!e.state)throw new Error("Expected CSRF token "+t+", but not found in redirect hash");if(!e.state.csrf_token)throw new Error("Expected CSRF token "+t+", but not found in redirect hash");var r=e.state.csrf_token;if(r!==t)throw new Error("CSRF token "+r+" does not match stored token "+t)}},version:"1.77.8"},"initiateImplicitGrant",[r],(0,a.default)(i,"initiateImplicitGrant"),i),y(i,"initiateAuthorizationCodeGrant",[n],(0,a.default)(i,"initiateAuthorizationCodeGrant"),i),y(i,"requestAccessTokenFromJwt",[cI.oneFlight],(0,a.default)(i,"requestAccessTokenFromJwt"),i),i));t.default=b});r($R);var QR=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={credentials:{clientType:"public"}}});r(QR);var JR=1,ZR=2;var eN=function(e,t,r,n){var i=r.length,a=i,o=!n;if(null==e)return!a;for(e=Object(e);i--;){var s=r[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var u=(s=r[i])[0],c=e[u],l=s[1];if(o&&s[2]){if(void 0===c&&!(u in e))return!1}else{var f=new rp;if(n)var d=n(c,l,u,e,t,f);if(!(void 0===d?_A(l,c,JR|ZR,n,f):d))return!1}}return!0};var tN=function(e){return e==e&&!ld(e)};var rN=function(e){for(var t=Bp(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,tN(i)]}return t};var nN=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}};var iN=function(e){var t=rN(e);return 1==t.length&&t[0][2]?nN(t[0][0],t[0][1]):function(r){return r===e||eN(r,e,t)}},aN=1,oN=2;var sN=function(e,t){return bv(e)&&tN(t)?nN(Lv(e),t):function(r){var n=hR(r,e);return void 0===n&&n===t?LC(r,e):_A(t,n,aN|oN)}};var uN=function(e){return function(t){return null==t?void 0:t[e]}};var cN=function(e){return function(t){return Uv(t,e)}};var lN=function(e){return bv(e)?uN(Lv(e)):cN(e)};var fN=function(e){return"function"==typeof e?e:null==e?nm:"object"==typeof e?gp(e)?sN(e[0],e[1]):iN(e):lN(e)};var dN=function(e){return function(t,r,n){var i=Object(t);if(!Fp(t)){var a=fN(r,3);t=Bp(t),r=function(e){return a(i[e],e,i)}}var o=e(t,r,n);return o>-1?i[a?t[o]:o]:void 0}},pN=Math.max;var hN=dN(function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:W_(r);return i<0&&(i=pN(n+i,0)),Jb(e,fN(t,3),i)}),vN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s(KC),n=s(Rf),i=s(ld),a=s(_S),o=s(rC);function s(e){return e&&e.__esModule?e:{default:e}}var u=o.default.extend({props:{key:"string",lastModified:"date",mutable:"boolean",type:"string",val:"string",value:"any"},constructor:function(e,t){return t=t||{},(0,a.default)(t,{parse:!0}),(0,n.default)(o.default.prototype.constructor,this,[e,t])},idAttribute:"key",parse:function(e){if(!e)return{};var t=Number(e.val);return e.val&&!(0,r.default)(t)?(e.value=t,e.type="number"):"true"===e.val?(e.value=!0,e.type="boolean"):"false"===e.val?(e.value=!1,e.type="boolean"):(e.value=e.val,e.type="string"),e},serialize:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=(0,n.default)(o.default.prototype.serialize,this,t);return i.lastModified&&(i.lastModified=new Date(i.lastModified).toISOString()),i},set:function(e,t,r){var a=void 0;return(0,i.default)(e)||null===e?(a=e,r=t):(a={})[e]=t,a=this.parse(a,r),(0,n.default)(o.default.prototype.set,this,[a,r])}});t.default=u});r(vN);var mN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(nR),n=i(vN);function i(e){return e&&e.__esModule?e:{default:e}}var a=r.default.extend({mainIndex:"key",model:n.default});t.default=a});r(mN);var gN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(fI),n=a(rC),i=a(mN);function a(e){return e&&e.__esModule?e:{default:e}}var o=n.default.extend({collections:{developer:i.default,entitlement:i.default,user:i.default},clear:function(e){var t=this;return(0,r.default)(this.attributes).forEach(function(r){t.unset(r,e)}),(0,r.default)(this._children).forEach(function(e){t[e].clear()}),(0,r.default)(this._collections).forEach(function(e){t[e].reset()}),this},initialize:function(){var e=this;["change:value","add","remove"].forEach(function(t){["developer","entitlement","user"].forEach(function(r){e[r].on(t,function(t,n){e.trigger("change:"+r,e,e[r],n)})})})}});t.default=o});r(gN);var yN=function(e,t){var r;return UA(e,function(e,n,i){return!(r=t(e,n,i))}),!!r};var EN=function(e,t,r){var n=gp(e)?qI:yN;return r&&yS(e,t,r)&&(t=void 0),n(e,fN(t,3))},bN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=l(_f),n=l(Rf),i=l(hN),a=l(EN),o=l(ld),s=l(_S),u=l(rC),c=l(_y);function l(e){return e&&e.__esModule?e:{default:e}}var f=u.default.extend({props:{service:"string",defaultUrl:"string",availableHosts:{type:"array",default:function(){return[]}}},session:{currentHostIndex:{type:"number",default:0}},derived:{url:{deps:["defaultUrl","availableHosts","currentHostIndex"],fn:function(){if(0===this.availableHosts.length)return this.defaultUrl;var e=void 0;return e=this.currentHostIndex>=this.availableHosts.length?this.availableHosts[this.availableHosts.length-1]:this.availableHosts[this.currentHostIndex],this._changeUrlHost(this.defaultUrl,e.host)}}},constructor:function(e,t){return t=t||{},(0,s.default)(t,{parse:!0}),(0,n.default)(u.default.prototype.constructor,this,[e,t])},idAttribute:"service",serialize:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=(0,n.default)(u.default.prototype.serialize,this,t);return i.url=this.url,i},parse:function(e){return e?(e.availableHosts&&e.availableHosts.sort(function(e,t){return e.priority-t.priority}),e):{}},set:function(e,t,r){var i=void 0;return(0,o.default)(e)||null===e?(i=e,r=t):(i={})[e]=t,i=this.parse(i,r),(0,n.default)(u.default.prototype.set,this,[i,r])},markHostFailed:function(e){var t=this.getCurrentHost();if(e){var r=c.default.parse(e);t=(0,i.default)(this.availableHosts,function(e){return e.host===r.host})}t&&(t.failed=!0)},cycleNextHost:function(){for(var e=0;e<this.availableHosts.length;e+=1){var t=this.availableHosts[e];if(!t.failed&&this.currentHostIndex!==e)return this.currentHostIndex=e,r.default.resolve(t)}return this.currentHostIndex=0,r.default.reject(new Error("All hosts have failed for "+this.service))},doesUrlBelongToService:function(e){var t=c.default.parse(e),r=this.availableHosts.map(function(e){return e.host});return r.push(c.default.parse(this.defaultUrl).host),(0,a.default)(r,function(e){return e===t.host})},getCurrentHost:function(){return this.availableHosts[this.currentHostIndex]},resetAllHosts:function(){this.availableHosts.forEach(function(e){e.failed=!1})},replaceUrlWithCurrentHost:function(e){return this._changeUrlHost(e,this.getCurrentHost().host)},_changeUrlHost:function(e,t){var r=c.default.parse(e);return r.host=t,c.default.format(r)}});t.default=f});r(bN);var _N=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(_f),n=a(nR),i=a(bN);function a(e){return e&&e.__esModule?e:{default:e}}var o=n.default.extend({mainIndex:"service",model:i.default,markFailedAndCycleUrl:function(e){return e?this.inferServiceFromUrl(e).then(function(t){return t.markHostFailed(e),t.cycleNextHost().then(function(){return t.url})}):r.default.reject(new Error("`uri` is a required parameter"))},resetAllAndRetry:function(e){return e?this.inferServiceFromUrl(e).then(function(e){return e.resetAllHosts(),e.url}):r.default.reject(new Error("`uri` is a required parameter"))},inferServiceFromUrl:function(e){var t=this.filter(function(t){return t.doesUrlBelongToService(e)});return t.length>=1?r.default.resolve(t[0]):r.default.reject(new Error("Unable to infer service for this url "+e))},inferServiceNameFromUrl:function(e){return this.inferServiceFromUrl(e).then(function(e){return e.service})}});t.default=o});r(_N);var SN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,a,o,s,u,c,l,f,d=w(uc),p=w(ZC),h=w(Rf),v=w(_f),m=w(fI),g=w(NC),y=w(hN),E=w(fm),b=w(by),_=w(gN),S=w(_N),T=w(_y);function w(e){return e&&e.__esModule?e:{default:e}}function I(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var A=XR.WebexPlugin.extend((r=(0,XR.waitForValue)("@"),n=(0,XR.waitForValue)("@"),i=(0,XR.persist)("@",function(){return!this.config.ephemeral}),a=(0,XR.waitForValue)("@"),o=(0,XR.waitForValue)("@"),s=(0,XR.waitForValue)("@"),u=(0,XR.waitForValue)("@"),c=(0,XR.waitForValue)("@"),l=(0,XR.waitForValue)("@"),I(f={children:{features:_.default},collections:{serviceCatalog:S.default},idAttribute:"url",namespace:"Device",props:{clientMessagingGiphy:"string",customerCompanyName:"string",customerLogoUrl:"string",deviceType:"string",helpUrl:"string",intranetInactivityDuration:"number",intranetInactivityCheckUrl:"string",inNetworkInactivityDuration:"number",ecmEnabledForAllUsers:{type:"boolean",default:function(){return!1}},ecmSupportedStorageProviders:{type:"array",default:function(){return[]}},modificationTime:"string",partnerCompanyName:"string",partnerLogoUrl:"string",peopleInsightsEnabled:"boolean",reportingSiteDesc:"string",reportingSiteUrl:"string",searchEncryptionKeyUrl:"string",services:{default:function(){return{}},type:"object"},serviceHostMap:{default:function(){return{serviceLinks:{},hostCatalog:{}}},type:"object"},showSupportText:"boolean",supportProviderCompanyName:"string",supportProviderLogoUrl:"string",url:"string",userId:"string",webFileShareControl:"string",webSocketUrl:"string",whiteboardFileShareControl:"string"},derived:{registered:{deps:["url"],fn:function(){return Boolean(this.url)}}},session:{logoutTimer:"any",lastUserActivityDate:"number",isReachabilityChecked:"boolean",isInMeeting:"boolean",isInNetwork:"boolean"},determineService:function(e){var t=this.features.developer.get("web-high-availability");if(t&&t.value){var r=!0,n=!1,i=void 0;try{for(var a,o=(0,g.default)((0,m.default)(this.serviceHostMap.serviceLinks));!(r=(a=o.next()).done);r=!0){var s=a.value,u=this.serviceHostMap.serviceLinks[s];if(e.startsWith(u))return v.default.resolve(s)}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}}else{var c=!0,l=!1,f=void 0;try{for(var d,p=(0,g.default)((0,m.default)(this.services));!(c=(d=p.next()).done);c=!0){var h=d.value,y=this.services[h];if(e.startsWith(y))return v.default.resolve(h.substr(0,h.length-10))}}catch(e){l=!0,f=e}finally{try{!c&&p.return&&p.return()}finally{if(l)throw f}}}return v.default.reject(new Error(e+" does not reflect a known service"))},getServiceUrl:function(e){var t=this,r=this.features.developer.get("web-high-availability");return r&&r.value?this._getServiceUrl(this.serviceHostMap.serviceLinks,e).then(function(r){return r||t.getPreDiscoveryServiceUrl(e)}):this._getServiceUrl(this.services,e).then(function(r){return r||t.getPreDiscoveryServiceUrl(e)})},getPreDiscoveryServiceUrl:function(e){return v.default.resolve(this._getServiceUrl(this.config.preDiscoveryServices,e))},getWebSocketUrl:function(){return this.useServiceCatalogUrl(this.webSocketUrl)},useServiceCatalogUrl:function(e){return this.serviceCatalog.inferServiceFromUrl(e).then(function(t){return t.replaceUrlWithCurrentHost(e)})},markUrlFailedAndGetNew:function(e){var t=this;return e?(this.logger.info("device: marking "+e+" as failed"),this.serviceCatalog.markFailedAndCycleUrl(e).then(function(r){return t.webex.internal.metrics.submitClientMetrics("web-ha",{tags:{action:"replace_url",failedUrl:e,newUrl:r}}),r}).catch(function(){return t._resetAllAndRetry(e)})):v.default.reject(new Error("`url` is a required parameter"))},_resetAllAndRetry:function(e){return e?(this.logger.info("device: reset available hosts and retry "+e),this.serviceCatalog.resetAllAndRetry(e)):v.default.reject(new Error("`url` is a required parameter"))},fetchNewUrls:function(e){var t=this;return new v.default(function(r){return t.serviceCatalog.inferServiceFromUrl(e).then(function(e){t.logger.info("device: refresh to "+e.service+" get new urls"),t.refresh(),t.on("serviceCatalogUpdated",function(){return r(e.url)})})})},initialize:function(){for(var e=this,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];(0,h.default)(XR.WebexPlugin.prototype.initialize,this,r),["developer","entitlement","user"].forEach(function(t){e.features.on("change:"+t,function(t,r,n){e.trigger("change",e,n),e.trigger("change:features",e,e.features,n)})}),this.isReachabilityChecked=!1,this.on("change:serviceHostMap",this._updateServiceCatalog),this.listenToAndRun(this,"change:intranetInactivityCheckUrl",function(){e.testNetworkReachability()}),this.listenToAndRun(this,"change:intranetInactivityDuration",function(){e.testNetworkReachability()}),this.listenToAndRun(this,"change:inNetworkInactivityDuration",function(){e.testNetworkReachability()}),this.listenTo(this.webex,"user-activity",function(){e.lastUserActivityDate=Date.now()}),this.listenTo(this.webex,"meeting started",function(){e.isInMeeting=!0,e._resetLogoutTimer()}),this.listenTo(this.webex,"meeting ended",function(){e.isInMeeting=!1,e._resetLogoutTimer()})},inspect:function(e){return b.default.inspect((0,E.default)(this.serialize(),"features"),{depth:e})},isPreDiscoveryService:function(e){return v.default.resolve(this._isService(this.config.preDiscoveryServices,e))},meetingStarted:function(){this.webex.trigger("meeting started")},meetingEnded:function(){this.webex.trigger("meeting ended")},testNetworkReachability:function(){var e=this;return this.isReachabilityChecked?this._resetLogoutTimer():this.intranetInactivityCheckUrl?(this.isReachabilityChecked=!0,this.webex.request({headers:{"cisco-no-http-redirect":null,"spark-user-agent":null,trackingid:null},method:"GET",uri:this.intranetInactivityCheckUrl}).then(function(){return e.isInNetwork=!0,e._resetLogoutTimer()}).catch(function(){return e.logger.info("device: did not reach internal ping endpoint; Setting off-network timer"),e.isInNetwork=!1,e._resetLogoutTimer()}),!0):(this.isInNetwork=!1,this._resetLogoutTimer())},isPreDiscoveryServiceUrl:function(e){return e?v.default.resolve(this._isServiceUrl(this.config.preDiscoveryServices,e)):v.default.reject(new Error("`uri` is a required parameter"))},isService:function(e){var t=this;if("idbroker"===e)return v.default.resolve(!1);var r=this.features.developer.get("web-high-availability");return r&&r.value?this._isService(this.serviceHostMap.serviceLinks,e).then(function(r){return r||t.isPreDiscoveryService(e)}):this._isService(this.services,e).then(function(r){return r||t.isPreDiscoveryService(e)})},isServiceUrl:function(e){if(!e)return v.default.reject(new Error("`uri` is a required parameter"));var t=this.features.developer.get("web-high-availability");return t&&t.value?this._isServiceUrl(this.serviceHostMap.serviceLinks,e)||this._isServiceUrlFromCatalog(this.serviceHostMap.hostCatalog,e)?v.default.resolve(!0):v.default.resolve(!1):v.default.resolve(this._isServiceUrl(this.services,e))},isSpecificService:function(e,t){return t===e?v.default.resolve(!0):this.getServiceUrl(e).then(function(e){return t.includes(e)})},_getServiceUrl:function(e,t){if(!t)return v.default.reject(new Error("`service` is a required parameter"));var r=this.features.developer.get("web-high-availability");if(r&&r.value){var n=this.serviceCatalog.get(t);if(n)return v.default.resolve(n.url)}return e?v.default.resolve(e[t+"ServiceUrl"]):v.default.reject(new Error("`target` is a required parameter"))},_isService:function(e,t){return this._getServiceUrl(e,t).then(function(e){return Boolean(e)})},_isServiceUrl:function(e,t){var r=this.features.developer.get("web-high-availability");if(r&&r.value){var n=!0,i=!1,a=void 0;try{for(var o,s=(0,g.default)((0,m.default)(e));!(n=(o=s.next()).done);n=!0){var u=o.value,c=e[u];if("idbroker"!==u&&t.startsWith(c))return!0}}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}}else{var l=!0,f=!1,d=void 0;try{for(var h,y=(0,g.default)((0,p.default)(e));!(l=(h=y.next()).done);l=!0){var E=h.value;if(E&&t.startsWith(E))return v.default.resolve(!0)}}catch(e){f=!0,d=e}finally{try{!l&&y.return&&y.return()}finally{if(f)throw d}}}return!1},_isServiceUrlFromCatalog:function(e,t){var r=T.default.parse(t).hostname;return!(!r||r.includes("idbroker")||!(0,y.default)(e,function(e){return(0,y.default)(e,function(e){return e.host===r})}))},refresh:function(){var e=this;if(this.logger.info("device: refreshing"),!this.registered)return this.logger.info("device: device not registered, registering"),this.register();var t=(0,E.default)(this.serialize(),"features","mediaClusters");return this.config.ephemeral&&(t.ttl=this.config.ephemeralDeviceTTL),this.request({method:"PUT",uri:this.url,body:t}).then(function(t){return e._processRegistrationSuccess(t)}).catch(function(t){return 404===t.statusCode?(e.logger.info("device: refresh failed with 404, attempting to register new device"),e.clear(),e.register()):v.default.reject(t)})},register:function(){var e=this;if(this.logger.info("device: registering"),this.registered)return this.logger.info("device: device already registered, refreshing"),this.refresh();var t=this.config.defaults;return this.config.ephemeral&&(t.ttl=this.config.ephemeralDeviceTTL),this.request({method:"POST",service:"wdm",resource:"devices",body:t}).then(function(t){return e._processRegistrationSuccess(t)})},unregister:function(){var e=this;return this.logger.info("device: unregistering"),this.url?this.request({uri:this.url,method:"DELETE"}).then(function(){return e.clear()}):(this.logger.warn("device: not registered"),v.default.resolve())},clear:function(){clearTimeout(this.refreshTimer);for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];(0,h.default)(XR.WebexPlugin.prototype.clear,this,t)},_processRegistrationSuccess:function(e){var t=this;if(this.logger.info("device: received registration payload"),this.set(e.body),this.config.ephemeral){this.logger.info("device: enqueing device refresh");var r=1e3*(this.config.ephemeralDeviceTTL/2+60);this.refreshTimer=(0,hI.safeSetTimeout)(function(){return t.refresh()},r)}},_updateServiceCatalog:function(e){var t=this,r=this.features.developer.get("web-high-availability");r&&r.value&&(e.serviceHostMap&&e.serviceHostMap.serviceLinks&&e.serviceHostMap.hostCatalog?((0,m.default)(e.serviceHostMap.serviceLinks).forEach(function(r){var n=T.default.parse(e.serviceHostMap.serviceLinks[r]).hostname,i=e.serviceHostMap.hostCatalog[n];t.serviceCatalog.set({service:r,defaultUrl:e.serviceHostMap.serviceLinks[r],availableHosts:i||[]},{remove:!1})}),this.trigger("serviceCatalogUpdated")):this.refresh())},_resetLogoutTimer:function(){clearTimeout(this.logoutTimer),this.off("change:lastUserActivityDate"),this.unset("logoutTimer"),!this.isInMeeting&&this.config.enableInactivityEnforcement&&this.isReachabilityChecked&&(this.isInNetwork?this._setLogoutTimer(this.inNetworkInactivityDuration):this._setLogoutTimer(this.intranetInactivityDuration))},_setLogoutTimer:function(e){var t=this;if(e&&(!e||-1!==e)){this.on("change:lastUserActivityDate",function(){t._resetLogoutTimer()});var r=(0,hI.safeSetTimeout)(function(){t.webex.logout()},1e3*e);this.logoutTimer=r}},version:"1.77.8"},"determineService",[r],(0,d.default)(f,"determineService"),f),I(f,"getServiceUrl",[n],(0,d.default)(f,"getServiceUrl"),f),I(f,"initialize",[i],(0,d.default)(f,"initialize"),f),I(f,"isService",[a],(0,d.default)(f,"isService"),f),I(f,"isServiceUrl",[o],(0,d.default)(f,"isServiceUrl"),f),I(f,"isSpecificService",[s],(0,d.default)(f,"isSpecificService"),f),I(f,"refresh",[cI.oneFlight,u],(0,d.default)(f,"refresh"),f),I(f,"register",[cI.oneFlight,c],(0,d.default)(f,"register"),f),I(f,"unregister",[cI.oneFlight,l],(0,d.default)(f,"unregister"),f),f));t.default=A});r(SN);var TN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=SN,e&&e.__esModule?e:{default:e}).default;var e}})});r(TN);var wN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(_f),n=u(hT),i=u(zy),a=u($y),o=u(vT),s=u(mT);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onResponseError",value:function(e,t){return 451===t.statusCode&&(this.webex.internal.device.clear(),this.webex.credentials.clear(),this.webex.logger.info("Received `HTTP 451 Unavailable For Legal Reasons`, discarding credentials and device registration")),r.default.reject(t)}}],[{key:"create",value:function(){return new t({webex:this})}}]),t}(XO.Interceptor);t.default=c});r(wN);var IN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(fc),n=l(Af),i=l(_f),a=l(hT),o=l(zy),s=l($y),u=l(vT),c=l(mT);function l(e){return e&&e.__esModule?e:{default:e}}var f=/(?:^\/)|(?:\/$)/,d=function(e){function t(){return(0,o.default)(this,t),(0,u.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"onRequest",value:function(e){return e.uri?e:(this.checkOptions(e),this.normalizeOptions(e),this.webex.internal.device.getServiceUrl(e.service).then(function(t){return t?(e.resource&&(t=t.replace(f,"")+"/"+e.resource.replace(f,"")),e.uri=t,e):i.default.reject(new Error("`"+e.service+"` is not a known service"))}))}},{key:"checkOptions",value:function(e){if(!e.api&&!e.service)throw new Error("A `service` or `uri` parameter is required");if(!e.resource)throw new Error("A `resource` parameter is required")}},{key:"normalizeOptions",value:function(e){e.service||((0,n.default)(e,{service:e.service||e.api}),(0,r.default)(e,"api"))}}],[{key:"create",value:function(){return new t({webex:this})}}]),t}(XO.Interceptor);t.default=d});r(IN);var AN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(_f),n=c(hT),i=c(zy),a=c($y),o=c(vT),s=c(mT),u=c(sR);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){var t=this;return!this.webex.internal.device.url||e.headers&&"cisco-device-url"in e.headers&&!e.headers["cisco-device-url"]?r.default.resolve(e):r.default.resolve(e.service||this.webex.internal.device.determineService(e.uri)).then(function(r){return r&&"oauth"!==r&&"saml"!==r&&"idbroker"!==r&&(0,u.default)(e,"headers['cisco-device-url']",t.webex.internal.device.url),e}).catch(function(t){if(t.message.match(/does not reflect a known service/))return e;throw t})}}],[{key:"create",value:function(){return new t({webex:this})}}]),t}(XO.Interceptor);t.default=l});r(AN);var CN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(_f),n=u(hT),i=u(zy),a=u($y),o=u(vT),s=u(mT);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onResponseError",value:function(e,t){if(t instanceof XR.WebexHttpError.InternalServerError&&e.uri){var n=this.webex.internal.device.features.developer.get("web-high-availability");if(n&&n.value)return this.webex.internal.metrics.submitClientMetrics("web-ha",{fields:{success:!1},tags:{action:"failed",error:t.message,url:e.uri}}),this.webex.internal.device.markUrlFailedAndGetNew(e.uri).then(function(){return r.default.reject(t)})}return r.default.reject(t)}}],[{key:"create",value:function(){return new t({webex:this})}}]),t}(XO.Interceptor);t.default=c});r(CN);var xN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={device:{preDiscoveryServices:{wdmServiceUrl:xu.env.WDM_SERVICE_URL||"https://wdm-a.wbx2.com/wdm/api/v1",u2cServiceUrl:xu.env.U2C_SERVICE_URL||"https://u2c.wbx2.com/u2c/api/v1",hydraServiceUrl:xu.env.HYDRA_SERVICE_URL||"https://api.ciscospark.com/v1",wdm:xu.env.WDM_SERVICE_URL||"https://wdm-a.wbx2.com/wdm/api/v1",u2c:xu.env.U2C_SERVICE_URL||"https://u2c.wbx2.com/u2c/api/v1",hydra:xu.env.HYDRA_SERVICE_URL||"https://api.ciscospark.com/v1"},defaults:{name:("string"==typeof xu.title?xu.title.trim():void 0)||cI.inBrowser&&"browser"||"javascript",deviceType:"WEB",model:"web-js-sdk",localizedModel:"webex-js-sdk",systemName:"WEBEX_JS_SDK",systemVersion:"1.0.0"},enableInactivityEnforcement:!1,ephemeral:!1,ephemeralDeviceTTL:1800}}});r(xN);var ON=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.ServerErrorInterceptor=t.DeviceUrlInterceptor=t.UrlInterceptor=t.EmbargoInterceptor=t.ServiceModel=t.ServiceCollection=t.FeatureModel=t.FeatureCollection=t.FeaturesModel=t.Device=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u(TN).default}}),Object.defineProperty(t,"Device",{enumerable:!0,get:function(){return u(TN).default}}),Object.defineProperty(t,"FeaturesModel",{enumerable:!0,get:function(){return u(gN).default}}),Object.defineProperty(t,"FeatureCollection",{enumerable:!0,get:function(){return u(mN).default}}),Object.defineProperty(t,"FeatureModel",{enumerable:!0,get:function(){return u(vN).default}}),Object.defineProperty(t,"ServiceCollection",{enumerable:!0,get:function(){return u(_N).default}}),Object.defineProperty(t,"ServiceModel",{enumerable:!0,get:function(){return u(bN).default}}),Object.defineProperty(t,"EmbargoInterceptor",{enumerable:!0,get:function(){return u(wN).default}}),Object.defineProperty(t,"UrlInterceptor",{enumerable:!0,get:function(){return u(IN).default}}),Object.defineProperty(t,"DeviceUrlInterceptor",{enumerable:!0,get:function(){return u(AN).default}}),Object.defineProperty(t,"ServerErrorInterceptor",{enumerable:!0,get:function(){return u(CN).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return u(xN).default}});var r=u(TN),n=u(xN),i=u(IN),a=u(AN),o=u(wN),s=u(CN);function u(e){return e&&e.__esModule?e:{default:e}}(0,XR.registerInternalPlugin)("device",r.default,{interceptors:{UrlInterceptor:i.default.create,DeviceUrlInterceptor:a.default.create,EmbargoInterceptor:o.default.create,ServerErrorInterceptor:s.default.create},config:n.default,onBeforeLogout:function(){return this.unregister()}})});r(ON);ON.config,ON.ServerErrorInterceptor,ON.DeviceUrlInterceptor,ON.UrlInterceptor,ON.EmbargoInterceptor,ON.ServiceModel,ON.ServiceCollection,ON.FeatureModel,ON.FeatureCollection,ON.FeaturesModel,ON.Device;var RN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i($R).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return i(QR).default}});var r=i($R),n=i(QR);function i(e){return e&&e.__esModule?e:{default:e}}(0,XR.registerPlugin)("authorization",r.default,{config:n.default,proxies:["isAuthorizing","isAuthenticating"]})});r(RN);RN.config;r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=RN,e&&e.__esModule?e:{default:e}).default;var e}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return RN.config}})}));var NN=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=XR.WebexPlugin.extend({namespace:"Calendar",processMeetingEvent:function(e){return this.webex.transform("inbound",e).then(function(){return e})},list:function(e){return e=e||{},this.webex.request({method:"GET",service:"calendar",resource:"calendarEvents",qs:e}).then(function(e){return e.body.items})},version:"1.77.8"});t.default=r});r(NN);var kN=n(function(t,r){t.exports=function(){function t(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,i=void 0,a=void 0,o=function(e,t){p[n]=e,p[n+1]=t,2===(n+=2)&&(a?a(h):E())},s="undefined"!=typeof window?window:void 0,u=s||{},c=u.MutationObserver||u.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==xu&&"[object process]"==={}.toString.call(xu),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var e=setTimeout;return function(){return e(h,1)}}var p=new Array(1e3);function h(){for(var e=0;e<n;e+=2){var t=p[e],r=p[e+1];t(r),p[e]=void 0,p[e+1]=void 0}n=0}var v,m,g,y,E=void 0;function b(e,t){var r=this,n=new this.constructor(T);void 0===n[S]&&L(n);var i=r._state;if(i){var a=arguments[i-1];o(function(){return M(i,n,a,r._result)})}else k(r,n,e,t);return n}function _(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(T);return x(t,e),t}l?E=function(){return vu(h)}:c?(m=0,g=new c(h),y=document.createTextNode(""),g.observe(y,{characterData:!0}),E=function(){y.data=m=++m%2}):f?((v=new MessageChannel).port1.onmessage=h,E=function(){return v.port2.postMessage(0)}):E=void 0===s?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(h)}:d()}catch(e){return d()}}():d();var S=Math.random().toString(36).substring(2);function T(){}var w=void 0,I=1,A=2;function C(e,r,n){r.constructor===e.constructor&&n===b&&r.constructor.resolve===_?function(e,t){t._state===I?R(e,t._result):t._state===A?N(e,t._result):k(t,void 0,function(t){return x(e,t)},function(t){return N(e,t)})}(e,r):void 0===n?R(e,r):t(n)?function(e,t,r){o(function(e){var n=!1,i=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(r,t,function(r){n||(n=!0,t!==r?x(e,r):R(e,r))},function(t){n||(n=!0,N(e,t))},e._label);!n&&i&&(n=!0,N(e,i))},e)}(e,r,n):R(e,r)}function x(e,t){if(e===t)N(e,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(n=t),null===n||"object"!==i&&"function"!==i)R(e,t);else{var r=void 0;try{r=t.then}catch(t){return void N(e,t)}C(e,t,r)}var n,i}function O(e){e._onerror&&e._onerror(e._result),P(e)}function R(e,t){e._state===w&&(e._result=t,e._state=I,0!==e._subscribers.length&&o(P,e))}function N(e,t){e._state===w&&(e._state=A,e._result=t,o(O,e))}function k(e,t,r,n){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+I]=r,i[a+A]=n,0===a&&e._state&&o(P,e)}function P(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,a=e._result,o=0;o<t.length;o+=3)n=t[o],i=t[o+r],n?M(r,n,i,a):i(a);e._subscribers.length=0}}function M(e,r,n,i){var a=t(n),o=void 0,s=void 0,u=!0;if(a){try{o=n(i)}catch(e){u=!1,s=e}if(r===o)return void N(r,new TypeError("A promises callback cannot return that same promise."))}else o=i;r._state!==w||(a&&u?x(r,o):!1===u?N(r,s):e===I?R(r,o):e===A&&N(r,o))}var D=0;function L(e){e[S]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}var U=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(T),this.promise[S]||L(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&R(this.promise,this._result))):N(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===w&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===_){var i=void 0,a=void 0,o=!1;try{i=e.then}catch(e){o=!0,a=e}if(i===b&&e._state!==w)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===j){var s=new r(T);o?N(s,a):C(s,e,i),this._willSettleAt(s,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===w&&(this._remaining--,e===A?N(n,r):this._result[t]=r),0===this._remaining&&R(n,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;k(e,void 0,function(e){return r._settledAt(I,t,e)},function(e){return r._settledAt(A,t,e)})},e}(),j=function(){function e(t){this[S]=D++,this._result=this._state=void 0,this._subscribers=[],T!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t(function(t){x(e,t)},function(t){N(e,t)})}catch(t){N(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var r=this.constructor;return t(e)?this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return j.prototype.then=b,j.all=function(e){return new U(this,e).promise},j.race=function(e){var t=this;return r(e)?new t(function(r,n){for(var i=e.length,a=0;a<i;a++)t.resolve(e[a]).then(r,n)}):new t(function(e,t){return t(new TypeError("You must pass an array to race."))})},j.resolve=_,j.reject=function(e){var t=new this(T);return N(t,e),t},j._setScheduler=function(e){a=e},j._setAsap=function(e){o=e},j._asap=o,j.polyfill=function(){var t=void 0;if(void 0!==e)t=e;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=t.Promise;if(r){var n=null;try{n=Object.prototype.toString.call(r.resolve())}catch(e){}if("[object Promise]"===n&&!r.cast)return}t.Promise=j},j.Promise=j,j}()}),PN=n(function(t,r){var n=200,i="__lodash_hash_undefined__",a=9007199254740991,o="[object Arguments]",s="[object Boolean]",u="[object Date]",c="[object Function]",l="[object GeneratorFunction]",f="[object Map]",d="[object Number]",p="[object Object]",h="[object RegExp]",v="[object Set]",m="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",E="[object DataView]",b="[object Float32Array]",_="[object Float64Array]",S="[object Int8Array]",T="[object Int16Array]",w="[object Int32Array]",I="[object Uint8Array]",A="[object Uint8ClampedArray]",C="[object Uint16Array]",x="[object Uint32Array]",O=/\w*$/,R=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,k={};k[o]=k["[object Array]"]=k[y]=k[E]=k[s]=k[u]=k[b]=k[_]=k[S]=k[T]=k[w]=k[f]=k[d]=k[p]=k[h]=k[v]=k[m]=k[g]=k[I]=k[A]=k[C]=k[x]=!0,k["[object Error]"]=k[c]=k["[object WeakMap]"]=!1;var P="object"==typeof e&&e&&e.Object===Object&&e,M="object"==typeof self&&self&&self.Object===Object&&self,D=P||M||Function("return this")(),L=r&&!r.nodeType&&r,U=L&&t&&!t.nodeType&&t,j=U&&U.exports===L;function F(e,t){return e.set(t[0],t[1]),e}function B(e,t){return e.add(t),e}function V(e,t,r,n){var i=-1,a=e?e.length:0;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}function G(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function q(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function K(e,t){return function(r){return e(t(r))}}function H(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var z,W=Array.prototype,Y=Function.prototype,X=Object.prototype,$=D["__core-js_shared__"],Q=(z=/[^.]+$/.exec($&&$.keys&&$.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"",J=Y.toString,Z=X.hasOwnProperty,ee=X.toString,te=RegExp("^"+J.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),re=j?D.Buffer:void 0,ne=D.Symbol,ie=D.Uint8Array,ae=K(Object.getPrototypeOf,Object),oe=Object.create,se=X.propertyIsEnumerable,ue=W.splice,ce=Object.getOwnPropertySymbols,le=re?re.isBuffer:void 0,fe=K(Object.keys,Object),de=Ue(D,"DataView"),pe=Ue(D,"Map"),he=Ue(D,"Promise"),ve=Ue(D,"Set"),me=Ue(D,"WeakMap"),ge=Ue(Object,"create"),ye=Ge(de),Ee=Ge(pe),be=Ge(he),_e=Ge(ve),Se=Ge(me),Te=ne?ne.prototype:void 0,we=Te?Te.valueOf:void 0;function Ie(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ae(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ce(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function xe(e){this.__data__=new Ae(e)}function Oe(e,t){var r=Ke(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&He(e)}(e)&&Z.call(e,"callee")&&(!se.call(e,"callee")||ee.call(e)==o)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var a in e)!t&&!Z.call(e,a)||i&&("length"==a||Be(a,n))||r.push(a);return r}function Re(e,t,r){var n=e[t];Z.call(e,t)&&qe(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function Ne(e,t){for(var r=e.length;r--;)if(qe(e[r][0],t))return r;return-1}function ke(e,t,r,n,i,a,R){var N;if(n&&(N=a?n(e,i,a,R):n(e)),void 0!==N)return N;if(!Ye(e))return e;var P=Ke(e);if(P){if(N=function(e){var t=e.length,r=e.constructor(t);t&&"string"==typeof e[0]&&Z.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!t)return function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(e,N)}else{var M=Fe(e),D=M==c||M==l;if(ze(e))return function(e,t){if(t)return e.slice();var r=new e.constructor(e.length);return e.copy(r),r}(e,t);if(M==p||M==o||D&&!a){if(G(e))return a?e:{};if(N=function(e){return"function"!=typeof e.constructor||Ve(e)?{}:(t=ae(e),Ye(t)?oe(t):{});var t}(D?{}:e),!t)return function(e,t){return De(e,je(e),t)}(e,function(e,t){return e&&De(t,Xe(t),e)}(N,e))}else{if(!k[M])return a?e:{};N=function(e,t,r,n){var i=e.constructor;switch(t){case y:return Me(e);case s:case u:return new i(+e);case E:return function(e,t){var r=t?Me(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,n);case b:case _:case S:case T:case w:case I:case A:case C:case x:return function(e,t){var r=t?Me(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,n);case f:return function(e,t,r){return V(t?r(q(e),!0):q(e),F,new e.constructor)}(e,n,r);case d:case m:return new i(e);case h:return(c=new(o=e).constructor(o.source,O.exec(o))).lastIndex=o.lastIndex,c;case v:return function(e,t,r){return V(t?r(H(e),!0):H(e),B,new e.constructor)}(e,n,r);case g:return a=e,we?Object(we.call(a)):{}}var a;var o,c}(e,M,ke,t)}}R||(R=new xe);var L=R.get(e);if(L)return L;if(R.set(e,N),!P)var U=r?function(e){return function(e,t,r){var n=t(e);return Ke(e)?n:function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(n,r(e))}(e,Xe,je)}(e):Xe(e);return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r,e););}(U||e,function(i,a){U&&(i=e[a=i]),Re(N,a,ke(i,t,r,n,a,e,R))}),N}function Pe(e){return!(!Ye(e)||(t=e,Q&&Q in t))&&(We(e)||G(e)?te:R).test(Ge(e));var t}function Me(e){var t=new e.constructor(e.byteLength);return new ie(t).set(new ie(e)),t}function De(e,t,r,n){r||(r={});for(var i=-1,a=t.length;++i<a;){var o=t[i],s=n?n(r[o],e[o],o,r,e):void 0;Re(r,o,void 0===s?e[o]:s)}return r}function Le(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function Ue(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Pe(r)?r:void 0}Ie.prototype.clear=function(){this.__data__=ge?ge(null):{}},Ie.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ie.prototype.get=function(e){var t=this.__data__;if(ge){var r=t[e];return r===i?void 0:r}return Z.call(t,e)?t[e]:void 0},Ie.prototype.has=function(e){var t=this.__data__;return ge?void 0!==t[e]:Z.call(t,e)},Ie.prototype.set=function(e,t){return this.__data__[e]=ge&&void 0===t?i:t,this},Ae.prototype.clear=function(){this.__data__=[]},Ae.prototype.delete=function(e){var t=this.__data__,r=Ne(t,e);return!(r<0||(r==t.length-1?t.pop():ue.call(t,r,1),0))},Ae.prototype.get=function(e){var t=this.__data__,r=Ne(t,e);return r<0?void 0:t[r][1]},Ae.prototype.has=function(e){return Ne(this.__data__,e)>-1},Ae.prototype.set=function(e,t){var r=this.__data__,n=Ne(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},Ce.prototype.clear=function(){this.__data__={hash:new Ie,map:new(pe||Ae),string:new Ie}},Ce.prototype.delete=function(e){return Le(this,e).delete(e)},Ce.prototype.get=function(e){return Le(this,e).get(e)},Ce.prototype.has=function(e){return Le(this,e).has(e)},Ce.prototype.set=function(e,t){return Le(this,e).set(e,t),this},xe.prototype.clear=function(){this.__data__=new Ae},xe.prototype.delete=function(e){return this.__data__.delete(e)},xe.prototype.get=function(e){return this.__data__.get(e)},xe.prototype.has=function(e){return this.__data__.has(e)},xe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ae){var i=r.__data__;if(!pe||i.length<n-1)return i.push([e,t]),this;r=this.__data__=new Ce(i)}return r.set(e,t),this};var je=ce?K(ce,Object):function(){return[]},Fe=function(e){return ee.call(e)};function Be(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||N.test(e))&&e>-1&&e%1==0&&e<t}function Ve(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||X)}function Ge(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function qe(e,t){return e===t||e!=e&&t!=t}(de&&Fe(new de(new ArrayBuffer(1)))!=E||pe&&Fe(new pe)!=f||he&&"[object Promise]"!=Fe(he.resolve())||ve&&Fe(new ve)!=v||me&&"[object WeakMap]"!=Fe(new me))&&(Fe=function(e){var t=ee.call(e),r=t==p?e.constructor:void 0,n=r?Ge(r):void 0;if(n)switch(n){case ye:return E;case Ee:return f;case be:return"[object Promise]";case _e:return v;case Se:return"[object WeakMap]"}return t});var Ke=Array.isArray;function He(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}(e.length)&&!We(e)}var ze=le||function(){return!1};function We(e){var t=Ye(e)?ee.call(e):"";return t==c||t==l}function Ye(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Xe(e){return He(e)?Oe(e):function(e){if(!Ve(e))return fe(e);var t=[];for(var r in Object(e))Z.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}t.exports=function(e){return ke(e,!1,!0)}}),MN="Expected a function",DN="__lodash_placeholder__",LN=1,UN=2,jN=4,FN=8,BN=16,VN=32,GN=64,qN=128,KN=512,HN=1/0,zN=9007199254740991,WN=1.7976931348623157e308,YN=NaN,XN=[["ary",qN],["bind",LN],["bindKey",UN],["curry",FN],["curryRight",BN],["flip",KN],["partial",VN],["partialRight",GN],["rearg",256]],$N="[object Function]",QN="[object GeneratorFunction]",JN="[object Symbol]",ZN=/^\s+|\s+$/g,ek=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,tk=/\{\n\/\* \[wrapped with (.+)\] \*/,rk=/,? & /,nk=/^[-+]0x[0-9a-f]+$/i,ik=/^0b[01]+$/i,ak=/^\[object .+?Constructor\]$/,ok=/^0o[0-7]+$/i,sk=/^(?:0|[1-9]\d*)$/,uk=parseInt,ck="object"==typeof e&&e&&e.Object===Object&&e,lk="object"==typeof self&&self&&self.Object===Object&&self,fk=ck||lk||Function("return this")();function dk(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function pk(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r,n){var i=e.length,a=r+(n?1:-1);for(;n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}(e,hk,r);var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function hk(e){return e!=e}function vk(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var o=e[r];o!==t&&o!==DN||(e[r]=DN,a[i++]=r)}return a}var mk,gk,yk=Function.prototype,Ek=Object.prototype,bk=fk["__core-js_shared__"],_k=function(){var e=/[^.]+$/.exec(bk&&bk.keys&&bk.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Sk=yk.toString,Tk=Ek.hasOwnProperty,wk=Ek.toString,Ik=RegExp("^"+Sk.call(Tk).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ak=Object.create,Ck=Math.max,xk=Math.min,Ok=(mk=Lk(Object,"defineProperty"),(gk=Lk.name)&&gk.length>2?mk:void 0);function Rk(e){return!(!qk(e)||(t=e,_k&&_k in t))&&(function(e){var t=qk(e)?wk.call(e):"";return t==$N||t==QN}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?Ik:ak).test(function(e){if(null!=e){try{return Sk.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function Nk(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r,n=qk(r=e.prototype)?Ak(r):{},i=e.apply(n,t);return qk(i)?i:n}}function kk(e,t,r,n,i,a,o,s,u,c){var l=t&qN,f=t&LN,d=t&UN,p=t&(FN|BN),h=t&KN,v=d?void 0:Nk(e);return function m(){for(var g=arguments.length,y=Array(g),E=g;E--;)y[E]=arguments[E];if(p)var b=Dk(m),_=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&n++;return n}(y,b);if(n&&(y=function(e,t,r,n){for(var i=-1,a=e.length,o=r.length,s=-1,u=t.length,c=Ck(a-o,0),l=Array(u+c),f=!n;++s<u;)l[s]=t[s];for(;++i<o;)(f||i<a)&&(l[r[i]]=e[i]);for(;c--;)l[s++]=e[i++];return l}(y,n,i,p)),a&&(y=function(e,t,r,n){for(var i=-1,a=e.length,o=-1,s=r.length,u=-1,c=t.length,l=Ck(a-s,0),f=Array(l+c),d=!n;++i<l;)f[i]=e[i];for(var p=i;++u<c;)f[p+u]=t[u];for(;++o<s;)(d||i<a)&&(f[p+r[o]]=e[i++]);return f}(y,a,o,p)),g-=_,p&&g<c){var S=vk(y,b);return Pk(e,t,kk,m.placeholder,r,y,S,s,u,c-g)}var T=f?r:this,w=d?T[e]:e;return g=y.length,s?y=function(e,t){for(var r=e.length,n=xk(t.length,r),i=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(e);n--;){var a=t[n];e[n]=Fk(a,r)?i[a]:void 0}return e}(y,s):h&&g>1&&y.reverse(),l&&u<g&&(y.length=u),this&&this!==fk&&this instanceof m&&(w=v||Nk(w)),w.apply(T,y)}}function Pk(e,t,r,n,i,a,o,s,u,c){var l=t&FN;t|=l?VN:GN,(t&=~(l?GN:VN))&jN||(t&=~(LN|UN));var f=r(e,t,i,l?a:void 0,l?o:void 0,l?void 0:a,l?void 0:o,s,u,c);return f.placeholder=n,Bk(f,e,t)}function Mk(e,t,r,n,i,a,o,s){var u=t&UN;if(!u&&"function"!=typeof e)throw new TypeError(MN);var c=n?n.length:0;if(c||(t&=~(VN|GN),n=i=void 0),o=void 0===o?o:Ck(Hk(o),0),s=void 0===s?s:Hk(s),c-=i?i.length:0,t&GN){var l=n,f=i;n=i=void 0}var d=[e,t,r,n,i,l,f,a,o,s];if(e=d[0],t=d[1],r=d[2],n=d[3],i=d[4],!(s=d[9]=null==d[9]?u?0:e.length:Ck(d[9]-c,0))&&t&(FN|BN)&&(t&=~(FN|BN)),t&&t!=LN)p=t==FN||t==BN?function(e,t,r){var n=Nk(e);return function i(){for(var a=arguments.length,o=Array(a),s=a,u=Dk(i);s--;)o[s]=arguments[s];var c=a<3&&o[0]!==u&&o[a-1]!==u?[]:vk(o,u);return(a-=c.length)<r?Pk(e,t,kk,i.placeholder,void 0,o,c,void 0,void 0,r-a):dk(this&&this!==fk&&this instanceof i?n:e,this,o)}}(e,t,s):t!=VN&&t!=(LN|VN)||i.length?kk.apply(void 0,d):function(e,t,r,n){var i=t&LN,a=Nk(e);return function t(){for(var o=-1,s=arguments.length,u=-1,c=n.length,l=Array(c+s),f=this&&this!==fk&&this instanceof t?a:e;++u<c;)l[u]=n[u];for(;s--;)l[u++]=arguments[++o];return dk(f,i?r:this,l)}}(e,t,r,n);else var p=function(e,t,r){var n=t&LN,i=Nk(e);return function t(){return(this&&this!==fk&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,r);return Bk(p,e,t)}function Dk(e){return e.placeholder}function Lk(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Rk(r)?r:void 0}function Uk(e){var t=e.match(tk);return t?t[1].split(rk):[]}function jk(e,t){var r=t.length,n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ek,"{\n/* [wrapped with "+t+"] */\n")}function Fk(e,t){return!!(t=null==t?zN:t)&&("number"==typeof e||sk.test(e))&&e>-1&&e%1==0&&e<t}var Bk=Ok?function(e,t,r){var n,i=t+"";return Ok(e,"toString",{configurable:!0,enumerable:!1,value:(n=jk(i,Vk(Uk(i),r)),function(){return n})})}:function(e){return e};function Vk(e,t){return function(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r,e););}(XN,function(r){var n="_."+r[0];t&r[1]&&!pk(e,n)&&e.push(n)}),e.sort()}var Gk=function(e,t){return t=Ck(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,i=Ck(r.length-t,0),a=Array(i);++n<i;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=a,dk(e,this,o)}}(function(e,t){var r=vk(t,Dk(Gk));return Mk(e,GN,void 0,t,r)});function qk(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Kk(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&wk.call(e)==JN}(e))return YN;if(qk(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=qk(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(ZN,"");var r=ik.test(e);return r||ok.test(e)?uk(e.slice(2),r?2:8):nk.test(e)?YN:+e}(e))===HN||e===-HN?(e<0?-1:1)*WN:e==e?e:0:0===e?e:0}function Hk(e){var t=Kk(e),r=t%1;return t==t?r?t-r:t:0}Gk.placeholder={};var zk,Wk=Gk,Yk=n(function(t,r){var n=200,i="__lodash_hash_undefined__",a=800,o=16,s=9007199254740991,u="[object Arguments]",c="[object AsyncFunction]",l="[object Function]",f="[object GeneratorFunction]",d="[object Null]",p="[object Object]",h="[object Proxy]",v="[object Undefined]",m=/^\[object .+?Constructor\]$/,g=/^(?:0|[1-9]\d*)$/,y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y[u]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y[l]=y["[object Map]"]=y["[object Number]"]=y[p]=y["[object RegExp]"]=y["[object Set]"]=y["[object String]"]=y["[object WeakMap]"]=!1;var E="object"==typeof e&&e&&e.Object===Object&&e,b="object"==typeof self&&self&&self.Object===Object&&self,_=E||b||Function("return this")(),S=r&&!r.nodeType&&r,T=S&&t&&!t.nodeType&&t,w=T&&T.exports===S,I=w&&E.process,A=function(){try{var e=T&&T.require&&T.require("util").types;return e||I&&I.binding&&I.binding("util")}catch(e){}}(),C=A&&A.isTypedArray;var x,O,R,N=Array.prototype,k=Function.prototype,P=Object.prototype,M=_["__core-js_shared__"],D=k.toString,L=P.hasOwnProperty,U=(x=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+x:"",j=P.toString,F=D.call(Object),B=RegExp("^"+D.call(L).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=w?_.Buffer:void 0,G=_.Symbol,q=_.Uint8Array,K=V?V.allocUnsafe:void 0,H=(O=Object.getPrototypeOf,R=Object,function(e){return O(R(e))}),z=Object.create,W=P.propertyIsEnumerable,Y=N.splice,X=G?G.toStringTag:void 0,$=function(){try{var e=_e(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Q=V?V.isBuffer:void 0,J=Math.max,Z=Date.now,ee=_e(_,"Map"),te=_e(Object,"create"),re=function(){function e(){}return function(t){if(!Pe(t))return{};if(z)return z(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function ne(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ie(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ae(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function oe(e){var t=this.__data__=new ie(e);this.size=t.size}function se(e,t){var r=xe(e),n=!r&&Ce(e),i=!r&&!n&&Re(e),a=!r&&!n&&!i&&De(e),o=r||n||i||a,s=o?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],u=s.length;for(var c in e)!t&&!L.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Se(c,u))||s.push(c);return s}function ue(e,t,r){(void 0===r||Ae(e[t],r))&&(void 0!==r||t in e)||fe(e,t,r)}function ce(e,t,r){var n=e[t];L.call(e,t)&&Ae(n,r)&&(void 0!==r||t in e)||fe(e,t,r)}function le(e,t){for(var r=e.length;r--;)if(Ae(e[r][0],t))return r;return-1}function fe(e,t,r){"__proto__"==t&&$?$(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}ne.prototype.clear=function(){this.__data__=te?te(null):{},this.size=0},ne.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ne.prototype.get=function(e){var t=this.__data__;if(te){var r=t[e];return r===i?void 0:r}return L.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return te?void 0!==t[e]:L.call(t,e)},ne.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=te&&void 0===t?i:t,this},ie.prototype.clear=function(){this.__data__=[],this.size=0},ie.prototype.delete=function(e){var t=this.__data__,r=le(t,e);return!(r<0||(r==t.length-1?t.pop():Y.call(t,r,1),--this.size,0))},ie.prototype.get=function(e){var t=this.__data__,r=le(t,e);return r<0?void 0:t[r][1]},ie.prototype.has=function(e){return le(this.__data__,e)>-1},ie.prototype.set=function(e,t){var r=this.__data__,n=le(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},ae.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(ee||ie),string:new ne}},ae.prototype.delete=function(e){var t=be(this,e).delete(e);return this.size-=t?1:0,t},ae.prototype.get=function(e){return be(this,e).get(e)},ae.prototype.has=function(e){return be(this,e).has(e)},ae.prototype.set=function(e,t){var r=be(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},oe.prototype.clear=function(){this.__data__=new ie,this.size=0},oe.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},oe.prototype.get=function(e){return this.__data__.get(e)},oe.prototype.has=function(e){return this.__data__.has(e)},oe.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ie){var i=r.__data__;if(!ee||i.length<n-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new ae(i)}return r.set(e,t),this.size=r.size,this};var de,pe=function(e,t,r){for(var n=-1,i=Object(e),a=r(e),o=a.length;o--;){var s=a[de?o:++n];if(!1===t(i[s],s,i))break}return e};function he(e){return null==e?void 0===e?v:d:X&&X in Object(e)?function(e){var t=L.call(e,X),r=e[X];try{e[X]=void 0;var n=!0}catch(e){}var i=j.call(e);n&&(t?e[X]=r:delete e[X]);return i}(e):function(e){return j.call(e)}(e)}function ve(e){return Me(e)&&he(e)==u}function me(e){return!(!Pe(e)||(t=e,U&&U in t))&&(Ne(e)?B:m).test(function(e){if(null!=e){try{return D.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function ge(e){if(!Pe(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=Te(e),r=[];for(var n in e)("constructor"!=n||!t&&L.call(e,n))&&r.push(n);return r}function ye(e,t,r,n,i){e!==t&&pe(t,function(a,o){if(i||(i=new oe),Pe(a))!function(e,t,r,n,i,a,o){var s=we(e,r),u=we(t,r),c=o.get(u);if(c)return void ue(e,r,c);var l=a?a(s,u,r+"",e,t,o):void 0,f=void 0===l;if(f){var d=xe(u),h=!d&&Re(u),v=!d&&!h&&De(u);l=u,d||h||v?xe(s)?l=s:Me(b=s)&&Oe(b)?l=function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(s):h?(f=!1,l=function(e,t){if(t)return e.slice();var r=e.length,n=K?K(r):new e.constructor(r);return e.copy(n),n}(u,!0)):v?(f=!1,m=u,g=!0?(y=m.buffer,E=new y.constructor(y.byteLength),new q(E).set(new q(y)),E):m.buffer,l=new m.constructor(g,m.byteOffset,m.length)):l=[]:function(e){if(!Me(e)||he(e)!=p)return!1;var t=H(e);if(null===t)return!0;var r=L.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&D.call(r)==F}(u)||Ce(u)?(l=s,Ce(s)?l=function(e){return function(e,t,r,n){var i=!r;r||(r={});var a=-1,o=t.length;for(;++a<o;){var s=t[a],u=n?n(r[s],e[s],s,r,e):void 0;void 0===u&&(u=e[s]),i?fe(r,s,u):ce(r,s,u)}return r}(e,Le(e))}(s):Pe(s)&&!Ne(s)||(l=function(e){return"function"!=typeof e.constructor||Te(e)?{}:re(H(e))}(u))):f=!1}var m,g,y,E;var b;f&&(o.set(u,l),i(l,u,n,a,o),o.delete(u));ue(e,r,l)}(e,t,o,r,ye,n,i);else{var s=n?n(we(e,o),a,o+"",e,t,i):void 0;void 0===s&&(s=a),ue(e,o,s)}},Le)}function Ee(e,t){return Ie(function(e,t,r){return t=J(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=J(n.length-t,0),o=Array(a);++i<a;)o[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(o),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}}(e,t,Fe),e+"")}function be(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function _e(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return me(r)?r:void 0}function Se(e,t){var r=typeof e;return!!(t=null==t?s:t)&&("number"==r||"symbol"!=r&&g.test(e))&&e>-1&&e%1==0&&e<t}function Te(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||P)}function we(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ie=function(e){var t=0,r=0;return function(){var n=Z(),i=o-(n-r);if(r=n,i>0){if(++t>=a)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}($?function(e,t){return $(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Fe);function Ae(e,t){return e===t||e!=e&&t!=t}var Ce=ve(function(){return arguments}())?ve:function(e){return Me(e)&&L.call(e,"callee")&&!W.call(e,"callee")},xe=Array.isArray;function Oe(e){return null!=e&&ke(e.length)&&!Ne(e)}var Re=Q||function(){return!1};function Ne(e){if(!Pe(e))return!1;var t=he(e);return t==l||t==f||t==c||t==h}function ke(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function Pe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Me(e){return null!=e&&"object"==typeof e}var De=C?function(e){return function(t){return e(t)}}(C):function(e){return Me(e)&&ke(e.length)&&!!y[he(e)]};function Le(e){return Oe(e)?se(e,!0):ge(e)}var Ue,je=(Ue=function(e,t,r){ye(e,t,r)},Ee(function(e,t){var r=-1,n=t.length,i=n>1?t[n-1]:void 0,a=n>2?t[2]:void 0;for(i=Ue.length>3&&"function"==typeof i?(n--,i):void 0,a&&function(e,t,r){if(!Pe(r))return!1;var n=typeof t;return!!("number"==n?Oe(r)&&Se(t,r.length):"string"==n&&t in r)&&Ae(r[t],e)}(t[0],t[1],a)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var o=t[r];o&&Ue(e,o,r,i)}return e}));function Fe(e){return e}t.exports=je}),Xk=(zk=[],"undefined"!=typeof Uint8ClampedArray&&zk.push(Uint8ClampedArray),"undefined"!=typeof Uint8Array&&zk.push(Uint8Array),"undefined"!=typeof Uint16Array&&zk.push(Uint16Array),"undefined"!=typeof Uint32Array&&zk.push(Uint32Array),"undefined"!=typeof Float32Array&&zk.push(Float32Array),"undefined"!=typeof Float64Array&&zk.push(Float64Array),zk);var $k=Wk(Yk,function(e,t){if(Vg(t))t=new ag(t);else{var r=function(e){for(var t,r=0;!t&&Xk.length>r;r++)e instanceof Xk[r]&&(t=Xk[r]);return t}(t);t=r?new r(t,t.byteOffset,t.byteLength):void 0}return t}),Qk=200,Jk="__lodash_hash_undefined__",Zk="[object Function]",eP="[object GeneratorFunction]",tP=/^\[object .+?Constructor\]$/,rP="object"==typeof e&&e&&e.Object===Object&&e,nP="object"==typeof self&&self&&self.Object===Object&&self,iP=rP||nP||Function("return this")();function aP(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r,n){var i=e.length,a=r+(n?1:-1);for(;n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}(e,sP,r);var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function oP(e,t,r){for(var n=-1,i=e?e.length:0;++n<i;)if(r(t,e[n]))return!0;return!1}function sP(e){return e!=e}function uP(e,t){return e.has(t)}function cP(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var lP=Array.prototype,fP=Function.prototype,dP=Object.prototype,pP=iP["__core-js_shared__"],hP=function(){var e=/[^.]+$/.exec(pP&&pP.keys&&pP.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),vP=fP.toString,mP=dP.hasOwnProperty,gP=dP.toString,yP=RegExp("^"+vP.call(mP).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),EP=lP.splice,bP=NP(iP,"Map"),_P=NP(iP,"Set"),SP=NP(Object,"create");function TP(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function wP(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function IP(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function AP(e){var t=-1,r=e?e.length:0;for(this.__data__=new IP;++t<r;)this.add(e[t])}function CP(e,t){for(var r,n,i=e.length;i--;)if((r=e[i][0])===(n=t)||r!=r&&n!=n)return i;return-1}function xP(e){return!(!kP(e)||(t=e,hP&&hP in t))&&(function(e){var t=kP(e)?gP.call(e):"";return t==Zk||t==eP}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?yP:tP).test(function(e){if(null!=e){try{return vP.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}TP.prototype.clear=function(){this.__data__=SP?SP(null):{}},TP.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},TP.prototype.get=function(e){var t=this.__data__;if(SP){var r=t[e];return r===Jk?void 0:r}return mP.call(t,e)?t[e]:void 0},TP.prototype.has=function(e){var t=this.__data__;return SP?void 0!==t[e]:mP.call(t,e)},TP.prototype.set=function(e,t){return this.__data__[e]=SP&&void 0===t?Jk:t,this},wP.prototype.clear=function(){this.__data__=[]},wP.prototype.delete=function(e){var t=this.__data__,r=CP(t,e);return!(r<0||(r==t.length-1?t.pop():EP.call(t,r,1),0))},wP.prototype.get=function(e){var t=this.__data__,r=CP(t,e);return r<0?void 0:t[r][1]},wP.prototype.has=function(e){return CP(this.__data__,e)>-1},wP.prototype.set=function(e,t){var r=this.__data__,n=CP(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},IP.prototype.clear=function(){this.__data__={hash:new TP,map:new(bP||wP),string:new TP}},IP.prototype.delete=function(e){return RP(this,e).delete(e)},IP.prototype.get=function(e){return RP(this,e).get(e)},IP.prototype.has=function(e){return RP(this,e).has(e)},IP.prototype.set=function(e,t){return RP(this,e).set(e,t),this},AP.prototype.add=AP.prototype.push=function(e){return this.__data__.set(e,Jk),this},AP.prototype.has=function(e){return this.__data__.has(e)};var OP=_P&&1/cP(new _P([,-0]))[1]==1/0?function(e){return new _P(e)}:function(){};function RP(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function NP(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return xP(r)?r:void 0}function kP(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var PP=function(e){return e&&e.length?function(e,t,r){var n=-1,i=aP,a=e.length,o=!0,s=[],u=s;if(r)o=!1,i=oP;else if(a>=Qk){var c=t?null:OP(e);if(c)return cP(c);o=!1,i=uP,u=new AP}else u=t?[]:s;e:for(;++n<a;){var l=e[n],f=t?t(l):l;if(l=r||0!==l?l:0,o&&f==f){for(var d=u.length;d--;)if(u[d]===f)continue e;t&&u.push(f),s.push(l)}else i(u,f,r)||(u!==s&&u.push(f),s.push(l))}return s}(e):[]},MP={options:{usePureJavaScript:!1}},DP={},LP=DP,UP={};DP.encode=function(e,t,r){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var i=0,a=t.length,o=t.charAt(0),s=[0];for(i=0;i<e.length;++i){for(var u=0,c=e[i];u<s.length;++u)c+=s[u]<<8,s[u]=c%a,c=c/a|0;for(;c>0;)s.push(c%a),c=c/a|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=o;for(i=s.length-1;i>=0;--i)n+=t[s[i]]}else n=function(e,t){var r=0,n=t.length,i=t.charAt(0),a=[0];for(r=0;r<e.length();++r){for(var o=0,s=e.at(r);o<a.length;++o)s+=a[o]<<8,a[o]=s%n,s=s/n|0;for(;s>0;)a.push(s%n),s=s/n|0}var u="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)u+=i;for(r=a.length-1;r>=0;--r)u+=t[a[r]];return u}(e,t);if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join("\r\n")}return n},DP.decode=function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');var r=UP[t];if(!r){r=UP[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");var i=t.length,a=t.charAt(0),o=[0];for(n=0;n<e.length;n++){var s=r[e.charCodeAt(n)];if(void 0===s)return;for(var u=0,c=s;u<o.length;++u)c+=o[u]*i,o[u]=255&c,c>>=8;for(;c>0;)o.push(255&c),c>>=8}for(var l=0;e[l]===a&&l<e.length-1;++l)o.push(0);return ag.from(o.reverse())};n(function(e){var t=e.exports=MP.util=MP.util||{};function r(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function n(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(t.isArrayBuffer(e)||t.isArrayBufferView(e))if(e instanceof ag)this.data=e.toString("binary");else{var r=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,r)}catch(e){for(var i=0;i<r.length;++i)this.putByte(r[i])}}else(e instanceof n||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if("function"==typeof setImmediate)return t.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(t.nextTick=function(e){return setImmediate(e)});if(t.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",r=[];t.setImmediate=function(t){r.push(t),1===r.length&&window.postMessage(e,"*")},window.addEventListener("message",function(t){if(t.source===window&&t.data===e){t.stopPropagation();var n=r.slice();r.length=0,n.forEach(function(e){e()})}},!0)}if("undefined"!=typeof MutationObserver){var n=Date.now(),i=!0,a=document.createElement("div");r=[];new MutationObserver(function(){var e=r.slice();r.length=0,e.forEach(function(e){e()})}).observe(a,{attributes:!0});var o=t.setImmediate;t.setImmediate=function(e){Date.now()-n>15?(n=Date.now(),o(e)):(r.push(e),1===r.length&&a.setAttribute("a",i=!i))}}t.nextTick=t.setImmediate}(),t.isNodejs=void 0!==xu&&xu.versions&&xu.versions.node,t.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},t.isArrayBufferView=function(e){return e&&t.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},t.ByteBuffer=n,t.ByteStringBuffer=n;t.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},t.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},t.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},t.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},t.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},t.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},t.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(t.encodeUtf8(e))},t.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},t.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},t.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},t.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},t.ByteStringBuffer.prototype.putInt=function(e,t){r(t);var n="";do{t-=8,n+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(n)},t.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},t.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},t.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},t.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},t.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},t.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},t.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},t.ByteStringBuffer.prototype.getInt=function(e){r(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},t.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},t.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},t.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},t.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},t.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},t.ByteStringBuffer.prototype.copy=function(){var e=t.createBuffer(this.data);return e.read=this.read,e},t.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},t.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},t.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},t.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},t.ByteStringBuffer.prototype.toString=function(){return t.decodeUtf8(this.bytes())},t.DataBuffer=function(e,r){r=r||{},this.read=r.readOffset||0,this.growSize=r.growSize||1024;var n=t.isArrayBuffer(e),i=t.isArrayBufferView(e);if(n||i)return this.data=n?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in r?r.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in r&&(this.write=r.writeOffset)},t.DataBuffer.prototype.length=function(){return this.write-this.read},t.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},t.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},t.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},t.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},t.DataBuffer.prototype.putBytes=function(e,r){if(t.isArrayBufferView(e)){var n=(i=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-i.byteOffset;return this.accommodate(n),new Uint8Array(this.data.buffer,this.write).set(i),this.write+=n,this}if(t.isArrayBuffer(e)){var i=new Uint8Array(e);return this.accommodate(i.byteLength),new Uint8Array(this.data.buffer).set(i,this.write),this.write+=i.byteLength,this}if(e instanceof t.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&t.isArrayBufferView(e.data)){i=new Uint8Array(e.data.byteLength,e.read,e.length());return this.accommodate(i.byteLength),new Uint8Array(e.data.byteLength,this.write).set(i),this.write+=i.byteLength,this}if(e instanceof t.ByteStringBuffer&&(e=e.data,r="binary"),r=r||"binary","string"==typeof e){var a;if("hex"===r)return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.hex.decode(e,a,this.write),this;if("base64"===r)return this.accommodate(3*Math.ceil(e.length/4)),a=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.base64.decode(e,a,this.write),this;if("utf8"===r&&(e=t.encodeUtf8(e),r="binary"),"binary"===r||"raw"===r)return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=t.binary.raw.decode(a),this;if("utf16"===r)return this.accommodate(2*e.length),a=new Uint16Array(this.data.buffer,this.write),this.write+=t.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+r)}throw Error("Invalid parameter: "+e)},t.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},t.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},t.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},t.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},t.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},t.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},t.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},t.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},t.DataBuffer.prototype.putInt=function(e,t){r(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},t.DataBuffer.prototype.putSignedInt=function(e,t){return r(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},t.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},t.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},t.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},t.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},t.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},t.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},t.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},t.DataBuffer.prototype.getInt=function(e){r(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},t.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},t.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},t.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},t.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},t.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},t.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},t.DataBuffer.prototype.copy=function(){return new t.DataBuffer(this)},t.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},t.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},t.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},t.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},t.DataBuffer.prototype.toString=function(e){var r=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return t.binary.raw.encode(r);if("hex"===e)return t.binary.hex.encode(r);if("base64"===e)return t.binary.base64.encode(r);if("utf8"===e)return t.text.utf8.decode(r);if("utf16"===e)return t.text.utf16.decode(r);throw new Error("Invalid encoding: "+e)},t.createBuffer=function(e,r){return r=r||"raw",void 0!==e&&"utf8"===r&&(e=t.encodeUtf8(e)),new t.ByteBuffer(e)},t.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},t.xorBytes=function(e,t,r){for(var n="",i="",a="",o=0,s=0;r>0;--r,++o)i=e.charCodeAt(o)^t.charCodeAt(o),s>=10&&(n+=a,a="",s=0),a+=String.fromCharCode(i),++s;return n+=a},t.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},t.bytesToHex=function(e){return t.createBuffer(e).toHex()},t.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],o="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";t.encode64=function(e,t){for(var r,n,a,o="",s="",u=0;u<e.length;)r=e.charCodeAt(u++),n=e.charCodeAt(u++),a=e.charCodeAt(u++),o+=i.charAt(r>>2),o+=i.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=i.charAt((15&n)<<2|a>>6),o+=isNaN(a)?"=":i.charAt(63&a)),t&&o.length>t&&(s+=o.substr(0,t)+"\r\n",o=o.substr(t));return s+=o},t.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,i,o="",s=0;s<e.length;)t=a[e.charCodeAt(s++)-43],r=a[e.charCodeAt(s++)-43],n=a[e.charCodeAt(s++)-43],i=a[e.charCodeAt(s++)-43],o+=String.fromCharCode(t<<2|r>>4),64!==n&&(o+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(o+=String.fromCharCode((3&n)<<6|i)));return o},t.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},t.decodeUtf8=function(e){return decodeURIComponent(escape(e))},t.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:LP.encode,decode:LP.decode}},t.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},t.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,a=0;a<e.length;++a)n[i++]=e.charCodeAt(a);return t?i-r:n},t.binary.hex.encode=t.bytesToHex,t.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var i=0,a=r=r||0;for(1&e.length&&(i=1,n[a++]=parseInt(e[0],16));i<e.length;i+=2)n[a++]=parseInt(e.substr(i,2),16);return t?a-r:n},t.binary.base64.encode=function(e,t){for(var r,n,a,o="",s="",u=0;u<e.byteLength;)r=e[u++],n=e[u++],a=e[u++],o+=i.charAt(r>>2),o+=i.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=i.charAt((15&n)<<2|a>>6),o+=isNaN(a)?"=":i.charAt(63&a)),t&&o.length>t&&(s+=o.substr(0,t)+"\r\n",o=o.substr(t));return s+=o},t.binary.base64.decode=function(e,t,r){var n,i,o,s,u=t;u||(u=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var c=0,l=r=r||0;c<e.length;)n=a[e.charCodeAt(c++)-43],i=a[e.charCodeAt(c++)-43],o=a[e.charCodeAt(c++)-43],s=a[e.charCodeAt(c++)-43],u[l++]=n<<2|i>>4,64!==o&&(u[l++]=(15&i)<<4|o>>2,64!==s&&(u[l++]=(3&o)<<6|s));return t?l-r:u.subarray(0,l)},t.binary.base58.encode=function(e,r){return t.binary.baseN.encode(e,o,r)},t.binary.base58.decode=function(e,r){return t.binary.baseN.decode(e,o,r)},t.text={utf8:{},utf16:{}},t.text.utf8.encode=function(e,r,n){e=t.encodeUtf8(e);var i=r;i||(i=new Uint8Array(e.length));for(var a=n=n||0,o=0;o<e.length;++o)i[a++]=e.charCodeAt(o);return r?a-n:i},t.text.utf8.decode=function(e){return t.decodeUtf8(String.fromCharCode.apply(null,e))},t.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var i=new Uint16Array(n.buffer),a=r=r||0,o=r,s=0;s<e.length;++s)i[o++]=e.charCodeAt(s),a+=2;return t?a-r:n},t.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},t.deflate=function(e,r,n){if(r=t.decode64(e.deflate(t.encode64(r)).rval),n){var i=2;32&r.charCodeAt(1)&&(i=6),r=r.substring(i,r.length-4)}return r},t.inflate=function(e,r,n){var i=e.inflate(t.encode64(r)).rval;return null===i?null:t.decode64(i)};var s=function(e,r,n){if(!e)throw new Error("WebStorage not available.");var i;if(null===n?i=e.removeItem(r):(n=t.encode64(JSON.stringify(n)),i=e.setItem(r,n)),void 0!==i&&!0!==i.rval){var a=new Error(i.error.message);throw a.id=i.error.id,a.name=i.error.name,a}},u=function(e,r){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(r);if(e.init)if(null===n.rval){if(n.error){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(t.decode64(n))),n},c=function(e,t,r,n){var i=u(e,t);null===i&&(i={}),i[r]=n,s(e,t,i)},l=function(e,t,r){var n=u(e,t);return null!==n&&(n=r in n?n[r]:null),n},f=function(e,t,r){var n=u(e,t);if(null!==n&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),s(e,t,n)}},d=function(e,t){s(e,t,null)},p=function(e,t,r){var n,i=null;void 0===r&&(r=["web","flash"]);var a=!1,o=null;for(var s in r){n=r[s];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");i=e.apply(this,t),a="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,i=e.apply(this,t),a=!0)}catch(e){o=e}if(a)break}if(!a)throw o;return i};t.setItem=function(e,t,r,n,i){p(c,arguments,i)},t.getItem=function(e,t,r,n){return p(l,arguments,n)},t.removeItem=function(e,t,r,n){p(f,arguments,n)},t.clearItems=function(e,t,r){p(d,arguments,r)},t.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var r=t.exec(e),n=null===r?null:{full:e,scheme:r[1],host:r[2],port:r[3],path:r[4]};return n&&(n.fullHost=n.host,n.port?80!==n.port&&"http"===n.scheme?n.fullHost+=":"+n.port:443!==n.port&&"https"===n.scheme&&(n.fullHost+=":"+n.port):"http"===n.scheme?n.port=80:"https"===n.scheme&&(n.port=443),n.full=n.scheme+"://"+n.fullHost),n};var h=null;t.getQueryVariables=function(e){var t,r=function(e){for(var t={},r=e.split("&"),n=0;n<r.length;n++){var i,a,o=r[n].indexOf("=");o>0?(i=r[n].substring(0,o),a=r[n].substring(o+1)):(i=r[n],a=null),i in t||(t[i]=[]),i in Object.prototype||null===a||t[i].push(unescape(a))}return t};return void 0===e?(null===h&&(h="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),t=h):t=r(e),t},t.parseFragment=function(e){var r=e,n="",i=e.indexOf("?");i>0&&(r=e.substring(0,i),n=e.substring(i+1));var a=r.split("/");return a.length>0&&""===a[0]&&a.shift(),{pathString:r,queryString:n,path:a,query:""===n?{}:t.getQueryVariables(n)}},t.makeRequest=function(e){var r=t.parseFragment(e),n={path:r.pathString,query:r.queryString,getPath:function(e){return void 0===e?r.path:r.path[e]},getQuery:function(e,t){var n;return void 0===e?n=r.query:(n=r.query[e])&&void 0!==t&&(n=n[t]),n},getQueryLast:function(e,t){var r=n.getQuery(e);return r?r[r.length-1]:t}};return n},t.makeLink=function(e,t,r){e=jQuery.isArray(e)?e.join("/"):e;var n=jQuery.param(t||{});return r=r||"",e+(n.length>0?"?"+n:"")+(r.length>0?"#"+r:"")},t.setPath=function(e,t,r){if("object"==typeof e&&null!==e)for(var n=0,i=t.length;n<i;){var a=t[n++];if(n==i)e[a]=r;else{var o=a in e;(!o||o&&"object"!=typeof e[a]||o&&null===e[a])&&(e[a]={}),e=e[a]}}},t.getPath=function(e,t,r){for(var n=0,i=t.length,a=!0;a&&n<i&&"object"==typeof e&&null!==e;){var o=t[n++];(a=o in e)&&(e=e[o])}return a?e:r},t.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var r=0,n=t.length;r<n;){var i=t[r++];if(r==n)delete e[i];else{if(!(i in e)||"object"!=typeof e[i]||null===e[i])break;e=e[i]}}},t.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.format=function(e){for(var t,r,n=/%./g,i=0,a=[],o=0;t=n.exec(e);){(r=e.substring(o,n.lastIndex-2)).length>0&&a.push(r),o=n.lastIndex;var s=t[0][1];switch(s){case"s":case"o":i<arguments.length?a.push(arguments[1+i++]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+s+"?>")}}return a.push(e.substring(o)),a.join("")},t.formatNumber=function(e,t,r,n){var i=e,a=isNaN(t=Math.abs(t))?2:t,o=void 0===r?",":r,s=void 0===n?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+s:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+s)+(a?o+Math.abs(i-c).toFixed(a).slice(2):"")},t.formatSize=function(e){return e=e>=1073741824?t.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?t.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?t.formatNumber(e/1024,0)+" KiB":t.formatNumber(e,0)+" bytes"},t.bytesFromIP=function(e){return-1!==e.indexOf(".")?t.bytesFromIPv4(e):-1!==e.indexOf(":")?t.bytesFromIPv6(e):null},t.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var r=t.createBuffer(),n=0;n<e.length;++n){var i=parseInt(e[n],10);if(isNaN(i))return null;r.putByte(i)}return r.getBytes()},t.bytesFromIPv6=function(e){for(var r=0,n=2*(8-(e=e.split(":").filter(function(e){return 0===e.length&&++r,!0})).length+r),i=t.createBuffer(),a=0;a<8;++a)if(e[a]&&0!==e[a].length){var o=t.hexToBytes(e[a]);o.length<2&&i.putByte(0),i.putBytes(o)}else i.fillWithByte(0,n),n=0;return i.getBytes()},t.bytesToIP=function(e){return 4===e.length?t.bytesToIPv4(e):16===e.length?t.bytesToIPv6(e):null},t.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},t.bytesToIPv6=function(e){if(16!==e.length)return null;for(var r=[],n=[],i=0,a=0;a<e.length;a+=2){for(var o=t.bytesToHex(e[a]+e[a+1]);"0"===o[0]&&"0"!==o;)o=o.substr(1);if("0"===o){var s=n[n.length-1],u=r.length;s&&u===s.end+1?(s.end=u,s.end-s.start>n[i].end-n[i].start&&(i=n.length-1)):n.push({start:u,end:u})}r.push(o)}if(n.length>0){var c=n[i];c.end-c.start>0&&(r.splice(c.start,c.end-c.start+1,""),0===c.start&&r.unshift(""),7===c.end&&r.push(""))}return r.join(":")},t.estimateCores=function(e,r){if("function"==typeof e&&(r=e,e={}),e=e||{},"cores"in t&&!e.update)return r(null,t.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return t.cores=navigator.hardwareConcurrency,r(null,t.cores);if("undefined"==typeof Worker)return t.cores=1,r(null,t.cores);if("undefined"==typeof Blob)return t.cores=2,r(null,t.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){var t=Date.now(),r=t+4;self.postMessage({st:t,et:r})})}.toString(),")()"],{type:"application/javascript"}));!function e(i,a,o){if(0===a){var s=Math.floor(i.reduce(function(e,t){return e+t},0)/i.length);return t.cores=Math.max(1,s),URL.revokeObjectURL(n),r(null,t.cores)}!function(e,t){for(var r=[],i=[],a=0;a<e;++a){var o=new Worker(n);o.addEventListener("message",function(n){if(i.push(n.data),i.length===e){for(var a=0;a<e;++a)r[a].terminate();t(null,i)}}),r.push(o)}for(var a=0;a<e;++a)r[a].postMessage(a)}(o,function(t,r){i.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var i=t[n],a=r[n]=[],o=0;o<e;++o)if(n!==o){var s=t[o];(i.st>s.st&&i.st<s.et||s.st>i.st&&s.st<i.et)&&a.push(o)}return r.reduce(function(e,t){return Math.max(e,t.length)},0)}(o,r)),e(i,a-1,o)})}([],5,16)}}),MP.cipher=MP.cipher||{};MP.cipher.algorithms=MP.cipher.algorithms||{},MP.cipher.createCipher=function(e,t){var r=e;if("string"==typeof r&&(r=MP.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new MP.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},MP.cipher.createDecipher=function(e,t){var r=e;if("string"==typeof r&&(r=MP.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new MP.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},MP.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),MP.cipher.algorithms[e]=t},MP.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in MP.cipher.algorithms?MP.cipher.algorithms[e]:null};var jP=MP.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};jP.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=MP.util.createBuffer(),this.output=e.output||MP.util.createBuffer(),this.mode.start(t)},jP.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},jP.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))};n(function(e){MP.cipher=MP.cipher||{};var t=e.exports=MP.cipher.modes=MP.cipher.modes||{};function r(e){if("string"==typeof e&&(e=MP.util.createBuffer(e)),MP.util.isArray(e)&&e.length>4){var t=e;e=MP.util.createBuffer();for(var r=0;r<t.length;++r)e.putByte(t[r])}return MP.util.isArray(e)||(e=[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]),e}function n(e){e[e.length-1]=e[e.length-1]+1&4294967295}function i(e){return[e/4294967296|0,4294967295&e]}t.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.ecb.prototype.start=function(e){},t.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},t.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},t.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},t.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},t.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},t.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv),this._prev=this._iv.slice(0)}},t.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},t.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},t.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},t.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},t.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=MP.util.createBuffer(),this._partialBytes=0},t.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},t.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},t.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=MP.util.createBuffer(),this._partialBytes=0},t.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},t.ofb.prototype.decrypt=t.ofb.prototype.encrypt,t.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=MP.util.createBuffer(),this._partialBytes=0},t.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=r(e.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},t.ctr.prototype.encrypt=function(e,t,r){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var a=0;a<this._ints;++a)t.putInt32(e.getInt32()^this._outBlock[a]);else{var o=(this.blockSize-i)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(o>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}n(this._inBlock)},t.ctr.prototype.decrypt=t.ctr.prototype.encrypt,t.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=MP.util.createBuffer(),this._partialBytes=0,this._R=3774873600},t.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=MP.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?MP.util.createBuffer(e.additionalData):MP.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=MP.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=r.length();if(12===a)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(i(8*a)))}this._inBlock=this._j0.slice(0),n(this._inBlock),this._partialBytes=0,t=MP.util.createBuffer(t),this._aDataLength=i(8*t.length());var o=t.length()%this.blockSize;for(o&&t.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},t.gcm.prototype.encrypt=function(e,t,r){var i=e.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize){for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^=e.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-i)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(a=0;a<this._ints;++a)this._partialOutput.putInt32(e.getInt32()^this._outBlock[a]);if(0===o||r){if(r){var s=i%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(a=0;a<this._ints;++a)this._outBlock[a]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),n(this._inBlock)},t.gcm.prototype.decrypt=function(e,t,r){var i=e.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),n(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var a=0;a<this._ints;++a)t.putInt32(this._outBlock[a]^this._hashBlock[a]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize},t.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=MP.util.createBuffer();var n=this._aDataLength.concat(i(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,n);var a=[];this.cipher.encrypt(this._j0,a);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^a[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},t.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){e[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},t.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},t.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,i=this._m[r][n];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t},t.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},t.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,a=new Array(i),o=0;o<i;++o){var s=[0,0,0,0],u=(n-1-o%n)*t;s[o/n|0]=1<<t-1<<u,a[o]=this.generateSubHashTable(this.multiply(s,e),t)}return a},t.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var o=1;o<a;++o){var s=i[a],u=i[o];i[a+o]=[s[0]^u[0],s[1]^u[1],s[2]^u[2],s[3]^u[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var c=i[a^n];i[a]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return i}}),MP.aes=MP.aes||{};function FP(e,t){MP.cipher.registerAlgorithm(e,function(){return new MP.aes.Algorithm(e,t)})}MP.aes.startEncrypting=function(e,t,r,n){var i=$P({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i},MP.aes.createEncryptionCipher=function(e,t){return $P({key:e,output:null,decrypt:!1,mode:t})},MP.aes.startDecrypting=function(e,t,r,n){var i=$P({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i},MP.aes.createDecryptionCipher=function(e,t){return $P({key:e,output:null,decrypt:!0,mode:t})},MP.aes.Algorithm=function(e,t){HP||WP();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return XP(r._w,e,t,!1)},decrypt:function(e,t){return XP(r._w,e,t,!0)}}}),r._init=!1},MP.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(MP.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){t=r,r=MP.util.createBuffer();for(var n=0;n<t.length;++n)r.putByte(t[n])}}else r=MP.util.createBuffer(r);if(!MP.util.isArray(r)){t=r,r=[];var i=t.length();if(16===i||24===i||32===i){i>>>=2;for(n=0;n<i;++n)r.push(t.getInt32())}}if(!MP.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var a=this.mode.name,o=-1!==["CFB","OFB","CTR","GCM"].indexOf(a);this._w=YP(r,e.decrypt&&!o),this._init=!0}},MP.aes._expandKey=function(e,t){return HP||WP(),YP(e,t)},MP.aes._updateBlock=XP,FP("AES-ECB",MP.cipher.modes.ecb),FP("AES-CBC",MP.cipher.modes.cbc),FP("AES-CFB",MP.cipher.modes.cfb),FP("AES-OFB",MP.cipher.modes.ofb),FP("AES-CTR",MP.cipher.modes.ctr),FP("AES-GCM",MP.cipher.modes.gcm);var BP,VP,GP,qP,KP,HP=!1,zP=4;function WP(){HP=!0,GP=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;BP=new Array(256),VP=new Array(256),qP=new Array(4),KP=new Array(4);for(t=0;t<4;++t)qP[t]=new Array(256),KP[t]=new Array(256);var r,n,i,a,o,s,u,c=0,l=0;for(t=0;t<256;++t){a=(a=l^l<<1^l<<2^l<<3^l<<4)>>8^255&a^99,BP[c]=a,VP[a]=c,s=(o=e[a])<<24^a<<16^a<<8^a^o,u=((r=e[c])^(n=e[r])^(i=e[n]))<<24^(c^i)<<16^(c^n^i)<<8^c^r^i;for(var f=0;f<4;++f)qP[f][c]=s,KP[f][a]=u,s=s<<24|s>>>8,u=u<<24|u>>>8;0===c?c=l=1:(c=r^e[e[e[r^i]]],l^=e[e[l]])}}function YP(e,t){for(var r,n=e.slice(0),i=1,a=n.length,o=zP*(a+6+1),s=a;s<o;++s)r=n[s-1],s%a==0?(r=BP[r>>>16&255]<<24^BP[r>>>8&255]<<16^BP[255&r]<<8^BP[r>>>24]^GP[i]<<24,i++):a>6&&s%a==4&&(r=BP[r>>>24]<<24^BP[r>>>16&255]<<16^BP[r>>>8&255]<<8^BP[255&r]),n[s]=n[s-a]^r;if(t){for(var u,c=KP[0],l=KP[1],f=KP[2],d=KP[3],p=n.slice(0),h=(s=0,(o=n.length)-zP);s<o;s+=zP,h-=zP)if(0===s||s===o-zP)p[s]=n[h],p[s+1]=n[h+3],p[s+2]=n[h+2],p[s+3]=n[h+1];else for(var v=0;v<zP;++v)u=n[h+v],p[s+(3&-v)]=c[BP[u>>>24]]^l[BP[u>>>16&255]]^f[BP[u>>>8&255]]^d[BP[255&u]];n=p}return n}function XP(e,t,r,n){var i,a,o,s,u,c,l,f,d,p,h,v,m=e.length/4-1;n?(i=KP[0],a=KP[1],o=KP[2],s=KP[3],u=VP):(i=qP[0],a=qP[1],o=qP[2],s=qP[3],u=BP),c=t[0]^e[0],l=t[n?3:1]^e[1],f=t[2]^e[2],d=t[n?1:3]^e[3];for(var g=3,y=1;y<m;++y)p=i[c>>>24]^a[l>>>16&255]^o[f>>>8&255]^s[255&d]^e[++g],h=i[l>>>24]^a[f>>>16&255]^o[d>>>8&255]^s[255&c]^e[++g],v=i[f>>>24]^a[d>>>16&255]^o[c>>>8&255]^s[255&l]^e[++g],d=i[d>>>24]^a[c>>>16&255]^o[l>>>8&255]^s[255&f]^e[++g],c=p,l=h,f=v;r[0]=u[c>>>24]<<24^u[l>>>16&255]<<16^u[f>>>8&255]<<8^u[255&d]^e[++g],r[n?3:1]=u[l>>>24]<<24^u[f>>>16&255]<<16^u[d>>>8&255]<<8^u[255&c]^e[++g],r[2]=u[f>>>24]<<24^u[d>>>16&255]<<16^u[c>>>8&255]<<8^u[255&l]^e[++g],r[n?1:3]=u[d>>>24]<<24^u[c>>>16&255]<<16^u[l>>>8&255]<<8^u[255&f]^e[++g]}function $P(e){var t,r="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),n=(t=e.decrypt?MP.cipher.createDecipher(r,e.key):MP.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var i=null;r instanceof MP.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=e,n.call(t,r)},t}n(function(e){MP.pki=MP.pki||{};var t=e.exports=MP.pki.oids=MP.oids=MP.oids||{};function r(e,r){t[e]=r,t[r]=e}function n(e,r){t[e]=r}r("1.2.840.113549.1.1.1","rsaEncryption"),r("1.2.840.113549.1.1.4","md5WithRSAEncryption"),r("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),r("1.2.840.113549.1.1.7","RSAES-OAEP"),r("1.2.840.113549.1.1.8","mgf1"),r("1.2.840.113549.1.1.9","pSpecified"),r("1.2.840.113549.1.1.10","RSASSA-PSS"),r("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),r("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),r("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),r("1.2.840.10040.4.3","dsa-with-sha1"),r("1.3.14.3.2.7","desCBC"),r("1.3.14.3.2.26","sha1"),r("2.16.840.1.101.3.4.2.1","sha256"),r("2.16.840.1.101.3.4.2.2","sha384"),r("2.16.840.1.101.3.4.2.3","sha512"),r("1.2.840.113549.2.5","md5"),r("1.2.840.113549.1.7.1","data"),r("1.2.840.113549.1.7.2","signedData"),r("1.2.840.113549.1.7.3","envelopedData"),r("1.2.840.113549.1.7.4","signedAndEnvelopedData"),r("1.2.840.113549.1.7.5","digestedData"),r("1.2.840.113549.1.7.6","encryptedData"),r("1.2.840.113549.1.9.1","emailAddress"),r("1.2.840.113549.1.9.2","unstructuredName"),r("1.2.840.113549.1.9.3","contentType"),r("1.2.840.113549.1.9.4","messageDigest"),r("1.2.840.113549.1.9.5","signingTime"),r("1.2.840.113549.1.9.6","counterSignature"),r("1.2.840.113549.1.9.7","challengePassword"),r("1.2.840.113549.1.9.8","unstructuredAddress"),r("1.2.840.113549.1.9.14","extensionRequest"),r("1.2.840.113549.1.9.20","friendlyName"),r("1.2.840.113549.1.9.21","localKeyId"),r("1.2.840.113549.1.9.22.1","x509Certificate"),r("1.2.840.113549.1.12.10.1.1","keyBag"),r("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),r("1.2.840.113549.1.12.10.1.3","certBag"),r("1.2.840.113549.1.12.10.1.4","crlBag"),r("1.2.840.113549.1.12.10.1.5","secretBag"),r("1.2.840.113549.1.12.10.1.6","safeContentsBag"),r("1.2.840.113549.1.5.13","pkcs5PBES2"),r("1.2.840.113549.1.5.12","pkcs5PBKDF2"),r("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),r("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),r("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),r("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),r("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),r("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),r("1.2.840.113549.2.7","hmacWithSHA1"),r("1.2.840.113549.2.8","hmacWithSHA224"),r("1.2.840.113549.2.9","hmacWithSHA256"),r("1.2.840.113549.2.10","hmacWithSHA384"),r("1.2.840.113549.2.11","hmacWithSHA512"),r("1.2.840.113549.3.7","des-EDE3-CBC"),r("2.16.840.1.101.3.4.1.2","aes128-CBC"),r("2.16.840.1.101.3.4.1.22","aes192-CBC"),r("2.16.840.1.101.3.4.1.42","aes256-CBC"),r("2.5.4.3","commonName"),r("2.5.4.5","serialName"),r("2.5.4.6","countryName"),r("2.5.4.7","localityName"),r("2.5.4.8","stateOrProvinceName"),r("2.5.4.10","organizationName"),r("2.5.4.11","organizationalUnitName"),r("2.16.840.1.113730.1.1","nsCertType"),n("2.5.29.1","authorityKeyIdentifier"),n("2.5.29.2","keyAttributes"),n("2.5.29.3","certificatePolicies"),n("2.5.29.4","keyUsageRestriction"),n("2.5.29.5","policyMapping"),n("2.5.29.6","subtreesConstraint"),n("2.5.29.7","subjectAltName"),n("2.5.29.8","issuerAltName"),n("2.5.29.9","subjectDirectoryAttributes"),n("2.5.29.10","basicConstraints"),n("2.5.29.11","nameConstraints"),n("2.5.29.12","policyConstraints"),n("2.5.29.13","basicConstraints"),r("2.5.29.14","subjectKeyIdentifier"),r("2.5.29.15","keyUsage"),n("2.5.29.16","privateKeyUsagePeriod"),r("2.5.29.17","subjectAltName"),r("2.5.29.18","issuerAltName"),r("2.5.29.19","basicConstraints"),n("2.5.29.20","cRLNumber"),n("2.5.29.21","cRLReason"),n("2.5.29.22","expirationDate"),n("2.5.29.23","instructionCode"),n("2.5.29.24","invalidityDate"),n("2.5.29.25","cRLDistributionPoints"),n("2.5.29.26","issuingDistributionPoint"),n("2.5.29.27","deltaCRLIndicator"),n("2.5.29.28","issuingDistributionPoint"),n("2.5.29.29","certificateIssuer"),n("2.5.29.30","nameConstraints"),r("2.5.29.31","cRLDistributionPoints"),r("2.5.29.32","certificatePolicies"),n("2.5.29.33","policyMappings"),n("2.5.29.34","policyConstraints"),r("2.5.29.35","authorityKeyIdentifier"),n("2.5.29.36","policyConstraints"),r("2.5.29.37","extKeyUsage"),n("2.5.29.46","freshestCRL"),n("2.5.29.54","inhibitAnyPolicy"),r("1.3.6.1.4.1.11129.2.4.2","timestampList"),r("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),r("1.3.6.1.5.5.7.3.1","serverAuth"),r("1.3.6.1.5.5.7.3.2","clientAuth"),r("1.3.6.1.5.5.7.3.3","codeSigning"),r("1.3.6.1.5.5.7.3.4","emailProtection"),r("1.3.6.1.5.5.7.3.8","timeStamping")}),n(function(e){var t=e.exports=MP.asn1=MP.asn1||{};function r(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}t.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},t.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},t.create=function(e,r,n,i,a){if(MP.util.isArray(i)){for(var o=[],s=0;s<i.length;++s)void 0!==i[s]&&o.push(i[s]);i=o}var u={tagClass:e,type:r,constructed:n,composed:n||MP.util.isArray(i),value:i};return a&&"bitStringContents"in a&&(u.bitStringContents=a.bitStringContents,u.original=t.copy(u)),u},t.copy=function(e,r){var n;if(MP.util.isArray(e)){n=[];for(var i=0;i<e.length;++i)n.push(t.copy(e[i],r));return n}return"string"==typeof e?e:(n={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:t.copy(e.value,r)},r&&!r.excludeBitStringContents&&(n.bitStringContents=e.bitStringContents),n)},t.equals=function(e,r,n){if(MP.util.isArray(e)){if(!MP.util.isArray(r))return!1;if(e.length!==r.length)return!1;for(var i=0;i<e.length;++i)if(!t.equals(e[i],r[i]))return!1;return!0}if(typeof e!=typeof r)return!1;if("string"==typeof e)return e===r;var a=e.tagClass===r.tagClass&&e.type===r.type&&e.constructed===r.constructed&&e.composed===r.composed&&t.equals(e.value,r.value);return n&&n.includeBitStringContents&&(a=a&&e.bitStringContents===r.bitStringContents),a},t.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t};var n=function(e,t){var n=e.getByte();if(128!==n){var i;if(128&n){var a=127&n;r(e,--t,a),i=e.getInt(a<<3)}else i=n;if(i<0)throw new Error("Negative length: "+i);return i}};t.fromDer=function(e,i){return void 0===i&&(i={strict:!0,decodeBitStrings:!0}),"boolean"==typeof i&&(i={strict:i,decodeBitStrings:!0}),"strict"in i||(i.strict=!0),"decodeBitStrings"in i||(i.decodeBitStrings=!0),"string"==typeof e&&(e=MP.util.createBuffer(e)),function e(i,a,o,s){var u;r(i,a,2);var c=i.getByte();a--;var l=192&c;var f=31&c;u=i.length();var d=n(i,a);a-=u-i.length();if(void 0!==d&&d>a){if(s.strict){var p=new Error("Too few bytes to read ASN.1 value.");throw p.available=i.length(),p.remaining=a,p.requested=d,p}d=a}var h;var v;var m=32==(32&c);if(m)if(h=[],void 0===d)for(;;){if(r(i,a,2),i.bytes(2)===String.fromCharCode(0,0)){i.getBytes(2),a-=2;break}u=i.length(),h.push(e(i,a,o+1,s)),a-=u-i.length()}else for(;d>0;)u=i.length(),h.push(e(i,d,o+1,s)),a-=u-i.length(),d-=u-i.length();void 0===h&&l===t.Class.UNIVERSAL&&f===t.Type.BITSTRING&&(v=i.bytes(d));if(void 0===h&&s.decodeBitStrings&&l===t.Class.UNIVERSAL&&f===t.Type.BITSTRING&&d>1){var g=i.read,y=a,E=0;if(f===t.Type.BITSTRING&&(r(i,a,1),E=i.getByte(),a--),0===E)try{u=i.length();var b={verbose:s.verbose,strict:!0,decodeBitStrings:!0},_=e(i,a,o+1,b),S=u-i.length();a-=S,f==t.Type.BITSTRING&&S++;var T=_.tagClass;S!==d||T!==t.Class.UNIVERSAL&&T!==t.Class.CONTEXT_SPECIFIC||(h=[_])}catch(e){}void 0===h&&(i.read=g,a=y)}if(void 0===h){if(void 0===d){if(s.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");d=a}if(f===t.Type.BMPSTRING)for(h="";d>0;d-=2)r(i,a,2),h+=String.fromCharCode(i.getInt16()),a-=2;else h=i.getBytes(d)}var w=void 0===v?null:{bitStringContents:v};return t.create(l,f,m,h,w)}(e,e.length(),0,i)},t.toDer=function(e){var r=MP.util.createBuffer(),n=e.tagClass|e.type,i=MP.util.createBuffer(),a=!1;if("bitStringContents"in e&&(a=!0,e.original&&(a=t.equals(e,e.original))),a)i.putBytes(e.bitStringContents);else if(e.composed){e.constructed?n|=32:i.putByte(0);for(var o=0;o<e.value.length;++o)void 0!==e.value[o]&&i.putBuffer(t.toDer(e.value[o]))}else if(e.type===t.Type.BMPSTRING)for(o=0;o<e.value.length;++o)i.putInt16(e.value.charCodeAt(o));else e.type===t.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0==(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128==(128&e.value.charCodeAt(1)))?i.putBytes(e.value.substr(1)):i.putBytes(e.value);if(r.putByte(n),i.length()<=127)r.putByte(127&i.length());else{var s=i.length(),u="";do{u+=String.fromCharCode(255&s),s>>>=8}while(s>0);r.putByte(128|u.length);for(o=u.length-1;o>=0;--o)r.putByte(u.charCodeAt(o))}return r.putBuffer(i),r},t.oidToDer=function(e){var t,r,n,i,a=e.split("."),o=MP.util.createBuffer();o.putByte(40*parseInt(a[0],10)+parseInt(a[1],10));for(var s=2;s<a.length;++s){t=!0,r=[],n=parseInt(a[s],10);do{i=127&n,n>>>=7,t||(i|=128),r.push(i),t=!1}while(n>0);for(var u=r.length-1;u>=0;--u)o.putByte(r[u])}return o},t.derToOid=function(e){var t;"string"==typeof e&&(e=MP.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)n<<=7,128&(r=e.getByte())?n+=127&r:(t+="."+(n+r),n=0);return t},t.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),s=0;if(e.length>11){var u=e.charAt(10),c=10;"+"!==u&&"-"!==u&&(s=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(a,o,s,0),c&&("+"===(u=e.charAt(c))||"-"===u)){var l=60*parseInt(e.substr(c+1,2),10)+parseInt(e.substr(c+4,2),10);l*=6e4,"+"===u?t.setTime(+t-l):t.setTime(+t+l)}return t},t.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),u=0,c=0,l=!1;"Z"===e.charAt(e.length-1)&&(l=!0);var f=e.length-5,d=e.charAt(f);"+"!==d&&"-"!==d||(c=60*parseInt(e.substr(f+1,2),10)+parseInt(e.substr(f+4,2),10),c*=6e4,"+"===d&&(c*=-1),l=!0);return"."===e.charAt(14)&&(u=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(r,n,i),t.setUTCHours(a,o,s,u),t.setTime(+t+c)):(t.setFullYear(r,n,i),t.setHours(a,o,s,u)),t},t.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},t.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},t.integerToDer=function(e){var t=MP.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},t.derToInteger=function(e){"string"==typeof e&&(e=MP.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},t.validate=function(e,r,n,i){var a=!1;if(e.tagClass!==r.tagClass&&void 0!==r.tagClass||e.type!==r.type&&void 0!==r.type)i&&(e.tagClass!==r.tagClass&&i.push("["+r.name+'] Expected tag class "'+r.tagClass+'", got "'+e.tagClass+'"'),e.type!==r.type&&i.push("["+r.name+'] Expected type "'+r.type+'", got "'+e.type+'"'));else if(e.constructed===r.constructed||void 0===r.constructed){if(a=!0,r.value&&MP.util.isArray(r.value))for(var o=0,s=0;a&&s<r.value.length;++s)a=r.value[s].optional||!1,e.value[o]&&((a=t.validate(e.value[o],r.value[s],n,i))?++o:r.value[s].optional&&(a=!0)),!a&&i&&i.push("["+r.name+'] Tag class "'+r.tagClass+'", type "'+r.type+'" expected value length "'+r.value.length+'", got "'+e.value.length+'"');if(a&&n&&(r.capture&&(n[r.capture]=e.value),r.captureAsn1&&(n[r.captureAsn1]=e),r.captureBitStringContents&&"bitStringContents"in e&&(n[r.captureBitStringContents]=e.bitStringContents),r.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)n[r.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");n[r.captureBitStringValue]=e.bitStringContents.slice(1)}}else i&&i.push("["+r.name+'] Expected constructed "'+r.constructed+'", got "'+e.constructed+'"');return a};var i=/[^\\u0000-\\u00ff]/;t.prettyPrint=function(e,r,n){var a="";n=n||2,(r=r||0)>0&&(a+="\n");for(var o="",s=0;s<r*n;++s)o+=" ";switch(a+=o+"Tag: ",e.tagClass){case t.Class.UNIVERSAL:a+="Universal:";break;case t.Class.APPLICATION:a+="Application:";break;case t.Class.CONTEXT_SPECIFIC:a+="Context-Specific:";break;case t.Class.PRIVATE:a+="Private:"}if(e.tagClass===t.Class.UNIVERSAL)switch(a+=e.type,e.type){case t.Type.NONE:a+=" (None)";break;case t.Type.BOOLEAN:a+=" (Boolean)";break;case t.Type.INTEGER:a+=" (Integer)";break;case t.Type.BITSTRING:a+=" (Bit string)";break;case t.Type.OCTETSTRING:a+=" (Octet string)";break;case t.Type.NULL:a+=" (Null)";break;case t.Type.OID:a+=" (Object Identifier)";break;case t.Type.ODESC:a+=" (Object Descriptor)";break;case t.Type.EXTERNAL:a+=" (External or Instance of)";break;case t.Type.REAL:a+=" (Real)";break;case t.Type.ENUMERATED:a+=" (Enumerated)";break;case t.Type.EMBEDDED:a+=" (Embedded PDV)";break;case t.Type.UTF8:a+=" (UTF8)";break;case t.Type.ROID:a+=" (Relative Object Identifier)";break;case t.Type.SEQUENCE:a+=" (Sequence)";break;case t.Type.SET:a+=" (Set)";break;case t.Type.PRINTABLESTRING:a+=" (Printable String)";break;case t.Type.IA5String:a+=" (IA5String (ASCII))";break;case t.Type.UTCTIME:a+=" (UTC time)";break;case t.Type.GENERALIZEDTIME:a+=" (Generalized time)";break;case t.Type.BMPSTRING:a+=" (BMP String)"}else a+=e.type;if(a+="\n",a+=o+"Constructed: "+e.constructed+"\n",e.composed){var u=0,c="";for(s=0;s<e.value.length;++s)void 0!==e.value[s]&&(u+=1,c+=t.prettyPrint(e.value[s],r+1,n),s+1<e.value.length&&(c+=","));a+=o+"Sub values: "+u+c}else{if(a+=o+"Value: ",e.type===t.Type.OID){var l=t.derToOid(e.value);a+=l,MP.pki&&MP.pki.oids&&l in MP.pki.oids&&(a+=" ("+MP.pki.oids[l]+") ")}if(e.type===t.Type.INTEGER)try{a+=t.derToInteger(e.value)}catch(t){a+="0x"+MP.util.bytesToHex(e.value)}else if(e.type===t.Type.BITSTRING){if(e.value.length>1?a+="0x"+MP.util.bytesToHex(e.value.slice(1)):a+="(none)",e.value.length>0){var f=e.value.charCodeAt(0);1==f?a+=" (1 unused bit shown)":f>1&&(a+=" ("+f+" unused bits shown)")}}else e.type===t.Type.OCTETSTRING?(i.test(e.value)||(a+="("+e.value+") "),a+="0x"+MP.util.bytesToHex(e.value)):e.type===t.Type.UTF8?a+=MP.util.decodeUtf8(e.value):e.type===t.Type.PRINTABLESTRING||e.type===t.Type.IA5String?a+=e.value:i.test(e.value)?a+="0x"+MP.util.bytesToHex(e.value):0===e.value.length?a+="[null]":a+=e.value}return a}}),MP.md=MP.md||{};MP.md.algorithms=MP.md.algorithms||{};n(function(e){(e.exports=MP.hmac=MP.hmac||{}).create=function(){var e=null,t=null,r=null,n=null,i={start:function(i,a){if(null!==i)if("string"==typeof i){if(!((i=i.toLowerCase())in MP.md.algorithms))throw new Error('Unknown hash algorithm "'+i+'"');t=MP.md.algorithms[i].create()}else t=i;if(null===a)a=e;else{if("string"==typeof a)a=MP.util.createBuffer(a);else if(MP.util.isArray(a)){var o=a;a=MP.util.createBuffer();for(var s=0;s<o.length;++s)a.putByte(o[s])}var u=a.length();u>t.blockLength&&(t.start(),t.update(a.bytes()),a=t.digest()),r=MP.util.createBuffer(),n=MP.util.createBuffer(),u=a.length();for(s=0;s<u;++s){o=a.at(s);r.putByte(54^o),n.putByte(92^o)}if(u<t.blockLength)for(o=t.blockLength-u,s=0;s<o;++s)r.putByte(54),n.putByte(92);e=a,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(n),t.update(e),t.digest()}};return i.digest=i.getMac,i}}),n(function(e){MP.mgf=MP.mgf||{},(e.exports=MP.mgf.mgf1=MP.mgf1=MP.mgf1||{}).create=function(e){return{generate:function(t,r){for(var n=new MP.util.ByteBuffer,i=Math.ceil(r/e.digestLength),a=0;a<i;a++){var o=new MP.util.ByteBuffer;o.putInt32(a),e.start(),e.update(t+o.getBytes()),n.putBuffer(e.digest())}return n.truncate(n.length()-r),n.getBytes()}}}});var QP,JP={},ZP=MP.pkcs5=MP.pkcs5||{};MP.util.isNodejs&&!MP.options.usePureJavaScript&&(QP=JP);MP.pbkdf2=ZP.pbkdf2=function(e,t,r,n,i,a){if("function"==typeof i&&(a=i,i=null),MP.util.isNodejs&&!MP.options.usePureJavaScript&&QP.pbkdf2&&(null===i||"object"!=typeof i)&&(QP.pbkdf2Sync.length>4||!i||"sha1"===i))return"string"!=typeof i&&(i="sha1"),e=new ag(e,"binary"),t=new ag(t,"binary"),a?4===QP.pbkdf2Sync.length?QP.pbkdf2(e,t,r,n,function(e,t){if(e)return a(e);a(null,t.toString("binary"))}):QP.pbkdf2(e,t,r,n,i,function(e,t){if(e)return a(e);a(null,t.toString("binary"))}):4===QP.pbkdf2Sync.length?QP.pbkdf2Sync(e,t,r,n).toString("binary"):QP.pbkdf2Sync(e,t,r,n,i).toString("binary");if(null==i&&(i="sha1"),"string"==typeof i){if(!(i in MP.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=MP.md[i].create()}var o=i.digestLength;if(n>4294967295*o){var s=new Error("Derived key is too long.");if(a)return a(s);throw s}var u=Math.ceil(n/o),c=n-(u-1)*o,l=MP.hmac.create();l.start(i,e);var f,d,p,h="";if(!a){for(var v=1;v<=u;++v){l.start(null,null),l.update(t),l.update(MP.util.int32ToBytes(v)),f=p=l.digest().getBytes();for(var m=2;m<=r;++m)l.start(null,null),l.update(p),d=l.digest().getBytes(),f=MP.util.xorBytes(f,d,o),p=d;h+=v<u?f:f.substr(0,c)}return h}v=1;function g(){if(v>u)return a(null,h);l.start(null,null),l.update(t),l.update(MP.util.int32ToBytes(v)),f=p=l.digest().getBytes(),m=2,y()}function y(){if(m<=r)return l.start(null,null),l.update(p),d=l.digest().getBytes(),f=MP.util.xorBytes(f,d,o),p=d,++m,MP.util.setImmediate(y);h+=v<u?f:f.substr(0,c),++v,g()}g()},n(function(e){var t=e.exports=MP.pem=MP.pem||{};function r(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";var a=0,o=-1;for(i=0;i<t.length;++i,++a)if(a>65&&-1!==o){var s=t[o];","===s?(++o,t=t.substr(0,o)+"\r\n "+t.substr(o)):t=t.substr(0,o)+"\r\n"+s+t.substr(o+1),a=i-o-1,o=-1,++i}else" "!==t[i]&&"\t"!==t[i]&&","!==t[i]||(o=i);return t}function n(e){return e.replace(/^\s+/,"")}t.encode=function(e,t){t=t||{};var n,i="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(i+=r(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(i+=r(n={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),i+=r(n)),e.headers)for(var a=0;a<e.headers.length;++a)i+=r(e.headers[a]);return e.procType&&(i+="\r\n"),i+=MP.util.encode64(e.body,t.maxline||64)+"\r\n",i+="-----END "+e.type+"-----\r\n"},t.decode=function(e){for(var t,r=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,a=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,o=/\r?\n/;t=i.exec(e);){var s={type:t[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:MP.util.decode64(t[3])};if(r.push(s),t[2]){for(var u=t[2].split(o),c=0;t&&c<u.length;){for(var l=u[c].replace(/\s+$/,""),f=c+1;f<u.length;++f){var d=u[f];if(!/\s/.test(d[0]))break;l+=d,c=f}if(t=l.match(a)){for(var p={name:t[1],values:[]},h=t[2].split(","),v=0;v<h.length;++v)p.values.push(n(h[v]));if(s.procType)if(s.contentDomain||"Content-Domain"!==p.name)if(s.dekInfo||"DEK-Info"!==p.name)s.headers.push(p);else{if(0===p.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');s.dekInfo={algorithm:h[0],parameters:h[1]||null}}else s.contentDomain=h[0]||"";else{if("Proc-Type"!==p.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==p.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');s.procType={version:h[0],type:h[1]}}}++c}if("ENCRYPTED"===s.procType&&!s.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}}),n(function(e){var t=e.exports=MP.sha256=MP.sha256||{};MP.md.sha256=MP.md.algorithms.sha256=t,t.create=function(){n||(r=String.fromCharCode(128),r+=MP.util.fillString(String.fromCharCode(0),64),i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=!0);var e=null,t=MP.util.createBuffer(),o=new Array(64),s={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var r=s.messageLengthSize/4,n=0;n<r;++n)s.fullMessageLength.push(0);return t=MP.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},s}};return s.start(),s.update=function(r,n){"utf8"===n&&(r=MP.util.encodeUtf8(r));var i=r.length;s.messageLength+=i,i=[i/4294967296>>>0,i>>>0];for(var u=s.fullMessageLength.length-1;u>=0;--u)s.fullMessageLength[u]+=i[1],i[1]=i[0]+(s.fullMessageLength[u]/4294967296>>>0),s.fullMessageLength[u]=s.fullMessageLength[u]>>>0,i[0]=i[1]/4294967296>>>0;return t.putBytes(r),a(e,o,t),(t.read>2048||0===t.length())&&t.compact(),s},s.digest=function(){var n=MP.util.createBuffer();n.putBytes(t.bytes());var i,u=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize&s.blockLength-1;n.putBytes(r.substr(0,s.blockLength-u));for(var c=8*s.fullMessageLength[0],l=0;l<s.fullMessageLength.length-1;++l)c+=(i=8*s.fullMessageLength[l+1])/4294967296>>>0,n.putInt32(c>>>0),c=i>>>0;n.putInt32(c);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};a(f,o,n);var d=MP.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d.putInt32(f.h5),d.putInt32(f.h6),d.putInt32(f.h7),d},s};var r=null,n=!1,i=null;function a(e,t,r){for(var n,a,o,s,u,c,l,f,d,p,h,v,m,g=r.length();g>=64;){for(u=0;u<16;++u)t[u]=r.getInt32();for(;u<64;++u)n=((n=t[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,a=((a=t[u-15])>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,t[u]=n+t[u-7]+a+t[u-16]|0;for(c=e.h0,l=e.h1,f=e.h2,d=e.h3,p=e.h4,h=e.h5,v=e.h6,m=e.h7,u=0;u<64;++u)o=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),s=c&l|f&(c^l),n=m+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(v^p&(h^v))+i[u]+t[u],m=v,v=h,h=p,p=d+n>>>0,d=f,f=l,l=c,c=n+(a=o+s)>>>0;e.h0=e.h0+c|0,e.h1=e.h1+l|0,e.h2=e.h2+f|0,e.h3=e.h3+d|0,e.h4=e.h4+p|0,e.h5=e.h5+h|0,e.h6=e.h6+v|0,e.h7=e.h7+m|0,g-=64}}}),n(function(e){var t=null;!MP.util.isNodejs||MP.options.usePureJavaScript||xu.versions["node-webkit"]||(t=JP),(e.exports=MP.prng=MP.prng||{}).create=function(e){for(var r={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=e.md,i=new Array(32),a=0;a<32;++a)i[a]=n.create();function o(){if(r.pools[0].messageLength>=32)return s();var e=32-r.pools[0].messageLength<<5;r.collect(r.seedFileSync(e)),s()}function s(){r.reseeds=4294967295===r.reseeds?0:r.reseeds+1;var e=r.plugin.md.create();e.update(r.keyBytes);for(var t=1,n=0;n<32;++n)r.reseeds%t==0&&(e.update(r.pools[n].digest().getBytes()),r.pools[n].start()),t<<=1;r.keyBytes=e.digest().getBytes(),e.start(),e.update(r.keyBytes);var i=e.digest().getBytes();r.key=r.plugin.formatKey(r.keyBytes),r.seed=r.plugin.formatSeed(i),r.generated=0}function u(e){var t=null;if("undefined"!=typeof window){var r=window.crypto||window.msCrypto;r&&r.getRandomValues&&(t=function(e){return r.getRandomValues(e)})}var n=MP.util.createBuffer();if(t)for(;n.length()<e;){var i=Math.max(1,Math.min(e-n.length(),65536)/4),a=new Uint32Array(Math.floor(i));try{t(a);for(var o=0;o<a.length;++o)n.putInt32(a[o])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(n.length()<e)for(var s,u,c,l=Math.floor(65536*Math.random());n.length()<e;){u=16807*(65535&l),u+=(32767&(s=16807*(l>>16)))<<16,l=4294967295&(u=(2147483647&(u+=s>>15))+(u>>31));for(o=0;o<3;++o)c=l>>>(o<<3),c^=Math.floor(256*Math.random()),n.putByte(String.fromCharCode(255&c))}return n.getBytes(e)}return r.pools=i,r.pool=0,r.generate=function(e,t){if(!t)return r.generateSync(e);var n=r.plugin.cipher,i=r.plugin.increment,a=r.plugin.formatKey,o=r.plugin.formatSeed,u=MP.util.createBuffer();r.key=null,function c(l){if(l)return t(l);if(u.length()>=e)return t(null,u.getBytes(e));r.generated>1048575&&(r.key=null);if(null===r.key)return MP.util.nextTick(function(){!function(e){if(r.pools[0].messageLength>=32)return s(),e();var t=32-r.pools[0].messageLength<<5;r.seedFile(t,function(t,n){if(t)return e(t);r.collect(n),s(),e()})}(c)});var f=n(r.key,r.seed);r.generated+=f.length;u.putBytes(f);r.key=a(n(r.key,i(r.seed)));r.seed=o(n(r.key,r.seed));MP.util.setImmediate(c)}()},r.generateSync=function(e){var t=r.plugin.cipher,n=r.plugin.increment,i=r.plugin.formatKey,a=r.plugin.formatSeed;r.key=null;for(var s=MP.util.createBuffer();s.length()<e;){r.generated>1048575&&(r.key=null),null===r.key&&o();var u=t(r.key,r.seed);r.generated+=u.length,s.putBytes(u),r.key=i(t(r.key,n(r.seed))),r.seed=a(t(r.key,r.seed))}return s.getBytes(e)},t?(r.seedFile=function(e,r){t.randomBytes(e,function(e,t){if(e)return r(e);r(null,t.toString())})},r.seedFileSync=function(e){return t.randomBytes(e).toString()}):(r.seedFile=function(e,t){try{t(null,u(e))}catch(e){t(e)}},r.seedFileSync=u),r.collect=function(e){for(var t=e.length,n=0;n<t;++n)r.pools[r.pool].update(e.substr(n,1)),r.pool=31===r.pool?0:r.pool+1},r.collectInt=function(e,t){for(var n="",i=0;i<t;i+=8)n+=String.fromCharCode(e>>i&255);r.collect(n)},r.registerWorker=function(e){if(e===self)r.seedFile=function(e,t){self.addEventListener("message",function e(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",e),t(n.forge.prng.err,n.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:e}}})};else{e.addEventListener("message",function(t){var n=t.data;n.forge&&n.forge.prng&&r.seedFile(n.forge.prng.needed,function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})})})}},r}}),n(function(e){MP.random&&MP.random.getBytes?e.exports=MP.random:function(t){var r={},n=new Array(4),i=MP.util.createBuffer();function a(){var e=MP.prng.create(r);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}r.formatKey=function(e){var t=MP.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),MP.aes._expandKey(e,!1)},r.formatSeed=function(e){var t=MP.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},r.cipher=function(e,t){return MP.aes._updateBlock(e,t,n,!1),i.putInt32(n[0]),i.putInt32(n[1]),i.putInt32(n[2]),i.putInt32(n[3]),i.getBytes()},r.increment=function(e){return++e[3],e},r.md=MP.md.sha256;var o=a(),s=null;if("undefined"!=typeof window){var u=window.crypto||window.msCrypto;u&&u.getRandomValues&&(s=function(e){return u.getRandomValues(e)})}if(!MP.util.isNodejs&&!s){if("undefined"==typeof window||window.document,o.collectInt(+new Date,32),"undefined"!=typeof navigator){var c="";for(var l in navigator)try{"string"==typeof navigator[l]&&(c+=navigator[l])}catch(e){}o.collect(c),c=null}t&&(t().mousemove(function(e){o.collectInt(e.clientX,16),o.collectInt(e.clientY,16)}),t().keypress(function(e){o.collectInt(e.charCode,8)}))}if(MP.random)for(var l in o)MP.random[l]=o[l];else MP.random=o;MP.random.createInstance=a,e.exports=MP.random}("undefined"!=typeof jQuery?jQuery:null)}),n(function(e){var t=e.exports=MP.sha1=MP.sha1||{};MP.md.sha1=MP.md.algorithms.sha1=t,t.create=function(){n||(r=String.fromCharCode(128),r+=MP.util.fillString(String.fromCharCode(0),64),n=!0);var e=null,t=MP.util.createBuffer(),a=new Array(80),o={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var r=o.messageLengthSize/4,n=0;n<r;++n)o.fullMessageLength.push(0);return t=MP.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},o}};return o.start(),o.update=function(r,n){"utf8"===n&&(r=MP.util.encodeUtf8(r));var s=r.length;o.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var u=o.fullMessageLength.length-1;u>=0;--u)o.fullMessageLength[u]+=s[1],s[1]=s[0]+(o.fullMessageLength[u]/4294967296>>>0),o.fullMessageLength[u]=o.fullMessageLength[u]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(r),i(e,a,t),(t.read>2048||0===t.length())&&t.compact(),o},o.digest=function(){var n=MP.util.createBuffer();n.putBytes(t.bytes());var s,u=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;n.putBytes(r.substr(0,o.blockLength-u));for(var c=8*o.fullMessageLength[0],l=0;l<o.fullMessageLength.length-1;++l)c+=(s=8*o.fullMessageLength[l+1])/4294967296>>>0,n.putInt32(c>>>0),c=s>>>0;n.putInt32(c);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};i(f,a,n);var d=MP.util.createBuffer();return d.putInt32(f.h0),d.putInt32(f.h1),d.putInt32(f.h2),d.putInt32(f.h3),d.putInt32(f.h4),d},o};var r=null,n=!1;function i(e,t,r){for(var n,i,a,o,s,u,c,l=r.length();l>=64;){for(i=e.h0,a=e.h1,o=e.h2,s=e.h3,u=e.h4,c=0;c<16;++c)n=r.getInt32(),t[c]=n,n=(i<<5|i>>>27)+(s^a&(o^s))+u+1518500249+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<20;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(i<<5|i>>>27)+(s^a&(o^s))+u+1518500249+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<32;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(i<<5|i>>>27)+(a^o^s)+u+1859775393+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<40;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(i<<5|i>>>27)+(a^o^s)+u+1859775393+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<60;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(i<<5|i>>>27)+(a&o|s&(a^o))+u+2400959708+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;for(;c<80;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(i<<5|i>>>27)+(a^o^s)+u+3395469782+n,u=s,s=o,o=(a<<30|a>>>2)>>>0,a=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+o|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,l-=64}}}),n(function(e){var t=e.exports=MP.pkcs1=MP.pkcs1||{};function r(e,t,r){r||(r=MP.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),a=0;a<i;++a){var o=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a);r.start(),r.update(e+o),n+=r.digest().getBytes()}return n.substring(0,t)}t.encode_rsa_oaep=function(e,t,n){var i,a,o,s;"string"==typeof n?(i=n,a=arguments[3]||void 0,o=arguments[4]||void 0):n&&(i=n.label||void 0,a=n.seed||void 0,o=n.md||void 0,n.mgf1&&n.mgf1.md&&(s=n.mgf1.md)),o?o.start():o=MP.md.sha1.create(),s||(s=o);var u=Math.ceil(e.n.bitLength()/8),c=u-2*o.digestLength-2;if(t.length>c)throw(v=new Error("RSAES-OAEP input message length is too long.")).length=t.length,v.maxLength=c,v;i||(i=""),o.update(i,"raw");for(var l=o.digest(),f="",d=c-t.length,p=0;p<d;p++)f+="\0";var h=l.getBytes()+f+""+t;if(a){if(a.length!==o.digestLength){var v;throw(v=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=a.length,v.digestLength=o.digestLength,v}}else a=MP.random.getBytes(o.digestLength);var m=r(a,u-o.digestLength-1,s),g=MP.util.xorBytes(h,m,h.length),y=r(g,o.digestLength,s);return"\0"+MP.util.xorBytes(a,y,a.length)+g},t.decode_rsa_oaep=function(e,t,n){var i,a,o;"string"==typeof n?(i=n,a=arguments[3]||void 0):n&&(i=n.label||void 0,a=n.md||void 0,n.mgf1&&n.mgf1.md&&(o=n.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s)throw(m=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,m.expectedLength=s,m;if(void 0===a?a=MP.md.sha1.create():a.start(),o||(o=a),s<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),a.update(i,"raw");for(var u=a.digest().getBytes(),c=t.charAt(0),l=t.substring(1,a.digestLength+1),f=t.substring(1+a.digestLength),d=r(f,a.digestLength,o),p=r(MP.util.xorBytes(l,d,l.length),s-a.digestLength-1,o),h=MP.util.xorBytes(f,p,f.length),v=h.substring(0,a.digestLength),m="\0"!==c,g=0;g<a.digestLength;++g)m|=u.charAt(g)!==v.charAt(g);for(var y=1,E=a.digestLength,b=a.digestLength;b<h.length;b++){var _=h.charCodeAt(b);m|=_&(y?65534:0),E+=y&=1&_^1}if(m||1!==h.charCodeAt(E))throw new Error("Invalid RSAES-OAEP padding.");return h.substring(E+1)}}),MP.des=MP.des||{};function eM(e,t){MP.cipher.registerAlgorithm(e,function(){return new MP.des.Algorithm(e,t)})}MP.des.startEncrypting=function(e,t,r,n){var i=lM({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},MP.des.createEncryptionCipher=function(e,t){return lM({key:e,output:null,decrypt:!1,mode:t})},MP.des.startDecrypting=function(e,t,r,n){var i=lM({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},MP.des.createDecryptionCipher=function(e,t){return lM({key:e,output:null,decrypt:!0,mode:t})},MP.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return cM(r._keys,e,t,!1)},decrypt:function(e,t){return cM(r._keys,e,t,!0)}}}),r._init=!1},MP.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=MP.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],a=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],d=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],v=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=e.length()>8?3:1,g=[],y=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],E=0,b=0;b<m;b++){var _=e.getInt32(),S=e.getInt32();_^=(t=252645135&(_>>>4^S))<<4,_^=t=65535&((S^=t)>>>-16^_),_^=(t=858993459&(_>>>2^(S^=t<<-16)))<<2,_^=t=65535&((S^=t)>>>-16^_),_^=(t=1431655765&(_>>>1^(S^=t<<-16)))<<1,_^=t=16711935&((S^=t)>>>8^_),t=(_^=(t=1431655765&(_>>>1^(S^=t<<8)))<<1)<<8|(S^=t)>>>20&240,_=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=t;for(var T=0;T<y.length;++T){y[T]?(_=_<<2|_>>>26,S=S<<2|S>>>26):(_=_<<1|_>>>27,S=S<<1|S>>>27);var w=r[(_&=-15)>>>28]|n[_>>>24&15]|i[_>>>20&15]|a[_>>>16&15]|o[_>>>12&15]|s[_>>>8&15]|u[_>>>4&15],I=c[(S&=-15)>>>28]|l[S>>>24&15]|f[S>>>20&15]|d[S>>>16&15]|p[S>>>12&15]|h[S>>>8&15]|v[S>>>4&15];t=65535&(I>>>16^w),g[E++]=w^t,g[E++]=I^t<<16}}return g}(t),this._init=!0}},eM("DES-ECB",MP.cipher.modes.ecb),eM("DES-CBC",MP.cipher.modes.cbc),eM("DES-CFB",MP.cipher.modes.cfb),eM("DES-OFB",MP.cipher.modes.ofb),eM("DES-CTR",MP.cipher.modes.ctr),eM("3DES-ECB",MP.cipher.modes.ecb),eM("3DES-CBC",MP.cipher.modes.cbc),eM("3DES-CFB",MP.cipher.modes.cfb),eM("3DES-OFB",MP.cipher.modes.ofb),eM("3DES-CTR",MP.cipher.modes.ctr);var tM=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],rM=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],nM=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],iM=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],aM=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],oM=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],sM=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],uM=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function cM(e,t,r,n){var i,a,o=32===e.length?3:9;i=3===o?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s=t[0],u=t[1];s^=(a=252645135&(s>>>4^u))<<4,s^=(a=65535&(s>>>16^(u^=a)))<<16,s^=a=858993459&((u^=a)>>>2^s),s^=a=16711935&((u^=a<<2)>>>8^s),s=(s^=(a=1431655765&(s>>>1^(u^=a<<8)))<<1)<<1|s>>>31,u=(u^=a)<<1|u>>>31;for(var c=0;c<o;c+=3){for(var l=i[c+1],f=i[c+2],d=i[c];d!=l;d+=f){var p=u^e[d],h=(u>>>4|u<<28)^e[d+1];a=s,s=u,u=a^(rM[p>>>24&63]|iM[p>>>16&63]|oM[p>>>8&63]|uM[63&p]|tM[h>>>24&63]|nM[h>>>16&63]|aM[h>>>8&63]|sM[63&h])}a=s,s=u,u=a}u=u>>>1|u<<31,u^=a=1431655765&((s=s>>>1|s<<31)>>>1^u),u^=(a=16711935&(u>>>8^(s^=a<<1)))<<8,u^=(a=858993459&(u>>>2^(s^=a)))<<2,u^=a=65535&((s^=a)>>>16^u),u^=a=252645135&((s^=a<<16)>>>4^u),s^=a<<4,r[0]=s,r[1]=u}function lM(e){var t,r="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),n=(t=e.decrypt?MP.cipher.createDecipher(r,e.key):MP.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var i=null;r instanceof MP.util.ByteBuffer&&(i=r,r={}),(r=r||{}).output=i,r.iv=e,n.call(t,r)},t}n(function(e){var t=MP.asn1,r=e.exports=MP.pkcs7asn1=MP.pkcs7asn1||{};MP.pkcs7=MP.pkcs7||{},MP.pkcs7.asn1=r;var n={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};r.contentInfoValidator=n;var i={name:"EncryptedContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};r.envelopedDataValidator={name:"EnvelopedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(i)},r.encryptedDataValidator={name:"EncryptedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"}].concat(i)};var a={name:"SignerInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};r.signedDataValidator={name:"SignedData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},n,{name:"SignedData.Certificates",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,capture:"signerInfos",optional:!0,value:[a]}]},r.recipientInfoValidator={name:"RecipientInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:t.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}}),MP.mgf=MP.mgf||{};MP.mgf.mgf1=MP.mgf1;var fM;n(function(e){(e.exports=MP.pss=MP.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,r=e.md,n=e.mgf,i=r.digestLength,a=e.salt||null;if("string"==typeof a&&(a=MP.util.createBuffer(a)),"saltLength"in e)t=e.saltLength;else{if(null===a)throw new Error("Salt length not specified or specific salt not given.");t=a.length()}if(null!==a&&a.length()!==t)throw new Error("Given salt length does not match length of given salt.");var o=e.prng||MP.random,s={encode:function(e,s){var u,c,l=s-1,f=Math.ceil(l/8),d=e.digest().getBytes();if(f<i+t+2)throw new Error("Message is too long to encrypt.");c=null===a?o.getBytesSync(t):a.bytes();var p=new MP.util.ByteBuffer;p.fillWithByte(0,8),p.putBytes(d),p.putBytes(c),r.start(),r.update(p.getBytes());var h=r.digest().getBytes(),v=new MP.util.ByteBuffer;v.fillWithByte(0,f-t-i-2),v.putByte(1),v.putBytes(c);var m=v.getBytes(),g=f-i-1,y=n.generate(h,g),E="";for(u=0;u<g;u++)E+=String.fromCharCode(m.charCodeAt(u)^y.charCodeAt(u));var b=65280>>8*f-l&255;return(E=String.fromCharCode(E.charCodeAt(0)&~b)+E.substr(1))+h+String.fromCharCode(188)},verify:function(e,a,o){var s,u=o-1,c=Math.ceil(u/8);if(a=a.substr(-c),c<i+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==a.charCodeAt(c-1))throw new Error("Encoded message does not end in 0xBC.");var l=c-i-1,f=a.substr(0,l),d=a.substr(l,i),p=65280>>8*c-u&255;if(0!=(f.charCodeAt(0)&p))throw new Error("Bits beyond keysize not zero as expected.");var h=n.generate(d,l),v="";for(s=0;s<l;s++)v+=String.fromCharCode(f.charCodeAt(s)^h.charCodeAt(s));v=String.fromCharCode(v.charCodeAt(0)&~p)+v.substr(1);var m=c-i-t-2;for(s=0;s<m;s++)if(0!==v.charCodeAt(s))throw new Error("Leftmost octets not zero as expected");if(1!==v.charCodeAt(m))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var g=v.substr(-t),y=new MP.util.ByteBuffer;return y.fillWithByte(0,8),y.putBytes(e),y.putBytes(g),r.start(),r.update(y.getBytes()),d===r.digest().getBytes()}};return s}}),MP.jsbn=MP.jsbn||{};function dM(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function pM(){return new dM(null)}function hM(e,t,r,n,i,a){for(var o=16383&t,s=t>>14;--a>=0;){var u=16383&this.data[e],c=this.data[e++]>>14,l=s*u+c*o;i=((u=o*u+((16383&l)<<14)+r.data[n]+i)>>28)+(l>>14)+s*c,r.data[n++]=268435455&u}return i}MP.jsbn.BigInteger=dM,"undefined"==typeof navigator?(dM.prototype.am=hM,fM=28):"Microsoft Internet Explorer"==navigator.appName?(dM.prototype.am=function(e,t,r,n,i,a){for(var o=32767&t,s=t>>15;--a>=0;){var u=32767&this.data[e],c=this.data[e++]>>15,l=s*u+c*o;i=((u=o*u+((32767&l)<<15)+r.data[n]+(1073741823&i))>>>30)+(l>>>15)+s*c+(i>>>30),r.data[n++]=1073741823&u}return i},fM=30):"Netscape"!=navigator.appName?(dM.prototype.am=function(e,t,r,n,i,a){for(;--a>=0;){var o=t*this.data[e++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=67108863&o}return i},fM=26):(dM.prototype.am=hM,fM=28),dM.prototype.DB=fM,dM.prototype.DM=(1<<fM)-1,dM.prototype.DV=1<<fM;dM.prototype.FV=Math.pow(2,52),dM.prototype.F1=52-fM,dM.prototype.F2=2*fM-52;var vM,mM,gM="0123456789abcdefghijklmnopqrstuvwxyz",yM=new Array;for(vM="0".charCodeAt(0),mM=0;mM<=9;++mM)yM[vM++]=mM;for(vM="a".charCodeAt(0),mM=10;mM<36;++mM)yM[vM++]=mM;for(vM="A".charCodeAt(0),mM=10;mM<36;++mM)yM[vM++]=mM;function EM(e){return gM.charAt(e)}function bM(e,t){var r=yM[e.charCodeAt(t)];return null==r?-1:r}function _M(e){var t=pM();return t.fromInt(e),t}function SM(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function TM(e){this.m=e}function wM(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function IM(e,t){return e&t}function AM(e,t){return e|t}function CM(e,t){return e^t}function xM(e,t){return e&~t}function OM(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function RM(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function NM(){}function kM(e){return e}function PM(e){this.r2=pM(),this.q3=pM(),dM.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}TM.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},TM.prototype.revert=function(e){return e},TM.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},TM.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},TM.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},wM.prototype.convert=function(e){var t=pM();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(dM.ZERO)>0&&this.m.subTo(t,t),t},wM.prototype.revert=function(e){var t=pM();return e.copyTo(t),this.reduce(t),t},wM.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},wM.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},wM.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},dM.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},dM.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},dM.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,a=0;--n>=0;){var o=8==r?255&e[n]:bM(e,n);o<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==a?this.data[this.t++]=o:a+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this.data[this.t++]=o>>this.DB-a):this.data[this.t-1]|=o<<a,(a+=r)>=this.DB&&(a-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&dM.ZERO.subTo(this,this)},dM.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},dM.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},dM.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},dM.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,a=(1<<i)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+o+1]=this.data[r]>>i|s,s=(this.data[r]&a)<<n;for(r=o-1;r>=0;--r)t.data[r]=0;t.data[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},dM.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,a=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&a)<<i,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&a)<<i),t.t=this.t-r,t.clamp()}},dM.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()},dM.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&dM.ZERO.subTo(t,t)},dM.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},dM.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=pM());var a=pM(),o=this.s,s=e.s,u=this.DB-SM(n.data[n.t-1]);u>0?(n.lShiftTo(u,a),i.lShiftTo(u,r)):(n.copyTo(a),i.copyTo(r));var c=a.t,l=a.data[c-1];if(0!=l){var f=l*(1<<this.F1)+(c>1?a.data[c-2]>>this.F2:0),d=this.FV/f,p=(1<<this.F1)/f,h=1<<this.F2,v=r.t,m=v-c,g=null==t?pM():t;for(a.dlShiftTo(m,g),r.compareTo(g)>=0&&(r.data[r.t++]=1,r.subTo(g,r)),dM.ONE.dlShiftTo(c,g),g.subTo(a,a);a.t<c;)a.data[a.t++]=0;for(;--m>=0;){var y=r.data[--v]==l?this.DM:Math.floor(r.data[v]*d+(r.data[v-1]+h)*p);if((r.data[v]+=a.am(0,y,r,m,0,c))<y)for(a.dlShiftTo(m,g),r.subTo(g,r);r.data[v]<--y;)r.subTo(g,r)}null!=t&&(r.drShiftTo(c,t),o!=s&&dM.ZERO.subTo(t,t)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),o<0&&dM.ZERO.subTo(r,r)}}},dM.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},dM.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},dM.prototype.exp=function(e,t){if(e>4294967295||e<1)return dM.ONE;var r=pM(),n=pM(),i=t.convert(this),a=SM(e)-1;for(i.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,i,r);else{var o=r;r=n,n=o}return t.revert(r)},dM.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,a="",o=this.t,s=this.DB-o*this.DB%t;if(o-- >0)for(s<this.DB&&(r=this.data[o]>>s)>0&&(i=!0,a=EM(r));o>=0;)s<t?(r=(this.data[o]&(1<<s)-1)<<t-s,r|=this.data[--o]>>(s+=this.DB-t)):(r=this.data[o]>>(s-=t)&n,s<=0&&(s+=this.DB,--o)),r>0&&(i=!0),i&&(a+=EM(r));return i?a:"0"},dM.prototype.negate=function(){var e=pM();return dM.ZERO.subTo(this,e),e},dM.prototype.abs=function(){return this.s<0?this.negate():this},dM.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0},dM.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+SM(this.data[this.t-1]^this.s&this.DM)},dM.prototype.mod=function(e){var t=pM();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(dM.ZERO)>0&&e.subTo(t,t),t},dM.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new TM(t):new wM(t),this.exp(e,r)},dM.ZERO=_M(0),dM.ONE=_M(1),NM.prototype.convert=kM,NM.prototype.revert=kM,NM.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},NM.prototype.sqrTo=function(e,t){e.squareTo(t)},PM.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=pM();return e.copyTo(t),this.reduce(t),t},PM.prototype.revert=function(e){return e},PM.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},PM.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},PM.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var MM=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],DM=(1<<26)/MM[MM.length-1];dM.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},dM.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=_M(r),i=pM(),a=pM(),o="";for(this.divRemTo(n,i,a);i.signum()>0;)o=(r+a.intValue()).toString(e).substr(1)+o,i.divRemTo(n,i,a);return a.intValue().toString(e)+o},dM.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,a=0,o=0,s=0;s<e.length;++s){var u=bM(e,s);u<0?"-"==e.charAt(s)&&0==this.signum()&&(i=!0):(o=t*o+u,++a>=r&&(this.dMultiply(n),this.dAddOffset(o,0),a=0,o=0))}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(o,0)),i&&dM.ZERO.subTo(this,this)},dM.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(dM.ONE.shiftLeft(e-1),AM,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(dM.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},dM.prototype.bitwiseTo=function(e,t,r){var n,i,a=Math.min(e.t,this.t);for(n=0;n<a;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=a;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},dM.prototype.changeBit=function(e,t){var r=dM.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},dM.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},dM.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},dM.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},dM.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,e.data[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e.data[i],r,i,0,t-i);r.clamp()},dM.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},dM.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r},dM.prototype.millerRabin=function(e){var t=this.subtract(dM.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,i=t.shiftRight(r),a={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},o=0;o<e;++o){do{n=new dM(this.bitLength(),a)}while(n.compareTo(dM.ONE)<=0||n.compareTo(t)>=0);var s=n.modPow(i,this);if(0!=s.compareTo(dM.ONE)&&0!=s.compareTo(t)){for(var u=1;u++<r&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(dM.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},dM.prototype.clone=function(){var e=pM();return this.copyTo(e),e},dM.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},dM.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},dM.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},dM.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},dM.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},dM.prototype.equals=function(e){return 0==this.compareTo(e)},dM.prototype.min=function(e){return this.compareTo(e)<0?this:e},dM.prototype.max=function(e){return this.compareTo(e)>0?this:e},dM.prototype.and=function(e){var t=pM();return this.bitwiseTo(e,IM,t),t},dM.prototype.or=function(e){var t=pM();return this.bitwiseTo(e,AM,t),t},dM.prototype.xor=function(e){var t=pM();return this.bitwiseTo(e,CM,t),t},dM.prototype.andNot=function(e){var t=pM();return this.bitwiseTo(e,xM,t),t},dM.prototype.not=function(){for(var e=pM(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},dM.prototype.shiftLeft=function(e){var t=pM();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},dM.prototype.shiftRight=function(e){var t=pM();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},dM.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+OM(this.data[e]);return this.s<0?this.t*this.DB:-1},dM.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=RM(this.data[r]^t);return e},dM.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},dM.prototype.setBit=function(e){return this.changeBit(e,AM)},dM.prototype.clearBit=function(e){return this.changeBit(e,xM)},dM.prototype.flipBit=function(e){return this.changeBit(e,CM)},dM.prototype.add=function(e){var t=pM();return this.addTo(e,t),t},dM.prototype.subtract=function(e){var t=pM();return this.subTo(e,t),t},dM.prototype.multiply=function(e){var t=pM();return this.multiplyTo(e,t),t},dM.prototype.divide=function(e){var t=pM();return this.divRemTo(e,t,null),t},dM.prototype.remainder=function(e){var t=pM();return this.divRemTo(e,null,t),t},dM.prototype.divideAndRemainder=function(e){var t=pM(),r=pM();return this.divRemTo(e,t,r),new Array(t,r)},dM.prototype.modPow=function(e,t){var r,n,i=e.bitLength(),a=_M(1);if(i<=0)return a;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new TM(t):t.isEven()?new PM(t):new wM(t);var o=new Array,s=3,u=r-1,c=(1<<r)-1;if(o[1]=n.convert(this),r>1){var l=pM();for(n.sqrTo(o[1],l);s<=c;)o[s]=pM(),n.mulTo(l,o[s-2],o[s]),s+=2}var f,d,p=e.t-1,h=!0,v=pM();for(i=SM(e.data[p])-1;p>=0;){for(i>=u?f=e.data[p]>>i-u&c:(f=(e.data[p]&(1<<i+1)-1)<<u-i,p>0&&(f|=e.data[p-1]>>this.DB+i-u)),s=r;0==(1&f);)f>>=1,--s;if((i-=s)<0&&(i+=this.DB,--p),h)o[f].copyTo(a),h=!1;else{for(;s>1;)n.sqrTo(a,v),n.sqrTo(v,a),s-=2;s>0?n.sqrTo(a,v):(d=a,a=v,v=d),n.mulTo(v,o[f],a)}for(;p>=0&&0==(e.data[p]&1<<i);)n.sqrTo(a,v),d=a,a=v,v=d,--i<0&&(i=this.DB-1,--p)}return n.revert(a)},dM.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return dM.ZERO;for(var r=e.clone(),n=this.clone(),i=_M(1),a=_M(0),o=_M(0),s=_M(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&a.isEven()||(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(o,i),a.subTo(s,a)):(n.subTo(r,n),t&&o.subTo(i,o),s.subTo(a,s))}return 0!=n.compareTo(dM.ONE)?dM.ZERO:s.compareTo(e)>=0?s.subtract(e):s.signum()<0?(s.addTo(e,s),s.signum()<0?s.add(e):s):s},dM.prototype.pow=function(e){return this.exp(e,new NM)},dM.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r},dM.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=MM[MM.length-1]){for(t=0;t<MM.length;++t)if(r.data[0]==MM[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<MM.length;){for(var n=MM[t],i=t+1;i<MM.length&&n<DM;)n*=MM[i++];for(n=r.modInt(n);t<i;)if(n%MM[t++]==0)return!1}return r.millerRabin(e)};n(function(e){!function(){if(MP.prime)e.exports=MP.prime;else{var t=e.exports=MP.prime=MP.prime||{},r=MP.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],i=new r(null);i.fromInt(30);var a=function(e,t){return e|t};t.generateProbablePrime=function(e,t,n){"function"==typeof t&&(n=t,t={});var i=(t=t||{}).algorithm||"PRIMEINC";"string"==typeof i&&(i={name:i}),i.options=i.options||{};var a=t.prng||MP.random,u={nextBytes:function(e){for(var t=a.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===i.name)return function(e,t,n,i){if("workers"in n)return function(e,t,n,i){if("undefined"==typeof Worker)return o(e,t,n,i);var a=s(e,t),u=n.workers,c=n.workLoad||100,l=30*c/8,f=n.workerScript||"forge/prime.worker.js";if(-1===u)return MP.util.estimateCores(function(e,t){e&&(t=2),u=t-1,d()});function d(){u=Math.max(1,u);for(var n=[],o=0;o<u;++o)n[o]=new Worker(f);for(var o=0;o<u;++o)n[o].addEventListener("message",p);var d=!1;function p(o){if(!d){var u=o.data;if(u.found){for(var f=0;f<n.length;++f)n[f].terminate();return d=!0,i(null,new r(u.prime,16))}a.bitLength()>e&&(a=s(e,t));var p=a.toString(16);o.target.postMessage({hex:p,workLoad:c}),a.dAddOffset(l,0)}}}d()}(e,t,n,i);return o(e,t,n,i)}(e,u,i.options,n);throw new Error("Invalid prime generation algorithm: "+i.name)}}function o(e,t,r,i){var a=s(e,t),o=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(a.bitLength());"millerRabinTests"in r&&(o=r.millerRabinTests);var u=10;"maxBlockTime"in r&&(u=r.maxBlockTime),function e(t,r,i,a,o,u,c){var l=+new Date;do{if(t.bitLength()>r&&(t=s(r,i)),t.isProbablePrime(o))return c(null,t);t.dAddOffset(n[a++%8],0)}while(u<0||+new Date-l<u);MP.util.setImmediate(function(){e(t,r,i,a,o,u,c)})}(a,e,t,0,o,u,i)}function s(e,t){var n=new r(e,t),o=e-1;return n.testBit(o)||n.bitwiseTo(r.ONE.shiftLeft(o),a,n),n.dAddOffset(31-n.mod(i).byteValue(),0),n}}()});if(void 0===LM)var LM=MP.jsbn.BigInteger;var UM=MP.asn1;MP.pki=MP.pki||{};MP.pki.rsa=MP.rsa=MP.rsa||{};var jM=MP.pki,FM=[6,4,2,4,2,4,6,2],BM={name:"PrivateKeyInfo",tagClass:UM.Class.UNIVERSAL,type:UM.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:UM.Class.UNIVERSAL,type:UM.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:UM.Class.UNIVERSAL,type:UM.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:UM.Class.UNIVERSAL,type:UM.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:UM.Class.UNIVERSAL,type:UM.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},VM={name:"RSAPrivateKey",tagClass:UM.Class.UNIVERSAL,type:UM.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:UM.Class.UNIVERSAL,type:UM.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:UM.Class.UNIVERSAL,type:UM.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:UM.Class.UNIVERSAL,type:UM.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:UM.Class.UNIVERSAL,type:UM.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:UM.Class.UNIVERSAL,type:UM.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:UM.Class.UNIVERSAL,type:UM.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:UM.Class.UNIVERSAL,type:UM.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:UM.Class.UNIVERSAL,type:UM.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:UM.Class.UNIVERSAL,type:UM.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},GM={name:"RSAPublicKey",tagClass:UM.Class.UNIVERSAL,type:UM.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:UM.Class.UNIVERSAL,type:UM.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:UM.Class.UNIVERSAL,type:UM.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},qM=MP.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:UM.Class.UNIVERSAL,type:UM.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:UM.Class.UNIVERSAL,type:UM.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:UM.Class.UNIVERSAL,type:UM.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:UM.Class.UNIVERSAL,type:UM.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:UM.Class.UNIVERSAL,type:UM.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},KM=function(e){var t;if(!(e.algorithm in jM.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=jM.oids[e.algorithm];var n=UM.oidToDer(t).getBytes(),i=UM.create(UM.Class.UNIVERSAL,UM.Type.SEQUENCE,!0,[]),a=UM.create(UM.Class.UNIVERSAL,UM.Type.SEQUENCE,!0,[]);a.value.push(UM.create(UM.Class.UNIVERSAL,UM.Type.OID,!1,n)),a.value.push(UM.create(UM.Class.UNIVERSAL,UM.Type.NULL,!1,""));var o=UM.create(UM.Class.UNIVERSAL,UM.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(a),i.value.push(o),UM.toDer(i).getBytes()},HM=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var n;t.dP||(t.dP=t.d.mod(t.p.subtract(LM.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(LM.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{n=new LM(MP.util.bytesToHex(MP.random.getBytes(t.n.bitLength()/8)),16)}while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(LM.ONE));for(var i=(e=e.multiply(n.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(a)<0;)i=i.add(t.p);var o=i.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return o=o.multiply(n.modInverse(t.n)).mod(t.n)};function zM(e,t,r){var n=MP.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var o,s=i-3-e.length;if(0===r||1===r){o=0===r?0:255;for(var u=0;u<s;++u)n.putByte(o)}else for(;s>0;){var c=0,l=MP.random.getBytes(s);for(u=0;u<s;++u)0===(o=l.charCodeAt(u))?++c:n.putByte(o);s=c}return n.putByte(0),n.putBytes(e),n}function WM(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),a=MP.util.createBuffer(e),o=a.getByte(),s=a.getByte();if(0!==o||r&&0!==s&&1!==s||!r&&2!=s||r&&0===s&&void 0===n)throw new Error("Encryption block is invalid.");var u=0;if(0===s){u=i-3-n;for(var c=0;c<u;++c)if(0!==a.getByte())throw new Error("Encryption block is invalid.")}else if(1===s)for(u=0;a.length()>1;){if(255!==a.getByte()){--a.read;break}++u}else if(2===s)for(u=0;a.length()>1;){if(0===a.getByte()){--a.read;break}++u}if(0!==a.getByte()||u!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function YM(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=MP.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function XM(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function $M(e){return"undefined"!=typeof window&&"object"==typeof window.crypto&&"object"==typeof window.crypto.subtle&&"function"==typeof window.crypto.subtle[e]}function QM(e){return"undefined"!=typeof window&&"object"==typeof window.msCrypto&&"object"==typeof window.msCrypto.subtle&&"function"==typeof window.msCrypto.subtle[e]}function JM(e){for(var t=MP.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}jM.rsa.encrypt=function(e,t,r){var n,i=r,a=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(i=2===r,n=zM(e,t,r)):(n=MP.util.createBuffer()).putBytes(e);for(var o=new LM(n.toHex(),16),s=HM(o,t,i).toString(16),u=MP.util.createBuffer(),c=a-Math.ceil(s.length/2);c>0;)u.putByte(0),--c;return u.putBytes(MP.util.hexToBytes(s)),u.getBytes()},jM.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=i,a}var o=new LM(MP.util.createBuffer(e).toHex(),16);if(o.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var s=HM(o,t,r).toString(16),u=MP.util.createBuffer(),c=i-Math.ceil(s.length/2);c>0;)u.putByte(0),--c;return u.putBytes(MP.util.hexToBytes(s)),!1!==n?WM(u.getBytes(),t,r):u.getBytes()},jM.rsa.createKeyPairGenerationState=function(e,t,r){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048;var n,i=(r=r||{}).prng||MP.random,a={nextBytes:function(e){for(var t=i.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},o=r.algorithm||"PRIMEINC";if("PRIMEINC"!==o)throw new Error("Invalid key generation algorithm: "+o);return(n={algorithm:o,state:0,bits:e,rng:a,eInt:t||65537,e:new LM(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(n.eInt),n},jM.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new LM(null);r.fromInt(30);for(var n,i=0,a=function(e,t){return e|t},o=+new Date,s=0;null===e.keys&&(t<=0||s<t);){if(0===e.state){var u=null===e.p?e.pBits:e.qBits,c=u-1;0===e.pqState?(e.num=new LM(u,e.rng),e.num.testBit(c)||e.num.bitwiseTo(LM.ONE.shiftLeft(c),a,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),i=0,++e.pqState):1===e.pqState?e.num.bitLength()>u?e.pqState=0:e.num.isProbablePrime(XM(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(FM[i++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(LM.ONE).gcd(e.e).compareTo(LM.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(LM.ONE),e.q1=e.q.subtract(LM.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(LM.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var l=e.e.modInverse(e.phi);e.keys={privateKey:jM.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:jM.rsa.setPublicKey(e.n,e.e)}}s+=(n=+new Date)-o,o=n}return null!==e.keys},jM.rsa.generateKeyPair=function(e,t,r,n){if(1===arguments.length?"object"==typeof e?(r=e,e=void 0):"function"==typeof e&&(n=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof t?(n=t,t=void 0):"number"!=typeof t&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof r&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),n&&e>=256&&e<=16384&&(65537===t||3===t)){if($M("generateKey")&&$M("exportKey"))return window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:JM(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(e){return window.crypto.subtle.exportKey("pkcs8",e.privateKey)}).then(void 0,function(e){n(e)}).then(function(e){if(e){var t=jM.privateKeyFromAsn1(UM.fromDer(MP.util.createBuffer(e)));n(null,{privateKey:t,publicKey:jM.setRsaPublicKey(t.n,t.e)})}});if(QM("generateKey")&&QM("exportKey")){var i=window.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:JM(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return i.oncomplete=function(e){var t=e.target.result,r=window.msCrypto.subtle.exportKey("pkcs8",t.privateKey);r.oncomplete=function(e){var t=e.target.result,r=jM.privateKeyFromAsn1(UM.fromDer(MP.util.createBuffer(t)));n(null,{privateKey:r,publicKey:jM.setRsaPublicKey(r.n,r.e)})},r.onerror=function(e){n(e)}},void(i.onerror=function(e){n(e)})}}var a=jM.rsa.createKeyPairGenerationState(e,t,r);if(!n)return jM.rsa.stepKeyPairGenerationState(a,0),a.keys;!function(e,t,r){"function"==typeof t&&(r=t,t={});var n={algorithm:{name:(t=t||{}).algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng);function i(){a(e.pBits,function(t,n){return t?r(t):(e.p=n,null!==e.q?o(t,e.q):void a(e.qBits,o))})}function a(e,t){MP.prime.generateProbablePrime(e,n,t)}function o(t,n){if(t)return r(t);if(e.q=n,e.p.compareTo(e.q)<0){var s=e.p;e.p=e.q,e.q=s}if(0!==e.p.subtract(LM.ONE).gcd(e.e).compareTo(LM.ONE))return e.p=null,void i();if(0!==e.q.subtract(LM.ONE).gcd(e.e).compareTo(LM.ONE))return e.q=null,void a(e.qBits,o);if(e.p1=e.p.subtract(LM.ONE),e.q1=e.q.subtract(LM.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(LM.ONE))return e.p=e.q=null,void i();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void a(e.qBits,o);var u=e.e.modInverse(e.phi);e.keys={privateKey:jM.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:jM.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}i()}(a,r,n)},jM.setRsaPublicKey=jM.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(e,t,n){if("string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return zM(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return MP.pkcs1.encode_rsa_oaep(t,e,n)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"==typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var i=t.encode(e,r,!0);return jM.rsa.encrypt(i,r,!0)},verify:function(e,t,n){"string"==typeof n?n=n.toUpperCase():void 0===n&&(n="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===n?n={verify:function(e,t){return t=WM(t,r,!0),e===UM.fromDer(t).value[1].value}}:"NONE"!==n&&"NULL"!==n&&null!==n||(n={verify:function(e,t){return e===(t=WM(t,r,!0))}});var i=jM.rsa.decrypt(t,r,!0,!1);return n.verify(e,i,r.n.bitLength())}};return r},jM.setRsaPrivateKey=jM.rsa.setPrivateKey=function(e,t,r,n,i,a,o,s){var u={n:e,e:t,d:r,p:n,q:i,dP:a,dQ:o,qInv:s,decrypt:function(e,t,r){"string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var n=jM.rsa.decrypt(e,u,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:WM};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return MP.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(n,u,!1)},sign:function(e,t){var r=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:KM},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,u.n.bitLength());return jM.rsa.encrypt(n,u,r)}};return u},jM.wrapRsaPrivateKey=function(e){return UM.create(UM.Class.UNIVERSAL,UM.Type.SEQUENCE,!0,[UM.create(UM.Class.UNIVERSAL,UM.Type.INTEGER,!1,UM.integerToDer(0).getBytes()),UM.create(UM.Class.UNIVERSAL,UM.Type.SEQUENCE,!0,[UM.create(UM.Class.UNIVERSAL,UM.Type.OID,!1,UM.oidToDer(jM.oids.rsaEncryption).getBytes()),UM.create(UM.Class.UNIVERSAL,UM.Type.NULL,!1,"")]),UM.create(UM.Class.UNIVERSAL,UM.Type.OCTETSTRING,!1,UM.toDer(e).getBytes())])},jM.privateKeyFromAsn1=function(e){var t,r,n,i,a,o,s,u,c={},l=[];if(UM.validate(e,BM,c,l)&&(e=UM.fromDer(MP.util.createBuffer(c.privateKey))),c={},l=[],!UM.validate(e,VM,c,l)){var f=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw f.errors=l,f}return t=MP.util.createBuffer(c.privateKeyModulus).toHex(),r=MP.util.createBuffer(c.privateKeyPublicExponent).toHex(),n=MP.util.createBuffer(c.privateKeyPrivateExponent).toHex(),i=MP.util.createBuffer(c.privateKeyPrime1).toHex(),a=MP.util.createBuffer(c.privateKeyPrime2).toHex(),o=MP.util.createBuffer(c.privateKeyExponent1).toHex(),s=MP.util.createBuffer(c.privateKeyExponent2).toHex(),u=MP.util.createBuffer(c.privateKeyCoefficient).toHex(),jM.setRsaPrivateKey(new LM(t,16),new LM(r,16),new LM(n,16),new LM(i,16),new LM(a,16),new LM(o,16),new LM(s,16),new LM(u,16))},jM.privateKeyToAsn1=jM.privateKeyToRSAPrivateKey=function(e){return UM.create(UM.Class.UNIVERSAL,UM.Type.SEQUENCE,!0,[UM.create(UM.Class.UNIVERSAL,UM.Type.INTEGER,!1,UM.integerToDer(0).getBytes()),UM.create(UM.Class.UNIVERSAL,UM.Type.INTEGER,!1,YM(e.n)),UM.create(UM.Class.UNIVERSAL,UM.Type.INTEGER,!1,YM(e.e)),UM.create(UM.Class.UNIVERSAL,UM.Type.INTEGER,!1,YM(e.d)),UM.create(UM.Class.UNIVERSAL,UM.Type.INTEGER,!1,YM(e.p)),UM.create(UM.Class.UNIVERSAL,UM.Type.INTEGER,!1,YM(e.q)),UM.create(UM.Class.UNIVERSAL,UM.Type.INTEGER,!1,YM(e.dP)),UM.create(UM.Class.UNIVERSAL,UM.Type.INTEGER,!1,YM(e.dQ)),UM.create(UM.Class.UNIVERSAL,UM.Type.INTEGER,!1,YM(e.qInv))])},jM.publicKeyFromAsn1=function(e){var t={},r=[];if(UM.validate(e,qM,t,r)){var n,i=UM.derToOid(t.publicKeyOid);if(i!==jM.oids.rsaEncryption)throw(n=new Error("Cannot read public key. Unknown OID.")).oid=i,n;e=t.rsaPublicKey}if(r=[],!UM.validate(e,GM,t,r))throw(n=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,n;var a=MP.util.createBuffer(t.publicKeyModulus).toHex(),o=MP.util.createBuffer(t.publicKeyExponent).toHex();return jM.setRsaPublicKey(new LM(a,16),new LM(o,16))},jM.publicKeyToAsn1=jM.publicKeyToSubjectPublicKeyInfo=function(e){return UM.create(UM.Class.UNIVERSAL,UM.Type.SEQUENCE,!0,[UM.create(UM.Class.UNIVERSAL,UM.Type.SEQUENCE,!0,[UM.create(UM.Class.UNIVERSAL,UM.Type.OID,!1,UM.oidToDer(jM.oids.rsaEncryption).getBytes()),UM.create(UM.Class.UNIVERSAL,UM.Type.NULL,!1,"")]),UM.create(UM.Class.UNIVERSAL,UM.Type.BITSTRING,!1,[jM.publicKeyToRSAPublicKey(e)])])},jM.publicKeyToRSAPublicKey=function(e){return UM.create(UM.Class.UNIVERSAL,UM.Type.SEQUENCE,!0,[UM.create(UM.Class.UNIVERSAL,UM.Type.INTEGER,!1,YM(e.n)),UM.create(UM.Class.UNIVERSAL,UM.Type.INTEGER,!1,YM(e.e))])};n(function(e){var t=MP.asn1,r=e.exports=MP.pki=MP.pki||{},n=r.oids,i={};i.CN=n.commonName,i.commonName="CN",i.C=n.countryName,i.countryName="C",i.L=n.localityName,i.localityName="L",i.ST=n.stateOrProvinceName,i.stateOrProvinceName="ST",i.O=n.organizationName,i.organizationName="O",i.OU=n.organizationalUnitName,i.organizationalUnitName="OU",i.E=n.emailAddress,i.emailAddress="E";var a=MP.pki.rsa.publicKeyValidator,o={name:"Certificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:t.Class.UNIVERSAL,type:t.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:t.Class.UNIVERSAL,type:t.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},a,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},s={name:"rsapss",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:t.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:t.Class.UNIVERSAL,type:t.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:t.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:t.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:t.Class.UNIVERSAL,type:t.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},u={name:"CertificationRequestInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},a,{name:"CertificationRequestInfo.attributes",tagClass:t.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0}]}]}]},c={name:"CertificationRequest",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[u,{name:"CertificationRequest.signatureAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:t.Class.UNIVERSAL,type:t.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function l(e,t){"string"==typeof t&&(t={shortName:t});for(var r,n=null,i=0;null===n&&i<e.attributes.length;++i)r=e.attributes[i],t.type&&t.type===r.type?n=r:t.name&&t.name===r.name?n=r:t.shortName&&t.shortName===r.shortName&&(n=r);return n}r.RDNAttributesAsArray=function(e,r){for(var a,o,s,u=[],c=0;c<e.value.length;++c){a=e.value[c];for(var l=0;l<a.value.length;++l)s={},o=a.value[l],s.type=t.derToOid(o.value[0].value),s.value=o.value[1].value,s.valueTagClass=o.value[1].type,s.type in n&&(s.name=n[s.type],s.name in i&&(s.shortName=i[s.name])),r&&(r.update(s.type),r.update(s.value)),u.push(s)}return u},r.CRIAttributesAsArray=function(e){for(var a=[],o=0;o<e.length;++o)for(var s=e[o],u=t.derToOid(s.value[0].value),c=s.value[1].value,l=0;l<c.length;++l){var f={};if(f.type=u,f.value=c[l].value,f.valueTagClass=c[l].type,f.type in n&&(f.name=n[f.type],f.name in i&&(f.shortName=i[f.name])),f.type===n.extensionRequest){f.extensions=[];for(var d=0;d<f.value.length;++d)f.extensions.push(r.certificateExtensionFromAsn1(f.value[d]))}a.push(f)}return a};var f=function(e,r,i){var a={};if(e!==n["RSASSA-PSS"])return a;i&&(a={hash:{algorithmOid:n.sha1},mgf:{algorithmOid:n.mgf1,hash:{algorithmOid:n.sha1}},saltLength:20});var o={},u=[];if(!t.validate(r,s,o,u)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=u,c}return void 0!==o.hashOid&&(a.hash=a.hash||{},a.hash.algorithmOid=t.derToOid(o.hashOid)),void 0!==o.maskGenOid&&(a.mgf=a.mgf||{},a.mgf.algorithmOid=t.derToOid(o.maskGenOid),a.mgf.hash=a.mgf.hash||{},a.mgf.hash.algorithmOid=t.derToOid(o.maskGenHashOid)),void 0!==o.saltLength&&(a.saltLength=o.saltLength.charCodeAt(0)),a};function d(e){for(var r,n,i=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),a=e.attributes,o=0;o<a.length;++o){var s=(r=a[o]).value,u=t.Type.PRINTABLESTRING;"valueTagClass"in r&&(u=r.valueTagClass)===t.Type.UTF8&&(s=MP.util.encodeUtf8(s)),n=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.type).getBytes()),t.create(t.Class.UNIVERSAL,u,!1,s)])]),i.value.push(n)}return i}function p(e){for(var a,o=0;o<e.length;++o){if(void 0===(a=e[o]).name&&(a.type&&a.type in r.oids?a.name=r.oids[a.type]:a.shortName&&a.shortName in i&&(a.name=r.oids[i[a.shortName]])),void 0===a.type){if(!(a.name&&a.name in r.oids))throw(u=new Error("Attribute type not specified.")).attribute=a,u;a.type=r.oids[a.name]}if(void 0===a.shortName&&a.name&&a.name in i&&(a.shortName=i[a.name]),a.type===n.extensionRequest&&(a.valueConstructed=!0,a.valueTagClass=t.Type.SEQUENCE,!a.value&&a.extensions)){a.value=[];for(var s=0;s<a.extensions.length;++s)a.value.push(r.certificateExtensionToAsn1(h(a.extensions[s])))}var u;if(void 0===a.value)throw(u=new Error("Attribute value not specified.")).attribute=a,u}}function h(e,i){if(i=i||{},void 0===e.name&&e.id&&e.id in r.oids&&(e.name=r.oids[e.id]),void 0===e.id){if(!(e.name&&e.name in r.oids))throw(b=new Error("Extension ID not specified.")).extension=e,b;e.id=r.oids[e.name]}if(void 0!==e.value)return e;if("keyUsage"===e.name){var a=0,o=0,s=0;e.digitalSignature&&(o|=128,a=7),e.nonRepudiation&&(o|=64,a=6),e.keyEncipherment&&(o|=32,a=5),e.dataEncipherment&&(o|=16,a=4),e.keyAgreement&&(o|=8,a=3),e.keyCertSign&&(o|=4,a=2),e.cRLSign&&(o|=2,a=1),e.encipherOnly&&(o|=1,a=0),e.decipherOnly&&(s|=128,a=7);var u=String.fromCharCode(a);0!==s?u+=String.fromCharCode(o)+String.fromCharCode(s):0!==o&&(u+=String.fromCharCode(o)),e.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,u)}else if("basicConstraints"===e.name)e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);var c=e.value.value;for(var l in e)!0===e[l]&&(l in n?c.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(n[l]).getBytes())):-1!==l.indexOf(".")&&c.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(l).getBytes())))}else if("nsCertType"===e.name){a=0,o=0;e.client&&(o|=128,a=7),e.server&&(o|=64,a=6),e.email&&(o|=32,a=5),e.objsign&&(o|=16,a=4),e.reserved&&(o|=8,a=3),e.sslCA&&(o|=4,a=2),e.emailCA&&(o|=2,a=1),e.objCA&&(o|=1,a=0);u=String.fromCharCode(a);0!==o&&(u+=String.fromCharCode(o)),e.value=t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,u)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);for(var f=0;f<e.altNames.length;++f){u=(g=e.altNames[f]).value;if(7===g.type&&g.ip){if(null===(u=MP.util.bytesFromIP(g.ip)))throw(b=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,b}else 8===g.type&&(u=g.oid?t.oidToDer(t.oidToDer(g.oid)):t.oidToDer(u));e.value.value.push(t.create(t.Class.CONTEXT_SPECIFIC,g.type,!1,u))}}else if("subjectKeyIdentifier"===e.name&&i.cert){var p=i.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=p.toHex(),e.value=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,p.getBytes())}else if("authorityKeyIdentifier"===e.name&&i.cert){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);c=e.value.value;if(e.keyIdentifier){var h=!0===e.keyIdentifier?i.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;c.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!1,h))}if(e.authorityCertIssuer){var v=[t.create(t.Class.CONTEXT_SPECIFIC,4,!0,[d(!0===e.authorityCertIssuer?i.cert.issuer:e.authorityCertIssuer)])];c.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,v))}if(e.serialNumber){var m=MP.util.hexToBytes(!0===e.serialNumber?i.cert.serialNumber:e.serialNumber);c.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if("cRLDistributionPoints"===e.name){e.value=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);c=e.value.value;var g,y=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]),E=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(f=0;f<e.altNames.length;++f){u=(g=e.altNames[f]).value;if(7===g.type&&g.ip){if(null===(u=MP.util.bytesFromIP(g.ip)))throw(b=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,b}else 8===g.type&&(u=g.oid?t.oidToDer(t.oidToDer(g.oid)):t.oidToDer(u));E.value.push(t.create(t.Class.CONTEXT_SPECIFIC,g.type,!1,u))}y.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[E])),c.push(y)}var b;if(void 0===e.value)throw(b=new Error("Extension value not specified.")).extension=e,b;return e}function v(e,r){switch(e){case n["RSASSA-PSS"]:var i=[];return void 0!==r.hash.algorithmOid&&i.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])),void 0!==r.mgf.algorithmOid&&i.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.mgf.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.mgf.hash.algorithmOid).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])])])),void 0!==r.saltLength&&i.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(r.saltLength).getBytes())])),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,i);default:return t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")}}function m(e){var r=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return r;for(var n=e.attributes,i=0;i<n.length;++i){var a=n[i],o=a.value,s=t.Type.UTF8;"valueTagClass"in a&&(s=a.valueTagClass),s===t.Type.UTF8&&(o=MP.util.encodeUtf8(o));var u=!1;"valueConstructed"in a&&(u=a.valueConstructed);var c=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(a.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,s,u,o)])]);r.value.push(c)}return r}r.certificateFromPem=function(e,n,i){var a=MP.pem.decode(e)[0];if("CERTIFICATE"!==a.type&&"X509 CERTIFICATE"!==a.type&&"TRUSTED CERTIFICATE"!==a.type){var o=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw o.headerType=a.type,o}if(a.procType&&"ENCRYPTED"===a.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=t.fromDer(a.body,i);return r.certificateFromAsn1(s,n)},r.certificateToPem=function(e,n){var i={type:"CERTIFICATE",body:t.toDer(r.certificateToAsn1(e)).getBytes()};return MP.pem.encode(i,{maxline:n})},r.publicKeyFromPem=function(e){var n=MP.pem.decode(e)[0];if("PUBLIC KEY"!==n.type&&"RSA PUBLIC KEY"!==n.type){var i=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw i.headerType=n.type,i}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var a=t.fromDer(n.body);return r.publicKeyFromAsn1(a)},r.publicKeyToPem=function(e,n){var i={type:"PUBLIC KEY",body:t.toDer(r.publicKeyToAsn1(e)).getBytes()};return MP.pem.encode(i,{maxline:n})},r.publicKeyToRSAPublicKeyPem=function(e,n){var i={type:"RSA PUBLIC KEY",body:t.toDer(r.publicKeyToRSAPublicKey(e)).getBytes()};return MP.pem.encode(i,{maxline:n})},r.getPublicKeyFingerprint=function(e,n){var i,a=(n=n||{}).md||MP.md.sha1.create();switch(n.type||"RSAPublicKey"){case"RSAPublicKey":i=t.toDer(r.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=t.toDer(r.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+n.type+'".')}a.start(),a.update(i);var o=a.digest();if("hex"===n.encoding){var s=o.toHex();return n.delimiter?s.match(/.{2}/g).join(n.delimiter):s}if("binary"===n.encoding)return o.getBytes();if(n.encoding)throw new Error('Unknown encoding "'+n.encoding+'".');return o},r.certificationRequestFromPem=function(e,n,i){var a=MP.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==a.type){var o=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw o.headerType=a.type,o}if(a.procType&&"ENCRYPTED"===a.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=t.fromDer(a.body,i);return r.certificationRequestFromAsn1(s,n)},r.certificationRequestToPem=function(e,n){var i={type:"CERTIFICATE REQUEST",body:t.toDer(r.certificationRequestToAsn1(e)).getBytes()};return MP.pem.encode(i,{maxline:n})},r.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return l(e.issuer,t)},e.issuer.addField=function(t){p([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return l(e.subject,t)},e.subject.addField=function(t){p([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){p(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){p(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)h(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){"string"==typeof t&&(t={name:t});for(var r,n=null,i=0;null===n&&i<e.extensions.length;++i)r=e.extensions[i],t.id&&r.id===t.id?n=r:t.name&&r.name===t.name&&(n=r);return n},e.sign=function(i,a){e.md=a||MP.md.sha1.create();var o=n[e.md.algorithm+"WithRSAEncryption"];if(!o){var s=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw s.algorithm=e.md.algorithm,s}e.signatureOid=e.siginfo.algorithmOid=o,e.tbsCertificate=r.getTBSCertificate(e);var u=t.toDer(e.tbsCertificate);e.md.update(u.getBytes()),e.signature=i.sign(e.md)},e.verify=function(i){var a=!1;if(!e.issued(i)){var o=i.issuer,s=e.subject;throw(h=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.")).expectedIssuer=o.attributes,h.actualIssuer=s.attributes,h}var u=i.md;if(null===u){if(i.signatureOid in n)switch(n[i.signatureOid]){case"sha1WithRSAEncryption":u=MP.md.sha1.create();break;case"md5WithRSAEncryption":u=MP.md.md5.create();break;case"sha256WithRSAEncryption":u=MP.md.sha256.create();break;case"sha384WithRSAEncryption":u=MP.md.sha384.create();break;case"sha512WithRSAEncryption":u=MP.md.sha512.create();break;case"RSASSA-PSS":u=MP.md.sha256.create()}if(null===u)throw(h=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=i.signatureOid,h;var c=i.tbsCertificate||r.getTBSCertificate(i),l=t.toDer(c);u.update(l.getBytes())}if(null!==u){var f;switch(i.signatureOid){case n.sha1WithRSAEncryption:f=void 0;break;case n["RSASSA-PSS"]:var d,p,h;if(void 0===(d=n[i.signatureParameters.mgf.hash.algorithmOid])||void 0===MP.md[d])throw(h=new Error("Unsupported MGF hash function.")).oid=i.signatureParameters.mgf.hash.algorithmOid,h.name=d,h;if(void 0===(p=n[i.signatureParameters.mgf.algorithmOid])||void 0===MP.mgf[p])throw(h=new Error("Unsupported MGF function.")).oid=i.signatureParameters.mgf.algorithmOid,h.name=p,h;if(p=MP.mgf[p].create(MP.md[d].create()),void 0===(d=n[i.signatureParameters.hash.algorithmOid])||void 0===MP.md[d])throw{message:"Unsupported RSASSA-PSS hash function.",oid:i.signatureParameters.hash.algorithmOid,name:d};f=MP.pss.create(MP.md[d].create(),p,i.signatureParameters.saltLength)}a=e.publicKey.verify(u.digest().getBytes(),i.signature,f)}return a},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var a,o;r=!0;for(var s=0;r&&s<n.attributes.length;++s)a=n.attributes[s],o=i.attributes[s],a.type===o.type&&a.value===o.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return r.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=n.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var i=e.extensions[r];if(i.id===t){var a=e.generateSubjectKeyIdentifier().getBytes();return MP.util.hexToBytes(i.subjectKeyIdentifier)===a}}return!1},e},r.certificateFromAsn1=function(e,i){var a={},s=[];if(!t.validate(e,o,a,s))throw(h=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.")).errors=s,h;if(t.derToOid(a.publicKeyOid)!==r.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=r.createCertificate();u.version=a.certVersion?a.certVersion.charCodeAt(0):0;var c=MP.util.createBuffer(a.certSerialNumber);u.serialNumber=c.toHex(),u.signatureOid=MP.asn1.derToOid(a.certSignatureOid),u.signatureParameters=f(u.signatureOid,a.certSignatureParams,!0),u.siginfo.algorithmOid=MP.asn1.derToOid(a.certinfoSignatureOid),u.siginfo.parameters=f(u.siginfo.algorithmOid,a.certinfoSignatureParams,!1),u.signature=a.certSignature;var d=[];if(void 0!==a.certValidity1UTCTime&&d.push(t.utcTimeToDate(a.certValidity1UTCTime)),void 0!==a.certValidity2GeneralizedTime&&d.push(t.generalizedTimeToDate(a.certValidity2GeneralizedTime)),void 0!==a.certValidity3UTCTime&&d.push(t.utcTimeToDate(a.certValidity3UTCTime)),void 0!==a.certValidity4GeneralizedTime&&d.push(t.generalizedTimeToDate(a.certValidity4GeneralizedTime)),d.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(d.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=d[0],u.validity.notAfter=d[1],u.tbsCertificate=a.tbsCertificate,i){var h;if(u.md=null,u.signatureOid in n)switch(n[u.signatureOid]){case"sha1WithRSAEncryption":u.md=MP.md.sha1.create();break;case"md5WithRSAEncryption":u.md=MP.md.md5.create();break;case"sha256WithRSAEncryption":u.md=MP.md.sha256.create();break;case"sha384WithRSAEncryption":u.md=MP.md.sha384.create();break;case"sha512WithRSAEncryption":u.md=MP.md.sha512.create();break;case"RSASSA-PSS":u.md=MP.md.sha256.create()}if(null===u.md)throw(h=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=u.signatureOid,h;var v=t.toDer(u.tbsCertificate);u.md.update(v.getBytes())}var m=MP.md.sha1.create();u.issuer.getField=function(e){return l(u.issuer,e)},u.issuer.addField=function(e){p([e]),u.issuer.attributes.push(e)},u.issuer.attributes=r.RDNAttributesAsArray(a.certIssuer,m),a.certIssuerUniqueId&&(u.issuer.uniqueId=a.certIssuerUniqueId),u.issuer.hash=m.digest().toHex();var g=MP.md.sha1.create();return u.subject.getField=function(e){return l(u.subject,e)},u.subject.addField=function(e){p([e]),u.subject.attributes.push(e)},u.subject.attributes=r.RDNAttributesAsArray(a.certSubject,g),a.certSubjectUniqueId&&(u.subject.uniqueId=a.certSubjectUniqueId),u.subject.hash=g.digest().toHex(),a.certExtensions?u.extensions=r.certificateExtensionsFromAsn1(a.certExtensions):u.extensions=[],u.publicKey=r.publicKeyFromAsn1(a.subjectPublicKeyInfo),u},r.certificateExtensionsFromAsn1=function(e){for(var t=[],n=0;n<e.value.length;++n)for(var i=e.value[n],a=0;a<i.value.length;++a)t.push(r.certificateExtensionFromAsn1(i.value[a]));return t},r.certificateExtensionFromAsn1=function(e){var r={};if(r.id=t.derToOid(e.value[0].value),r.critical=!1,e.value[1].type===t.Type.BOOLEAN?(r.critical=0!==e.value[1].value.charCodeAt(0),r.value=e.value[2].value):r.value=e.value[1].value,r.id in n)if(r.name=n[r.id],"keyUsage"===r.name){var i=0,a=0;(s=t.fromDer(r.value)).value.length>1&&(i=s.value.charCodeAt(1),a=s.value.length>2?s.value.charCodeAt(2):0),r.digitalSignature=128==(128&i),r.nonRepudiation=64==(64&i),r.keyEncipherment=32==(32&i),r.dataEncipherment=16==(16&i),r.keyAgreement=8==(8&i),r.keyCertSign=4==(4&i),r.cRLSign=2==(2&i),r.encipherOnly=1==(1&i),r.decipherOnly=128==(128&a)}else if("basicConstraints"===r.name){(s=t.fromDer(r.value)).value.length>0&&s.value[0].type===t.Type.BOOLEAN?r.cA=0!==s.value[0].value.charCodeAt(0):r.cA=!1;var o=null;s.value.length>0&&s.value[0].type===t.Type.INTEGER?o=s.value[0].value:s.value.length>1&&(o=s.value[1].value),null!==o&&(r.pathLenConstraint=t.derToInteger(o))}else if("extKeyUsage"===r.name)for(var s=t.fromDer(r.value),u=0;u<s.value.length;++u){var c=t.derToOid(s.value[u].value);c in n?r[n[c]]=!0:r[c]=!0}else if("nsCertType"===r.name){i=0;(s=t.fromDer(r.value)).value.length>1&&(i=s.value.charCodeAt(1)),r.client=128==(128&i),r.server=64==(64&i),r.email=32==(32&i),r.objsign=16==(16&i),r.reserved=8==(8&i),r.sslCA=4==(4&i),r.emailCA=2==(2&i),r.objCA=1==(1&i)}else if("subjectAltName"===r.name||"issuerAltName"===r.name){var l;r.altNames=[];s=t.fromDer(r.value);for(var f=0;f<s.value.length;++f){var d={type:(l=s.value[f]).type,value:l.value};switch(r.altNames.push(d),l.type){case 1:case 2:case 6:break;case 7:d.ip=MP.util.bytesToIP(l.value);break;case 8:d.oid=t.derToOid(l.value)}}}else if("subjectKeyIdentifier"===r.name){s=t.fromDer(r.value);r.subjectKeyIdentifier=MP.util.bytesToHex(s.value)}return r},r.certificationRequestFromAsn1=function(e,i){var a={},o=[];if(!t.validate(e,c,a,o))throw(u=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.")).errors=o,u;if(t.derToOid(a.publicKeyOid)!==r.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=r.createCertificationRequest();if(s.version=a.csrVersion?a.csrVersion.charCodeAt(0):0,s.signatureOid=MP.asn1.derToOid(a.csrSignatureOid),s.signatureParameters=f(s.signatureOid,a.csrSignatureParams,!0),s.siginfo.algorithmOid=MP.asn1.derToOid(a.csrSignatureOid),s.siginfo.parameters=f(s.siginfo.algorithmOid,a.csrSignatureParams,!1),s.signature=a.csrSignature,s.certificationRequestInfo=a.certificationRequestInfo,i){var u;if(s.md=null,s.signatureOid in n)switch(n[s.signatureOid]){case"sha1WithRSAEncryption":s.md=MP.md.sha1.create();break;case"md5WithRSAEncryption":s.md=MP.md.md5.create();break;case"sha256WithRSAEncryption":s.md=MP.md.sha256.create();break;case"sha384WithRSAEncryption":s.md=MP.md.sha384.create();break;case"sha512WithRSAEncryption":s.md=MP.md.sha512.create();break;case"RSASSA-PSS":s.md=MP.md.sha256.create()}if(null===s.md)throw(u=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=s.signatureOid,u;var d=t.toDer(s.certificationRequestInfo);s.md.update(d.getBytes())}var h=MP.md.sha1.create();return s.subject.getField=function(e){return l(s.subject,e)},s.subject.addField=function(e){p([e]),s.subject.attributes.push(e)},s.subject.attributes=r.RDNAttributesAsArray(a.certificationRequestInfoSubject,h),s.subject.hash=h.digest().toHex(),s.publicKey=r.publicKeyFromAsn1(a.subjectPublicKeyInfo),s.getAttribute=function(e){return l(s,e)},s.addAttribute=function(e){p([e]),s.attributes.push(e)},s.attributes=r.CRIAttributesAsArray(a.certificationRequestInfoAttributes||[]),s},r.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return l(e.subject,t)},e.subject.addField=function(t){p([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return l(e,t)},e.addAttribute=function(t){p([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){p(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){p(t),e.attributes=t},e.sign=function(i,a){e.md=a||MP.md.sha1.create();var o=n[e.md.algorithm+"WithRSAEncryption"];if(!o){var s=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw s.algorithm=e.md.algorithm,s}e.signatureOid=e.siginfo.algorithmOid=o,e.certificationRequestInfo=r.getCertificationRequestInfo(e);var u=t.toDer(e.certificationRequestInfo);e.md.update(u.getBytes()),e.signature=i.sign(e.md)},e.verify=function(){var i=!1,a=e.md;if(null===a){if(e.signatureOid in n)switch(n[e.signatureOid]){case"sha1WithRSAEncryption":a=MP.md.sha1.create();break;case"md5WithRSAEncryption":a=MP.md.md5.create();break;case"sha256WithRSAEncryption":a=MP.md.sha256.create();break;case"sha384WithRSAEncryption":a=MP.md.sha384.create();break;case"sha512WithRSAEncryption":a=MP.md.sha512.create();break;case"RSASSA-PSS":a=MP.md.sha256.create()}if(null===a)throw(f=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=e.signatureOid,f;var o=e.certificationRequestInfo||r.getCertificationRequestInfo(e),s=t.toDer(o);a.update(s.getBytes())}if(null!==a){var u;switch(e.signatureOid){case n.sha1WithRSAEncryption:break;case n["RSASSA-PSS"]:var c,l,f;if(void 0===(c=n[e.signatureParameters.mgf.hash.algorithmOid])||void 0===MP.md[c])throw(f=new Error("Unsupported MGF hash function.")).oid=e.signatureParameters.mgf.hash.algorithmOid,f.name=c,f;if(void 0===(l=n[e.signatureParameters.mgf.algorithmOid])||void 0===MP.mgf[l])throw(f=new Error("Unsupported MGF function.")).oid=e.signatureParameters.mgf.algorithmOid,f.name=l,f;if(l=MP.mgf[l].create(MP.md[c].create()),void 0===(c=n[e.signatureParameters.hash.algorithmOid])||void 0===MP.md[c])throw(f=new Error("Unsupported RSASSA-PSS hash function.")).oid=e.signatureParameters.hash.algorithmOid,f.name=c,f;u=MP.pss.create(MP.md[c].create(),l,e.signatureParameters.saltLength)}i=e.publicKey.verify(a.digest().getBytes(),e.signature,u)}return i},e},r.getTBSCertificate=function(e){var n=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,MP.util.hexToBytes(e.serialNumber)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.siginfo.algorithmOid).getBytes()),v(e.siginfo.algorithmOid,e.siginfo.parameters)]),d(e.issuer),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(e.validity.notBefore)),t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(e.validity.notAfter))]),d(e.subject),r.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(t.create(t.Class.CONTEXT_SPECIFIC,2,!0,[t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(r.certificateExtensionsToAsn1(e.extensions)),n},r.getCertificationRequestInfo=function(e){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),d(e.subject),r.publicKeyToAsn1(e.publicKey),m(e)])},r.distinguishedNameToAsn1=function(e){return d(e)},r.certificateToAsn1=function(e){var n=e.tbsCertificate||r.getTBSCertificate(e);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[n,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureOid).getBytes()),v(e.signatureOid,e.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},r.certificateExtensionsToAsn1=function(e){var n=t.create(t.Class.CONTEXT_SPECIFIC,3,!0,[]),i=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);n.value.push(i);for(var a=0;a<e.length;++a)i.value.push(r.certificateExtensionToAsn1(e[a]));return n},r.certificateExtensionToAsn1=function(e){var r=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[]);r.value.push(t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.id).getBytes())),e.critical&&r.value.push(t.create(t.Class.UNIVERSAL,t.Type.BOOLEAN,!1,String.fromCharCode(255)));var n=e.value;return"string"!=typeof e.value&&(n=t.toDer(n).getBytes()),r.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n)),r},r.certificationRequestToAsn1=function(e){var n=e.certificationRequestInfo||r.getCertificationRequestInfo(e);return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[n,t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureOid).getBytes()),v(e.signatureOid,e.signatureParameters)]),t.create(t.Class.UNIVERSAL,t.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},r.createCaStore=function(e){var n={certs:{}};function i(e){return a(e),n.certs[e.hash]||null}function a(e){if(!e.hash){var t=MP.md.sha1.create();e.attributes=r.RDNAttributesAsArray(d(e),t),e.hash=t.digest().toHex()}}if(n.getIssuer=function(e){return i(e.issuer)},n.addCertificate=function(e){if("string"==typeof e&&(e=MP.pki.certificateFromPem(e)),a(e.subject),!n.hasCertificate(e))if(e.subject.hash in n.certs){var t=n.certs[e.subject.hash];MP.util.isArray(t)||(t=[t]),t.push(e),n.certs[e.subject.hash]=t}else n.certs[e.subject.hash]=e},n.hasCertificate=function(e){"string"==typeof e&&(e=MP.pki.certificateFromPem(e));var n=i(e.subject);if(!n)return!1;MP.util.isArray(n)||(n=[n]);for(var a=t.toDer(r.certificateToAsn1(e)).getBytes(),o=0;o<n.length;++o){if(a===t.toDer(r.certificateToAsn1(n[o])).getBytes())return!0}return!1},n.listAllCertificates=function(){var e=[];for(var t in n.certs)if(n.certs.hasOwnProperty(t)){var r=n.certs[t];if(MP.util.isArray(r))for(var i=0;i<r.length;++i)e.push(r[i]);else e.push(r)}return e},n.removeCertificate=function(e){var o;if("string"==typeof e&&(e=MP.pki.certificateFromPem(e)),a(e.subject),!n.hasCertificate(e))return null;var s=i(e.subject);if(!MP.util.isArray(s))return o=n.certs[e.subject.hash],delete n.certs[e.subject.hash],o;for(var u=t.toDer(r.certificateToAsn1(e)).getBytes(),c=0;c<s.length;++c){u===t.toDer(r.certificateToAsn1(s[c])).getBytes()&&(o=s[c],s.splice(c,1))}return 0===s.length&&delete n.certs[e.subject.hash],o},e)for(var o=0;o<e.length;++o){var s=e[o];n.addCertificate(s)}return n},r.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},r.verifyCertificateChain=function(e,t,n){var i=(t=t.slice(0)).slice(0),a=new Date,o=!0,s=null,u=0;do{var c=t.shift(),l=null,f=!1;if((a<c.validity.notBefore||a>c.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:r.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:a}),null===s){if(null===(l=t[0]||e.getIssuer(c))&&c.isIssuer(c)&&(f=!0,l=c),l){var d=l;MP.util.isArray(d)||(d=[d]);for(var p=!1;!p&&d.length>0;){l=d.shift();try{p=l.verify(c)}catch(e){}}p||(s={message:"Certificate signature is invalid.",error:r.certificateError.bad_certificate})}null!==s||l&&!f||e.hasCertificate(c)||(s={message:"Certificate is not trusted.",error:r.certificateError.unknown_ca})}if(null===s&&l&&!c.isIssuer(l)&&(s={message:"Certificate issuer is invalid.",error:r.certificateError.bad_certificate}),null===s)for(var h={keyUsage:!0,basicConstraints:!0},v=0;null===s&&v<c.extensions.length;++v){var m=c.extensions[v];!m.critical||m.name in h||(s={message:"Certificate has an unsupported critical extension.",error:r.certificateError.unsupported_certificate})}if(null===s&&(!o||0===t.length&&(!l||f))){var g=c.getExtension("basicConstraints"),y=c.getExtension("keyUsage");if(null!==y&&(y.keyCertSign&&null!==g||(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:r.certificateError.bad_certificate})),null!==s||null===g||g.cA||(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:r.certificateError.bad_certificate}),null===s&&null!==y&&"pathLenConstraint"in g)u-1>g.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:r.certificateError.bad_certificate})}var E=null===s||s.error,b=n?n(E,u,i):E;if(!0!==b)throw!0===E&&(s={message:"The application rejected the certificate.",error:r.certificateError.bad_certificate}),(b||0===b)&&("object"!=typeof b||MP.util.isArray(b)?"string"==typeof b&&(s.error=b):(b.message&&(s.message=b.message),b.error&&(s.error=b.error))),s;s=null,o=!1,++u}while(t.length>0);return!0}}),n(function(e){var t=MP.asn1,r=e.exports=MP.pkcs7=MP.pkcs7||{};function n(e){var n={},i=[];if(!t.validate(e,r.asn1.recipientInfoValidator,n,i)){var a=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw a.errors=i,a}return{version:n.version.charCodeAt(0),issuer:MP.pki.RDNAttributesAsArray(n.issuer),serialNumber:MP.util.createBuffer(n.serial).toHex(),encryptedContent:{algorithm:t.derToOid(n.encAlgorithm),parameter:n.encParameter.value,content:n.encKey}}}function i(e){for(var r,n=[],i=0;i<e.length;++i)n.push((r=e[i],t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(r.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[MP.pki.distinguishedNameToAsn1({attributes:r.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,MP.util.hexToBytes(r.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.encryptedContent.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,r.encryptedContent.content)])));return n}function a(e){var r=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[MP.pki.distinguishedNameToAsn1({attributes:e.issuer}),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,MP.util.hexToBytes(e.serialNumber))]),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.digestAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&r.value.push(e.authenticatedAttributesAsn1),r.value.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.signatureAlgorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")])),r.value.push(t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var n=t.create(t.Class.CONTEXT_SPECIFIC,1,!0,[]),i=0;i<e.unauthenticatedAttributes.length;++i){var a=e.unauthenticatedAttributes[i];n.values.push(o(a))}r.value.push(n)}return r}function o(e){var r;if(e.type===MP.pki.oids.contentType)r=t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.value).getBytes());else if(e.type===MP.pki.oids.messageDigest)r=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===MP.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),i=new Date("2050-01-01T00:00:00Z"),a=e.value;if("string"==typeof a){var o=Date.parse(a);a=isNaN(o)?13===a.length?t.utcTimeToDate(a):t.generalizedTimeToDate(a):new Date(o)}r=a>=n&&a<i?t.create(t.Class.UNIVERSAL,t.Type.UTCTIME,!1,t.dateToUtcTime(a)):t.create(t.Class.UNIVERSAL,t.Type.GENERALIZEDTIME,!1,t.dateToGeneralizedTime(a))}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[r])])}function s(e,r,n){var i={};if(!t.validate(r,n,i,[])){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}if(t.derToOid(i.contentType)!==MP.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(i.encryptedContent){var o="";if(MP.util.isArray(i.encryptedContent))for(var s=0;s<i.encryptedContent.length;++s){if(i.encryptedContent[s].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=i.encryptedContent[s].value}else o=i.encryptedContent;e.encryptedContent={algorithm:t.derToOid(i.encAlgorithm),parameter:MP.util.createBuffer(i.encParameter.value),content:MP.util.createBuffer(o)}}if(i.content){o="";if(MP.util.isArray(i.content))for(s=0;s<i.content.length;++s){if(i.content[s].type!==t.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=i.content[s].value}else o=i.content;e.content=MP.util.createBuffer(o)}return e.version=i.version.charCodeAt(0),e.rawCapture=i,i}function u(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case MP.pki.oids["aes128-CBC"]:case MP.pki.oids["aes192-CBC"]:case MP.pki.oids["aes256-CBC"]:t=MP.aes.createDecryptionCipher(e.encryptedContent.key);break;case MP.pki.oids.desCBC:case MP.pki.oids["des-EDE3-CBC"]:t=MP.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}r.messageFromPem=function(e){var n=MP.pem.decode(e)[0];if("PKCS7"!==n.type){var i=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw i.headerType=n.type,i}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var a=t.fromDer(n.body);return r.messageFromAsn1(a)},r.messageToPem=function(e,r){var n={type:"PKCS7",body:t.toDer(e.toAsn1()).getBytes()};return MP.pem.encode(n,{maxline:r})},r.messageFromAsn1=function(e){var n={},i=[];if(!t.validate(e,r.asn1.contentInfoValidator,n,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw a.errors=i,a}var o,s=t.derToOid(n.contentType);switch(s){case MP.pki.oids.envelopedData:o=r.createEnvelopedData();break;case MP.pki.oids.encryptedData:o=r.createEncryptedData();break;case MP.pki.oids.signedData:o=r.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+s+" is not (yet) supported.")}return o.fromAsn1(n.content.value[0]),o},r.createSignedData=function(){var e=null;return e={type:MP.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(s(e,t,r.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var n=e.rawCapture.certificates.value,i=0;i<n.length;++i)e.certificates.push(MP.pki.certificateFromAsn1(n[i]))},toAsn1:function(){e.contentInfo||e.sign();for(var r=[],n=0;n<e.certificates.length;++n)r.push(MP.pki.certificateToAsn1(e.certificates[n]));var i=[],a=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return r.length>0&&a.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,r)),i.length>0&&a.value[0].value.push(t.create(t.Class.CONTEXT_SPECIFIC,1,!0,i)),a.value[0].value.push(t.create(t.Class.UNIVERSAL,t.Type.SET,!0,e.signerInfos)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),a])},addSigner:function(t){var r=t.issuer,n=t.serialNumber;if(t.certificate){var i=t.certificate;"string"==typeof i&&(i=MP.pki.certificateFromPem(i)),r=i.issuer.attributes,n=i.serialNumber}var a=t.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof a&&(a=MP.pki.privateKeyFromPem(a));var o=t.digestAlgorithm||MP.pki.oids.sha1;switch(o){case MP.pki.oids.sha1:case MP.pki.oids.sha256:case MP.pki.oids.sha384:case MP.pki.oids.sha512:case MP.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+o)}var s=t.authenticatedAttributes||[];if(s.length>0){for(var u=!1,c=!1,l=0;l<s.length;++l){var f=s[l];if(u||f.type!==MP.pki.oids.contentType){if(c||f.type!==MP.pki.oids.messageDigest);else if(c=!0,u)break}else if(u=!0,c)break}if(!u||!c)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:a,version:1,issuer:r,serialNumber:n,digestAlgorithm:o,signatureAlgorithm:MP.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:s,unauthenticatedAttributes:[]})},sign:function(r){var n;(r=r||{},"object"!=typeof e.content||null===e.contentInfo)&&(e.contentInfo=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(MP.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof MP.util.ByteBuffer?n=e.content.bytes():"string"==typeof e.content&&(n=MP.util.encodeUtf8(e.content)),r.detached?e.detachedContent=t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n):e.contentInfo.value.push(t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,n)]))));0!==e.signers.length&&function(r){var n;n=e.detachedContent?e.detachedContent:(n=e.contentInfo.value[1]).value[0];if(!n)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var i=t.derToOid(e.contentInfo.value[0].value),s=t.toDer(n);for(var u in s.getByte(),t.getBerValueLength(s),s=s.getBytes(),r)r[u].start().update(s);for(var c=new Date,l=0;l<e.signers.length;++l){var f=e.signers[l];if(0===f.authenticatedAttributes.length){if(i!==MP.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var d=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[]),p=0;p<f.authenticatedAttributes.length;++p){var h=f.authenticatedAttributes[p];h.type===MP.pki.oids.messageDigest?h.value=r[f.digestAlgorithm].digest():h.type===MP.pki.oids.signingTime&&(h.value||(h.value=c)),d.value.push(o(h)),f.authenticatedAttributesAsn1.value.push(o(h))}s=t.toDer(d).getBytes(),f.md.start().update(s)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(e){for(var t=[],r=0;r<e.length;++r)t.push(a(e[r]));return t}(e.signers)}(function(){for(var r={},n=0;n<e.signers.length;++n){var i=e.signers[n],a=i.digestAlgorithm;a in r||(r[a]=MP.md[MP.pki.oids[a]].create()),0===i.authenticatedAttributes.length?i.md=r[a]:i.md=MP.md[MP.pki.oids[a]].create()}for(var a in e.digestAlgorithmIdentifiers=[],r)e.digestAlgorithmIdentifiers.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(a).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]));return r}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"==typeof t&&(t=MP.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},r.createEncryptedData=function(){var e=null;return e={type:MP.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:MP.pki.oids["aes256-CBC"]},fromAsn1:function(t){s(e,t,r.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),u(e)}}},r.createEnvelopedData=function(){var e=null;return e={type:MP.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:MP.pki.oids["aes256-CBC"]},fromAsn1:function(t){var i=s(e,t,r.asn1.envelopedDataValidator);e.recipients=function(e){for(var t=[],r=0;r<e.length;++r)t.push(n(e[r]));return t}(i.recipientInfos.value)},toAsn1:function(){return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(e.type).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(e.version).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,i(e.recipients)),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,(r=e.encryptedContent,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(MP.pki.oids.data).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.algorithm).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,r.parameter.getBytes())]),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,r.content.getBytes())])]))])])]);var r},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],a=i.issuer;if(i.serialNumber===t.serialNumber&&a.length===r.length){for(var o=!0,s=0;s<r.length;++s)if(a[s].type!==r[s].type||a[s].value!==r[s].value){o=!1;break}if(o)return i}}return null},decrypt:function(t,r){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==r)switch(t.encryptedContent.algorithm){case MP.pki.oids.rsaEncryption:case MP.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=MP.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}u(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:MP.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(void 0===e.encryptedContent.content){var n,i,a;switch(r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,r){case MP.pki.oids["aes128-CBC"]:n=16,i=16,a=MP.aes.createEncryptionCipher;break;case MP.pki.oids["aes192-CBC"]:n=24,i=16,a=MP.aes.createEncryptionCipher;break;case MP.pki.oids["aes256-CBC"]:n=32,i=16,a=MP.aes.createEncryptionCipher;break;case MP.pki.oids["des-EDE3-CBC"]:n=24,i=8,a=MP.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===t)t=MP.util.createBuffer(MP.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=MP.util.createBuffer(MP.random.getBytes(i));var o=a(t);if(o.start(e.encryptedContent.parameter.copy()),o.update(e.content),!o.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=o.output}for(var s=0;s<e.recipients.length;++s){var u=e.recipients[s];if(void 0===u.encryptedContent.content)switch(u.encryptedContent.algorithm){case MP.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}}}});var ZM=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],eD=[1,2,3,5];MP.rc2=MP.rc2||{};MP.rc2.expandKey=function(e,t){"string"==typeof e&&(e=MP.util.createBuffer(e)),t=t||128;var r,n=e,i=e.length(),a=t,o=Math.ceil(a/8),s=255>>(7&a);for(r=i;r<128;r++)n.putByte(ZM[n.at(r-1)+n.at(r-i)&255]);for(n.setAt(128-o,ZM[n.at(128-o)&s]),r=127-o;r>=0;r--)n.setAt(r,ZM[n.at(r+1)^n.at(r+o)]);return n};var tD=function(e,t,r){var n,i,a,o,s=!1,u=null,c=null,l=null,f=[];for(e=MP.rc2.expandKey(e,t),a=0;a<64;a++)f.push(e.getInt16Le());r?(n=function(e){for(a=0;a<4;a++)e[a]+=f[o]+(e[(a+3)%4]&e[(a+2)%4])+(~e[(a+3)%4]&e[(a+1)%4]),e[a]=(t=e[a])<<(r=eD[a])&65535|(65535&t)>>16-r,o++;var t,r},i=function(e){for(a=0;a<4;a++)e[a]+=f[63&e[(a+3)%4]]}):(n=function(e){for(a=3;a>=0;a--)e[a]=(65535&(t=e[a]))>>(r=eD[a])|t<<16-r&65535,e[a]-=f[o]+(e[(a+3)%4]&e[(a+2)%4])+(~e[(a+3)%4]&e[(a+1)%4]),o--;var t,r},i=function(e){for(a=3;a>=0;a--)e[a]-=f[63&e[(a+3)%4]]});var d=function(e){var t=[];for(a=0;a<4;a++){var n=u.getInt16Le();null!==l&&(r?n^=l.getInt16Le():l.putInt16Le(n)),t.push(65535&n)}o=r?0:63;for(var i=0;i<e.length;i++)for(var s=0;s<e[i][0];s++)e[i][1](t);for(a=0;a<4;a++)null!==l&&(r?l.putInt16Le(t[a]):t[a]^=l.getInt16Le()),c.putInt16Le(t[a])},p=null;return p={start:function(e,t){e&&"string"==typeof e&&(e=MP.util.createBuffer(e)),s=!1,u=MP.util.createBuffer(),c=t||new MP.util.createBuffer,l=e,p.output=c},update:function(e){for(s||u.putBuffer(e);u.length()>=8;)d([[5,n],[1,i],[6,n],[1,i],[5,n]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,u,!r);else{var n=8===u.length()?8:8-u.length();u.fillWithByte(n,n)}if(t&&(s=!0,p.update()),!r&&(t=0===u.length()))if(e)t=e(8,c,!r);else{var i=c.length(),a=c.at(i-1);a>i?t=!1:c.truncate(a)}return t}}};if(MP.rc2.startEncrypting=function(e,t,r){var n=MP.rc2.createEncryptionCipher(e,128);return n.start(t,r),n},MP.rc2.createEncryptionCipher=function(e,t){return tD(e,t,!0)},MP.rc2.startDecrypting=function(e,t,r){var n=MP.rc2.createDecryptionCipher(e,128);return n.start(t,r),n},MP.rc2.createDecryptionCipher=function(e,t){return tD(e,t,!1)},void 0===rD)var rD=MP.jsbn.BigInteger;var nD=MP.asn1,iD=MP.pki=MP.pki||{},aD=(iD.pbe=MP.pbe=MP.pbe||{},iD.oids),oD={name:"EncryptedPrivateKeyInfo",tagClass:nD.Class.UNIVERSAL,type:nD.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:nD.Class.UNIVERSAL,type:nD.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:nD.Class.UNIVERSAL,type:nD.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:nD.Class.UNIVERSAL,type:nD.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:nD.Class.UNIVERSAL,type:nD.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},sD={name:"PBES2Algorithms",tagClass:nD.Class.UNIVERSAL,type:nD.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:nD.Class.UNIVERSAL,type:nD.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:nD.Class.UNIVERSAL,type:nD.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:nD.Class.UNIVERSAL,type:nD.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:nD.Class.UNIVERSAL,type:nD.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:nD.Class.UNIVERSAL,type:nD.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:nD.Class.UNIVERSAL,type:nD.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:nD.Class.UNIVERSAL,type:nD.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:nD.Class.UNIVERSAL,type:nD.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:nD.Class.UNIVERSAL,type:nD.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:nD.Class.UNIVERSAL,type:nD.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:nD.Class.UNIVERSAL,type:nD.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},uD={name:"pkcs-12PbeParams",tagClass:nD.Class.UNIVERSAL,type:nD.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:nD.Class.UNIVERSAL,type:nD.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:nD.Class.UNIVERSAL,type:nD.Type.INTEGER,constructed:!1,capture:"iterations"}]};function cD(e,t){return e.start().update(t).digest().getBytes()}function lD(e){var t;if(e){if(!(t=iD.oids[nD.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return fD(t)}function fD(e){var t=MP.md;switch(e){case"hmacWithSHA224":t=MP.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!(t&&e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}iD.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n,i,a,o=MP.random.getBytesSync(r.saltSize),s=r.count,u=nD.integerToDer(s);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var c,l,f;switch(r.algorithm){case"aes128":n=16,c=16,l=aD["aes128-CBC"],f=MP.aes.createEncryptionCipher;break;case"aes192":n=24,c=16,l=aD["aes192-CBC"],f=MP.aes.createEncryptionCipher;break;case"aes256":n=32,c=16,l=aD["aes256-CBC"],f=MP.aes.createEncryptionCipher;break;case"des":n=8,c=8,l=aD.desCBC,f=MP.des.createEncryptionCipher;break;default:throw(g=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,g}var d="hmacWith"+r.prfAlgorithm.toUpperCase(),p=fD(d),h=MP.pkcs5.pbkdf2(t,o,s,n,p),v=MP.random.getBytesSync(c);(y=f(h)).start(v),y.update(nD.toDer(e)),y.finish(),a=y.output.getBytes();var m=function(e,t,r,n){var i=nD.create(nD.Class.UNIVERSAL,nD.Type.SEQUENCE,!0,[nD.create(nD.Class.UNIVERSAL,nD.Type.OCTETSTRING,!1,e),nD.create(nD.Class.UNIVERSAL,nD.Type.INTEGER,!1,t.getBytes())]);"hmacWithSHA1"!==n&&i.value.push(nD.create(nD.Class.UNIVERSAL,nD.Type.INTEGER,!1,MP.util.hexToBytes(r.toString(16))),nD.create(nD.Class.UNIVERSAL,nD.Type.SEQUENCE,!0,[nD.create(nD.Class.UNIVERSAL,nD.Type.OID,!1,nD.oidToDer(iD.oids[n]).getBytes()),nD.create(nD.Class.UNIVERSAL,nD.Type.NULL,!1,"")]));return i}(o,u,n,d);i=nD.create(nD.Class.UNIVERSAL,nD.Type.SEQUENCE,!0,[nD.create(nD.Class.UNIVERSAL,nD.Type.OID,!1,nD.oidToDer(aD.pkcs5PBES2).getBytes()),nD.create(nD.Class.UNIVERSAL,nD.Type.SEQUENCE,!0,[nD.create(nD.Class.UNIVERSAL,nD.Type.SEQUENCE,!0,[nD.create(nD.Class.UNIVERSAL,nD.Type.OID,!1,nD.oidToDer(aD.pkcs5PBKDF2).getBytes()),m]),nD.create(nD.Class.UNIVERSAL,nD.Type.SEQUENCE,!0,[nD.create(nD.Class.UNIVERSAL,nD.Type.OID,!1,nD.oidToDer(l).getBytes()),nD.create(nD.Class.UNIVERSAL,nD.Type.OCTETSTRING,!1,v)])])])}else{var g;if("3des"!==r.algorithm)throw(g=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,g;n=24;var y,E=new MP.util.ByteBuffer(o);h=iD.pbe.generatePkcs12Key(t,E,1,s,n),v=iD.pbe.generatePkcs12Key(t,E,2,s,n);(y=MP.des.createEncryptionCipher(h)).start(v),y.update(nD.toDer(e)),y.finish(),a=y.output.getBytes(),i=nD.create(nD.Class.UNIVERSAL,nD.Type.SEQUENCE,!0,[nD.create(nD.Class.UNIVERSAL,nD.Type.OID,!1,nD.oidToDer(aD["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),nD.create(nD.Class.UNIVERSAL,nD.Type.SEQUENCE,!0,[nD.create(nD.Class.UNIVERSAL,nD.Type.OCTETSTRING,!1,o),nD.create(nD.Class.UNIVERSAL,nD.Type.INTEGER,!1,u.getBytes())])])}return nD.create(nD.Class.UNIVERSAL,nD.Type.SEQUENCE,!0,[i,nD.create(nD.Class.UNIVERSAL,nD.Type.OCTETSTRING,!1,a)])},iD.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!nD.validate(e,oD,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var o=nD.derToOid(n.encryptionOid),s=iD.pbe.getCipher(o,n.encryptionParams,t),u=MP.util.createBuffer(n.encryptedData);return s.update(u),s.finish()&&(r=nD.fromDer(s.output)),r},iD.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:nD.toDer(e).getBytes()};return MP.pem.encode(r,{maxline:t})},iD.encryptedPrivateKeyFromPem=function(e){var t=MP.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return nD.fromDer(t.body)},iD.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var n=iD.wrapRsaPrivateKey(iD.privateKeyToAsn1(e));return n=iD.encryptPrivateKeyInfo(n,t,r),iD.encryptedPrivateKeyToPem(n)}var i,a,o,s;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,a=MP.random.getBytesSync(16),s=MP.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,a=MP.random.getBytesSync(16),s=MP.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,a=MP.random.getBytesSync(16),s=MP.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,a=MP.random.getBytesSync(8),s=MP.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,a=MP.random.getBytesSync(8),s=MP.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var c=s(MP.pbe.opensslDeriveBytes(t,a.substr(0,8),o));c.start(a),c.update(nD.toDer(iD.privateKeyToAsn1(e))),c.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:MP.util.bytesToHex(a).toUpperCase()},body:c.output.getBytes()};return MP.pem.encode(l)},iD.decryptRsaPrivateKey=function(e,t){var r=null,n=MP.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==n.type&&"PRIVATE KEY"!==n.type&&"RSA PRIVATE KEY"!==n.type)throw(o=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=o,o;if(n.procType&&"ENCRYPTED"===n.procType.type){var i,a;switch(n.dekInfo.algorithm){case"DES-CBC":i=8,a=MP.des.createDecryptionCipher;break;case"DES-EDE3-CBC":i=24,a=MP.des.createDecryptionCipher;break;case"AES-128-CBC":i=16,a=MP.aes.createDecryptionCipher;break;case"AES-192-CBC":i=24,a=MP.aes.createDecryptionCipher;break;case"AES-256-CBC":i=32,a=MP.aes.createDecryptionCipher;break;case"RC2-40-CBC":i=5,a=function(e){return MP.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":i=8,a=function(e){return MP.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":i=16,a=function(e){return MP.rc2.createDecryptionCipher(e,128)};break;default:var o;throw(o=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".')).algorithm=n.dekInfo.algorithm,o}var s=MP.util.hexToBytes(n.dekInfo.parameters),u=a(MP.pbe.opensslDeriveBytes(t,s.substr(0,8),i));if(u.start(s),u.update(MP.util.createBuffer(n.body)),!u.finish())return r;r=u.output.getBytes()}else r=n.body;return null!==(r="ENCRYPTED PRIVATE KEY"===n.type?iD.decryptPrivateKeyInfo(nD.fromDer(r),t):nD.fromDer(r))&&(r=iD.privateKeyFromAsn1(r)),r},iD.pbe.generatePkcs12Key=function(e,t,r,n,i,a){var o,s;if(null==a){if(!("sha1"in MP.md))throw new Error('"sha1" hash algorithm unavailable.');a=MP.md.sha1.create()}var u=a.digestLength,c=a.blockLength,l=new MP.util.ByteBuffer,f=new MP.util.ByteBuffer;if(null!=e){for(s=0;s<e.length;s++)f.putInt16(e.charCodeAt(s));f.putInt16(0)}var d=f.length(),p=t.length(),h=new MP.util.ByteBuffer;h.fillWithByte(r,c);var v=c*Math.ceil(p/c),m=new MP.util.ByteBuffer;for(s=0;s<v;s++)m.putByte(t.at(s%p));var g=c*Math.ceil(d/c),y=new MP.util.ByteBuffer;for(s=0;s<g;s++)y.putByte(f.at(s%d));var E=m;E.putBuffer(y);for(var b=Math.ceil(i/u),_=1;_<=b;_++){var S=new MP.util.ByteBuffer;S.putBytes(h.bytes()),S.putBytes(E.bytes());for(var T=0;T<n;T++)a.start(),a.update(S.getBytes()),S=a.digest();var w=new MP.util.ByteBuffer;for(s=0;s<c;s++)w.putByte(S.at(s%u));var I=Math.ceil(p/c)+Math.ceil(d/c),A=new MP.util.ByteBuffer;for(o=0;o<I;o++){var C=new MP.util.ByteBuffer(E.getBytes(c)),x=511;for(s=w.length()-1;s>=0;s--)x>>=8,x+=w.at(s)+C.at(s),C.setAt(s,255&x);A.putBuffer(C)}E=A,l.putBuffer(S)}return l.truncate(l.length()-i),l},iD.pbe.getCipher=function(e,t,r){switch(e){case iD.oids.pkcs5PBES2:return iD.pbe.getCipherForPBES2(e,t,r);case iD.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case iD.oids["pbewithSHAAnd40BitRC2-CBC"]:return iD.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},iD.pbe.getCipherForPBES2=function(e,t,r){var n,i={},a=[];if(!nD.validate(t,sD,i,a))throw(n=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,n;if((e=nD.derToOid(i.kdfOid))!==iD.oids.pkcs5PBKDF2)throw(n=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,n.supportedOids=["pkcs5PBKDF2"],n;if((e=nD.derToOid(i.encOid))!==iD.oids["aes128-CBC"]&&e!==iD.oids["aes192-CBC"]&&e!==iD.oids["aes256-CBC"]&&e!==iD.oids["des-EDE3-CBC"]&&e!==iD.oids.desCBC)throw(n=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,n.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],n;var o,s,u=i.kdfSalt,c=MP.util.createBuffer(i.kdfIterationCount);switch(c=c.getInt(c.length()<<3),iD.oids[e]){case"aes128-CBC":o=16,s=MP.aes.createDecryptionCipher;break;case"aes192-CBC":o=24,s=MP.aes.createDecryptionCipher;break;case"aes256-CBC":o=32,s=MP.aes.createDecryptionCipher;break;case"des-EDE3-CBC":o=24,s=MP.des.createDecryptionCipher;break;case"desCBC":o=8,s=MP.des.createDecryptionCipher}var l=lD(i.prfOid),f=MP.pkcs5.pbkdf2(r,u,c,o,l),d=i.encIv,p=s(f);return p.start(d),p},iD.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!nD.validate(t,uD,n,i))throw(l=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=i,l;var a,o,s,u=MP.util.createBuffer(n.salt),c=MP.util.createBuffer(n.iterations);switch(c=c.getInt(c.length()<<3),e){case iD.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:a=24,o=8,s=MP.des.startDecrypting;break;case iD.oids["pbewithSHAAnd40BitRC2-CBC"]:a=5,o=8,s=function(e,t){var r=MP.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:var l;throw(l=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,l}var f=lD(n.prfOid),d=iD.pbe.generatePkcs12Key(r,u,1,c,a,f);return f.start(),s(d,iD.pbe.generatePkcs12Key(r,u,2,c,o,f))},iD.pbe.opensslDeriveBytes=function(e,t,r,n){if(null==n){if(!("md5"in MP.md))throw new Error('"md5" hash algorithm unavailable.');n=MP.md.md5.create()}null===t&&(t="");for(var i=[cD(n,e+t)],a=16,o=1;a<r;++o,a+=16)i.push(cD(n,i[o-1]+e+t));return i.join("").substr(0,r)};var dD,pD;n(function(e){var t=MP.asn1,r=MP.pki,n=e.exports=MP.pkcs12=MP.pkcs12||{},i={name:"ContentInfo",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},a={name:"PFX",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,capture:"version"},i,{name:"PFX.macData",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:t.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:t.Class.UNIVERSAL,type:t.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:t.Class.UNIVERSAL,type:t.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},o={name:"SafeBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},s={name:"Attribute",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:t.Class.UNIVERSAL,type:t.Type.SET,constructed:!0,capture:"values"}]},u={name:"CertBag",tagClass:t.Class.UNIVERSAL,type:t.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:t.Class.UNIVERSAL,type:t.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:t.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:t.Class.UNIVERSAL,type:t.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function c(e,t,r,n){for(var i=[],a=0;a<e.length;a++)for(var o=0;o<e[a].safeBags.length;o++){var s=e[a].safeBags[o];void 0!==n&&s.type!==n||(null!==t?void 0!==s.attributes[t]&&s.attributes[t].indexOf(r)>=0&&i.push(s):i.push(s))}return i}function l(e){if(e.composed||e.constructed){for(var t=MP.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function f(e,n){var i={},a=[];if(!t.validate(e,MP.pkcs7.asn1.encryptedDataValidator,i,a))throw(o=new Error("Cannot read EncryptedContentInfo.")).errors=a,o;var o,s=t.derToOid(i.contentType);if(s!==r.oids.data)throw(o=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=s,o;s=t.derToOid(i.encAlgorithm);var u=r.pbe.getCipher(s,i.encParameter,n),c=l(i.encryptedContentAsn1),f=MP.util.createBuffer(c.value);if(u.update(f),!u.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return u.output.getBytes()}function d(e,n,i){if(!n&&0===e.length)return[];if((e=t.fromDer(e,n)).tagClass!==t.Class.UNIVERSAL||e.type!==t.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var a=[],s=0;s<e.value.length;s++){var c=e.value[s],l={},f=[];if(!t.validate(c,o,l,f))throw(g=new Error("Cannot read SafeBag.")).errors=f,g;var d,h,v={type:t.derToOid(l.bagId),attributes:p(l.bagAttributes)};a.push(v);var m=l.bagValue.value[0];switch(v.type){case r.oids.pkcs8ShroudedKeyBag:if(null===(m=r.decryptPrivateKeyInfo(m,i)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case r.oids.keyBag:try{v.key=r.privateKeyFromAsn1(m)}catch(e){v.key=null,v.asn1=m}continue;case r.oids.certBag:d=u,h=function(){if(t.derToOid(l.certId)!==r.oids.x509Certificate){var e=new Error("Unsupported certificate type, only X.509 supported.");throw e.oid=t.derToOid(l.certId),e}var i=t.fromDer(l.cert,n);try{v.cert=r.certificateFromAsn1(i,!0)}catch(e){v.cert=null,v.asn1=i}};break;default:var g;throw(g=new Error("Unsupported PKCS#12 SafeBag type.")).oid=v.type,g}if(void 0!==d&&!t.validate(m,d,l,f))throw(g=new Error("Cannot read PKCS#12 "+d.name)).errors=f,g;h()}return a}function p(e){var n={};if(void 0!==e)for(var i=0;i<e.length;++i){var a={},o=[];if(!t.validate(e[i],s,a,o)){var u=new Error("Cannot read PKCS#12 BagAttribute.");throw u.errors=o,u}var c=t.derToOid(a.oid);if(void 0!==r.oids[c]){n[r.oids[c]]=[];for(var l=0;l<a.values.length;++l)n[r.oids[c]].push(a.values[l].value)}}return n}n.pkcs12FromAsn1=function(e,o,s){"string"==typeof o?(s=o,o=!0):void 0===o&&(o=!0);var u={};if(!t.validate(e,a,u,[]))throw(p=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=p,p;var p,h={version:u.version.charCodeAt(0),safeContents:[],getBags:function(e){var t,r={};return"localKeyId"in e?t=e.localKeyId:"localKeyIdHex"in e&&(t=MP.util.hexToBytes(e.localKeyIdHex)),void 0===t&&!("friendlyName"in e)&&"bagType"in e&&(r[e.bagType]=c(h.safeContents,null,null,e.bagType)),void 0!==t&&(r.localKeyId=c(h.safeContents,"localKeyId",t,e.bagType)),"friendlyName"in e&&(r.friendlyName=c(h.safeContents,"friendlyName",e.friendlyName,e.bagType)),r},getBagsByFriendlyName:function(e,t){return c(h.safeContents,"friendlyName",e,t)},getBagsByLocalKeyId:function(e,t){return c(h.safeContents,"localKeyId",e,t)}};if(3!==u.version.charCodeAt(0))throw(p=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=u.version.charCodeAt(0),p;if(t.derToOid(u.contentType)!==r.oids.data)throw(p=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=t.derToOid(u.contentType),p;var v=u.content.value[0];if(v.tagClass!==t.Class.UNIVERSAL||v.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(v=l(v),u.mac){var m=null,g=0,y=t.derToOid(u.macAlgorithm);switch(y){case r.oids.sha1:m=MP.md.sha1.create(),g=20;break;case r.oids.sha256:m=MP.md.sha256.create(),g=32;break;case r.oids.sha384:m=MP.md.sha384.create(),g=48;break;case r.oids.sha512:m=MP.md.sha512.create(),g=64;break;case r.oids.md5:m=MP.md.md5.create(),g=16}if(null===m)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+y);var E=new MP.util.ByteBuffer(u.macSalt),b="macIterations"in u?parseInt(MP.util.bytesToHex(u.macIterations),16):1,_=n.generateKey(s,E,3,b,g,m),S=MP.hmac.create();if(S.start(m,_),S.update(v.value),S.getMac().getBytes()!==u.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(e,n,a,o){if((n=t.fromDer(n,a)).tagClass!==t.Class.UNIVERSAL||n.type!==t.Type.SEQUENCE||!0!==n.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var s=0;s<n.value.length;s++){var u=n.value[s],c={},p=[];if(!t.validate(u,i,c,p)){var h=new Error("Cannot read ContentInfo.");throw h.errors=p,h}var v={encrypted:!1},m=null,g=c.content.value[0];switch(t.derToOid(c.contentType)){case r.oids.data:if(g.tagClass!==t.Class.UNIVERSAL||g.type!==t.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");m=l(g).value;break;case r.oids.encryptedData:m=f(g,o),v.encrypted=!0;break;default:var h=new Error("Unsupported PKCS#12 contentType.");throw h.contentType=t.derToOid(c.contentType),h}v.safeBags=d(m,a,o),e.safeContents.push(v)}}(h,v.value,o,s),h},n.toPkcs12Asn1=function(e,i,a,o){(o=o||{}).saltSize=o.saltSize||8,o.count=o.count||2048,o.algorithm=o.algorithm||o.encAlgorithm||"aes128","useMac"in o||(o.useMac=!0),"localKeyId"in o||(o.localKeyId=null),"generateLocalKeyId"in o||(o.generateLocalKeyId=!0);var s,u=o.localKeyId;if(null!==u)u=MP.util.hexToBytes(u);else if(o.generateLocalKeyId)if(i){var c=MP.util.isArray(i)?i[0]:i;"string"==typeof c&&(c=r.certificateFromPem(c)),(A=MP.md.sha1.create()).update(t.toDer(r.certificateToAsn1(c)).getBytes()),u=A.digest().getBytes()}else u=MP.random.getBytes(20);var l=[];null!==u&&l.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.localKeyId).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,u)])])),"friendlyName"in o&&l.push(t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.friendlyName).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SET,!0,[t.create(t.Class.UNIVERSAL,t.Type.BMPSTRING,!1,o.friendlyName)])])),l.length>0&&(s=t.create(t.Class.UNIVERSAL,t.Type.SET,!0,l));var f=[],d=[];null!==i&&(d=MP.util.isArray(i)?i:[i]);for(var p=[],h=0;h<d.length;++h){"string"==typeof(i=d[h])&&(i=r.certificateFromPem(i));var v=0===h?s:void 0,m=r.certificateToAsn1(i),g=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.certBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.x509Certificate).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(m).getBytes())])])]),v]);p.push(g)}if(p.length>0){var y=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,p),E=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(y).getBytes())])]);f.push(E)}var b=null;if(null!==e){var _=r.wrapRsaPrivateKey(r.privateKeyToAsn1(e));b=null===a?t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.keyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[_]),s]):t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.pkcs8ShroudedKeyBag).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[r.encryptPrivateKeyInfo(_,a,o)]),s]);var S=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[b]),T=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(S).getBytes())])]);f.push(T)}var w,I=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,f);if(o.useMac){var A=MP.md.sha1.create(),C=new MP.util.ByteBuffer(MP.random.getBytes(o.saltSize)),x=o.count,O=(e=n.generateKey(a,C,3,x,20),MP.hmac.create());O.start(A,e),O.update(t.toDer(I).getBytes());var R=O.getMac();w=t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.sha1).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.NULL,!1,"")]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,R.getBytes())]),t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,C.getBytes()),t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(x).getBytes())])}return t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.INTEGER,!1,t.integerToDer(3).getBytes()),t.create(t.Class.UNIVERSAL,t.Type.SEQUENCE,!0,[t.create(t.Class.UNIVERSAL,t.Type.OID,!1,t.oidToDer(r.oids.data).getBytes()),t.create(t.Class.CONTEXT_SPECIFIC,0,!0,[t.create(t.Class.UNIVERSAL,t.Type.OCTETSTRING,!1,t.toDer(I).getBytes())])]),w])},n.generateKey=MP.pbe.generatePkcs12Key}),n(function(e){var t=MP.asn1,r=e.exports=MP.pki=MP.pki||{};r.pemToDer=function(e){var t=MP.pem.decode(e)[0];if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return MP.util.createBuffer(t.body)},r.privateKeyFromPem=function(e){var n=MP.pem.decode(e)[0];if("PRIVATE KEY"!==n.type&&"RSA PRIVATE KEY"!==n.type){var i=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw i.headerType=n.type,i}if(n.procType&&"ENCRYPTED"===n.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var a=t.fromDer(n.body);return r.privateKeyFromAsn1(a)},r.privateKeyToPem=function(e,n){var i={type:"RSA PRIVATE KEY",body:t.toDer(r.privateKeyToAsn1(e)).getBytes()};return MP.pem.encode(i,{maxline:n})},r.privateKeyInfoToPem=function(e,r){var n={type:"PRIVATE KEY",body:t.toDer(e).getBytes()};return MP.pem.encode(n,{maxline:r})}}),n(function(e){var t=e.exports=MP.sha512=MP.sha512||{};MP.md.sha512=MP.md.algorithms.sha512=t;var r=MP.sha384=MP.sha512.sha384=MP.sha512.sha384||{};r.create=function(){return t.create("SHA-384")},MP.md.sha384=MP.md.algorithms.sha384=r,MP.sha512.sha256=MP.sha512.sha256||{create:function(){return t.create("SHA-512/256")}},MP.md["sha512/256"]=MP.md.algorithms["sha512/256"]=MP.sha512.sha256,MP.sha512.sha224=MP.sha512.sha224||{create:function(){return t.create("SHA-512/224")}},MP.md["sha512/224"]=MP.md.algorithms["sha512/224"]=MP.sha512.sha224,t.create=function(e){if(i||(n=String.fromCharCode(128),n+=MP.util.fillString(String.fromCharCode(0),128),a=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(o={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],o["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],o["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],o["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],i=!0),void 0===e&&(e="SHA-512"),!(e in o))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=o[e],r=null,u=MP.util.createBuffer(),c=new Array(80),l=0;l<80;++l)c[l]=new Array(2);var f=64;switch(e){case"SHA-384":f=48;break;case"SHA-512/256":f=32;break;case"SHA-512/224":f=28}var d={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:f,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){d.messageLength=0,d.fullMessageLength=d.messageLength128=[];for(var e=d.messageLengthSize/4,n=0;n<e;++n)d.fullMessageLength.push(0);u=MP.util.createBuffer(),r=new Array(t.length);for(n=0;n<t.length;++n)r[n]=t[n].slice(0);return d}};return d.start(),d.update=function(e,t){"utf8"===t&&(e=MP.util.encodeUtf8(e));var n=e.length;d.messageLength+=n,n=[n/4294967296>>>0,n>>>0];for(var i=d.fullMessageLength.length-1;i>=0;--i)d.fullMessageLength[i]+=n[1],n[1]=n[0]+(d.fullMessageLength[i]/4294967296>>>0),d.fullMessageLength[i]=d.fullMessageLength[i]>>>0,n[0]=n[1]/4294967296>>>0;return u.putBytes(e),s(r,c,u),(u.read>2048||0===u.length())&&u.compact(),d},d.digest=function(){var t=MP.util.createBuffer();t.putBytes(u.bytes());var i,a=d.fullMessageLength[d.fullMessageLength.length-1]+d.messageLengthSize&d.blockLength-1;t.putBytes(n.substr(0,d.blockLength-a));for(var o=8*d.fullMessageLength[0],l=0;l<d.fullMessageLength.length-1;++l)o+=(i=8*d.fullMessageLength[l+1])/4294967296>>>0,t.putInt32(o>>>0),o=i>>>0;t.putInt32(o);var f=new Array(r.length);for(l=0;l<r.length;++l)f[l]=r[l].slice(0);s(f,c,t);var p,h=MP.util.createBuffer();p="SHA-512"===e?f.length:"SHA-384"===e?f.length-2:f.length-4;for(l=0;l<p;++l)h.putInt32(f[l][0]),l===p-1&&"SHA-512/224"===e||h.putInt32(f[l][1]);return h},d};var n=null,i=!1,a=null,o=null;function s(e,t,r){for(var n,i,o,s,u,c,l,f,d,p,h,v,m,g,y,E,b,_,S,T,w,I,A,C,x,O,R,N,k,P,M,D,L,U=r.length();U>=128;){for(R=0;R<16;++R)t[R][0]=r.getInt32()>>>0,t[R][1]=r.getInt32()>>>0;for(;R<80;++R)n=(((N=(P=t[R-2])[0])>>>19|(k=P[1])<<13)^(k>>>29|N<<3)^N>>>6)>>>0,i=((N<<13|k>>>19)^(k<<3|N>>>29)^(N<<26|k>>>6))>>>0,o=(((N=(D=t[R-15])[0])>>>1|(k=D[1])<<31)^(N>>>8|k<<24)^N>>>7)>>>0,s=((N<<31|k>>>1)^(N<<24|k>>>8)^(N<<25|k>>>7))>>>0,M=t[R-7],L=t[R-16],k=i+M[1]+s+L[1],t[R][0]=n+M[0]+o+L[0]+(k/4294967296>>>0)>>>0,t[R][1]=k>>>0;for(h=e[0][0],v=e[0][1],m=e[1][0],g=e[1][1],y=e[2][0],E=e[2][1],b=e[3][0],_=e[3][1],S=e[4][0],T=e[4][1],w=e[5][0],I=e[5][1],A=e[6][0],C=e[6][1],x=e[7][0],O=e[7][1],R=0;R<80;++R)l=((S>>>14|T<<18)^(S>>>18|T<<14)^(T>>>9|S<<23))>>>0,f=(A^S&(w^A))>>>0,u=((h>>>28|v<<4)^(v>>>2|h<<30)^(v>>>7|h<<25))>>>0,c=((h<<4|v>>>28)^(v<<30|h>>>2)^(v<<25|h>>>7))>>>0,d=(h&m|y&(h^m))>>>0,p=(v&g|E&(v^g))>>>0,k=O+(((S<<18|T>>>14)^(S<<14|T>>>18)^(T<<23|S>>>9))>>>0)+((C^T&(I^C))>>>0)+a[R][1]+t[R][1],n=x+l+f+a[R][0]+t[R][0]+(k/4294967296>>>0)>>>0,i=k>>>0,o=u+d+((k=c+p)/4294967296>>>0)>>>0,s=k>>>0,x=A,O=C,A=w,C=I,w=S,I=T,S=b+n+((k=_+i)/4294967296>>>0)>>>0,T=k>>>0,b=y,_=E,y=m,E=g,m=h,g=v,h=n+o+((k=i+s)/4294967296>>>0)>>>0,v=k>>>0;k=e[0][1]+v,e[0][0]=e[0][0]+h+(k/4294967296>>>0)>>>0,e[0][1]=k>>>0,k=e[1][1]+g,e[1][0]=e[1][0]+m+(k/4294967296>>>0)>>>0,e[1][1]=k>>>0,k=e[2][1]+E,e[2][0]=e[2][0]+y+(k/4294967296>>>0)>>>0,e[2][1]=k>>>0,k=e[3][1]+_,e[3][0]=e[3][0]+b+(k/4294967296>>>0)>>>0,e[3][1]=k>>>0,k=e[4][1]+T,e[4][0]=e[4][0]+S+(k/4294967296>>>0)>>>0,e[4][1]=k>>>0,k=e[5][1]+I,e[5][0]=e[5][0]+w+(k/4294967296>>>0)>>>0,e[5][1]=k>>>0,k=e[6][1]+C,e[6][0]=e[6][0]+A+(k/4294967296>>>0)>>>0,e[6][1]=k>>>0,k=e[7][1]+O,e[7][0]=e[7][0]+x+(k/4294967296>>>0)>>>0,e[7][1]=k>>>0,U-=128}}});function hD(e){e=e||{},this.name="",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._blocks=this.blockSize/4,this._inBlock=new Array(this._blocks),this._outBlock=new Array(this._blocks)}hD.prototype.start=function(){},hD.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;var n;for(n=0;n<this._blocks;++n)this._inBlock[n]=e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._blocks;++n)t.putInt32(this._outBlock[n])},hD.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;var n;for(n=0;n<this._blocks;++n)this._inBlock[n]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._blocks;++n)t.putInt32(this._outBlock[n])},pD=hD,dD=function(){return new MP.aes.Algorithm("AES",pD)},MP.cipher.registerAlgorithm("AES",dD),"function"==typeof setImmediate&&(MP.util.setImmediate=MP.util.nextTick=function(e){setImmediate(e)});var vD=MP;function mD(e,t){return void 0===t&&(t="utf8"),Vg(e)?yD(e.toString("base64")):yD(ag.from(e,t).toString("base64"))}function gD(e){return function(e){var t=e.length,r=t%4;if(!r)return e;var n=t,i=4-r,a=t+i,o=ag.alloc(a);for(o.write(e);i--;)o.write("=",n++);return o.toString()}(e=e.toString()).replace(/\-/g,"+").replace(/_/g,"/")}function yD(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var ED=mD;ED.encode=mD,ED.decode=function(e,t){return void 0===t&&(t="utf8"),ag.from(gD(e),"base64").toString(t)},ED.toBase64=gD,ED.fromBase64=yD,ED.toBuffer=function(e){return ag.from(gD(e),"base64")};var bD=ED;bD.default&&(bD=bD.default);var _D,SD={encode:function(e,t){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Vg(e)||(e=new ag(e,t)),bD.encode(e)},decode:bD.toBuffer},TD=n(function(e,t){var r=t;r.encode=function(e){var t=encodeURIComponent(e||"");return t=t.replace(/\%([0-9a-fA-F]{2})/g,function(e,t){return t=parseInt(t,16),String.fromCharCode(t)})},r.decode=function(e){var t=(e||"").replace(/[\u0080-\u00ff]/g,function(e){return"%"+(256|e.charCodeAt(0)).toString(16).substring(1)});return t=decodeURIComponent(t)}});var wD=_D={base64url:SD,utf8:TD,asBuffer:function(e,t){return Vg(e)?e:"string"==typeof e?"base64url"===(t=t||"binary")?_D.base64url.decode(e):new ag(e,t):(vD.util.isArrayBufferView(e)?e=e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteOffset+e.byteLength):vD.util.isArrayBuffer(e)&&(e=new Uint8Array(e)),new ag(e))},randomBytes:function(e){return new ag(vD.random.getBytes(e),"binary")}},ID=9007199254740991,AD="[object Arguments]",CD="[object Function]",xD="[object GeneratorFunction]",OD=/^(?:0|[1-9]\d*)$/;var RD=Object.prototype,ND=RD.hasOwnProperty,kD=RD.toString,PD=RD.propertyIsEnumerable,MD=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),DD=Math.max,LD=!PD.call({valueOf:1},"valueOf");function UD(e,t){var r=GD(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&qD(e)}(e)&&ND.call(e,"callee")&&(!PD.call(e,"callee")||kD.call(e)==AD)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var a in e)!t&&!ND.call(e,a)||i&&("length"==a||FD(a,n))||r.push(a);return r}function jD(e,t,r){var n=e[t];ND.call(e,t)&&VD(n,r)&&(void 0!==r||t in e)||(e[t]=r)}function FD(e,t){return!!(t=null==t?ID:t)&&("number"==typeof e||OD.test(e))&&e>-1&&e%1==0&&e<t}function BD(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||RD)}function VD(e,t){return e===t||e!=e&&t!=t}var GD=Array.isArray;function qD(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ID}(e.length)&&!function(e){var t=KD(e)?kD.call(e):"";return t==CD||t==xD}(e)}function KD(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var HD=function(e){return t=function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,o&&function(e,t,r){if(!KD(r))return!1;var n=typeof t;return!!("number"==n?qD(r)&&FD(t,r.length):"string"==n&&t in r)&&VD(r[t],e)}(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var s=r[n];s&&e(t,s,n,a)}return t},r=DD(void 0===r?t.length-1:r,0),function(){for(var e=arguments,n=-1,i=DD(e.length-r,0),a=Array(i);++n<i;)a[n]=e[r+n];n=-1;for(var o=Array(r+1);++n<r;)o[n]=e[n];return o[r]=a,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(t,this,o)};var t,r}(function(e,t){if(LD||BD(t)||qD(t))!function(e,t,r,n){r||(r={});for(var i=-1,a=t.length;++i<a;){var o=t[i],s=n?n(r[o],e[o],o,r,e):void 0;jD(r,o,void 0===s?e[o]:s)}}(t,function(e){return qD(e)?UD(e):function(e){if(!BD(e))return MD(e);var t=[];for(var r in Object(e))ND.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}(t),e);else for(var r in t)ND.call(t,r)&&jD(e,r,t[r])}),zD=9007199254740991,WD="[object Arguments]",YD="[object Function]",XD="[object GeneratorFunction]",$D="object"==typeof e&&e&&e.Object===Object&&e,QD="object"==typeof self&&self&&self.Object===Object&&self,JD=$D||QD||Function("return this")();function ZD(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var eL=Object.prototype,tL=eL.hasOwnProperty,rL=eL.toString,nL=JD.Symbol,iL=eL.propertyIsEnumerable,aL=nL?nL.isConcatSpreadable:void 0;function oL(e){return sL(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=zD}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?rL.call(e):"";return t==YD||t==XD}(e)}(e)}(e)&&tL.call(e,"callee")&&(!iL.call(e,"callee")||rL.call(e)==WD)}(e)||!!(aL&&e&&e[aL])}var sL=Array.isArray;var uL=function(e){return e&&e.length?function e(t,r,n,i,a){var o=-1,s=t.length;for(n||(n=oL),a||(a=[]);++o<s;){var u=t[o];r>0&&n(u)?r>1?e(u,r-1,n,i,a):ZD(a,u):i||(a[a.length]=u)}return a}(e,1):[]},cL="__lodash_hash_undefined__",lL=9007199254740991,fL="[object Function]",dL="[object GeneratorFunction]",pL=/^\[object .+?Constructor\]$/,hL="object"==typeof e&&e&&e.Object===Object&&e,vL="object"==typeof self&&self&&self.Object===Object&&self,mL=hL||vL||Function("return this")();function gL(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r,n){var i=e.length,a=r+(n?1:-1);for(;n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}(e,bL,r);var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function yL(e,t,r){for(var n=-1,i=e?e.length:0;++n<i;)if(r(t,e[n]))return!0;return!1}function EL(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function bL(e){return e!=e}function _L(e){return function(t){return e(t)}}function SL(e,t){return e.has(t)}var TL=Array.prototype,wL=Function.prototype,IL=Object.prototype,AL=mL["__core-js_shared__"],CL=function(){var e=/[^.]+$/.exec(AL&&AL.keys&&AL.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),xL=wL.toString,OL=IL.hasOwnProperty,RL=IL.toString,NL=RegExp("^"+xL.call(OL).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kL=TL.splice,PL=Math.max,ML=Math.min,DL=HL(mL,"Map"),LL=HL(Object,"create");function UL(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function jL(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function FL(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function BL(e){var t=-1,r=e?e.length:0;for(this.__data__=new FL;++t<r;)this.add(e[t])}function VL(e,t){for(var r,n,i=e.length;i--;)if((r=e[i][0])===(n=t)||r!=r&&n!=n)return i;return-1}function GL(e){return!(!WL(e)||(t=e,CL&&CL in t))&&(zL(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?NL:pL).test(function(e){if(null!=e){try{return xL.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function qL(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=lL}(e.length)&&!zL(e)}(e)}(e)?e:[]}function KL(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function HL(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return GL(r)?r:void 0}function zL(e){var t=WL(e)?RL.call(e):"";return t==fL||t==dL}function WL(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}UL.prototype.clear=function(){this.__data__=LL?LL(null):{}},UL.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},UL.prototype.get=function(e){var t=this.__data__;if(LL){var r=t[e];return r===cL?void 0:r}return OL.call(t,e)?t[e]:void 0},UL.prototype.has=function(e){var t=this.__data__;return LL?void 0!==t[e]:OL.call(t,e)},UL.prototype.set=function(e,t){return this.__data__[e]=LL&&void 0===t?cL:t,this},jL.prototype.clear=function(){this.__data__=[]},jL.prototype.delete=function(e){var t=this.__data__,r=VL(t,e);return!(r<0||(r==t.length-1?t.pop():kL.call(t,r,1),0))},jL.prototype.get=function(e){var t=this.__data__,r=VL(t,e);return r<0?void 0:t[r][1]},jL.prototype.has=function(e){return VL(this.__data__,e)>-1},jL.prototype.set=function(e,t){var r=this.__data__,n=VL(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},FL.prototype.clear=function(){this.__data__={hash:new UL,map:new(DL||jL),string:new UL}},FL.prototype.delete=function(e){return KL(this,e).delete(e)},FL.prototype.get=function(e){return KL(this,e).get(e)},FL.prototype.has=function(e){return KL(this,e).has(e)},FL.prototype.set=function(e,t){return KL(this,e).set(e,t),this},BL.prototype.add=BL.prototype.push=function(e){return this.__data__.set(e,cL),this},BL.prototype.has=function(e){return this.__data__.has(e)};var YL=function(e,t){return t=PL(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,i=PL(r.length-t,0),a=Array(i);++n<i;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=a,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,o)}}(function(e){var t=EL(e,qL);return t.length&&t[0]===e[0]?function(e,t,r){for(var n=r?yL:gL,i=e[0].length,a=e.length,o=a,s=Array(a),u=1/0,c=[];o--;){var l=e[o];o&&t&&(l=EL(l,_L(t))),u=ML(l.length,u),s[o]=!r&&(t||i>=120&&l.length>=120)?new BL(o&&l):void 0}l=e[0];var f=-1,d=s[0];e:for(;++f<i&&c.length<u;){var p=l[f],h=t?t(p):p;if(p=r||0!==p?p:0,!(d?SL(d,h):n(c,h,r))){for(o=a;--o;){var v=s[o];if(!(v?SL(v,h):n(e[o],h,r)))continue e}d&&d.push(h),c.push(p)}}return c}(t):[]}),XL=200,$L="__lodash_hash_undefined__",QL=1/0,JL=9007199254740991,ZL="[object Arguments]",eU="[object Function]",tU="[object GeneratorFunction]",rU="[object Symbol]",nU=/^\[object .+?Constructor\]$/,iU=/^(?:0|[1-9]\d*)$/,aU="object"==typeof e&&e&&e.Object===Object&&e,oU="object"==typeof self&&self&&self.Object===Object&&self,sU=aU||oU||Function("return this")();function uU(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r,n){var i=e.length,a=r+(n?1:-1);for(;n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}(e,dU,r);var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function cU(e,t,r){for(var n=-1,i=e?e.length:0;++n<i;)if(r(t,e[n]))return!0;return!1}function lU(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function fU(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function dU(e){return e!=e}function pU(e,t){return e.has(t)}function hU(e,t){return function(r){return e(t(r))}}var vU=Array.prototype,mU=Function.prototype,gU=Object.prototype,yU=sU["__core-js_shared__"],EU=function(){var e=/[^.]+$/.exec(yU&&yU.keys&&yU.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),bU=mU.toString,_U=gU.hasOwnProperty,SU=gU.toString,TU=RegExp("^"+bU.call(_U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wU=sU.Symbol,IU=hU(Object.getPrototypeOf,Object),AU=gU.propertyIsEnumerable,CU=vU.splice,xU=wU?wU.isConcatSpreadable:void 0,OU=Object.getOwnPropertySymbols,RU=Math.max,NU=qU(sU,"Map"),kU=qU(Object,"create");function PU(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function MU(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function DU(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function LU(e){var t=-1,r=e?e.length:0;for(this.__data__=new DU;++t<r;)this.add(e[t])}function UU(e,t){var r=$U(e)||XU(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],n=r.length,i=!!n;for(var a in e)!t&&!_U.call(e,a)||i&&("length"==a||WU(a,n))||r.push(a);return r}function jU(e,t){for(var r,n,i=e.length;i--;)if((r=e[i][0])===(n=t)||r!=r&&n!=n)return i;return-1}function FU(e){return!(!ZU(e)||(t=e,EU&&EU in t))&&(JU(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?TU:nU).test(function(e){if(null!=e){try{return bU.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function BU(e){if(!ZU(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t,r,n,i=(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||gU,t===n),a=[];for(var o in e)("constructor"!=o||!i&&_U.call(e,o))&&a.push(o);return a}function VU(e){return function(e,t,r){var n=t(e);return $U(e)?n:fU(n,r(e))}(e,tj,HU)}function GU(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function qU(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return FU(r)?r:void 0}PU.prototype.clear=function(){this.__data__=kU?kU(null):{}},PU.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},PU.prototype.get=function(e){var t=this.__data__;if(kU){var r=t[e];return r===$L?void 0:r}return _U.call(t,e)?t[e]:void 0},PU.prototype.has=function(e){var t=this.__data__;return kU?void 0!==t[e]:_U.call(t,e)},PU.prototype.set=function(e,t){return this.__data__[e]=kU&&void 0===t?$L:t,this},MU.prototype.clear=function(){this.__data__=[]},MU.prototype.delete=function(e){var t=this.__data__,r=jU(t,e);return!(r<0||(r==t.length-1?t.pop():CU.call(t,r,1),0))},MU.prototype.get=function(e){var t=this.__data__,r=jU(t,e);return r<0?void 0:t[r][1]},MU.prototype.has=function(e){return jU(this.__data__,e)>-1},MU.prototype.set=function(e,t){var r=this.__data__,n=jU(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},DU.prototype.clear=function(){this.__data__={hash:new PU,map:new(NU||MU),string:new PU}},DU.prototype.delete=function(e){return GU(this,e).delete(e)},DU.prototype.get=function(e){return GU(this,e).get(e)},DU.prototype.has=function(e){return GU(this,e).has(e)},DU.prototype.set=function(e,t){return GU(this,e).set(e,t),this},LU.prototype.add=LU.prototype.push=function(e){return this.__data__.set(e,$L),this},LU.prototype.has=function(e){return this.__data__.has(e)};var KU=OU?hU(OU,Object):rj,HU=OU?function(e){for(var t=[];e;)fU(t,KU(e)),e=IU(e);return t}:rj;function zU(e){return $U(e)||XU(e)||!!(xU&&e&&e[xU])}function WU(e,t){return!!(t=null==t?JL:t)&&("number"==typeof e||iU.test(e))&&e>-1&&e%1==0&&e<t}function YU(e){if("string"==typeof e||function(e){return"symbol"==typeof e||ej(e)&&SU.call(e)==rU}(e))return e;var t=e+"";return"0"==t&&1/e==-QL?"-0":t}function XU(e){return function(e){return ej(e)&&QU(e)}(e)&&_U.call(e,"callee")&&(!AU.call(e,"callee")||SU.call(e)==ZL)}var $U=Array.isArray;function QU(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=JL}(e.length)&&!JU(e)}function JU(e){var t=ZU(e)?SU.call(e):"";return t==eU||t==tU}function ZU(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ej(e){return!!e&&"object"==typeof e}function tj(e){return QU(e)?UU(e,!0):BU(e)}function rj(){return[]}var nj=function(e,t){return t=RU(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,i=RU(r.length-t,0),a=Array(i);++n<i;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=a,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,o)}}(function(e,t){return null==e?{}:(t=lU(function e(t,r,n,i,a){var o=-1,s=t.length;for(n||(n=zU),a||(a=[]);++o<s;){var u=t[o];r>0&&n(u)?r>1?e(u,r-1,n,i,a):fU(a,u):i||(a[a.length]=u)}return a}(t,1),YU),function(e,t){return function(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=e[o];r(s,o)&&(a[o]=s)}return a}(e=Object(e),t,function(t,r){return r in e})}(e,function(e,t,r,n){var i,a=-1,o=uU,s=!0,u=e.length,c=[],l=t.length;if(!u)return c;r&&(t=lU(t,(i=r,function(e){return i(e)}))),n?(o=cU,s=!1):t.length>=XL&&(o=pU,s=!1,t=new LU(t));e:for(;++a<u;){var f=e[a],d=r?r(f):f;if(f=n||0!==f?f:0,s&&d==d){for(var p=l;p--;)if(t[p]===d)continue e;c.push(f)}else o(t,d,n)||c.push(f)}return c}(VU(e),t)))}),ij=1/0,aj=9007199254740991,oj="[object Arguments]",sj="[object Function]",uj="[object GeneratorFunction]",cj="[object Symbol]",lj="object"==typeof e&&e&&e.Object===Object&&e,fj="object"==typeof self&&self&&self.Object===Object&&self,dj=lj||fj||Function("return this")();function pj(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var hj=Object.prototype,vj=hj.hasOwnProperty,mj=hj.toString,gj=dj.Symbol,yj=hj.propertyIsEnumerable,Ej=gj?gj.isConcatSpreadable:void 0,bj=Math.max;function _j(e){return Tj(e)||function(e){return function(e){return wj(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=aj}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?mj.call(e):"";return t==sj||t==uj}(e)}(e)}(e)&&vj.call(e,"callee")&&(!yj.call(e,"callee")||mj.call(e)==oj)}(e)||!!(Ej&&e&&e[Ej])}function Sj(e){if("string"==typeof e||function(e){return"symbol"==typeof e||wj(e)&&mj.call(e)==cj}(e))return e;var t=e+"";return"0"==t&&1/e==-ij?"-0":t}var Tj=Array.isArray;function wj(e){return!!e&&"object"==typeof e}var Ij=function(e,t){return t=bj(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,i=bj(r.length-t,0),a=Array(i);++n<i;)a[n]=r[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=r[n];return o[t]=a,function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,o)}}(function(e,t){return null==e?{}:function(e,t){return function(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var o=t[n],s=e[o];r(s,o)&&(a[o]=s)}return a}(e=Object(e),t,function(t,r){return r in e})}(e,function(e,t){for(var r=-1,n=e?e.length:0,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}(function e(t,r,n,i,a){var o=-1,s=t.length;for(n||(n=_j),a||(a=[]);++o<s;){var u=t[o];r>0&&n(u)?r>1?e(u,r-1,n,i,a):pj(a,u):i||(a[a.length]=u)}return a}(t,1),Sj))}),Aj=n(function(e,t){"undefined"==typeof Promise&&kN.polyfill(),t.int32ToBuffer=function(e,t){return(t=t||new ag(4))[0]=e>>>24&255,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=255&e,t};var r=Math.pow(2,32);t.int64ToBuffer=function(e,n){n=n||new ag(8);var i=Math.floor(e/r),a=e%r;return i=t.int32ToBuffer(i),a=t.int32ToBuffer(a),n=ag.concat([i,a])};var n={};Object.defineProperty(t,"subtleCrypto",{get:function(){return"subtleCrypto"in n?n.subtleCrypto:n.subtleCrypto=function(){if("undefined"!=typeof crypto&&void 0!==crypto.subtle)return crypto.subtle}()},enumerable:!0}),Object.defineProperty(t,"nodeCrypto",{get:function(){return"nodeCrypto"in n?n.nodeCrypto:n.nodeCrypto=function(){var e;try{e=JP}catch(e){return}if(Object.keys(e).length)return e}()},enumerable:!0}),t.setupFallback=function(e,r,n){return e&&t.nodeCrypto?function(){var t,r=arguments;try{t=Promise.resolve(e.apply(null,r))}catch(e){t=function(e){return 0===e.message.indexOf("unsupported algorithm:")?n.apply(null,r):Promise.reject(e)}(e)}return t}:r&&t.subtleCrypto?function(){var e,t=arguments;function i(e){return e.code!==DOMException.NOT_SUPPORTED_ERR&&"Only ArrayBuffer and ArrayBufferView objects can be passed as CryptoOperationData"!==e.message&&e instanceof Error?Promise.reject(e):n.apply(null,t)}try{e=(e=r.apply(null,t)).catch(i)}catch(t){e=i(t)}return e}:n}}),Cj=(Aj.int32ToBuffer,Aj.int64ToBuffer,Aj.setupFallback,{CHUNK_SIZE:1024,HASHLENGTH:{"SHA-1":160,"SHA-256":256,"SHA-384":384,"SHA-512":512},ENCLENGTH:{"AES-128-CBC":128,"AES-192-CBC":192,"AES-256-CBC":256,"AES-128-KW":128,"AES-192-KW":192,"AES-256-KW":256},KEYLENGTH:{"A128CBC-HS256":256,"A192CBC-HS384":384,"A256CBC-HS512":512,"A128CBC+HS256":256,"A192CBC+HS384":384,"A256CBC+HS512":512,A128GCM:128,A192GCM:192,A256GCM:256,A128KW:128,A192KW:192,A256KW:256,"ECDH-ES+A128KW":128,"ECDH-ES+A192KW":192,"ECDH-ES+A256KW":256},NONCELENGTH:{"A128CBC-HS256":128,"A192CBC-HS384":128,"A256CBC-HS512":128,"A128CBC+HS256":128,"A192CBC+HS384":128,"A256CBC+HS512":128,A128GCM:96,A192GCM:96,A256GCM:96}});function xj(e,t){t=t||{},Vg(e)?this.data=e:vD.util.isArrayBuffer(e)?(e=new Uint8Array(e),this.data=new ag(e)):vD.util.isArrayBufferView(e)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),this.data=new ag(e)),this.data&&(this.write=this.data.length,e=void 0),this.growSize=t.growSize||xj.DEFAULT_GROW_SIZE,this.write=this.write||0,this.read=this.read||0,e?this.putBytes(e):this.data||this.accommodate(0),t.readOffset="readOffset"in t?t.readOffset:this.read,this.write="writeOffset"in t?t.writeOffset:this.write,this.read=Math.min(t.readOffset,this.write)}xj.DEFAULT_GROW_SIZE=16,xj.prototype.length=function(){return this.write-this.read},xj.prototype.available=function(){return this.data.length-this.write},xj.prototype.isEmpty=function(){return this.length()<=0},xj.prototype.accommodate=function(e){if(this.data){if(this.available()<e){e=Math.max(e,this.growSize);var t=this.data,r=new ag(t.length+e);t.copy(r,0),this.data=r}}else e=Math.max(this.write+e,this.growSize),this.data=new ag(e);return this.data.fill(0,this.write),this},xj.prototype.clear=function(){return this.read=this.write=0,this.data=new ag(0),this},xj.prototype.truncate=function(e){return this.write=this.read+Math.max(0,this.length()-e),this.data.fill(0,this.write),this},xj.prototype.compact=function(){return this.read>0&&(this.write===this.read?this.read=this.write=0:(this.data.copy(this.data,0,this.read,this.write),this.write=this.write-this.read,this.read=0),this.data.fill(0,this.write)),this},xj.prototype.copy=function(){return new xj(this,{readOffset:this.read,writeOffset:this.write,growSize:this.growSize})},xj.prototype.equals=function(e){if(!xj.isBuffer(e))return!1;if(e.length()!==this.length())return!1;for(var t=!0,r=this.read-e.read,n=e.read;e.write>n;n++)t=t&&this.data[n+r]===e.data[n];return t},xj.prototype.at=function(e){return this.data[this.read+e]},xj.prototype.setAt=function(e,t){return this.data[this.read+e]=t,this},xj.prototype.last=function(){return this.data[this.write-1]},xj.prototype.bytes=function(e){var t;if(void 0===e?e=this.length():e&&(e=Math.min(e,this.length())),0===e)t="";else{var r=this.read,n=r+e,i=this.data.slice(r,n);t=String.fromCharCode.apply(null,i)}return t},xj.prototype.buffer=function(e){var t;if(void 0===e?e=this.length():e&&(e=Math.min(e,this.length())),0===e)t=new ArrayBuffer(0);else{var r=this.read,n=r+e,i=this.data.slice(r,n);(t=new Uint8Array(n-r)).set(i)}return t},xj.prototype.native=function(e){var t;if(void 0===e?e=this.length():e&&(e=Math.min(e,this.length())),0===e)t=new ag(0);else{var r=this.read,n=r+e;t=this.data.slice(r,n)}return t},xj.prototype.toHex=function(){return this.toString("hex")},xj.prototype.toString=function(e){if(0===this.length())return"";var t=this.data.slice(this.read,this.write);switch(e=e||"utf8"){case"raw":return t.toString("binary");case"base64url":return SD.encode(t);case"utf16":return t.toString("ucs2");default:return t.toString(e)}},xj.prototype.fillWithByte=function(e,t){return t||(t=this.available()),this.accommodate(t),this.data.fill(e,this.write,this.write+t),this.write+=t,this},xj.prototype.getBuffer=function(e){var t=this.buffer(e);return this.read+=t.byteLength,t},xj.prototype.putBuffer=function(e){return this.putBytes(e)},xj.prototype.getBytes=function(e){var t=this.bytes(e);return this.read+=t.length,t},xj.prototype.putBytes=function(e,t){if("string"==typeof e){switch(t=t||"binary"){case"utf16":t="ucs-2";break;case"raw":t="binary";break;case"base64url":e=SD.decode(e)}Vg(e)||(e=new ag(e,t))}var r,n;if(e instanceof xj){var i=e;e=i.data.slice(i.read,i.write),i.read=i.write}else e instanceof vD.util.ByteStringBuffer&&(e=e.getBytes());if(Vg(e))r=e;else if(Array.isArray(e))r=new ag(e);else if(vD.util.isArrayBuffer(e))r=new ag(r=new Uint8Array(e));else{if(!vD.util.isArrayBufferView(e))throw new TypeError("invalid source type");r=new ag(r=e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}return this.accommodate(r.length),n=this.data,r.copy(n,this.write),this.write+=r.length,this},xj.prototype.getNative=function(e){var t=this.native(e);return this.read+=t.length,t},xj.prototype.putNative=xj.prototype.putBuffer,xj.prototype.getByte=function(){var e=this.data[this.read];return this.read=Math.min(this.read+1,this.write),e},xj.prototype.putByte=function(e){return this.accommodate(1),this.data[this.write]=255&e,this.write++,this},xj.prototype.getInt16=function(){var e=this.data[this.read]<<8^this.data[this.read+1];return this.read=Math.min(this.read+2,this.write),e},xj.prototype.putInt16=function(e){return this.accommodate(2),this.data[this.write]=e>>>8&255,this.data[this.write+1]=255&e,this.write+=2,this},xj.prototype.getInt24=function(){var e=this.data[this.read]<<16^this.data[this.read+1]<<8^this.data[this.read+2];return this.read=Math.min(this.read+3,this.write),e},xj.prototype.putInt24=function(e){return this.accommodate(3),this.data[this.write]=e>>>16&255,this.data[this.write+1]=e>>>8&255,this.data[this.write+2]=255&e,this.write+=3,this},xj.prototype.getInt32=function(){var e=this.data[this.read]<<24^this.data[this.read+1]<<16^this.data[this.read+2]<<8^this.data[this.read+3];return this.read=Math.min(this.read+4,this.write),e},xj.prototype.putInt32=function(e){return this.accommodate(4),this.data[this.write]=e>>>24&255,this.data[this.write+1]=e>>>16&255,this.data[this.write+2]=e>>>8&255,this.data[this.write+3]=255&e,this.write+=4,this},xj.prototype.getInt16Le=function(){var e=this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+2,this.write),e},xj.prototype.putInt16Le=function(e){return this.accommodate(2),this.data[this.write+1]=e>>>8&255,this.data[this.write]=255&e,this.write+=2,this},xj.prototype.getInt24Le=function(){var e=this.data[this.read+2]<<16^this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+3,this.write),e},xj.prototype.putInt24Le=function(e){return this.accommodate(3),this.data[this.write+2]=e>>>16&255,this.data[this.write+1]=e>>>8&255,this.data[this.write]=255&e,this.write+=3,this},xj.prototype.getInt32Le=function(){var e=this.data[this.read+3]<<24^this.data[this.read+2]<<16^this.data[this.read+1]<<8^this.data[this.read];return this.read=Math.min(this.read+4,this.write),e},xj.prototype.putInt32Le=function(e){return this.accommodate(4),this.data[this.write+3]=e>>>24&255,this.data[this.write+2]=e>>>16&255,this.data[this.write+1]=e>>>8&255,this.data[this.write]=255&e,this.write+=4,this},xj.prototype.getInt=function(e){var t=0;do{t=t<<8|this.getByte(),e-=8}while(e>0);return t},xj.prototype.putInt=function(e,t){this.accommodate(Math.ceil(t/8));do{t-=8,this.putByte(e>>t&255)}while(t>0);return this},xj.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},xj.prototype.putString=function(e){return this.putBytes(e,"utf16")},xj.isBuffer=function(e){return e instanceof xj},xj.asBuffer=function(e){return xj.isBuffer(e)?e:e?new xj(e):new xj};var Oj=vD.util.ByteBuffer=xj;function Rj(e){var t=e.replace("HS","SHA").toLowerCase(),r=e.replace("HS","SHA-");function n(e,t){return(e=(e||Cj.HASHLENGTH[r])/8)>t.length?Promise.reject(new Error("invalid key length")):Promise.resolve(t)}return Aj.setupFallback(function(e,r,i){return n((i=i||{}).length,e).then(function(){var n=Aj.nodeCrypto.createHmac(t,e);n.update(r);var i=n.digest();return{data:r,mac:i}})},function(e,t,i){var a={name:"HMAC",hash:{name:r}};return n((i=i||{}).length,e).then(function(){return Aj.subtleCrypto.importKey("raw",e,a,!0,["sign"])}).then(function(e){return Aj.subtleCrypto.sign(a,e,t)}).then(function(e){var r=new ag(e);return{data:t,mac:r}})},function(e,r,i){return n((i=i||{}).length,e).then(function(){var n=vD.hmac.create();return n.start(t,e.toString("binary")),n.update(r),n=n.digest().native(),{data:r,mac:n}})})}function Nj(e){var t=e.replace("HS","SHA").toLowerCase(),r=e.replace("HS","SHA-");function n(e,t,n){e=(e||Cj.HASHLENGTH[r])/8;for(var i=!0,a=0;e>a;a++)i=i&&t[a]===n[a];return i}return Aj.setupFallback(function(e,r,i,a){a=a||{};var o=Aj.nodeCrypto.createHmac(t,e);o.update(r);var s=o.digest();if(!n(a.length,i,s))throw new Error("verification failed");return{data:r,mac:s,valid:!0}},function(e,t,i,a){var o={name:"HMAC",hash:{name:r}};return((a=a||{}).length?Aj.subtleCrypto.importKey("raw",e,o,!0,["sign"]).then(function(e){return Aj.subtleCrypto.sign(o,e,t)}).then(function(e){var t=new ag(e);return n(a.length,i,t)}):Aj.subtleCrypto.importKey("raw",e,o,!0,["verify"]).then(function(e){return Aj.subtleCrypto.verify(o,e,i,t)})).then(function(e){return e?{data:t,mac:i,valid:!0}:Promise.reject(new Error("verifaction failed"))})},function(e,r,i,a){a=a||{};var o=vD.hmac.create();return o.start(t,new Oj(e)),o.update(r),o=o.digest().native(),n(a.length,i,o)?Promise.resolve({data:r,mac:i,valid:!0}):Promise.reject(new Error("verification failed"))})}var kj={};["HS1","HS256","HS384","HS512"].forEach(function(e){kj[e]={sign:Rj(e),verify:Nj(e)}});var Pj=kj;var Mj={};["SHA-1","SHA-256","SHA-384","SHA-512"].forEach(function(e){var t,r,n;Mj[e]={digest:(t=e,r=t.replace("SHA-","SHA").toLowerCase(),n={name:t},Aj.setupFallback(function(e){var t=Aj.nodeCrypto.createHash(r);return t.update(e),t.digest()},function(e){return Aj.subtleCrypto.digest(n,e).then(function(e){return e=new ag(e)})},function(e){var t=vD.md[r].create();return t.update(e),t=t.digest().native(),Promise.resolve(t)}))}});var Dj=Mj;function Lj(e){if(16!==e.length)throw new Error("invalid iv")}function Uj(e){return Aj.setupFallback(function(t,r,n){try{Lj(n)}catch(e){return Promise.reject(e)}var i=Promise.resolve(r);return i=i.then(function(r){var i="AES-"+e+"-CBC",a=Aj.nodeCrypto.createCipheriv(i,t,n);return ag.concat([a.update(r),a.final()])})},function(e,t,r){try{Lj(r)}catch(e){return Promise.reject(e)}var n=Promise.resolve();return n=(n=(n=n.then(function(){return Aj.subtleCrypto.importKey("raw",e,{name:"AES-CBC"},!0,["encrypt"])})).then(function(e){var n={name:"AES-CBC",iv:r};return Aj.subtleCrypto.encrypt(n,e,t)})).then(function(e){return e=new ag(e)})},function(e,t,r){try{Lj(r)}catch(e){return Promise.reject(e)}var n=Promise.resolve();return n=n.then(function(){var n=vD.cipher.createCipher("AES-CBC",new Oj(e));return n.start({iv:new Oj(r)}),n.update(new Oj(t)),n.finish()?n.output.native():Promise.reject(new Error("encryption failed"))})})}function jj(e){return Aj.setupFallback(function(t,r,n){try{Lj(n)}catch(e){return Promise.reject(e)}var i=Promise.resolve();return i=i.then(function(){var i="AES-"+e+"-CBC",a=Aj.nodeCrypto.createDecipheriv(i,t,n);return ag.concat([a.update(r),a.final()])})},function(e,t,r){try{Lj(r)}catch(e){return Promise.reject(e)}var n=Promise.resolve();return n=(n=(n=n.then(function(){return Aj.subtleCrypto.importKey("raw",e,{name:"AES-CBC"},!0,["decrypt"])})).then(function(e){var n={name:"AES-CBC",iv:r};return Aj.subtleCrypto.decrypt(n,e,t)})).then(function(e){return e=new ag(e)})},function(e,t,r){try{Lj(r)}catch(e){return Promise.reject(e)}var n=Promise.resolve();return n=n.then(function(){var n=vD.cipher.createDecipher("AES-CBC",new Oj(e));return n.start({iv:new Oj(r)}),n.update(new Oj(t)),n.finish()?n.output.native():Promise.reject(new Error("encryption failed"))})})}function Fj(e,t){if(t<<1!=e.length<<3)throw new Error("invalid encryption key size")}function Bj(e){var t=Uj(e);return function(r,n,i){try{Fj(r,e)}catch(e){return Promise.reject(e)}var a=r.slice(e/8),o=r.slice(0,e/8),s=i.iv||new ag(0),u=i.aad||i.adata||new ag(0),c=t(a,n,s);return c=c.then(function(t){var r=ag.concat([u,s,t,Aj.int64ToBuffer(8*u.length)]);return Pj["HS"+2*e].sign(o,r,{length:e}).then(function(r){var n=r.mac.slice(0,e/8);return{data:t,tag:n}})})}}function Vj(e){var t=jj(e);return function(r,n,i){try{Fj(r,e)}catch(e){return Promise.reject(e)}var a=r.slice(e/8),o=r.slice(0,e/8),s=i.iv||new ag(0),u=i.aad||i.adata||new ag(0),c=i.tag||i.mac||new ag(0),l=Promise.resolve();return l=(l=l.then(function(){var t=ag.concat([u,s,n,Aj.int64ToBuffer(8*u.length)]);return Pj["HS"+2*e].verify(o,t,c,{length:e}).then(function(){return n},function(){throw new Error("mac check failed")})})).then(function(){return t(a,n,s)})}}var Gj=new ag("Encryption","utf8"),qj=new ag("Integrity","utf8"),Kj=new ag(".","utf8");function Hj(e,t,r,n){var i=8*e.length,a=i/2,o=Promise.resolve();return o=(o=o.then(function(){return ag.concat([Aj.int32ToBuffer(1),e,Aj.int32ToBuffer(a),new ag(t,"utf8"),r,n,Gj])})).then(function(e){return Dj["SHA-"+i].digest(e).then(function(e){return e.slice(0,a/8)})}),o=Promise.resolve(o)}function zj(e,t,r,n){var i=8*e.length,a=i,o=Promise.resolve();return o=(o=o.then(function(){return ag.concat([Aj.int32ToBuffer(1),e,Aj.int32ToBuffer(a),new ag(t,"utf8"),r,n,qj])})).then(function(e){return Dj["SHA-"+i].digest(e).then(function(e){return e.slice(0,a/8)})}),o=Promise.resolve(o)}function Wj(e,t){var r=Uj(e);return function(n,i,a){var o,s,u=a.epu||Aj.int32ToBuffer(0),c=a.epv||Aj.int32ToBuffer(0),l=a.iv||new ag(0),f=a.aad||a.adata||new ag(0),d=a.kdata||new ag(0),p=[Hj(n,t,u,c),zj(n,t,u,c)],h=Promise.all(p).then(function(e){o=e[0],s=e[1]});return h=(h=(h=h.then(function(){return r(o,i,l)})).then(function(t){var r=ag.concat([f,Kj,new ag(d),Kj,new ag(wD.base64url.encode(l),"utf8"),Kj,new ag(wD.base64url.encode(t),"utf8")]);return Promise.all([Promise.resolve(t),Pj["HS"+2*e].sign(s,r,{length:e})])})).then(function(e){return{data:e[0],tag:e[1].mac}})}}function Yj(e,t){var r=jj(e);return function(n,i,a){var o,s,u=a.epu||Aj.int32ToBuffer(0),c=a.epv||Aj.int32ToBuffer(0),l=a.iv||new ag(0),f=a.aad||a.adata||new ag(0),d=a.kdata||new ag(0),p=a.tag||a.mac||new ag(0),h=[Hj(n,t,u,c),zj(n,t,u,c)],v=Promise.all(h).then(function(e){o=e[0],s=e[1]});return v=(v=v.then(function(){var t=ag.concat([f,Kj,new ag(d),Kj,new ag(wD.base64url.encode(l),"utf8"),Kj,new ag(wD.base64url.encode(i),"utf8")]);try{return Pj["HS"+2*e].verify(s,t,p,{loose:!1})}catch(e){throw new Error("mac check failed")}})).then(function(){return r(o,i,l)})}}var Xj={};["A128CBC-HS256","A192CBC-HS384","A256CBC-HS512"].forEach(function(e){var t=parseInt(/A(\d+)CBC-HS(\d+)?/g.exec(e)[1]);Xj[e]={encrypt:Bj(t),decrypt:Vj(t)}}),["A128CBC+HS256","A192CBC+HS384","A256CBC+HS512"].forEach(function(e){var t=parseInt(/A(\d+)CBC\+HS(\d+)?/g.exec(e)[1]);Xj[e]={encrypt:Wj(t,e),decrypt:Yj(t,e)}});var $j=Xj,Qj=n(function(t){var r,n;r=e,n=function(){function e(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var r={},n={};function i(e,t){var i,a,s;return t?(s=0<=(e>>>=0)&&e<256)&&(a=n[e])?a:(i=o(e,(0|e)<0?-1:0,!0),s&&(n[e]=i),i):(s=-128<=(e|=0)&&e<128)&&(a=r[e])?a:(i=o(e,e<0?-1:0,!1),s&&(r[e]=i),i)}function a(e,t){if(isNaN(e)||!isFinite(e))return t?v:h;if(t){if(e<0)return v;if(e>=f)return b}else{if(e<=-d)return _;if(e+1>=d)return E}return e<0?a(-e,t).neg():o(e%l|0,e/l|0,t)}function o(t,r,n){return new e(t,r,n)}e.fromInt=i,e.fromNumber=a,e.fromBits=o;var s=Math.pow;function u(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return h;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return u(e.substring(1),t,r).neg();for(var i=a(s(r,8)),o=h,c=0;c<e.length;c+=8){var l=Math.min(8,e.length-c),f=parseInt(e.substring(c,c+l),r);if(l<8){var d=a(s(r,l));o=o.mul(d).add(a(f))}else o=(o=o.mul(i)).add(a(f))}return o.unsigned=t,o}function c(t){return t instanceof e?t:"number"==typeof t?a(t):"string"==typeof t?u(t):o(t.low,t.high,t.unsigned)}e.fromString=u,e.fromValue=c;var l=4294967296,f=l*l,d=f/2,p=i(1<<24),h=i(0);e.ZERO=h;var v=i(0,!0);e.UZERO=v;var m=i(1);e.ONE=m;var g=i(1,!0);e.UONE=g;var y=i(-1);e.NEG_ONE=y;var E=o(-1,2147483647,!1);e.MAX_VALUE=E;var b=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=b;var _=o(0,-2147483648,!1);e.MIN_VALUE=_;var S=e.prototype;return S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*l+(this.low>>>0):this.high*l+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var t=a(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=a(s(e,6),this.unsigned),o=this,u="";;){var c=o.div(i),l=(o.sub(c.mul(i)).toInt()>>>0).toString(e);if((o=c).isZero())return l+u;for(;l.length<6;)l="0"+l;u=""+l+u}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(e){return t(e)||(e=c(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.compare=function(e){if(t(e)||(e=c(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(m)},S.neg=S.negate,S.add=function(e){t(e)||(e=c(e));var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,a=65535&this.low,s=e.high>>>16,u=65535&e.high,l=e.low>>>16,f=0,d=0,p=0,h=0;return p+=(h+=a+(65535&e.low))>>>16,d+=(p+=i+l)>>>16,f+=(d+=n+u)>>>16,f+=r+s,o((p&=65535)<<16|(h&=65535),(f&=65535)<<16|(d&=65535),this.unsigned)},S.subtract=function(e){return t(e)||(e=c(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return h;if(t(e)||(e=c(e)),e.isZero())return h;if(this.eq(_))return e.isOdd()?_:h;if(e.eq(_))return this.isOdd()?_:h;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(p)&&e.lt(p))return a(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,u=e.high>>>16,l=65535&e.high,f=e.low>>>16,d=65535&e.low,v=0,m=0,g=0,y=0;return g+=(y+=s*d)>>>16,m+=(g+=i*d)>>>16,g&=65535,m+=(g+=s*f)>>>16,v+=(m+=n*d)>>>16,m&=65535,v+=(m+=i*f)>>>16,m&=65535,v+=(m+=s*l)>>>16,v+=r*d+n*f+i*l+s*u,o((g&=65535)<<16|(y&=65535),(v&=65535)<<16|(m&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(t(e)||(e=c(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?v:h;var r,n,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return g;i=v}else{if(this.eq(_))return e.eq(m)||e.eq(y)?_:e.eq(_)?m:(r=this.shr(1).div(e).shl(1)).eq(h)?e.isNegative()?m:y:(n=this.sub(e.mul(r)),i=r.add(n.div(e)));if(e.eq(_))return this.unsigned?v:h;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=h}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(r)/Math.LN2),u=o<=48?1:s(2,o-48),l=a(r),f=l.mul(e);f.isNegative()||f.gt(n);)f=(l=a(r-=u,this.unsigned)).mul(e);l.isZero()&&(l=m),i=i.add(l),n=n.sub(f)}return i},S.div=S.divide,S.modulo=function(e){return t(e)||(e=c(e)),this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.not=function(){return o(~this.low,~this.high,this.unsigned)},S.and=function(e){return t(e)||(e=c(e)),o(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return t(e)||(e=c(e)),o(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return t(e)||(e=c(e)),o(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?o(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):o(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?o(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):o(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0===(e&=63))return this;var r=this.high;return e<32?o(this.low>>>e|r<<32-e,r>>>e,this.unsigned):o(32===e?r:r>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},e},t&&t.exports?t.exports=n():(r.dcodeIO=r.dcodeIO||{}).Long=n()}),Jj=1/0,Zj=9007199254740991,eF=1.7976931348623157e308,tF=NaN,rF=4294967295,nF="[object Function]",iF="[object GeneratorFunction]",aF="[object Symbol]",oF=/^\s+|\s+$/g,sF=/^[-+]0x[0-9a-f]+$/i,uF=/^0b[01]+$/i,cF=/^0o[0-7]+$/i,lF=/^(?:0|[1-9]\d*)$/,fF=parseInt,dF=Object.prototype.toString;function pF(e,t,r,n){var i=e.length;for((r=gF(r))<0&&(r=-r>i?0:i+r),(n=void 0===n||n>i?i:gF(n))<0&&(n+=i),n=r>n?0:function(e){return e?(t=gF(e),r=0,n=rF,t==t&&(void 0!==n&&(t=t<=n?t:n),void 0!==r&&(t=t>=r?t:r)),t):0;var t,r,n}(n);r<n;)e[r++]=t;return e}function hF(e,t,r){if(!vF(r))return!1;var n=typeof t;return!!("number"==n?function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Zj}(e.length)&&!function(e){var t=vF(e)?dF.call(e):"";return t==nF||t==iF}(e)}(r)&&function(e,t){return!!(t=null==t?Zj:t)&&("number"==typeof e||lF.test(e))&&e>-1&&e%1==0&&e<t}(t,r.length):"string"==n&&t in r)&&function(e,t){return e===t||e!=e&&t!=t}(r[t],e)}function vF(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function mF(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&dF.call(e)==aF}(e))return tF;if(vF(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=vF(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(oF,"");var r=uF.test(e);return r||cF.test(e)?fF(e.slice(2),r?2:8):sF.test(e)?tF:+e}(e))===Jj||e===-Jj?(e<0?-1:1)*eF:e==e?e:0:0===e?e:0}function gF(e){var t=mF(e),r=t%1;return t==t?r?t-r:t:0}var yF=function(e,t,r,n){var i=e?e.length:0;return i?(r&&"number"!=typeof r&&hF(e,t,r)&&(r=0,n=i),pF(e,t,r,n)):[]},EF=n(function(e){var t=e.exports={intToBigEndian:function(e,r,n){if("number"==typeof e)switch(arguments.length){case 1:(r=new ag(4)).fill(0),t.intToBigEndian(e,r,0);break;case 3:r[n]=255&e>>>24,r[++n]=255&e>>>16,r[++n]=255&e>>>8,r[++n]=255&e;break;default:throw new TypeError("Expected 1 or 3 arguments.")}else switch(arguments.length){case 1:(r=new ag(4*e.length)).fill(0),t.intToBigEndian(e,r,0);break;case 3:for(var i=0;i<e.length;++i)t.intToBigEndian(e[i],r,n),n+=4;break;default:throw new TypeError("Expected 1 or 3 arguments.")}return r},longToBigEndian:function(e,r,n){if(Array.isArray(e))switch(arguments.length){case 1:(r=new ag(8*e.length)).fill(0),t.longToBigEndian(e,r,0);break;case 3:for(var i=0;i<e.length;++i)t.longToBigEndian(e[i],r,n),n+=8;break;default:throw new TypeError("Expected 1 or 3 arguments.")}else switch(arguments.length){case 1:(r=new ag(8)).fill(0),t.longToBigEndian(e,r,0);break;case 3:var a=e.low,o=e.high;t.intToBigEndian(o,r,n),t.intToBigEndian(a,r,n+4);break;default:throw new TypeError("Expected 1 or 3 arguments.")}return r},bigEndianToInt:function(e,r,n){switch(arguments.length){case 2:var i=e[r]<<24;return i|=(255&e[++r])<<16,i|=(255&e[++r])<<8,i|=255&e[++r];case 3:for(var a=0;a<n.length;++a)n[a]=t.bigEndianToInt(e,r),r+=4;break;default:throw new TypeError("Expected 2 or 3 arguments.")}},bigEndianToLong:function(e,r,n){switch(arguments.length){case 2:var i=t.bigEndianToInt(e,r),a=t.bigEndianToInt(e,r+4);return new Qj(a,i);case 3:for(var o=0;o<n.length;++o)n[o]=t.bigEndianToLong(e,r),r+=8;break;default:throw new TypeError("Expected 2 or 3 arguments.")}}}}),bF=(EF.intToBigEndian,EF.longToBigEndian,EF.bigEndianToInt,EF.bigEndianToLong,n(function(e){var t=3774873600,r=new Qj(t>>8);var n=e.exports={E1:t,E1B:225,E1L:r,LOOKUP:function(){for(var e=[],r=0;r<256;++r){for(var n=0,i=7;i>=0;--i)0!=(r&1<<i)&&(n^=t>>>7-i);e.push(n)}return e}(),arrayCopy:function(e,t,r,n,i){if(t<0||n<0||i<0)throw new TypeError("Invalid input.");if(r instanceof Uint8Array){if(n>=r.length||n+i>r.length)throw new TypeError("Invalid input.");(0!==t||i<e.length)&&(e=e instanceof Uint8Array?e.subarray(t,t+i):e.slice(t,t+i)),r.set(e,n)}else for(var a=0;a<i;++a)r[n+a]=e[t+a]},arrayEqual:function(e,t){e=e||[],t=t||[];for(var r=Math.min(e.length,t.length),n=e.length===t.length,i=0;i<r;i++)n=n&&void 0!==e[i]&&void 0!==t[i]&&e[i]===t[i];return n},asBytes:function(e,t){switch(arguments.length){case 1:return(t=new ag(16)).fill(0),EF.intToBigEndian(e,t,0),t;case 2:EF.intToBigEndian(e,t,0);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},asInts:function(e,t){switch(arguments.length){case 1:return yF(t=[],0,0,4),EF.bigEndianToInt(e,0,t),t;case 2:EF.bigEndianToInt(e,0,t);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},oneAsInts:function(){for(var e=[],t=0;t<4;++t)e.push(1<<31);return e},shiftRight:function(e,t){var r,n;switch(arguments.length){case 1:return r=e[0],e[0]=r>>>1,n=r<<31,r=e[1],e[1]=r>>>1|n,n=r<<31,r=e[2],e[2]=r>>>1|n,n=r<<31,r=e[3],e[3]=r>>>1|n,r<<31&4294967295;case 2:return r=e[0],t[0]=r>>>1,n=r<<31,r=e[1],t[1]=r>>>1|n,n=r<<31,r=e[2],t[2]=r>>>1|n,n=r<<31,r=e[3],t[3]=r>>>1|n,r<<31&4294967295;default:throw new TypeError("Expected 1 or 2 arguments.")}},shiftRightN:function(e,t,r){var n,i,a;switch(arguments.length){case 2:return i=e[0],n=32-t,e[0]=i>>>t,a=i<<n,i=e[1],e[1]=i>>>t|a,a=i<<n,i=e[2],e[2]=i>>>t|a,a=i<<n,i=e[3],e[3]=i>>>t|a,i<<n;case 3:return i=e[0],n=32-t,r[0]=i>>>t,a=i<<n,i=e[1],r[1]=i>>>t|a,a=i<<n,i=e[2],r[2]=i>>>t|a,a=i<<n,i=e[3],r[3]=i>>>t|a,i<<n;default:throw new TypeError("Expected 2 or 3 arguments.")}},xor:function(e,t,r){switch(arguments.length){case 2:e[0]^=t[0],e[1]^=t[1],e[2]^=t[2],e[3]^=t[3];break;case 3:r[0]=e[0]^t[0],r[1]=e[1]^t[1],r[2]=e[2]^t[2],r[3]=e[3]^t[3];break;default:throw new TypeError("Expected 2 or 3 arguments.")}},multiply:function(e,t){for(var r=e.slice(),i=[],a=0;a<4;++a)for(var o=t[a],s=31;s>=0;--s)0!=(o&1<<s)&&n.xor(i,r),0!==n.shiftRight(r)&&(r[0]^=n.E1);n.arrayCopy(i,0,e,0,4)},multiplyP:function(e,t){switch(arguments.length){case 1:0!==n.shiftRight(e)&&(e[0]^=n.E1);break;case 2:0!==n.shiftRight(e,t)&&(t[0]^=n.E1);break;default:throw new TypeError("Expected 1 or 2 arguments.")}},multiplyP8:function(e,t){var r;switch(arguments.length){case 1:r=n.shiftRightN(e,8),e[0]^=n.LOOKUP[r>>>24];break;case 2:r=n.shiftRightN(e,8,t),t[0]^=n.LOOKUP[r>>>24];break;default:throw new TypeError("Expected 1 or 2 arguments.")}}}}));bF.E1,bF.E1B,bF.E1L,bF.LOOKUP,bF.arrayCopy,bF.arrayEqual,bF.asBytes,bF.asInts,bF.oneAsInts,bF.shiftRight,bF.shiftRightN,bF.xor,bF.multiply,bF.multiplyP,bF.multiplyP8;function _F(){this.H=[],this.M=null}_F.prototype.init=function(e){var t,r,n;if(null==this.M)for(this.M=[],t=0;t<32;++t)for(this.M[t]=[],r=0;r<16;++r)for(this.M[t][r]=[],n=0;n<4;++n)this.M[t][r][n]=0;else if(bF.arrayEqual(this.H,e))return;for(this.H=e.slice(),bF.asInts(e,this.M[1][8]),r=4;r>=1;r>>=1)bF.multiplyP(this.M[1][r+r],this.M[1][r]);for(bF.multiplyP(this.M[1][1],this.M[0][8]),r=4;r>=1;r>>=1)bF.multiplyP(this.M[0][r+r],this.M[0][r]);for(t=0;;){for(r=2;r<16;r+=r)for(n=1;n<r;++n)bF.xor(this.M[t][r],this.M[t][n],this.M[t][r+n]);if(32==++t)return;if(t>1)for(r=8;r>0;r>>=1)bF.multiplyP8(this.M[t-2][r],this.M[t][r])}},_F.prototype.multiplyH=function(e){for(var t=[],r=15;r>=0;--r){var n=this.M[r+r][15&e[r]];t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],n=this.M[r+r+1][(240&e[r])>>>4],t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3]}EF.intToBigEndian(t,e,0)};var SF={"8k":_F};var TF={encrypt:function(e,t,r,n,i){var a=new Array(4),o=new Array(4);EF.bigEndianToInt(t,r,a),e.encrypt(a,o),EF.intToBigEndian(o,n,i)}};function wF(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=this.blockSize||16}var IF={createCipher:function(e){var t=new vD.aes.Algorithm("AES-GCM",wF);return t.initialize({key:new Oj(e.key)}),t.mode.start(e),t.mode},createDecipher:function(e){var t=new vD.aes.Algorithm("AES-GCM",wF);return t.initialize({key:new Oj(e.key)}),t.mode._decrypt=!0,t.mode.start(e),t.mode}};function AF(e){function t(t,r){if(e!==t.length<<3)throw new Error("invalid key size");if(12!==r.length)throw new Error("invalid iv")}return Aj.setupFallback(function(e,r,n){var i=n.iv||new ag(0),a=n.aad||n.adata||new ag(0);try{t(e,i)}catch(e){return Promise.reject(e)}var o,s="aes-"+8*e.length+"-gcm";try{o=Aj.nodeCrypto.createCipheriv(s,e,i)}catch(e){throw new Error("unsupported algorithm: "+s)}if("function"!=typeof o.setAAD)throw new Error("unsupported algorithm: "+s);return a.length&&o.setAAD(a),{data:ag.concat([o.update(r),o.final()]),tag:o.getAuthTag()}},function(e,r,n){var i=n.iv||new ag(0),a=n.aad||n.adata||new ag(0);try{t(e,i)}catch(e){return Promise.reject(e)}var o={name:"AES-GCM"};return Aj.subtleCrypto.importKey("raw",e,o,!0,["encrypt"]).then(function(e){return o.iv=i,o.tagLength=128,a.length&&(o.additionalData=a),Aj.subtleCrypto.encrypt(o,e,r)}).then(function(e){var t=e.byteLength-16,r=e.slice(t);r=new ag(r);var n=e.slice(0,t);return{data:n=new ag(n),tag:r}})},function(e,r,n){var i,a,o=n.iv||new ag(0),s=n.aad||n.adata||new ag(0);try{t(e,o)}catch(e){return Promise.reject(e)}return i=IF.createCipher({key:e,iv:o,additionalData:s}),a=new ag(r.length),new Promise(function(e,t){var n=Cj.CHUNK_SIZE,o=0,s=0;!function u(){var c=Math.min(n,r.length-s);if(o+=i.update(r,s,c,a,o),s+=c,r.length>s)setTimeout(u,0);else if((o+=i.finish(a,o))===r.length){var l=i.tag;e({data:a,tag:l})}else t(new Error("encryption failed"))}()})})}function CF(e){function t(t,r,n){if(e!==t.length<<3)throw new Error("invalid key size");if(12!==r.length)throw new Error("invalid iv");if(16!==n.length)throw new Error("invalid tag length")}return Aj.setupFallback(function(e,r,n){var i=n.aad||n.adata||new ag(0),a=n.iv||new ag(0),o=n.tag||n.mac||new ag(0);try{t(e,a,o)}catch(e){return Promise.reject(e)}var s,u="aes-"+8*e.length+"-gcm";try{s=Aj.nodeCrypto.createDecipheriv(u,e,a)}catch(e){throw new Error("unsupported algorithm: "+u)}if("function"!=typeof s.setAAD)throw new Error("unsupported algorithm: "+u);s.setAuthTag(o),i.length&&s.setAAD(i);try{return ag.concat([s.update(r),s.final()])}catch(e){throw new Error("decryption failed")}},function(e,r,n){var i=n.aad||n.adata||new ag(0),a=n.iv||new ag(0),o=n.tag||n.mac||new ag(0);try{t(e,a,o)}catch(e){return Promise.reject(e)}var s={name:"AES-GCM"};return Aj.subtleCrypto.importKey("raw",e,s,!0,["decrypt"]).then(function(e){return s.iv=a,s.tagLength=128,i.length&&(s.additionalData=i),r=ag.concat([r,o],r.length+o.length),Aj.subtleCrypto.decrypt(s,e,r)}).then(function(e){return e=new ag(e)})},function(e,r,n){var i,a,o=n.aad||n.adata||new ag(0),s=n.iv||new ag(0),u=n.tag||n.mac||new ag(0);try{t(e,s,u)}catch(e){return Promise.reject(e)}return i=IF.createDecipher({key:e,iv:s,additionalData:o,tag:u}),a=new ag(r.length),new Promise(function(e,t){var n=Cj.CHUNK_SIZE,o=0,s=0;!function u(){var c=Math.min(n,r.length-s);if(o+=i.update(r,s,c,a,o),s+=c,r.length>s)setTimeout(u,0);else{try{o+=i.finish(a,o)}catch(e){return void t(new Error("decryption failed"))}o===r.length?e(a):t(new Error("decryption failed"))}}()})})}wF.prototype.start=function(e){if(this.tag=null,!("iv"in(e=e||{})))throw new Error("Gcm needs ParametersWithIV or AEADParameters");if(this.nonce=e.iv,null==this.nonce||this.nonce.length<1)throw new Error("IV must be at least 1 byte");this.tagLength=16,"tag"in e&&(this.tag=new ag(e.tag));var t=this._decrypt?this.blockSize+this.tagLength:this.blockSize;this.bufBlock=new ag(t),this.bufBlock.fill(0);var r=e.multiplier;if(null==r&&(r=new SF["8k"]),this.multiplier=r,this.H=this.zeroBlock(),TF.encrypt(this.cipher,this.H,0,this.H,0),this.multiplier.init(this.H),this.exp=null,this.J0=this.zeroBlock(),12===this.nonce.length)this.nonce.copy(this.J0,0,0,this.nonce.length),this.J0[this.blockSize-1]=1;else{this.gHASH(this.J0,this.nonce,this.nonce.length);var n=this.zeroBlock();EF.longToBigEndian(new Qj(this.nonce.length).multiply(8),n,8),this.gHASHBlock(this.J0,n)}this.S=this.zeroBlock(),this.SAt=this.zeroBlock(),this.SAtPre=this.zeroBlock(),this.atBlock=this.zeroBlock(),this.atBlockPos=0,this.atLength=Qj.ZERO,this.atLengthPre=Qj.ZERO,this.counter=new ag(this.J0),this.bufOff=0,this.totalLength=Qj.ZERO,"additionalData"in e&&this.processAADBytes(e.additionalData,0,e.additionalData.length)},wF.prototype.update=function(e,t,r,n,i){for(var a=0;r>0;){var o=Math.min(r,this.bufBlock.length-this.bufOff);e.copy(this.bufBlock,this.bufOff,t,t+o),r-=o,t+=o,this.bufOff+=o,this.bufOff===this.bufBlock.length&&(this.outputBlock(n,i+a),a+=this.blockSize)}return a},wF.prototype.finish=function(e,t){var r=0;this._decrypt&&(r+=this.update(this.tag,0,this.tag.length,e,t)),this.totalLength.isZero()&&this.initCipher();var n=this.bufOff;if(this._decrypt){if(n<this.tagLength)throw new Error("data too short");n-=this.tagLength}n>0&&(this.gCTRPartial(this.bufBlock,0,n,e,t+r),r+=n),this.atLength=this.atLength.add(this.atBlockPos);var i=this.zeroBlock();EF.longToBigEndian(this.atLength.multiply(8),i,0),EF.longToBigEndian(this.totalLength.multiply(8),i,8),this.gHASHBlock(this.S,i);var a=new ag(this.blockSize);if(a.fill(0),TF.encrypt(this.cipher,this.J0,0,a,0),this.xor(a,this.S),this._decrypt){if(!bF.arrayEqual(this.tag,a))throw new Error("mac check in Gcm failed")}else this.tag=new ag(this.tagLength),a.copy(this.tag,0,0,this.tagLength);return r},wF.prototype.initCipher=function(){this.atLength.greaterThan(Qj.ZERO)&&(this.SAt.copy(this.SAtPre,0,0,this.blockSize),this.atLengthPre=this.atLength.add(Qj.ZERO)),this.atBlockPos>0&&(this.gHASHPartial(this.SAtPre,this.atBlock,0,this.atBlockPos),this.atLengthPre=this.atLengthPre.add(this.atBlockPos)),this.atLengthPre.greaterThan(Qj.ZERO)&&this.SAtPre.copy(this.S,0,0,this.blockSize)},wF.prototype.outputBlock=function(e,t){this.totalLength.isZero()&&this.initCipher(),this.gCTRBlock(this.bufBlock,e,t),this._decrypt?(this.bufBlock.copy(this.bufBlock,0,this.blockSize,this.blockSize+this.tagLength),this.bufOff=this.tagLength):this.bufOff=0},wF.prototype.processAADBytes=function(e,t,r){for(var n=0;n<r;++n)this.atBlock[this.atBlockPos]=e[t+n],++this.atBlockPos===this.blockSize&&(this.gHASHBlock(this.SAt,this.atBlock),this.atBlockPos=0,this.atLength=this.atLength.add(this.blockSize))},wF.prototype.getNextCounterBlock=function(){for(var e=15;e>=12;--e){var t=this.counter[e]+1&255;if(this.counter[e]=t,0!==t)break}var r=new ag(this.blockSize);return r.fill(0),TF.encrypt(this.cipher,this.counter,0,r,0),r},wF.prototype.gCTRBlock=function(e,t,r){var n=this.getNextCounterBlock();this.xor(n,e),n.copy(t,r,0,this.blockSize),this.gHASHBlock(this.S,this._decrypt?e:n),this.totalLength=this.totalLength.add(this.blockSize)},wF.prototype.gCTRPartial=function(e,t,r,n,i){var a=this.getNextCounterBlock();this.xor(a,e,t,r),a.copy(n,i,0,r),this.gHASHPartial(this.S,this._decrypt?e:a,0,r),this.totalLength=this.totalLength.add(r)},wF.prototype.gHASHBlock=function(e,t){this.xor(e,t),this.multiplier.multiplyH(e)},wF.prototype.gHASHPartial=function(e,t,r,n){this.xor(e,t,r,n),this.multiplier.multiplyH(e)},wF.prototype.xor=function(e,t,r,n){switch(arguments.length){case 2:for(var i=15;i>=0;--i)e[i]^=t[i];break;case 4:for(;n-- >0;)e[n]^=t[r+n];break;default:throw new TypeError("Expected 2 or 4 arguments.")}return e},wF.prototype.zeroBlock=function(){var e=new ag(16);return e.fill(0),e};var xF={};["A128GCM","A192GCM","A256GCM","A128GCMKW","A192GCMKW","A256GCMKW"].forEach(function(e){var t=parseInt(/A(\d+)GCM(?:KW)?/g.exec(e)[1]);xF[e]={encrypt:AF(t),decrypt:CF(t)}});var OF=xF,RF=new ag("a6a6a6a6a6a6a6a6","hex");function NF(e,t){for(var r=Math.max(e.length,t.length),n=new ag(r),i=0;r>i;i++)n[i]=(e[i]||0)^(t[i]||0);return n}function kF(e,t){for(var r=[],n=0;e.length>n;n+=t)r.push(e.slice(n,n+t));return r}function PF(e){var t=Math.floor(e/4294967296),r=e%4294967296,n=new ag(8);return n[0]=255&t>>>24,n[1]=255&t>>>16,n[2]=255&t>>>8,n[3]=255&t>>>0,n[4]=255&r>>>24,n[5]=255&r>>>16,n[6]=255&r>>>8,n[7]=255&r>>>0,n}function MF(e){function t(t,r){if(e!==t.length<<3)throw new Error("invalid key size");if(0<r.length&&0!=r.length%8)throw new Error("invalid data length")}return Aj.setupFallback(null,function(e,r){try{t(e,r)}catch(e){return Promise.reject(e)}var n={name:"AES-KW"},i=[Aj.subtleCrypto.importKey("raw",r,{name:"HMAC",hash:"SHA-256"},!0,["sign"]),Aj.subtleCrypto.importKey("raw",e,n,!0,["wrapKey"])];return i=(i=(i=Promise.all(i)).then(function(e){return Aj.subtleCrypto.wrapKey("raw",e[0],e[1],n)})).then(function(e){return{data:e=new ag(e)}})},function(e,r){try{t(e,r)}catch(e){return Promise.reject(e)}var n,i,a,o=vD.cipher.createCipher("AES",new Oj(e)),s=kF(r,8);n=RF;for(var u=0;6>u;u++)for(var c=0;s.length>c;c++)a=s.length*u+c+1,i=ag.concat([n,s[c]]),o.start(),o.update(new Oj(i)),o.finish(),n=NF((i=o.output.native()).slice(0,8),PF(a)),s[c]=i.slice(8,16);s=[n].concat(s);var l=ag.concat(s);return Promise.resolve({data:l})})}function DF(e){function t(t,r){if(e!==t.length<<3)throw new Error("invalid key size");if(0<r.length-8&&0!=r.length%8)throw new Error("invalid data length")}return Aj.setupFallback(null,function(e,r){try{t(e,r)}catch(e){return Promise.reject(e)}var n={name:"AES-KW"},i=Aj.subtleCrypto.importKey("raw",e,n,!0,["unwrapKey"]);return i=(i=(i=i.then(function(e){return Aj.subtleCrypto.unwrapKey("raw",r,e,n,{name:"HMAC",hash:"SHA-256"},!0,["sign"])})).then(function(e){return Aj.subtleCrypto.exportKey("raw",e)})).then(function(e){return e=new ag(e)})},function(e,r){try{t(e,r)}catch(e){return Promise.reject(e)}var n,i,a=vD.cipher.createDecipher("AES",new Oj(e)),o=kF(r,8);n=o[0],o=o.slice(1);for(var s=5;0<=s;--s)for(var u=o.length-1;0<=u;--u)i=NF(n,PF(o.length*s+u+1)),i=ag.concat([i,o[u]]),a.start(),a.update(new Oj(i)),a.finish(),n=(i=a.output.native()).slice(0,8),o[u]=i.slice(8,16);if(n.toString()!==RF.toString())return Promise.reject(new Error("decryption failed"));var c=ag.concat(o);return Promise.resolve(c)})}var LF={};["A128KW","A192KW","A256KW"].forEach(function(e){var t=parseInt(/A(\d+)KW/g.exec(e)[1]);LF[e]={encrypt:MF(t),decrypt:DF(t)}});var UF=LF;function jF(e){e=e.replace("CONCAT-","");return function(t,r){var n=(r=r||{}).length,i=Cj.HASHLENGTH[e];if(!n)return Promise.reject(new Error("invalid key length"));if(!r.otherInfo)return Promise.reject(new Error("invalid otherInfo"));var a=r.otherInfo,o=Dj[e].digest,s=Math.ceil(n/i),u=0,c=[];return function e(){if(s===u++)return ag.concat(c).slice(0,n);var r=new ag(4+t.length+a.length);return r.writeUInt32BE(u,0),t.copy(r,4),a.copy(r,4+t.length),o(r).then(function(t){return c.push(t),e()})}()}}var FF={};["CONCAT-SHA-1","CONCAT-SHA-256","CONCAT-SHA-384","CONCAT-SHA-512"].forEach(function(e){FF[e]={derive:jF(e)}});var BF=FF;var VF={dir:{encrypt:function(e){return Promise.resolve({data:e,once:!0,direct:!0})},decrypt:function(e){return Promise.resolve(e)}}},GF=vD.jsbn.BigInteger;function qF(){return new GF(null)}function KF(e){this.r2=qF(),this.q3=qF(),GF.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function HF(e,t){this.x=t,this.p=e}function zF(e,t,r,n){this.curve=e,this.x=t,this.y=r,this.z=n||GF.ONE,this.zinv=null}function WF(e,t,r){this.p=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new zF(this,null,null),this.reducer=new KF(this.p)}KF.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=qF();return e.copyTo(t),this.reduce(t),t},KF.prototype.revert=function(e){return e},KF.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},KF.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},KF.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},HF.prototype.equals=function(e){return e===this||this.p.equals(e.p)&&this.x.equals(e.x)},HF.prototype.toBigInteger=function(){return this.x},HF.prototype.negate=function(){return new HF(this.p,this.x.negate().mod(this.p))},HF.prototype.add=function(e){return new HF(this.p,this.x.add(e.toBigInteger()).mod(this.p))},HF.prototype.subtract=function(e){return new HF(this.p,this.x.subtract(e.toBigInteger()).mod(this.p))},HF.prototype.multiply=function(e){return new HF(this.p,this.x.multiply(e.toBigInteger()).mod(this.p))},HF.prototype.square=function(){return new HF(this.p,this.x.pow(2).mod(this.p))},HF.prototype.divide=function(e){return new HF(this.p,this.x.multiply(e.toBigInteger().modInverse(this.p)).mod(this.p))},zF.prototype.getX=function(){this.zinv||(this.zinv=this.z.modInverse(this.curve.p));var e=this.x.toBigInteger().multiply(this.zinv);return this.curve.reduce(e),this.curve.fromBigInteger(e)},zF.prototype.getY=function(){this.zinv||(this.zinv=this.z.modInverse(this.curve.p));var e=this.y.toBigInteger().multiply(this.zinv);return this.curve.reduce(e),this.curve.fromBigInteger(e)},zF.prototype.equals=function(e){return e===this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.p).equals(GF.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.p).equals(GF.ZERO))},zF.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(GF.ZERO)&&!this.y.toBigInteger().equals(GF.ZERO)},zF.prototype.negate=function(){return new zF(this.curve,this.x,this.y.negate(),this.z)},zF.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.p),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.p);if(GF.ZERO.equals(r))return GF.ZERO.equals(t)?this.twice():this.curve.getInfinity();var n=new GF("3"),i=this.x.toBigInteger(),a=this.y.toBigInteger(),o=r.pow(2),s=o.multiply(r),u=i.multiply(o),c=t.pow(2).multiply(this.z),l=c.subtract(u.shiftLeft(1)).multiply(e.z).subtract(s).multiply(r).mod(this.curve.p),f=u.multiply(n).multiply(t).subtract(a.multiply(s)).subtract(c.multiply(t)).multiply(e.z).add(t.multiply(s)).mod(this.curve.p),d=s.multiply(this.z).multiply(e.z).mod(this.curve.p);return new zF(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(f),d)},zF.prototype.twice=function(){if(this.isInfinity())return this;if(0===this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new GF("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),i=n.multiply(r).mod(this.curve.p),a=this.curve.a.toBigInteger(),o=t.pow(2).multiply(e);GF.ZERO.equals(a)||(o=o.add(this.z.pow(2).multiply(a)));var s=(o=o.mod(this.curve.p)).pow(2).subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.p),u=o.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(o.pow(2).multiply(o)).mod(this.curve.p),c=n.pow(2).multiply(n).shiftLeft(3).mod(this.curve.p);return new zF(this.curve,this.curve.fromBigInteger(s),this.curve.fromBigInteger(u),c)},zF.prototype.multiply=function(e){if(this.isInfinity())return this;if(0===e.signum())return this.curve.getInfinity();var t,r=e,n=r.multiply(new GF("3")),i=this.negate(),a=this;for(t=n.bitLength()-2;t>0;--t){a=a.twice();var o=n.testBit(t);o!==r.testBit(t)&&(a=a.add(o?this:i))}return a},zF.prototype.multiplyTwo=function(e,t,r){var n;n=e.bitLength()>r.bitLength()?e.bitLength()-1:r.bitLength()-1;for(var i=this.curve.getInfinity(),a=this.add(t);n>=0;)i=i.twice(),e.testBit(n)?i=r.testBit(n)?i.add(a):i.add(this):r.testBit(n)&&(i=i.add(t)),--n;return i},WF.prototype.getP=function(){return this.p},WF.prototype.getA=function(){return this.a},WF.prototype.getB=function(){return this.b},WF.prototype.equals=function(e){return e===this||this.p.equals(e.p)&&this.a.equals(e.a)&&this.b.equals(e.b)},WF.prototype.contains=function(e){var t=e.getX().toBigInteger(),r=e.getY().toBigInteger(),n=this.a.toBigInteger(),i=this.b.toBigInteger(),a=this.p,o=r.pow(2).mod(a),s=t.pow(3).add(n.multiply(t)).add(i).mod(a);return o.equals(s)},WF.prototype.getInfinity=function(){return this.infinity},WF.prototype.fromBigInteger=function(e){return new HF(this.p,e)},WF.prototype.reduce=function(e){this.reducer.reduce(e)},WF.prototype.decodePointHex=function(e){switch(parseInt(e.substring(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var t=(e.length-2)/2,r=e.substr(2,t),n=e.substr(t+2,t);return new zF(this,this.fromBigInteger(new GF(r,16)),this.fromBigInteger(new GF(n,16)));default:return null}},WF.prototype.encodePointHex=function(e){if(e.isInfinity())return"00";var t=e.getX().toBigInteger().toString(16),r=e.getY().toBigInteger().toString(16),n=this.getP().toString(16).length;for(n%2!=0&&n++;t.length<n;)t="0"+t;for(;r.length<n;)r="0"+r;return"04"+t+r};var YF={ECFieldElementFp:HF,ECPointFp:zF,ECCurveFp:WF},XF=n(function(e){var t=vD.jsbn.BigInteger;function r(e,t,r,n){this.curve=e,this.g=t,this.n=r,this.h=n}function n(e){return new t(e,16)}r.prototype.getCurve=function(){return this.curve},r.prototype.getG=function(){return this.g},r.prototype.getN=function(){return this.n},r.prototype.getH=function(){return this.h};var i,a,o,s,u,c,l,f=e.exports={secp256r1:(i=n("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF"),a=n("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC"),o=n("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B"),s=n("FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551"),u=t.ONE,c=new YF.ECCurveFp(i,a,o),l=c.decodePointHex("046B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C2964FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5"),new r(c,l,s,u)),secp384r1:function(){var e=n("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF"),i=n("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC"),a=n("B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF"),o=n("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973"),s=t.ONE,u=new YF.ECCurveFp(e,i,a),c=u.decodePointHex("04AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB73617DE4A96262C6F5D9E98BF9292DC29F8F41DBD289A147CE9DA3113B5F0B8C00A60B1CE1D7E819D7A431D7C90EA0E5F");return new r(u,c,o,s)}(),secp521r1:function(){var e=n("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"),i=n("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC"),a=n("0051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00"),o=n("01FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409"),s=t.ONE,u=new YF.ECCurveFp(e,i,a),c=u.decodePointHex("0400C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66011839296A789A3BC0045C8A5FB42C7D1BD998F54449579B446817AFBD17273E662C97EE72995EF42640C550B9013FAD0761353C7086A272C24088BE94769FD16650");return new r(u,c,o,s)}()};f["P-256"]=f.secp256r1,f["P-384"]=f.secp384r1,f["P-521"]=f.secp521r1}),$F=vD.jsbn.BigInteger;function QF(e){return new $F(e,16)}function JF(e,t){t||(t=Math.ceil(e.bitLength()/8)),t*=2;var r=e.toString(16);for(r=r.substring(Math.max(r.length-t,0));t>r.length;)r="0"+r;return new ag(r,"hex")}function ZF(e){return"string"==typeof e&&(e=new ag(e,"binary")),QF(e.toString("hex"))}function eB(e){return Math.ceil(e.getN().bitLength()/8)}function tB(e){var t=XF[e];if(!t)throw new TypeError("unsupported named curve: "+e);return t}function rB(e,t){var r=e.getN().bitLength(),n=8*t.length,i=ZF(t);return r<n&&(i=i.shiftRight(n-r)),i}function nB(e,t,r){var n=tB(e),i=n.getCurve(),a=new YF.ECPointFp(i,i.fromBigInteger(t),i.fromBigInteger(r));this.curve=e,this.params=n,this.point=a;var o=eB(n);this.x=JF(t,o),this.y=JF(r,o)}function iB(e,t){var r=tB(e);this.curve=e,this.params=r;var n=eB(r);this.d=JF(t,n)}nB.prototype.isValid=function(){return this.params.curve.contains(this.point)},nB.prototype.verify=function(e,t){var r=this.params.getN(),n=this.params.getG(),i=ZF(t.r),a=ZF(t.s);if(i.compareTo($F.ONE)<0||i.compareTo(r)>=0)return!1;if(a.compareTo($F.ONE)<0||i.compareTo(r)>=0)return!1;var o=rB(this.params,e),s=a.modInverse(r),u=o.multiply(s).mod(r),c=i.multiply(s).mod(r),l=n.multiplyTwo(u,this.point,c).getX().toBigInteger();return(l=l.mod(r)).equals(i)},iB.prototype.toPublicKey=function(){var e=ZF(this.d),t=this.params.getG().multiply(e);return new nB(this.curve,t.getX().toBigInteger(),t.getY().toBigInteger())},iB.prototype.sign=function(e){var t,r,n,i,a=eB(this.params),o=this.params.getN(),s=this.params.getG(),u=rB(this.params,e),c=ZF(this.d);do{do{do{n=ZF(vD.random.getBytes(a))}while(n.equals($F.ZERO)||n.compareTo(o)>=0);t=s.multiply(n).getX().toBigInteger().mod(o)}while(t.equals($F.ZERO));i=c.multiply(t),i=u.add(i),r=n.modInverse(o).multiply(i).mod(o)}while(r.equals($F.ONE));var l=eB(this.params);return{r:t=JF(t,l),s:r=JF(r,l)}},iB.prototype.isValid=function(){var e=ZF(this.d),t=params.getN().subtract(BigIneger.ONE);return e.compareTo($F.ONE)>=0&&e.compareTo(t)<0},iB.prototype.computeSecret=function(e){var t=ZF(this.d),r=e.point.multiply(t).getX().toBigInteger();return r=JF(r,eB(this.params))};var aB={generateKeyPair:function(e){var t=tB(e),r=t.getN(),n=vD.random.getBytes(eB(t));n=ZF(n);var i=r.subtract($F.ONE),a=new iB(e,n.mod(i).add($F.ONE)),o=a.toPublicKey();return{private:a,public:o}},asPublicKey:function(e,t,r){return"string"==typeof t?t=QF(t):Vg(t)&&(t=ZF(t)),"string"==typeof r?r=QF(r):Vg(r)&&(r=ZF(r)),new nB(e,t,r)},asPrivateKey:function(e,t){return"string"==typeof t?t=QF(t):Vg(t)&&(t=ZF(t)),new iB(e,t)}},oB={"P-256":256,"P-384":384,"P-521":521};function sB(e,t){var r=PN(e);return(t?["x","y"]:["d"]).forEach(function(e){r[e]=wD.asBuffer(r[e],"base64url")}),r}var uB=new ag([4]);var cB={convertToForge:function(e,t){var r=t?["x","y"]:["d"];return r=r.map(function(t){return new vD.jsbn.BigInteger(e[t].toString("hex"),16)}),r=[e.crv].concat(r),(t?aB.asPublicKey:aB.asPrivateKey).apply(aB,r)},convertToJWK:function(e,t){var r=PN(e);return(t?["x","y"]:["x","y","d"]).forEach(function(e){r[e]=wD.base64url.encode(r[e])}),delete r.key_ops,delete r.use,delete r.alg,t&&delete r.d,r},convertToObj:sB,convertToBuffer:function(e,t){return e=sB(e,t),t?ag.concat([uB,e.x,e.y]):e.d},curveSize:function(e){return oB[e||""]||NaN}};function lB(e){var t=e.replace("HKDF-",""),r=e.replace("HKDF-SHA-","HS");return function(e,n){var i=Cj.HASHLENGTH[t]/8;"string"==typeof r&&(r=Pj[r].sign);var a=(n=n||{}).salt;a&&0!==a.length||(a=new ag(i)).fill(0);var o=n.info||new ag(0),s=n.length||i,u=Math.ceil(s/i),c=[],l=0;return r(a,e,{length:8*a.length}).then(function(e){return function e(t,n){return u===l++?ag.concat(c).slice(0,s):(n||(n=new ag(0)),n=ag.concat([n,o,new ag([l])]),n=(n=r(t,n)).then(function(r){return n=r.mac,c.push(n),e(t,n)}))}(e.mac)})}}var fB={};["HKDF-SHA-1","HKDF-SHA-256","HKDF-SHA-384","HKDF-SHA-512"].forEach(function(e){fB[e]={derive:lB(e)}});var dB=fB,pB=n(function(e){function t(e){switch(e){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new Error("unsupported curve: "+e)}}var r=e.exports={};function n(e,t,n){function i(e){return ag.concat([Aj.int32ToBuffer(e.length),e])}var a=n.algorithm||"",o=Cj.KEYLENGTH[a],s=wD.asBuffer(n.apu||"","base64url"),u=wD.asBuffer(n.apv||"","base64url"),c={public:t,length:o/8,hash:"SHA-256",otherInfo:ag.concat([i(new ag(a,"utf8")),i(s),i(u),Aj.int32ToBuffer(o)])};return r["ECDH-CONCAT"].derive(e,c)}["ECDH","ECDH-HKDF","ECDH-CONCAT"].forEach(function(e){var n,i,a=/^ECDH(?:-(\w+))?$/g.exec(e||"")[1],o=r[e]=r[e]||{};switch(a||""){case"CONCAT":o.derive=function(e,n){var i;n=n||{};try{if(!(i=n.hash||t(e.crv)))throw new Error("invalid hash: "+i);i.toUpperCase()}catch(e){return Promise.reject(e)}var a=["public"],o=r.ECDH.derive(e,Ij(n,a));return o=o.then(function(e){return BF["CONCAT-"+i].derive(e,nj(n,a))})};break;case"HKDF":o.derive=function(e,n){var i;n=n||{};try{if(!(i=n.hash||t(e.crv)))throw new Error("invalid hash: "+i);i.toUpperCase()}catch(e){return Promise.reject(e)}var a=["public"],o=r.ECDH.derive(e,Ij(n,a));return o=o.then(function(e){return dB["HKDF-"+i].derive(e,nj(n,a))})};break;case"":o.derive=(n={name:"ECDH"},i=function(e,t){var r=e&&cB.convertToForge(e,!0);if(!r||!r.isValid())return Promise.reject(new Error("invalid EC public key"));switch(t){case"jwk":r=cB.convertToJWK(e,!0);break;case"buffer":r=cB.convertToBuffer(e,!0)}return Promise.resolve(r)},Aj.setupFallback(function(e,t){if("function"!=typeof Aj.nodeCrypto.createECDH)throw new Error("unsupported algorithm: ECDH");var r,n=(t=t||{}).length||0;switch(e.crv){case"P-256":r="prime256v1";break;case"P-384":r="secp384r1";break;case"P-521":r="secp521r1";break;default:return Promise.reject(new Error("invalid curve: "+r))}var a=cB.convertToBuffer(e,!1),o=i(t.public,"buffer");return o=o.then(function(e){var t=Aj.nodeCrypto.createECDH(r);t.setPrivateKey(a);var i=t.computeSecret(e);if(n){if(i.length<n)return Promise.reject(new Error("key length too large: "+n));i=i.slice(0,n)}return i})},function(e,t){e=e||{};var r=(t=t||{}).length||0,a=$k(PN(n),{namedCurve:e.crv});r||(r=e.d.length);var o=cB.convertToJWK(e,!1);o=Aj.subtleCrypto.importKey("jwk",o,a,!1,["deriveBits"]);var s=i(t.public,"jwk");s=s.then(function(e){return Aj.subtleCrypto.importKey("jwk",e,a,!1,[])});var u=Promise.all([o,s]);return u=(u=u.then(function(e){var t=e[0],i=e[1],a=$k(PN(n),{public:i});return Aj.subtleCrypto.deriveBits(a,t,8*r)})).then(function(e){return e=new ag(e)})},function(e,t){var r=(t=t||{}).length||0,n=cB.convertToForge(e,!1),a=i(t.public,"forge");return a=a.then(function(e){var t=n.computeSecret(e);if(r){if(t.length<r)return Promise.reject(new Error("key length too large: "+r));t=t.slice(0,r)}return t})}));break;default:o.derive=null}}),["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"].forEach(function(e){var t,i,a=/^ECDH-ES(?:\+(.+))?/g.exec(e||"")[1],o=r[e]=r[e]||{};a?(a=UF[a])?(o.encrypt=(i=a.encrypt,function(e,t,r){if(!(r=r||{}).epk||!r.epk.d)return Promise.reject(new Error("missing ephemeral private key"));var a=cB.convertToObj(r.epk,!1);if(!e||!e.x||!e.y)return Promise.reject(new Error("missing static public key"));var o=n(a,cB.convertToObj(e,!0),{algorithm:r.alg,apu:r.apu,apv:r.apv});return o=o.then(function(e){return i(e,t)})}),o.decrypt=(t=a.decrypt,function(e,r,i){if(!(i=i||{}).epk||!i.epk.x||!i.epk.y)return Promise.reject(new Error("missing ephemeral public key"));var a=cB.convertToObj(i.epk,!0);if(!e||!e.d)return Promise.reject(new Error("missing static private key"));var o=n(cB.convertToObj(e,!1),a,{algorithm:i.alg,apu:i.apu,apv:i.apv});return o=o.then(function(e){return t(e,r)})})):o.ecrypt=o.decrypt=null:(o.encrypt=function(e,t,r){if(!(r=r||{}).epk||!r.epk.d)return Promise.reject(new Error("missing ephemeral private key"));var i=cB.convertToObj(r.epk,!1);if(!e||!e.x||!e.y)return Promise.reject(new Error("missing static public key"));var a=n(i,cB.convertToObj(e,!0),{algorithm:r.enc,apu:r.apu,apv:r.apv});return a=a.then(function(e){return{data:e,once:!0,direct:!0}})},o.decrypt=function(e,t,r){if(!(r=r||{}).epk||!r.epk.x||!r.epk.y)return Promise.reject(new Error("missing ephemeral public key"));var i=cB.convertToObj(r.epk,!0);if(!e||!e.d)return Promise.reject(new Error("missing static private key"));var a=n(cB.convertToObj(e,!1),i,{algorithm:r.enc,apu:r.apu,apv:r.apv});return a=a.then(function(e){return e})})})});function hB(e){switch(e){case"SHA-256":return"P-256";case"SHA-384":return"P-384";case"SHA-512":return"P-521";default:throw new Error("unsupported hash: "+e)}}function vB(e){var t=hB(e);return Aj.setupFallback(null,function(r,n){if(t!==r.crv)return Promise.reject(new Error("invalid curve"));var i=cB.convertToJWK(r,!1),a={name:"ECDSA",namedCurve:i.crv,hash:{name:e}};return Aj.subtleCrypto.importKey("jwk",i,a,!0,["sign"]).then(function(e){return Aj.subtleCrypto.sign(a,e,n)}).then(function(e){return e=new ag(e),{data:n,mac:e}})},function(r,n){if(t!==r.crv)return Promise.reject(new Error("invalid curve"));var i=cB.convertToForge(r,!1);return Dj[e].digest(n).then(function(e){return e=i.sign(e),e=ag.concat([e.r,e.s]),{data:n,mac:e}})})}function mB(e){var t=hB(e);return Aj.setupFallback(null,function(r,n,i){if(t!==r.crv)return Promise.reject(new Error("invalid curve"));var a=cB.convertToJWK(r,!0),o={name:"ECDSA",namedCurve:a.crv,hash:{name:e}};return Aj.subtleCrypto.importKey("jwk",a,o,!0,["verify"]).then(function(e){return Aj.subtleCrypto.verify(o,e,i,n)}).then(function(e){return e?{data:n,mac:i,valid:!0}:Promise.reject(new Error("verification failed"))})},function(r,n,i){if(t!==r.crv)return Promise.reject(new Error("invalid curve"));var a=cB.convertToForge(r,!0);return Dj[e].digest(n).then(function(e){var t=i.length/2,r={r:i.slice(0,t),s:i.slice(t)};return a.verify(e,r)?{data:n,mac:i,valid:!0}:Promise.reject(new Error("verification failed"))})})}var gB={};["ES256","ES384","ES512"].forEach(function(e){var t=e.replace(/ES(\d+)/g,function(e,t){return"SHA-"+t});gB[e]={sign:vB(t),verify:mB(t)}});var yB=gB,EB=new ag([0]);function bB(e,t,r){var n=[new ag("PBES2-"+e+"+"+t,"utf8"),EB,r];return ag.concat(n)}function _B(e){function t(e){var t=(e=e||{}).length||0,r=wD.asBuffer(e.salt||new ag(0),"base64u4l"),n=e.iterations||0;if(0>=t)throw new Error("invalid key length");if(0>=n)throw new Error("invalid iteration count");return e.length=t,e.salt=r,e.iterations=n,e}return Aj.setupFallback(function(r,n){if(6>Aj.nodeCrypto.pbkdf2.length)throw new Error("unsupported algorithm: PBES2-"+hmac+"+"+kw);try{n=t(n)}catch(e){return Promise.reject(e)}var i=n.length,a=n.salt,o=n.iterations,s=e.replace("-","");return new Promise(function(e,t){Aj.nodeCrypto.pbkdf2(r,a,o,i,s,function(r,n){r?t(r):e(n)})})},function(r,n){try{n=t(n)}catch(e){return Promise.reject(e)}var i=n.length,a=n.salt,o=n.iterations,s=Promise.resolve(r);return s=(s=(s=s.then(function(e){return Aj.subtleCrypto.importKey("raw",e,"PBKDF2",!1,["deriveBits"])})).then(function(t){var r={name:"PBKDF2",salt:a,iterations:o,hash:e};return Aj.subtleCrypto.deriveBits(r,t,8*i)})).then(function(e){return wD.asBuffer(e)})},function(r,n){try{n=t(n)}catch(e){return Promise.reject(e)}var i=n.length,a=n.salt,o=n.iterations;return new Promise(function(t,n){var s=vD.md[e.replace("-","").toLowerCase()].create();vD.pkcs5.pbkdf2(r.toString("binary"),a.toString("binary"),o,i,s,function(e,r){e?n(e):(r=new ag(r,"binary"),t(r))})})})}function SB(e,t){var r=Cj.KEYLENGTH[t]/8;return Aj.setupFallback(function(n,i,a){if(6>Aj.nodeCrypto.pbkdf2.length)throw new Error("unsupported algorithm: PBES2-"+e+"+"+t);a=a||{};var o=wD.asBuffer(a.p2s||new ag(0),"base64url"),s=a.p2c||0;if(0>=s)throw new Error("invalid iteration count");if(8>o.length)throw new Error("salt too small");o=bB(e,t,o);var u=e.replace("HS","SHA");return new Promise(function(e,t){Aj.nodeCrypto.pbkdf2(n,o,s,r,u,function(r,n){r?t(r):e(n)})}).then(function(e){return UF[t].encrypt(e,i)})},function(n,i,a){a=a||{};var o=wD.asBuffer(a.p2s||new ag(0),"base64url"),s=a.p2c||0;if(0>=s)throw new Error("invalid iteration count");if(8>o.length)throw new Error("salt too small");o=bB(e,t,o);var u=e.replace("HS","SHA-");return Promise.resolve(n).then(function(e){return Aj.subtleCrypto.importKey("raw",e,"PBKDF2",!1,["deriveKey"])}).then(function(e){var t={name:"PBKDF2",salt:o,iterations:s,hash:u},n={name:"AES-KW",length:8*r};return Aj.subtleCrypto.deriveKey(t,e,n,!0,["wrapKey","unwrapKey"])}).then(function(e){return Promise.all([Aj.subtleCrypto.importKey("raw",i,{name:"HMAC",hash:"SHA-256"},!0,["sign"]),e])}).then(function(e){return Aj.subtleCrypto.wrapKey("raw",e[0],e[1],"AES-KW")}).then(function(e){return{data:e=new ag(e)}})},function(n,i,a){a=a||{};var o=wD.asBuffer(a.p2s||new ag(0),"base64url"),s=a.p2c||0;if(0>=s)throw new Error("invalid iteration count");if(8>o.length)throw new Error("salt too small");return o=bB(e,t,o),new Promise(function(t,i){var a=vD.md[e.replace("HS","SHA").toLowerCase()].create();vD.pkcs5.pbkdf2(n.toString("binary"),o.toString("binary"),s,r,a,function(e,r){e?i(e):(r=new ag(r,"binary"),t(r))})}).then(function(e){return UF[t].encrypt(e,i)})})}function TB(e,t){var r=Cj.KEYLENGTH[t]/8;return Aj.setupFallback(function(n,i,a){if(6>Aj.nodeCrypto.pbkdf2.length)throw new Error("unsupported algorithm: PBES2-"+e+"+"+t);a=a||{};var o=wD.asBuffer(a.p2s||new ag(0),"base64url"),s=a.p2c||0;if(0>=s)return Promise.reject(new Error("invalid iteration count"));if(8>o.length)return Promise.reject(new Error("salt too small"));o=bB(e,t,o);var u=e.replace("HS","SHA");return new Promise(function(e,t){Aj.nodeCrypto.pbkdf2(n,o,s,r,u,function(r,n){r?t(r):e(n)})}).then(function(e){return UF[t].decrypt(e,i)})},function(n,i,a){a=a||{};var o=wD.asBuffer(a.p2s||new ag(0),"base64url"),s=a.p2c||0;if(0>=s)return Promise.reject(new Error("invalid iteration count"));if(8>o.length)return Promise.reject(new Error("salt too small"));o=bB(e,t,o);var u=e.replace("HS","SHA-");return Promise.resolve(n).then(function(e){return Aj.subtleCrypto.importKey("raw",e,"PBKDF2",!1,["deriveKey"])}).then(function(e){var t={name:"PBKDF2",salt:o,iterations:s,hash:u},n={name:"AES-KW",length:8*r};return Aj.subtleCrypto.deriveKey(t,e,n,!0,["wrapKey","unwrapKey"])}).then(function(e){return Aj.subtleCrypto.unwrapKey("raw",i,e,"AES-KW",{name:"HMAC",hash:"SHA-256"},!0,["sign"])}).then(function(e){return Aj.subtleCrypto.exportKey("raw",e)}).then(function(e){return e=new ag(e)})},function(n,i,a){a=a||{};var o=wD.asBuffer(a.p2s||new ag(0),"base64url"),s=a.p2c||0;return 0>=s?Promise.reject(new Error("invalid iteration count")):8>o.length?Promise.reject(new Error("salt too small")):(o=bB(e,t,o),new Promise(function(t,i){var a=vD.md[e.replace("HS","SHA").toLowerCase()].create();vD.pkcs5.pbkdf2(n.toString("binary"),o.toString("binary"),s,r,a,function(e,r){e?i(e):(r=new ag(r,"binary"),t(r))})}).then(function(e){return UF[t].decrypt(e,i)}))})}var wB={};["PBKDF2-SHA-256","PBKDF2-SHA-384","PBKDF2-SHA-512"].forEach(function(e){var t=e.replace("PBKDF2-","");wB[e]={derive:_B(t)}}),["PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"].forEach(function(e){var t=/PBES2-(HS\d+)\+(A\d+KW)/g.exec(e),r=t[1],n=t[2];wB[e]={encrypt:SB(r,n),decrypt:TB(r,n)}});var IB=wB;function AB(e,t){var r=t?["n","e"]:["n","e","d","p","q","dp","dq","qi"];return r=r.map(function(t){return new vD.jsbn.BigInteger(e[t].toString("hex"),16)}),(t?vD.pki.rsa.setPublicKey:vD.pki.rsa.setPrivateKey).apply(vD.pki.rsa,r)}var CB={convertToForge:AB,convertToJWK:function(e,t){var r=PN(e);return(t?["n","e"]:["n","e","d","p","q","dp","dq","qi"]).forEach(function(e){r[e]=wD.base64url.encode(r[e])}),delete r.key_ops,delete r.use,delete r.alg,t&&(delete r.d,delete r.p,delete r.q,delete r.dp,delete r.dq,delete r.qi),r},convertToPem:function(e,t){return e.__cachedPem?e.__cachedPem:(r=t?vD.pki.publicKeyToPem(AB(e,t)):vD.pki.privateKeyToPem(AB(e,t)),Object.defineProperty(e,"__cachedPem",{value:r}),r);var r}};function xB(e){var t={name:e};"RSA-OAEP-256"===e?(t.name="RSA-OAEP",t.hash={name:"SHA-256"}):"RSA-OAEP"===e?t.hash={name:"SHA-1"}:t.name="RSAES-PKCS1-v1_5";var r;return r="RSAES-PKCS1-v1_5"!==t.name?function(e,r){return e=CB.convertToJWK(e,!0),Aj.subtleCrypto.importKey("jwk",e,t,!0,["encrypt"]).then(function(e){return Aj.subtleCrypto.encrypt(t,e,r)}).then(function(e){return{data:new ag(e)}})}:null,Aj.setupFallback(null,r,function(e,r){r=new Oj(r).bytes();var n=CB.convertToForge(e,!0),i={};"RSA-OAEP"===t.name&&(i.md=t.hash.name.toLowerCase().replace(/\-/g,""),i.md=vD.md[i.md].create());var a=n.encrypt(r,t.name.toUpperCase(),i);return a=new Oj(a).native(),Promise.resolve({data:a})})}function OB(e){var t={name:e};"RSA-OAEP-256"===e?(t.name="RSA-OAEP",t.hash={name:"SHA-256"}):"RSA-OAEP"===e?t.hash={name:"SHA-1"}:t.name="RSAES-PKCS1-v1_5";var r,n;return r="RSAES-PKCS1-v1_5"!==t.name?function(e,r){return e=CB.convertToJWK(e,!1),Aj.subtleCrypto.importKey("jwk",e,t,!0,["decrypt"]).then(function(e){return Aj.subtleCrypto.decrypt(t,e,r)}).then(function(e){return new ag(e)})}:null,Aj.nodeCrypto&&"RSA-OAEP"===e&&(n=function(e,t){return e=CB.convertToPem(e,!1),Aj.nodeCrypto.privateDecrypt(e,t)}),Aj.setupFallback(n,r,function(e,r){r=new Oj(r).bytes();var n=CB.convertToForge(e,!1),i={};"RSA-OAEP"===t.name&&(i.md=t.hash.name.toLowerCase().replace(/\-/g,""),i.md=vD.md[i.md].create());var a=n.decrypt(r,t.name.toUpperCase(),i);return a=new Oj(a).native(),Promise.resolve(a)})}var RB={};["RSA-OAEP","RSA-OAEP-256","RSA1_5"].forEach(function(e){RB[e]={encrypt:xB(e),decrypt:OB(e)}});var NB=RB;function kB(e){var t,r=e.replace("RS","SHA").toLowerCase(),n=e.replace("RS","SHA-"),i={name:"RSASSA-PKCS1-V1_5",hash:{name:n}};return Aj.nodeCrypto&&Aj.nodeCrypto.getHashes().indexOf(n)>-1&&(t=function(e,t){e=CB.convertToPem(e,!1);var r=Aj.nodeCrypto.createSign(n);return r.update(t),{data:t,mac:r.sign(CB.convertToPem(e,!1))}}),Aj.setupFallback(t,function(e,t){return e=CB.convertToJWK(e,!1),Aj.subtleCrypto.importKey("jwk",e,i,!0,["sign"]).then(function(e){return Aj.subtleCrypto.sign(i,e,t)}).then(function(e){var r=new ag(e);return{data:t,mac:r}})},function(e,t){var n=vD.md[r].create();n.start(),n.update(t);var i=CB.convertToForge(e,!1).sign(n,"RSASSA-PKCS1-V1_5");return i=new ag(i,"binary"),Promise.resolve({data:t,mac:i})})}function PB(e){var t,r=e.replace("RS","SHA").toLowerCase(),n={name:"RSASSA-PKCS1-V1_5",hash:{name:e.replace("RS","SHA-")}};return Aj.nodeCrypto&&Aj.nodeCrypto.getHashes().indexOf(r)>-1&&(t=function(e,t,n){var i=Aj.nodeCrypto.createVerify(r);return i.update(t),i.end(),i.verify(CB.convertToPem(e,!0),n)?{data:t,mac:n,valid:!0}:Promise.reject(new Error("verification failed"))}),Aj.setupFallback(t,function(e,t,r){return e=CB.convertToJWK(e,!0),Aj.subtleCrypto.importKey("jwk",e,n,!0,["verify"]).then(function(e){return Aj.subtleCrypto.verify(n,e,r,t)}).then(function(e){return e?{data:t,mac:r,valid:!0}:Promise.reject(new Error("verification failed"))})},function(e,t,n){var i=vD.md[r].create();i.start(),i.update(t),i=i.digest().bytes();var a=CB.convertToForge(e,!0),o=n.toString("binary");return a.verify(i,o,"RSASSA-PKCS1-V1_5")?Promise.resolve({data:t,mac:n,valid:!0}):Promise.reject(new Error("verification failed"))})}function MB(e){var t=e.replace("PS","SHA").toLowerCase(),r=e.replace("PS","SHA-");return function(e,n){var i=vD.md[t].create();i.start(),i.update(n);var a=vD.pss.create({md:vD.md[t].create(),mgf:vD.mgf.mgf1.create(vD.md[t].create()),saltLength:Cj.HASHLENGTH[r]/8}),o=CB.convertToForge(e,!1).sign(i,a);return o=new ag(o,"binary"),Promise.resolve({data:n,mac:o})}}function DB(e){var t=e.replace("PS","SHA").toLowerCase(),r=e.replace("PS","SHA-");return function(e,n,i){var a=vD.md[t].create();a.start(),a.update(n),a=a.digest().bytes();var o=vD.pss.create({md:vD.md[t].create(),mgf:vD.mgf.mgf1.create(vD.md[t].create()),saltLength:Cj.HASHLENGTH[r]/8}),s=CB.convertToForge(e,!0),u=i.toString("binary");return s.verify(a,u,o)?Promise.resolve({data:n,mac:i,valid:!0}):Promise.reject(new Error("verification failed"))}}var LB={};["PS256","PS384","PS512"].forEach(function(e){LB[e]={sign:MB(e),verify:DB(e)}}),["RS256","RS384","RS512"].forEach(function(e){LB[e]={sign:kB(e),verify:PB(e)}});var UB={},jB={},FB={},BB={},VB={},GB={};[$j,OF,UF,BF,VF,pB,yB,dB,Pj,IB,NB,LB,Dj].forEach(function(e){Object.keys(e).forEach(function(t){var r=e[t];"function"==typeof r.encrypt&&(VB[t]=r.encrypt),"function"==typeof r.decrypt&&(GB[t]=r.decrypt),"function"==typeof r.sign&&(FB[t]=r.sign),"function"==typeof r.verify&&(BB[t]=r.verify),"function"==typeof r.digest&&(UB[t]=r.digest),"function"==typeof r.derive&&(jB[t]=r.derive)})});var qB={digest:function(e,t,r){var n=UB[e];return n?n(t,r):Promise.reject(new Error("unsupported algorithm: "+e))},derive:function(e,t,r){var n=jB[e];return n?n(t,r):Promise.reject(new Error("unsupported algorithm: "+e))},sign:function(e,t,r,n){var i=FB[e];return i?i(t,r,n||{}):Promise.reject(new Error("unsupported algorithm: "+e))},verify:function(e,t,r,n,i){var a=BB[e];return a?a(t,r,n,i||{}):Promise.reject(new Error("unsupported algorithm: "+e))},encrypt:function(e,t,r,n){var i=VB[e];return i?i(t,r,n||{}):Promise.reject(new Error("unsupported algorithm: "+e))},decrypt:function(e,t,r,n){var i=GB[e];return i?i(t,r,n||{}):Promise.reject(new Error("unsupported algorithm: "+e))}},KB={MODE_SIGN:"sign",MODE_VERIFY:"verify",MODE_ENCRYPT:"encrypt",MODE_DECRYPT:"decrypt",MODE_WRAP:"wrap",MODE_UNWRAP:"unwrap"},HB={name:"PrivateKeyInfo",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1,capture:"keyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.OID,constructed:!1,capture:"keyOid"},{name:"AlgorithmIdentifier.parameters",captureAsn1:"keyParams"}]},{name:"PrivateKeyInfo",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.OCTETSTRING,constructed:!1,capture:"keyValue"}]},zB={name:"SubjectPublicKeyInfo",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.OID,constructed:!1,capture:"keyOid"},{name:"AlgorithmIdentifier.parameters",captureAsn1:"keyParams"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.BITSTRING,constructed:!1,capture:"keyValue"}]},WB={name:"Certificate",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:vD.asn1.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:vD.asn1.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},zB,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:vD.asn1.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.BITSTRING,constructed:!1,capture:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:vD.asn1.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.BITSTRING,constructed:!1,capture:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:vD.asn1.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:vD.asn1.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.BITSTRING,constructed:!1,capture:"certSignature"}]},YB={THUMBPRINT_KEY:"internal\0thumbprint",THUMBPRINT_HASH:"SHA-256"},XB={validators:{privateKey:HB,publicKey:zB,certificate:WB},thumbprint:function(e,t,r){if("function"!=typeof e.thumbprint)return Promise.reject(new Error("thumbprint not supported"));r=(r||YB.THUMBPRINT_HASH).toUpperCase();var n=e.thumbprint(t),i=Object.keys(n).sort().map(function(e){var t=n[e];return Vg(t)&&(t=wD.base64url.encode(t)),JSON.stringify(e)+":"+JSON.stringify(t)});i="{"+i.join(",")+"}";try{return qB.digest(r,new ag(i,"utf8"))}catch(e){return Promise.reject(e)}},unpackProps:function(e,t){var r;t.forEach(function(t){if(t.name in e){r=r||{};var n=e[t.name];switch(t.type){case"binary":Vg(n)?(n=n,e[t.name]=wD.base64url.encode(n)):n=wD.base64url.decode(n);break;case"string":case"number":case"boolean":n=n;break;case"array":n=[].concat(n);break;case"object":n=PN(n);break;default:n=n}r[t.name]=n}});var n=r||{};return Object.keys(e).forEach(function(t){t in n||delete e[t]}),r},COMMON_PROPS:[{name:"kty",type:"string"},{name:"kid",type:"string"},{name:"use",type:"string"},{name:"alg",type:"string"},{name:"x5c",type:"array"},{name:"x5t",type:"binary"},{name:"x5u",type:"string"},{name:"key_ops",type:"array"}],INTERNALS:YB},$B=function(e,t,r,n){if(!e)throw new Error("kty cannot be null");if(!t)throw new Error("keystore cannot be null");if(!r)throw new Error("props cannot be null");if("string"==typeof r&&(r=JSON.parse(r)),!n)throw new Error("cfg cannot be null");var i,a,o=[],s={},u={};r=PN(r),i=HD({},r[XB.INTERNALS.THUMBPRINT_KEY]||{}),delete r[XB.INTERNALS.THUMBPRINT_KEY],Object.keys(i).forEach(function(e){var t=i[e];a||Vg(a=t)&&(a=wD.base64url.encode(a)),Vg(t)||(t=wD.base64url.decode(t),i[e]=t)}),r.kty=e,r.kid=r.kid||a||AR();var c,l=Object.keys(XB.COMMON_PROPS).map(function(e){return XB.COMMON_PROPS[e].name});u.base=Ij(r,l),o=o.concat(Object.keys(u.base)),u.public=PN(r),s.public=n.publicKey(u.public),s.public&&(o=o.concat(Object.keys(u.public))),u.private=PN(r),s.private=n.privateKey(u.private),s.private&&(o=o.concat(Object.keys(u.private))),u.extra=nj(r,o),c=s.public&&"length"in s.public?s.public.length:s.private&&"length"in s.private?s.private.length:NaN,Object.defineProperty(this,"keystore",{value:t,enumerable:!0}),Object.defineProperty(this,"length",{value:c,enumerable:!0}),Object.defineProperty(this,"kty",{value:e,enumerable:!0}),Object.defineProperty(this,"kid",{value:u.base.kid,enumerable:!0}),Object.defineProperty(this,"use",{value:u.base.use||"",enumerable:!0}),Object.defineProperty(this,"alg",{value:u.base.alg||"",enumerable:!0}),Object.defineProperty(this,"thumbprint",{value:function(e){if(e=(e||XB.INTERNALS.THUMBPRINT_HASH).toUpperCase(),i[e])return Promise.resolve(i[e]);var t=XB.thumbprint(n,u,e);return t=t.then(function(t){return t&&(i[e]=t),t})}}),Object.defineProperty(this,"algorithms",{value:function(t){var r=[];this.use&&"sig"!==this.use||(t&&KB.MODE_SIGN!==t||r.push(KB.MODE_SIGN),t&&KB.MODE_VERIFY!==t||r.push(KB.MODE_VERIFY)),this.use&&"enc"!==this.use||(t&&KB.MODE_ENCRYPT!==t||r.push(KB.MODE_ENCRYPT),t&&KB.MODE_DECRYPT!==t||r.push(KB.MODE_DECRYPT),t&&KB.MODE_WRAP!==t||r.push(KB.MODE_WRAP),t&&KB.MODE_UNWRAP!==t||r.push(KB.MODE_UNWRAP));var i,a=this,o=r.map(function(e){return n.algorithms.call(a,s,e)});return o=uL(o),o=PP(o),this.alg&&(i="oct"===e?[this.alg,"dir"]:[this.alg],o=YL(o,i)),o}}),Object.defineProperty(this,"supports",{value:function(e,t){return-1!==this.algorithms(t).indexOf(e)}}),Object.defineProperty(this,"has",{value:function(e,t){var r=!1;return r=(r=(r=(r=r||!!(u.base&&e in u.base))||!!(s.public&&e in s.public))||!!(u.extra&&e in u.extra))||!!(t&&s.private&&e in s.private)}}),Object.defineProperty(this,"get",{value:function(e,t){var r;return u.base&&e in u.base?r=u.base:s.public&&e in s.public?r=s.public:u.extra&&e in u.extra?r=u.extra:t&&s.private&&e in s.private&&(r=s.private),r&&r[e]||null}}),Object.defineProperty(this,"toJSON",{value:function(e,t){Array.isArray(e)&&(t=e,e=!1);var r={};return r=$k(r,u.base,u.public,"boolean"==typeof e&&e?u.private:{},u.extra),r=nj(r,t||[])}}),Object.defineProperty(this,"toPEM",{value:function(e){if(null===e&&(e=!1),!n.convertToPEM)throw new Error("Unsupported key type for PEM encoding");var t=e?s.private:s.public;if(!t)throw new Error("Invalid key");return n.convertToPEM.call(this,t,e)}}),Object.defineProperty(this,"toObject",{value:function(e,t){Array.isArray(e)&&(t=e,e=!1);var r={};return r=$k(r,u.base,s.public,"boolean"==typeof e&&e?s.private:{},u.extra),r=nj(r,(t||[]).concat("length"))}}),Object.defineProperty(this,"sign",{value:function(e,t,r){if(-1===this.algorithms("sign").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=n.signKey.call(this,e,s);return i?(r=r?PN(r):{},n.signProps&&(r=$k(r,n.signProps.call(this,e,r))),qB.sign(e,i,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"verify",{value:function(e,t,r,i){if(-1===this.algorithms("verify").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var a=n.verifyKey.call(this,e,s);return a?(i=i?PN(i):{},n.verifyProps&&(i=$k(i,n.verifyProps.call(this,e,i))),qB.verify(e,a,t,r,i)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"encrypt",{value:function(e,t,r){if(-1===this.algorithms("encrypt").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=n.encryptKey.call(this,e,s);return i?(r=r?PN(r):{},n.encryptProps&&(r=$k(r,n.encryptProps.call(this,e,r))),qB.encrypt(e,i,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"decrypt",{value:function(e,t,r){if(-1===this.algorithms("decrypt").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=n.decryptKey.call(this,e,s);return i?(r=r?PN(r):{},n.decryptProps&&(r=$k(r,n.decryptProps.call(this,e,r))),qB.decrypt(e,i,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"wrap",{value:function(e,t,r){if(-1===this.algorithms("wrap").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=n.wrapKey.call(this,e,s);return i?(r=r?PN(r):{},n.wrapProps&&(r=$k(r,n.wrapProps.call(this,e,r))),qB.encrypt(e,i,t,r)):Promise.reject(new Error("improper key"))}}),Object.defineProperty(this,"unwrap",{value:function(e,t,r){if(-1===this.algorithms("unwrap").indexOf(e))return Promise.reject(new Error("unsupported algorithm"));var i=n.unwrapKey.call(this,e,s);return i?(r=r?PN(r):{},n.unwrapProps&&(r=$k(r,n.unwrapProps.call(this,e,r))),qB.decrypt(e,i,t,r)):Promise.reject(new Error("improper key"))}})},QB={BaseKey:$B,helpers:XB},JB=function(){var e={};Object.defineProperty(this,"register",{value:function(t){if(!t||"string"!=typeof t.kty||!t.kty)throw new Error("invalid Key factory");var r=t.kty;return e[r]=t,this}}),Object.defineProperty(this,"unregister",{value:function(t){if(!t||"string"!=typeof t.kty||!t.kty)throw new Error("invalid Key factory");var r=t.kty;return t===e[r]&&delete e[r],this}}),Object.defineProperty(this,"get",{value:function(t){return e[t||""]||void 0}}),Object.defineProperty(this,"all",{value:function(){return Object.keys(e).map(function(t){return e[t]})}})},ZB=new JB;function eV(e,t){var r,n={},i=[],a=t.form,o=t.body,s=null;switch(t=vD.asn1.fromDer(o),a){case"private":e.all().some(function(e){if(r)return!1;if(!e.validators)return!1;var a=e.validators.oid,o=e.validators.privateKey;return!!o&&(n={},i=[],(r=vD.asn1.validate(t,o,n,i))&&(n.keyOid=vD.asn1.oidToDer(a),n.parsed=!0),r)}),n.type="private";break;case"pkcs8":r=vD.asn1.validate(t,QB.helpers.validators.privateKey,n,i),n.type="private";break;case"public":case"spki":r=vD.asn1.validate(t,QB.helpers.validators.publicKey,n,i),n.type="public";break;case"pkix":case"x509":if(r=vD.asn1.validate(t,QB.helpers.validators.certificate,n,i)){n=function(e){return["certIssuer","certSubject"].forEach(function(t){var r=vD.pki.RDNAttributesAsArray(e[t]),n=e[t]={};r.forEach(function(e){n[e.name||e.type]=e.value})}),e}(n);var u=vD.md.sha1.create();u.update(o),s=wD.base64url.encode(new ag(u.digest().toHex(),"hex"))}n.type="public"}return r?(n.keyOid&&(n.keyOid=vD.asn1.derToOid(n.keyOid)),r=null,ZB.all().forEach(function(e){r||e&&"function"==typeof e.import&&(r=e.import(n))}),r&&n.certSubject&&n.certSubject.commonName&&(r.kid=n.certSubject.commonName),r&&s&&(r.x5t=s),r):null}var tV=function(e,t){var r={};Object.defineProperty(this,"generate",{value:function(t,r,n){var i=e.get(t);if(!i)return Promise.reject(new Error("unsupported key type"));(n=PN(n||{})).kty=t;var a=this;return i.generate(r).then(function(e){return e=$k(n,e,{kty:t}),a.add(e)})}}),Object.defineProperty(this,"add",{value:function(t,n,i){var a;if(i=i||{},Vg(t)||"string"==typeof t)if("json"===(n=(n||"json").toLowerCase()))t=JSON.parse(t.toString("utf8"));else try{if(a="pem"===n?function(e){var t={};if(!vD.pem.decode(e).some(function(e){switch(e.type){case"CERTIFICATE":t.form="pkix";break;case"PUBLIC KEY":t.form="spki";break;case"PRIVATE KEY":t.form="pkcs8";break;case"EC PRIVATE KEY":case"RSA PRIVATE KEY":t.form="private";break;default:return!1}return t.body=e.body,!0}))throw new Error("supported PEM type not found");return t}(t):{body:t.toString("binary"),form:n},!(t=eV(e,a)))throw new Error("no importer for key");Object.keys(i).forEach(function(e){t[e]=i[e]})}catch(e){return Promise.reject(e)}else t=tV.isKey(t)?t.toJSON(!0):PN(t);var o=e.get(t.kty);if(!o)return Promise.reject(new Error("unsupported key type"));var s=this;return o.prepare(t).then(function(e){return new QB.BaseKey(t.kty,s,t,e)}).then(function(e){var t=e.kid||"";return(r[t]=r[t]||[]).push(e),e})}}),Object.defineProperty(this,"remove",{value:function(e){if(e){var t=r[e.kid];if(t){var n=t.indexOf(e);-1!==n&&(t.splice(n,1),t.length||delete r[e.kid])}}}}),Object.defineProperty(this,"all",{value:function(e,n){void 0!==(e=e||{}).kid&&null!==e.kid&&"string"!=typeof e.kid&&(e.kid=String(e.kid));var i=[],a=function(t){return(!e.kty||!t.kty||e.kty===t.kty)&&((!e.use||!t.use||e.use===t.use)&&(!e.alg||("dir"===e.alg||!t.alg||e.alg===t.alg)&&t.supports(e.alg)))};return Object.keys(r).forEach(function(t){if(!e.kid||e.kid===t){var n=r[t].filter(a);n.length&&(i=i.concat(n))}}),!n&&t&&(i=i.concat(t.all(e))),i}}),Object.defineProperty(this,"get",{value:function(e,r,n){"boolean"==typeof e?(n=e,r=e=null):"object"==typeof e&&(n=r,r=e,e=null),r=r||{},e&&(r.kid=e),void 0!==r.kid&&null!==r.kid&&"string"!=typeof r.kid&&(r.kid=String(r.kid));var i=this.all(r,!0);return i.length||!t||n||(i=t.get(r,n)),i[0]||null}}),Object.defineProperty(this,"temp",{value:function(){return new tV(e,this)}}),Object.defineProperty(this,"toJSON",{value:function(e){var t=[];return Object.keys(r).forEach(function(n){var i=r[n].map(function(t){return t.toJSON(e)});t=t.concat(i)}),{keys:t}}})};tV.isKeyStore=function(e){return!!e&&("object"==typeof e&&("function"==typeof e.get&&"function"==typeof e.all&&"function"==typeof e.generate&&"function"==typeof e.add&&"function"==typeof e.remove))},tV.createKeyStore=function(){return new tV(ZB)},tV.asKeyStore=function(e){if(tV.isKeyStore(e))return Promise.resolve(e);var t,r=tV.createKeyStore();if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e))t=e;else{if(!("keys"in e))return Promise.reject(new Error("invalid keystore"));t=e.keys}t=t.map(function(e){return r.add(e)});var n=Promise.all(t);return n=n.then(function(){return r})},tV.isKey=function(e){return!!e&&("object"==typeof e&&(!!tV.isKeyStore(e.keystore)&&("string"==typeof e.kty&&"number"==typeof e.length&&"function"==typeof e.algorithms&&"function"==typeof e.supports&&"function"==typeof e.encrypt&&"function"==typeof e.decrypt&&"function"==typeof e.wrap&&"function"==typeof e.unwrap&&"function"==typeof e.sign&&"function"==typeof e.verify)))},tV.asKey=function(e,t,r){return tV.isKey(e)?Promise.resolve(e):e=tV.createKeyStore().add(e,t,r)};var rV={KeyRegistry:JB,KeyStore:tV,registry:ZB},nV={BaseKey:$B,helpers:XB},iV=["HS256","HS384","HS512"],aV=["A128GCM","A192GCM","A256GCM","A128CBC-HS256","A192CBC-HS384","A256CBC-HS512","A128CBC+HS256","A192CBC+HS384","A256CBC+HS512"],oV=["A128KW","A192KW","A256KW","A128GCMKW","A192GCMKW","A256GCMKW","PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW","dir"];function sV(e,t){return"iv"in t&&(t.iv=Vg(t.iv)?t.iv:wD.base64url.decode(t.iv||"")),"adata"in t&&(t.adata=Vg(t.adata)?t.adata:new ag(t.adata||"","utf8")),"mac"in t&&(t.mac=Vg(t.mac)?t.mac:wD.base64url.decode(t.mac||"")),"tag"in t&&(t.tag=Vg(t.tag)?t.tag:wD.base64url.decode(t.tag||"")),t}function uV(e,t){return"iv"in t&&(t.iv=Vg(t.iv)?t.iv:wD.base64url.decode(t.iv||"")),"adata"in t&&(t.adata=Vg(t.adata)?t.adata:new ag(t.adata||"","utf8")),t}var cV={publicKey:function(e){var t=nV.helpers.COMMON_PROPS.concat([]);return nV.helpers.unpackProps(e,t)},privateKey:function(e){var t,r=nV.helpers.COMMON_PROPS.concat([{name:"k",type:"binary"}]);return(t=nV.helpers.unpackProps(e,r))&&t.k?t.length=8*t.k.length:t=void 0,t},thumbprint:function(e){return e.private&&(e=e.private),{k:e.k||"",kty:"oct"}},algorithms:function(e,t){var r=e.private&&8*e.private.k.length,n=[256,384,512];if(!r)return[];switch(t){case"encrypt":case"decrypt":return aV.filter(function(e){return e==="A"+r/2+"CBC-HS"+r||e==="A"+r/2+"CBC+HS"+r||e==="A"+r+"GCM"});case"sign":case"verify":return iV.filter(function(e){var t=!1;return n.forEach(function(n){n>r||(t|=e==="HS"+n)}),t});case"wrap":case"unwrap":return oV.filter(function(e){return e==="A"+r+"KW"||e==="A"+r+"GCMKW"||0===e.indexOf("PBES2-")||"dir"===e})}return[]},encryptKey:function(e,t){return t.private&&t.private.k},encryptProps:uV,decryptKey:function(e,t){return t.private&&t.private.k},decryptProps:sV,wrapKey:function(e,t){return t.private&&t.private.k},wrapProps:uV,unwrapKey:function(e,t){return t.private&&t.private.k},unwrapProps:sV,signKey:function(e,t){return t.private&&t.private.k},verifyKey:function(e,t){return t.private&&t.private.k}},lV={kty:"oct",prepare:function(e){var t=cV,r=Promise.resolve(e);return r=(r=r.then(function(e){return nV.helpers.thumbprint(t,e)})).then(function(r){var n={};return n[nV.helpers.INTERNALS.THUMBPRINT_HASH]=r,e[nV.helpers.INTERNALS.THUMBPRINT_KEY]=n,t})},generate:function(e){var t=wD.randomBytes(e/8);return Promise.resolve({k:t})}};Object.freeze({config:cV,factory:lV});rV.registry.register(lV);var fV=Aj.nodeCrypto,dV={BaseKey:$B,helpers:XB},pV=["RS256","RS384","RS512","PS256","PS384","PS512"],hV=["RSA-OAEP","RSA-OAEP-256","RSA1_5"],vV={publicKey:function(e){var t,r=dV.helpers.COMMON_PROPS.concat([{name:"n",type:"binary"},{name:"e",type:"binary"}]);return(t=dV.helpers.unpackProps(e,r))&&t.n&&t.e?t.length=8*t.n.length:(delete t.e,delete t.n),t},privateKey:function(e){var t,r=dV.helpers.COMMON_PROPS.concat([{name:"n",type:"binary"},{name:"e",type:"binary"},{name:"d",type:"binary"},{name:"p",type:"binary"},{name:"q",type:"binary"},{name:"dp",type:"binary"},{name:"dq",type:"binary"},{name:"qi",type:"binary"}]);return(t=dV.helpers.unpackProps(e,r))&&t.d&&t.n&&t.e&&t.p&&t.q&&t.dp&&t.dq&&t.qi?t.length=8*t.d.length:t=void 0,t},thumbprint:function(e){return e.public&&(e=e.public),{e:e.e,kty:"RSA",n:e.n}},algorithms:function(e,t){switch(t){case"encrypt":case"decrypt":return[];case"wrap":return e.public&&hV.slice()||[];case"unwrap":return e.private&&hV.slice()||[];case"sign":return e.private&&pV.slice()||[];case"verify":return e.public&&pV.slice()||[]}return[]},wrapKey:function(e,t){return t.public},unwrapKey:function(e,t){return t.private},signKey:function(e,t){return t.private},verifyKey:function(e,t){return t.public},convertToPEM:function(e,t){var r=CB.convertToForge(e,!t);return t?vD.pki.privateKeyToPem(r):vD.pki.publicKeyToPem(r)}};var mV={oid:"1.2.840.113549.1.1.1",privateKey:{name:"RSAPrivateKey",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1,capture:"version"},{name:"RSAPrivateKey.modulus",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1,capture:"n"},{name:"RSAPrivateKey.publicExponent",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1,capture:"e"},{name:"RSAPrivateKey.privateExponent",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1,capture:"d"},{name:"RSAPrivateKey.prime1",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1,capture:"p"},{name:"RSAPrivateKey.prime2",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1,capture:"q"},{name:"RSAPrivateKey.exponent1",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1,capture:"dp"},{name:"RSAPrivateKey.exponent2",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1,capture:"dq"},{name:"RSAPrivateKey.coefficient",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1,capture:"qi"}]},publicKey:{name:"RSAPublicKey",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1,capture:"n"},{name:"RSAPublicKey.exponent",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1,capture:"e"}]}},gV={kty:"RSA",validators:mV,prepare:function(e){var t=vV,r=Promise.resolve(e);return r=(r=r.then(function(e){return dV.helpers.thumbprint(t,e)})).then(function(r){var n={};return n[dV.helpers.INTERNALS.THUMBPRINT_HASH]=r,e[dV.helpers.INTERNALS.THUMBPRINT_KEY]=n,t})},generate:function(e){var t;if(fV)t=new Promise(function(t,r){vD.pki.rsa.generateKeyPair({bits:e,e:65537},function(e,n){if(e)return r(e);t(n.privateKey)})});else{var r=vD.pki.rsa.generateKeyPair({bits:e,e:65537});t=Promise.resolve(r.privateKey)}return t.then(function(e){var t={};return["e","n","d","p","q",{incoming:"dP",outgoing:"dp"},{incoming:"dQ",outgoing:"dq"},{incoming:"qInv",outgoing:"qi"}].forEach(function(r){var n,i,a;"string"==typeof r?n=i=r:(n=r.incoming,i=r.outgoing),n in e&&(t[i]=((a=(a=e[n]).toString(16)).length%2&&(a="0"+a),new ag(a,"hex")))}),t})},import:function(e){if(mV.oid!==e.keyOid)return null;if(!e.parsed){"string"==typeof e.keyValue?e.keyValue=vD.asn1.fromDer(e.keyValue):Array.isArray(e.keyValue)&&(e.keyValue=e.keyValue[0]);var t="private"===e.type?mV.privateKey:mV.publicKey,r={};if(!vD.asn1.validate(e.keyValue,t,r,[]))return null;e=r}var n={kty:"RSA"};return["n","e","d","p","q","dp","dq","qi"].forEach(function(t){if(t in e){var r=new ag(e[t],"binary");0===r[0]&&(r=r.slice(1)),n[t]=r}}),n}};Object.freeze({config:vV,factory:gV});rV.registry.register(gV);var yV={BaseKey:$B,helpers:XB},EV=["ES256","ES384","ES512"],bV=["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"];function _V(e){switch(e){case"1.2.840.10045.3.1.7":return"P-256";case"1.3.132.0.34":return"P-384";case"1.3.132.0.35":return"P-521";default:return null}}var SV={publicKey:function(e){var t=yV.helpers.COMMON_PROPS.concat([{name:"crv",type:"string"},{name:"x",type:"binary"},{name:"y",type:"binary"}]),r=yV.helpers.unpackProps(e,t);return r&&r.crv&&r.x&&r.y?r.length=cB.curveSize(r.crv):(delete r.crv,delete r.x,delete r.y),r},privateKey:function(e){var t=yV.helpers.COMMON_PROPS.concat([{name:"crv",type:"string"},{name:"x",type:"binary"},{name:"y",type:"binary"},{name:"d",type:"binary"}]),r=yV.helpers.unpackProps(e,t);return r&&r.crv&&r.x&&r.y&&r.d?r.length=cB.curveSize(r.crv):r=void 0,r},thumbprint:function(e){return e.public&&(e=e.public),{crv:e.crv,kty:"EC",x:e.x,y:e.y}},algorithms:function(e,t){var r=e.public&&e.public.length||e.private&&e.private.length||0;switch(521===r&&(r=512),t){case"encrypt":case"decrypt":return[];case"wrap":return e.public&&bV||[];case"unwrap":return e.private&&bV||[];case"sign":return e.private?EV.filter(function(e){return e==="ES"+r}):[];case"verify":return e.public?EV.filter(function(e){return e==="ES"+r}):[]}},encryptKey:function(e,t){return t.public},decryptKey:function(e,t){return t.private},wrapKey:function(e,t){return t.public},unwrapKey:function(e,t){return t.private},signKey:function(e,t){return t.private},verifyKey:function(e,t){return t.public},convertToPEM:function(e,t){var r,n,i,a=e.crv;return a=function(e){switch(e){case"P-256":return"1.2.840.10045.3.1.7";case"P-384":return"1.3.132.0.34";case"P-521":return"1.3.132.0.35";default:return null}}(a),a=vD.asn1.oidToDer(a),t?(r="EC PRIVATE KEY",n=ag.concat([new ag([0,4]),e.x,e.y]).toString("binary"),e=e.d.toString("binary"),i=vD.asn1.create(vD.asn1.Class.UNIVERSAL,vD.asn1.Type.SEQUENCE,!0,[vD.asn1.create(vD.asn1.Class.UNIVERSAL,vD.asn1.Type.INTEGER,!1,""),vD.asn1.create(vD.asn1.Class.UNIVERSAL,vD.asn1.Type.OCTETSTRING,!1,e),vD.asn1.create(vD.asn1.Class.CONTEXT_SPECIFIC,0,!0,[vD.asn1.create(vD.asn1.Class.UNIVERSAL,vD.asn1.Type.OID,!1,a.bytes())]),vD.asn1.create(vD.asn1.Class.CONTEXT_SPECIFIC,1,!0,[vD.asn1.create(vD.asn1.Class.UNIVERSAL,vD.asn1.Type.BITSTRING,!1,n)])])):(r="PUBLIC KEY",e=ag.concat([new ag([0,4]),e.x,e.y]).toString("binary"),i=vD.asn1.create(vD.asn1.Class.UNIVERSAL,vD.asn1.Type.SEQUENCE,!0,[vD.asn1.create(vD.asn1.Class.UNIVERSAL,vD.asn1.Type.SEQUENCE,!0,[vD.asn1.create(vD.asn1.Class.UNIVERSAL,vD.asn1.Type.OID,!1,vD.asn1.oidToDer("1.2.840.10045.2.1").bytes()),vD.asn1.create(vD.asn1.Class.UNIVERSAL,vD.asn1.Type.OID,!1,a.bytes())]),vD.asn1.create(vD.asn1.Class.UNIVERSAL,vD.asn1.Type.BITSTRING,!1,e)])),i=vD.asn1.toDer(i).bytes(),vD.pem.encode({type:r,body:i})}},TV={oid:"1.2.840.10045.2.1",privateKey:{name:"ECPrivateKey",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"ECPrivateKey.version",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1},{name:"ECPrivateKey.private",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.OCTETSTRING,constructed:!1,capture:"d"},{tagClass:vD.asn1.Class.CONTEXT_SPECIFIC,name:"ECPrivateKey.parameters",constructed:!0,value:[{name:"ECPrivateKey.namedCurve",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.OID,constructed:!1,capture:"crv"}]},{name:"ECPrivateKey.publicKey",tagClass:vD.asn1.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"ECPrivateKey.point",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.BITSTRING,constructed:!1,capture:"point"}]}]},embeddedPrivateKey:{name:"ECPrivateKey",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.SEQUENCE,constructed:!0,value:[{name:"ECPrivateKey.version",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.INTEGER,constructed:!1},{name:"ECPrivateKey.private",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.OCTETSTRING,constructed:!1,capture:"d"},{name:"ECPrivateKey.publicKey",tagClass:vD.asn1.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"ECPrivateKey.point",tagClass:vD.asn1.Class.UNIVERSAL,type:vD.asn1.Type.BITSTRING,constructed:!1,capture:"point"}]}]}},wV={kty:"EC",validators:TV,prepare:function(e){var t=SV,r=Promise.resolve(e);return r=(r=r.then(function(e){return yV.helpers.thumbprint(t,e)})).then(function(r){var n={};return n[yV.helpers.INTERNALS.THUMBPRINT_HASH]=r,e[yV.helpers.INTERNALS.THUMBPRINT_KEY]=n,t})},generate:function(e){var t=aB.generateKeyPair(e),r={crv:e,x:t.public.x,y:t.public.y,d:t.private.d};return Promise.resolve(r)},import:function(e){if(TV.oid!==e.keyOid)return null;var t;if(e.keyParams&&vD.asn1.Type.OID===e.keyParams.type?t=_V(t=vD.asn1.derToOid(e.keyParams.value)):e.crv&&(t=_V(t=vD.asn1.derToOid(e.crv))),!t)return null;if(!e.parsed){var r={};if("private"===e.type){if("string"==typeof e.keyValue?e.keyValue=vD.asn1.fromDer(e.keyValue):Array.isArray(e.keyValue)&&(e.keyValue=e.keyValue[0]),!vD.asn1.validate(e.keyValue,TV.embeddedPrivateKey,r,[]))return null}else r.point=e.keyValue;e=r}var n={kty:"EC",crv:t};if(e.d&&(n.d=new ag(e.d,"binary")),e.point){var i=new ag(e.point,"binary");if(4!==i.readUInt16BE(0))return null;var a=(i=i.slice(2)).length/2;n.x=i.slice(0,a),n.y=i.slice(a)}return n}};Object.freeze({config:SV,factory:wV});rV.registry.register(wV);var IV=n(function(e,t){Object.keys(rV.KeyStore).forEach(function(e){t[e]=rV.KeyStore[e]}),Object.keys(KB).forEach(function(e){t[e]=KB[e]})}),AV={compact:!1,protect:"*"},CV=function(e,t){return Array.prototype.slice.call(e,t||0)},xV=function(e,t){var r=!1,n=e.format||"general",i=new ag(0);Object.defineProperty(this,"compact",{get:function(){return"compact"===n},enumerable:!0}),Object.defineProperty(this,"format",{get:function(){return n},enumerable:!0}),Object.defineProperty(this,"update",{value:function(e,t){if(r)throw new Error("already final");return null!=e&&(e=wD.asBuffer(e,t),i=i.length?ag.concat([i,e],i.length+e.length):e),this}}),Object.defineProperty(this,"final",{value:function(e,a){if(r)return Promise.reject(new Error("already final"));var o;switch(this.update(e,a),r=!0,o=(o=(o=Promise.all(t)).then(function(e){return i=wD.base64url.encode(i),e=e.map(function(e){var t={},r=0,n=PN(e.header),a=Object.keys(n).length;e.protected.forEach(function(e){e in n&&(t[e]=n[e],r++,delete n[e],a--)}),r>0?(t=JSON.stringify(t),t=wD.base64url.encode(t)):t="";var o=new ag(t+"."+i,"ascii");return e=(e=e.key.sign(e.header.alg,o,e.header)).then(function(e){var i={};return 0<r&&(i.protected=t),0<a&&(i.header=n),i.signature=wD.base64url.encode(e.mac),i})}),e=[Promise.resolve(i)].concat(e),Promise.all(e)})).then(function(e){return{payload:e[0],signatures:e.slice(1)}}),n){case"compact":o=o.then(function(e){var t=[e.signatures[0].protected,e.payload,e.signatures[0].signature];return t=t.join(".")});break;case"flattened":o=o.then(function(e){var t={};t.payload=e.payload;var r=e.signatures[0];return r.protected&&(t.protected=r.protected),r.header&&(t.header=r.header),t.signature=r.signature,t})}return o}})};function OV(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var RV=function(e){e?"string"==typeof e&&(e=e.split(" ")):e=[];var t,r=[],n=[],i=[],a=[],o=/^(\!)?([^*]*)\*([^*]*)$/;e.forEach(function(e){if(e){o.lastIndex=0;var s=o.exec(e);s&&(t="("+function(e,t){var r=[];return r.push("^"),e&&(e=OV(e),r.push(e)),t?(r.push(".*?"),t=OV(t),r.push(t)):e||r.push(".*"),r.push("$"),r.join("")}(s[2],s[3])+")",s[1]?(a.push(t),n.push(s[0])):(i.push(t),r.push(s[0])))}}),i=i.length?new RegExp(i.join("|")):null,a=a.length?new RegExp(a.join("|")):null,r.length||(r=["*"]),Object.defineProperty(this,"spec",{value:r.join(" ")+" "+n.join(" "),enumerable:!0}),Object.defineProperty(this,"match",{value:function(e){var t=Boolean(e);return t&&i&&(i.lastIndex=0,t=i.test(e)),t&&a&&(a.lastIndex=0,t=!a.test(e)),t}})},NV={algorithms:"*",allowEmbeddedKey:!1},kV=function(e,t){var r,n;n=IV.isKey(e)?(r=e).keystore:IV.isKeyStore(e)?e:IV.createKeyStore(),t=$k(NV,t),Object.defineProperty(this,"defaultKey",{value:r||void 0,enumerable:!0}),Object.defineProperty(this,"keystore",{value:n,enumerable:!0}),Object.defineProperty(this,"verify",{value:function(e,i){var a=(i=$k({},t,i||{})).handlers||{},o=Object.keys(a),s=new RV(i.algorithms);if("string"==typeof e)e={payload:(e=e.split("."))[1],signatures:[{protected:e[0],signature:e[2]}]};else if(!e||"object"===e)throw new Error("invalid input");e.signature&&(e.signatures=[{protected:e.protected||void 0,header:e.header||void 0,signature:e.signature}]);var u=e.signatures||[{}];u=u.map(function(e){var t=PN(e.header||{}),r=e.protected?JSON.parse(SD.decode(e.protected,"utf8")):{};t=$k(t,r);var n=SD.decode(e.signature);if(!s.match(t.alg))return Promise.reject(new Error("Algorithm not allowed: "+t.alg));var i=r.crit;if(i){if(!Array.isArray(i))return Promise.reject(new Error("Invalid 'crit' header"));for(var a=0;i.length>a;a++)if(-1===o.indexOf(i[a]))return Promise.reject(new Error("Critical extension is not supported: "+i[a]))}return r=Object.keys(r),Promise.resolve({protected:r,aad:e.protected||"",header:t,signature:n})});var c=Promise.all(u);return c=c.then(function(t){return new Promise(function(s,u){var c=function(){var l=t.shift();if(l){l=$k({},l,{payload:e.payload});var f=Promise.resolve(l);(f=(f=(f=(f=(f=(f=f.then(function(e){var t;return i.allowEmbeddedKey&&e.header.jwk?t=IV.asKey(e.header.jwk):i.allowEmbeddedKey&&e.header.x5c?(t=new ag(t=e.header.x5c[0],"base64"),t=IV.asKey(t,"pkix")):t=Promise.resolve(r||n.get({use:"sig",alg:e.header.alg,kid:e.header.kid})),t.then(function(t){return t?(e.key=t,e):Promise.reject(new Error("key does not match"))})})).then(function(e){var t=[];return o.forEach(function(r){var n;"function"==typeof(r=a[r])?n=r(e):"object"==typeof r&&"function"==typeof r.prepare&&(n=r.prepare(e)),n&&t.push(Promise.resolve(n))}),Promise.all(t).then(function(){return e})})).then(function(e){var t=e.aad||"",r=e.payload||"",n=new ag(1+t.length+r.length),i=0;return n.write(t,i,"ascii"),i+=t.length,n.write(".",i,"ascii"),i++,Vg(r)?r.copy(n,i):n.write(r,i,"binary"),e.content=n,e})).then(function(e){return e.key.verify(e.header.alg,e.content,e.signature)})).then(function(e){var t=l.payload;return t=SD.decode(t),{protected:l.protected,header:l.header,payload:t,signature:e.mac,key:l.key}})).then(function(e){var t=[];return o.forEach(function(r){var n;"object"==typeof(r=a[r])&&"function"==typeof r.complete&&(n=r.complete(e)),n&&t.push(Promise.resolve(n))}),Promise.all(t).then(function(){return e})})).then(s,c)}else u(new Error("no key found"))};c()})})}})};var PV={createSign:{signer:xV,createSign:function(e,t){var r=e,n=1,i=t;if(0===arguments.length)throw new Error("at least one signatory must be provided");1===arguments.length?(i=e,n=0,r={}):IV.isKey(e)||e&&"kty"in e||e&&"key"in e&&(IV.isKey(e.key)||"kty"in e.key)?(i=e,n=0,r={}):r=PN(e),Array.isArray(i)||(i=CV(arguments,n));var a=(r=$k(PN(AV),r)).fields||{},o=r.format;if(o||(o=r.compact?"compact":"general"),("compact"===o||"flattened"===o)&&1<i.length)throw new Error("too many signatories for compact or flattened JSON serialization");var s="*"===r.protect;return r.compact&&(s=!0),i=i.map(function(e,t){return(e&&"kty"in e?IV.asKey(e).then(function(e){return{key:e}}):e?IV.asKey(e.key).then(function(t){return{header:e.header,reference:e.reference,protect:e.protect,key:t}}):Promise.reject(new Error("missing key for signatory "+t))).then(function(e){var t=e.key,r=e.header||{};r=$k($k({},a),r),e.header=r,r.alg||(r.alg=t.algorithms(IV.MODE_SIGN)[0]||"");var n,i=e.reference;if(delete e.reference,void 0===i?i=(i=["kid","jku","x5c","x5t","x5u"].some(function(e){return e in r}))?null:"kid":"boolean"==typeof i&&(i=i?"kid":null),i)if(n=t.toJSON(),"jwk"===i){if("oct"===t.kty)return Promise.reject(new Error("cannot embed key"));r.jwk=n}else i in n&&(r[i]=n[i]);var o=e.protect;if(s||"*"===o)o=Object.keys(r);else if("string"===o)o=[o];else if(Array.isArray(o))o=o.concat();else{if(o)return Promise.reject(new Error("protect must be a list of fields"));o=[]}return o=PP(o),e.protected=o,e=Object.freeze(e)})}),new xV({format:o},i)}}.createSign,createVerify:{verifier:kV,createVerify:function(e,t){return new kV(e,t)}}.createVerify},MV=function(e,t){return Array.prototype.slice.call(e,t||0)},DV=function(e){var t=IV.createKeyStore(),r=Cj.KEYLENGTH[e];if(r)return t.generate("oct",r);throw new Error("unsupported encryption algorithm")};function LV(){this.head=null,this.tail=null,this.length=0}LV.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},LV.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},LV.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},LV.prototype.clear=function(){this.head=this.tail=null,this.length=0},LV.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},LV.prototype.concat=function(e){if(0===this.length)return ag.alloc(0);if(1===this.length)return this.head.data;for(var t=ag.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t};var UV=ag.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function jV(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!UV(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=BV;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=VV;break;default:return void(this.write=FV)}this.charBuffer=new ag(6),this.charReceived=0,this.charLength=0}function FV(e){return e.toString(this.encoding)}function BV(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function VV(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}jV.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived);var i;n=(t+=e.toString(this.encoding,0,n)).length-1;if((i=t.charCodeAt(n))>=55296&&i<=56319){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),e.copy(this.charBuffer,0,0,a),t.substring(0,n)}return t},jV.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},jV.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t},KV.ReadableState=qV;var GV=Xg("stream");function qV(e,t){e=e||{},this.objectMode=!!e.objectMode,t instanceof yG&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.buffer=new LV,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(this.decoder=new jV(e.encoding),this.encoding=e.encoding)}function KV(e){if(!(this instanceof KV))return new KV(e);this._readableState=new qV(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),TS.call(this)}function HV(e,t,r,n,i){var a=function(e,t){var r=null;Vg(t)||"string"==typeof t||null==t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(t,r);if(a)e.emit("error",a);else if(null===r)t.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,YV(e)}(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var o=new Error("stream.push() after EOF");e.emit("error",o)}else if(t.endEmitted&&i){var s=new Error("stream.unshift() after end event");e.emit("error",s)}else{var u;!t.decoder||i||n||(r=t.decoder.write(r),u=!t.objectMode&&0===r.length),i||(t.reading=!1),u||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&YV(e))),function(e,t){t.readingMore||(t.readingMore=!0,vu($V,e,t))}(e,t)}else i||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}qg(KV,TS),KV.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=ag.from(e,t),t=""),HV(this,r,e,t,!1)},KV.prototype.unshift=function(e){return HV(this,this._readableState,e,"",!0)},KV.prototype.isPaused=function(){return!1===this._readableState.flowing},KV.prototype.setEncoding=function(e){return this._readableState.decoder=new jV(e),this._readableState.encoding=e,this};var zV=8388608;function WV(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=zV?e=zV:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function YV(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(GV("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?vu(XV,e):XV(e))}function XV(e){GV("emit readable"),e.emit("readable"),ZV(e)}function $V(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(GV("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function QV(e){GV("readable nexttick read 0"),e.read(0)}function JV(e,t){t.reading||(GV("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),ZV(e),t.flowing&&!t.reading&&e.read(0)}function ZV(e){var t=e._readableState;for(GV("flow",t.flowing);t.flowing&&null!==e.read(););}function eG(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,i=r.data;e-=i.length;for(;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0===(e-=o)){o===a.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++n}return t.length-=n,i}(e,t):function(e,t){var r=ag.allocUnsafe(e),n=t.head,i=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,o),0===(e-=o)){o===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++i}return t.length-=i,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function tG(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,vu(rG,t,e))}function rG(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function nG(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function iG(){}function aG(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function oG(e,t){Object.defineProperty(this,"buffer",{get:zg(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),e=e||{},this.objectMode=!!e.objectMode,t instanceof yG&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?vu(i,n):i(n);e._writableState.errorEmitted=!0,e.emit("error",n)}(e,r,n,t,i);else{var a=fG(r);a||r.corked||r.bufferProcessing||!r.bufferedRequest||lG(e,r),n?vu(cG,e,r,a,i):cG(e,r,a,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new hG(this)}function sG(e){if(!(this instanceof sG||this instanceof yG))return new sG(e);this._writableState=new oG(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),TS.call(this)}function uG(e,t,r,n,i,a,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function cG(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),pG(e,t)}function lG(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var o=0;r;)i[o]=r,r=r.next,o+=1;uG(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new hG(t)}else{for(;r;){var s=r.chunk,u=r.encoding,c=r.callback;if(uG(e,t,!1,t.objectMode?1:s.length,s,u,c),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function fG(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function dG(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function pG(e,t){var r=fG(t);return r&&(0===t.pendingcb?(dG(e,t),t.finished=!0,e.emit("finish")):dG(e,t)),r}function hG(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}KV.prototype.read=function(e){GV("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return GV("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?tG(this):YV(this),null;if(0===(e=WV(e,t))&&t.ended)return 0===t.length&&tG(this),null;var n,i=t.needReadable;return GV("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&GV("length less than watermark",i=!0),t.ended||t.reading?GV("reading or ended",i=!1):i&&(GV("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=WV(r,t))),null===(n=e>0?eG(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&tG(this)),null!==n&&this.emit("data",n),n},KV.prototype._read=function(e){this.emit("error",new Error("not implemented"))},KV.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,GV("pipe count=%d opts=%j",n.pipesCount,t);var i=!t||!1!==t.end?o:c;function a(e){GV("onunpipe"),e===r&&c()}function o(){GV("onend"),e.end()}n.endEmitted?vu(i):r.once("end",i),e.on("unpipe",a);var s=function(e){return function(){var t=e._readableState;GV("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&e.listeners("data").length&&(t.flowing=!0,ZV(e))}}(r);e.on("drain",s);var u=!1;function c(){GV("cleanup"),e.removeListener("close",p),e.removeListener("finish",h),e.removeListener("drain",s),e.removeListener("error",d),e.removeListener("unpipe",a),r.removeListener("end",o),r.removeListener("end",c),r.removeListener("data",f),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||s()}var l=!1;function f(t){GV("ondata"),l=!1,!1!==e.write(t)||l||((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==nG(n.pipes,e))&&!u&&(GV("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function d(t){var r;GV("onerror",t),v(),e.removeListener("error",d),0===(r="error",e.listeners(r).length)&&e.emit("error",t)}function p(){e.removeListener("finish",h),v()}function h(){GV("onfinish"),e.removeListener("close",p),v()}function v(){GV("unpipe"),r.unpipe(e)}return r.on("data",f),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",p),e.once("finish",h),e.emit("pipe",r),n.flowing||(GV("pipe resume"),r.resume()),e},KV.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var a=nG(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},KV.prototype.on=function(e,t){var r=TS.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&YV(this):vu(QV,this))}return r},KV.prototype.addListener=KV.prototype.on,KV.prototype.resume=function(){var e=this._readableState;return e.flowing||(GV("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,vu(JV,e,t))}(this,e)),this},KV.prototype.pause=function(){return GV("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(GV("pause"),this._readableState.flowing=!1,this.emit("pause")),this},KV.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",function(){if(GV("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){(GV("wrapped data"),t.decoder&&(i=t.decoder.write(i)),t.objectMode&&null==i)||(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}(["error","close","destroy","pause","resume"],function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){GV("wrapped _read",t),r&&(r=!1,e.resume())},n},KV._fromList=eG,sG.WritableState=oG,qg(sG,TS),oG.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},sG.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},sG.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),ag.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=iG),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),vu(t,r)}(this,r):function(e,t,r,n){var i=!0,a=!1;return null===r?a=new TypeError("May not write null values to stream"):ag.isBuffer(r)||"string"==typeof r||void 0===r||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),vu(n,a),i=!1),i}(this,n,e,r)&&(n.pendingcb++,i=function(e,t,r,n,i){r=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=ag.from(t,r)),t}(t,r,n),ag.isBuffer(r)&&(n="buffer");var a=t.objectMode?1:r.length;t.length+=a;var o=t.length<t.highWaterMark;o||(t.needDrain=!0);if(t.writing||t.corked){var s=t.lastBufferedRequest;t.lastBufferedRequest=new aG(r,n,i),s?s.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else uG(e,t,!1,a,r,n,i);return o}(this,n,e,t,r)),i},sG.prototype.cork=function(){this._writableState.corked++},sG.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||lG(this,e))},sG.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},sG.prototype._write=function(e,t,r){r(new Error("not implemented"))},sG.prototype._writev=null,sG.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,r){t.ending=!0,pG(e,t),r&&(t.finished?vu(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r)},qg(yG,KV);for(var vG=Object.keys(sG.prototype),mG=0;mG<vG.length;mG++){var gG=vG[mG];yG.prototype[gG]||(yG.prototype[gG]=sG.prototype[gG])}function yG(e){if(!(this instanceof yG))return new yG(e);KV.call(this,e),sG.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",EG)}function EG(){this.allowHalfOpen||this._writableState.ended||vu(bG,this)}function bG(e){e.end()}function _G(e){this.afterTransform=function(t,r){return function(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&e.push(r);i(t);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function SG(e){if(!(this instanceof SG))return new SG(e);yG.call(this,e),this._transformState=new _G(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){TG(t,e)}):TG(t)})}function TG(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(n.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}function wG(e){if(!(this instanceof wG))return new wG(e);SG.call(this,e)}function IG(){TS.call(this)}qg(SG,yG),SG.prototype.push=function(e,t){return this._transformState.needTransform=!1,yG.prototype.push.call(this,e,t)},SG.prototype._transform=function(e,t,r){throw new Error("Not implemented")},SG.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},SG.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},qg(wG,SG),wG.prototype._transform=function(e,t,r){r(null,e)},qg(IG,TS),IG.Readable=KV,IG.Writable=sG,IG.Duplex=yG,IG.Transform=SG,IG.PassThrough=wG,IG.Stream=IG,IG.prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",o),r.on("close",s));var a=!1;function o(){a||(a=!0,e.end())}function s(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===TS.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",o),r.removeListener("close",s),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",u),e.on("error",u),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e};var AG={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function CG(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function xG(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var a=0;a<n;a++)e[i+a]=t[r+a]}var OG=Uint8Array,RG=Uint16Array,NG=Int32Array,kG=4,PG=0,MG=1,DG=2;function LG(e){for(var t=e.length;--t>=0;)e[t]=0}var UG=0,jG=1,FG=2,BG=29,VG=256,GG=VG+1+BG,qG=30,KG=19,HG=2*GG+1,zG=15,WG=16,YG=7,XG=256,$G=16,QG=17,JG=18,ZG=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],eq=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],tq=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rq=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],nq=new Array(2*(GG+2));LG(nq);var iq=new Array(2*qG);LG(iq);var aq=new Array(512);LG(aq);var oq=new Array(256);LG(oq);var sq=new Array(BG);LG(sq);var uq,cq,lq,fq=new Array(qG);function dq(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function pq(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function hq(e){return e<256?aq[e]:aq[256+(e>>>7)]}function vq(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function mq(e,t,r){e.bi_valid>WG-r?(e.bi_buf|=t<<e.bi_valid&65535,vq(e,e.bi_buf),e.bi_buf=t>>WG-e.bi_valid,e.bi_valid+=r-WG):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function gq(e,t,r){mq(e,r[2*t],r[2*t+1])}function yq(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function Eq(e,t,r){var n,i,a=new Array(zG+1),o=0;for(n=1;n<=zG;n++)a[n]=o=o+r[n-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=yq(a[s]++,s))}}function bq(e){var t;for(t=0;t<GG;t++)e.dyn_ltree[2*t]=0;for(t=0;t<qG;t++)e.dyn_dtree[2*t]=0;for(t=0;t<KG;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*XG]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function _q(e){e.bi_valid>8?vq(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Sq(e,t,r,n){var i=2*t,a=2*r;return e[i]<e[a]||e[i]===e[a]&&n[t]<=n[r]}function Tq(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&Sq(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Sq(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function wq(e,t,r){var n,i,a,o,s=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===n?gq(e,i,t):(gq(e,(a=oq[i])+VG+1,t),0!==(o=ZG[a])&&mq(e,i-=sq[a],o),gq(e,a=hq(--n),r),0!==(o=eq[a])&&mq(e,n-=fq[a],o))}while(s<e.last_lit);gq(e,XG,t)}function Iq(e,t){var r,n,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=HG,r=0;r<u;r++)0!==a[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)Tq(e,a,r);i=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Tq(e,a,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,a[2*i]=a[2*r]+a[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,a[2*r+1]=a[2*n+1]=i,e.heap[1]=i++,Tq(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,a,o,s,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,f=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,h=t.stat_desc.max_length,v=0;for(a=0;a<=zG;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<HG;r++)(a=u[2*u[2*(n=e.heap[r])+1]+1]+1)>h&&(a=h,v++),u[2*n+1]=a,n>c||(e.bl_count[a]++,o=0,n>=p&&(o=d[n-p]),s=u[2*n],e.opt_len+=s*(a+o),f&&(e.static_len+=s*(l[2*n+1]+o)));if(0!==v){do{for(a=h-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[h]--,v-=2}while(v>0);for(a=h;0!==a;a--)for(n=e.bl_count[a];0!==n;)(i=e.heap[--r])>c||(u[2*i+1]!==a&&(e.opt_len+=(a-u[2*i+1])*u[2*i],u[2*i+1]=a),n--)}}(e,t),Eq(a,c,e.bl_count)}function Aq(e,t,r){var n,i,a=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=t[2*(n+1)+1],++s<u&&i===o||(s<c?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*$G]++):s<=10?e.bl_tree[2*QG]++:e.bl_tree[2*JG]++,s=0,a=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4))}function Cq(e,t,r){var n,i,a=-1,o=t[1],s=0,u=7,c=4;for(0===o&&(u=138,c=3),n=0;n<=r;n++)if(i=o,o=t[2*(n+1)+1],!(++s<u&&i===o)){if(s<c)do{gq(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(gq(e,i,e.bl_tree),s--),gq(e,$G,e.bl_tree),mq(e,s-3,2)):s<=10?(gq(e,QG,e.bl_tree),mq(e,s-3,3)):(gq(e,JG,e.bl_tree),mq(e,s-11,7));s=0,a=i,0===o?(u=138,c=3):i===o?(u=6,c=3):(u=7,c=4)}}LG(fq);var xq=!1;function Oq(e){xq||(!function(){var e,t,r,n,i,a=new Array(zG+1);for(r=0,n=0;n<BG-1;n++)for(sq[n]=r,e=0;e<1<<ZG[n];e++)oq[r++]=n;for(oq[r-1]=n,i=0,n=0;n<16;n++)for(fq[n]=i,e=0;e<1<<eq[n];e++)aq[i++]=n;for(i>>=7;n<qG;n++)for(fq[n]=i<<7,e=0;e<1<<eq[n]-7;e++)aq[256+i++]=n;for(t=0;t<=zG;t++)a[t]=0;for(e=0;e<=143;)nq[2*e+1]=8,e++,a[8]++;for(;e<=255;)nq[2*e+1]=9,e++,a[9]++;for(;e<=279;)nq[2*e+1]=7,e++,a[7]++;for(;e<=287;)nq[2*e+1]=8,e++,a[8]++;for(Eq(nq,GG+1,a),e=0;e<qG;e++)iq[2*e+1]=5,iq[2*e]=yq(e,5);uq=new dq(nq,ZG,VG+1,GG,zG),cq=new dq(iq,eq,0,qG,zG),lq=new dq(new Array(0),tq,0,KG,YG)}(),xq=!0),e.l_desc=new pq(e.dyn_ltree,uq),e.d_desc=new pq(e.dyn_dtree,cq),e.bl_desc=new pq(e.bl_tree,lq),e.bi_buf=0,e.bi_valid=0,bq(e)}function Rq(e,t,r,n){mq(e,(UG<<1)+(n?1:0),3),function(e,t,r,n){_q(e),n&&(vq(e,r),vq(e,~r)),xG(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}function Nq(e){mq(e,jG<<1,3),gq(e,XG,nq),function(e){16===e.bi_valid?(vq(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}function kq(e,t,r,n){var i,a,o=0;e.level>0?(e.strm.data_type===DG&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return PG;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return MG;for(t=32;t<VG;t++)if(0!==e.dyn_ltree[2*t])return MG;return PG}(e)),Iq(e,e.l_desc),Iq(e,e.d_desc),o=function(e){var t;for(Aq(e,e.dyn_ltree,e.l_desc.max_code),Aq(e,e.dyn_dtree,e.d_desc.max_code),Iq(e,e.bl_desc),t=KG-1;t>=3&&0===e.bl_tree[2*rq[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),i=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=i&&(i=a)):i=a=r+5,r+4<=i&&-1!==t?Rq(e,t,r,n):e.strategy===kG||a===i?(mq(e,(jG<<1)+(n?1:0),3),wq(e,nq,iq)):(mq(e,(FG<<1)+(n?1:0),3),function(e,t,r,n){var i;for(mq(e,t-257,5),mq(e,r-1,5),mq(e,n-4,4),i=0;i<n;i++)mq(e,e.bl_tree[2*rq[i]+1],3);Cq(e,e.dyn_ltree,t-1),Cq(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),wq(e,e.dyn_ltree,e.dyn_dtree)),bq(e),n&&_q(e)}function Pq(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(oq[r]+VG+1)]++,e.dyn_dtree[2*hq(t)]++),e.last_lit===e.lit_bufsize-1}function Mq(e,t,r,n){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{a=a+(i=i+t[n++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0}var Dq=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();function Lq(e,t,r,n){var i=Dq,a=n+r;e^=-1;for(var o=n;o<a;o++)e=e>>>8^i[255&(e^t[o])];return-1^e}var Uq,jq=0,Fq=1,Bq=3,Vq=4,Gq=5,qq=0,Kq=1,Hq=-2,zq=-3,Wq=-5,Yq=-1,Xq=1,$q=2,Qq=3,Jq=4,Zq=2,eK=8,tK=9,rK=286,nK=30,iK=19,aK=2*rK+1,oK=15,sK=3,uK=258,cK=uK+sK+1,lK=32,fK=42,dK=69,pK=73,hK=91,vK=103,mK=113,gK=666,yK=1,EK=2,bK=3,_K=4,SK=3;function TK(e,t){return e.msg=AG[t],t}function wK(e){return(e<<1)-(e>4?9:0)}function IK(e){for(var t=e.length;--t>=0;)e[t]=0}function AK(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(xG(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function CK(e,t){kq(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,AK(e.strm)}function xK(e,t){e.pending_buf[e.pending++]=t}function OK(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function RK(e,t){var r,n,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-cK?e.strstart-(e.w_size-cK):0,c=e.window,l=e.w_mask,f=e.prev,d=e.strstart+uK,p=c[a+o-1],h=c[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(r=t)+o]===h&&c[r+o-1]===p&&c[r]===c[a]&&c[++r]===c[a+1]){a+=2,r++;do{}while(c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&a<d);if(n=uK-(d-a),a=d-uK,n>o){if(e.match_start=t,o=n,n>=s)break;p=c[a+o-1],h=c[a+o]}}}while((t=f[t&l])>u&&0!=--i);return o<=e.lookahead?o:e.lookahead}function NK(e){var t,r,n,i,a,o,s,u,c,l,f=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-cK)){xG(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=f?n-f:0}while(--r);t=r=f;do{n=e.prev[--t],e.prev[t]=n>=f?n-f:0}while(--r);i+=f}if(0===e.strm.avail_in)break;if(o=e.strm,s=e.window,u=e.strstart+e.lookahead,c=i,l=void 0,(l=o.avail_in)>c&&(l=c),r=0===l?0:(o.avail_in-=l,xG(s,o.input,o.next_in,l,u),1===o.state.wrap?o.adler=Mq(o.adler,s,l,u):2===o.state.wrap&&(o.adler=Lq(o.adler,s,l,u)),o.next_in+=l,o.total_in+=l,l),e.lookahead+=r,e.lookahead+e.insert>=sK)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+sK-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<sK)););}while(e.lookahead<cK&&0!==e.strm.avail_in)}function kK(e,t){for(var r,n;;){if(e.lookahead<cK){if(NK(e),e.lookahead<cK&&t===jq)return yK;if(0===e.lookahead)break}if(r=0,e.lookahead>=sK&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+sK-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-cK&&(e.match_length=RK(e,r)),e.match_length>=sK)if(n=Pq(e,e.strstart-e.match_start,e.match_length-sK),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=sK){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+sK-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=Pq(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(CK(e,!1),0===e.strm.avail_out))return yK}return e.insert=e.strstart<sK-1?e.strstart:sK-1,t===Vq?(CK(e,!0),0===e.strm.avail_out?bK:_K):e.last_lit&&(CK(e,!1),0===e.strm.avail_out)?yK:EK}function PK(e,t){for(var r,n,i;;){if(e.lookahead<cK){if(NK(e),e.lookahead<cK&&t===jq)return yK;if(0===e.lookahead)break}if(r=0,e.lookahead>=sK&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+sK-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=sK-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-cK&&(e.match_length=RK(e,r),e.match_length<=5&&(e.strategy===Xq||e.match_length===sK&&e.strstart-e.match_start>4096)&&(e.match_length=sK-1)),e.prev_length>=sK&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-sK,n=Pq(e,e.strstart-1-e.prev_match,e.prev_length-sK),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+sK-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=sK-1,e.strstart++,n&&(CK(e,!1),0===e.strm.avail_out))return yK}else if(e.match_available){if((n=Pq(e,0,e.window[e.strstart-1]))&&CK(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return yK}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Pq(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<sK-1?e.strstart:sK-1,t===Vq?(CK(e,!0),0===e.strm.avail_out?bK:_K):e.last_lit&&(CK(e,!1),0===e.strm.avail_out)?yK:EK}function MK(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function DK(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=eK,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new RG(2*aK),this.dyn_dtree=new RG(2*(2*nK+1)),this.bl_tree=new RG(2*(2*iK+1)),IK(this.dyn_ltree),IK(this.dyn_dtree),IK(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new RG(oK+1),this.heap=new RG(2*rK+1),IK(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new RG(2*rK+1),IK(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function LK(e){var t,r=function(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Zq,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?fK:mK,e.adler=2===t.wrap?0:1,t.last_flush=jq,Oq(t),qq):TK(e,Hq)}(e);return r===qq&&((t=e.state).window_size=2*t.w_size,IK(t.head),t.max_lazy_match=Uq[t.level].max_lazy,t.good_match=Uq[t.level].good_length,t.nice_match=Uq[t.level].nice_length,t.max_chain_length=Uq[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=sK-1,t.match_available=0,t.ins_h=0),r}function UK(e,t){var r,n,i,a;if(!e||!e.state||t>Gq||t<0)return e?TK(e,Hq):Hq;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||n.status===gK&&t!==Vq)return TK(e,0===e.avail_out?Wq:Hq);if(n.strm=e,r=n.last_flush,n.last_flush=t,n.status===fK)if(2===n.wrap)e.adler=0,xK(n,31),xK(n,139),xK(n,8),n.gzhead?(xK(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),xK(n,255&n.gzhead.time),xK(n,n.gzhead.time>>8&255),xK(n,n.gzhead.time>>16&255),xK(n,n.gzhead.time>>24&255),xK(n,9===n.level?2:n.strategy>=$q||n.level<2?4:0),xK(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(xK(n,255&n.gzhead.extra.length),xK(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Lq(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=dK):(xK(n,0),xK(n,0),xK(n,0),xK(n,0),xK(n,0),xK(n,9===n.level?2:n.strategy>=$q||n.level<2?4:0),xK(n,SK),n.status=mK);else{var o=eK+(n.w_bits-8<<4)<<8;o|=(n.strategy>=$q||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(o|=lK),o+=31-o%31,n.status=mK,OK(n,o),0!==n.strstart&&(OK(n,e.adler>>>16),OK(n,65535&e.adler)),e.adler=1}if(n.status===dK)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>i&&(e.adler=Lq(e.adler,n.pending_buf,n.pending-i,i)),AK(e),i=n.pending,n.pending!==n.pending_buf_size));)xK(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(e.adler=Lq(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=pK)}else n.status=pK;if(n.status===pK)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=Lq(e.adler,n.pending_buf,n.pending-i,i)),AK(e),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}a=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,xK(n,a)}while(0!==a);n.gzhead.hcrc&&n.pending>i&&(e.adler=Lq(e.adler,n.pending_buf,n.pending-i,i)),0===a&&(n.gzindex=0,n.status=hK)}else n.status=hK;if(n.status===hK)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(e.adler=Lq(e.adler,n.pending_buf,n.pending-i,i)),AK(e),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}a=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,xK(n,a)}while(0!==a);n.gzhead.hcrc&&n.pending>i&&(e.adler=Lq(e.adler,n.pending_buf,n.pending-i,i)),0===a&&(n.status=vK)}else n.status=vK;if(n.status===vK&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&AK(e),n.pending+2<=n.pending_buf_size&&(xK(n,255&e.adler),xK(n,e.adler>>8&255),e.adler=0,n.status=mK)):n.status=mK),0!==n.pending){if(AK(e),0===e.avail_out)return n.last_flush=-1,qq}else if(0===e.avail_in&&wK(t)<=wK(r)&&t!==Vq)return TK(e,Wq);if(n.status===gK&&0!==e.avail_in)return TK(e,Wq);if(0!==e.avail_in||0!==n.lookahead||t!==jq&&n.status!==gK){var s=n.strategy===$q?function(e,t){for(var r;;){if(0===e.lookahead&&(NK(e),0===e.lookahead)){if(t===jq)return yK;break}if(e.match_length=0,r=Pq(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(CK(e,!1),0===e.strm.avail_out))return yK}return e.insert=0,t===Vq?(CK(e,!0),0===e.strm.avail_out?bK:_K):e.last_lit&&(CK(e,!1),0===e.strm.avail_out)?yK:EK}(n,t):n.strategy===Qq?function(e,t){for(var r,n,i,a,o=e.window;;){if(e.lookahead<=uK){if(NK(e),e.lookahead<=uK&&t===jq)return yK;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=sK&&e.strstart>0&&(n=o[i=e.strstart-1])===o[++i]&&n===o[++i]&&n===o[++i]){a=e.strstart+uK;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<a);e.match_length=uK-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=sK?(r=Pq(e,1,e.match_length-sK),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Pq(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(CK(e,!1),0===e.strm.avail_out))return yK}return e.insert=0,t===Vq?(CK(e,!0),0===e.strm.avail_out?bK:_K):e.last_lit&&(CK(e,!1),0===e.strm.avail_out)?yK:EK}(n,t):Uq[n.level].func(n,t);if(s!==bK&&s!==_K||(n.status=gK),s===yK||s===bK)return 0===e.avail_out&&(n.last_flush=-1),qq;if(s===EK&&(t===Fq?Nq(n):t!==Gq&&(Rq(n,0,0,!1),t===Bq&&(IK(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),AK(e),0===e.avail_out))return n.last_flush=-1,qq}return t!==Vq?qq:n.wrap<=0?Kq:(2===n.wrap?(xK(n,255&e.adler),xK(n,e.adler>>8&255),xK(n,e.adler>>16&255),xK(n,e.adler>>24&255),xK(n,255&e.total_in),xK(n,e.total_in>>8&255),xK(n,e.total_in>>16&255),xK(n,e.total_in>>24&255)):(OK(n,e.adler>>>16),OK(n,65535&e.adler)),AK(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?qq:Kq)}Uq=[new MK(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(NK(e),0===e.lookahead&&t===jq)return yK;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,CK(e,!1),0===e.strm.avail_out))return yK;if(e.strstart-e.block_start>=e.w_size-cK&&(CK(e,!1),0===e.strm.avail_out))return yK}return e.insert=0,t===Vq?(CK(e,!0),0===e.strm.avail_out?bK:_K):(e.strstart>e.block_start&&(CK(e,!1),e.strm.avail_out),yK)}),new MK(4,4,8,4,kK),new MK(4,5,16,8,kK),new MK(4,6,32,32,kK),new MK(4,4,16,16,PK),new MK(8,16,32,32,PK),new MK(8,16,128,128,PK),new MK(8,32,128,256,PK),new MK(32,128,258,1024,PK),new MK(32,258,258,4096,PK)];var jK=30,FK=12;function BK(e,t){var r,n,i,a,o,s,u,c,l,f,d,p,h,v,m,g,y,E,b,_,S,T,w,I,A;r=e.state,n=e.next_in,I=e.input,i=n+(e.avail_in-5),a=e.next_out,A=e.output,o=a-(t-e.avail_out),s=a+(e.avail_out-257),u=r.dmax,c=r.wsize,l=r.whave,f=r.wnext,d=r.window,p=r.hold,h=r.bits,v=r.lencode,m=r.distcode,g=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{h<15&&(p+=I[n++]<<h,h+=8,p+=I[n++]<<h,h+=8),E=v[p&g];t:for(;;){if(p>>>=b=E>>>24,h-=b,0===(b=E>>>16&255))A[a++]=65535&E;else{if(!(16&b)){if(0==(64&b)){E=v[(65535&E)+(p&(1<<b)-1)];continue t}if(32&b){r.mode=FK;break e}e.msg="invalid literal/length code",r.mode=jK;break e}_=65535&E,(b&=15)&&(h<b&&(p+=I[n++]<<h,h+=8),_+=p&(1<<b)-1,p>>>=b,h-=b),h<15&&(p+=I[n++]<<h,h+=8,p+=I[n++]<<h,h+=8),E=m[p&y];r:for(;;){if(p>>>=b=E>>>24,h-=b,!(16&(b=E>>>16&255))){if(0==(64&b)){E=m[(65535&E)+(p&(1<<b)-1)];continue r}e.msg="invalid distance code",r.mode=jK;break e}if(S=65535&E,h<(b&=15)&&(p+=I[n++]<<h,(h+=8)<b&&(p+=I[n++]<<h,h+=8)),(S+=p&(1<<b)-1)>u){e.msg="invalid distance too far back",r.mode=jK;break e}if(p>>>=b,h-=b,S>(b=a-o)){if((b=S-b)>l&&r.sane){e.msg="invalid distance too far back",r.mode=jK;break e}if(T=0,w=d,0===f){if(T+=c-b,b<_){_-=b;do{A[a++]=d[T++]}while(--b);T=a-S,w=A}}else if(f<b){if(T+=c+f-b,(b-=f)<_){_-=b;do{A[a++]=d[T++]}while(--b);if(T=0,f<_){_-=b=f;do{A[a++]=d[T++]}while(--b);T=a-S,w=A}}}else if(T+=f-b,b<_){_-=b;do{A[a++]=d[T++]}while(--b);T=a-S,w=A}for(;_>2;)A[a++]=w[T++],A[a++]=w[T++],A[a++]=w[T++],_-=3;_&&(A[a++]=w[T++],_>1&&(A[a++]=w[T++]))}else{T=a-S;do{A[a++]=A[T++],A[a++]=A[T++],A[a++]=A[T++],_-=3}while(_>2);_&&(A[a++]=A[T++],_>1&&(A[a++]=A[T++]))}break}}break}}while(n<i&&a<s);n-=_=h>>3,p&=(1<<(h-=_<<3))-1,e.next_in=n,e.next_out=a,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=a<s?s-a+257:257-(a-s),r.hold=p,r.bits=h}var VK=15,GK=852,qK=592,KK=0,HK=1,zK=2,WK=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],YK=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],XK=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],$K=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function QK(e,t,r,n,i,a,o,s){var u,c,l,f,d,p,h,v,m,g=s.bits,y=0,E=0,b=0,_=0,S=0,T=0,w=0,I=0,A=0,C=0,x=null,O=0,R=new RG(VK+1),N=new RG(VK+1),k=null,P=0;for(y=0;y<=VK;y++)R[y]=0;for(E=0;E<n;E++)R[t[r+E]]++;for(S=g,_=VK;_>=1&&0===R[_];_--);if(S>_&&(S=_),0===_)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(b=1;b<_&&0===R[b];b++);for(S<b&&(S=b),I=1,y=1;y<=VK;y++)if(I<<=1,(I-=R[y])<0)return-1;if(I>0&&(e===KK||1!==_))return-1;for(N[1]=0,y=1;y<VK;y++)N[y+1]=N[y]+R[y];for(E=0;E<n;E++)0!==t[r+E]&&(o[N[t[r+E]]++]=E);if(e===KK?(x=k=o,p=19):e===HK?(x=WK,O-=257,k=YK,P-=257,p=256):(x=XK,k=$K,p=-1),C=0,E=0,y=b,d=a,T=S,w=0,l=-1,f=(A=1<<S)-1,e===HK&&A>GK||e===zK&&A>qK)return 1;for(;;){h=y-w,o[E]<p?(v=0,m=o[E]):o[E]>p?(v=k[P+o[E]],m=x[O+o[E]]):(v=96,m=0),u=1<<y-w,b=c=1<<T;do{i[d+(C>>w)+(c-=u)]=h<<24|v<<16|m|0}while(0!==c);for(u=1<<y-1;C&u;)u>>=1;if(0!==u?(C&=u-1,C+=u):C=0,E++,0==--R[y]){if(y===_)break;y=t[r+o[E]]}if(y>S&&(C&f)!==l){for(0===w&&(w=S),d+=b,I=1<<(T=y-w);T+w<_&&!((I-=R[T+w])<=0);)T++,I<<=1;if(A+=1<<T,e===HK&&A>GK||e===zK&&A>qK)return 1;i[l=C&f]=S<<24|T<<16|d-a|0}}return 0!==C&&(i[d+C]=y-w<<24|64<<16|0),s.bits=S,0}var JK=0,ZK=1,eH=2,tH=4,rH=5,nH=6,iH=0,aH=1,oH=2,sH=-2,uH=-3,cH=-4,lH=-5,fH=8,dH=1,pH=2,hH=3,vH=4,mH=5,gH=6,yH=7,EH=8,bH=9,_H=10,SH=11,TH=12,wH=13,IH=14,AH=15,CH=16,xH=17,OH=18,RH=19,NH=20,kH=21,PH=22,MH=23,DH=24,LH=25,UH=26,jH=27,FH=28,BH=29,VH=30,GH=31,qH=32,KH=852,HH=592;function zH(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function WH(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new RG(320),this.work=new RG(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function YH(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,function(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=dH,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new NG(KH),t.distcode=t.distdyn=new NG(HH),t.sane=1,t.back=-1,iH):sH}(e)):sH}function XH(e,t){var r,n;return e?(n=new WH,e.state=n,n.window=null,(r=function(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?sH:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,YH(e))):sH}(e,t))!==iH&&(e.state=null),r):sH}var $H,QH,JH=!0;function ZH(e){if(JH){var t;for($H=new NG(512),QH=new NG(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(QK(ZK,e.lens,0,288,$H,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;QK(eH,e.lens,0,32,QH,0,e.work,{bits:5}),JH=!1}e.lencode=$H,e.lenbits=9,e.distcode=QH,e.distbits=5}function ez(e,t){var r,n,i,a,o,s,u,c,l,f,d,p,h,v,m,g,y,E,b,_,S,T,w,I,A=0,C=new OG(4),x=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return sH;(r=e.state).mode===TH&&(r.mode=wH),o=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,c=r.hold,l=r.bits,f=s,d=u,T=iH;e:for(;;)switch(r.mode){case dH:if(0===r.wrap){r.mode=wH;break}for(;l<16;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(2&r.wrap&&35615===c){r.check=0,C[0]=255&c,C[1]=c>>>8&255,r.check=Lq(r.check,C,2,0),c=0,l=0,r.mode=pH;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=VH;break}if((15&c)!==fH){e.msg="unknown compression method",r.mode=VH;break}if(l-=4,S=8+(15&(c>>>=4)),0===r.wbits)r.wbits=S;else if(S>r.wbits){e.msg="invalid window size",r.mode=VH;break}r.dmax=1<<S,e.adler=r.check=1,r.mode=512&c?_H:TH,c=0,l=0;break;case pH:for(;l<16;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(r.flags=c,(255&r.flags)!==fH){e.msg="unknown compression method",r.mode=VH;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=VH;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&(C[0]=255&c,C[1]=c>>>8&255,r.check=Lq(r.check,C,2,0)),c=0,l=0,r.mode=hH;case hH:for(;l<32;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}r.head&&(r.head.time=c),512&r.flags&&(C[0]=255&c,C[1]=c>>>8&255,C[2]=c>>>16&255,C[3]=c>>>24&255,r.check=Lq(r.check,C,4,0)),c=0,l=0,r.mode=vH;case vH:for(;l<16;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&(C[0]=255&c,C[1]=c>>>8&255,r.check=Lq(r.check,C,2,0)),c=0,l=0,r.mode=mH;case mH:if(1024&r.flags){for(;l<16;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&(C[0]=255&c,C[1]=c>>>8&255,r.check=Lq(r.check,C,2,0)),c=0,l=0}else r.head&&(r.head.extra=null);r.mode=gH;case gH:if(1024&r.flags&&((p=r.length)>s&&(p=s),p&&(r.head&&(S=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),xG(r.head.extra,n,a,p,S)),512&r.flags&&(r.check=Lq(r.check,n,p,a)),s-=p,a+=p,r.length-=p),r.length))break e;r.length=0,r.mode=yH;case yH:if(2048&r.flags){if(0===s)break e;p=0;do{S=n[a+p++],r.head&&S&&r.length<65536&&(r.head.name+=String.fromCharCode(S))}while(S&&p<s);if(512&r.flags&&(r.check=Lq(r.check,n,p,a)),s-=p,a+=p,S)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=EH;case EH:if(4096&r.flags){if(0===s)break e;p=0;do{S=n[a+p++],r.head&&S&&r.length<65536&&(r.head.comment+=String.fromCharCode(S))}while(S&&p<s);if(512&r.flags&&(r.check=Lq(r.check,n,p,a)),s-=p,a+=p,S)break e}else r.head&&(r.head.comment=null);r.mode=bH;case bH:if(512&r.flags){for(;l<16;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=VH;break}c=0,l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=TH;break;case _H:for(;l<32;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}e.adler=r.check=zH(c),c=0,l=0,r.mode=SH;case SH:if(0===r.havedict)return e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,r.hold=c,r.bits=l,oH;e.adler=r.check=1,r.mode=TH;case TH:if(t===rH||t===nH)break e;case wH:if(r.last){c>>>=7&l,l-=7&l,r.mode=jH;break}for(;l<3;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}switch(r.last=1&c,l-=1,3&(c>>>=1)){case 0:r.mode=IH;break;case 1:if(ZH(r),r.mode=NH,t===nH){c>>>=2,l-=2;break e}break;case 2:r.mode=xH;break;case 3:e.msg="invalid block type",r.mode=VH}c>>>=2,l-=2;break;case IH:for(c>>>=7&l,l-=7&l;l<32;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=VH;break}if(r.length=65535&c,c=0,l=0,r.mode=AH,t===nH)break e;case AH:r.mode=CH;case CH:if(p=r.length){if(p>s&&(p=s),p>u&&(p=u),0===p)break e;xG(i,n,a,p,o),s-=p,a+=p,u-=p,o+=p,r.length-=p;break}r.mode=TH;break;case xH:for(;l<14;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(r.nlen=257+(31&c),c>>>=5,l-=5,r.ndist=1+(31&c),c>>>=5,l-=5,r.ncode=4+(15&c),c>>>=4,l-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=VH;break}r.have=0,r.mode=OH;case OH:for(;r.have<r.ncode;){for(;l<3;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}r.lens[x[r.have++]]=7&c,c>>>=3,l-=3}for(;r.have<19;)r.lens[x[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,w={bits:r.lenbits},T=QK(JK,r.lens,0,19,r.lencode,0,r.work,w),r.lenbits=w.bits,T){e.msg="invalid code lengths set",r.mode=VH;break}r.have=0,r.mode=RH;case RH:for(;r.have<r.nlen+r.ndist;){for(;g=(A=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,y=65535&A,!((m=A>>>24)<=l);){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(y<16)c>>>=m,l-=m,r.lens[r.have++]=y;else{if(16===y){for(I=m+2;l<I;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(c>>>=m,l-=m,0===r.have){e.msg="invalid bit length repeat",r.mode=VH;break}S=r.lens[r.have-1],p=3+(3&c),c>>>=2,l-=2}else if(17===y){for(I=m+3;l<I;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}l-=m,S=0,p=3+(7&(c>>>=m)),c>>>=3,l-=3}else{for(I=m+7;l<I;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}l-=m,S=0,p=11+(127&(c>>>=m)),c>>>=7,l-=7}if(r.have+p>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=VH;break}for(;p--;)r.lens[r.have++]=S}}if(r.mode===VH)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=VH;break}if(r.lenbits=9,w={bits:r.lenbits},T=QK(ZK,r.lens,0,r.nlen,r.lencode,0,r.work,w),r.lenbits=w.bits,T){e.msg="invalid literal/lengths set",r.mode=VH;break}if(r.distbits=6,r.distcode=r.distdyn,w={bits:r.distbits},T=QK(eH,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,w),r.distbits=w.bits,T){e.msg="invalid distances set",r.mode=VH;break}if(r.mode=NH,t===nH)break e;case NH:r.mode=kH;case kH:if(s>=6&&u>=258){e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,r.hold=c,r.bits=l,BK(e,d),o=e.next_out,i=e.output,u=e.avail_out,a=e.next_in,n=e.input,s=e.avail_in,c=r.hold,l=r.bits,r.mode===TH&&(r.back=-1);break}for(r.back=0;g=(A=r.lencode[c&(1<<r.lenbits)-1])>>>16&255,y=65535&A,!((m=A>>>24)<=l);){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(g&&0==(240&g)){for(E=m,b=g,_=y;g=(A=r.lencode[_+((c&(1<<E+b)-1)>>E)])>>>16&255,y=65535&A,!(E+(m=A>>>24)<=l);){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}c>>>=E,l-=E,r.back+=E}if(c>>>=m,l-=m,r.back+=m,r.length=y,0===g){r.mode=UH;break}if(32&g){r.back=-1,r.mode=TH;break}if(64&g){e.msg="invalid literal/length code",r.mode=VH;break}r.extra=15&g,r.mode=PH;case PH:if(r.extra){for(I=r.extra;l<I;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=MH;case MH:for(;g=(A=r.distcode[c&(1<<r.distbits)-1])>>>16&255,y=65535&A,!((m=A>>>24)<=l);){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(0==(240&g)){for(E=m,b=g,_=y;g=(A=r.distcode[_+((c&(1<<E+b)-1)>>E)])>>>16&255,y=65535&A,!(E+(m=A>>>24)<=l);){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}c>>>=E,l-=E,r.back+=E}if(c>>>=m,l-=m,r.back+=m,64&g){e.msg="invalid distance code",r.mode=VH;break}r.offset=y,r.extra=15&g,r.mode=DH;case DH:if(r.extra){for(I=r.extra;l<I;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,l-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=VH;break}r.mode=LH;case LH:if(0===u)break e;if(p=d-u,r.offset>p){if((p=r.offset-p)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=VH;break}p>r.wnext?(p-=r.wnext,h=r.wsize-p):h=r.wnext-p,p>r.length&&(p=r.length),v=r.window}else v=i,h=o-r.offset,p=r.length;p>u&&(p=u),u-=p,r.length-=p;do{i[o++]=v[h++]}while(--p);0===r.length&&(r.mode=kH);break;case UH:if(0===u)break e;i[o++]=r.length,u--,r.mode=kH;break;case jH:if(r.wrap){for(;l<32;){if(0===s)break e;s--,c|=n[a++]<<l,l+=8}if(d-=u,e.total_out+=d,r.total+=d,d&&(e.adler=r.check=r.flags?Lq(r.check,i,d,o-d):Mq(r.check,i,d,o-d)),d=u,(r.flags?c:zH(c))!==r.check){e.msg="incorrect data check",r.mode=VH;break}c=0,l=0}r.mode=FH;case FH:if(r.wrap&&r.flags){for(;l<32;){if(0===s)break e;s--,c+=n[a++]<<l,l+=8}if(c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=VH;break}c=0,l=0}r.mode=BH;case BH:T=aH;break e;case VH:T=uH;break e;case GH:return cH;case qH:default:return sH}return e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,r.hold=c,r.bits=l,(r.wsize||d!==e.avail_out&&r.mode<VH&&(r.mode<jH||t!==tH))&&function(e,t,r,n){var i,a=e.state;null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new OG(a.wsize)),n>=a.wsize?(xG(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>n&&(i=n),xG(a.window,t,r-n,i,a.wnext),(n-=i)?(xG(a.window,t,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i)))}(e,e.output,e.next_out,d-e.avail_out),f-=e.avail_in,d-=e.avail_out,e.total_in+=f,e.total_out+=d,r.total+=d,r.wrap&&d&&(e.adler=r.check=r.flags?Lq(r.check,i,d,e.next_out-d):Mq(r.check,i,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===TH?128:0)+(r.mode===NH||r.mode===AH?256:0),(0===f&&0===d||t===tH)&&T===iH&&(T=lH),T}var tz,rz=1,nz=7;function iz(e){if(e<rz||e>nz)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function az(e,t){for(var r=0;r<e.length;r++)this[t+r]=e[r]}iz.prototype.init=function(e,t,r,n,i){var a;switch(this.windowBits=e,this.level=t,this.memLevel=r,this.strategy=n,3!==this.mode&&4!==this.mode||(this.windowBits+=16),this.mode===nz&&(this.windowBits+=32),5!==this.mode&&6!==this.mode||(this.windowBits=-this.windowBits),this.strm=new CG,this.mode){case rz:case 3:case 5:a=function(e,t,r,n,i,a){if(!e)return Hq;var o=1;if(t===Yq&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>tK||r!==eK||n<8||n>15||t<0||t>9||a<0||a>Jq)return TK(e,Hq);8===n&&(n=9);var s=new DK;return e.state=s,s.strm=e,s.wrap=o,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+sK-1)/sK),s.window=new OG(2*s.w_size),s.head=new RG(s.hash_size),s.prev=new RG(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new OG(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=a,s.method=r,LK(e)}(this.strm,this.level,8,this.windowBits,this.memLevel,this.strategy);break;case 2:case 4:case 6:case nz:a=XH(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}0===a?(this.write_in_progress=!1,this.init_done=!0):this._error(a)},iz.prototype.params=function(){throw new Error("deflateParams Not supported")},iz.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(0===this.mode)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},iz.prototype.write=function(e,t,r,n,i,a,o){this._writeCheck(),this.write_in_progress=!0;var s=this;return vu(function(){s.write_in_progress=!1;var u=s._write(e,t,r,n,i,a,o);s.callback(u[0],u[1]),s.pending_close&&s.close()}),this},iz.prototype.writeSync=function(e,t,r,n,i,a,o){return this._writeCheck(),this._write(e,t,r,n,i,a,o)},iz.prototype._write=function(e,t,r,n,i,a,o){if(this.write_in_progress=!0,0!==e&&1!==e&&2!==e&&3!==e&&4!==e&&5!==e)throw new Error("Invalid flush value");null==t&&(t=new ag(0),n=0,r=0),i._set?i.set=i._set:i.set=az;var s,u=this.strm;switch(u.avail_in=n,u.input=t,u.next_in=r,u.avail_out=o,u.output=i,u.next_out=a,this.mode){case rz:case 3:case 5:s=UK(u,e);break;case nz:case 2:case 4:case 6:s=ez(u,e);break;default:throw new Error("Unknown mode "+this.mode)}return 1!==s&&0!==s&&this._error(s),this.write_in_progress=!1,[u.avail_in,u.avail_out]},iz.prototype.close=function(){var e,t;this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,this.mode===rz||3===this.mode||5===this.mode?(e=this.strm)&&e.state&&((t=e.state.status)!==fK&&t!==dK&&t!==pK&&t!==hK&&t!==vK&&t!==mK&&t!==gK?TK(e,Hq):(e.state=null,t===mK&&TK(e,zq))):function(e){if(!e||!e.state)return sH;var t=e.state;t.window&&(t.window=null),e.state=null}(this.strm),this.mode=0)},iz.prototype.reset=function(){switch(this.mode){case rz:case 5:tz=LK(this.strm);break;case 2:case 6:tz=YH(this.strm)}0!==tz&&this._error(tz)},iz.prototype._error=function(e){this.onerror(AG[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()};var oz=Object.freeze({NONE:0,DEFLATE:rz,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:nz,Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8,Zlib:iz});var sz={};Object.keys(oz).forEach(function(e){sz[e]=oz[e]}),sz.Z_MIN_WINDOWBITS=8,sz.Z_MAX_WINDOWBITS=15,sz.Z_DEFAULT_WINDOWBITS=15,sz.Z_MIN_CHUNK=64,sz.Z_MAX_CHUNK=1/0,sz.Z_DEFAULT_CHUNK=16384,sz.Z_MIN_MEMLEVEL=1,sz.Z_MAX_MEMLEVEL=9,sz.Z_DEFAULT_MEMLEVEL=8,sz.Z_MIN_LEVEL=-1,sz.Z_MAX_LEVEL=9,sz.Z_DEFAULT_LEVEL=sz.Z_DEFAULT_COMPRESSION;var uz={Z_OK:sz.Z_OK,Z_STREAM_END:sz.Z_STREAM_END,Z_NEED_DICT:sz.Z_NEED_DICT,Z_ERRNO:sz.Z_ERRNO,Z_STREAM_ERROR:sz.Z_STREAM_ERROR,Z_DATA_ERROR:sz.Z_DATA_ERROR,Z_MEM_ERROR:sz.Z_MEM_ERROR,Z_BUF_ERROR:sz.Z_BUF_ERROR,Z_VERSION_ERROR:sz.Z_VERSION_ERROR};function cz(e,t,r){var n=[],i=0;function a(){for(var t;null!==(t=e.read());)n.push(t),i+=t.length;e.once("readable",a)}function o(){var t=ag.concat(n,i);n=[],r(null,t),e.close()}e.on("error",function(t){e.removeListener("end",o),e.removeListener("readable",a),r(t)}),e.on("end",o),e.end(t),a()}function lz(e,t){if("string"==typeof t&&(t=new ag(t)),!Vg(t))throw new TypeError("Not a string or buffer");var r=sz.Z_FINISH;return e._processChunk(t,r)}function fz(e){if(!(this instanceof fz))return new fz(e);yz.call(this,e,sz.DEFLATE)}function dz(e){if(!(this instanceof dz))return new dz(e);yz.call(this,e,sz.INFLATE)}function pz(e){if(!(this instanceof pz))return new pz(e);yz.call(this,e,sz.GZIP)}function hz(e){if(!(this instanceof hz))return new hz(e);yz.call(this,e,sz.GUNZIP)}function vz(e){if(!(this instanceof vz))return new vz(e);yz.call(this,e,sz.DEFLATERAW)}function mz(e){if(!(this instanceof mz))return new mz(e);yz.call(this,e,sz.INFLATERAW)}function gz(e){if(!(this instanceof gz))return new gz(e);yz.call(this,e,sz.UNZIP)}function yz(e,t){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||sz.Z_DEFAULT_CHUNK,SG.call(this,e),e.flush&&e.flush!==sz.Z_NO_FLUSH&&e.flush!==sz.Z_PARTIAL_FLUSH&&e.flush!==sz.Z_SYNC_FLUSH&&e.flush!==sz.Z_FULL_FLUSH&&e.flush!==sz.Z_FINISH&&e.flush!==sz.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||sz.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<sz.Z_MIN_CHUNK||e.chunkSize>sz.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<sz.Z_MIN_WINDOWBITS||e.windowBits>sz.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<sz.Z_MIN_LEVEL||e.level>sz.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<sz.Z_MIN_MEMLEVEL||e.memLevel>sz.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=sz.Z_FILTERED&&e.strategy!=sz.Z_HUFFMAN_ONLY&&e.strategy!=sz.Z_RLE&&e.strategy!=sz.Z_FIXED&&e.strategy!=sz.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!Vg(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new sz.Zlib(t);var r=this;this._hadError=!1,this._binding.onerror=function(e,t){r._binding=null,r._hadError=!0;var n=new Error(e);n.errno=t,n.code=sz.codes[t],r.emit("error",n)};var n=sz.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(n=e.level);var i=sz.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(i=e.strategy),this._binding.init(e.windowBits||sz.Z_DEFAULT_WINDOWBITS,n,e.memLevel||sz.Z_DEFAULT_MEMLEVEL,i,e.dictionary),this._buffer=new ag(this._chunkSize),this._offset=0,this._closed=!1,this._level=n,this._strategy=i,this.once("end",this.close)}Object.keys(uz).forEach(function(e){uz[uz[e]]=e}),qg(yz,SG),yz.prototype.params=function(e,t,r){if(e<sz.Z_MIN_LEVEL||e>sz.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=sz.Z_FILTERED&&t!=sz.Z_HUFFMAN_ONLY&&t!=sz.Z_RLE&&t!=sz.Z_FIXED&&t!=sz.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var n=this;this.flush(sz.Z_SYNC_FLUSH,function(){n._binding.params(e,t),n._hadError||(n._level=e,n._strategy=t,r&&r())})}else vu(r)},yz.prototype.reset=function(){return this._binding.reset()},yz.prototype._flush=function(e){this._transform(new ag(0),"",e)},yz.prototype.flush=function(e,t){var r=this._writableState;if(("function"==typeof e||void 0===e&&!t)&&(t=e,e=sz.Z_FULL_FLUSH),r.ended)t&&vu(t);else if(r.ending)t&&this.once("end",t);else if(r.needDrain){var n=this;this.once("drain",function(){n.flush(t)})}else this._flushFlag=e,this.write(new ag(0),"",t)},yz.prototype.close=function(e){if(e&&vu(e),!this._closed){this._closed=!0,this._binding.close();var t=this;vu(function(){t.emit("close")})}},yz.prototype._transform=function(e,t,r){var n,i=this._writableState,a=(i.ending||i.ended)&&(!e||i.length===e.length);if(null===!e&&!Vg(e))return r(new Error("invalid input"));a?n=sz.Z_FINISH:(n=this._flushFlag,e.length>=i.length&&(this._flushFlag=this._opts.flush||sz.Z_NO_FLUSH)),this._processChunk(e,n,r)},yz.prototype._processChunk=function(e,t,r){var n=e&&e.length,i=this._chunkSize-this._offset,a=0,o=this,s="function"==typeof r;if(!s){var u,c=[],l=0;this.on("error",function(e){u=e});do{var f=this._binding.writeSync(t,e,a,n,this._buffer,this._offset,i)}while(!this._hadError&&h(f[0],f[1]));if(this._hadError)throw u;var d=ag.concat(c,l);return this.close(),d}var p=this._binding.write(t,e,a,n,this._buffer,this._offset,i);function h(u,f){if(!o._hadError){var d=i-f;if(function(e,t){if(!e)throw new Error(t)}(d>=0,"have should not go down"),d>0){var p=o._buffer.slice(o._offset,o._offset+d);o._offset+=d,s?o.push(p):(c.push(p),l+=p.length)}if((0===f||o._offset>=o._chunkSize)&&(i=o._chunkSize,o._offset=0,o._buffer=new ag(o._chunkSize)),0===f){if(a+=n-u,n=u,!s)return!0;var v=o._binding.write(t,e,a,n,o._buffer,o._offset,o._chunkSize);return v.callback=h,void(v.buffer=e)}if(!s)return!1;r()}}p.buffer=e,p.callback=h},qg(fz,yz),qg(dz,yz),qg(pz,yz),qg(hz,yz),qg(vz,yz),qg(mz,yz),qg(gz,yz);var Ez={codes:uz,createDeflate:function(e){return new fz(e)},createInflate:function(e){return new dz(e)},createDeflateRaw:function(e){return new vz(e)},createInflateRaw:function(e){return new mz(e)},createGzip:function(e){return new pz(e)},createGunzip:function(e){return new hz(e)},createUnzip:function(e){return new gz(e)},deflate:function(e,t,r){return"function"==typeof t&&(r=t,t={}),cz(new fz(t),e,r)},deflateSync:function(e,t){return lz(new fz(t),e)},gzip:function(e,t,r){return"function"==typeof t&&(r=t,t={}),cz(new pz(t),e,r)},gzipSync:function(e,t){return lz(new pz(t),e)},deflateRaw:function(e,t,r){return"function"==typeof t&&(r=t,t={}),cz(new vz(t),e,r)},deflateRawSync:function(e,t){return lz(new vz(t),e)},unzip:function(e,t,r){return"function"==typeof t&&(r=t,t={}),cz(new gz(t),e,r)},unzipSync:function(e,t){return lz(new gz(t),e)},inflate:function(e,t,r){return"function"==typeof t&&(r=t,t={}),cz(new dz(t),e,r)},inflateSync:function(e,t){return lz(new dz(t),e)},gunzip:function(e,t,r){return"function"==typeof t&&(r=t,t={}),cz(new hz(t),e,r)},gunzipSync:function(e,t){return lz(new hz(t),e)},inflateRaw:function(e,t,r){return"function"==typeof t&&(r=t,t={}),cz(new mz(t),e,r)},inflateRawSync:function(e,t){return lz(new mz(t),e)},Deflate:fz,Inflate:dz,Gzip:pz,Gunzip:hz,DeflateRaw:vz,InflateRaw:mz,Unzip:gz,Zlib:yz},bz={zip:!1,format:"general",contentAlg:"A128CBC-HS256",protect:"*"},_z=DV,Sz=MV;function Tz(e,t,r){var n=!1,i=e.format||"general",a=!!e.protectAll,o=new ag(0);Object.defineProperty(this,"zip",{get:function(){return t.zip||""},enumerable:!0}),Object.defineProperty(this,"compact",{get:function(){return"compact"===i},enumerable:!0}),Object.defineProperty(this,"format",{get:function(){return i},enumerable:!0}),Object.defineProperty(this,"protected",{get:function(){return PN(e.protect)},enumerable:!0}),Object.defineProperty(this,"header",{get:function(){return PN(t)},enumerable:!0}),Object.defineProperty(this,"update",{value:function(e,t){if(n)throw new Error("already final");return null!=e&&(e=wD.asBuffer(e,t),o=o.length?ag.concat([o,e],o.length+e.length):e),this}}),Object.defineProperty(this,"final",{value:function(s,u){if(n)return Promise.reject(new Error("already final"));this.update(s,u),n=!0;var c,l=Promise.resolve({}),f=t.enc;l=(l=l.then(function(t){return e.cek&&(c=IV.asKey(e.cek)),t})).then(function(n){var i=Promise.all(r);return i=(i=i.then(function(r){var n=1===r.length;return r=r.map(function(r){return function(r,n){var i={};i=HD(i,t),i=HD(i,r.header);var a,o,s=r.key,u=i.alg;return 0===i.alg.indexOf("ECDH-ES")?(a=s.keystore.temp(),o=r.epk?Promise.resolve(r.epk).then(function(e){r.header.epk=e.toJSON(!1,["kid"]),i.epk=e.toObject(!0,["kid"])}):a.generate("EC",s.get("crv")).then(function(e){r.header.epk=e.toJSON(!1,["kid"]),i.epk=e.toObject(!0,["kid"])})):o=Promise.resolve(),o=(o=o.then(function(){var r,a;return"dir"===u&&n?a=(c=Promise.resolve(s)).then(function(e){return f||(i.enc=t.enc=f=e.algorithms(IV.MODE_ENCRYPT)[0]),{once:!0,direct:!0}}):(c||(f||(i.enc=t.enc=f=e.contentAlg),c=_z(f)),a=(a=c.then(function(e){return r=e.get("k",!0),s})).then(function(e){return e.wrap(u,r,i)})),a})).then(function(e){if(e.once&&!n)return Promise.reject(new Error("cannot use 'alg':'"+u+"' with multiple recipients"));var t,i={};return e.data&&(t=e.data,t=wD.base64url.encode(t)),e.direct&&t?c=IV.asKey({kty:"oct",k:t}):t&&(i.encrypted_key=t),r.header&&Object.keys(r.header).length&&(i.header=PN(r.header||{})),e.header&&(i.header=HD(i.header||{},e.header)),i})}(r,n)}),Promise.all(r)})).then(function(e){return n.recipients=e.filter(function(e){return!!e}),n})});var d={};switch(l=(l=(l=l.then(function(r){var n,o,s,u;return s=PN(t),a&&1===r.recipients.length||"compact"===i?(n=HD(r.recipients[0].header||{},s),o=Object.keys(n).length,s=void 0,u=0,delete r.recipients[0].header,0===Object.keys(r.recipients[0]).length&&r.recipients.splice(0,1)):(n={},o=0,u=Object.keys(s).length,e.protect.forEach(function(e){e in s&&(n[e]=s[e],o++,delete s[e],u--)})),r.recipients&&0!==r.recipients.length||delete r.recipients,s&&u>0&&(d=HD(d,s),r.unprotected=s),n&&o>0&&(d=HD(d,n),n=JSON.stringify(n),r.protected=wD.base64url.encode(n,"utf8")),r})).then(function(e){var t=o;return d.zip?"DEF"===d.zip?new Promise(function(r,n){Ez.deflateRaw(new ag(t,"binary"),function(t,i){t?n(t):(e.plaintext=i,r(e))})}):Promise.reject(new Error("unsupported 'zip' mode")):(e.plaintext=t,e)})).then(function(t){d.adata=t.protected,"aad"in e&&null!=e.aad&&(d.adata+="."+e.aad,d.adata=new ag(d.adata,"utf8"));var r=e.iv||wD.randomBytes(Cj.NONCELENGTH[f]/8);"string"==typeof r&&(r=wD.base64url.decode(r)),d.iv=r,"recipients"in t&&1===t.recipients.length&&(d.kdata=t.recipients[0].encrypted_key),"epu"in e&&null!=e.epu&&(d.epu=e.epu),"epv"in e&&null!=e.epv&&(d.epv=e.epv);var n=t.plaintext;return delete t.plaintext,c.then(function(i){var a=i.encrypt(f,n,d);return a=a.then(function(n){return t.iv=wD.base64url.encode(r,"binary"),"aad"in e&&null!=e.aad&&(t.aad=e.aad),t.ciphertext=wD.base64url.encode(n.data,"binary"),t.tag=wD.base64url.encode(n.tag,"binary"),t})})}),i){case"compact":l=l.then(function(e){var t=new Array(5);return t[0]=e.protected,e.recipients&&e.recipients[0]&&(t[1]=e.recipients[0].encrypted_key),t[2]=e.iv,t[3]=e.ciphertext,t[4]=e.tag,t=t.join(".")});break;case"flattened":l=l.then(function(e){var t={},r=e.recipients&&e.recipients[0];return e.protected&&(t.protected=e.protected),e.unprotected&&(t.unprotected=e.unprotected),["header","encrypted_key"].forEach(function(e){r&&e in r&&(t[e]=r[e])}),e.aad&&(t.aad=e.aad),t.iv=e.iv,t.ciphertext=e.ciphertext,t.tag=e.tag,t})}return l}})}var wz={algorithms:"*"};function Iz(e,t){var r,n;if(IV.isKey(e))n=(r=e).keystore;else{if(!IV.isKeyStore(e))throw new TypeError("Keystore must be provided");n=e}t=$k(wz,t),Object.defineProperty(this,"decrypt",{value:function(e,i){var a=(i=$k({},t,i||{})).handlers||{},o=Object.keys(a),s=new RV(i.algorithms);if("string"==typeof e)e={protected:(e=e.split("."))[0],recipients:[{encrypted_key:e[1]}],iv:e[2],ciphertext:e[3],tag:e[4]};else if(!e||"object"!=typeof e)throw new Error("invalid input");"encrypted_key"in e&&(e.recipients=[{encrypted_key:e.encrypted_key}]);var u,c,l,f,d,p=e.recipients||[{}];return Promise.resolve(p).then(function(t){if(e.protected){c=SD.decode(e.protected).toString("utf8");var r=(c=JSON.parse(c)).crit;if(r){if(!Array.isArray(r))return Promise.reject(new Error("Invalid 'crit' header"));for(var n=0;r.length>n;n++)if(-1===o.indexOf(r[n]))return Promise.reject(new Error("Critical extension is not supported: "+r[n]))}u=c,c=Object.keys(c)}else u={},c=[];return u=$k(e.unprotected||{},u),t=t.map(function(e){var t=Promise.resolve(),r=e.header||{};return r=$k(r,u),e.header=r,e.protected=c,s.match(r.alg)||(t=t.then(function(){return Promise.reject(new Error("Algorithm not allowed: "+r.alg))})),s.match(r.enc)||(t=t.then(function(){return Promise.reject(new Error("Algorithm not allowed: "+r.enc))})),r.epk&&(t=(t=t.then(function(){return IV.asKey(r.epk)})).then(function(e){r.epk=e.toObject(!1)})),t.then(function(){return e})}),Promise.all(t)}).then(function(e){var t={};return new Promise(function(i,a){var o=function(){var s=e.shift();if(s){var u=Promise.resolve(s);(u=(u=u.then(function(e){var t=d=e.encrypted_key||"";return t=SD.decode(t),(l=r||n.get({use:"enc",alg:e.header.alg,kid:e.header.kid}))?l.unwrap(e.header.alg,t,e.header):Promise.reject()})).then(function(e){f={kty:"oct",k:SD.encode(e)},f=IV.asKey(f),t.key=l,t.header=s.header,t.protected=s.protected,i(t)})).catch(o)}else a(new Error("no key found"))};o()})}).then(function(t){return t.iv=e.iv,t.tag=e.tag,t.ciphertext=e.ciphertext,t}).then(function(e){var t=[];return o.forEach(function(r){var n;"function"==typeof(r=a[r])?n=r(e):"object"==typeof r&&"function"==typeof r.prepare&&(n=r.prepare(e)),n&&t.push(Promise.resolve(n))}),Promise.all(t).then(function(){return e})}).then(function(e){return Vg(e.ciphertext)||(e.ciphertext=SD.decode(e.ciphertext)),e}).then(function(t){var r=e.protected;"aad"in e&&null!=e.aad&&(r+="."+e.aad);var n={iv:t.iv,adata:r,tag:t.tag,kdata:d,epu:t.epu,epv:t.epv},i=t.ciphertext;return delete t.iv,delete t.tag,delete t.ciphertext,f.then(function(e){return e.decrypt(t.header.enc,i,n).then(function(e){return t.payload=t.plaintext=e,t})})}).then(function(e){return"DEF"===e.header.zip?new Promise(function(t,r){Ez.inflateRaw(new ag(e.plaintext),function(n,i){n?r(n):(e.payload=e.plaintext=i,t(e))})}):e}).then(function(e){var t=[];return o.forEach(function(r){var n;"object"==typeof(r=a[r])&&"function"==typeof r.complete&&(n=r.complete(e)),n&&t.push(Promise.resolve(n))}),Promise.all(t).then(function(){return e})})}})}var Az={createEncrypt:{encrypter:Tz,createEncrypt:function(e,t){var r=e,n=1,i=t;if(0===arguments.length)throw new Error("at least one recipient must be provided");1===arguments.length?(i=e,n=0,r={}):IV.isKey(e)||e&&"kty"in e||e&&"key"in e&&(IV.isKey(e.key)||"kty"in e.key)?(i=e,n=0,r={}):r=PN(e),Array.isArray(i)||(i=Sz(arguments,n)),r=HD(PN(bz),r);var a=PN(r.fields||{});switch(r.zip&&(a.zip="boolean"==typeof r.zip?!!r.zip&&"DEF":r.zip),r.format=(r.compact?"compact":r.format)||"general",r.format){case"compact":if("aad"in e)throw new Error("additional authenticated data cannot be used for compact serialization");case"flattened":if(i.length>1)throw new Error("too many recipients for compact serialization")}var o=!1;if("compact"===r.format||"*"===r.protect)o=!0,r.protect=Object.keys(a).concat("enc");else if("string"==typeof r.protect)r.protect=[r.protect];else if(Array.isArray(r.protect))r.protect=r.protect.concat();else{if(r.protect)throw new Error("protect must be a list of fields");r.protect=[]}if(o&&1<i.length)throw new Error("too many recipients to protect all header parameters");return i=i.map(function(e,t){var r;return r=e&&"kty"in e?(r=IV.asKey(e)).then(function(e){return{key:e}}):e?(r=IV.asKey(e.key)).then(function(t){return{header:e.header,reference:e.reference,key:t}}):Promise.reject(new Error("missing key for recipient "+t)),e.epk&&(r=r.then(function(t){return IV.asKey(e.epk).then(function(e){return t.epk=e,t})})),r=r.then(function(e){var t=e.key,r=e.header||{};e.header=r;var n={};n=HD(n,a),(n=HD(n,e.header)).alg||(n.alg=t.algorithms(IV.MODE_WRAP)[0]),r.alg=n.alg;var i,o=e.reference;if(delete e.reference,void 0===o?o=(o=["kid","jku","x5c","x5t","x5u"].some(function(e){return e in r}))?null:"kid":"boolean"==typeof o&&(o=o?"kid":null),o)if(i=t.toJSON(),"jwk"===o){if("oct"===t.kty)return Promise.reject(new Error("cannot embed key"));r.jwk=i}else o in i&&(r[o]=i[o]);return e=Object.freeze(e)})}),new Tz({aad:"aad"in r?wD.base64url.encode(r.aad||""):null,contentAlg:r.contentAlg,format:r.format,protect:r.protect,cek:r.cek,iv:r.iv,protectAll:o},a,i)}}.createEncrypt,createDecrypt:{decrypter:Iz,createDecrypt:function(e,t){return new Iz(e,t)}}.createDecrypt},Cz={JWE:Az,JWS:PV,util:wD};var xz=function(e){var t,r,n,i=e.split(".");if(3===i.length)t="JWS",r=function(t,r){return Cz.JWS.createVerify(t).verify(e,r)};else{if(5!==i.length)throw new TypeError("invalid jose serialization");t="JWE",r=function(t,r){return Cz.JWE.createDecrypt(t).decrypt(e,r)}}return n=Cz.util.base64url.decode(i[0],"utf8"),n=JSON.parse(n),{type:t,format:"compact",input:e,header:n,perform:r}},Oz={JWE:Az,JWS:PV,util:wD};var Rz=function(e){var t,r,n;if("signatures"in e||"signature"in e)t="JWS",r=function(t,r){return Oz.JWS.createVerify(t).verify(e,r)},n=(n=e.signatures||[{protected:e.protected,header:e.header,signature:e.signature}]).map(function(e){var t,r={};return e.header&&(r=$k(r,e.header)),e.protected&&(t=e.protected,t=Oz.util.base64url.decode(t,"utf8"),t=JSON.parse(t),r=$k(r,t)),r});else if("ciphertext"in e){t="JWE",r=function(t,r){return Oz.JWE.createDecrypt(t).decrypt(e,r)};var i={};e.protected&&(i.protected=e.protected,i.protected=Oz.util.base64url.decode(i.protected,"utf8"),i.protected=JSON.parse(i.protected)),e.unprotected&&(i.unprotected=e.unprotected),n=(n=e.recipients||[{}]).map(function(e){var t={};return e.header&&(t=$k(t,e.header)),i.unprotected&&(t=$k(t,i.unprotected)),i.protected&&(t=$k(t,i.protected)),t})}return{type:t,format:"json",input:e,all:n,perform:r}},Nz=n(function(e){var t=e.exports=function(e){if(Vg(e))return xz(e.toString("ascii"));if("string"==typeof e)return xz(e);if(e)return Rz(e);throw new TypeError("invalid input")};t.compact=xz,t.json=Rz});"undefined"==typeof Promise&&kN.polyfill();var kz={JWA:qB,JWE:Az,JWK:IV,JWS:PV,util:wD,parse:Nz,canYouSee:PV.createVerify};var Pz=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t};var Mz=function(e,t){for(var r=-1,n=e.length;++r<n&&!1!==t(e[r],r,e););return e};var Dz=function(e,t,r){r||(r={});for(var n=-1,i=t.length;++n<i;){var a=t[n];r[a]=e[a]}return r},Lz="[object Function]",Uz=/^\[object .+?Constructor\]$/;var jz=Object.prototype,Fz=Function.prototype.toString,Bz=jz.hasOwnProperty,Vz=jz.toString,Gz=RegExp("^"+Fz.call(Bz).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var qz=function(e,t){var r=null==e?void 0:e[t];return function(e){return null!=e&&(function(e){return function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)&&Vz.call(e)==Lz}(e)?Gz.test(Fz.call(e)):function(e){return!!e&&"object"==typeof e}(e)&&Uz.test(e))}(r)?r:void 0},Kz=9007199254740991,Hz="[object Arguments]",zz="[object Function]",Wz="[object GeneratorFunction]",Yz=Object.prototype,Xz=Yz.hasOwnProperty,$z=Yz.toString,Qz=Yz.propertyIsEnumerable;var Jz=function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Kz}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?$z.call(e):"";return t==zz||t==Wz}(e)}(e)}(e)&&Xz.call(e,"callee")&&(!Qz.call(e,"callee")||$z.call(e)==Hz)},Zz="[object Function]",eW=/^\[object .+?Constructor\]$/;function tW(e){return!!e&&"object"==typeof e}var rW=Object.prototype,nW=Function.prototype.toString,iW=rW.hasOwnProperty,aW=rW.toString,oW=RegExp("^"+nW.call(iW).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sW=function(e,t){var r=null==e?void 0:e[t];return function(e){if(null==e)return!1;if(function(e){return function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)&&aW.call(e)==Zz}(e))return oW.test(nW.call(e));return tW(e)&&eW.test(e)}(r)?r:void 0}(Array,"isArray"),uW=9007199254740991;var cW=sW||function(e){return tW(e)&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=uW}(e.length)&&"[object Array]"==aW.call(e)},lW=/^\d+$/,fW=Object.prototype.hasOwnProperty,dW=qz(Object,"keys"),pW=9007199254740991;var hW=function(e){return function(t){return null==t?void 0:t[e]}}("length");function vW(e,t){return e="number"==typeof e||lW.test(e)?+e:-1,t=null==t?pW:t,e>-1&&e%1==0&&e<t}function mW(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=pW}function gW(e){for(var t=function(e){if(null==e)return[];yW(e)||(e=Object(e));var t=e.length;t=t&&mW(t)&&(cW(e)||Jz(e))&&t||0;var r=e.constructor,n=-1,i="function"==typeof r&&r.prototype===e,a=Array(t),o=t>0;for(;++n<t;)a[n]=n+"";for(var s in e)o&&vW(s,t)||"constructor"==s&&(i||!fW.call(e,s))||a.push(s);return a}(e),r=t.length,n=r&&e.length,i=!!n&&mW(n)&&(cW(e)||Jz(e)),a=-1,o=[];++a<r;){var s=t[a];(i&&vW(s,n)||fW.call(e,s))&&o.push(s)}return o}function yW(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var EW=dW?function(e){var t,r=null==e?void 0:e.constructor;return"function"==typeof r&&r.prototype===e||"function"!=typeof e&&(null!=(t=e)&&mW(hW(t)))?gW(e):yW(e)?dW(e):[]}:gW;var bW,_W=function(e,t){return null==t?e:Dz(t,EW(t),e)};var SW=function(e,t,r){for(var n=-1,i=Object(e),a=r(e),o=a.length;o--;){var s=a[bW?o:++n];if(!1===t(i[s],s,i))break}return e},TW="[object Arguments]",wW="[object Boolean]",IW="[object Date]",AW="[object Function]",CW="[object Number]",xW="[object Object]",OW="[object RegExp]",RW="[object String]",NW="[object ArrayBuffer]",kW="[object Float32Array]",PW="[object Float64Array]",MW="[object Int8Array]",DW="[object Int16Array]",LW="[object Int32Array]",UW="[object Uint8Array]",jW="[object Uint8ClampedArray]",FW="[object Uint16Array]",BW="[object Uint32Array]",VW=/\w*$/,GW={};GW[TW]=GW["[object Array]"]=GW[NW]=GW[wW]=GW[IW]=GW[kW]=GW[PW]=GW[MW]=GW[DW]=GW[LW]=GW[CW]=GW[xW]=GW[OW]=GW[RW]=GW[UW]=GW[jW]=GW[FW]=GW[BW]=!0,GW["[object Error]"]=GW[AW]=GW["[object Map]"]=GW["[object Set]"]=GW["[object WeakMap]"]=!1;var qW=Object.prototype,KW=qW.hasOwnProperty,HW=qW.toString,zW=e.ArrayBuffer,WW=e.Uint8Array;function YW(e){var t=new zW(e.byteLength);return new WW(t).set(new WW(e)),t}var XW=function e(t,r,n,i,a,o,s){var u;if(n&&(u=a?n(t,i,a):n(t)),void 0!==u)return u;if(!function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(t))return t;var c=cW(t);if(c){if(u=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&KW.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(t),!r)return Pz(t,u)}else{var l=HW.call(t),f=l==AW;if(l!=xW&&l!=TW&&(!f||a))return GW[l]?function(e,t,r){var n=e.constructor;switch(t){case NW:return YW(e);case wW:case IW:return new n(+e);case kW:case PW:case MW:case DW:case LW:case UW:case jW:case FW:case BW:var i=e.buffer;return new n(r?YW(i):i,e.byteOffset,e.length);case CW:case RW:return new n(e);case OW:var a=new n(e.source,VW.exec(e));a.lastIndex=e.lastIndex}return a}(t,l,r):a?t:{};if(u=function(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}(f?{}:t),!r)return _W(u,t)}o||(o=[]),s||(s=[]);for(var d=o.length;d--;)if(o[d]==t)return s[d];return o.push(t),s.push(u),(c?Mz:function(e,t){return SW(e,t,EW)})(t,function(i,a){u[a]=e(i,r,n,a,t,o,s)}),u};function $W(e){return e}var QW=function(e,t,r){if("function"!=typeof e)return $W;if(void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,a){return e.call(t,r,n,i,a)};case 5:return function(r,n,i,a,o){return e.call(t,r,n,i,a,o)}}return function(){return e.apply(t,arguments)}},JW=/^\d+$/,ZW=9007199254740991;var eY=function(e){return function(t){return null==t?void 0:t[e]}}("length");function tY(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=ZW}(eY(e))}var rY=function(e,t,r){if(!function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(r))return!1;var n=typeof t;if("number"==n?tY(r)&&function(e,t){return e="number"==typeof e||JW.test(e)?+e:-1,t=null==t?ZW:t,e>-1&&e%1==0&&e<t}(t,r.length):"string"==n&&t in r){var i=r[t];return e==e?e===i:i!=i}return!1};var nY=function(e,t,r,n){return t&&"boolean"!=typeof t&&rY(e,t,r)?t=!1:"function"==typeof t&&(n=r,r=t,t=!1),"function"==typeof r?XW(e,t,QW(r,n,3)):XW(e,t)};function iY(e){e.loc=e.loc||void 0,e.tag=e.tag||void 0,Object.defineProperty(this,"enc",{get:function(){return e.enc},enumerable:!0}),Object.defineProperty(this,"key",{get:function(){return e.key},enumerable:!0}),Object.defineProperty(this,"iv",{get:function(){return e.iv},enumerable:!0}),Object.defineProperty(this,"aad",{get:function(){return e.aad},enumerable:!0}),Object.defineProperty(this,"loc",{get:function(){return e.loc},set:function(t){e.loc=t},enumerable:!0}),Object.defineProperty(this,"tag",{get:function(){return e.tag},enumerable:!0}),Object.defineProperty(this,"toJSON",{value:function(){var t=e.key.get("k",!0),r={};return r.enc=e.enc,r.key=kz.util.base64url.encode(t),r.iv=kz.util.base64url.encode(e.iv),r.aad=e.aad,e.loc&&(r.loc=e.loc),e.tag&&(r.tag=kz.util.base64url.encode(e.tag)),r}}),Object.defineProperty(this,"toJWE",{value:function(t){var r=this;return kz.JWK.asKey(t).then(function(t){var n={header:{alg:"dir"},key:t,reference:!1},i={compact:!0,contentAlg:e.enc},a=r.toJSON();return a=JSON.stringify(a),kz.JWE.createEncrypt(i,n).final(a,"utf8")})}}),Object.defineProperty(this,"encrypt",{value:function(t){var r={iv:e.iv,adata:new ag(e.aad,"utf8")};return t=kz.util.asBuffer(t),e.key.encrypt(e.enc,t,r).then(function(t){var r=t.data;return e.tag=t.tag,r})}}),Object.defineProperty(this,"decrypt",{value:function(t){var r={iv:e.iv,adata:new ag(e.aad,"utf8"),mac:e.tag};return t=kz.util.asBuffer(t),e.key.decrypt(e.enc,t,r).then(function(e){return e})}})}var aY={create:function(){var e=kz.util.randomBytes(12),t=(new Date).toISOString(),r=kz.JWK.createKeyStore().generate("oct",256);return r=r.then(function(r){return new iY({enc:"A256GCM",key:r,iv:e,aad:t})})},fromJWE:function(e,t){return kz.JWK.asKey(e).then(function(e){return kz.JWE.createDecrypt(e).decrypt(t)}).then(function(e){return e=e.plaintext.toString("utf8"),e=JSON.parse(e),aY.fromJSON(e)})},fromJSON:function(e){var t=nY(e);return(e.key?kz.JWK.asKey({kty:"oct",k:e.key}):Promise.resolve()).then(function(e){return e&&(t.key=e),"iv"in t&&(t.iv=Vg(t.iv)?t.iv:kz.util.base64url.decode(t.iv)),"tag"in t&&(t.tag=Vg(t.tag)?t.tag:kz.util.base64url.decode(t.tag)),new iY(t)})}},oY=aY,sY=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=_f)&&r.__esModule?r:{default:r};t.default=function(e){if(e instanceof ArrayBuffer)return n.default.resolve(e);if(e.toArrayBuffer)return n.default.resolve(e.toArrayBuffer());if(e.buffer)return n.default.resolve(e.buffer);return new n.default(function(t,r){var n=new FileReader;n.onload=function(){t(new Uint8Array(this.result))},n.onerror=r,n.readAsArrayBuffer(e)})}});r(sY);var uY=function(e,t,r){return"function"==typeof t?XW(e,!0,QW(t,r,3)):XW(e,!0)};function cY(e){e=uY(e||{}),["createDate","expirationDate","bindDate"].forEach(function(t){t in e&&e[t]&&(e[t]="string"==typeof e[t]?new Date(Date.parse(e[t])):e[t])}),Object.defineProperty(this,"uri",{get:function(){return e.uri||""},enumerable:!0}),Object.defineProperty(this,"jwk",{get:function(){return e.jwk||void 0},enumerable:!0}),Object.defineProperty(this,"userId",{get:function(){return e.userId||""},enumerable:!0}),Object.defineProperty(this,"clientId",{get:function(){return e.clientId||""},enumerable:!0}),Object.defineProperty(this,"createDate",{get:function(){return e.createDate||void 0},enumerable:!0}),Object.defineProperty(this,"expirationDate",{get:function(){return e.expirationDate||void 0},enumerable:!0}),Object.defineProperty(this,"bindDate",{get:function(){return e.bindDate||void 0},enumerable:!0}),Object.defineProperty(this,"resourceUri",{get:function(){return e.resourceUri||""},enumerable:!0})}cY.prototype.asKey=function(){return this.jwk?kz.JWK.asKey(this.jwk):Promise.reject(new Error("'jwk' not set"))},cY.prototype.toJSON=function(){var e=this,t={};return Object.keys(this).forEach(function(r){var n=e[r];"function"!=typeof n&&void 0!==n&&(n instanceof Date&&(n=n.toISOString()),t[r]=uY(n))}),t},cY.fromObject=function(e){if(!e)throw new TypeError("representation required");return e instanceof cY?e:new cY(e)};var lY,fY=cY,dY=e.crypto||e.msCrypto;if(dY&&dY.getRandomValues){var pY=new Uint8Array(16);lY=function(){return dY.getRandomValues(pY),pY}}if(!lY){var hY=new Array(16);lY=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),hY[t]=e>>>((3&t)<<3)&255;return hY}}for(var vY=lY,mY=[],gY={},yY=0;yY<256;yY++)mY[yY]=(yY+256).toString(16).substr(1),gY[mY[yY]]=yY;function EY(e,t){var r=t||0,n=mY;return n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+"-"+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]+n[e[r++]]}var bY=vY(),_Y=[1|bY[0],bY[1],bY[2],bY[3],bY[4],bY[5]],SY=16383&(bY[6]<<8|bY[7]),TY=0,wY=0;function IY(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||vY)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var a=0;a<16;a++)t[n+a]=i[a];return t||EY(i)}var AY=IY;AY.v1=function(e,t,r){var n=t&&r||0,i=t||[],a=void 0!==(e=e||{}).clockseq?e.clockseq:SY,o=void 0!==e.msecs?e.msecs:(new Date).getTime(),s=void 0!==e.nsecs?e.nsecs:wY+1,u=o-TY+(s-wY)/1e4;if(u<0&&void 0===e.clockseq&&(a=a+1&16383),(u<0||o>TY)&&void 0===e.nsecs&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");TY=o,wY=s,SY=a;var c=(1e4*(268435455&(o+=122192928e5))+s)%4294967296;i[n++]=c>>>24&255,i[n++]=c>>>16&255,i[n++]=c>>>8&255,i[n++]=255&c;var l=o/4294967296*1e4&268435455;i[n++]=l>>>8&255,i[n++]=255&l,i[n++]=l>>>24&15|16,i[n++]=l>>>16&255,i[n++]=a>>>8|128,i[n++]=255&a;for(var f=e.node||_Y,d=0;d<6;d++)i[n+d]=f[d];return t||EY(i)},AY.v4=IY,AY.parse=function(e,t,r){var n=t&&r||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){i<16&&(t[n+i++]=gY[e])});i<16;)t[n+i++]=0;return t},AY.unparse=EY;var CY=AY,xY={KeyObject:fY};function OY(){var e=null,t={},r={};Object.defineProperty(this,"ephemeralKey",{get:function(){return e},set:function(t){e=t?xY.KeyObject.fromObject(t):null},enumerable:!0}),Object.defineProperty(this,"clientInfo",{get:function(){return t},set:function(e){t=e||{}},enumerable:!0}),Object.defineProperty(this,"serverInfo",{get:function(){return r},set:function(e){r=e||{}},enumerable:!0}),Object.defineProperty(this,"requestId",{value:function(){return CY()}})}OY.prototype.createECDHKey=function(){var e=this.clientInfo,t=kz.JWK.createKeyStore(),r=t.generate("EC","P-256");return r=r.then(function(t){var r=new Date,n={uri:"-internal/"+t.kid,jwk:t.toJSON(!0),userId:e&&e.credential&&e.credential.userId||"",clientId:e&&e.clientId||"",createDate:r,expirationDate:new Date(r.getTime()+36e5)};return new xY.KeyObject(n)})},OY.prototype.deriveEphemeralKey=function(e){var t=this.ephemeralKey;return t&&t.jwk&&"EC"===t.jwk.kty?(e=xY.KeyObject.fromObject(e),Promise.all([t.asKey(),e.asKey()]).then(function(e){var t=e[0],r={public:e[1].toObject()},n=t.toObject(!0);return kz.JWA.derive("ECDH-HKDF",n,r)}).then(function(t){var r=e.uri,n={uri:r,createDate:e.createDate,expirationDate:e.expirationDate,jwk:{kty:"oct",kid:r,alg:"A256GCM",k:kz.util.base64url.encode(t)}};return new xY.KeyObject(n)})):Promise.reject(new Error("invalid local ECDH key"))};var RY=OY;var NY=function(e,t,r,n){return t&&"boolean"!=typeof t&&rY(e,t,r)?t=!1:"function"==typeof t&&(n=r,r=t,t=!1),"function"==typeof r?XW(e,t,QW(r,n,3)):XW(e,t)};function kY(e){var t="";e=e&&NY(e)||{},Object.defineProperty(this,"wrapped",{get:function(){return t},set:function(e){t=String(e||"")},enumerable:!0}),Object.defineProperty(this,"body",{get:function(){return e},set:function(r){r=r&&NY(r)||{},"requestId"in e&&(r.requestId=e.requestId),"uri"in e&&(r.uri=e.uri),"method"in e&&(r.method=e.method),t="",e=r},enumerable:!0}),Object.defineProperty(this,"requestId",{get:function(){return e.requestId||""},set:function(t){t?e.requestId=t:delete e.requestId},enumerable:!0}),Object.defineProperty(this,"uri",{get:function(){return e.uri||""},set:function(t){t?e.uri=t:delete e.uri},enumerable:!0}),Object.defineProperty(this,"method",{get:function(){return e.method||""},set:function(t){t?e.method=t:delete e.method},enumerable:!0})}kY.prototype.wrap=function(e,t){t=t||{};var r=this;return this.requestId&&!t.requestId||(this.requestId=t.requestId||e.requestId()),this.body.client=e.clientInfo,(t.serverKey?kz.JWK.asKey(e.serverInfo.key):e.ephemeralKey.asKey()).then(function(e){var n=e,i={compact:!0,contentAlg:t.contentAlg||"A256GCM"};return kz.JWE.createEncrypt(i,n).final(JSON.stringify(r.body),"utf8")}).then(function(e){return r.wrapped=e,e})};var PY=kY;function MY(e){e=e||"";var t={};Object.defineProperty(this,"wrapped",{get:function(){return e},set:function(r){t={},e=String(r||"")},enumerable:!0}),Object.defineProperty(this,"body",{get:function(){return t},set:function(e){t=e&&NY(e)||{}},enumerable:!0}),Object.defineProperty(this,"status",{get:function(){return t.status||0},set:function(e){e=parseInt(e),isNaN(e)||(t.status=e)},enumerable:!0}),Object.defineProperty(this,"reason",{get:function(){return t.reason||""},set:function(e){t.reason=String(e||"")},enumerable:!0}),Object.defineProperty(this,"requestId",{get:function(){return t.requestId||""},set:function(e){t.requestId=String(e||"")},enumerable:!0})}MY.prototype.unwrap=function(e,t){t=t||{};var r,n=kz.JWK.createKeyStore(),i=[];(r=e.ephemeralKey&&e.ephemeralKey.jwk)&&i.push(n.add(r)),(r=e.serverInfo&&e.serverInfo.key)&&i.push(n.add(r));var a=this,o=Promise.all(i);return o=(o=o.then(function(){var e=a.wrapped;switch((e.match(/\./g)||[]).length){case 2:return kz.JWS.createVerify(n).verify(e);case 4:return kz.JWE.createDecrypt(n).decrypt(e);default:return Promise.reject(new Error("invalid wrapped"))}})).then(function(e){return e=(e.plaintext||e.payload).toString("utf8"),e=JSON.parse(e),a.body=e,e})};var DY={KeyObject:fY,Context:RY,Request:PY,Response:MY},LY=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DryError=t.KmsTimeoutError=t.KmsError=void 0;var r,n,i,a,o=p(Rf),s=p(wC),u=p(hT),c=p(zy),l=p($y),f=p(vT),d=p(mT);function p(e){return e&&e.__esModule?e:{default:e}}var h=t.KmsError=(n=r=function(e){function t(){return(0,c.default)(this,t),(0,f.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,l.default)(t,[{key:"parse",value:function(e){e=e.body||e,(0,s.default)(this,{body:{enumerable:!1,value:e},reason:{enumerable:!1,value:e.reason},requestId:{enumerable:!1,value:e.requestId},status:{enumerable:!1,value:e.status}});var t="string"==typeof e?e:e.reason;return t||(t=this.constructor.defaultMessage),e.status&&(t+="\nKMS_RESPONSE_STATUS: "+e.status),e.requestId&&(t+="\nKMS_REQUEST_ID: "+e.requestId),t}}]),t}(cI.Exception),r.defaultMessage="An unknown error occurred while communicating with the kms. This implies we received an error response without a body.",n);t.KmsTimeoutError=function(e){function t(){return(0,c.default)(this,t),(0,f.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,l.default)(t,[{key:"parse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.request,r=void 0===t?{}:t,n=e.timeout,i="The KMS did not respond within "+(n?n+" milliseconds":"a timely fashion");return r&&(r.method&&r.uri&&(i+="\nKMS_REQUEST: "+r.method+" "+r.uri),r.requestId&&(i+="\nKMS_REQUEST_ID: "+r.requestId)),i}}]),t}(h),t.DryError=(a=i=function(e){function t(){return(0,c.default)(this,t),(0,f.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,l.default)(t,[{key:"parse",value:function(e){(0,o.default)(XR.WebexHttpError.prototype.parse,this,[e._res]);var t=e._res.body.message,r=t.reason||t;return r||(r=this.constructor.defaultMessage),this.options.url?r+="\n"+this.options.method+" "+this.options.url:this.options.uri?r+="\n"+this.options.method+" "+this.options.uri:r+="\n"+this.options.method+" "+this.options.service.toUpperCase()+"/"+this.options.resource,r+="\nWEBEX_TRACKING_ID: "+this.options.headers.trackingid,t.status&&(r+="\nKMS_RESPONSE_STATUS: "+t.status),t.requestId&&(r+="\nKMS_REQUEST_ID: "+t.requestId),(0,s.default)(this,{reason:{enumerable:!1,value:t.reason},requestId:{enumerable:!1,value:t.requestId},status:{enumerable:!1,value:t.status}}),r}}]),t}(XR.WebexHttpError),i.defaultMessage="An unknown error was received from a service that proxies to the KMS",a)});r(LY);LY.DryError,LY.KmsTimeoutError,LY.KmsError;var UY=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TIMEOUT_SYMBOL=void 0;var r=i(_f),n=i(ub);function i(e){return e&&e.__esModule?e:{default:e}}var a=t.TIMEOUT_SYMBOL=(0,n.default)("TIMEOUT_SYMBOL"),o=XR.Batcher.extend({namespace:"Encryption",processKmsMessageEvent:function(e){var t=this;return this.logger.info("kms-batcher: received kms message"),r.default.all(e.encryption.kmsMessages.map(function(e){return new r.default(function(r){"production"!==xu.env.NODE_ENV&&t.logger.info("kms-batcher:",e.body),r(t.acceptItem(e))})}))},prepareItem:function(e){var t=this;return this.getDeferredForRequest(e).then(function(r){var n=e[a];if(!n)throw new Error("timeout is required");var i=(0,hI.safeSetTimeout)(function(){t.logger.warn("kms: request timed out; request id: "+e.requestId+"; timeout: "+n),t.handleItemFailure(e,new LY.KmsTimeoutError({timeout:n,request:e}))},n);return r.promise.then(function(){return clearTimeout(i)}),r.promise.catch(function(){return clearTimeout(i)}),e})},prepareRequest:function(e){return this.webex.internal.encryption.kms._getKMSCluster().then(function(t){return{destination:t,kmsMessages:e.map(function(e){return e.wrapped})}})},submitHttpRequest:function(e){return this.logger.info("kms: batched-request-length",e.kmsMessages.length),this.webex.request({method:"POST",service:"encryption",resource:"/kms/messages",body:e})},handleHttpSuccess:function(){return r.default.resolve()},didItemFail:function(e){return r.default.resolve(e.status>=400)},handleItemSuccess:function(e){return this.getDeferredForResponse(e).then(function(t){t.resolve(e.body)})},handleItemFailure:function(e,t){return this.getDeferredForResponse(e).then(function(r){r.reject(t||new LY.KmsError(e.body))})},fingerprintRequest:function(e){return r.default.resolve(e.requestId)},fingerprintResponse:function(e){return r.default.resolve(e.requestId)}});t.default=o});r(UY);UY.TIMEOUT_SYMBOL;var jY=1e3,FY=60*jY,BY=60*FY,VY=24*BY,GY=7*VY,qY=365.25*VY,KY=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*qY;case"weeks":case"week":case"w":return r*GY;case"days":case"day":case"d":return r*VY;case"hours":case"hour":case"hrs":case"hr":case"h":return r*BY;case"minutes":case"minute":case"mins":case"min":case"m":return r*FY;case"seconds":case"second":case"secs":case"sec":case"s":return r*jY;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=VY)return HY(e,t,VY,"day");if(t>=BY)return HY(e,t,BY,"hour");if(t>=FY)return HY(e,t,FY,"minute");if(t>=jY)return HY(e,t,jY,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=VY)return Math.round(e/VY)+"d";if(t>=BY)return Math.round(e/BY)+"h";if(t>=FY)return Math.round(e/FY)+"m";if(t>=jY)return Math.round(e/jY)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function HY(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}var zY=function(e){function t(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){var a;function o(){if(o.enabled){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=o,s=Number(new Date),u=s-(a||s);i.diff=u,i.prev=a,i.curr=s,a=s,t[0]=r.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,n){if("%%"===e)return e;c++;var a=r.formatters[n];if("function"==typeof a){var o=t[c];e=a.call(i,o),t.splice(c,1),c--}return e}),r.formatArgs.call(i,t),(i.log||r.log).apply(i,t)}}return o.namespace=e,o.enabled=r.enabled(e),o.useColors=r.useColors(),o.color=t(e),o.destroy=n,o.extend=i,"function"==typeof r.init&&r.init(o),r.instances.push(o),o}function n(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function i(e,t){return r(this.namespace+(void 0===t?":":t)+e)}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var a=r.instances[t];a.enabled=r.enabled(a.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=KY,Object.keys(e).forEach(function(t){r[t]=e[t]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r},WY=n(function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":r(console))&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==xu&&"env"in xu&&(e=xu.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=zY(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}),YY=(WY.log,WY.formatArgs,WY.save,WY.load,WY.useColors,WY.storage,WY.colors,n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i=h(uc),a=h(kC),o=h(Pf),s=h(_f),u=h(gE),c=h(fm),l=h(Am),f=h(by),d=h(kz),p=h(UY);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var m=new u.default,g=new u.default,y=new u.default,E=WY("kms"),b=XR.WebexPlugin.extend((r=(0,cI.oneFlight)({keyFactory:function(e){return e.uri+"/"+e.onBehalfOf}}),v(n={namespace:"Encryption",children:{batcher:p.default},bindKey:function(e){var t=this,r=e.kro,n=e.kroUri,i=e.key,a=e.keyUri;return n=n||r.uri,a=a||i.uri,this.logger.info("kms: binding key to resource"),n?a?this.request({method:"update",resourceUri:n,uri:a}).then(function(e){return t.logger.info("kms: bound key to resource"),e.key}):s.default.reject(new Error("`key` or `keyUri` is required")):s.default.reject(new Error("`kro` or `kroUri` is required"))},createResource:function(e){var t=this,r=e.userIds,n=e.keyUris,i=e.key,a=e.keys;return n=n||[],a&&(n=a.reduce(function(e,t){return e.push(t.uri),e},n)),i&&n.push(i.uri),0===n.length?s.default.reject(new Error("Cannot create KMS Resource without at least one keyUri")):(this.logger.info("kms: creating resource"),this.request({method:"create",uri:"/resources",userIds:r,keyUris:n}).then(function(e){return t.logger.info("kms: created resource"),e.resource}))},addAuthorization:function(e){var t=this,r=e.userIds,n=e.authIds,i=e.kro,a=e.kroUri;return r=r||[],a=a||i.uri,n&&(r=r.concat(n)),0===r.length?s.default.reject(new Error("Cannot add authorization without userIds or authIds")):a?(this.logger.info("kms: adding authorization to kms resource"),this.request({method:"create",uri:"/authorizations",resourceUri:a,userIds:r}).then(function(e){return t.logger.info("kms: added authorization"),e.authorizations})):s.default.reject(new Error("`kro` or `kroUri` is required"))},listAuthorizations:function(e){var t=this,r=e.kro,n=e.kroUri;return(n=n||r.uri)?this.request({method:"retrieve",uri:n+"/authorizations"}).then(function(e){return t.logger.info("kms: retrieved authorization list"),e.authorizations}):s.default.reject(new Error("`kro` or `kroUri` is required"))},removeAuthorization:function(e){var t=this,r=e.authId,n=e.userId,i=e.kro,a=e.kroUri;return r=r||n,a=a||i.uri,r?a?(this.logger.info("kms: removing authorization from kms resource"),this.request({method:"delete",uri:a+"/authorizations?"+l.default.stringify({authId:r})}).then(function(e){return t.logger.info("kms: removed authorization"),e.authorizations})):s.default.reject(new Error("`kro` or `kroUri` is required")):s.default.reject(new Error("Cannot remove authorization without authId"))},createUnboundKeys:function(e){var t=this,r=e.count;return this.logger.info("kms: request "+r+" unbound keys"),r?this.request({method:"create",uri:"/keys",count:r}).then(function(e){return t.logger.info("kms: received unbound keys"),s.default.all(e.keys.map(t.asKey))}):s.default.reject(new Error("`options.count` is required"))},fetchKey:function(e){var t=this,r=e.uri,n=e.onBehalfOf;return r?(this.logger.info("kms: fetching key"),this.request({method:"retrieve",uri:r},{onBehalfOf:n}).then(function(e){return t.logger.info("kms: fetched key"),t.asKey(e.key)})):s.default.reject(new Error("`options.uri` is required"))},ping:function(){return this.request({method:"update",uri:"/ping"})},asKey:function(e){return d.default.JWK.asKey(e.jwk).then(function(t){return e.jwk=t,e})},prepareRequest:function(e,t){var r=this,n="create"===e.method&&e.uri.includes("/ecdhe");return s.default.resolve(n?y.get(this):this._getContext()).then(function(i){r.logger.info("kms: wrapping "+(n?"ephemeral key":"kms")+" request");var a=new DY.Request(e),s=i;return t&&(s=r._contextOnBehalfOf(i,t)),a.wrap(s,{serverKey:n}).then(function(){return"production"!==xu.env.NODE_ENV&&r.logger.info("kms: request payload",f.default.inspect((0,c.default)(JSON.parse((0,o.default)(a)),"wrapped"),{depth:null})),a})})},processKmsMessageEvent:function(e){var t=this;return this.logger.info("kms: received kms message"),s.default.all(e.encryption.kmsMessages.map(function(r,n){return t._isECDHEMessage(r).then(function(i){t.logger.info("kms: received "+(i?"ecdhe":"normal")+" message");var a=new DY.Response(r);return s.default.resolve(i?y.get(t):m.get(t)).then(function(e){return a.unwrap(e)}).then(function(){"production"!==xu.env.NODE_ENV&&t.logger.info("kms: response payload",f.default.inspect((0,c.default)(JSON.parse((0,o.default)(a)),"wrapped"),{depth:null}))}).then(function(){e.encryption.kmsMessages[n]=a}).then(function(){return a})})})).then(function(){return t.batcher.processKmsMessageEvent(e)}).catch(function(e){return t.logger.error("kms: decrypt failed",e.stack),s.default.reject(e)}).then(function(){return e})},decryptKmsMessage:function(e){var t=new DY.Response(e);return m.get(this).then(function(e){return t.unwrap(e)}).then(function(){return t.body})},_isECDHEMessage:function(e){return this._getKMSStaticPubKey().then(function(t){var r=e.split(".");return 3===r.length&&JSON.parse(d.default.util.base64url.decode(r[0])).kid===t.kid})},request:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.timeout,i=r.onBehalfOf;return n=n||this.config.kmsInitialTimeout,this.webex.internal.mercury.connect().then(function(){return t.prepareRequest(e,i)}).then(function(e){return e[UY.TIMEOUT_SYMBOL]=n,t.batcher.request(e)}).catch(function(r){if("test"===xu.env.NODE_ENV&&(403===r.status||403===r.statusCode)&&r.message.match(/Failed to resolve authorization token in KmsMessage request for user/))return t.logger.warn("kms: rerequested key due to test-mode kms auth failure"),t.request(e,{onBehalfOf:i});if(!r.statusCode&&!r.status){if("production"!==xu.env.NODE_ENV&&t.logger.info("kms: request error",r.stack||r),E("timeout "+n),(n*=2)>=t.config.ecdhMaxTimeout)return t.logger.info("kms: exceeded maximum KMS request retries"),s.default.reject(r);var a=2*n;return n>=t.config.kmsMaxTimeout&&a<t.config.ecdhMaxTimeout&&(t.logger.info("kms: exceeded maximum KMS request retries; negotiating new ecdh key"),"production"!==xu.env.NODE_ENV&&t.logger.info("kms: timeout/maxtimeout",n,t.config.kmsMaxTimeout),m.delete(t),n=0),t.request(e,{timeout:n,onBehalfOf:i})}return s.default.reject(r)})},_getAuthorization:function(){return this.webex.credentials.getUserToken("spark:kms").then(function(e){return e.access_token})},_getContext:function(){var e=this,t=m.get(this);return t||(t=this._prepareContext(),m.set(this,t),t.then(function(t){var r=t.ephemeralKey.expirationDate-Date.now()-3e4;(0,hI.safeSetTimeout)(function(){return m.delete(e)},r)})),s.default.all([t,this._getAuthorization()]).then(function(e){var t=(0,a.default)(e,2),r=t[0],n=t[1];return r.clientInfo.credential.bearer=n,r})},_getKMSCluster:function(){return this.logger.info("kms: retrieving KMS cluster"),this._getKMSDetails().then(function(e){return e.kmsCluster})},_getKMSDetails:function(){var e=this,t=g.get(this);return t||(this.logger.info("kms: fetching KMS details"),t=this.webex.request({service:"encryption",resource:"/kms/"+this.webex.internal.device.userId}).then(function(t){e.logger.info("kms: fetched KMS details");var r=t.body;return r.rsaPublicKey=JSON.parse(r.rsaPublicKey),r}).catch(function(t){return e.logger.error("kms: failed to fetch KMS details",t),s.default.reject(t)}),g.set(this,t)),t},_getKMSStaticPubKey:function(){return this.logger.info("kms: retrieving KMS static public key"),this._getKMSDetails().then(function(e){return e.rsaPublicKey})},_prepareContext:function(){var e=this;this.logger.info("kms: creating context");var t=new DY.Context;return s.default.all([this._getKMSStaticPubKey(),this._getAuthorization()]).then(function(r){var n=(0,a.default)(r,2),i=n[0],o=n[1];return t.clientInfo={clientId:e.webex.internal.device.url,credential:{userId:e.webex.internal.device.userId,bearer:o}},t.serverInfo={key:i},e.logger.info("kms: creating local ephemeral key"),t.createECDHKey()}).then(function(r){return t.ephemeralKey=r,y.set(e,t),s.default.all([r.asKey(),e._getKMSCluster()])}).then(function(t){var r=(0,a.default)(t,2),n=r[0],i=r[1];return e.logger.info("kms: submitting ephemeral key request"),e.request({uri:i+"/ecdhe",method:"create",jwk:n.toJSON()})}).then(function(r){return e.logger.info("kms: deriving final ephemeral key"),t.deriveEphemeralKey(r.key)}).then(function(r){return t.ephemeralKey=r,y.delete(e),e.logger.info("kms: derived final ephemeral key"),t}).catch(function(t){return e.logger.error("kms: failed to negotiate ephemeral key",t),s.default.reject(t)})},_contextOnBehalfOf:function(e,t){var r=new DY.Context;return r.clientInfo=r.clientInfo={clientId:e.clientInfo.clientId,credential:{userId:t,bearer:e.clientInfo.credential.bearer}},r.serverInfo=e.serverInfo,r.ephemeralKey=e.ephemeralKey,r},version:"1.77.8"},"fetchKey",[r],(0,i.default)(n,"fetchKey"),n),v(n,"_getContext",[cI.oneFlight],(0,i.default)(n,"_getContext"),n),n));t.default=b}));r(YY);var XY=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=u(Pf),n=u(_f),i=u(kz),a=u(oY),o=u(sY),s=u(YY);function u(e){return e&&e.__esModule?e:{default:e}}var c=XR.WebexPlugin.extend({children:{kms:s.default},namespace:"Encryption",processKmsMessageEvent:function(e){return this.kms.processKmsMessageEvent(e)},decryptBinary:function(e,t){return(0,o.default)(t).then(function(r){return 0===t.length||0===t.byteLength?n.default.reject(new Error("Attempted to decrypt zero-length buffer")):e.decrypt(r)})},decryptScr:function(e,t,r){return this.getKey(e,r).then(function(e){return a.default.fromJWE(e.jwk,t)})},decryptText:function(e,t,r){return this.getKey(e,r).then(function(e){return i.default.JWE.createDecrypt(e.jwk).decrypt(t).then(function(e){return e.plaintext.toString()})})},download:function(e){var t=this;if(!e.loc)return n.default.reject(new Error("`scr.loc` is required"));var r=new TS.EventEmitter,i=this._fetchDownloadUrl(e).then(function(e){var n={method:"GET",uri:e,responseType:"buffer"},i=t.request(n);return(0,cI.transferEvents)("progress",n.download,r),i}).then(function(r){return t.decryptBinary(e,r.body)});return(0,cI.proxyEvents)(r,i),i},_fetchDownloadUrl:function(e){var t=this;return this.logger.info("encryption: retrieving download url for encrypted file"),"production"!==xu.env.NODE_ENV&&e.loc.includes("localhost")?(this.logger.info("encryption: bypassing webex files because this looks to be a test file on localhost"),n.default.resolve(e.loc)):this.request({method:"POST",service:"files",resource:"download/endpoints",body:{endpoints:[e.loc]}}).then(function(r){var n=r.body.endpoints[e.loc];return n?(t.logger.info("encryption: retrieved download url for encrypted file"),n):(t.logger.warn("encryption: could not determine download url for `scr.loc`; attempting to download `scr.loc` directly"),e.loc)})},encryptBinary:function(e){return(0,o.default)(e).then(function(e){return a.default.create().then(function(t){return t.encrypt(e).then(o.default).then(function(e){return{scr:t,cdata:e}})})})},encryptScr:function(e,t,r){return t.loc?this.getKey(e,r).then(function(e){return t.toJWE(e.jwk)}):n.default.reject(new Error("Cannot encrypt `scr` without first setting `loc`"))},encryptText:function(e,t,r){var n=this;return this.getKey(e,r).then(function(e){return i.default.JWE.createEncrypt(n.config.joseOptions,{key:e.jwk,header:{alg:"dir"},reference:null}).final(t,"utf8")})},getKey:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).onBehalfOf;if(e.jwk)return this.kms.asKey(e);var i=e;return n&&(i+="/onBehalfOf/"+n),this.unboundedStorage.get(i).then(function(e){return JSON.parse(e)}).then(function(e){return t.kms.asKey(e)}).catch(function(){return t.kms.fetchKey({uri:e,onBehalfOf:n}).then((0,cI.tap)(function(e){return t.unboundedStorage.put(i,(0,r.default)(e,l))}))})},version:"1.77.8"});function l(e,t){return"jwk"===e?this[e].toJSON(!0):t}t.default=c});r(XY);var $Y=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={encryption:{joseOptions:{compact:!0,contentAlg:"A256GCM",protect:"*"},kmsInitialTimeout:6e3,kmsMaxTimeout:32e3,ecdhMaxTimeout:96e3,batcherWait:50,batcherMaxCalls:50,batcherMaxWait:150}}});r($Y);var QY=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:jv(e,t,r)},JY=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var ZY=function(e){return JY.test(e)};var eX=function(e){return e.split("")},tX="[\\ud800-\\udfff]",rX="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",nX="\\ud83c[\\udffb-\\udfff]",iX="[^\\ud800-\\udfff]",aX="(?:\\ud83c[\\udde6-\\uddff]){2}",oX="[\\ud800-\\udbff][\\udc00-\\udfff]",sX="(?:"+rX+"|"+nX+")"+"?",uX="[\\ufe0e\\ufe0f]?"+sX+("(?:\\u200d(?:"+[iX,aX,oX].join("|")+")[\\ufe0e\\ufe0f]?"+sX+")*"),cX="(?:"+[iX+rX+"?",rX,aX,oX,tX].join("|")+")",lX=RegExp(nX+"(?="+nX+")|"+cX+uX,"g");var fX=function(e){return e.match(lX)||[]};var dX=function(e){return ZY(e)?fX(e):eX(e)};var pX=function(e){return function(t){t=kv(t);var r=ZY(t)?dX(t):void 0,n=r?r[0]:t.charAt(0),i=r?QY(r,1).join(""):t.slice(1);return n[e]()+i}}("toUpperCase");var hX=function(e){return pX(kv(e).toLowerCase())};var vX=function(e,t,r,n){var i=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r},mX=bI({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),gX=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yX=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var EX=function(e){return(e=kv(e))&&e.replace(gX,mX).replace(yX,"")},bX=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var _X=function(e){return e.match(bX)||[]},SX=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var TX=function(e){return SX.test(e)},wX="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",IX="["+wX+"]",AX="\\d+",CX="[\\u2700-\\u27bf]",xX="[a-z\\xdf-\\xf6\\xf8-\\xff]",OX="[^\\ud800-\\udfff"+wX+AX+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",RX="(?:\\ud83c[\\udde6-\\uddff]){2}",NX="[\\ud800-\\udbff][\\udc00-\\udfff]",kX="[A-Z\\xc0-\\xd6\\xd8-\\xde]",PX="(?:"+xX+"|"+OX+")",MX="(?:"+kX+"|"+OX+")",DX="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",LX="[\\ufe0e\\ufe0f]?"+DX+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",RX,NX].join("|")+")[\\ufe0e\\ufe0f]?"+DX+")*"),UX="(?:"+[CX,RX,NX].join("|")+")"+LX,jX=RegExp([kX+"?"+xX+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[IX,kX,"$"].join("|")+")",MX+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[IX,kX+PX,"$"].join("|")+")",kX+"?"+PX+"+(?:['’](?:d|ll|m|re|s|t|ve))?",kX+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",AX,UX].join("|"),"g");var FX=function(e){return e.match(jX)||[]};var BX=function(e,t,r){return e=kv(e),void 0===(t=r?void 0:t)?TX(e)?FX(e):_X(e):e.match(t)||[]},VX=RegExp("['’]","g");var GX=function(e){return function(t){return vX(BX(EX(t).replace(VX,"")),e,"")}}(function(e,t,r){return t=t.toLowerCase(),e+(r?hX(t):t)}),qX=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Forbidden=t.NotAuthorized=t.BadRequest=t.UnknownResponse=t.ConnectionError=void 0;var r,n,i,a,o,s,u,c,l,f,d=y(wC),p=y(hT),h=y(zy),v=y($y),m=y(vT),g=y(mT);function y(e){return e&&e.__esModule?e:{default:e}}var E=t.ConnectionError=(n=r=function(e){function t(){return(0,h.default)(this,t),(0,m.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,v.default)(t,[{key:"parse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.default)(this,{code:{value:e.code},reason:{value:e.reason}}),e.reason}}]),t}(cI.Exception),r.defaultMessage="Failed to connect to socket",n);t.UnknownResponse=(a=i=function(e){function t(){return(0,h.default)(this,t),(0,m.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),t}(E),i.defaultMessage="UnknownResponse is produced by IE when we receive a 4XXX. You probably want to treat this like a NotFound",a),t.BadRequest=(s=o=function(e){function t(){return(0,h.default)(this,t),(0,m.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),t}(E),o.defaultMessage="BadRequest usually implies an attempt to use service account credentials",s),t.NotAuthorized=(c=u=function(e){function t(){return(0,h.default)(this,t),(0,m.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),t}(E),u.defaultMessage="Please refresh your access token",c),t.Forbidden=(f=l=function(e){function t(){return(0,h.default)(this,t),(0,m.default)(this,(t.__proto__||(0,p.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),t}(E),l.defaultMessage="Forbidden usually implies these credentials are not entitled for Webex",f)});r(qX);qX.Forbidden,qX.NotAuthorized,qX.BadRequest,qX.UnknownResponse,qX.ConnectionError;var KX=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=m(Pf),n=m(BC),i=m(fI),a=m(_f),o=m(hT),s=m(zy),u=m($y),c=m(vT),l=m(mT),f=m(gE),d=m(ld),p=m(AA),h=m(_S),v=m(AR);function m(e){return e&&e.__esModule?e:{default:e}}var g=new f.default,y=function(e){function t(){(0,s.default)(this,t);var e=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return e.onmessage=e.onmessage.bind(e),e.onclose=e.onclose.bind(e),e}return(0,l.default)(t,e),(0,u.default)(t,[{key:"close",value:function(e){var t=this;return new a.default(function(r,n){t.logger.info("socket: closing");var i=g.get(t);if(2===i.readyState||3===i.readyState)return t.logger.info("socket: already closed"),void r();if((e=e||{}).code&&1e3!==e.code&&(e.code<3e3||e.code>4999))n(new Error("`options.code` must be 1000 or between 3000 and 4999 (inclusive)"));else{e=(0,h.default)(e,{code:1e3,reason:"Done"});var a=(0,hI.safeSetTimeout)(function(){try{t.logger.info("socket: no close event received, forcing closure"),r(t.onclose({code:1e3,reason:"Done (forced)"}))}catch(e){t.logger.warn("socket: force-close failed",e)}},t.forceCloseDelay);i.onclose=function(e){t.logger.info("socket: close event fired",e.code,e.reason),clearTimeout(a),t.onclose(e),r(e)},i.close(e.code,e.reason)}})}},{key:"open",value:function(e,r){var o=this;return new a.default(function(a,s){if(e)if(g.get(o))s(new Error("Socket#open() can only be called once per instance"));else{r=r||{},(0,cI.checkRequired)(["forceCloseDelay","pingInterval","pongTimeout","token","trackingId","logger"],r),(0,i.default)(r).forEach(function(e){(0,n.default)(o,e,{enumerable:!1,value:r[e]})});var u=t.getWebSocketConstructor();o.logger.info("socket: creating WebSocket");var c=new u(e);c.binaryType="arraybuffer",c.onmessage=o.onmessage,c.onclose=function(e){switch((e=o._fixCloseCode(e)).code){case 1005:return s(new qX.UnknownResponse(e));case 4400:return s(new qX.BadRequest(e));case 4401:return s(new qX.NotAuthorized(e));case 4403:return s(new qX.Forbidden(e));default:return s(new qX.ConnectionError(e))}},c.onopen=function(){o.logger.info("socket: connected"),o._authorize().then(function(){o.logger.info("socket: authorized"),c.onclose=o.onclose,a()}).catch(s)},c.onerror=function(e){o.logger.warn("socket: error event fired",e)},g.set(o,c),o.logger.info("socket: waiting for server")}else s(new Error("`url` is required"))})}},{key:"onclose",value:function(e){this.logger.info("socket: closed",e.code,e.reason),clearTimeout(this.pongTimer),clearTimeout(this.pingTimer),e=this._fixCloseCode(e),this.emit("close",e),this.removeAllListeners()}},{key:"onmessage",value:function(e){try{var t=JSON.parse(e.data),r=parseInt(t.sequenceNumber,10);this.logger.debug("socket: sequence number: ",r),this.expectedSequenceNumber&&r!==this.expectedSequenceNumber&&(this.logger.debug("socket: sequence number mismatch indicates lost mercury message. expected: "+this.expectedSequenceNumber+", actual: "+r),this.emit("sequence-mismatch",r,this.expectedSequenceNumber)),this.expectedSequenceNumber=r+1;var n={data:t};this._acknowledge(n),"pong"===t.type?this.emit("pong",n):this.emit("message",n)}catch(e){this.logger.warn("socket: error while receiving WebSocket message",e)}}},{key:"send",value:function(e){var t=this;return new a.default(function(n,i){return 1!==t.readyState?i(new Error("INVALID_STATE_ERROR")):((0,d.default)(e)&&(e=(0,r.default)(e)),g.get(t).send(e),n())})}},{key:"_acknowledge",value:function(e){return e?(0,p.default)(e,"data.id")?this.send({messageId:e.data.id,type:"ack"}):a.default.reject(new Error("`event.data.id` is required")):a.default.reject(new Error("`event` is required"))}},{key:"_authorize",value:function(){var e=this;return new a.default(function(t){e.logger.info("socket: authorizing"),e.send({id:v.default.v4(),type:"authorization",data:{token:e.token},trackingId:e.trackingId,logLevelToken:e.logLevelToken});e.once("message",function r(n){n.data.type||"mercury.buffer_state"!==n.data.data.eventType&&"mercury.registration_status"!==n.data.data.eventType||(e.removeListener("message",r),e._ping(),t())})})}},{key:"_fixCloseCode",value:function(e){if(1005===e.code&&e.reason)switch(e.reason.toLowerCase()){case"replaced":this.logger.info("socket: fixing CloseEvent code for reason: ",e.reason),e.code=4e3;break;case"authentication failed":case"authentication did not happen within the timeout window of 30000 seconds.":this.logger.info("socket: fixing CloseEvent code for reason: ",e.reason),e.code=1008}return e}},{key:"_ping",value:function(e){var t=this;return e=e||v.default.v4(),this.pongTimer=(0,hI.safeSetTimeout)(function(){try{t.logger.info("socket: pong not receive in expected period, closing socket"),t.close({code:1e3,reason:"Pong not received"}).catch(function(e){t.logger.warn("socket: failed to close socket after missed pong",e)})}catch(e){t.logger.error("socket: error occurred in onPongNotReceived",e)}},this.pongTimeout),this.once("pong",function(){try{clearTimeout(t.pongTimer),t.pingTimer=(0,hI.safeSetTimeout)(function(){return t._ping()},t.pingInterval)}catch(e){t.logger.error("socket: error occurred in scheduleNextPingAndCancelPongTimer",e)}}),this.once("pong",function(r){try{t.logger.debug("socket: pong",r.data.id),r.data&&r.data.id!==e&&(t.logger.info("socket: received pong for wrong ping id, closing socket"),t.logger.debug("socket: expected",e,"received",r.data.id),t.close({code:1e3,reason:"Pong mismatch"}))}catch(e){t.logger.error("socket: error occurred in confirmPongId",e)}}),this.logger.debug("socket: ping "+e),this.send({id:e,type:"ping"})}},{key:"binaryType",get:function(){return g.get(this).binaryType}},{key:"bufferedAmount",get:function(){return g.get(this).bufferedAmount}},{key:"extensions",get:function(){return g.get(this).extensions}},{key:"protocol",get:function(){return g.get(this).protocol}},{key:"readyState",get:function(){return g.get(this).readyState}},{key:"url",get:function(){return g.get(this).url}}],[{key:"getWebSocketConstructor",value:function(){throw new Error("Socket.getWebSocketConstructor() must be implemented in an environmentally appropriate way")}}]),t}(TS.EventEmitter);t.default=y});r(KX);var HX=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=KX)&&r.__esModule?r:{default:r};n.default.getWebSocketConstructor=function(){return WebSocket},t.default=n.default});r(HX);var zX=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return(e=HX,e&&e.__esModule?e:{default:e}).default;var e}})});r(zX);var WX=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,a=g(uc),o=g(kC),s=g(fc),u=g(Af),c=g(fI),l=g(_f),f=g(sR),d=g(hR),p=g(GX),h=g(_y),v=g(HS),m=g(zX);function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var E=["idle","done (forced)","pong not received","pong mismatch"],b=XR.WebexPlugin.extend((r=(0,cI.deprecated)("Mercury#listen(): Use Mercury#connect() instead"),n=(0,cI.deprecated)("Mercury#stopListening(): Use Mercury#disconnect() instead"),y(i={namespace:"Mercury",session:{connected:{default:!1,type:"boolean"},connecting:{default:!1,type:"boolean"},socket:"object",localClusterServiceUrls:"object"},derived:{listening:{deps:["connected"],fn:function(){return this.connected}}},connect:function(e){var t=this;return this.connected?(this.logger.info("mercury: already connected, will not connect again"),l.default.resolve()):(this.connecting=!0,l.default.resolve(this.webex.internal.device.registered||this.webex.internal.device.register()).then(function(){return t.logger.info("mercury: connecting"),t._connectWithBackoff(e)}))},disconnect:function(){var e=this;return new l.default(function(t){if(e.backoffCall&&(e.logger.info("mercury: aborting connection"),e.backoffCall.abort()),e.socket)return e.socket.removeAllListeners("message"),e.once("offline",t),void e.socket.close();t()})},listen:function(){return this.connect()},stopListening:function(){return this.disconnect()},processRegistrationStatusEvent:function(e){this.localClusterServiceUrls=e.localClusterServiceUrls},_applyOverrides:function(e){e.headers&&(0,c.default)(e.headers).forEach(function(t){(0,f.default)(e,t,e.headers[t])})},_prepareUrl:function(e){var t=this;return e||(e=this.webex.internal.device.webSocketUrl),this.webex.internal.feature.getFeature("developer","web-high-availability").then(function(r){return r?t.webex.internal.device.useServiceCatalogUrl(e):e}).then(function(t){e=t}).then(function(){return t.webex.internal.feature.getFeature("developer","web-shared-mercury")}).then(function(r){return e=h.default.parse(e,!0),(0,u.default)(e.query,{outboundWireFormat:"text",bufferStates:!0,aliasHttpStatus:!0}),r&&((0,u.default)(e.query,{mercuryRegistrationStatus:!0,isRegistrationRefreshEnabled:!0}),(0,s.default)(e.query,"bufferStates")),(0,d.default)(t,"webex.config.device.ephemeral",!1)&&(e.query.multipleConnections=!0),h.default.format(e)})},_attemptConnection:function(e,t){var r=this,n=new m.default,i=void 0;n.on("close",function(){return r._onclose.apply(r,arguments)}),n.on("message",function(){return r._onmessage.apply(r,arguments)}),n.on("sequence-mismatch",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r._emit.apply(r,["sequence-mismatch"].concat(t))}),l.default.all([this._prepareUrl(e),this.webex.credentials.getUserToken()]).then(function(e){var t=(0,o.default)(e,2),a=t[0],s=t[1];return i=a,n.open(a,{forceCloseDelay:r.config.forceCloseDelay,pingInterval:r.config.pingInterval,pongTimeout:r.config.pongTimeout,token:s.toString(),trackingId:r.webex.sessionId+"_"+Date.now(),logger:r.logger})}).then(function(){return r.socket=n,r.webex.internal.metrics.submitClientMetrics("web-ha-mercury",{fields:{success:!0},tags:{action:"connected",url:i}}),t(),r.webex.internal.feature.getFeature("developer","web-high-availability").then(function(e){return e?r.webex.internal.device.fetchNewUrls(i):l.default.resolve()})}).catch(function(e){return 1006!==e.code&&r.backoffCall&&r.backoffCall.getNumRetries()>0&&r._emit("connection_failed",e,{retries:r.backoffCall.getNumRetries()}),r.logger.info("mercury: connection attempt failed",e),e instanceof qX.UnknownResponse?(r.logger.info("mercury: received unknown response code, refreshing device registration"),r.webex.internal.device.refresh().then(function(){return t(e)})):e instanceof qX.NotAuthorized?(r.logger.info("mercury: received authorization error, reauthorizing"),r.webex.credentials.refresh({force:!0}).then(function(){return t(e)})):e instanceof qX.BadRequest||e instanceof qX.Forbidden?(r.logger.warn("mercury: received unrecoverable response from mercury"),r.backoffCall.abort(),t(e)):e instanceof qX.ConnectionError?r.webex.internal.feature.getFeature("developer","web-high-availability").then(function(t){return t?(r.logger.info("mercury: received a generic connection error, will try to connect to another datacenter"),r.webex.internal.metrics.submitClientMetrics("web-ha-mercury",{fields:{success:!1},tags:{action:"failed",error:e.message,url:i}}),r.webex.internal.device.markUrlFailedAndGetNew(i)):null}).then(function(){return t(e)}):t(e)}).catch(function(e){r.logger.error("mercury: failed to handle connection failure",e),t(e)})},_connectWithBackoff:function(e){var t=this;return new l.default(function(r,n){var i=void 0;(i=v.default.call(function(r){t.logger.info("mercury: executing connection attempt "+i.getNumRetries()),t._attemptConnection(e,r)},function(e){return t.connecting=!1,t.backoffCall=void 0,e?(t.logger.info("mercury: failed to connect after "+i.getNumRetries()+" retries; log statement about next retry was inaccurate"),n(e)):(t.connected=!0,t._emit("online"),r())})).setStrategy(new v.default.ExponentialStrategy({initialDelay:t.config.backoffTimeReset,maxDelay:t.config.backoffTimeMax})),t.config.maxRetries&&i.failAfter(t.config.maxRetries),i.on("abort",function(){t.logger.info("mercury: connection aborted"),n()}),i.on("callback",function(e){if(e){var r=i.getNumRetries(),n=Math.min(i.strategy_.nextBackoffDelay_,t.config.backoffTimeMax);return t.logger.info("mercury: failed to connect; attempting retry "+(r+1)+" in "+n+" ms"),void("development"===xu.env.NODE_ENV&&t.logger.debug("mercury: ",e,e.stack))}t.logger.info("mercury: connected")}),i.start(),t.backoffCall=i})},_emit:function(){try{this.trigger.apply(this,arguments)}catch(e){this.logger.error("mercury: error occurred in event handler",e)}},_getEventHandlers:function(e){var t=e.split("."),r=(0,o.default)(t,2),n=r[0],i=r[1],a=[];if(!this.webex[n]&&!this.webex.internal[n])return a;var s=(0,p.default)("process_"+i+"_event");return(this.webex[n]||this.webex.internal[n])[s]&&a.push({name:s,namespace:n}),a},_onclose:function(e){try{var t=e.reason&&e.reason.toLowerCase(),r=this.socket.url;switch(this.socket.removeAllListeners(),this.unset("socket"),this.connected=!1,this._emit("offline",e),e.code){case 1003:this.logger.info("mercury: Mercury service rejected last message; will not reconnect: "+e.reason),this._emit("offline.permanent",e);break;case 4e3:this.logger.info("mercury: socket replaced; will not reconnect"),this._emit("offline.replaced",e);break;case 1001:case 1005:case 1006:case 1011:this.logger.info("mercury: socket disconnected; reconnecting"),this._emit("offline.transient",e),this._reconnect(r);break;case 1e3:E.includes(t)?(this.logger.info("mercury: socket disconnected; reconnecting"),this._emit("offline.transient",e),this._reconnect(r)):(this.logger.info("mercury: socket disconnected; will not reconnect"),this._emit("offline.permanent",e));break;default:this.logger.info("mercury: socket disconnected unexpectedly; will not reconnect"),this._emit("offline.permanent",e)}}catch(e){this.logger.error("mercury: error occurred in close handler",e)}},_onmessage:function(e){var t=this,r=e.data;xu.env.ENABLE_MERCURY_LOGGING&&this.logger.debug("mercury: message envelope: ",r);var n=r.data;return this._applyOverrides(n),this._getEventHandlers(n.eventType).reduce(function(e,r){return e.then(function(){var e=r.namespace,i=r.name;return new l.default(function(r){return r((t.webex[e]||t.webex.internal[e])[i](n))}).catch(function(e){return t.logger.error("mercury: error occurred in autowired event handler for "+n.eventType,e)})})},l.default.resolve()).then(function(){t._emit("event",e.data);var i=n.eventType.split("."),a=(0,o.default)(i,1)[0];a===n.eventType?t._emit("event:"+a,r):(t._emit("event:"+a,r),t._emit("event:"+n.eventType,r))}).catch(function(e){t.logger.error("mercury: error occurred processing socket message",e)})},_reconnect:function(e){return this.logger.info("mercury: reconnecting"),this.connect(e)},version:"1.77.8"},"connect",[cI.oneFlight],(0,a.default)(i,"connect"),i),y(i,"disconnect",[cI.oneFlight],(0,a.default)(i,"disconnect"),i),y(i,"listen",[r],(0,a.default)(i,"listen"),i),y(i,"stopListening",[n],(0,a.default)(i,"stopListening"),i),i));t.default=b});r(WX);var YX=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={mercury:{pingInterval:xu.env.MERCURY_PING_INTERVAL||15e3,pongTimeout:xu.env.MERCURY_PONG_TIMEOUT||14e3,backoffTimeMax:xu.env.MERCURY_BACKOFF_TIME_MAX||32e3,backoffTimeReset:xu.env.MERCURY_BACKOFF_TIME_RESET||1e3,forceCloseDelay:xu.env.MERCURY_FORCE_CLOSE_DELAY||2e3}}});r(YX);var XX=function(e,t,r,n){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(n,o,r(o),e)}return n};var $X=function(e,t,r,n){return UA(e,function(e,i,a){t(n,e,r(e),a)}),n};var QX=function(e,t){return function(r,n){var i=gp(r)?XX:$X,a=t?t():{};return i(r,e,fN(n,2),a)}}(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),JX=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(Rf),n=a(_f),i=a(QX);function a(e){return e&&e.__esModule?e:{default:e}}var o=XR.WebexPlugin.extend({namespace:"Feature",getFeature:function(e,t,r){if("developer"!==e&&"user"!==e&&"entitlement"!==e)return n.default.reject(new Error("Invalid feature keyType provided. Only `developer`, `user`, and `entitlement` feature toggles are permitted."));r=r||{};var i=this.webex.internal.device.features[e].get(t);return i?r.full?n.default.resolve(i.serialize()):n.default.resolve(i.value):n.default.resolve(null)},handleFeatureUpdate:function(e){if(e&&e.data){var t=e.data.featureToggle,r=t.type.toLowerCase();"user"!==r&&"developer"!==r||this.webex.internal.device.features[r].add([t],{merge:!0})}},listen:function(){this.listenTo(this.webex.internal.mercury,"event:featureToggle_update",this.handleFeatureUpdate)},setFeature:function(e,t,r){var i=this;return"developer"!==e&&"user"!==e?n.default.reject(new Error("Only `developer` and `user` feature toggles can be set.")):this.request({method:"POST",api:"feature",resource:"features/users/"+this.webex.internal.device.userId+"/"+e,body:{key:t,mutable:!0,val:r}}).then(function(t){return i.webex.internal.device.features[e].add(t.body,{merge:!0})})},setBundledFeatures:function(e){var t=this;return e.forEach(function(e){e.mutable=e.mutable||"true","USER"!==e.type&&"DEV"!==e.type&&(e.type="USER")}),this.request({method:"POST",api:"feature",resource:"features/users/"+this.webex.internal.device.userId+"/toggles",body:e}).then(function(e){var r=(0,i.default)(e.body.featureToggles,{type:"USER"});t.webex.internal.device.features.user.add(r[0],{merge:!0}),t.webex.internal.device.features.developer.add(r[1],{merge:!0})})},initialize:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];(0,r.default)(XR.WebexPlugin.prototype.initialize,this,t),this.listenToAndRun(this.webex,"change:internal.device.features.developer",this.trigger.bind(this,"change:developer")),this.listenToAndRun(this.webex,"change:internal.device.features.entitlement",this.trigger.bind(this,"change:entitlement")),this.listenToAndRun(this.webex,"change:internal.device.features.user",this.trigger.bind(this,"change:user"))},version:"1.77.8"});t.default=o});r(JX);var ZX=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={feature:{}}});r(ZX),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(JX).default}});var r=i(JX),n=i(ZX);function i(e){return e&&e.__esModule?e:{default:e}}(0,XR.registerInternalPlugin)("feature",r.default,{config:n.default})}));var e$=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(kC),n=a(Rf),i=a(_f);function a(e){return e&&e.__esModule?e:{default:e}}var o=(0,a(ub).default)("metric id"),s=XR.Batcher.extend({namespace:"Metrics",prepareItem:function(e){var t="production"===xu.env.NODE_ENV?null:"TEST";return e.appType=e.appType||this.config.appType,e.env=e.env||t,e.time=e.time||Date.now(),e.version=e.version||this.webex.version,i.default.resolve(e)},prepareRequest:function(e){return i.default.resolve(e.map(function(e){return e.postTime=e.postTime||Date.now(),e}))},submitHttpRequest:function(e){return this.webex.request({method:"POST",service:"metrics",resource:"metrics",body:{metrics:e}})},handleHttpSuccess:function(e){var t=this;return i.default.all(e.options.body.metrics.map(function(e){return t.acceptItem(e)}))},handleHttpError:function(e){var t=this;return e instanceof XR.WebexHttpError.NetworkOrCORSError?(this.logger.warn("metrics-batcher: received network error submitting metrics, reenqueuing payload"),i.default.all(e.options.body.metrics.map(function(e){return new i.default(function(r){var n=e[o].nextDelay;n<t.config.batcherRetryPlateau&&(e[o].nextDelay*=2),(0,hI.safeSetTimeout)(function(){r(t.rerequest(e))},n)})}))):(0,n.default)(XR.Batcher.prototype.handleHttpError,this,[e])},rerequest:function(e){var t=this;return i.default.all([this.getDeferredForRequest(e),this.prepareItem(e)]).then(function(e){var n=(0,r.default)(e,2),i=n[0],a=n[1];t.enqueue(a).then(function(){return t.bounce()}).catch(function(e){return i.reject(e)})})},fingerprintRequest:function(e){return e[o]=e[o]||{nextDelay:1e3},i.default.resolve(e[o])},fingerprintResponse:function(e){return i.default.resolve(e[o])}});t.default=s});r(e$);var t$=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=n(_f);function n(e){return e&&e.__esModule?e:{default:e}}var i=n(e$).default.extend({namespace:"Metrics",prepareItem:function(e){return r.default.resolve(e)},prepareRequest:function(e){return r.default.resolve(e)},submitHttpRequest:function(e){return this.webex.request({method:"POST",service:"metrics",resource:"clientmetrics",body:{metrics:e}})}});t.default=i});r(t$);var r$=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(_f),n=i(Af);function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e$).default.extend({namespace:"Metrics",prepareItem:function(e){var t={buildType:"production"===xu.env.NODE_ENV?"prod":"test",networkType:"unknown"};return e.eventPayload.origin=(0,n.default)(t,e.eventPayload.origin),r.default.resolve(e)},prepareRequest:function(e){return e.forEach(function(e){e.eventPayload.originTime.sent=(new Date).toISOString()}),r.default.resolve(e)},submitHttpRequest:function(e){return this.webex.request({method:"POST",service:"metrics",resource:"clientmetrics",body:{metrics:e}})}});t.default=a});r(r$);var n$=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i=c(uc),a=c(Af),o=c(e$),s=c(t$),u=c(r$);function c(e){return e&&e.__esModule?e:{default:e}}var l,f,d,p,h,v,m=XR.WebexPlugin.extend((r=(0,cI.deprecated)("Metrics#sendUnstructured() is deprecated; please use Metrics#submit()"),n={children:{batcher:o.default,clientMetricsBatcher:s.default,callDiagnosticEventsBatcher:u.default},namespace:"Metrics",sendUnstructured:function(e,t){return this.submit(e,t)},submit:function(e,t){return this.batcher.request((0,a.default)({key:e},t))},submitClientMetrics:function(e,t,r){var n={metricName:e};if(t.tags&&(n.tags=t.tags),t.fields&&(n.fields=t.fields),t.type&&(n.type=t.type),t.context&&(n.context=t.context),t.eventPayload&&(n.eventPayload=t.eventPayload),n.timestamp=Date.now(),r){var i={metrics:[n]};return this.postPreLoginMetric(i,r)}return this.clientMetricsBatcher.request(n)},aliasUser:function(e){return this.request({method:"POST",api:"metrics",resource:"clientmetrics",headers:{"x-prelogin-userid":e},body:{},qs:{alias:!0}})},postPreLoginMetric:function(e,t){var r=this;return this.webex.credentials.getClientToken().then(function(n){return r.request({method:"POST",api:"metrics",resource:"clientmetrics-prelogin",headers:{authorization:n.toString(),"x-prelogin-userid":t},body:e})})},submitCallDiagnosticEvents:function(e){var t={type:"diagnostic-event",eventPayload:e};return this.callDiagnosticEventsBatcher.request(t)},version:"1.77.8"},l=n,f="sendUnstructured",d=[r],p=(0,i.default)(n,"sendUnstructured"),h=n,v={},Object.keys(p).forEach(function(e){v[e]=p[e]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=d.slice().reverse().reduce(function(e,t){return t(l,f,e)||e},v),h&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(h):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(l,f,v),v=null),n));t.default=m});r(n$);var i$=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={device:{preDiscoveryServices:{metricsServiceUrl:xu.env.METRICS_SERVICE_URL||"https://metrics-a.wbx2.com/metrics/api/v1",metrics:xu.env.METRICS_SERVICE_URL||"https://metrics-a.wbx2.com/metrics/api/v1"}},metrics:{appType:cI.inBrowser?"browser":"nodejs",batcherWait:500,batcherMaxCalls:50,batcherMaxWait:1500,batcherRetryPlateau:32e3}}});r(i$);var a$=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(n$).default}});var r=i(n$),n=i(i$);function i(e){return e&&e.__esModule?e:{default:e}}(0,XR.registerInternalPlugin)("metrics",r.default,{config:n.default}),t.config=n.default});r(a$);a$.config;var o$=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownResponse=t.NotAuthorized=t.Forbidden=t.ConnectionError=t.BadRequest=t.config=t.Socket=t.Mercury=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(WX).default}}),Object.defineProperty(t,"Mercury",{enumerable:!0,get:function(){return i(WX).default}}),Object.defineProperty(t,"Socket",{enumerable:!0,get:function(){return i(zX).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return i(YX).default}}),Object.defineProperty(t,"BadRequest",{enumerable:!0,get:function(){return qX.BadRequest}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return qX.ConnectionError}}),Object.defineProperty(t,"Forbidden",{enumerable:!0,get:function(){return qX.Forbidden}}),Object.defineProperty(t,"NotAuthorized",{enumerable:!0,get:function(){return qX.NotAuthorized}}),Object.defineProperty(t,"UnknownResponse",{enumerable:!0,get:function(){return qX.UnknownResponse}});var r=i(WX),n=i(YX);function i(e){return e&&e.__esModule?e:{default:e}}(0,XR.registerInternalPlugin)("mercury",r.default,{config:n.default,onBeforeLogout:function(){return this.disconnect()}})});r(o$);o$.UnknownResponse,o$.NotAuthorized,o$.Forbidden,o$.ConnectionError,o$.BadRequest,o$.config,o$.Socket,o$.Mercury;var s$=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(_f),n=u(hT),i=u(zy),a=u($y),o=u(vT),s=u(mT);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onResponseError",value:function(e,t){return t instanceof LY.DryError&&t.message.match(/Failed to resolve authorization token in KmsMessage request for user/)?(this.webex.logger.error("DRY Request Failed due to kms/test-user flakiness"),this.webex.logger.error(t),this.replay(e,t)):r.default.reject(t)}},{key:"replay",value:function(e,t){return e.replayCount?e.replayCount+=1:e.replayCount=1,e.replayCount>this.webex.config.maxAuthenticationReplays?(this.webex.logger.error("kms: failed after "+this.webex.config.maxAuthenticationReplays+" replay attempts"),r.default.reject(t)):(this.webex.logger.info("kms: replaying request "+e.replayCount+" time"),this.webex.request(e))}}],[{key:"create",value:function(){return new t({webex:this})}}]),t}(XO.Interceptor);t.default=c});r(s$);var u$=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DryError=t.KmsError=t.KMS=t.default=void 0;var r=c(_f),n=c(OI),i=c(ld),a=c(AA);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c(XY).default}}),Object.defineProperty(t,"KMS",{enumerable:!0,get:function(){return c(YY).default}}),Object.defineProperty(t,"KmsError",{enumerable:!0,get:function(){return LY.KmsError}}),Object.defineProperty(t,"DryError",{enumerable:!0,get:function(){return LY.DryError}});var o=c(XY),s=c($Y),u=c(s$);function c(e){return e&&e.__esModule?e:{default:e}}var l=void 0;"test"===xu.env.NODE_ENV&&(l={KmsDryErrorInterceptor:u.default.create}),(0,XR.registerInternalPlugin)("encryption",o.default,{payloadTransformer:{predicates:[{name:"encryptKmsMessage",direction:"outbound",test:function(e,t){return(0,a.default)(t,"body.kmsMessage")&&(0,i.default)(t.body.kmsMessage)?t.body.kmsMessage.keyUris&&0===t.body.kmsMessage.keyUris.length?r.default.resolve(!1):t.body.kmsMessage.resourceUri&&(t.body.kmsMessage.resourceUri.includes("<KRO>")||t.body.kmsMessage.resourceUri.includes("<KEYURL>"))?r.default.resolve(!1):t.body.kmsMessage.uri&&(t.body.kmsMessage.uri.includes("<KRO>")||t.body.kmsMessage.uri.includes("<KEYURL>"))?r.default.resolve(!1):r.default.resolve(!0):r.default.resolve(!1)},extract:function(e){return r.default.resolve(e.body)}},{name:"decryptKmsMessage",direction:"inbound",test:function(e,t){return r.default.resolve((0,a.default)(t,"body.kmsMessage")&&(0,n.default)(t.body.kmsMessage))},extract:function(e){return r.default.resolve(e.body)}},{name:"decryptErrorResponse",direction:"inbound",test:function(e,t){return r.default.resolve(Boolean(t.body&&19e5===t.body.errorCode))},extract:function(e){return r.default.resolve(e)}}],transforms:[{name:"encryptKmsMessage",fn:function(e,t){return t&&t.kmsMessage?(0,n.default)(t.kmsMessage)?r.default.resolve():e.webex.internal.encryption.kms.prepareRequest(t.kmsMessage).then(function(e){t.kmsMessage=e.wrapped}):r.default.resolve()}},{name:"decryptKmsMessage",fn:function(e,t){return e.webex.internal.encryption.kms.decryptKmsMessage(t.kmsMessage).then(function(e){t.kmsMessage=e})}},{name:"decryptErrorResponse",fn:function(e,t){var n=t.body.errors.map(function(t){return e.webex.internal.encryption.kms.decryptKmsMessage(t.description).then(function(e){t.description=e})});return n.push(e.webex.internal.encryption.kms.decryptKmsMessage(t.body.message).then(function(e){t.body.message=e})),r.default.all(n).then(function(){return r.default.reject(new LY.DryError(t))})}}]},interceptors:l,config:s.default})});r(u$);u$.DryError,u$.KmsError,u$.KMS;var c$=function(e){return e&&e.length?NA(e):[]};var l$=function(e,t){var r=-1,n=Fp(e)?Array(e.length):[];return UA(e,function(e,i,a){n[++r]=t(e,i,a)}),n};var f$=function(e,t){return(gp(e)?Mf:l$)(e,fN(t,3))},d$=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(_f),n=i(jC);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.file,i=e.type,a=e.thumbnailMaxWidth,o=e.thumbnailMaxHeight,s=e.enableThumbnails,u=e.logger,c=e.isAvatar;if(!i||!i.startsWith("image"))return r.default.resolve();return t=t instanceof Blob?t:new Blob([t]),new r.default(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src=URL.createObjectURL(t)}).then(function(e){var r=(0,n.default)(e,"height","width");if(c){u.info("dimensions will be set for avatar image");var i=r.height>r.width?r.height:r.width;r.height=i,r.width=i}if(!s)return u.info("thumbnails not enabled"),[null,r,null];var l,f,d,p,h,v=(f=a,d=o,p=(l=r).width,(h=l.height)>p?(h>d&&(p=p*d/h,h=d),p>f&&(h=h*f/p,p=f)):(p>f&&(h=h*f/p,p=f),h>d&&(p=p*d/h,h=d)),{height:h,width:p}),m=document.createElement("canvas");m.width=v.width,m.height=v.height;var g=m.getContext("2d");(0,tQ.orient)({orientation:t&&t.image?t.image.orientation:"",img:e,x:0,y:0,width:v.width,height:v.height,ctx:g},t);for(var y=m.toDataURL("image/png").split(","),E=atob(y[1]),b=new ArrayBuffer(E.length),_=new DataView(b),S=0;S<E.length;S+=1)_.setUint8(S,E.charCodeAt(S));return[b,r,v]})}});r(d$);var p$,h$=(p$=Object.freeze({default:{"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0},"application/atsc-held+xml":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/cbor":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["ecma","es"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0},"application/fhir+json":{source:"iana",compressible:!0},"application/fhir+xml":{source:"iana",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0},"application/mmt-usd+xml":{source:"iana",compressible:!0},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",compressible:!0},"application/msc-mixer+xml":{source:"iana",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana"},"application/news-groupinfo":{source:"iana"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana"},"application/nss":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p2p-overlay+xml":{source:"iana",compressible:!0},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana"},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",compressible:!0},"application/pidf-diff+xml":{source:"iana",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0},"application/route-s-tsid+xml":{source:"iana",compressible:!0},"application/route-usd+xml":{source:"iana",compressible:!0},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana"},"application/ttml+xml":{source:"iana",compressible:!0},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0},"application/urc-targetdesc+xml":{source:"iana",compressible:!0},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["keynote"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana"},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana"},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",compressible:!0},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"apache",extensions:["der","crt","pem"]},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0},"application/xcap-caps+xml":{source:"iana",compressible:!0},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana"},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana"},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tone":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana"},"image/avcs":{source:"iana"},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana",compressible:!1},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fwdred":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shex":{extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana"},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vp8":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}}))&&p$.default||p$;var v$=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,m$=function(e){return v$.exec(e).slice(1)};var g$=function(e){return m$(e)[3]};"ab".substr(-1);var y$=n(function(e,t){var r,n,i,a=g$,o=/^\s*([^;\s]*)(?:;|\s|$)/,s=/^text\//i;function u(e){if(!e||"string"!=typeof e)return!1;var t=o.exec(e),r=t&&h$[t[1].toLowerCase()];return r&&r.charset?r.charset:!(!t||!s.test(t[1]))&&"UTF-8"}t.charset=u,t.charsets={lookup:u},t.contentType=function(e){if(!e||"string"!=typeof e)return!1;var r=-1===e.indexOf("/")?t.lookup(e):e;if(!r)return!1;if(-1===r.indexOf("charset")){var n=t.charset(r);n&&(r+="; charset="+n.toLowerCase())}return r},t.extension=function(e){if(!e||"string"!=typeof e)return!1;var r=o.exec(e),n=r&&t.extensions[r[1].toLowerCase()];if(!n||!n.length)return!1;return n[0]},t.extensions=Object.create(null),t.lookup=function(e){if(!e||"string"!=typeof e)return!1;var r=a("x."+e).toLowerCase().substr(1);if(!r)return!1;return t.types[r]||!1},t.types=Object.create(null),r=t.extensions,n=t.types,i=["nginx","apache",void 0,"iana"],Object.keys(h$).forEach(function(e){var t=h$[e],a=t.extensions;if(a&&a.length){r[e]=a;for(var o=0;o<a.length;o++){var s=a[o];if(n[s]){var u=i.indexOf(h$[n[s]].source),c=i.indexOf(t.source);if("application/octet-stream"!==n[s]&&(u>c||u===c&&"application/"===n[s].substr(0,12)))continue}n[s]=e}}})}),E$=(y$.charset,y$.charsets,y$.contentType,y$.extension,y$.extensions,y$.lookup,y$.types,n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(_f);t.default=function(e,t){if(e.type)return t.info("file already has type "+e.type+". using existing file.type."),r.default.resolve(e.type);if(e.mimeType)return t.info("file already has mimeType "+e.type+". using existing file.mimeType."),r.default.resolve(e.mimeType);return(0,XO.detect)(e).then(function(r){return"application/x-msi"===r||"application/octet-stream"===r?(t.info("detected filetype to be "+r+". Falling back to mime.lookup"),n.default.lookup(e.name)):(t.info("detected filetype to be "+r+". returning it"),r)})};var n=i(y$);function i(e){return e&&e.__esModule?e:{default:e}}}));function b$(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}r(E$);var _$,S$=Object.prototype.hasOwnProperty,T$=Object.keys||function(e){var t=[];for(var r in e)S$.call(e,r)&&t.push(r);return t},w$=Array.prototype.slice;function I$(){return void 0!==_$?_$:_$="foo"===function(){}.name}function A$(e){return Object.prototype.toString.call(e)}function C$(e){return!Vg(e)&&("function"==typeof nu.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function x$(e,t){e||M$(e,!0,t,"==",D$)}var O$=/\s*function\s+([^\(\s]*)\s*/;function R$(e){if(py(e)){if(I$())return e.name;var t=e.toString().match(O$);return t&&t[1]}}function N$(e){var t;this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=k$(P$((t=this).actual),128)+" "+t.operator+" "+k$(P$(t.expected),128),this.generatedMessage=!0);var r=e.stackStartFunction||M$;if(Error.captureStackTrace)Error.captureStackTrace(this,r);else{var n=new Error;if(n.stack){var i=n.stack,a=R$(r),o=i.indexOf("\n"+a);if(o>=0){var s=i.indexOf("\n",o+1);i=i.substring(s+1)}this.stack=i}}}function k$(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function P$(e){if(I$()||!py(e))return $g(e);var t=R$(e);return"[Function"+(t?": "+t:"")+"]"}function M$(e,t,r,n,i){throw new N$({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function D$(e,t){e||M$(e,!0,t,"==",D$)}function L$(e,t,r,n){if(e===t)return!0;if(Vg(e)&&Vg(t))return 0===b$(e,t);if(fy(e)&&fy(t))return e.getTime()===t.getTime();if(cy(e)&&cy(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(C$(e)&&C$(t)&&A$(e)===A$(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===b$(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(Vg(e)!==Vg(t))return!1;var i=(n=n||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===n.expected.indexOf(t)||(n.actual.push(e),n.expected.push(t),function(e,t,r,n){if(null==e||null==t)return!1;if(hy(e)||hy(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=U$(e),a=U$(t);if(i&&!a||!i&&a)return!1;if(i)return e=w$.call(e),t=w$.call(t),L$(e,t,r);var o,s,u=T$(e),c=T$(t);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!==c[s])return!1;for(s=u.length-1;s>=0;s--)if(o=u[s],!L$(e[o],t[o],r,n))return!1;return!0}(e,t,r,n))}return r?e===t:e==t}function U$(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function j$(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function F$(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&M$(i,r,"Missing expected exception"+n);var a="string"==typeof n,o=!e&&i&&!r;if((!e&&dy(i)&&a&&j$(i,r)||o)&&M$(i,r,"Got unwanted exception"+n),e&&i&&r&&!j$(i,r)||!e&&i)throw i}x$.AssertionError=N$,qg(N$,Error),x$.fail=M$,x$.ok=D$,x$.equal=function e(t,r,n){t!=r&&M$(t,r,n,"==",e)},x$.notEqual=function e(t,r,n){t==r&&M$(t,r,n,"!=",e)},x$.deepEqual=function e(t,r,n){L$(t,r,!1)||M$(t,r,n,"deepEqual",e)},x$.deepStrictEqual=function e(t,r,n){L$(t,r,!0)||M$(t,r,n,"deepStrictEqual",e)},x$.notDeepEqual=function e(t,r,n){L$(t,r,!1)&&M$(t,r,n,"notDeepEqual",e)},x$.notDeepStrictEqual=function e(t,r,n){L$(t,r,!0)&&M$(t,r,n,"notDeepStrictEqual",e)},x$.strictEqual=function e(t,r,n){t!==r&&M$(t,r,n,"===",e)},x$.notStrictEqual=function e(t,r,n){t===r&&M$(t,r,n,"!==",e)},x$.throws=function(e,t,r){F$(!0,e,t,r)},x$.doesNotThrow=function(e,t,r){F$(!1,e,t,r)},x$.ifError=function(e){if(e)throw e};var B$={};ag.prototype.getByte=function(e){return this[e]},ag.prototype.getSignedByte=function(e){return this[e]>127?this[e]-256:this[e]},ag.prototype.getShort=function(e,t){var r=t?(this[e]<<8)+this[e+1]:(this[e+1]<<8)+this[e];return r<0?r+65536:r},ag.prototype.getSignedShort=function(e,t){var r=t?(this[e]<<8)+this[e+1]:(this[e+1]<<8)+this[e];return r>32767?r-65536:r},ag.prototype.getLong=function(e,t){var r=t?(((this[e]<<8)+this[e+1]<<8)+this[e+2]<<8)+this[e+3]:(((this[e+3]<<8)+this[e+2]<<8)+this[e+1]<<8)+this[e];return r<0?r+4294967296:r},ag.prototype.getSignedLong=function(e,t){var r=t?(((this[e]<<8)+this[e+1]<<8)+this[e+2]<<8)+this[e+3]:(((this[e+3]<<8)+this[e+2]<<8)+this[e+1]<<8)+this[e];return r>2147483647?r-4294967296:r},ag.prototype.getString=function(e,t){for(var r=[],n=e;n<e+t;n++)r.push(String.fromCharCode(this[n]));return r.join("")};var V$=1e3,G$=60*V$,q$=60*G$,K$=24*q$,H$=365.25*K$,z$=function(e,t){t=t||{};var r,n=typeof e;if("string"===n&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*H$;case"days":case"day":case"d":return r*K$;case"hours":case"hour":case"hrs":case"hr":case"h":return r*q$;case"minutes":case"minute":case"mins":case"min":case"m":return r*G$;case"seconds":case"second":case"secs":case"sec":case"s":return r*V$;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===n&&!1===isNaN(e))return t.long?W$(r=e,K$,"day")||W$(r,q$,"hour")||W$(r,G$,"minute")||W$(r,V$,"second")||r+" ms":function(e){if(e>=K$)return Math.round(e/K$)+"d";if(e>=q$)return Math.round(e/q$)+"h";if(e>=G$)return Math.round(e/G$)+"m";if(e>=V$)return Math.round(e/V$)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function W$(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var Y$=n(function(e,t){var r;function n(e){function n(){if(n.enabled){var e=n,i=+new Date,a=i-(r||i);e.diff=a,e.prev=r,e.curr=i,r=i;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var u=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;u++;var i=t.formatters[n];if("function"==typeof i){var a=o[u];r=i.call(e,a),o.splice(u,1),u--}return r}),t.formatArgs.call(e,o),(n.log||t.log||console.log.bind(console)).apply(e,o)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,i=0;i<n;i++)r[i]&&("-"===(e=r[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=z$,t.names=[],t.skips=[],t.formatters={}}),X$=(Y$.coerce,Y$.disable,Y$.enable,Y$.enabled,Y$.humanize,Y$.names,Y$.skips,Y$.formatters,n(function(e,t){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==xu&&"env"in xu&&(e=xu.env.DEBUG),e}(t=e.exports=Y$).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,a=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(a=i))}),e.splice(a,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())})),$$=(X$.log,X$.formatArgs,X$.save,X$.load,X$.useColors,X$.storage,X$.colors,X$("exif")),Q$=128;function J$(e,t){if(!(this instanceof J$))return"string"==typeof e&&(e={image:e}),x$("object"==typeof e,"Invalid options object"),new J$(e,function(r,n){if(r)return t(r);t(null,n,e.image)});"string"==typeof e?e={image:e}:e instanceof ag&&(e={image:e});var r={};if(e)for(var n in e)r[n]=e[n];if(this.options=r,["ifd0MaxEntries","ifd1MaxEntries","maxGpsEntries","maxInteroperabilityEntries","agfaMaxEntries","epsonMaxEntries","fujifilmMaxEntries","olympusMaxEntries","panasonicMaxEntries","sanyoMaxEntries"].forEach(function(e){void 0===r[e]&&(r[e]=Q$)}),this.exifData={image:{},thumbnail:{},exif:{},gps:{},interoperability:{},makernote:{}},this.offsets={},r.tiffOffsets&&(exifData.offsets=offsets),$$("New ExifImage options=",e),r.image){if("function"!=typeof t)throw new Error("You have to provide a callback function.");var i=this;setImmediate(function(){i.loadImage(r.image,function(e,n){if(e)return t(e);t(null,n,r.image)})})}}J$.ExifImage=J$;var Z$=J$;J$.prototype.loadImage=function(e,t){x$("function"==typeof t,"Callback must be a function");var r=this;$$("loadImage image=",e),"Buffer"!==e.constructor.name?"String"!==e.constructor.name?t(new Error("Given image is neither a buffer nor a file, please provide one of these.")):B$.readFile(e,function(n,i){n?t(new Error("Encountered the following error while trying to read given image: "+n)):r.processImage("File: "+e,i,t)}):this.processImage("Buffer",e,t)},J$.prototype.processImage=function(e,t,r){x$("string"==typeof e,"Source must be a string"),x$("function"==typeof r,"Callback must be a function");var n=0;if(255!=t[n++]||216!=t[n++]){var i=new Error("The given image is not a JPEG and thus unsupported right now.");return i.source=e,i.code="NOT_A_JPEG",void r(i)}for(this.imageType="JPEG";n<t.length&&255==t[n++];){if(225==t[n++]){try{this.extractExifData(t,n+2,t.getShort(n,!0)-2)}catch(t){return t.code="PARSING_ERROR",t.source=e,$$("Extract exif data error source=",e,"offset=",n,"error=",t),void r(t)}return $$("Extract exif data success source=",e,"exifData=",this.exifData),void r(null,this.exifData)}n+=t.getShort(n,!0)}var a=new Error("No Exif segment found in the given image.");a.source=e,a.code="NO_EXIF_SEGMENT",r(a)},J$.prototype.extractExifData=function(e,r,n){var i,a,o=this.exifData,s=r+6,u=!1!==this.options.noPadding;if(this.offsets.tiff=s,"Exif\0\0"!=e.toString("utf8",r,s))throw new Error("The Exif data is not valid.");if(18761==e.getShort(s))this.isBigEndian=!1;else{if(19789!=e.getShort(s))throw new Error("Invalid TIFF data! Expected 0x4949 or 0x4D4D at offset "+s+" but found 0x"+e[s].toString(16).toUpperCase()+e[s+1].toString(16).toUpperCase()+".");this.isBigEndian=!0}if($$("BigEndian=",this.isBigEndian),42!=e.getShort(s+2,this.isBigEndian)){var c=this.isBigEndian?"0x002A":"0x2A00";throw new Error("Invalid TIFF data! Expected "+c+" at offset "+(s+2)+" but found 0x"+e[s+2].toString(16).toUpperCase()+e[s+3].toString(16).toUpperCase()+".")}i=s+e.getLong(s+4,this.isBigEndian),this.offsets.ifd0=i,a=e.getShort(i,this.isBigEndian),this.options.ifd0MaxEntries&&(a=Math.min(a,this.options.ifd0MaxEntries)),$$("IFD0 ifdOffset=",i,"numberOfEntries=",a);for(var l=0;l<a;l++){(d=this.extractExifEntry(e,i+2+12*l,s,this.isBigEndian,J$.TAGS.exif))&&(59932===d.tagId&&u||(o.image[d.tagName]=d.value))}$$("IFD0 parsed",o.image);var f=e.getLong(i+2+12*a,this.isBigEndian);if(0!=f){i=s+f,this.offsets.ifd1=i,a=e.getShort(i,this.isBigEndian),this.options.ifd1MaxEntries&&(a=Math.min(a,this.options.ifd1MaxEntries)),$$("IFD1 ifdOffset=",i,"numberOfEntries=",a);for(l=0;l<a;l++){(d=this.extractExifEntry(e,i+2+12*l,s,this.isBigEndian,J$.TAGS.exif))&&(59932===d.tagId&&u||(o.thumbnail[d.tagName]=d.value))}if(this.options.fixThumbnailOffset)o.thumbnail[J$.TAGS.exif[513]]&&($$("IFD1 fix thumbnail offset, add=",this.offsets.tiff),o.thumbnail[J$.TAGS.exif[513]]+=this.offsets.tiff);$$("IFD1 parsed",o.thumbnail)}if(o.image[J$.TAGS.exif[34665]]){i=s+o.image[J$.TAGS.exif[34665]],this.offsets.tags=i,a=e.getShort(i,this.isBigEndian),this.options.maxEntries&&(a=Math.min(a,this.options.maxEntries)),$$("EXIF IFD ifdOffset=",i,"numberOfEntries=",a);for(l=0;l<a;l++){(d=this.extractExifEntry(e,i+2+12*l,s,this.isBigEndian,J$.TAGS.exif))&&(59932===d.tagId&&u||(o.exif[d.tagName]=d.value))}$$("EXIF IFD parsed",o.exif)}if(o.image[J$.TAGS.exif[34853]]){i=s+o.image[J$.TAGS.exif[34853]],this.offsets.gps=i,a=e.getShort(i,this.isBigEndian),this.options.maxGpsEntries&&(a=Math.min(a,this.options.maxGpsEntries)),$$("GPS IFD ifdOffset=",i,"numberOfEntries=",a);for(l=0;l<a;l++){(d=this.extractExifEntry(e,i+2+12*l,s,this.isBigEndian,J$.TAGS.gps))&&(59932===d.tagId&&u||(o.gps[d.tagName]=d.value))}$$("GPS IFD parsed",o.gps)}if(o.exif[J$.TAGS.exif[40965]]){i=s+o.exif[J$.TAGS.exif[40965]],this.offsets.interoperability=i,a=e.getShort(i,this.isBigEndian),this.options.maxInteroperabilityEntries&&(a=Math.min(a,this.options.maxInteroperabilityEntries)),$$("Interoperability IFD ifdOffset=",i,"numberOfEntries=",a);for(l=0;l<a;l++){var d;if(!(d=this.extractExifEntry(e,i+2+12*l,s,this.isBigEndian,J$.TAGS.exif)))break;59932===d.tagId&&u||(o.interoperability[d.tagName]=d.value)}$$("Interoperability IFD parsed",o.gps)}if(void 0!==o.exif[J$.TAGS.exif[37500]]){var p;if("OLYMP\0"===o.exif[J$.TAGS.exif[37500]].getString(0,7)||"OLYMP\0"===o.exif[J$.TAGS.exif[37500]].getString(0,7)?p="olympus":"AGFA \0"===o.exif[J$.TAGS.exif[37500]].getString(0,7)?p="agfa":"EPSON\0\0"===o.exif[J$.TAGS.exif[37500]].getString(0,8)?p="epson":"FUJIFILM"===o.exif[J$.TAGS.exif[37500]].getString(0,8)?p="fujifilm":"Panasonic"===o.exif[J$.TAGS.exif[37500]].getString(0,9)?p="panasonic":"SANYO"===o.exif[J$.TAGS.exif[37500]].getString(0,5)&&(p="sanyo"),$$("Makernote IFD ifdOffset=",i,"type=",p),p){var h=t().extractMakernotes;o.makernote=h.call(this,e,this.makernoteOffset,s)}else o.makernote.error="Unable to extract Makernote information as it is in an unsupported or unrecognized format.";$$("Makernote IFD parsed",o.makernote)}},J$.prototype.extractExifEntry=function(e,t,r,n,i){var a={tag:e.slice(t,t+2),tagId:null,tagName:null,format:e.getShort(t+2,n),components:e.getLong(t+4,n),valueOffset:null,value:[]};if(a.tagId=a.tag.getShort(0,n),i&&i[a.tagId]&&"function"==typeof i[a.tagId]){if(a.tagName=i[a.tagId].call(this,a),!a.tagName)return!1}else{if(!i||!i[a.tagId])return!1;if(a.tagName=i[a.tagId],void 0===a.tagName)return!1}switch(a.format){case 1:a.valueOffset=a.components<=4?t+8:e.getLong(t+8,n)+r;for(var o=0;o<a.components;o++)a.value.push(e.getByte(a.valueOffset+o));break;case 2:a.valueOffset=a.components<=4?t+8:e.getLong(t+8,n)+r,a.value=e.getString(a.valueOffset,a.components),"\0"===a.value[a.value.length-1]&&(a.value=a.value.substring(0,a.value.length-1));break;case 3:a.valueOffset=a.components<=2?t+8:e.getLong(t+8,n)+r;for(o=0;o<a.components;o++)a.value.push(e.getShort(a.valueOffset+2*o,n));break;case 4:a.valueOffset=1==a.components?t+8:e.getLong(t+8,n)+r;for(o=0;o<a.components;o++)a.value.push(e.getLong(a.valueOffset+4*o,n));break;case 5:a.valueOffset=e.getLong(t+8,n)+r;for(o=0;o<a.components;o++)a.value.push(e.getLong(a.valueOffset+8*o,n)/e.getLong(a.valueOffset+8*o+4,n));break;case 6:a.valueOffset=a.components<=4?t+8:e.getLong(t+8,n)+r;for(o=0;o<a.components;o++)a.value.push(e.getSignedByte(a.valueOffset+o));break;case 7:a.valueOffset=a.components<=4?t+8:e.getLong(t+8,n)+r,a.value.push(e.slice(a.valueOffset,a.valueOffset+a.components));break;case 8:a.valueOffset=a.components<=2?t+8:e.getLong(t+8,n)+r;for(o=0;o<a.components;o++)a.value.push(e.getSignedShort(a.valueOffset+2*o,n));break;case 9:a.valueOffset=1==a.components?t+8:e.getLong(t+8,n)+r;for(o=0;o<a.components;o++)a.value.push(e.getSignedLong(a.valueOffset+4*o,n));break;case 10:a.valueOffset=e.getLong(t+8,n)+r;for(o=0;o<a.components;o++)a.value.push(e.getSignedLong(a.valueOffset+8*o,n)/e.getSignedLong(a.valueOffset+8*o+4,n));break;default:return!1}return"MakerNote"===a.tagName&&(this.offsets.makernoteOffset=a.valueOffset),1==a.value.length&&(a.value=a.value[0]),a},J$.TAGS={exif:{1:"InteropIndex",2:"InteropVersion",11:"ProcessingSoftware",254:"SubfileType",255:"OldSubfileType",256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Thresholding",264:"CellWidth",265:"CellLength",266:"FillOrder",269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",285:"PageName",286:"XPosition",287:"YPosition",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",292:"T4Options",293:"T6Options",296:"ResolutionUnit",297:"PageNumber",300:"ColorResponseUnit",301:"TransferFunction",305:"Software",306:"ModifyDate",315:"Artist",316:"HostComputer",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",320:"ColorMap",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFD",332:"InkSet",333:"InkNames",334:"NumberofInks",336:"DotRange",337:"TargetPrinter",338:"ExtraSamples",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",435:"T82Options",437:"JPEGTables",512:"JPEGProc",513:"ThumbnailOffset",514:"ThumbnailLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"ApplicationNotes",999:"USPTOMiscellaneous",4096:"RelatedImageFileFormat",4097:"RelatedImageWidth",4098:"RelatedImageHeight",18246:"Rating",18247:"XP_DIP_XML",18248:"StitchInfo",18249:"RatingPercent",32781:"ImageID",32931:"WangTag1",32932:"WangAnnotation",32933:"WangTag3",32934:"WangTag4",32995:"Matteing",32996:"DataType",32997:"ImageDepth",32998:"TileDepth",33405:"Model2",33421:"CFARepeatPatternDim",33422:"CFAPattern2",33423:"BatteryLevel",33424:"KodakIFD",33432:"Copyright",33434:"ExposureTime",33437:"FNumber",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"PixelScale",33589:"AdventScale",33590:"AdventRevision",33628:"UIC1Tag",33629:"UIC2Tag",33630:"UIC3Tag",33631:"UIC4Tag",33723:"IPTC-NAA",33918:"IntergraphPacketData",33919:"IntergraphFlagRegisters",33920:"IntergraphMatrix",33921:"INGRReserved",33922:"ModelTiePoint",34016:"Site",34017:"ColorSequence",34018:"IT8Header",34019:"RasterPadding",34020:"BitsPerRunLength",34021:"BitsPerExtendedRunLength",34022:"ColorTable",34023:"ImageColorIndicator",34024:"BackgroundColorIndicator",34025:"ImageColorValue",34026:"BackgroundColorValue",34027:"PixelIntensityRange",34028:"TransparencyIndicator",34029:"ColorCharacterization",34030:"HCUsage",34031:"TrapIndicator",34032:"CMYKEquivalent",34118:"SEMInfo",34152:"AFCP_IPTC",34232:"PixelMagicJBIGOptions",34264:"ModelTransform",34306:"WB_GRGBLevels",34310:"LeafData",34377:"PhotoshopSettings",34665:"ExifOffset",34675:"ICC_Profile",34687:"TIFF_FXExtensions",34688:"MultiProfiles",34689:"SharedData",34690:"T88Options",34732:"ImageLayer",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34850:"ExposureProgram",34852:"SpectralSensitivity",34853:"GPSInfo",34855:"ISO",34856:"Opto-ElectricConvFactor",34857:"Interlace",34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",34908:"FaxRecvParams",34909:"FaxSubAddress",34910:"FaxRecvTime",34954:"LeafSubIFD",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"CreateDate",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureCompensation",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37387:"FlashEnergy",37388:"SpatialFrequencyResponse",37389:"Noise",37390:"FocalPlaneXResolution",37391:"FocalPlaneYResolution",37392:"FocalPlaneResolutionUnit",37393:"ImageNumber",37394:"SecurityClassification",37395:"ImageHistory",37396:"SubjectArea",37397:"ExposureIndex",37398:"TIFF-EPStandardID",37399:"SensingMethod",37434:"CIP3DataFile",37435:"CIP3Sheet",37436:"CIP3Side",37439:"StoNits",37500:"MakerNote",37510:"UserComment",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37679:"MSDocumentText",37680:"MSPropertySetStorage",37681:"MSDocumentTextPosition",37724:"ImageSourceData",40091:"XPTitle",40092:"XPComment",40093:"XPAuthor",40094:"XPKeywords",40095:"XPSubject",40960:"FlashpixVersion",40961:"ColorSpace",40962:"ExifImageWidth",40963:"ExifImageHeight",40964:"RelatedSoundFile",40965:"InteropOffset",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41485:"Noise",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41489:"ImageNumber",41490:"SecurityClassification",41491:"ImageHistory",41492:"SubjectLocation",41493:"ExposureIndex",41494:"TIFF-EPStandardID",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFormat",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"OwnerName",42033:"SerialNumber",42034:"LensInfo",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42112:"GDALMetadata",42113:"GDALNoData",42240:"Gamma",44992:"ExpandSoftware",44993:"ExpandLens",44994:"ExpandFilm",44995:"ExpandFilterLens",44996:"ExpandScanner",44997:"ExpandFlashLamp",48129:"PixelFormat",48130:"Transformation",48131:"Uncompressed",48132:"ImageType",48256:"ImageWidth",48257:"ImageHeight",48258:"WidthResolution",48259:"HeightResolution",48320:"ImageOffset",48321:"ImageByteCount",48322:"AlphaOffset",48323:"AlphaByteCount",48324:"ImageDataDiscard",48325:"AlphaDataDiscard",50215:"OceScanjobDesc",50216:"OceApplicationSelector",50217:"OceIDNumber",50218:"OceImageLogic",50255:"Annotations",50341:"PrintIM",50560:"USPTOOriginalContentType",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50739:"ShadowScale",50740:"DNGPrivateData",50741:"MakerNoteSafety",50752:"RawImageSegmentation",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50781:"RawDataUniqueID",50784:"AliasLayerMetadata",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50829:"ActiveArea",50830:"MaskedAreas",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50935:"NoiseReductionApplied",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:"ProfileEmbedPolicy",50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:"PreviewColorSpace",50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50974:"SubTileBlockSize",50975:"RowInterleaveFactor",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51008:"OpcodeList1",51009:"OpcodeList2",51022:"OpcodeList3",51041:"NoiseProfile",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:"ProfileHueSatMapEncoding",51108:"ProfileLookTableEncoding",51109:"BaselineExposureOffset",51110:"DefaultBlackRender",51111:"NewRawImageDigest",51112:"RawToPreviewGain",51125:"DefaultUserCrop",59932:"Padding",59933:"OffsetSchema",65000:"OwnerName",65001:"SerialNumber",65002:"Lens",65024:"KDC_IFD",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"}};var eQ=Z$,tQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.detectFileType=t.processImage=void 0;var r=n(_f);function n(e){return e&&e.__esModule?e:{default:e}}t.drawImage=a,t.updateImageOrientation=function(e){return new r.default(function(t){var r=new FileReader;r.readAsArrayBuffer(e),r.onload=function(){var e=r.result,n=ag.from(e);t(n)}}).then(function(t){return o(e,t)})},t.readExifData=o,t.orient=function(e,t){if(t&&t.image&&t.image.orientation&&1!==t.image.orientation){var r={img:e.img,x:e.x,y:e.y,width:e.width,height:e.height,deg:0,flip:!0,ctx:e.ctx};switch(e&&e.orientation){case 3:r.deg=180,r.flip=!1;break;case 4:r.deg=180,r.flip=!0;break;case 5:r.deg=270,r.flip=!0;break;case 6:r.deg=270,r.flip=!1;break;case 7:r.deg=90,r.flip=!0;break;case 8:r.deg=90,r.flip=!1}a(r)}else e.ctx.drawImage(e.img,e.x,e.y,e.width,e.height)},Object.defineProperty(t,"processImage",{enumerable:!0,get:function(){return n(d$).default}}),Object.defineProperty(t,"detectFileType",{enumerable:!0,get:function(){return n(E$).default}});var i=eQ.ExifImage;function a(e){e.ctx.save();var t=void 0;t=e.flip?e.deg*Math.PI/180:2*Math.PI-e.deg*Math.PI/180,e.ctx.translate(e.x+e.width/2,e.y+e.height/2),e.ctx.rotate(t),e.flip&&e.ctx.scale(-1,1),e.ctx.drawImage(e.img,-e.width/2,-e.height/2,e.width,e.height),e.ctx.restore()}function o(e,t){return new r.default(function(r){e&&e.image&&("image/jpeg"===e.type||"image/jpeg"===e.mimeType)?new i({image:t},function(n,i){!n&&i&&(e.image.orientation=i.image.Orientation),r(t)}):r(t)})}});r(tQ);tQ.detectFileType,tQ.processImage,tQ.drawImage,tQ.updateImageOrientation,tQ.readExifData,tQ.orient;var rQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidUserCreation=t.ConversationError=void 0;var r=o(hT),n=o(zy),i=o(vT),a=o(mT);function o(e){return e&&e.__esModule?e:{default:e}}var s=t.ConversationError=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(cI.Exception);t.InvalidUserCreation=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,a.default)(t,e),t}(s)});r(rQ);rQ.InvalidUserCreation,rQ.ConversationError;var nQ=function(e,t){var r=[];return UA(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r};var iQ=function(e,t){return(gp(e)?Xp:nQ)(e,fN(t,3))},aQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FILE_SYMBOL=t.EMITTER_SYMBOL=void 0;var r=v(fc),n=v(NC),i=v(kC),a=v(nC),o=v(Af),s=v(_f),u=v(Rf),c=v(gb),l=v(ub),f=v(EN),d=v(jC),p=v(f$),h=v(iQ);function v(e){return e&&e.__esModule?e:{default:e}}var m=t.EMITTER_SYMBOL=(0,l.default)("EMITTER_SYMBOL"),g=t.FILE_SYMBOL=(0,l.default)("FILE_SYMBOL"),y=(0,l.default)("PROMISE_SYMBOL"),E=XR.WebexPlugin.extend({getSymbols:function(){return{file:g,emitter:m}},namespace:"Conversation",derived:{target:{deps:["conversation"],fn:function(){return this.conversation}}},session:{conversation:{required:!0,type:"object"},content:"string",clientTempId:"string",displayName:"string",enableThumbnails:{default:!0,type:"boolean"},hiddenSpaceUrl:"object",mentions:"object",spaceUrl:"object",uploads:{type:"object",default:function(){return new c.default}}},initialize:function(e,t){(0,u.default)(XR.WebexPlugin.prototype.initialize,this,[e,t]),e&&e.conversation&&(this.spaceUrl=s.default.resolve(e.conversation._spaceUrl||this._retrieveSpaceUrl(e.conversation.url+"/space").then(function(t){return e.conversation._spaceUrl=t,t})),this.hiddenSpaceUrl=s.default.resolve(e.conversation._hiddenSpaceUrl||this._retrieveSpaceUrl(e.conversation.url+"/space/hidden").then(function(t){return e.conversation._hiddenSpaceUrl=t,t})))},add:function(e,t){var r,n=this;t=t||{};var u=this.uploads.get(e);if(u)return u[y];var c=new TS.EventEmitter;u=(0,o.default)((r={displayName:e.name,fileSize:e.size||e.byteLength||e.length,mimeType:e.type,objectType:"file"},(0,a.default)(r,m,c),(0,a.default)(r,g,e),r),(0,d.default)(t,"actions")),this.uploads.set(e,u);var l=(0,tQ.detectFileType)(e,this.logger).then(function(t){return u.mimeType=t,(0,tQ.processImage)({file:e,type:t,thumbnailMaxWidth:n.config.thumbnailMaxWidth,thumbnailMaxHeight:n.config.thumbnailMaxHeight,enableThumbnails:n.enableThumbnails,logger:n.logger})}).then(function(t){var r=n.webex.internal.encryption.encryptBinary(e).then(function(e){var t=e.scr,r=e.cdata;return u.scr=t,s.default.all([r,n.spaceUrl])}).then(function(e){var t=(0,i.default)(e,2),r=t[0],a=t[1],o=n._upload(r,a+"/upload_sessions");return(0,cI.transferEvents)("progress",o,c),o}).then(function(e){u.url=u.scr.loc=e.downloadUrl}),a=void 0;if(t){var l=(0,i.default)(t,3),f=l[0],d=l[1],p=l[2];(0,o.default)(u,d),f&&p&&(u.image=p,a=n.webex.internal.encryption.encryptBinary(f).then(function(e){var t=e.scr,r=e.cdata;return u.image.scr=t,s.default.all([r,n.hiddenSpaceUrl])}).then(function(e){var t=(0,i.default)(e,2),r=t[0],a=t[1];return n._upload(r,a+"/upload_sessions")}).then(function(e){u.image.url=u.image.scr.loc=e.downloadUrl}))}return s.default.all([r,a])});return u[y]=l,(0,cI.proxyEvents)(c,l),l},getFiles:function(){var e=[],t=!0,r=!1,a=void 0;try{for(var o,s=(0,n.default)(this.uploads);!(t=(o=s.next()).done);t=!0){var u=o.value,c=(0,i.default)(u,1)[0];e.push(this.uploads.get(c)[g])}}catch(e){r=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(r)throw a}}return e},_upload:function(e,t){var r=e.length||e.size||e.byteLength;return this.webex.upload({uri:t,file:e,qs:{transcode:!0},phases:{initialize:{fileSize:r},upload:{$url:function(e){return e.uploadUrl}},finalize:{$uri:function(e){return e.finishUploadUrl},body:{fileSize:r}}}})},remove:function(e){return this.uploads.delete(e),s.default.resolve()},prepare:function(){if(!this.uploads.size)throw new Error("Cannot submit a share activity without atleast one file");var e={verb:"share",object:{objectType:"content",displayName:this.object&&this.object.displayName?this.object.displayName:void 0,content:this.object&&this.object.content?this.object.content:void 0,mentions:this.object&&this.object.mentions?this.object.mentions:void 0,files:{items:[]}},clientTempId:this.clientTempId},t=[];return this.uploads.forEach(function(r){e.object.files.items.push(r),t.push(r[y])}),e.object.contentCategory=this._determineContentCategory(e.object.files.items),s.default.all(t).then(function(){return e})},_itemContainsActionWithMimeType:function(e,t){return(0,f.default)(e.map(function(e){return(0,f.default)(e.actions,{mimeType:t})}))},_determineContentCategory:function(e){if(this._itemContainsActionWithMimeType(e,"application/x-cisco-webex-whiteboard"))return"documents";var t=(0,h.default)((0,p.default)(e,"mimeType"));if(t.length!==e.length)return"documents";var r=t[0].split("/").shift();if("video"!==r&&"image"!==r)return"documents";var i=!0,a=!1,o=void 0;try{for(var s,u=(0,n.default)(t);!(i=(s=u.next()).done);i=!0){if(s.value.split("/").shift()!==r)return"documents"}}catch(e){a=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw o}}return r+"s"},_retrieveSpaceUrl:function(e){return this.webex.request({method:"PUT",uri:e}).then(function(e){return e.body.spaceUrl})},version:"1.77.8"});E.create=function(e,t,n){if(t instanceof E)return t;var i=void 0;t&&t.object&&t.object.files&&(i=t.object.files,(0,r.default)(t.object,"files"));var a=new E((0,o.default)({conversation:e},t),{parent:n});return(i=i&&i.items||i)&&i.forEach(function(e){return a.add(e)}),a},t.default=E});r(aQ);aQ.FILE_SYMBOL,aQ.EMITTER_SYMBOL;var oQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=T(kC),n=T(NC),i=T(hS),a=T(_f),o=T(Af),s=T(vS),u=T(gb),c=T(c$),l=T(jC),f=T(fm),d=T(pR),p=T(f$),h=T(Mv),v=T(OI),m=T(ld),g=T(gp),y=T(_S),E=T(ym),b=T(Am),_=T(AR),S=T(aQ);function T(e){return e&&e.__esModule?e:{default:e}}var w=new u.default,I=XR.WebexPlugin.extend({namespace:"Conversation",acknowledge:function(){var e=(0,s.default)(i.default.mark(function e(t,r,n){var s,u,c=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getConvoUrl(t);case 2:if(s=e.sent,u=(0,o.default)({},t,{url:s}),(0,m.default)(r)){e.next=6;break}return e.abrupt("return",a.default.reject(new Error("`object` must be an object")));case 6:return e.abrupt("return",this.prepare(n,{verb:"acknowledge",target:this.prepareConversation(u),object:{objectType:"activity",id:r.id,url:r.url}}).then(function(e){return c.submit(e)}));case 7:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),add:function(){var e=(0,s.default)(i.default.mark(function e(t,r,n){var a,s,u=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getConvoUrl(t);case 2:return a=e.sent,s=(0,o.default)({},t,{url:a}),e.abrupt("return",this.webex.internal.user.asUUID(r,{create:!0}).then(function(e){return u.prepare(n,{verb:"add",target:u.prepareConversation(s),object:{id:e,objectType:"person"},kmsMessage:{method:"create",uri:"/authorizations",resourceUri:"<KRO>",userIds:[e]}}).then(function(e){return u.submit(e)})}));case 5:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),create:function(e,t){var r=this;return t=t||{},e.participants&&0!==e.participants.length?a.default.all(e.participants.map(function(e){return r.webex.internal.user.asUUID(e,{create:!0}).catch(function(e){return t.allowPartialCreation?void 0:a.default.reject(e)})})).then(function(n){n.unshift(r.webex.internal.device.userId);var i=(n=(0,c.default)(n)).filter(function(e){return e});return e.participants=i,2!==n.length||t&&t.forceGrouped?r._createGrouped(e,t):e.participants[1]?t.skipOneOnOneFetch?r._createOneOnOne(e):r._maybeCreateOneOnOneThenPost(e,t):a.default.reject(new rQ.InvalidUserCreation)}).then(function(t){return e.files?r.webex.internal.conversation.share(t,e.files).then(function(e){return t.activities.items.push(e),t}):t}):a.default.reject(new Error("`params.participants` is required"))},delete:function(){var e=(0,s.default)(i.default.mark(function e(t,r,n){var s,u,c=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getConvoUrl(t);case 2:if(s=e.sent,u=(0,o.default)({},t,{url:s}),(0,m.default)(r)){e.next=6;break}return e.abrupt("return",a.default.reject(new Error("`object` must be an object")));case 6:return e.abrupt("return",this.prepare(n,{verb:"delete",target:this.prepareConversation(u),object:(0,l.default)(r,"id","url","objectType")}).then(function(e){return c.submit(e)}));case 7:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),download:function(e,t){var r=this,n=Boolean(e.scr&&e.scr.key),i=new TS.EventEmitter,a=void 0;return a=(a=n?this.webex.internal.encryption.download(e.scr):e.scr&&e.scr.loc?this._downloadUnencryptedFile(e.scr.loc,t):this._downloadUnencryptedFile(e.url,t)).on("progress",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.emit.apply(i,["progress"].concat(t))}).then(function(t){return(0,tQ.readExifData)(e,t)}).then(function(t){return r.logger.info("conversation: file downloaded"),e.displayName&&!t.name&&(t.name=e.displayName),!t.type&&e.mimeType&&(t.type=e.mimeType),t}),(0,cI.proxyEvents)(i,a),a},_downloadUnencryptedFile:function(e,t){t=t||{},(0,o.default)(t,{uri:e,responseType:"buffer"});var r=this.request(t).then(function(e){return e.body});return(0,cI.proxyEvents)(t.download,r),r},expand:function(e,t,r,n){var i={actor:n,objectType:"activity",verb:e};return n||(n=this.webex.internal.device.userId),(0,v.default)(n)&&(i.actor={objectType:"person",id:n}),t&&(i.object=t),r&&(i.target=r),i},bulkActivitiesFetch:function(e,t){if(!t){var r={method:"POST",api:"conversation",resource:"bulk_activities_fetch",body:{activities:e}};return this.webex.request(r).then(function(e){var t=[];return e.body.multistatus&&e.body.multistatus.forEach(function(e){"200"===e.status&&e.data&&e.data.activity&&t.push(e.data.activity)}),t})}return[]},get:function(){var e=(0,s.default)(i.default.mark(function e(t){var r,n,s,u=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.user,n=void 0,e.prev=2,r){e.next=9;break}return e.next=6,this.getConvoUrl(t);case 6:e.t0=e.sent,e.next=10;break;case 9:e.t0="";case 10:s=e.t0,n=a.default.resolve({url:s}),e.next=17;break;case 14:e.prev=14,e.t1=e.catch(2),n=this._inferConversationUrl(t);case 17:return e.abrupt("return",n.then(function(e){var t=e.url,n={qs:(0,o.default)({uuidEntryFormat:!0,personRefresh:!0,activitiesLimit:0,includeConvWithDeletedUserUUID:!1,includeParticipants:!1},(0,f.default)(c,"id","user","url"))};return("participantAckFilter"in c||"participantsLimit"in c)&&delete n.qs.includeParticipants,a.default.resolve(r?u.webex.internal.user.asUUID(r):null).then(function(e){return e?(0,o.default)(n,{service:"conversation",resource:"conversations/user/"+e}):n.uri=t,u.request(n)})}).then((0,cI.tap)(function(e){return u._recordUUIDs(e.body)})).then(function(e){return e.body}));case 18:case"end":return e.stop()}},e,this,[[2,14]])}));return function(t){return e.apply(this,arguments)}}(),leave:function(){var e=(0,s.default)(i.default.mark(function e(t,r,n){var s,u=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o.default,e.t1={},e.t2=t,e.next=5,this.getConvoUrl(t);case 5:return e.t3=e.sent,e.t4={url:e.t3},s=(0,e.t0)(e.t1,e.t2,e.t4),e.abrupt("return",a.default.resolve().then(function(){return r||(r=u.webex.internal.device.userId),u.webex.internal.user.asUUID(r).then(function(e){return u.prepare(n,{verb:"leave",target:u.prepareConversation(s),object:{id:e,objectType:"person"},kmsMessage:{method:"delete",uri:"<KRO>/authorizations?"+b.default.stringify({authId:e})}})})}).then(function(e){return u.submit(e)}));case 9:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),list:function(e){return this._list({service:"conversation",resource:"conversations",qs:(0,f.default)(e,"deferDecrypt"),deferDecrypt:e.deferDecrypt}).then(function(e){var t=!0,r=!1,i=void 0;try{for(var a,o=(0,n.default)(e);!(t=(a=o.next()).done);t=!0){var s=a.value;w.set(s.id,s.url)}}catch(e){r=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw i}}return e})},listLeft:function(e){return this._list({service:"conversation",resource:"conversations/left",qs:e}).then(function(e){var t=!0,r=!1,i=void 0;try{for(var a,o=(0,n.default)(e);!(t=(a=o.next()).done);t=!0){var s=a.value;w.set(s.id,s.url)}}catch(e){r=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw i}}return e})},listActivities:function(e){return this._listActivities((0,o.default)(e,{resource:"activities"}))},listMentions:function(e){return this._list({service:"conversation",resource:"mentions",qs:(0,f.default)(e,"mentions")})},muteMentions:function(e,t){return this.tag(e,{tags:["MENTION_NOTIFICATIONS_OFF"]},t)},muteMessages:function(e,t){return this.tag(e,{tags:["MESSAGE_NOTIFICATIONS_OFF"]},t)},cardAction:function(){var e=(0,s.default)(i.default.mark(function e(t,r,n){var a,s=this,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o.default,e.t1={},e.t2=t,e.next=5,this.getConvoUrl(t);case 5:return e.t3=e.sent,e.t4={url:e.t3},a=(0,e.t0)(e.t1,e.t2,e.t4),u.parent={id:n.id,type:"cardAction"},e.abrupt("return",this.prepare(u,{verb:"cardAction",target:this.prepareConversation(a),object:(0,o.default)({objectType:"submit"},r)}).then(function(e){return s.submit(e)}));case 10:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),post:function(){var e=(0,s.default)(i.default.mark(function e(t,r,n){var a,s=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o.default,e.t1={},e.t2=t,e.next=5,this.getConvoUrl(t);case 5:return e.t3=e.sent,e.t4={url:e.t3},a=(0,e.t0)(e.t1,e.t2,e.t4),(0,v.default)(r)&&(r={displayName:r}),e.abrupt("return",this.prepare(n,{verb:"post",target:this.prepareConversation(a),object:(0,o.default)({objectType:"comment"},r)}).then(function(e){return s.submit(e)}));case 10:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),prepareConversation:function(e){return(0,y.default)((0,l.default)(e,"id","url","objectType","defaultActivityEncryptionKeyUrl","kmsResourceObjectUrl"),{objectType:"conversation"})},prepare:function(e,t){var r=this;return t=t||{},e=e||{},a.default.resolve(e.prepare?e.prepare(t):e).then(function(n){return(0,y.default)(n,{verb:t.verb,kmsMessage:t.kmsMessage,objectType:"activity",clientTempId:_.default.v4(),actor:r.webex.internal.device.userId}),(e.parentActivityId&&e.activityType||e.parent&&e.parent.id&&e.parent.type)&&(n.parent={id:e.parentActivityId||e.parent.id,type:e.activityType||e.parent.type}),(0,v.default)(n.actor)&&(n.actor={objectType:"person",id:n.actor}),["actor","object"].forEach(function(e){t[e]&&(n[e]=n[e]||{},(0,y.default)(n[e],t[e]))}),t.target&&(0,d.default)(n,{target:(0,l.default)(t.target,"id","url","objectType","kmsResourceObjectUrl","defaultActivityEncryptionKeyUrl")}),["object","target"].forEach(function(e){n[e]&&n[e].url&&!n[e].id&&(n[e].id=n[e].url.split("/").pop())}),["actor","object","target"].forEach(function(e){if(n[e]&&!n[e].objectType)throw new Error("`act."+e+".objectType` must be defined")}),n.object&&n.object.content&&!n.object.displayName?a.default.reject(new Error("Cannot submit activity object with `content` but no `displayName`")):n})},processActivityEvent:function(e){return this.webex.transform("inbound",e).then(function(){return e})},removeAllMuteTags:function(e,t){return this.untag(e,{tags:["MENTION_NOTIFICATIONS_OFF","MENTION_NOTIFICATIONS_ON","MESSAGE_NOTIFICATIONS_OFF","MESSAGE_NOTIFICATIONS_ON"]},t)},makeShare:function(e,t){return S.default.create(e,t,this.webex)},assign:function(){var e=(0,s.default)(i.default.mark(function e(t,r){var n,s=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r.size||r.length)>1048576)){e.next=2;break}return e.abrupt("return",a.default.reject(new Error("Room avatars must be less than 1MB")));case 2:return e.t0=o.default,e.t1={},e.t2=t,e.next=7,this.getConvoUrl(t);case 7:return e.t3=e.sent,e.t4={url:e.t3},n=(0,e.t0)(e.t1,e.t2,e.t4),e.abrupt("return",a.default.resolve().then(function(){var e=S.default.create(t,null,s.webex);return e.enableThumbnails=!1,e.add(r),s.prepare(e,{target:s.prepareConversation(n)})}).then(function(e){return e.verb="assign",s.submit(e)}));case 11:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),getConvoUrl:function(){var e=(0,s.default)(i.default.mark(function e(t){var r,n,a=t.id,o=t.url,s=t.cluster,u=t.conversations,c=t.generalConversationUuid;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=3;break}return r=u.items.find(function(e){return e.id===c}),e.abrupt("return",r.url);case 3:if(!o){e.next=5;break}return e.abrupt("return",o);case 5:if(!a){e.next=15;break}if(!s){e.next=10;break}return e.next=9,this._inferConversationUrl({id:a});case 9:return e.abrupt("return",e.sent.url);case 10:if(this.logger.warn("You should be using the `url` instead of the `id` property"),n=w.get(a)){e.next=14;break}throw Error("Could not find the `url` from the given `id`");case 14:return e.abrupt("return",n);case 15:throw Error("The space needs a `url` property");case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),updateTypingStatus:function(){var e=(0,s.default)(i.default.mark(function e(t,r){var n,o,s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=6;break}if(!t.url){e.next=5;break}t.id=t.url.split("/").pop(),e.next=6;break;case 5:return e.abrupt("return",a.default.reject(new Error("conversation: could not identify conversation")));case 6:return n=void 0,n=r.typing?"status.start_typing":"status.stop_typing",e.next=10,this.getConvoUrl(t);case 10:return o=e.sent,"status/typing",s={method:"POST",body:{conversationId:t.id,eventType:n},url:o+"/status/typing"},e.abrupt("return",this.request(s));case 14:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),share:function(){var e=(0,s.default)(i.default.mark(function e(t,r){var n,a=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,g.default)(r)&&(r={object:{files:r}}),e.t0=o.default,e.t1={},e.t2=t,e.next=6,this.getConvoUrl(t);case 6:return e.t3=e.sent,e.t4={url:e.t3},n=(0,e.t0)(e.t1,e.t2,e.t4),r instanceof S.default||(r=S.default.create(n,r,this.webex)),e.abrupt("return",this.prepare(r,{target:this.prepareConversation(n)}).then(function(e){return a.submit(e)}));case 11:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),submit:function(){var e=(0,s.default)(i.default.mark(function e(t,r){var n,a,s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r,e.t0){e.next=5;break}return e.next=4,this.getConvoUrl(t.target);case 4:e.t0=e.sent;case 5:return n=e.t0,a="share"===t.verb?"content":"activities",s={method:"POST",body:t,qs:{personRefresh:!0},url:n+"/"+a},"share"===t.verb&&(0,o.default)(s.qs,{transcode:!0,async:!1}),this.webex.trigger("user-activity"),e.abrupt("return",this.request(s).then(function(e){return e.body}));case 11:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),unassign:function(){var e=(0,s.default)(i.default.mark(function e(t,r){var n,a=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o.default,e.t1={},e.t2=t,e.next=5,this.getConvoUrl(t);case 5:return e.t3=e.sent,e.t4={url:e.t3},n=(0,e.t0)(e.t1,e.t2,e.t4),e.abrupt("return",this.prepare(r,{verb:"unassign",target:this.prepareConversation(n),object:{objectType:"content",files:{items:[]}}}).then(function(e){return a.submit(e)}));case 9:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),unmuteMentions:function(e,t){return this.tag(e,{tags:["MENTION_NOTIFICATIONS_ON"]},t)},unmuteMessages:function(e,t){return this.tag(e,{tags:["MESSAGE_NOTIFICATIONS_ON"]},t)},update:function(){var e=(0,s.default)(i.default.mark(function e(t,r,n){var s,u=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,m.default)(r)){e.next=2;break}return e.abrupt("return",a.default.reject(new Error("`object` must be an object")));case 2:return e.t0=o.default,e.t1={},e.t2=t,e.next=7,this.getConvoUrl(t);case 7:return e.t3=e.sent,e.t4={url:e.t3},s=(0,e.t0)(e.t1,e.t2,e.t4),e.abrupt("return",this.prepare(n,{verb:"update",target:this.prepareConversation(s),object:r}).then(function(e){return u.submit(e)}));case 11:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),updateKey:function(){var e=(0,s.default)(i.default.mark(function e(t,r,n){var a,s=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o.default,e.t1={},e.t2=t,e.next=5,this.getConvoUrl(t);case 5:return e.t3=e.sent,e.t4={url:e.t3},a=(0,e.t0)(e.t1,e.t2,e.t4),e.abrupt("return",this.get(a,{activitiesLimit:0,includeParticipants:!0}).then(function(e){return s._updateKey(e,r,n)}));case 9:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),_updateKey:function(){var e=(0,s.default)(i.default.mark(function e(t,r,n){var s,u=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o.default,e.t1={},e.t2=t,e.next=5,this.getConvoUrl(t);case 5:return e.t3=e.sent,e.t4={url:e.t3},s=(0,e.t0)(e.t1,e.t2,e.t4),e.abrupt("return",a.default.resolve(r||this.webex.internal.encryption.kms.createUnboundKeys({count:1})).then(function(e){var t=(0,g.default)(e)?e[0]:e,r={verb:"updateKey",target:u.prepareConversation(s),object:{defaultActivityEncryptionKeyUrl:t.uri,objectType:"conversation"}};return s.defaultActivityEncryptionKeyUrl?r.kmsMessage={method:"update",resourceUri:"<KRO>",uri:t.uri}:r.kmsMessage={method:"create",uri:"/resources",userIds:(0,p.default)(s.participants.items,"id"),keyUris:[t.uri]},u.prepare(n,r).then(function(e){return u.submit(e)})}));case 9:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}(),_create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request({method:"POST",service:"conversation",resource:"conversations",body:e,qs:{forceCreate:t.allowPartialCreation}}).then(function(e){return e.body})},_createGrouped:function(e,t){return this._create(this._prepareConversationForCreation(e),t)},_createOneOnOne:function(e){var t=this._prepareConversationForCreation(e);return t.tags=["ONE_ON_ONE"],this._create(t)},_inferConversationUrl:function(e){var t=this;return e.id?this.webex.internal.feature.getFeature("developer","web-high-availability").then(function(r){return r?t.webex.internal.device.getServiceUrl("conversation").then(function(t){return e.url=t+"/conversations/"+e.id,e}):e.url?a.default.resolve(e):t.webex.internal.device.getServiceUrl("conversation").then(function(r){return e.url=r+"/conversations/"+e.id,"production"!==xu.env.NODE_ENV&&t.logger.warn("conversation: inferred conversation url from conversation id; please pass whole conversation objects to Conversation methods"),e})}):a.default.resolve(e)},_listActivities:function(){var e=(0,s.default)(i.default.mark(function e(t){var r,n,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.conversationId,e.next=3,this.getConvoUrl({url:t.conversationUrl,id:r});case 3:return n=e.sent,a=t.resource,e.abrupt("return",this._list({qs:(0,f.default)(t,"resource"),url:n+"/"+a}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),_list:function(e){var t=this;return e.qs=(0,o.default)({personRefresh:!0,uuidEntryFormat:!0,activitiesLimit:0,participantsLimit:0},e.qs),this.request(e).then(function(e){if(!e.body||!e.body.items||0===e.body.items.length)return[];var r=e.body.items;return(0,h.default)(r).published<r[0].published&&r.reverse(),a.default.all(r.map(function(e){return t._recordUUIDs(e)})).then(function(){return r})})},_maybeCreateOneOnOneThenPost:function(e,t){var r=this;return this.get((0,y.default)({user:e.participants[1]}),(0,o.default)(t,{includeConvWithDeletedUserUUID:!0,includeParticipants:!0})).then(function(t){return e.comment||e.html?r.post(t,{content:e.html,displayName:e.comment}).then(function(e){return t.activities.items.push(e),t}):t}).catch(function(t){return 404!==t.statusCode?a.default.reject(t):r._createOneOnOne(e)})},_prepareConversationForCreation:function(e){var t=this,r={activities:{items:[this.expand("create")]},objectType:"conversation",kmsMessage:{method:"create",uri:"/resources",userIds:(0,E.default)(e.participants),keyUris:[]}};return e.displayName&&(r.displayName=e.displayName),e.participants.forEach(function(e){r.activities.items.push(t.expand("add",{objectType:"person",id:e}))}),e.comment&&r.activities.items.push(this.expand("post",{objectType:"comment",content:e.html,displayName:e.comment})),r},_recordUUIDs:function(e){var t=this;return e.participants&&e.participants.items?a.default.all(e.participants.items.map(function(e){return"ROOM"===e.type?a.default.resolve():t.webex.internal.user.recordUUID(e).catch(function(r){return t.logger.warn("Could not record uuid for "+(e.id||e.entryUUID),r)})})):a.default.resolve(e)},version:"1.77.8"});["favorite","hide","lock","mute","unfavorite","unhide","unlock","unmute"].forEach(function(e){I.prototype[e]=function(){var t=(0,s.default)(i.default.mark(function t(r,n){var a,s=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.t1=o.default,t.t2={},t.t3=r,t.next=6,this.getConvoUrl(r);case 6:return t.t4=t.sent,t.t5={url:t.t4},t.t6=(0,t.t1)(t.t2,t.t3,t.t5),a=t.t0.prepareConversation.call(t.t0,t.t6),t.abrupt("return",this.prepare(n,{verb:e,object:a,target:a}).then(function(e){return s.submit(e)}));case 11:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()}),["assignModerator","unassignModerator"].forEach(function(e){I.prototype[e]=function(){var t=(0,s.default)(i.default.mark(function t(n,s,u){var c,l=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=o.default,t.t1={},t.t2=n,t.next=5,this.getConvoUrl(n);case 5:return t.t3=t.sent,t.t4={url:t.t3},c=(0,t.t0)(t.t1,t.t2,t.t4),t.abrupt("return",a.default.all([c,s?this.webex.internal.user.asUUID(s):this.webex.internal.device.userId]).then(function(t){var n=(0,r.default)(t,2),i=n[0],a=n[1];return l.prepare(u,{verb:e,target:l.prepareConversation(i),object:{id:a,objectType:"person"}})}).then(function(e){return l.submit(e)}));case 9:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}),["setSpaceProperty","unsetSpaceProperty"].forEach(function(e){var t=e.startsWith("set")?"set":"unset";I.prototype[e]=function(){var e=(0,s.default)(i.default.mark(function e(r,n,s){var u,c=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,v.default)(n)){e.next=2;break}return e.abrupt("return",a.default.reject(new Error("`tag` must be a string")));case 2:return e.t0=o.default,e.t1={},e.t2=r,e.next=7,this.getConvoUrl(r);case 7:return e.t3=e.sent,e.t4={url:e.t3},u=(0,e.t0)(e.t1,e.t2,e.t4),e.abrupt("return",this.prepare(s,{verb:t,target:this.prepareConversation(u),object:{tags:[n],objectType:"spaceProperty"}}).then(function(e){return c.submit(e)}));case 11:case"end":return e.stop()}},e,this)}));return function(t,r,n){return e.apply(this,arguments)}}()}),["tag","untag"].forEach(function(e){I.prototype[e]=function(){var t=(0,s.default)(i.default.mark(function t(r,n,s){var u,c=this;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((0,m.default)(n)){t.next=2;break}return t.abrupt("return",a.default.reject(new Error("`object` must be an object")));case 2:return t.t0=this,t.t1=o.default,t.t2={},t.t3=r,t.next=8,this.getConvoUrl(r);case 8:return t.t4=t.sent,t.t5={url:t.t4},t.t6=(0,t.t1)(t.t2,t.t3,t.t5),u=t.t0.prepareConversation.call(t.t0,t.t6),t.abrupt("return",this.prepare(s,{verb:e,target:u,object:(0,o.default)(u,n)}).then(function(e){return c.submit(e)}));case 13:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}),t.default=I});r(oQ);var sQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(fI),n=i(_f);function i(e){return e&&e.__esModule?e:{default:e}}var a=XR.Batcher.extend({namespace:"User",prepareItem:function(e){return n.default.resolve({email:e})},handleHttpSuccess:function(e){var t=this;return n.default.all((0,r.default)(e.body).map(function(r){return e.body[r]&&e.body[r].id?t.handleItemSuccess(r,e.body[r]):t.handleItemFailure(r,e.body[r])}))},handleItemFailure:function(e,t){return this.getDeferredForResponse(e).then(function(e){e.reject(t)})},handleItemSuccess:function(e,t){return this.getDeferredForResponse(e).then(function(e){e.resolve(t)})},fingerprintRequest:function(e){return n.default.resolve(e.email||e)},fingerprintResponse:function(e){return n.default.resolve(e)}}),o=a.extend({submitHttpRequest:function(e){return this.webex.request({method:"POST",service:"conversation",resource:"/users",body:e})}}),s=a.extend({submitHttpRequest:function(e){return this.webex.request({method:"POST",service:"conversation",resource:"/users",body:e,qs:{shouldCreateUsers:!0}})}}),u=XR.WebexPlugin.extend({children:{faker:o,creator:s},request:function(e){return e.create?this.creator.request(e.email):this.faker.request(e.email)},version:"1.77.8"});t.default=u});r(sQ);var uQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(Af),n=u(_f),i=u(gb),a=u(zy),o=u($y),s=u(gE);function u(e){return e&&e.__esModule?e:{default:e}}var c=new s.default,l=new s.default,f=function(){function e(){(0,a.default)(this,e),c.set(this,new i.default),l.set(this,new i.default)}return(0,o.default)(e,[{key:"add",value:function(e){var t=this;if(!e.id)return n.default.reject(new Error("`user.id` is required"));if(!e.emailAddress)return n.default.reject(new Error("`user.emailAddress` is required"));if(!cI.patterns.uuid.test(e.id))return n.default.reject(new Error("`user.id` does not appear to be a uuid"));if(!cI.patterns.email.test(e.emailAddress))return n.default.reject(new Error("`user.emailAddress` does not appear to be an email address"));var i=this.getById(e.id).then(function(n){return l.get(t).set(e.id,(0,r.default)({},n,e))}).catch(function(){return l.get(t).set(e.id,(0,r.default)({},e))}),a=this.getByEmail(e.emailAddress).then(function(n){return c.get(t).set(e.emailAddress,(0,r.default)({},n,e))}).catch(function(){return c.get(t).set(e.emailAddress,(0,r.default)({},e))});return n.default.all([i,a])}},{key:"get",value:function(e){return cI.patterns.uuid.test(e)?this.getById(e):cI.patterns.email.test(e)?this.getByEmail(e):n.default.reject(new Error("`id` does not appear to be a valid user identifier"))}},{key:"getById",value:function(e){var t=l.get(this).get(e);return t?n.default.resolve(t):n.default.reject(new Error("No user found by specified id"))}},{key:"getByEmail",value:function(e){var t=c.get(this).get(e);return t?n.default.resolve(t):n.default.reject(new Error("No user found by specified email address"))}}]),e}();t.default=f});r(uQ);var cQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i,a,o,s=h(uc),u=h(Rf),c=h(Af),l=h(_f),f=h(gp),d=h(sQ),p=h(uQ);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r,n,i){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce(function(r,n){return n(e,t,r)||r},a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var m=XR.WebexPlugin.extend((r=(0,XR.waitForValue)("@"),n=(0,cI.oneFlight)({keyFactory:function(e,t){return e+String(t&&t.create)}}),i=(0,XR.persist)("@"),a=(0,cI.deprecated)("Use User#verify()"),v(o={namespace:"User",children:{batcher:d.default},props:{hasPassword:{default:!1,type:"boolean"}},session:{store:{default:function(){return new p.default},type:"any"}},activate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(t.verificationToken||t.confirmationCode&&t.id))return l.default.reject(new Error("either options.verificationToken is required or both options.confirmationCode and options.id are required"));if(this.webex.config.credentials.federation&&!t.email)return l.default.reject(new Error("email is required with federation option"));t.scope=this.webex.config.credentials.scope;var r=this.webex.config.credentials.federation&&t.email&&t.verificationToken;return this.getUserCI(t.email,r).then(function(){var r=(0,c.default)({},t);return delete r.email,e.request({uri:e.webex.config.credentials.activationUrl,method:"POST",body:r,auth:{user:e.webex.config.credentials.client_id,pass:e.webex.config.credentials.client_secret,sendImmediately:!0}}).then(function(t){return e.webex.credentials.set({supertoken:t.body.tokenData}),t.body})})},asUUID:function(e,t){var r=this;if(!e)return l.default.reject(new Error("`user` is required"));if((0,f.default)(e))return l.default.all(e.map(function(e){return r.asUUID(e,t)}));var n=this._extractUUID(e);if((!t||!t.force)&&cI.patterns.uuid.test(n))return l.default.resolve(n);var i=this._extractEmailAddress(e);return cI.patterns.email.test(i)?this.getUUID(i,t):l.default.reject(new Error("Provided user object does not appear to identify a user"))},fetchUUID:function(e,t){var r=this;return this.batcher.request({email:e,create:t&&t.create}).then(function(t){return r.recordUUID((0,c.default)({emailAddress:e},t)).then(function(){return t.id})})},get:function(){var e=this;return this.request({service:"conversation",resource:"users"}).then(function(e){return e.body}).then((0,cI.tap)(function(t){return e.recordUUID({id:t.id,emailAddress:t.email||t.emailAddress})}))},getUUID:function(e,t){var r=this;return this.store.getByEmail(e).then(function(e){return t&&t.create&&!e.userExists?l.default.reject(new Error("User for specified email cannot be confirmed to exist")):e.id?e.id:l.default.reject(new Error("No id recorded for specified user"))}).catch(function(){return r.fetchUUID(e,t)})},initialize:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,u.default)(XR.WebexPlugin.prototype.initialize,this,t)},recordUUID:function(e){return e?e.id?cI.patterns.uuid.test(e.id)?e.emailAddress?cI.patterns.email.test(e.emailAddress)?this.store.add(e):l.default.reject(new Error("`user.emailAddress` must be an email address")):l.default.reject(new Error("`user.emailAddress` is required")):l.default.reject(new Error("`user.id` must be a uuid")):l.default.reject(new Error("`user.id` is required")):l.default.reject(new Error("`user` is required"))},register:function(){return this.verify.apply(this,arguments)},setPassword:function(e){var t=this;return(e=e||{}).password?this.webex.config.credentials.federation&&!e.email?l.default.reject(new Error("email is required with federation option")):this.getUserCI(e.email,this.webex.config.credentials.federation).then(function(){return t.webex.credentials.getUserToken()}).then(function(r){return t.request({uri:t.webex.config.credentials.setPasswordUrl+"/"+t.webex.internal.device.userId,method:"PATCH",headers:{authorization:r.toString()},body:{schemas:["urn:scim:schemas:core:1.0","urn:scim:schemas:extension:cisco:commonidentity:1.0"],password:e.password}})}).then(function(e){return t.hasPassword=!0,e.body}):l.default.reject(new Error("`options.password` is required"))},update:function(e){return(e=e||{}).displayName?this.request({method:"PATCH",service:"conversation",resource:"users/user",body:e}).then(function(e){return e.body}):l.default.reject(new Error("`options.displayName` is required"))},verify:function(e){var t=this;if(!(e=(0,c.default)({},this.config.verifyDefaults,e)).email)return l.default.reject(new Error("`options.email` is required"));var r=this.webex.config.credentials.identity.url,n=this.webex.config.credentials.idbroker.url;return this.webex.config.credentials.federation&&(this.webex.config.credentials.idbroker.url=this.webex.config.credentials.idbroker.defaultUrl,this.webex.config.credentials.identity.url=this.webex.config.credentials.identity.defaultUrl),this.webex.credentials.getUserToken().catch(function(){return t.webex.credentials.getClientToken()}).then(function(r){return t.request({service:"atlas",resource:"users/activations",method:"POST",headers:{authorization:r.toString(),"x-prelogin-userid":e.preloginId},body:e,shouldRefreshAccessToken:!1})}).then(function(e){return(e.body.hasPassword||e.body.sso)&&(t.hasPassword=!0),t.webex.config.credentials.federation&&e.body.userEntities&&(t.webex.config.credentials.idbroker.url=e.body.userEntities.idBrokerUrl,t.webex.config.credentials.identity.url=e.body.userEntities.identityUrl),e.body}).catch(function(e){return t.webex.config.credentials.federation&&(t.webex.config.credentials.idbroker.url=n,t.webex.config.credentials.identity.url=r),l.default.reject(e)})},getUserCI:function(e,t){if(t){var r={email:e,suppressEmail:!0};return this.verify(r).then(function(e){return l.default.resolve(e.userEntities)})}return l.default.resolve({idBrokerUrl:this.webex.config.credentials.idbroker.url,identityUrl:this.webex.config.credentials.identity.url})},_extractUUID:function(e){return e.entryUUID||e.id||e},_extractEmailAddress:function(e){return e.email||e.emailAddress||e.entryEmail||e},version:"1.77.8"},"activate",[r],(0,s.default)(o,"activate"),o),v(o,"getUUID",[n],(0,s.default)(o,"getUUID"),o),v(o,"initialize",[i],(0,s.default)(o,"initialize"),o),v(o,"register",[a],(0,s.default)(o,"register"),o),o));t.default=m});r(cQ);var lQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={device:{preDiscoveryServices:{atlasServiceUrl:xu.env.ATLAS_SERVICE_URL||"https://atlas-a.wbx2.com/admin/api/v1",atlas:xu.env.ATLAS_SERVICE_URL||"https://atlas-a.wbx2.com/admin/api/v1"}},user:{batcherWait:100,batcherMaxCalls:100,batcherMaxWait:1500,verifyDefaults:{reqId:"WEBCLIENT"}}}});r(lQ),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(cQ).default}});var r=i(cQ),n=i(lQ);function i(e){return e&&e.__esModule?e:{default:e}}(0,XR.registerInternalPlugin)("user",r.default,{config:n.default})}));var fQ=function(e,t,r,n,i){return i(e,function(e,i,a){r=n?(n=!1,e):t(r,e,i,a)}),r};var dQ=function(e,t,r){var n=gp(e)?vX:fQ,i=arguments.length<3;return n(e,fN(t,4),r,i,UA)},pQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=_f)&&r.__esModule?r:{default:r};t.escape=function(e){return new n.default(function(t){return t(a(e))})},t.escapeSync=a;var i=/(<|>|&)/g;function a(e){return e.replace(i,o)}function o(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}}});r(pQ);pQ.escape,pQ.escapeSync;var hQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.filterEscapeSync=t.filterEscape=t.filterSync=t.filter=t.escapeSync=t.escape=void 0;var r=u(fI),n=u(_f),i=u(dQ),a=u(PI),o=u(jA),s=u(hC);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e.remove)e.remove();else if(e.parentElement)e.parentElement.removeChild(e);else{if(!("length"in e))throw new Error("Could not find a way to remove node");for(var t=e.length-1;t>=0;t-=1)c(e[t])}}Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return pQ.escape}}),Object.defineProperty(t,"escapeSync",{enumerable:!0,get:function(){return pQ.escapeSync}});t.filter=(0,s.default)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new n.default(function(e){e(l.apply(void 0,t))})},4);function l(e,t,n,i){if(!i||!n||!t){if(0===i.length)return i;throw new Error("`allowedTags`, `allowedStyles`, and `html` must be provided")}var s=(new DOMParser).parseFromString(i,"text/html");return m(s.body.childNodes,function e(i){if(!g(i))return;var s=i.nodeName.toLowerCase();var u=(0,r.default)(t);m(i.childNodes,e);if((0,a.default)(u,s)){var c=t[s];(0,o.default)(v(i.attributes),function(e){if((0,a.default)(c,e)){if("href"===e||"src"===e){var t=i.attributes.getNamedItem(e).value.trim().toLowerCase();0!==t.indexOf("javascript:")&&0!==t.indexOf("vbscript:")||h(i)}else if("style"===e){var r=i.attributes.getNamedItem("style").value.split(";").map(function(e){var t=p(e.split(":")[0]);return(0,a.default)(n,t)?e:null}).filter(function(e){return Boolean(e)}).join(";");i.setAttribute("style",r)}}else i.removeAttribute(e)})}else h(i)}),e(s.body),1===i.indexOf("body")?"<body>"+s.body.innerHTML+"</body>":s.body.innerHTML}function f(e,t,n,i){if(!i||!n||!t){if(0===i.length)return i;throw new Error("`allowedTags`, `allowedStyles`, and `html` must be provided")}var s=(new DOMParser).parseFromString(i,"text/html");return m(s.body.childNodes,function e(i){if(!g(i))return;m(i.childNodes,e);var s=i.nodeName.toLowerCase();var u=(0,r.default)(t);if((0,a.default)(u,s)){var l=t[s];(0,o.default)(v(i.attributes),function(e){if((0,a.default)(l,e)){if("href"===e||"src"===e){var t=i.attributes.getNamedItem(e).value.toLowerCase();0!==t.indexOf("javascript:")&&0!==t.indexOf("vbscript:")||h(i)}else if("style"===e){var r=i.attributes.getNamedItem("style").value.split(";").map(function(e){var t=p(e.split(":")[0]);return(0,a.default)(n,t)?e:null}).filter(function(e){return Boolean(e)}).join(";");i.setAttribute("style",r)}}else i.removeAttribute(e)})}else!function(e){var t=document.createTextNode("<"+e.nodeName.toLowerCase()+">"),r=document.createTextNode("</"+e.nodeName.toLowerCase()+">");e.parentNode.insertBefore(t,e);for(;e.childNodes.length>0;)e.parentNode.insertBefore(e.childNodes[0],e);e.parentNode.insertBefore(r,e),c(e)}(i)}),e(s.body),1===i.indexOf("body")?"<body>"+s.body.innerHTML+"</body>":s.body.innerHTML}var d=/^\s|\s$/g;function p(e){return e.replace(d,"")}function h(e){for(;e.childNodes.length>0;)e.parentNode.insertBefore(e.childNodes[0],e);c(e)}function v(e){return(0,i.default)(e,function(e,t){return e.push(t.name),e},[])}function m(e,t){for(var r=e.length;r>=0;r-=1)t(e[r])}function g(e){return!!e&&(void 0!==e.ownerDocument&&(1===e.nodeType&&"string"==typeof e.nodeName))}t.filterSync=(0,s.default)(l,4),t.filterEscape=(0,s.default)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new n.default(function(e){e(f.apply(void 0,t))})},4),t.filterEscapeSync=(0,s.default)(f,4)});r(hQ);hQ.filterEscapeSync,hQ.filterEscape,hQ.filterSync,hQ.filter,hQ.escapeSync,hQ.escape;var vQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return hQ.escape}}),Object.defineProperty(t,"escapeSync",{enumerable:!0,get:function(){return hQ.escapeSync}}),Object.defineProperty(t,"filter",{enumerable:!0,get:function(){return hQ.filter}}),Object.defineProperty(t,"filterSync",{enumerable:!0,get:function(){return hQ.filterSync}}),Object.defineProperty(t,"filterEscape",{enumerable:!0,get:function(){return hQ.filterEscape}}),Object.defineProperty(t,"filterEscapeSync",{enumerable:!0,get:function(){return hQ.filterEscapeSync}})});r(vQ);var mQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={conversation:{allowedInboundTags:{"webex-mention":["data-object-type","data-object-id","data-object-url"]},allowedOutboundTags:{"webex-mention":["data-object-type","data-object-id","data-object-url"]},inboundProcessFunc:function(){},outboundProcessFunc:function(){},allowedInboundStyles:[],allowedOutboundStyles:[],thumbnailMaxHeight:960,thumbnailMaxWidth:640,keepEncryptedProperties:!1,decryptionFailureMessage:"This message cannot be decrypted"}}});r(mQ);var gQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(Af),n=a(fI),i=a(md);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){return(0,n.default)(t).map(function(n){var a=t[n];return(0,i.default)(a)?{name:n,direction:e,fn:a}:(0,r.default)({name:n},a)})}});r(gQ);var yQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.transforms=void 0;var r=d(Pf),n=d(fc),i=d(_f),a=d(ub),o=d(gp),s=d(AA),u=d(hR),c=d(hC),l=d(hX),f=d(gQ);function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,a.default)("KEY"),h=(0,c.default)(function(e,t,r,n){return t.transform("encryptTextProp",e,r,n)}),v=(0,c.default)(function(e,t,r,n){return t.transform("encryptJsonProp",e,r,n)});t.transforms=(0,f.default)("outbound",{encryptObject:function(e,t,r){return r||(r=t,t=void 0),r&&r.objectType?!1===t?i.default.resolve():e.transform("encrypt"+(0,l.default)(r.objectType),t,r):i.default.resolve()},encryptConversation:function(e,t,r){return!1===t?i.default.resolve():i.default.resolve(t||e.webex.internal.encryption.kms.createUnboundKeys({count:1})).then(function(n){var a=(0,o.default)(n)?n[0]:n;return(0,s.default)(r,"kmsMessage.keyUris")&&!r.kmsMessage.keyUris.includes(a.uri)&&r.kmsMessage.keyUris.push(a.uri),i.default.all([(0,s.default)(r,"activities.items")&&r.activities.items.reduce(function(t,r){return t.then(function(){return e.transform("encryptObject",a,r)})},i.default.resolve()),e.transform("encryptPropDisplayName",a,r)]).then(function(){r.encryptionKeyUrl=a.uri||a,t||(r.defaultActivityEncryptionKeyUrl=r.defaultActivityEncryptionKeyUrl||a.uri||a)})})},encryptActivity:function(e,t,r){return r.encryptionKeyUrl?i.default.resolve():e.transform("encrypt"+(0,l.default)(r.verb)+"Activity",t,r).then(function(){return t=t||r[p],e.transform("prepareActivityKmsMessage",t,r)})},encryptVerbActivity:function(e,t,r){return e.transform("maybeEncryptTarget",t,r).then(function(){t=t||r[p]}).then(function(){return e.transform("encryptObject",t,r.object)})},maybeEncryptTarget:function(e,t,r){if(t)return i.default.resolve();if((0,s.default)(r,"target.defaultActivityEncryptionKeyUrl")&&(0,s.default)(r,"target.kmsResourceObjectUrl"))return r[p]=t||r.target.defaultActivityEncryptionKeyUrl,i.default.resolve();var n=r.target&&r.target.url;return n?e.webex.internal.conversation.get({url:n}).then(function(t){return t.defaultActivityEncryptionKeyUrl?(r.target.defaultActivityEncryptionKeyUrl||e.webex.logger.warn("plugin-conversation: downloaded conversation to determine its defaultActivityEncryptionKeyUrl; make sure to pass all encryption related properties when calling Webex.conversation methods."),r.target.kmsResourceObjectUrl||e.webex.logger.warn("plugin-conversation: downloaded conversation to determine its kmsResourceObjectUrl; make sure to pass all encryption related properties when calling Webex.conversation methods."),r[p]=r.target.defaultActivityEncryptionKeyUrl=t.defaultActivityEncryptionKeyUrl,r.target.kmsResourceObjectUrl=t.kmsResourceObjectUrl,i.default.resolve()):e.webex.internal.conversation.updateKey(t).then(function(e){r.target.kmsResourceObjectUrl=e.kmsMessage.resource.uri,r[p]=r.target.defaultActivityEncryptionKeyUrl=e.object.defaultActivityEncryptionKeyUrl})}):i.default.reject(new Error("Cannot determine encryption key for activity's conversation; no key url or conversation url provided"))},prepareActivityKmsMessage:function(e,t,r){if(r.kmsMessage)if(!t&&"updateKey"===r.verb&&(0,s.default)(r,"object.defaultActivityEncryptionKeyUrl")&&(t=(0,u.default)(r,"object.defaultActivityEncryptionKeyUrl")),!t&&"leave"===r.verb&&(0,s.default)(r,"target.defaultActivityEncryptionKeyUrl")&&(t=(0,u.default)(r,"target.defaultActivityEncryptionKeyUrl")),t){var i=r.target.kmsResourceObjectUrl;["uri","resourceUri"].forEach(function(e){if(r.kmsMessage[e]&&!i&&r.kmsMessage[e].includes("<KRO>"))throw new Error("encrypter: cannot determine kro");r.kmsMessage[e]&&(r.kmsMessage[e]=r.kmsMessage[e].replace("<KRO>",i),r.kmsMessage[e]=r.kmsMessage[e].replace("<KEYURL>",t.keyUrl||t))})}else(0,n.default)(r,"kmsMessage")},encryptVerbActivityWithKey:{direction:"outbound",fn:function(e,t,r){return e.transform("encryptVerbActivity",t,r).then(function(){t=t||r[p],r.encryptionKeyUrl=t.uri||t})}},encryptAddActivity:{direction:"outbound",alias:"encryptVerbActivity"},encryptAssignActivity:{direction:"outbound",alias:"encryptVerbActivityWithKey"},encryptCreateActivity:{direction:"outbound",alias:"encryptVerbActivity"},encryptPostActivity:{direction:"outbound",alias:"encryptVerbActivityWithKey"},encryptShareActivity:{direction:"outbound",alias:"encryptVerbActivityWithKey"},encryptCardactionActivity:{direction:"outbound",alias:"encryptVerbActivityWithKey"},encryptUpdateActivity:{direction:"outbound",alias:"encryptVerbActivityWithKey"},encryptUpdateKeyActivity:{direction:"outbound",alias:"encryptVerbActivity"},encryptComment:function(e,t,r){return i.default.all([e.transform("encryptPropDisplayName",t,r),e.transform("encryptPropContent",t,r)])},encryptContent:function(e,t,r){var n=r.files.items.map(function(r){return e.transform("encryptObject",t,r)});return n.push(e.transform("encryptPropContent",t,r)),n.push(e.transform("encryptPropDisplayName",t,r)),i.default.all(n)},encryptFile:function(e,t,r){return r.image&&!r.image.scr?i.default.reject(new Error("`file.image` must have an `scr`")):i.default.all([e.transform("encryptPropScr",t,r),e.transform("encryptPropDisplayName",t,r),e.transform("encryptPropContent",t,r),r.image&&e.transform("encryptPropScr",t,r.image)])},encryptSubmit:function(e,t,r){return e.transform("encryptPropInputs",t,r)},encryptImageURI:function(e,t,r){return e.transform("encryptPropLocation",t,r)},encryptPropContent:h("content"),encryptPropDisplayName:h("displayName"),encryptPropInputs:v("inputs"),encryptPropLocation:h("location"),encryptPropScr:function(e,t,r){return r.scr?e.webex.internal.encryption.encryptScr(t,r.scr).then(function(e){r.scr=e}):i.default.resolve()},encryptJsonProp:function(e,t,n,a){return a[t]?e.webex.internal.encryption.encryptText(n.uri||n,(0,r.default)(a[t])).then(function(e){a[t]=e}):i.default.resolve()},encryptTextProp:function(e,t,r,n){return n[t]?e.webex.internal.encryption.encryptText(r.uri||r,n[t]).then(function(e){n[t]=e}):i.default.resolve()}})});r(yQ);yQ.transforms;var EQ=Math.floor;nc(nc.S,"Number",{isInteger:function(e){return!Lu(e)&&isFinite(e)&&EQ(e)===e}});var bQ=Xu.Number.isInteger,_Q=n(function(e){e.exports={default:bQ,__esModule:!0}});r(_Q);var SQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.transforms=void 0;var r=u(_Q),n=u(_f),i=u(hC),a=u(hX),o=u(GX),s=u(gQ);function u(e){return e&&e.__esModule?e:{default:e}}var c=(0,i.default)(function(e,t,r,n){return t.transform("decryptTextProp",e,r,n)});t.transforms=(0,s.default)("inbound",{decryptObject:function(e,t,r){return r||(r=t,t=void 0),r&&r.objectType?(!t&&r.encryptionKeyUrl&&(t=r.encryptionKeyUrl),"transcodedContent"===r.objectType?n.default.all(r.files.items.map(function(r){return e.transform("decryptFile",t,r)})):e.transform("decrypt"+(0,a.default)(r.objectType),t,r)):n.default.resolve()},decryptConversation:function(e,t,r){var i=[];r.activities.items&&i.push(n.default.all(r.activities.items.map(function(t){return e.transform("decryptObject",null,t)})));var a=r.encryptionKeyUrl||t,o=e.webex.internal.conversation.config.decryptionFailureMessage;return a&&(i.push(e.transform("decryptPropDisplayName",a,r).catch(function(t){e.webex.logger.warn("plugin-conversation: failed to decrypt display name of ",r.url,t),n.default.resolve(o)})),i.push(e.transform("decryptPropContent",a,r))),r.avatarEncryptionKeyUrl&&i.push(e.transform("decryptObject",r.avatarEncryptionKeyUrl,r.avatar)),n.default.all(i)},decryptActivity:function(e,t,r){if(!(r.encryptionKeyUrl||r.object&&r.object.encryptionKeyUrl))return n.default.resolve(r);var i=r.encryptionKeyUrl||r.object.encryptionKeyUrl||t;return e.transform("decryptObject",i,r.object)},decryptMicroappinstance:function(e,t,r){return e.transform("decryptPropModel",t,r)},decryptComment:function(e,t,r){var i=[e.transform("decryptPropDisplayName",t,r),e.transform("decryptPropContent",t,r)];return r.cards&&Array.isArray(r.cards)&&r.cards.map(function(n,a){return i.push(e.transform("decryptPropCardItem",a,t,r.cards))}),n.default.all(i)},decryptContent:function(e,t,r){return"links"===r.contentCategory?e.transform("decryptContentLinks",t,r):e.transform("decryptContentFiles",t,r)},decryptContentFiles:function(e,t,r){if(!r.files||!r.files.items||!Array.isArray(r.files.items))return n.default.resolve();var i=r.files.items.map(function(r){return e.transform("decryptObject",t,r)});return i.push(e.transform("decryptComment",t,r)),r.links&&r.links.items&&Array.isArray(r.links.items)&&r.links.items.forEach(function(r){return i.push(e.transform("decryptObject",t,r))}),n.default.all(i)},decryptContentLinks:function(e,t,r){if(!r.links||!r.links.items||!Array.isArray(r.links.items))return n.default.resolve();var i=r.links.items.map(function(r){return e.transform("decryptObject",t,r)});return i.push(e.transform("decryptComment",t,r)),n.default.all(i)},decryptEvent:function(e,t,r){var i=[e.transform("decryptPropDisplayName",t,r)];return r.location&&5===r.location.split(".").length&&i.push(e.transform("decryptPropLocation",t,r)),n.default.all(i)},decryptFile:function(e,t,r){return n.default.all([r.transcodedCollection&&n.default.all(r.transcodedCollection.items.map(function(r){return e.transform("decryptObject",t,r)})),e.transform("decryptPropScr",t,r),e.transform("decryptPropDisplayName",t,r),e.transform("decryptPropContent",t,r),r.image&&e.transform("decryptPropScr",t,r.image)])},decryptLink:function(e,t,r){return n.default.all([e.transform("decryptPropSslr",t,r),e.transform("decryptPropDisplayName",t,r)])},decryptTranscodedContent:function(e,t,r){return n.default.all(r.files.items.map(function(r){return e.transform("decryptFile",t,r)}))},decryptImageURI:function(e,t,r){return e.transform("decryptPropLocation",t,r)},decryptTextProp:function(e,t,r,i){if(!i[t])return n.default.resolve();var a=e.webex.internal.conversation.config.decryptionFailureMessage;return e.webex.internal.encryption.decryptText(r,i[t]).then(function(r){if(e.webex.config.conversation.keepEncryptedProperties){var n=(0,o.default)("encrypted_"+t);i[n]=i[t]}i[t]=r}).catch(function(r){return e.webex.logger.warn("plugin-conversation: failed to decrypt "+t+" ",r),i[t]=a,n.default.resolve(a)})},decryptPropCardItem:function(e,t,i,a){if(!(0,r.default)(t)||!a||!Array.isArray(a)||t<0||t>=a.length||!(a[t]instanceof String||"string"==typeof a[t]))return n.default.resolve();var o=e.webex.internal.conversation.config.decryptionFailureMessage;return e.webex.internal.encryption.decryptText(i,a[t]).then(function(e){a[t]=e}).catch(function(r){return e.webex.logger.warn("plugin-conversation: failed to decrypt card at "+t+" ",r),a[t]=o,n.default.resolve(o)})},decryptPropScr:function(e,t,r){return e.webex.internal.encryption.decryptScr(t,r.scr).then(function(e){r.scr=e})},decryptPropSslr:function(e,t,r){return e.webex.internal.encryption.decryptScr(t,r.sslr).then(function(e){r.sslr=e})},decryptPropDisplayName:c("displayName"),decryptPropContent:c("content"),decryptPropModel:c("model"),decryptPropLocation:c("location")})});r(SQ);SQ.transforms;var TQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidUserCreation=t.ConversationError=t.ShareActivity=t.default=void 0;var r=c(fc),n=c(_f),i=c(AA),a=c(hR),o=c(hX);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c(oQ).default}}),Object.defineProperty(t,"ShareActivity",{enumerable:!0,get:function(){return c(aQ).default}}),Object.defineProperty(t,"ConversationError",{enumerable:!0,get:function(){return rQ.ConversationError}}),Object.defineProperty(t,"InvalidUserCreation",{enumerable:!0,get:function(){return rQ.InvalidUserCreation}});var s=c(oQ),u=c(mQ);function c(e){return e&&e.__esModule?e:{default:e}}(0,XR.registerInternalPlugin)("conversation",s.default,{payloadTransformer:{predicates:[{name:"transformObject",test:function(e,t){return n.default.resolve((0,i.default)(t,"body.objectType"))},extract:function(e){return n.default.resolve(e.body)}},{name:"transformObject",direction:"inbound",test:function(e,t){return n.default.resolve((0,i.default)(t,"activity"))},extract:function(e){return n.default.resolve(e.activity)}},{name:"normalizeConversationListAndBindDecrypters",direction:"inbound",test:function(e,t){return(0,i.default)(t,"body.items[0].objectType")&&(0,a.default)(t,"options.deferDecrypt")?n.default.resolve(!0):n.default.resolve(!1)},extract:function(e){return n.default.resolve(e.body.items)}},{name:"transformObjectArray",direction:"inbound",test:function(e,t){return(0,i.default)(t,"body.items[0].objectType")?(0,a.default)(t,"options.deferDecrypt")?n.default.resolve(!1):n.default.resolve(!0):n.default.resolve(!1)},extract:function(e){return n.default.resolve(e.body.items)}}],transforms:[{name:"normalizeConversationListAndBindDecrypters",fn:function(e,t){return n.default.all(t.map(function(t){return e.transform("normalizeObject",t).then(function(){return t.decrypt=function(){return(0,r.default)(t,"decrypt"),e.transform("decryptObject",t)},t})}))}},{name:"transformObjectArray",fn:function(e,t){return n.default.all(t.map(function(t){return e.transform("transformObject",t)}))}},{name:"transformObject",direction:"outbound",fn:function(e,t){return t&&t.objectType?e.transform("normalizeObject",t).then(function(){return e.transform("encryptObject",t)}).then(function(){return e.transform("encryptKmsMessage",t)}):n.default.resolve()}},{name:"transformObject",direction:"inbound",fn:function(e,t){return t&&t.objectType?e.transform("decryptObject",t).then(function(){return e.transform("normalizeObject",t)}):n.default.resolve()}},{name:"normalizeObject",fn:function(e,t){return t&&t.objectType?n.default.all([e.transform("normalize"+(0,o.default)(t.objectType),t),e.transform("normalizePropContent",t)]):n.default.resolve()}},{name:"normalizePropContent",direction:"inbound",fn:function(e,t){if(!t.content)return n.default.resolve();var r=e.webex.config.conversation,i=r.inboundProcessFunc,a=r.allowedInboundTags,o=r.allowedInboundStyles;return(0,vQ.filter)(i,a||{},o,t.content).then(function(e){t.content=e})}},{name:"normalizePropContent",direction:"outbound",fn:function(e,t){if(!t.content)return n.default.resolve();var r=e.webex.config.conversation,i=r.outboundProcessFunc,a=r.allowedOutboundTags,o=r.allowedOutboundStyles;return(0,vQ.filterEscape)(i,a||{},o,t.content).then(function(e){t.content=e})}},{name:"normalizeConversation",fn:function(e,t){return t.activities=t.activities||{},t.activities.items=t.activities.items||[],t.participants=t.participants||{},t.participants.items=t.participants.items||[],n.default.all([n.default.all(t.activities.items.map(function(t){return e.transform("normalizeObject",t)})),n.default.all(t.participants.items.map(function(t){return e.transform("normalizeObject",t)}))])}},{name:"normalizeActivity",fn:function(e,t){return n.default.all([e.transform("normalizeObject",t.actor),e.transform("normalizeObject",t.object),e.transform("normalizeObject",t.target)])}},{name:"normalizePerson",fn:function(e,t){var i=t.entryEmail||t.emailAddress||t.id,a=t.entryUUID||t.id;return cI.patterns.email.test(i)?t.entryEmail=t.emailAddress=i.toLowerCase():((0,r.default)(t,"entryEmail"),(0,r.default)(t,"emailAddress")),t.roomProperties&&(t.roomProperties.isModerator=Boolean(t.roomProperties.isModerator)),cI.patterns.uuid.test(a)?(t.entryUUID=t.id=a.toLowerCase(),n.default.resolve(t)):i?e.webex.internal.user.asUUID(i).then(function(e){return t.entryUUID=t.id=e,t}):n.default.reject(new Error("cannot determine id without an `emailAddress` or `entryUUID` property"))}}].concat(SQ.transforms).concat(yQ.transforms)},config:u.default})});r(TQ);TQ.InvalidUserCreation,TQ.ConversationError,TQ.ShareActivity;var wQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={calendar:{}}});r(wQ),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(_f),n=o(AA);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(NN).default}});var i=o(NN),a=o(wQ);function o(e){return e&&e.__esModule?e:{default:e}}(0,XR.registerInternalPlugin)("calendar",i.default,{config:a.default,payloadTransformer:{predicates:[{name:"transformMeetingArray",direction:"inbound",test:function(e,t){return r.default.resolve((0,n.default)(t,"body.items[0].seriesId"))},extract:function(e){return r.default.resolve(e.body.items)}},{name:"transformMeeting",direction:"inbound",test:function(e,t){return r.default.resolve((0,n.default)(t,"body.seriesId"))},extract:function(e){return r.default.resolve(e.body)}},{name:"transformMeeting",direction:"inbound",test:function(e,t){return r.default.resolve((0,n.default)(t,"calendarMeetingExternal"))},extract:function(e){return r.default.resolve(e.calendarMeetingExternal)}}],transforms:[{name:"transformMeetingArray",fn:function(e,t){return r.default.all(t.map(function(t){return e.transform("transformMeeting",t)}))}},{name:"transformMeeting",direction:"inbound",fn:function(e,t){if(!t)return r.default.resolve();if(!t.encryptionKeyUrl)return r.default.resolve();var n=t.encryptedParticipants.map(function(n){return r.default.all([e.transform("decryptTextProp","encryptedEmailAddress",t.encryptionKeyUrl,n),e.transform("decryptTextProp","encryptedName",t.encryptionKeyUrl,n)])});return r.default.all([e.transform("decryptTextProp","encryptedSubject",t.encryptionKeyUrl,t),e.transform("decryptTextProp","encryptedLocation",t.encryptionKeyUrl,t),e.transform("decryptTextProp","encryptedNotes",t.encryptionKeyUrl,t),e.transform("decryptTextProp","webexURI",t.encryptionKeyUrl,t),e.transform("decryptTextProp","webexURL",t.encryptionKeyUrl,t),e.transform("decryptTextProp","spaceMeetURL",t.encryptionKeyUrl,t),e.transform("decryptTextProp","spaceURI",t.encryptionKeyUrl,t),e.transform("decryptTextProp","spaceURL",t.encryptionKeyUrl,t)].concat(n))}}]}})}));var IQ=n(function(e,t){t.__esModule=!0;var r,n=(r=Af)&&r.__esModule?r:{default:r};t.default=n.default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}});r(IQ);var AQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=n(_y);function n(e){return e&&e.__esModule?e:{default:e}}var i=n(rC).default.extend({namespace:"ServiceUrl",props:{defaultUrl:["string",!0,void 0],hosts:["array",!1,function(){return[]}],name:["string",!0,void 0]},_generateHostUrl:function(e){var t=r.default.parse(this.defaultUrl);return t.host=e,r.default.format(t)},_getHostUrls:function(){var e=this;return this.hosts.map(function(t){return{url:e._generateHostUrl(t.host),priority:t.priority}})},_getPriorityHostUrl:function(){return 0===this.hosts.length?this.defaultUrl:this._generateHostUrl(this.hosts.reduce(function(e,t){return e.priority<t.priority?t:e}).host)},removeHost:function(e){if(e===this.defaultUrl)return!0;var t=r.default.parse(e).host,n=this.hosts.find(function(e){return e.host===t});return this.hosts.splice(this.hosts.indexOf(n),1),void 0!==n},get:function(e){return e?this._getPriorityHostUrl():this.defaultUrl}});t.default=i});r(AQ);var CQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s(_f),n=s(fI),i=s(IQ),a=s(_y),o=s(AQ);function s(e){return e&&e.__esModule?e:{default:e}}var u=XR.WebexPlugin.extend({namespace:"Services",status:{ready:!1},_serviceUrls:[],_serviceUrlsLimited:[],_serviceUrlsDiscovery:[new o.default({name:"u2c",defaultUrl:xu.env.U2C_SERVICE_URL||"https://u2c.wbx2.com/u2c/api/v1",hosts:[]})],_generateServicesList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={};return this["_serviceUrls"+t].forEach(function(t){r[t.name]=t.get(e)}),r},services:function(e,t){return t?this._generateServicesList(e,t):(0,i.default)({},this._generateServicesList(e,"Discovery"),this._generateServicesList(e,"Limited"),this._generateServicesList(e))},_getUrl:function(e,t){return t?this["_serviceUrls"+t].find(function(t){return t.name===e}):this._serviceUrls.find(function(t){return t.name===e})||this._serviceUrlsLimited.find(function(t){return t.name===e})||this._serviceUrlsDiscovery.find(function(t){return t.name===e})},get:function(e,t,r){var n=this._getUrl(e,r);return n?n.get(t):void 0},markFailedUrl:function(e,t){var r=this,i=this._getUrl((0,n.default)(this.services()).find(function(t){return r._getUrl(t).removeHost(e)}));if(i)return t?i.get(!1):i.get(!0)},updateServices:function(e,t){var n=this,a=[];e&&t&&a.push(!0,e,"email"===e?cI.base64.encode(t):t);var o=a.length>0;return this._fetchNewServiceHostmap.apply(this,a).then(function(e){return n._updateServiceUrls(e,o?"Limited":void 0),n.trigger("servicesUpdated"),r.default.resolve((0,i.default)({},n.services(!1,o?"Limited":void 0)))})},waitUntilReady:function(){var e=this;return new r.default(function(t){e.status.ready&&t(),e.once("ready",function(){return t()})})},_loadServiceUrls:function(e,t){var r=this;return t.forEach(function(t){r["_serviceUrls"+e].includes(t)||r["_serviceUrls"+e].push(t)}),this},_unloadServiceUrls:function(e,t){var r=this,n=void 0;return t.forEach(function(t){n=t,"string"==typeof t&&(n=r._getUrl(n,e)),n&&r["_serviceUrls"+e].includes(t)&&r["_serviceUrls"+e].splice(r["_serviceUrls"+e].indexOf(n),1)}),this},_updateServiceUrls:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this["_serviceUrls"+r].filter(function(t){return e.every(function(e){return e.name!==t.name})});return this._unloadServiceUrls(r,n),e.forEach(function(e){var n=t._getUrl(e.name,r);n?(n.defaultUrl=e.defaultUrl,n.hosts=e.hosts):t._loadServiceUrls(r,[new o.default((0,i.default)({},e))])}),this},_formatReceivedHostmap:function(e){var t=[],r={};return(0,n.default)(e.serviceLinks).forEach(function(n){(r={}).name=n,r.defaultUrl=e.serviceLinks[n],r.hosts=e.hostCatalog[a.default.parse(r.defaultUrl).host],t.push(r)}),t},_fetchNewServiceHostmap:function(e,t,n){var i=this,a=e?"/limited":"",o={format:"hostmap"};return e&&(o[t]=n),this.request({method:"GET",service:"u2c",resource:a+"/catalog",qs:o}).then(function(e){var t=e.body;return r.default.resolve(i._formatReceivedHostmap(t))}).catch(function(e){return r.default.reject(e)})},initialize:function(){var e=this;this.listenToOnce(this.webex,"ready",function(){e.updateServices()}),this.once("servicesUpdated",function(){e.status.ready=!0,e.trigger("ready")})},version:"1.66.2"});t.default=u});r(CQ);var xQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={services:{}}});r(xQ);var OQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(_f),n=u(hT),i=u(zy),a=u($y),o=u(vT),s=u(mT);function u(e){return e&&e.__esModule?e:{default:e}}var c=/(?:^\/)|(?:\/$)/,l=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"onRequest",value:function(e){var t=this,n=this.webex.internal.services,i=void 0;return e.tags||(e.tags={}),e.tags.serviceInterceptor?e:(e.tags.serviceInterceptor=!0,e.service||e.resource?(i=n.get(e.service,!0))?(this.validateOptions(e),e.uri=this.generateUrl(i,e.resource),e):n.waitUntilReady().then(function(){if(t.validateOptions(e),!(i=n.get(e.service,!0)))throw new Error("`"+e.service+"` is not a known service");return e.uri=t.generateUrl(i,e.resource),r.default.resolve(e)}):e)}},{key:"validateOptions",value:function(e){if(!e.resource)throw new Error("A `resource` parameter is required");if(!e.service&&!e.uri)throw new Error("A valid `service` or `uri` parameter is required")}},{key:"generateUrl",value:function(e,t){return e.replace(c,"")+"/"+t.replace(c,"")}}],[{key:"create",value:function(){return new t({webex:this})}}]),t}(XO.Interceptor);t.default=l});r(OQ),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return a(CQ).default}});var r=a(CQ),n=a(xQ),i=a(OQ);function a(e){return e&&e.__esModule?e:{default:e}}(0,XR.registerInternalPlugin)("services",r.default,{interceptors:{ServiceInterceptor:i.default.create},config:n.default})}));var RQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(Af),n=a(_f),i=a(Am);function a(e){return e&&e.__esModule?e:{default:e}}var o=XR.WebexPlugin.extend({namespace:"Lyra",list:function(){return this.webex.request({method:"GET",api:"lyra",resource:"/spaces"}).then(function(e){return e.body.items})},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id||e.identity&&e.identity.id;return t?this.webex.request({method:"GET",api:"lyra",resource:"/spaces/"+t}).then(function(e){return e.body}):n.default.reject(new Error("space.id is required"))},join:function(e,t){var n={pass:{type:(t=(0,r.default)({passType:"MANUAL"},t)).passType},deviceUrl:this.webex.internal.device.url};return t.data&&(n.pass.data=t.data),t.verificationInitiation&&(n.verificationInitiation=t.verificationInitiation),t.uri?this.webex.request({method:"PUT",uri:t.uri,body:n}):this.webex.request({method:"PUT",api:"lyra",resource:e.url+"/occupants/@me",body:n})},leave:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.url+"/occupants/@me";if(!t.removeAllDevices){var n={deviceUrl:cI.base64.toBase64Url(this.webex.internal.device.url)};r+="?"+i.default.stringify(n)}return this.webex.request({method:"DELETE",api:"lyra",resource:r})},verifyOccupant:function(e,t){return this.webex.request({method:"PUT",uri:e.url+"/occupants/"+t,body:{pass:{type:"VERIFICATION"}}})},getCurrentBindings:function(e){return this.webex.request({method:"GET",uri:e.url+"/bindings"}).then(function(e){return e.body})},bindConversation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.id||e.identity&&e.identity.id;if(!e.url)return n.default.reject(new Error("space.url is required"));if(!a)return n.default.reject(new Error("space.id is required"));if(!r.kmsResourceObjectUrl)return n.default.reject(new Error("conversation.kmsResourceObjectUrl is required"));if(!r.url)return n.default.reject(new Error("conversation.url is required"));var o={method:"POST",body:{kmsMessage:{method:"create",uri:"/authorizations",resourceUri:""+r.kmsResourceObjectUrl,userIds:[a]},conversationUrl:r.url}};return i.uri?o.uri=i.uri:(o.api="lyra",o.resource=e.url+"/bindings"),this._bindConversation(a).then(function(){return t.webex.request(o)}).then(function(e){return e.body})},_bindConversation:function(e){return n.default.resolve()},unbindConversation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e.id||e.identity&&e.identity.id;if(!e.url)return n.default.reject(new Error("space.url is required"));if(!o)return n.default.reject(new Error("space.id is required"));if(!r.url)return n.default.reject(new Error("conversation.url is required"));if(!r.kmsResourceObjectUrl)return n.default.reject(new Error("conversation.kmsResourceObjectUrl is required"));var s={kmsMessage:{method:"delete",uri:r.kmsResourceObjectUrl+"/authorizations?"+i.default.stringify({authId:o})},conversationUrl:cI.base64.toBase64Url(r.url)};return this.webex.internal.encryption.kms.prepareRequest(s.kmsMessage).then(function(r){return s.kmsMessage=r.wrapped,a.uri?t.webex.request({method:"DELETE",uri:a.uri+"?"+i.default.stringify(s)}):t.webex.request({method:"DELETE",api:"lyra",resource:e.url+"/bindings?"+i.default.stringify(s)})})},deleteBinding:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.id||t.identity&&t.identity.id;if(!t.url)return n.default.reject(new Error("space.url is required"));if(!a)return n.default.reject(new Error("space.id is required"));if(!r.kmsResourceObjectUrl)return n.default.reject(new Error("options.kmsResourceObjectUrl is required"));if(!r.bindingId)return n.default.reject(new Error("options.bindingId is required"));var o={kmsMessage:{method:"delete",uri:r.kmsResourceObjectUrl+"/authorizations?"+i.default.stringify({authId:a})}};return this.webex.internal.encryption.kms.prepareRequest(o.kmsMessage).then(function(n){return o.kmsMessage=n.wrapped,e.webex.request({method:"DELETE",uri:t.url+"/bindings/"+r.bindingId+"?"+i.default.stringify(o)})})},version:"1.77.8"});t.default=o});r(RQ);var NQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=_f)&&r.__esModule?r:{default:r};var i=XR.WebexPlugin.extend({namespace:"Lyra",getAudioState:function(e){return this.webex.request({method:"GET",uri:e.url+"/audio"}).then(function(e){return e.body})},putAudioState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.deviceUrl?this.webex.request({method:"PUT",uri:e.url+"/audio",body:t}).then(function(e){return e.body}):n.default.reject(new Error("audioState.deviceUrl is required"))},mute:function(e){return this.webex.request({method:"POST",uri:e.url+"/audio/microphones/actions/mute/invoke"})},unmute:function(e){return this.webex.request({method:"POST",uri:e.url+"/audio/microphones/actions/un-mute/invoke"})},increaseVolume:function(e){return this.webex.request({method:"POST",uri:e.url+"/audio/volume/actions/increase/invoke"})},decreaseVolume:function(e){return this.webex.request({method:"POST",uri:e.url+"/audio/volume/actions/decrease/invoke"})},setVolume:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.webex.request({method:"POST",uri:e.url+"/audio/volume/actions/set/invoke",body:{level:t}})},version:"1.77.8"});t.default=i});r(NQ);var kQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(RQ),n=i(NQ);function i(e){return e&&e.__esModule?e:{default:e}}var a=XR.WebexPlugin.extend({namespace:"Lyra",children:{space:r.default,device:n.default},getAdvertisedEndpoint:function(e){return this.webex.request({method:"GET",api:"proximity",resource:"/ultrasound/advertisements",qs:{token:e}}).then(function(e){return e.body})},version:"1.77.8"});t.default=a});r(kQ);var PQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={lyra:{}}});r(PQ);var MQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(kQ).default}});var r=i(kQ),n=i(PQ);function i(e){return e&&e.__esModule?e:{default:e}}(0,XR.registerInternalPlugin)("lyra",r.default,{config:n.default}),t.config=n.default});r(MQ);MQ.config;var DQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=c(uc),i=c(Af),a=c(kC),o=c(_f),s=c(fc),u=c(hR);function c(e){return e&&e.__esModule?e:{default:e}}var l,f,d,p,h,v,m=XR.WebexPlugin.extend((l=r={namespace:"Search",people:function(e){return!(e=e||{}).queryString&&e.query&&(e.queryString=e.query,(0,s.default)(e,"query")),e.queryString?this.request({api:"argonaut",resource:"directory",method:"POST",body:e}).then(function(e){return e.body}):o.default.reject(new Error("`options.query` is required"))},bindSearchKey:function(){var e=this;return this.webex.internal.encryption.kms.createUnboundKeys({count:1}).then(function(t){var r=(0,a.default)(t,1)[0];return e.webex.internal.encryption.kms.createResource({key:r,userIds:[e.webex.internal.device.userId]}).then(function(){return e.webex.internal.device.set("searchEncryptionKeyUrl",r.uri)})})},search:function(e){var t=this;e=e||{};var r=o.default.resolve();return this.webex.internal.device.searchEncryptionKeyUrl||(r=this.bindSearchKey()),r.then(function(){return t.webex.request({service:"argonaut",resource:"search",method:"POST",body:(0,i.default)(e,{searchEncryptionKeyUrl:t.webex.internal.device.searchEncryptionKeyUrl})})}).then(function(t){var r=(0,u.default)(t,"body.activities.items",[]);return e.breadcrumbsEnabled?{activities:r,breadcrumbs:(0,u.default)(t,"body.breadcrumbs",{})}:r})},version:"1.77.8"},f="bindSearchKey",d=[cI.oneFlight],p=(0,n.default)(r,"bindSearchKey"),h=r,v={},Object.keys(p).forEach(function(e){v[e]=p[e]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=d.slice().reverse().reduce(function(e,t){return t(l,f,e)||e},v),h&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(h):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(l,f,v),v=null),r));t.default=m});r(DQ);var LQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={search:{}}});r(LQ),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(_f),n=o(AA);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(DQ).default}});var i=o(DQ),a=o(LQ);function o(e){return e&&e.__esModule?e:{default:e}}(0,XR.registerInternalPlugin)("search",i.default,{config:a.default,payloadTransformer:{predicates:[{name:"encryptSearchQuery",direction:"outbound",test:function(e,t){return(0,n.default)(t,"body.query")&&(0,n.default)(t,"body.searchEncryptionKeyUrl")?e.webex.internal.device.isSpecificService("argonaut",t.service||t.url):r.default.resolve(!1)},extract:function(e){return r.default.resolve(e.body)}},{name:"transformObjectArray",direction:"inbound",test:function(e,t){return r.default.resolve((0,n.default)(t,"body.activities.items[0].objectType")).then(function(r){return r&&e.webex.internal.device.isSpecificService("argonaut",t.options.service||t.options.uri)})},extract:function(e){return r.default.resolve(e.body.activities.items)}}],transforms:[{name:"encryptSearchQuery",direction:"outbound",fn:function(e,t){return e.webex.internal.encryption.encryptText(t.searchEncryptionKeyUrl,t.query).then(function(e){t.query=e})}}]}})}));var UQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.LYRA_SPACE="LYRA_SPACE",t.UC_CLOUD="uc-cloud",t.DEFAULT_PRODUCT_NAME="default"});r(UQ);UQ.LYRA_SPACE,UQ.UC_CLOUD,UQ.DEFAULT_PRODUCT_NAME;var jQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(ZC),n=i(pR);function i(e){return e&&e.__esModule?e:{default:e}}var a={devices:{},get:function(e){return this.devices[e]},set:function(e){var t=e.id||e.identity&&e.identity.id,r=this.devices[t];r?(0,n.default)(r,e):this.devices[t]=e},reset:function(){this.devices={}},getAll:function(){return(0,r.default)(this.devices)}};t.default=a});r(jQ);var FQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(_f),n=o(ym),i=o(jQ),a=o(AR);function o(e){return e&&e.__esModule?e:{default:e}}var s=XR.WebexPlugin.extend({namespace:"DeviceManager",_devicePendingPinChallenge:null,_pairedDevice:null,_boundSpace:null,initialize:function(){var e=this;this.webex.internal.mercury.on("event:lyra.space_updated",function(t){var r=t.data;e._receiveDeviceUpdates(r)})},getAll:function(){return i.default.getAll()},refresh:function(){var e=this;return i.default.reset(),this.webex.request({api:"wdm",resource:"devices/auxiliary"}).then(function(t){return t.body?e._updateDeviceMetadata(t.body.items).then(function(r){return r.forEach(function(t){if(t.deviceInfo&&t.deviceInfo.machineType===UQ.LYRA_SPACE)return e.webex.internal.lyra.space.get(t.deviceInfo).catch(function(t){e.logger.error("DeviceManager#refresh: failed to receive device info",t)})}),t.body.items.forEach(function(e){i.default.set(e)}),e.getAll()}):r.default.reject()}).catch(function(t){e.logger.error("DeviceManager#refresh: failed to fetch recent devices",t)})},search:function(e){var t=this;return e&&e.searchQuery?this.webex.internal.search.people({searchId:a.default.v4(),searchType:"DEVICE_SEARCH",searchEntity:"device",includePeople:!1,includeRooms:!0,queryString:e.searchQuery}).catch(function(e){t.logger.error("DeviceManager#search: failed to search a device",e)}):(this.logger.error("DeviceManager#search: options.searchQuery is required"),r.default.reject(new Error("DeviceManager#search: options.searchQuery is required")))},upsert:function(e){var t=this,n=e.id||e.identity&&e.identity.id;return n?(this._pairedDevice=this._devicePendingPinChallenge,this._devicePendingPinChallenge=null,i.default.get(n)?(i.default.set(e),r.default.resolve(i.default.get(n))):this.webex.request({api:"wdm",method:"PUT",resource:"devices/auxiliary/Room/"+n}).then(function(e){var r=e.body;return t._decryptDeviceName(r)}).then(function(e){return i.default.set(e),r.default.resolve(i.default.get(n))}).catch(function(e){return t.logger.error("DeviceManager#upsert: failed to add/update a device",e),r.default.reject(e)})):(this.logger.error("DeviceManager#upsert: device.id is required"),r.default.reject(new Error("DeviceManager#upsert: device.id is required")))},get:function(e){var t=this;if(!e)return this.logger.error("DeviceManager#get: token is required"),r.default.reject(new Error("DeviceManager#get: token is required"));var n=void 0;return this.webex.internal.lyra.getAdvertisedEndpoint(e).then(function(e){return n=e,t.webex.internal.lyra.space.get({id:e.advertiser.id})}).then(function(e){return e&&e.identity&&e.identity.displayName&&(n.advertiser.displayName=e.identity.displayName),n}).catch(function(e){return t.logger.error("DeviceManager#get: failed to get device info",e),r.default.reject(e)})},remove:function(e){var t=this;return e?this.webex.request({method:"delete",api:"wdm",resource:"devices/auxiliary/"+e}).catch(function(e){return t.logger.error("DeviceManager#remove: failed to remove the device",e),r.default.reject(e)}):(this.logger.error("DeviceManager#remove: deviceId is required"),r.default.reject(new Error("DeviceManager#remove: deviceId is required")))},requestPin:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.id||e.identity&&e.identity.id;if(!i)return this.logger.error("DeviceManager#requestPin: device.id is required"),r.default.reject(new Error("DeviceManager#requestPin: device.id is required"));var a={id:i,url:"/spaces/"+i};return this.webex.internal.lyra.space.get(a).then(function(e){return e&&e.occupants&&e.occupants.pinChallenge?(t.logger.info("DeviceManager#requestPin: space is PIN challenge capable"),t.webex.internal.lyra.space.join(a,{passType:"MANUAL",verificationInitiation:"PIN",data:n.data}).then(function(){return t._devicePendingPinChallenge=e,e})):(t.logger.info("DeviceManager#requestPin: space is not PIN challenge capable, probably already occupied, will still return device info"),t.webex.internal.lyra.space.get(a).then(function(){return r.default.resolve(e)}))}).catch(function(e){return t.logger.error("DeviceManager#requestPin: device failed PIN challenge request",e),r.default.reject(e)})},pair:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.pin)return this.logger.error("DeviceManager#pair: options.pin is required"),r.default.reject(new Error("DeviceManager#pair: options.pin is required"));if(this._devicePendingPinChallenge){var n={id:this._devicePendingPinChallenge.identity.id,url:"/spaces/"+this._devicePendingPinChallenge.identity.id};return this.webex.internal.lyra.space.join(n,{passType:"PIN_ANSWER",data:t.pin}).catch(function(t){return e.logger.error("DeviceManager#pair: incorrect PIN, unable to pair ",t),r.default.reject(t)}).then(function(){return e.upsert(e._devicePendingPinChallenge)})}return this.logger.error("DeviceManager#pair: no device to pair"),r.default.reject(new Error("DeviceManager#pair: no device to pair"))},unpair:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._pairedDevice)return this.logger.error("DeviceManager#unpair: no device to unpair"),r.default.reject(new Error("DeviceManager#unpair: no device to unpair"));var n={url:"/spaces/"+this._pairedDevice.identity.id};return this.webex.internal.lyra.space.leave(n,t).catch(function(t){return e.logger.error("DeviceManager#unpair: failed to remove device from Lyra",t),r.default.reject(t)})},bindSpace:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.url)return this.logger.error("DeviceManager#pair: options.url is required"),r.default.reject(new Error("DeviceManager#bindSpace: options.url is required"));if(!t.kmsResourceObjectUrl)return this.logger.error("DeviceManager#bindSpace: options.kmsResourceObjectUrl is required"),r.default.reject(new Error("DeviceManager#bindSpace: options.kmsResourceObjectUrl is required"));if(!this._pairedDevice)return this.logger.error("DeviceManager#bindSpace: No device paired currently"),r.default.reject(new Error("DeviceManager#bindSpace: No device paired currently"));var n={url:"/spaces/"+this._pairedDevice.identity.id,id:this._pairedDevice.identity.id};return this._boundSpace={kmsResourceObjectUrl:t.kmsResourceObjectUrl,url:t.url},this.webex.internal.lyra.space.bindConversation(n,this._boundSpace).catch(function(t){return e.logger.error("DeviceManager#bindSpace: failed to bind device to Space"),r.default.reject(t)})},unbindSpace:function(){var e=this;if(!this._pairedDevice||!this._boundSpace)return this.logger.error("DeviceManager#unbindSpace: No space currently bound to the device"),r.default.reject(new Error("DeviceManager#unbindSpace: No space currently bound to the device"));var t={url:"/spaces/"+this._pairedDevice.identity.id,id:this._pairedDevice.identity.id};return this.webex.internal.lyra.space.unbindConversation(t,this._boundSpace).then(function(t){return e._boundSpace=null,r.default.resolve(t)}).catch(function(t){return e.logger.error("DeviceManager#unbindSpace: failed to unbind Space to device"),r.default.reject(t)})},getAudioState:function(){return this._pairedDevice?this.webex.internal.lyra.device.getAudioState(this._pairedDevice):(this.logger.error("DeviceManager#getAudioState: Currently no device is paired"),r.default.reject(new Error("DeviceManager#getAudioState: Currently no device is paired")))},putAudioState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.webex.internal.lyra.device.putAudioState(e,t)},mute:function(){return this._pairedDevice?this.webex.internal.lyra.device.mute(this._pairedDevice):(this.logger.error("DeviceManager#mute: Currently no device is paired"),r.default.reject(new Error("DeviceManager#mute: Currently no device is paired")))},unmute:function(){return this._pairedDevice?this.webex.internal.lyra.device.unmute(this._pairedDevice):(this.logger.error("DeviceManager#unmute: Currently no device is paired"),r.default.reject(new Error("DeviceManager#unmute: Currently no device is paired")))},increaseVolume:function(){return this._pairedDevice?this.webex.internal.lyra.device.increaseVolume(this._pairedDevice):(this.logger.error("DeviceManager#increaseVolume: Currently no device is paired"),r.default.reject(new Error("DeviceManager#increaseVolume: Currently no device is paired")))},decreaseVolume:function(){return this._pairedDevice?this.webex.internal.lyra.device.decreaseVolume(this._pairedDevice):(this.logger.error("DeviceManager#decreaseVolume: Currently no device is paired"),r.default.reject(new Error("DeviceManager#decreaseVolume: Currently no device is paired")))},setVolume:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._pairedDevice?this.webex.internal.lyra.device.setVolume(this._pairedDevice,e):(this.logger.error("DeviceManager#setVolume: Currently no device is paired"),r.default.reject(new Error("DeviceManager#setVolume: Currently no device is paired")))},_updateDeviceMetadata:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!t.length)return r.default.resolve(t);var i=(0,n.default)(t);return r.default.all(i.map(function(t,n){return t.deviceClass===UQ.UC_CLOUD&&(t.id=e.webex.internal.device.services.wdmServiceUrl+"/"+t.id),e._decryptDeviceName(t).then(function(e){return i[n]=e,r.default.resolve()})})).then(function(){return r.default.resolve(i)})},_decryptDeviceName:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,n.default)(t);return i.metadata&&i.metadata.encryptedUserAssignedName&&i.metadata.encryptionKeyUrl?this.webex.internal.encryption.decryptText(i.metadata.encryptionKeyUrl,i.metadata.encryptedUserAssignedName).then(function(e){return i.metadata.encryptedUserAssignedName=void 0,i.metadata.userAssignedName=e,r.default.resolve(i)}).catch(function(t){i.metadata.encryptedUserAssignedName=void 0,e.logger.error("DeviceCollection#_decryptDeviceName: failed to decrypt device name",t)}):r.default.resolve(i)},_receiveDeviceUpdates:function(e){var t=this;if(e&&e.spaceUrl){var n=e.spaceUrl.substring(e.spaceUrl.lastIndexOf("/")+1);if(i.default.get(n))return this.webex.internal.lyra.space.get({id:n}).then(function(e){var a=i.default.get(n);return!a||!e.occupants||e.occupants.self&&e.occupants.self.verified?r.default.resolve():(a.productName=e.devices&&e.devices[0]&&e.devices[0].productName||UQ.DEFAULT_PRODUCT_NAME,(t._pairedDevice&&(t._pairedDevice.id||t._pairedDevice.identity.id))===n?(t._pairedDevice=null,t.logger.info("DeviceManager#_receiveDeviceUpdates: device "+n+" lost pairing"),r.default.resolve()):t._devicePendingPinChallenge.identity.id!==n?t.upsert(a):r.default.resolve())}).catch(function(e){t.logger.error("DeviceManager#_receiveDeviceUpdates: failed to receive updates for Lyra space",e)})}return r.default.resolve()},version:"1.77.8"});t.default=s});r(FQ);var BQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={}});r(BQ);var VQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(FQ).default}}),Object.defineProperty(t,"config",{enumerable:!0,get:function(){return i(BQ).default}});var r=i(FQ),n=i(BQ);function i(e){return e&&e.__esModule?e:{default:e}}(0,XR.registerPlugin)("devicemanager",r.default,{config:n.default})});r(VQ);VQ.config;var GQ=$C(!0);nc(nc.S,"Object",{entries:function(e){return GQ(e)}});var qQ=Xu.Object.entries,KQ=n(function(e){e.exports={default:qQ,__esModule:!0}});r(KQ);var HQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.levels=void 0;var r=p(iC),n=p(fc),i=p(KQ),a=p(NC),o=p(kC),s=p(fI),u=p(OI),c=p(ld),l=p(gp),f=p(AA),d=p(ym);function p(e){return e&&e.__esModule?e:{default:e}}var h={silent:0,error:1,warn:2,log:3,info:4,debug:5,trace:6},v=t.levels=(0,s.default)(h).filter(function(e){return"silent"!==e}),m={error:["log"],warn:["error","log"],info:["log"],debug:["info","log"],trace:["debug","info","log"]},g=/[Aa]uthorization/;function y(e){if((0,l.default)(e))return e.map(y);if(!(0,c.default)(e))return(0,u.default)(e)&&cI.patterns.email.test(e)?"-- REDACTED --":e;var t=!0,r=!1,s=void 0;try{for(var f,d=(0,a.default)((0,i.default)(e));!(t=(f=d.next()).done);t=!0){var p=f.value,h=(0,o.default)(p,2),v=h[0],m=h[1];g.test(v)?(0,n.default)(e,v):e[v]=y(m)}}catch(e){r=!0,s=e}finally{try{!t&&d.return&&d.return()}finally{if(r)throw s}}return e}var E=XR.WebexPlugin.extend({namespace:"Logger",derived:{level:{cache:!1,fn:function(){return this.getCurrentLevel()}}},session:{buffer:{type:"array",default:function(){return[]}}},filter:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.map(function(e){if(e instanceof Error){if("test"===xu.env.NODE_ENV&&cI.inBrowser){var t=e.toString();return t+="BEGIN STACK",t+=e.stack,t+="END STACK"}return e}return y(e=(0,d.default)(e))})},shouldPrint:function(e){return h[e]<=h[this.getCurrentLevel()]},shouldBuffer:function(e){return h[e]<=h.info},getCurrentLevel:function(){if(this.config.level)return this.config.level;if(v.includes(xu.env.WEBEX_LOG_LEVEL))return xu.env.WEBEX_LOG_LEVEL;if("test"===xu.env.NODE_ENV)return"trace";var e=this.webex.internal.device&&this.webex.internal.device.features.developer.get("log-level");return e&&v.includes(e)?e:"error"},version:"1.77.8"});v.forEach(function(e){var t=m[e],n=e;if(t)for(t=t.slice();!console[n];)n=t.pop();E.prototype[e]=function(){try{var t=this.shouldPrint(e),i=this.shouldBuffer(e);if(!i&&!t)return;var a=this.filter.apply(this,arguments),o=a.map(function(e){return e instanceof XR.WebexHttpError?e.toString():e});if(t){var s,u=cI.inBrowser?o:a;"test"===xu.env.NODE_ENV&&(0,f.default)(this,"webex.internal.device.url")&&u.unshift(this.webex.internal.device.url.slice(-3)),(s=console)[n].apply(s,(0,r.default)(u))}i&&(o.unshift(Date.now()),this.buffer.push(o),this.buffer.length>this.config.historyLength&&this.buffer.shift())}catch(t){console.warn("failed to execute Logger#"+e,t)}}}),t.default=E});r(HQ);HQ.levels;var zQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={logger:{level:xu.env.LOGGER_LEVEL,historyLength:1e3}}});r(zQ);var WQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.levels=t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(HQ).default}}),Object.defineProperty(t,"levels",{enumerable:!0,get:function(){return HQ.levels}});var r=i(HQ),n=i(zQ);function i(e){return e&&e.__esModule?e:{default:e}}(0,XR.registerPlugin)("logger",r.default,{config:n.default,replace:!0})});r(WQ);WQ.levels;var YQ=n(function(t){var r,n;r=e,n=function(){var e=!0;function t(t){function r(e){var r=t.match(e);return r&&r.length>1&&r[1]||""}function n(e){var r=t.match(e);return r&&r.length>1&&r[2]||""}var i,o=r(/(ipod|iphone|ipad)/i).toLowerCase(),s=!/like android/i.test(t)&&/android/i.test(t),u=/nexus\s*[0-6]\s*/i.test(t),c=!u&&/nexus\s*[0-9]+/i.test(t),l=/CrOS/.test(t),f=/silk/i.test(t),d=/sailfish/i.test(t),p=/tizen/i.test(t),h=/(web|hpw)(o|0)s/i.test(t),v=/windows phone/i.test(t),m=(/SamsungBrowser/i.test(t),!v&&/windows/i.test(t)),g=!o&&!f&&/macintosh/i.test(t),y=!s&&!d&&!p&&!h&&/linux/i.test(t),E=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),b=r(/version\/(\d+(\.\d+)?)/i),_=/tablet/i.test(t)&&!/tablet pc/i.test(t),S=!_&&/[^-]mobi/i.test(t),T=/xbox/i.test(t);/opera/i.test(t)?i={name:"Opera",opera:e,version:b||r(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?i={name:"Opera",opera:e,version:r(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b}:/SamsungBrowser/i.test(t)?i={name:"Samsung Internet for Android",samsungBrowser:e,version:b||r(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(t)?i={name:"NAVER Whale browser",whale:e,version:r(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(t)?i={name:"MZ Browser",mzbrowser:e,version:r(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(t)?i={name:"Opera Coast",coast:e,version:b||r(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(t)?i={name:"Focus",focus:e,version:r(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(t)?i={name:"Yandex Browser",yandexbrowser:e,version:b||r(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?i={name:"UC Browser",ucbrowser:e,version:r(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?i={name:"Maxthon",maxthon:e,version:r(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?i={name:"Epiphany",epiphany:e,version:r(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?i={name:"Puffin",puffin:e,version:r(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?i={name:"Sleipnir",sleipnir:e,version:r(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?i={name:"K-Meleon",kMeleon:e,version:r(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:v?(i={name:"Windows Phone",osname:"Windows Phone",windowsphone:e},E?(i.msedge=e,i.version=E):(i.msie=e,i.version=r(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?i={name:"Internet Explorer",msie:e,version:r(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?i={name:"Chrome",osname:"Chrome OS",chromeos:e,chromeBook:e,chrome:e,version:r(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?i={name:"Microsoft Edge",msedge:e,version:E}:/vivaldi/i.test(t)?i={name:"Vivaldi",vivaldi:e,version:r(/vivaldi\/(\d+(\.\d+)?)/i)||b}:d?i={name:"Sailfish",osname:"Sailfish OS",sailfish:e,version:r(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?i={name:"SeaMonkey",seamonkey:e,version:r(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(i={name:"Firefox",firefox:e,version:r(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(i.firefoxos=e,i.osname="Firefox OS")):f?i={name:"Amazon Silk",silk:e,version:r(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?i={name:"PhantomJS",phantom:e,version:r(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?i={name:"SlimerJS",slimer:e,version:r(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?i={name:"BlackBerry",osname:"BlackBerry OS",blackberry:e,version:b||r(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:h?(i={name:"WebOS",osname:"WebOS",webos:e,version:b||r(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(i.touchpad=e)):/bada/i.test(t)?i={name:"Bada",osname:"Bada",bada:e,version:r(/dolfin\/(\d+(\.\d+)?)/i)}:p?i={name:"Tizen",osname:"Tizen",tizen:e,version:r(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(t)?i={name:"QupZilla",qupzilla:e,version:r(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(t)?i={name:"Chromium",chromium:e,version:r(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(t)?i={name:"Chrome",chrome:e,version:r(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?i={name:"Android",version:b}:/safari|applewebkit/i.test(t)?(i={name:"Safari",safari:e},b&&(i.version=b)):o?(i={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},b&&(i.version=b)):i=/googlebot/i.test(t)?{name:"Googlebot",googlebot:e,version:r(/googlebot\/(\d+(\.\d+))/i)||b}:{name:r(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(i.name=i.name||"Blink",i.blink=e):(i.name=i.name||"Webkit",i.webkit=e),!i.version&&b&&(i.version=b)):!i.opera&&/gecko\//i.test(t)&&(i.name=i.name||"Gecko",i.gecko=e,i.version=i.version||r(/gecko\/(\d+(\.\d+)?)/i)),i.windowsphone||!s&&!i.silk?!i.windowsphone&&o?(i[o]=e,i.ios=e,i.osname="iOS"):g?(i.mac=e,i.osname="macOS"):T?(i.xbox=e,i.osname="Xbox"):m?(i.windows=e,i.osname="Windows"):y&&(i.linux=e,i.osname="Linux"):(i.android=e,i.osname="Android");var w="";i.windows?w=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(r(/Windows ((NT|XP)( \d\d?.\d)?)/i)):i.windowsphone?w=r(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?w=(w=r(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):o?w=(w=r(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):s?w=r(/android[ \/-](\d+(\.\d+)*)/i):i.webos?w=r(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?w=r(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?w=r(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(w=r(/tizen[\/\s](\d+(\.\d+)*)/i)),w&&(i.osversion=w);var I=!i.windows&&w.split(".")[0];return _||c||"ipad"==o||s&&(3==I||I>=4&&!S)||i.silk?i.tablet=e:(S||"iphone"==o||"ipod"==o||s||u||i.blackberry||i.webos||i.bada)&&(i.mobile=e),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.whale&&1===a([i.version,"1.0"])||i.mzbrowser&&1===a([i.version,"6.0"])||i.focus&&1===a([i.version,"1.0"])||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=e:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=e:i.x=e,i}var r=t("undefined"!=typeof navigator&&navigator.userAgent||"");function n(e){return e.split(".").length}function i(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r++)n.push(t(e[r]));return n}function a(e){for(var t=Math.max(n(e[0]),n(e[1])),r=i(e,function(e){var r=t-n(e);return i((e+=new Array(r+1).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--t>=0;){if(r[0][t]>r[1][t])return 1;if(r[0][t]!==r[1][t])return-1;if(0===t)return 0}}function o(e,n,i){var o=r;"string"==typeof n&&(i=n,n=void 0),void 0===n&&(n=!1),i&&(o=t(i));var s=""+o.version;for(var u in e)if(e.hasOwnProperty(u)&&o[u]){if("string"!=typeof e[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(e));return a([s,e[u]])<0}return n}return r.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in r)return!0}return!1},r.isUnsupportedBrowser=o,r.compareVersions=a,r.check=function(e,t,r){return!o(e,t,r)},r._detect=t,r.detect=t,r},t.exports?t.exports=n():r.bowser=n()}),XQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={set:function(e){r.verboseEvents=e.verboseEvents,r.enable=e.enable}};t.default=r});r(XQ);var $Q=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=XQ)&&r.__esModule?r:{default:r};var i={logger:{info:function(){console.error("LoggerProxy->info#NO LOGGER DEFINED")},log:function(){console.error("LoggerProxy->log#NO LOGGER DEFINED")},error:function(){console.error("LoggerProxy->error#NO LOGGER DEFINED")},warn:function(){console.error("LoggerProxy->warn#NO LOGGER DEFINED")},trace:function(){console.error("LoggerProxy->trace#NO LOGGER DEFINED")},debug:function(){console.error("LoggerProxy->debug#NO LOGGER DEFINED")}},set:function(e){n.default.enable||(i.logger={info:function(){},log:function(){},error:function(){},warn:function(){},trace:function(){},debug:function(){}}),i.logger=e},get:function(){return i.logger}};t.default=i});r($Q);var QQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.AUDIO="audio",t.AUDIO_INPUT="audioinput",t.AUDIO_STATUS="audioStatus",t.ALERT="alert",t.ANSWER="answer",t.CALL="call",t.CORRELATION_ID="correlationId",t.CONVERSATIONS="conversations",t.CALENDAR="calendar",t.CALENDAR_EVENTS_API="calendarEvents",t.CMR_MEETINGS="cmrmeetings",t.CLAIM="claim",t.CONTROLS="controls",t.CONTENT="content",t.DEVELOPMENT="development",t.DECLINE="decline",t.ERROR="error",t.HECATE="hecate",t.JOIN="join",t.LEAVE="leave",t.LOCAL="local",t.LOCI="loci",t.LOCUS_URL="locusUrl",t.MEETINGINFO="meetingInfo",t.MEET="meet",t.MEET_M="m",t.MEDIA="media",t.ONLINE="online",t.PARTICIPANT="participant",t.REMOTE="remote",t.READY="ready",t.SIP_URI="sipUri",t.TYPE="type",t.VIDEO="video",t.VIDEO_INPUT="videoinput",t.VIDEO_STATUS="videoStatus",t._ANSWER_="ANSWER",t._ACTIVE_="ACTIVE",t._BUSY_="BUSY",t._CALL_="CALL",t._CREATED_="CREATED",t._CONFLICT_="CONFLICT",t._CONVERSATION_URL_="CONVERSATION_URL",t._ERROR_="ERROR",t._FORCED_="FORCED",t._IDLE_="IDLE",t._IN_LOBBY_="IN_LOBBY",t._IN_MEETING_="IN_MEETING",t._INCOMING_="INCOMING",t._IN_="IN",t._JOIN_="JOIN",t._JOINED_="JOINED",t._LOCUS_ID_="LOCUS_ID",t._LEFT_="LEFT",t._MEETING_LINK_="MEETING_LINK",t._MEETING_="MEETING",t._MEETING_CENTER_="MEETING_CENTER",t._MEETING_ID_="MEETING_ID",t._NOT_IN_MEETING_="NOT_IN_MEETING",t._NONE_="NONE",t._OFFER_="OFFER",t._OBSERVE_="OBSERVE",t._PERSONAL_ROOM_="PERSONAL_ROOM",t._REQUESTED_="REQUESTED",t._RESOURCE_ROOM_="RESOURCE_ROOM",t._RECEIVE_ONLY_="RECVONLY",t._SIP_URI_="SIP_URI",t._SEND_RECEIVE_="SENDRECV",t._SLIDES_="SLIDES",t._USER_="USER",t._UNKNOWN_="UNKNOWN",t._WEBEX_MEETING_="WEBEX_MEETING",t._WAIT_="WAIT",t.ALTERNATE_REDIRECT_TRUE="alternateRedirect=true",t.HTTPS_PROTOCOL="https://",t.MEETINGS="Meetings",t.MEDIA_PEER_CONNECTION_NAME="MediaPeerConnection",t.SHARE_PEER_CONNECTION_NAME="SharePeerConnection",t.USE_URI_LOOKUP_FALSE="useUriLookup=false",t.WWW_DOT="www.",t.WEBEX_DOT_COM="webex.com",t.DEFAULT_EXCLUDED_STATS=["timestamp","ssrc","priority"],t.MODERATOR_TRUE=!0,t.MODERATOR_FALSE=!1,t.AUDIO_BANDWIDTH_LIMIT="64000",t.VIDEO_BANDWIDTH_LIMIT="4000000",t.INTENT_TO_JOIN=2423005,t.ICE_TIMEOUT=1e3,t.ICE_FAIL_TIMEOUT=3e3,t.RETRY_TIMEOUT=3e3,t.ROAP_SEQ_PRE=-1,t.DIALER_REGEX={SIP_ADDRESS:/^(sips?)?:?(?:([^\s>:@]+)(?::([^\s@>]+))?@)([\w\-.]+)(?::(\d+))?((?:;[^\s=?>;]+(?:=[^\s?;]+)?)*)(?:\?(([^\s&=>]+=[^\s&=>]+)(&[^\s&=>]+=[^\s&=>]+)*))?$/,PHONE_NUMBER:/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/},t.DEFAULT_TRANSFORM_REGEX={rtpOutVideo:{regex:new RegExp("^(?:RTC)?[Oo]utbound_?[Rr][Tt][Pp]_?[Vv]ideo")},rtpOutAudio:{regex:new RegExp("^(?:RTC)?[Oo]utbound_?[Rr][Tt][Pp]_?[Aa]udio")},rtpInVideo:{regex:new RegExp("^(?:RTC)?[Ii]nbound_?[Rr][Tt][Pp]_?[Vv]ideo")},rtpInAudio:{regex:new RegExp("^(?:RTC)?[Ii]nbound_?[Rr][Tt][Pp]_?[Aa]udio")},rtcOutAudio:{regex:new RegExp("^RTCMediaStreamTrack_(?:local|sender)_"),profiler:{type:"kind",value:"audio"}},rtcOutVideo:{regex:new RegExp("^RTCMediaStreamTrack_(?:local|sender)_"),profiler:{type:"kind",value:"video"}},rtcInAudio:{regex:new RegExp("^RTCMediaStreamTrack_(?:remote|receiver)_"),profiler:{type:"kind",value:"audio"}},rtcInVideo:{regex:new RegExp("^RTCMediaStreamTrack_(?:remote|receiver)_"),profiler:{type:"kind",value:"video"}},rtcTransAudio:{regex:new RegExp("^RTCTransport_[Aa]udio")},rtcTransVideo:{regex:new RegExp("^RTCTransport_[Vv]ideo")},rtcCandidatePairAudio:{regex:new RegExp("^RTCIceCandidatePair_"),decider:"nominated",selector:!0,profiler:{type:"transportId",value:"audio"}},rtcCandidatePairVideo:{regex:new RegExp("^RTCIceCandidatePair_"),decider:"nominated",selector:!0,profiler:{type:"transportId",value:"video"}}},t.VALID_EMAIL_ADDRESS=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,t.VALID_PMR_ADDRESS=/([a-z0-9][-a-z0-9, '.']{0,62})@([a-z0-9][-a-z0-9, '.']{0,62})\.webex\.com/i,t.VALID_PMR_LINK=/(https:\/\/)?([a-z0-9][-a-z0-9, '.']{0,62})\.webex\.com\/(meet|join)\/([a-z0-9][-a-z0-9, '.']{0,62})\/?/i,t.VALID_PIN=/([0-9]{4,6})/,t.UUID_REG=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,t.API={CALLIOPEDISCOVERY:"calliopeDiscovery",LOCUS:"locus"},t.ANALYSIS_CHECKS={INCREASING:"increasing",DECREASING:"decreasing",CONSTANT:"constant"},t.ANALYSIS_STATS={DEFAULT_KEYS:[{key:"bytesSent",check:"increasing"},{key:"bytesReceived",check:"increasing"}]},t.CALENDAR_EVENTS={CREATE:"event:calendar.meeting.create",UPDATE:"event:calendar.meeting.update",CREATE_MINIMAL:"event:calendar.meeting.create.minimal",UPDATE_MINIMAL:"event:calendar.meeting.update.minimal",DELETE:"event:calendar.meeting.delete"},t.DEFAULT_GET_STATS_FILTER={types:["track","transport","candidate-pair","outbound-rtp","outboundrtp","inbound-rtp","inboundrtp"]},t.DEFAULT_EVENT_VIDEO_SEND_KEYS=["rtpOutVideo","rtcOutVideo","rtcTransVideo"],t.DEFAULT_EVENT_AUDIO_SEND_KEYS=["rtpOutAudio","rtcOutAudio","rtcTransAudio"],t.DEFAULT_EVENT_VIDEO_RECEIVE_KEYS=["rtpInVideo","rtcInVideo","rtcTransVideo"],t.DEFAULT_EVENT_AUDIO_RECEIVE_KEYS=["rtpInAudio","rtcInAudio","rtcTransAudio"],t.DEFAULT_TRANSFORM_KEYS=["rtpOutVideo","rtpOutAudio","rtpInVideo","rtpInAudio","rtcOutAudio","rtcOutVideo","rtcInAudio","rtcInVideo","rtcTransAudio","rtcTransVideo","rtcCandidatePairAudio","rtcCandidatePairVideo"],t.DELTAEVENT={GT:"GT",CF:"CF",EQ:"EQ",LT:"LT"},t.EVENT_TRIGGERS={MEETINGS_READY:"meetings:ready",MEDIA_READY:"media:ready",MEDIA_STOPPED:"media:stopped",MEDIA_UPDATE:"media:update",MEETING_STARTED_SHARING_LOCAL:"meeting:startedSharingLocal",MEETING_STOPPED_SHARING_LOCAL:"meeting:stoppedSharingLocal",MEETING_ADDED:"meeting:added",MEETING_REMOVED:"meeting:removed",MEETING_RINGING:"meeting:ringing",MEETING_RINGING_STOP:"meeting:ringingStop",MEETING_SELF_LOBBY_WAITING:"meeting:self:lobbyWaiting",MEETING_SELF_GUEST_ADMITTED:"meeting:self:guestAdmitted",MEETING_SELF_MUTED_BY_OTHERS:"meeting:self:mutedByOthers",MEMBERS_UPDATE:"members:update",MEMBERS_CONTENT_UPDATE:"members:content:update",MEMBERS_HOST_UPDATE:"members:host:update",MEMBERS_SELF_UPDATE:"members:self:update",MEETING_RECONNECTION_STARTING:"meeting:reconnectionStarting",MEETING_RECONNECTION_SUCCESS:"meeting:reconnectionSuccess",MEETING_RECONNECTION_FAILURE:"meeting:reconnectionFailure",MEETING_UNLOCKED:"meeting:unlocked",MEETING_LOCKED:"meeting:locked",MEETING_ACTIONS_UPDATE:"meeting:actionsUpdate"},t.EVENT_TYPES={SELF:"self",OTHER:"other",LOCAL:"local",REMOTE:"remote",REMOTE_AUDIO:"remoteAudio",REMOTE_VIDEO:"remoteVideo",REMOTE_SHARE:"remoteShare",LOCAL_SHARE:"localShare",ERROR:"error"},t.EVENTS={ROAP_OK:"ROAP_OK",ROAP_ANSWER:"ROAP_ANSWER",SELF_UNADMITTED_GUEST:"SELF_UNADMITTED_GUEST",SELF_ADMITTED_GUEST:"SELF_ADMITTED_GUEST",CONVERSATION_URL_UPDATE:"CONVERSATION_URL_UPDATE",DESTROY_MEETING:"DESTROY_MEETING",REMOTE_ANSWERED_DECLINED:"REMOTE_ANSWERED_DECLINED",LOCUS_INFO_UPDATE_PARTICIPANTS:"LOCUS_INFO_UPDATE_PARTICIPANTS",LOCUS_INFO_UPDATE_HOST:"LOCUS_INFO_UPDATE_HOST",LOCUS_INFO_UPDATE_MEDIA_SHARES:"LOCUS_INFO_UPDATE_MEDIA_SHARES",LOCUS_INFO_UPDATE_SELF:"LOCUS_INFO_UPDATE_SELF",LOCUS_INFO_UPDATE_URL:"LOCUS_INFO_UPDATE_URL",LOCUS_INFO_CAN_ASSIGN_HOST:"LOCUS_INFO_CAN_ASSIGN_HOST"},t.EVENT_STATS_MAP={BYTES_SENT:"bytesSent",BYTES_RECEIVED:"bytesReceived"},t.ERROR_DICTIONARY={PARAMETER:{NAME:"ParameterError",MESSAGE:"The parameters passed to the function, or object properties needed in the function were null, missing where required, or otherwise incorrect.",CODE:0},INTENT_TO_JOIN:{NAME:"IntentToJoinError",MESSAGE:"The meeting is locked. This is expected behavior. Call #join again with hostPin and/or moderator option",CODE:1},JOIN_MEETING:{NAME:"JoinMeetingError",MESSAGE:"There was an issue joining the meeting, meeting could be in a bad state.",CODE:2},RECONNECTION:{NAME:"ReconnectionError",MESSAGE:"There was an error in the reconnection flow, the meeting may not reconnect, disconnect and dial again.",CODE:3},MEDIA:{NAME:"MediaError",MESSAGE:"There was an error with media, the meeting may not have live audio, video or share.",CODE:4},PERMISSION:{NAME:"PermissionError",MESSAGE:"Not allowed to execute the function, some properties on server, or local client state do not allow you to complete this action.",CODE:5},STATS:{NAME:"StatsError",MESSAGE:"An error occurred with getStats, stats may not continue for this data stream.",CODE:6}},t.FLOOR_ACTION={GRANTED:"GRANTED",RELEASED:"RELEASED"},t.FULL_STATE={INITIALIZING:"INITIALIZING",INACTIVE:"INACTIVE",ACTIVE:"ACTIVE",TERMINATING:"TERMINATING",UNKNOWN:"UNKNOWN"},t.HTTP_VERBS={PUT:"PUT",POST:"POST",GET:"GET",PATCH:"PATCH"},t.ICE_STATE={CHECKING:"checking",CONNECTED:"connected",CLOSED:"closed",COMPLETED:"completed",FAILED:"failed",DISCONNECTED:"disconnected"},t.JOIN_HINTS={LOCK_STATUS_LOCKED:"LOCK_STATUS_LOCKED",LOCK_STATUS_UNLOCKED:"LOCK_STATUS_UNLOCKED"},t.LOCUS={STATE:{INACTIVE:"INACTIVE",ENDED:"ENDED",INITIALIZING:"INITIALIZING"},SEQUENCE:{UN_DEF:"undef",EMPTY:"empty",DEF:"def",NA:"na",RANGE_START:"rangeStart",RANGE_END:"rangeEnd"},SYNCDEBUG:"sync_debug"},t.LOCUSINFO={EVENTS:{SELF_UNADMITTED_GUEST:"SELF_UNADMITTED_GUEST",SELF_ADMITTED_GUEST:"SELF_ADMITTED_GUEST",SELF_MUTED_BY_OTHERS:"SELF_MUTED_BY_OTHERS",SELF_MODERATOR_CHANGED:"SELF_MODERATOR_CHANGED",MEETING_UPDATE:"MEETING_UPDATE",FULL_STATE_TYPE_UPDATE:"FULL_STATE_TYPE_UPDATE",MEETING_INFO_UPDATED:"MEETING_INFO_UPDATED",MEETING_LOCKED:"MEETING_LOCKED",MEETING_UNLOCKED:"MEETING_UNLOCKED"}},t.LOCUSEVENT={LOCUS_MERCURY:"event:locus",CONTROLS_UPDATED:"locus.controls_updated",DIFFERENCE:"locus.difference",FLOOR_GRANTED:"locus.floor_granted",FLOOR_RELEASED:"locus.floor_released",MESSAGE_ROAP:"locus.message.roap",PARTICIPANT_JOIN:"locus.participant_joined",PARTICIPANT_LEFT:"locus.participant_left",PARTICIPANT_DECLINED:"locus.participant_declined",PARTICIPANT_UPDATED:"locus.participant_updated",PARTICIPANT_CONTROLS_UPDATED:"locus.participant_controls_updated",PARTICIPANT_ROLES_UPDATED:"locus.participant_roles_updated",PARTICIPANT_AUDIO_MUTED:"locus.participant_audio_muted",PARTICIPANT_AUDIO_UNMUTED:"locus.participant_audio_unmuted",PARTICIPANT_VIDEO_MUTED:"locus.participant_video_muted",PARTICIPANT_VIDEO_UNMUTED:"locus.participant_video_unmuted",RECORDING_STARTED:"locus.recording_started",RECORDING_START_FAILED:"locus.recording_start_failed",RECORDING_STOPPED:"locus.recording_stopped",SELF_CHANGED:"locus.self_changed"},t.MEETING_ERRORS={METRICS_NOT_SERVER_OR_CLIENT_EXCEPTION:"METRICS_NOT_SERVER_OR_CLIENT_EXCEPTION",BIDIRECTIONAL_ROSTER_NOT_ALLOWED:"BIDIRECTIONAL_ROSTER_NOT_ALLOWED",INVALID_LOCUS_URL:"INVALID_LOCUS_URL",ARGUMENT_NULL_OR_EMPTY:"ARGUMENT_NULL_OR_EMPTY",INVALID_USER:"INVALID_USER",INVALID_PHONE_NUMBER_OR_COUNTRY_CODE:"INVALID_PHONE_NUMBER_OR_COUNTRY_CODE",EMPTY_PHONE_NUMBER_OR_COUNTRY_CODE:"EMPTY_PHONE_NUMBER_OR_COUNTRY_CODE",PHONE_NUMBER_INVALID_COUNTRY_CODE:"PHONE_NUMBER_INVALID_COUNTRY_CODE",PHONE_NUMBER_NOT_A_NUMBER:"PHONE_NUMBER_NOT_A_NUMBER",PHONE_NUMBER_TOO_SHORT_AFTER_IDD:"PHONE_NUMBER_TOO_SHORT_AFTER_IDD",PHONE_NUMBER_TOO_SHORT_NSN:"PHONE_NUMBER_TOO_SHORT_NSN",PHONE_NUMBER_TOO_LONG:"PHONE_NUMBER_TOO_LONG",INVALID_DIALABLE_KEY:"INVALID_DIALABLE_KEY",INVALID_MEETING_LINK:"INVALID_MEETING_LINK",INVALID_SINCE_OR_SEQUENCE_HASH_IN_REQUEST:"INVALID_SINCE_OR_SEQUENCE_HASH_IN_REQUEST",INVALID_LOCUS_ID:"INVALID_LOCUS_ID",EMPTY_SCHEDULED_MEETING_START_TIME:"EMPTY_SCHEDULED_MEETING_START_TIME",INVALID_SCHEDULED_MEETING_DURATION_MINUTES:"INVALID_SCHEDULED_MEETING_DURATION_MINUTES",INVALID_SCHEDULED_MEETING_REMINDER_DURATION_MINUTES:"INVALID_SCHEDULED_MEETING_REMINDER_DURATION_MINUTES",EMPTY_SCHEDULED_MEETING_ORGANIZER:"EMPTY_SCHEDULED_MEETING_ORGANIZER",INVALID_MEETING_ID_FORMAT:"INVALID_MEETING_ID_FORMAT",INVALID_SIP_URL_FORMAT:"INVALID_SIP_URL_FORMAT",EMPTY_INVITEE_RECORD:"EMPTY_INVITEE_RECORD",EMPTY_INVITEE_ADDRESS:"EMPTY_INVITEE_ADDRESS",DESKPHONE_NOTHING_DIALABLE_FOUND:"DESKPHONE_NOTHING_DIALABLE_FOUND",INVALID_INVITEE_ADDRESS:"INVALID_INVITEE_ADDRESS",INVALID_ATTENDEE_ID:"INVALID_ATTENDEE_ID",INVALID_IN_LOBBY:"INVALID_IN_LOBBY",MISSING_REQUESTING_PARTICIPANT_ID:"MISSING_REQUESTING_PARTICIPANT_ID",INVALID_REQUESTING_PARTICIPANT_ID:"INVALID_REQUESTING_PARTICIPANT_ID",SUPPLEMENTARY_USER_INFO_NOT_FOUND:"SUPPLEMENTARY_USER_INFO_NOT_FOUND",UNAUTHORIZED:"UNAUTHORIZED",REMOVED_PARTICIPANT:"REMOVED_PARTICIPANT",FREE_USER_MAX_PARTICIPANTS_EXCEEDED:"FREE_USER_MAX_PARTICIPANTS_EXCEEDED",PAID_USER_MAX_PARTICIPANTS_EXCEEDED:"PAID_USER_MAX_PARTICIPANTS_EXCEEDED",SERVICE_MAX_PARTICIPANTS_EXCEEDED:"SERVICE_MAX_PARTICIPANTS_EXCEEDED",INACTIVE:"INACTIVE",ONE_ON_ONE_TO_SELF_NOT_ALLOWED:"ONE_ON_ONE_TO_SELF_NOT_ALLOWED",JOIN_RESTRICTED_USER:"JOIN_RESTRICTED_USER",GET_RESTRICTED_USER:"GET_RESTRICTED_USER",JOIN_RESTRICTED_USER_NOT_IN_ROOM:"JOIN_RESTRICTED_USER_NOT_IN_ROOM",CREATE_MEDIA_RESTRICTED_USER:"CREATE_MEDIA_RESTRICTED_USER",DUPLICATE_RESOURCE_CREATION_REQUEST:"DUPLICATE_RESOURCE_CREATION_REQUEST",MEETING_NOT_FOUND:"MEETING_NOT_FOUND",NOT_WEBEX_SITE:"NOT_WEBEX_SITE",INVALID_SCHEDULED_MEETING_ORGANIZER:"INVALID_SCHEDULED_MEETING_ORGANIZER",FREE_USER_MAX_PARTICIPANTS_JOINED_EXCEEDED:"FREE_USER_MAX_PARTICIPANTS_JOINED_EXCEEDED",PAID_USER_MAX_PARTICIPANTS_JOINED_EXCEEDED:"PAID_USER_MAX_PARTICIPANTS_JOINED_EXCEEDED",SERVICE_MAX_PARTICIPANTS_ROSTER_EXCEEDED:"SERVICE_MAX_PARTICIPANTS_ROSTER_EXCEEDED",SERVICE_INITIAL_PARTICIPANTS_ROSTER_EXCEEDED:"SERVICE_INITIAL_PARTICIPANTS_ROSTER_EXCEEDED",RESOURCE_GUEST_FORBIDDEN:"RESOURCE_GUEST_FORBIDDEN",SERVICE_NO_MACHINE_OR_SERVICE_ACCOUNT:"SERVICE_NO_MACHINE_OR_SERVICE_ACCOUNT",MODERATOR_ROLE_REMOVAL_NOT_ALLOWED:"MODERATOR_ROLE_REMOVAL_NOT_ALLOWED",RECORDING_CONTROL_NOT_SUPPORTED:"RECORDING_CONTROL_NOT_SUPPORTED",HOST_PIN_LOCKED:"HOST_PIN_LOCKED",INVALID_HOST_PIN:"INVALID_HOST_PIN",REQUESTING_PARTICIPANT_NOT_MODERATOR:"REQUESTING_PARTICIPANT_NOT_MODERATOR",CONVERSATION_NOT_FOUND:"CONVERSATION_NOT_FOUND",MEETING_LINK_NOT_FOUND:"MEETING_LINK_NOT_FOUND",MEETING_INFO_NOT_FOUND:"MEETING_INFO_NOT_FOUND",SCHEDULED_MEETING_NOT_FOUND:"SCHEDULED_MEETING_NOT_FOUND",RECORDING_NOT_STARTED:"RECORDING_NOT_STARTED",RECORDING_NOT_ENABLED:"RECORDING_NOT_ENABLED",RECORDING_USER_STORAGE_FULL:"RECORDING_USER_STORAGE_FULL",RECORDING_SITE_STORAGE_FULL:"RECORDING_SITE_STORAGE_FULL",NO_SCHEDULED_MEETING:"NO_SCHEDULED_MEETING",MEETING_FULL_UPDATE_NOT_ALLOWED:"MEETING_FULL_UPDATE_NOT_ALLOWED",MODERATOR_ROLE_REMOVAL_NOT_VALID:"MODERATOR_ROLE_REMOVAL_NOT_VALID",MODERATOR_ROLE_ADDITION_NOT_VALID:"MODERATOR_ROLE_ADDITION_NOT_VALID",INVALID_CALL_START_TIME:"INVALID_CALL_START_TIME",MEETING_STARTED_UPDATE_NOT_ALLOWED:"MEETING_STARTED_UPDATE_NOT_ALLOWED",EXCEEDED_MAX_JOINED_PARTICIPANTS:"EXCEEDED_MAX_JOINED_PARTICIPANTS",EXCEEDED_SERVICE_MAX_PARTICIPANTS:"EXCEEDED_SERVICE_MAX_PARTICIPANTS",MEETING_IS_LOCKED:"MEETING_IS_LOCKED",MEETING_IS_TERMINATING:"MEETING_IS_TERMINATING",MEETING_REQUIRE_MODERATOR_PIN_INTENT:"MEETING_REQUIRE_MODERATOR_PIN_INTENT",MEETING_REQUIRE_MODERATOR_PIN:"MEETING_REQUIRE_MODERATOR_PIN",MEETING_REQUIRE_MODERATOR_ROLE:"MEETING_REQUIRE_MODERATOR_ROLE",PMR_ACCOUNT_SUSPENDED:"PMR_ACCOUNT_SUSPENDED",PMR_ACCOUNT_LOCKED:"PMR_ACCOUNT_LOCKED",INVALID_JOIN_TIME:"INVALID_JOIN_TIME",REQUIRES_WEBEX_LOGIN:"REQUIRES_WEBEX_LOGIN",TOO_MANY_REQUESTS:"TOO_MANY_REQUESTS",UNABLE_TO_LOOK_UP_DEVICE_INFORMATION:"UNABLE_TO_LOOK_UP_DEVICE_INFORMATION",UNABLE_TO_LOOK_UP_CONVERSATION:"UNABLE_TO_LOOK_UP_CONVERSATION",UNABLE_TO_LOOK_UP_CI_USER:"UNABLE_TO_LOOK_UP_CI_USER",UNABLE_TO_CREATE_CONFLUENCE:"UNABLE_TO_CREATE_CONFLUENCE",SERVICE_UNAVAILABLE:"SERVICE_UNAVAILABLE",SOCKET_TIMEOUT:"SOCKET_TIMEOUT",NO_HTTP_RESPONSE:"NO_HTTP_RESPONSE"},t.MODERATOR_HINTS={RECORDING_CONTROL_START:"RECORDING_CONTROL_START",RECORDING_CONTROL_PAUSE:"RECORDING_CONTROL_PAUSE",RECORDING_CONTROL_STOP:"RECORDING_CONTROL_STOP",RECORDING_CONTROL_RESUME:"RECORDING_CONTROL_RESUME",LOCK_CONTROL_UNLOCK:"LOCK_CONTROL_UNLOCK",LOCK_CONTROL_LOCK:"LOCK_CONTROL_LOCK"},t.MEETING_STATE={STATES:{IDLE:"IDLE",INCOMING:"INCOMING",DIALING:"DIALING",NOTIFIED:"NOTIFIED",DECLINED:"DECLINED",ON_GOING:"ON_GOING",JOINED:"JOINED",TERMINATING:"TERMINATING",LEFT:"LEFT",ENDED:"ENDED",ERROR:"ERROR"}},t.MEETING_STATE_MACHINE={TRANSITIONS:{FAIL:"fail",RING:"ring",REMOTE:"remote",JOIN:"join",DECLINE:"decline",LEAVE:"leave",RESET:"reset",SAFE:"SAFE"},STATES:{ERROR:"ERROR",IDLE:"IDLE",ENDED:"ENDED",DECLINED:"DECLINED",RINGING:"RINGING",JOINED:"JOINED",ANSWERED:"ANSWERED",SAFE:"SAFE"}},t.MEETING_AUDIO_STATE_MACHINE={TRANSITIONS:{TOGGLE:"toggle",INIT:"init"},STATES:{MUTE_SELF:"SELF_AUDIO_OFF",UNMUTE_SELF:"SELF_AUDIO_ON"}},t.MEETING_VIDEO_STATE_MACHINE={TRANSITIONS:{TOGGLE:"toggle",INIT:"init"},STATES:{MUTE_SELF:"SELF_VIDEO_OFF",UNMUTE_SELF:"SELF_VIDEO_ON"}},t.PEER_CONNECTION_STATE={CLOSED:"closed",FAILED:"failed"},t.RTC_CONFIGURATION_FIREFOX={iceServers:[],bundlePolicy:"max-compat"},t.RTC_CONFIGURATION={iceServers:[]},t.RECONNECTION={STATE:{IN_PROGRESS:"IN_PROGRESS",COMPLETE:"COMPLETE",FAILURE:"FAILURE",DEFAULT_TRY_COUNT:0,DEFAULT_STATUS:""}},t.RESOURCE={CLUSTERS:"clusters",REACHABILITY:"reachability",LOCI:"loci"},t.REACHABILITY={localStorage:"reachability.result"},t.ROAP={ROAP_TRANSITIONS:{STEP:"step"},ROAP_TYPES:{OFFER:"OFFER",ANSWER:"ANSWER",OK:"OK",ERROR:"ERROR",SHUTDOWN:"SHUTDOWN",OFFER_REQUEST:"OFFER_REQUEST"},ROAP_STATE:{INIT:"INIT",WAIT_RX_OFFER:"WAIT_RX_OFFER",WAIT_RX_ANSWER:"WAIT_RX_ANSWER",WAIT_RX_OK:"WAIT_RX_OK",WAIT_TX_OFFER:"WAIT_TX_OFFER",WAIT_TX_ANSWER:"WAIT_TX_ANSWER",WAIT_TX_OK:"WAIT_TX_OK",IDLE_LOCAL_OFFER:"IDLE_LOCAL_OFFER",IDLE_REMOTE_OFFER:"IDLE_REMOTE_OFFER",GLARE:"GLARE",ERROR:"ERROR"},ROAP_SIGNAL:{RX_OFFER:"RX_OFFER",TX_OFFER:"TX_OFFER",RX_ANSWER:"RX_ANSWER",TX_ANSWER:"TX_ANSWER",RX_OK:"RX_OK",TX_OK:"TX_OK",GLARE_RESOLVED:"GLARE_RESOLVED"},RECEIVE_ROAP_MSG:"RECEIVE_ROAP_MSG",SEND_ROAP_MSG:"SEND_ROAP_MSG",SEND_ROAP_MSG_SUCCESS:"SEND_ROAP_MSG_SUCCESS",RESET_ROAP_STATE:"RESET_ROAP_STATE",RECEIVE_CALL_LEAVE:"RECEIVE_CALL_LEAVE",ROAP_MERCURY:"event:locus.message.roap",ROAP_VERSION:"2",RX_:"RX_",TX_:"TX_"},t.SDP={A_CONTENT_SLIDES:"a=content:slides",ROLLBACK:"rollback",HAVE_LOCAL_OFFER:"have-local-offer",STABLE:"stable",OFFER:"offer",M_LINE:"m=",MAX_FS_8160:"max-fs=8160",B_LINE:"b=TIAS",CARRIAGE_RETURN:"\r\n",BAD_MEDIA_PORTS:[9,0]},t.STATS={END:"end",DATA:"data",CLOSED:"closed",SENDER:"sender",RECEIVER:"receiver",SENDERS:"senders",RECEIVERS:"receivers",CONFIG:{senders:{audio:{transceiver:"audioTransceiver",child:"sender",parent:"mediaProperties",peerConnection:"peerConnection",name:"audioSender"},video:{transceiver:"videoTransceiver",child:"sender",parent:"mediaProperties",peerConnection:"peerConnection",name:"videoSender"},share:{transceiver:"shareTransceiver",child:"sender",parent:"mediaProperties",peerConnection:"peerConnection",name:"shareSender"}},receivers:{audio:{transceiver:"audioTransceiver",child:"receiver",parent:"mediaProperties",peerConnection:"peerConnection",name:"audioReceiver"},video:{transceiver:"videoTransceiver",child:"receiver",parent:"mediaProperties",peerConnection:"peerConnection",name:"videoReceiver"},share:{transceiver:"shareTransceiver",child:"receiver",parent:"mediaProperties",peerConnection:"peerConnection",name:"shareReceiver"}}}}});r(QQ);QQ.AUDIO,QQ.AUDIO_INPUT,QQ.AUDIO_STATUS,QQ.ALERT,QQ.ANSWER,QQ.CALL,QQ.CORRELATION_ID,QQ.CONVERSATIONS,QQ.CALENDAR,QQ.CALENDAR_EVENTS_API,QQ.CMR_MEETINGS,QQ.CLAIM,QQ.CONTROLS,QQ.CONTENT,QQ.DEVELOPMENT,QQ.DECLINE,QQ.ERROR,QQ.HECATE,QQ.JOIN,QQ.LEAVE,QQ.LOCAL,QQ.LOCI,QQ.LOCUS_URL,QQ.MEETINGINFO,QQ.MEET,QQ.MEET_M,QQ.MEDIA,QQ.ONLINE,QQ.PARTICIPANT,QQ.REMOTE,QQ.READY,QQ.SIP_URI,QQ.TYPE,QQ.VIDEO,QQ.VIDEO_INPUT,QQ.VIDEO_STATUS,QQ._ANSWER_,QQ._ACTIVE_,QQ._BUSY_,QQ._CALL_,QQ._CREATED_,QQ._CONFLICT_,QQ._CONVERSATION_URL_,QQ._ERROR_,QQ._FORCED_,QQ._IDLE_,QQ._IN_LOBBY_,QQ._IN_MEETING_,QQ._INCOMING_,QQ._IN_,QQ._JOIN_,QQ._JOINED_,QQ._LOCUS_ID_,QQ._LEFT_,QQ._MEETING_LINK_,QQ._MEETING_,QQ._MEETING_CENTER_,QQ._MEETING_ID_,QQ._NOT_IN_MEETING_,QQ._NONE_,QQ._OFFER_,QQ._OBSERVE_,QQ._PERSONAL_ROOM_,QQ._REQUESTED_,QQ._RESOURCE_ROOM_,QQ._RECEIVE_ONLY_,QQ._SIP_URI_,QQ._SEND_RECEIVE_,QQ._SLIDES_,QQ._USER_,QQ._UNKNOWN_,QQ._WEBEX_MEETING_,QQ._WAIT_,QQ.ALTERNATE_REDIRECT_TRUE,QQ.HTTPS_PROTOCOL,QQ.MEETINGS,QQ.MEDIA_PEER_CONNECTION_NAME,QQ.SHARE_PEER_CONNECTION_NAME,QQ.USE_URI_LOOKUP_FALSE,QQ.WWW_DOT,QQ.WEBEX_DOT_COM,QQ.DEFAULT_EXCLUDED_STATS,QQ.MODERATOR_TRUE,QQ.MODERATOR_FALSE,QQ.AUDIO_BANDWIDTH_LIMIT,QQ.VIDEO_BANDWIDTH_LIMIT,QQ.INTENT_TO_JOIN,QQ.ICE_TIMEOUT,QQ.ICE_FAIL_TIMEOUT,QQ.RETRY_TIMEOUT,QQ.ROAP_SEQ_PRE,QQ.DIALER_REGEX,QQ.DEFAULT_TRANSFORM_REGEX,QQ.VALID_EMAIL_ADDRESS,QQ.VALID_PMR_ADDRESS,QQ.VALID_PMR_LINK,QQ.VALID_PIN,QQ.UUID_REG,QQ.API,QQ.ANALYSIS_CHECKS,QQ.ANALYSIS_STATS,QQ.CALENDAR_EVENTS,QQ.DEFAULT_GET_STATS_FILTER,QQ.DEFAULT_EVENT_VIDEO_SEND_KEYS,QQ.DEFAULT_EVENT_AUDIO_SEND_KEYS,QQ.DEFAULT_EVENT_VIDEO_RECEIVE_KEYS,QQ.DEFAULT_EVENT_AUDIO_RECEIVE_KEYS,QQ.DEFAULT_TRANSFORM_KEYS,QQ.DELTAEVENT,QQ.EVENT_TRIGGERS,QQ.EVENT_TYPES,QQ.EVENTS,QQ.EVENT_STATS_MAP,QQ.ERROR_DICTIONARY,QQ.FLOOR_ACTION,QQ.FULL_STATE,QQ.HTTP_VERBS,QQ.ICE_STATE,QQ.JOIN_HINTS,QQ.LOCUS,QQ.LOCUSINFO,QQ.LOCUSEVENT,QQ.MEETING_ERRORS,QQ.MODERATOR_HINTS,QQ.MEETING_STATE,QQ.MEETING_STATE_MACHINE,QQ.MEETING_AUDIO_STATE_MACHINE,QQ.MEETING_VIDEO_STATE_MACHINE,QQ.PEER_CONNECTION_STATE,QQ.RTC_CONFIGURATION_FIREFOX,QQ.RTC_CONFIGURATION,QQ.RECONNECTION,QQ.RESOURCE,QQ.REACHABILITY,QQ.ROAP,QQ.SDP,QQ.STATS;var JQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="UnknownCallFailure",n="LocusRateLimitedIncoming",i="LocusRateLimitedOutgoing",a="LocusUnavailable",o="LocusConflict",s="Timeout",u="LocusInvalidSequenceHash",c="UpdateMediaFailed",l="FailedToConnectMedia",f="MediaEngineLost",d="MediaConnectionLost",p="IceFailure",h="MediaEngineHang",v="IceServerRejected",m="CallFull",g="RoomTooLarge",y="GuestAlreadyAdded",E="LocusUserNotAuthorised",b="CloudberryUnavailable",_="RoomTooLarge_FreeAccount",S="MeetingInactive",T="MeetingLocked",w="MeetingTerminating",I="Moderator_Pin_Or_Guest_Required",A="Moderator_Pin_Or_Guest_PIN_Required",C="Moderator_Required",x="UserNotMemberOfRoom",O="NewLocusError",R="NetworkUnavailable",N="MeetingUnavailable",k="MeetingIDInvalid",P="MeetingSiteInvalid",M="LocusInvalidJoinTime",D="LobbyExpired",L="MediaConnectionLostPaired",U="PhoneNumberNotANumber",j="PhoneNumberTooLong",F="InvalidDialableKey",B="OneOnOneToSelfNotAllowed",V="RemovedParticipant",G="MeetingLinkNotFound",q="PhoneNumberTooShortAfterIdd",K="InvalidInviteeAddress",H="PMRUserAccountLockedOut",z="GuestForbidden",W="PMRAccountSuspended",Y="EmptyPhoneNumberOrCountryCode",X="ConversationNotFound",$="SIPCalleeBusy",Q="SIPCalleeNotFound",J="StartRecordingFailed",Z="RecordingInProgressFailed",ee="signaling",te="expected",re="CallInitiationFailure",ne="MediaConnectionFailure",ie="ExpectedFailure",ae="AccessRights";t.eventType={CALL_INITIATED:"client.call.initiated",MOVE_MEDIA:"client.call.move-media",LOCAL_SDP_GENERATED:"client.media-engine.local-sdp-generated",REMOTE_SDP_RECEIVED:"client.media-engine.remote-sdp-received",LOCAL_JOIN_REQUEST:"client.locus.join.request",LOCUS_JOIN_RESPONSE:"client.locus.join.response",NOTIFICATION_RECEIVED:"client.notification.received",ALERT_DISPLAYED:"client.alert.displayed",ICE_START:"client.ice.start",ICE_END:"client.ice.end",RECEIVING_MEDIA_START:"client.media.rx.start",RECEIVING_MEDIA_STOP:"client.media.rx.stop",SENDING_MEDIA_START:"client.media.tx.start",SENDING_MEDIA_STOP:"client.media.tx.stop",MEDIA_RENDER_START:"client.media.render.start",MEDIA_RENDER_STOP:"client.media.render.stop",MEDIA_CAPABILITIES:"client.media.capabilities",MEDIA_RECONNECTING:"client.media.reconnecting",MEDIA_RECOVERED:"client.media.recovered",MEDIA_RECONNECTION_FAILED:"client.media.recovered",PIN_PROMPT:"client.pin.prompt",PIN_COLLECTED:"client.pin.collected",LOBBY_ENTERED:"client.lobby.entered",LOBBY_EXITED:"client.lobby.exited",SHARE_INITIATED:"client.share.initiated",SHARE_STOPPED:"client.share.stopped",LOCAL_SHARE_FLOOR_GRANTED:"client.share.floor-granted.local",SHARE_LAYOUT_DISPLAYED:"client.share.layout.displayed",MUTED:"client.muted",UNMUTED:"client.unmuted",LEAVE:"client.call.leave",REMOTE_ENDED:"client.call.remote-ended",REMOTE_STARTED:"client.call.remote-started",MEDIA_REQUEST:"client.locus.media.request",MEDIA_RESPONSE:"client.locus.media.response",PSTN_AUDIO_ATTEMPT_START:"client.pstnaudio.attempt.start",PSTN_AUDIO_ATTEMPT_FINISH:"client.pstnaudio.attempt.finish",PSTN_AUDIO_ATTEMPT_SKIP:"client.pstnaudio.attempt.skip"},t.error={name:{MEDIA_ENGINE:"media-engine",ICE_FAILED:"ice.failed",LOCUS_RESPONSE:"locus.response",LOCUS_LEAVE:"locus.leave"},notFatalErrorList:[3003,3004,4004,4005,4006,4015],errors:{1000:[r,re,ee],1001:[n,re,ee],1002:[i,re,ee],1003:[a,re,ee],1004:[o,re,ee],1005:[s,re,ee],1006:[u,re,ee],1007:[c,re,ee],2001:[l,ne,ee],2002:[f,ne,ee],2003:[d,ne,ee],2004:[p,ne,ee],2005:[h,ne,ee],2006:[v,ne,ee],3001:[m,ie,te],3002:[g,ie,te],3004:[y,ie,te],3005:[E,ie,te],3006:[b,ie,te],3007:[_,ie,te],4001:[S,re,te],4002:[T,re,te],4003:[w,re,te],4004:[I,ae,te],4005:[A,ae,te],4006:[C,ae,te],4007:[x,ae,te],4008:[O,re,te],4009:[R,re,te],4010:[N,re,te],4011:[k,ie,te],4012:[P,ie,te],4013:[M,ie,te],4014:[D,ie,te],4015:[L,ne,te],4016:[U,ie,te],4017:[j,ie,te],4018:[F,ie,te],4019:[B,ie,te],4020:[V,ie,te],4021:[G,ie,te],4022:[q,ie,te],4023:[K,ie,te],4024:[H,ie,te],4025:[z,ie,te],4026:[W,ie,te],4027:[Y,ie,te],4028:[X,ie,te],4029:[J,ie,te],4030:[Z,ie,te],5000:[$,ie,te],5001:[Q,ie,te]}},t.trigger={USER_INTERACTION:"user-interaction",MERCURY_EVENT:"mercury-event",LOCI_UPDATE:"loci-update",MEDIA_ENGINE_EVENT:"media-engine-event",TIMEOUT:"timeout",SIGNALING:"signaling",OTHER:"other"},t.pstnAudioType={DIAL_IN:"dial-in",DIAL_OUT:"dial-out"},t.displayLocation={TOAST:"toast",ROOM_LIST:"room-list",CALL_PANE:"call-pane",CALL_VIEW:"call-view",OTHER:"other"},t.mediaType={AUDIO:"audio",VIDEO:"video",SHARE:"share",WHITEBOARD:"whiteboard"},t.reconnection={RECOVERED_BY_NEW:"new",RECOVERED_BY_RETRY:"retry"},t.errorCodes={USER_CREATE_FAILED:1400006,USER_ALREADY_PARTICIPANT:1403001,CONVO_ALREADY_EXISTS:1403010,ALREADY_ANNOUNCEMENT_SPACE:1403014,NOT_ANNOUNCEMENT_SPACE:1403015,USER_NOT_MODERATOR_IN_ANNOUNCEMENT_SPACE:1403016,TEMP_ID_ALREADY_EXISTS:1409001,PARENT_ACTIVITY_ID_NOT_FOUND_OR_INVALID:14000015},t.statusCodes={NETWORK_OR_CORS:0,BAD_REQUEST:400,FORBIDDEN:403,NOT_FOUND:404,CONFLICT:409}});r(JQ);JQ.eventType,JQ.error,JQ.trigger,JQ.pstnAudioType,JQ.displayLocation,JQ.mediaType,JQ.reconnection,JQ.errorCodes,JQ.statusCodes;var ZQ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=f(ZC),n=f(zy),i=f($y),a=f(PI),o=f(by),s=f(YQ),u=f(AR),c=f(Ax),l=f($Q);function f(e){return e&&e.__esModule?e:{default:e}}var d=new(function(){function e(){return(0,n.default)(this,e),e.instance||(this._events=[],this.meetingCollection=null,this.keys=(0,r.default)(JQ.eventType),e.instance=this),e.instance}return(0,i.default)(e,[{key:"initialSetup",value:function(e,t){this.meetingCollection=e,this.webexVersion=t}},{key:"postEvent",value:function(e){var t=e.meetingId,r=e.data,n=void 0===r?{}:r,i=e.event,a=e.meeting;-1===this.keys.indexOf(i)&&l.default.logger.error("Metrics: Event "+i+" doesnt exist in dictionary"),!a&&t&&(a=this.meetingCollection.get(t)),a?(a.callEvents||(a.callEvents=[]),a.callEvents.push(i),n.event=i,a.sendCallAnalyzerMetrics(n)):l.default.logger.error("Metrics->postEvent: Meeting object not defined")}},{key:"initPayload",value:function(e,t,r){var n={eventId:u.default.v4(),version:1,origin:{buildType:"prod",name:"endpoint",networkType:"unknown",userAgent:this.getUserAgentInfo()},originTime:{triggered:(new Date).toISOString()},event:{name:e,canProceed:!0,identifiers:t,eventData:{webClientDomain:c.default.location.hostname}}};return r&&(Object.prototype.hasOwnProperty.call(r,"canProceed")&&(n.event.canProceed=r.canProceed),r.errors&&(n.event.errors=r.errors),r.mediaType&&(n.event.mediaType=r.mediaType),r.trigger&&(n.event.trigger=r.trigger),r.pstnAudioType&&(n.event.pstnAudioType=r.pstnAudioType),r.mediaCapabilities&&(n.event.mediaCapabilities=r.mediaCapabilities),r.recoveredBy&&(n.event.recoveredBy=r.recoveredBy)),n}},{key:"parseLocusError",value:function(e,t){var r=void 0;if(e&&e.body&&e.body.errorCode)switch(JQ.errorCodes[e.body.errorCode]){case QQ.MEETING_ERRORS.FREE_USER_MAX_PARTICIPANTS_EXCEEDED:r=3007;break;case QQ.MEETING_ERRORS.PAID_USER_MAX_PARTICIPANTS_EXCEEDED:case QQ.MEETING_ERRORS.SERVICE_MAX_PARTICIPANTS_EXCEEDED:r=3002;break;case QQ.MEETING_ERRORS.INACTIVE:r=4001;break;case QQ.MEETING_ERRORS.EXCEEDED_MAX_JOINED_PARTICIPANTS:case QQ.MEETING_ERRORS.EXCEEDED_SERVICE_MAX_PARTICIPANTS:r=3001;break;case QQ.MEETING_ERRORS.MEETING_IS_LOCKED:r=4002;break;case QQ.MEETING_ERRORS.MEETING_IS_TERMINATING:r=4003;break;case QQ.MEETING_ERRORS.MEETING_REQUIRE_MODERATOR_PIN_INTENT:r=4004;break;case QQ.MEETING_ERRORS.MEETING_REQUIRE_MODERATOR_PIN:r=4005;break;case QQ.MEETING_ERRORS.MEETING_REQUIRE_MODERATOR_ROLE:r=4006;break;case QQ.MEETING_ERRORS.JOIN_RESTRICTED_USER:case QQ.MEETING_ERRORS.GET_RESTRICTED_USER:case QQ.MEETING_ERRORS.CREATE_MEDIA_RESTRICTED_USER:r=3005;break;case QQ.MEETING_ERRORS.JOIN_RESTRICTED_USER_NOT_IN_ROOM:r=4007;break;case QQ.MEETING_ERRORS.MEETING_NOT_FOUND:r=4011;break;case QQ.MEETING_ERRORS.NOT_WEBEX_SITE:r=4012;break;case QQ.MEETING_ERRORS.INVALID_JOIN_TIME:r=4013;break;case QQ.MEETING_ERRORS.PHONE_NUMBER_NOT_A_NUMBER:r=4016;break;case QQ.MEETING_ERRORS.PHONE_NUMBER_TOO_LONG:r=4017;break;case QQ.MEETING_ERRORS.INVALID_DIALABLE_KEY:r=4018;break;case QQ.MEETING_ERRORS.ONE_ON_ONE_TO_SELF_NOT_ALLOWED:r=4019;break;case QQ.MEETING_ERRORS.REMOVED_PARTICIPANT:r=4020;break;case QQ.MEETING_ERRORS.MEETING_LINK_NOT_FOUND:r=4021;break;case QQ.MEETING_ERRORS.PHONE_NUMBER_TOO_SHORT_AFTER_IDD:r=4022;break;case QQ.MEETING_ERRORS.INVALID_INVITEE_ADDRESS:r=4023;break;case QQ.MEETING_ERRORS.PMR_ACCOUNT_LOCKED:r=4024;break;case QQ.MEETING_ERRORS.RESOURCE_GUEST_FORBIDDEN:r=4025;break;case QQ.MEETING_ERRORS.PMR_ACCOUNT_SUSPENDED:r=4026;break;case QQ.MEETING_ERRORS.EMPTY_PHONE_NUMBER_OR_COUNTRY_CODE:r=4027;break;case QQ.MEETING_ERRORS.INVALID_SINCE_OR_SEQUENCE_HASH_IN_REQUEST:r=1006;break;case QQ.MEETING_ERRORS.CONVERSATION_NOT_FOUND:r=4028;break;case QQ.MEETING_ERRORS.RECORDING_CONTROL_NOT_SUPPORTED:case QQ.MEETING_ERRORS.RECORDING_NOT_STARTED:case QQ.MEETING_ERRORS.RECORDING_NOT_ENABLED:r=4029;break;default:r=4008}else r=4008;return this.createErrorPayloadWithErrorCode(r,t,JQ.error.name.LOCUS_RESPONSE,e)}},{key:"generateErrorPayload",value:function(e,t,r,n){if(JQ.error.errors[e]){var i={shownToUser:t||!1,category:JQ.error.errors[e][2],errorDescription:JQ.error.errors[e][0],errorCode:e,fatal:!(0,a.default)(JQ.error.notFatalErrorList,e),name:r||JQ.error.name.OTHER};return n&&n.body&&(i.errorData=n.body),i}return null}},{key:"getUserAgentInfo",value:function(){var e=void 0,t=void 0,r=void 0;return s.default.name&&-1!==["chrome","firefox","msie","msedge","safari"].indexOf(s.default.name.toLowerCase())&&s.default.version&&(t=o.default.format("browser=%s",s.default.name.toLowerCase()+"/"+s.default.version.split(".")[0])),s.default.platform&&s.default.osversion&&(r=o.default.format("os=%s",s.default.platform+"/"+s.default.osversion.split(".")[0])),t&&(e="("+t),r&&(e=e?e+"; "+r:"("+r),e?(e+=")",o.default.format("webex-js-sdk/%s %s",xu.env.NODE_ENV+"-"+this.webexVersion,e)):o.default.format("webex-js-sdk/%s",xu.env.NODE_ENV+"-"+this.webexVersion)}}]),e}());t.default=d});r(ZQ);var eJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(QS),n=l(tT),i=l(iT),a=l(dT),o=l(hT),s=l(zy),u=l(vT),c=l(mT);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QQ.ERROR_DICTIONARY.PARAMETER.MESSAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,s.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.name=QQ.ERROR_DICTIONARY.PARAMETER.NAME,n.sdkMessage=QQ.ERROR_DICTIONARY.PARAMETER.MESSAGE,n.error=r,n.stack=r?r.stack:(new Error).stack,n.code=QQ.ERROR_DICTIONARY.PARAMETER.CODE,n}return(0,c.default)(t,e),t}(function(e){function t(){var t=(0,a.default)(e,(0,i.default)(arguments));return(0,n.default)(t,(0,o.default)(this)),t}return t.prototype=(0,r.default)(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n.default?(0,n.default)(t,e):t.__proto__=e,t}(Error));t.default=f});r(eJ);var tJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=Pf)&&r.__esModule?r:{default:r};var i={getEventLog:function(e){var t="";try{t=(0,n.default)(e)}catch(e){}return t},getScopeLog:function(e){var t="";if(e){if(e.file&&e.function)return t+=e.file+":"+e.function+"->";e.file&&(t+=e.file+"->"),e.function&&(t+=e.function+"->")}return t}};t.default=i});r(tJ);var rJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o($Q),n=o(XQ),i=o(eJ),a=o(tJ);function o(e){return e&&e.__esModule?e:{default:e}}var s={trigger:function(e,t,o,s){if(!e||!e.trigger)throw new i.default("Instance to trigger from must be defined and have a trigger function.");return r.default.logger.debug(a.default.getScopeLog(t)+"event#"+o+(n.default.verboseEvents?" -- "+a.default.getEventLog(s):"")),e.trigger(o,s)}};t.default=s});r(rJ);var nJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(zy),n=o($y),i=o(OI),a=o(eJ);function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){if((0,r.default)(this,e),this.namespace=QQ.MEETINGS,!t||!(0,i.default)(t))throw new a.default("Collection expects a string to use as a property name.");this.propertyName=t,this[this.propertyName]={}}return(0,n.default)(e,[{key:"get",value:function(e){return this[this.propertyName]&&this[this.propertyName][e]?this[this.propertyName][e]:null}},{key:"set",value:function(e,t){return this[this.propertyName][e]=t,this.get(e)}},{key:"delete",value:function(e){delete this[this.propertyName][e]}},{key:"getAll",value:function(){return this[this.propertyName]}},{key:"setAll",value:function(e){return this[this.propertyName]=e,this.getAll()}}]),e}();t.default=s});r(nJ);var iJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(hT),n=u(zy),i=u($y),a=u(vT),o=u(mT),s=u(hN);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){(0,n.default)(this,t);var e=(0,a.default)(this,(t.__proto__||(0,r.default)(t)).call(this,"meetingInfos"));return e.namespace=QQ.MEETINGS,e}return(0,o.default)(t,e),(0,i.default)(t,[{key:"get",value:function(e){return this.meetingInfos[e]?this.meetingInfos[e]:(0,s.default)(this.meetingInfos,function(t){return t.sipUrl===e||t.locusId===e||t.userId===e||t.meetingLink===e})}}]),t}(u(nJ).default);t.default=c});r(iJ);var aJ=n(function(e){!function(){e.exports=function(e){return(e instanceof ag?e:ag.from(e.toString(),"binary")).toString("base64")}}()}),oJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(_y),n=a(aJ),i=a($Q);function a(e){return e&&e.__esModule?e:{default:e}}var o={getParsedUrl:function(e){try{var t=r.default.parse(e);return!!t&&(t.protocol||(t=r.default.parse(""+QQ.HTTPS_PROTOCOL+e)),t)}catch(e){return i.default.logger.warn("MeetingInfoUtil->getParsedUrl#unable to parse the URL, error: "+e),null}},isMeetingLink:function(e){var t=o.getParsedUrl(e),r=t.hostname&&t.hostname.includes(QQ.WEBEX_DOT_COM),n=t.pathname&&(t.pathname.includes("/"+QQ.MEET)||t.pathname.includes("/"+QQ.MEET_M)||t.pathname.includes("/"+QQ.JOIN));return r&&n},convertLinkToSip:function(e){var t=o.getParsedUrl(e);if(!t)return null;var r=void 0;if(t.pathname){var n=t.pathname.lastIndexOf("/");r=t.pathname.substring(n+1)}if(!r)return null;var i=void 0;if(t.hostname){var a=t.hostname.lastIndexOf("."+QQ.WEBEX_DOT_COM);i=t.hostname.substring(0,a).replace(QQ.WWW_DOT,"")}return i?r+"@"+i+"."+QQ.WEBEX_DOT_COM:null},isSipUri:function(e){return QQ.DIALER_REGEX.SIP_ADDRESS.exec(e)},isPhoneNumber:function(e){return QQ.DIALER_REGEX.PHONE_NUMBER.test(e)},generateOptions:function(e){var t=e.destination,r=e.type,n=e.conversationServiceUrl;if(r)return{destination:t,type:r};var i={};return o.isMeetingLink(t)?(i.type=QQ._MEETING_LINK_,i.destination=t):o.isSipUri(t)?(i.type=QQ._SIP_URI_,i.destination=t):o.isPhoneNumber(t)?(i.type=QQ._SIP_URI_,i.destination=t):(i.type=QQ._CONVERSATION_URL_,i.destination=n+"/"+QQ.CONVERSATIONS+"/"+t),i},getResourceUrl:function(e,t){var r="/"+QQ.LOCI+"/"+QQ.MEETINGINFO,i=QQ.HTTP_VERBS.GET;switch(e){case QQ._SIP_URI_:case QQ._PERSONAL_ROOM_:case QQ._MEETING_ID_:r="/"+QQ.LOCI+"/"+QQ.MEETINGINFO+"/"+t+"?"+QQ.TYPE+"="+e+"&"+QQ.USE_URI_LOOKUP_FALSE;break;case QQ._CONVERSATION_URL_:i=QQ.HTTP_VERBS.PUT;break;case QQ._LOCUS_ID_:r="/"+QQ.LOCI+"/"+t+"/"+QQ.MEETINGINFO,i=QQ.HTTP_VERBS.PUT;break;case QQ._MEETING_LINK_:r="$/"+QQ.LOCI+"/"+QQ.MEETINGINFO+"/"+(0,n.default)(t)+"?"+QQ.TYPE+"="+QQ._MEETING_LINK_+"&"+QQ.USE_URI_LOOKUP_FALSE}return{resource:r,method:i}},getRequestParams:function(e,t,r,n){var i={method:e.method,api:n,resource:e.resource};return e.method===QQ.HTTP_VERBS.GET?i.resource=i.resource.concat("&"+QQ.ALTERNATE_REDIRECT_TRUE):t!==QQ._LOCUS_ID_&&(i.resource=i.resource.concat("?"+QQ.ALTERNATE_REDIRECT_TRUE),i.body={value:r,lookupType:t}),i},getMeetingInfoAPIFormat:function(e){return{type:e.type,value:e.destination}}};t.default=o});r(oJ);var sJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(hT),n=c(zy),i=c($y),a=c(vT),o=c(mT),s=c(eJ),u=c(oJ);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){var e,i,o,s;(0,n.default)(this,t);for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];return i=o=(0,a.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(c))),o.namespace=QQ.MEETINGS,s=i,(0,a.default)(o,s)}return(0,o.default)(t,e),(0,i.default)(t,[{key:"fetchMeetingInfo",value:function(e){if(!e||!e.type||!e.destination)throw new s.default("MeetingInfo should be fetched with a type and destination specified, see list of valid types and their corresponding values in constants");var t=u.default.getMeetingInfoAPIFormat(e),r=u.default.getResourceUrl(t.type,t.value),n=u.default.getRequestParams(r,t.type,t.value,QQ.API.LOCUS);return this.request(n)}}]),t}(XR.StatelessWebexPlugin);t.default=l});r(sJ);var uJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(_f),n=f(hT),i=f(zy),a=f($y),o=f(vT),s=f(mT),u=f(iJ),c=f(sJ),l=f(oJ);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e,r){(0,i.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,n.default)(t)).call(this,{},r));return a.namespace=QQ.MEETINGS,a.meetingInfoRequest=new c.default({},r),a.meetingInfoCollection=new u.default,a}return(0,s.default)(t,e),(0,a.default)(t,[{key:"getMeetingInfo",value:function(e){return this.meetingInfoCollection.get(e)}},{key:"setMeetingInfo",value:function(e,t){this.meetingInfoCollection.set(e,t)}},{key:"requestFetchInfo",value:function(e){var t=this;return this.meetingInfoRequest.fetchMeetingInfo(e).then(function(e){return e&&e.body&&t.setMeetingInfo(e.body.sipMeetingUri||e.body.meetingLink,e.body),e}).catch(function(e){return r.default.reject(e)})}},{key:"fetchInfoOptions",value:function(e,t){return l.default.generateOptions({destination:e,type:t,conversationServiceUrl:this.webex.internal.device.services.conversationServiceUrl})}},{key:"fetchMeetingInfo",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.fetchInfoOptions(e,n);return this.requestFetchInfo(i).catch(function(n){return i.type===QQ._MEETING_LINK_?t.requestFetchInfo(t.fetchInfoOptions(l.default.convertLinkToSip(e),QQ._SIP_URI_)):r.default.reject(n)})}}]),t}(XR.StatelessWebexPlugin);t.default=d});r(uJ);var cJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(Af),n=a(jA),i=a(eJ);function a(e){return e&&e.__esModule?e:{default:e}}var o={generateSingularOptions:function(e,t,r,n){var i={};i[n]={},i[n][e.correlate]=e,o.generateOptions(i,t,r)},generateOptions:function(e,t,r){if(!e||!t||!r)throw new i.default("stats/util->validateInitialization#options, config, and meeting must be provided to execute getStats");o.configOptions(r,t,e,QQ.STATS.SENDERS),o.configOptions(r,t,e,QQ.STATS.RECEIVERS)},configOptions:function(e,t,a,o){a[o]&&(0,n.default)(a[o],function(n){if(!n.correlate)throw new i.default("stats/util->validateInitialization#each "+n+" must be provided with a correlate as audio OR video OR share.");if(t[o][n.correlate]){var a=t[o][n.correlate],s=e[a.parent][a.peerConnection],u=s[a.transceiver][a.child];(0,r.default)(n,{media:s,filter:u,name:a.name})}})}};t.default=o});r(cJ);var lJ=n(function(e){var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach(function(e){t[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})}),fJ=(lJ.v,lJ.o,lJ.s,lJ.i,lJ.u,lJ.e,lJ.p,lJ.z,lJ.r,lJ.t,lJ.c,lJ.b,lJ.m,lJ.a,n(function(e,t){var r=function(e){return String(Number(e))===e?Number(e):e},n=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var a=e.push?{}:i?t[e.name]:t;!function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var a=0;a<n.length;a+=1)null!=e[a+1]&&(t[n[a]]=r(e[a+1]))}(n.match(e.reg),a,e.names,e.name),e.push&&t[e.push].push(a)},i=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},r=[],a=t;return e.split(/(\r\n|\r|\n)/).filter(i).forEach(function(e){var t=e[0],i=e.slice(2);"m"===t&&(r.push({rtp:[],fmtp:[]}),a=r[r.length-1]);for(var o=0;o<(lJ[t]||[]).length;o+=1){var s=lJ[t][o];if(s.reg.test(i))return n(s,a,i)}}),t.media=r,t};var a=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=r(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(a,{})})},t.parseSimulcastStreamList=function(e){return e.split(";").map(function(e){return e.split(",").map(function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}})})}})),dJ=(fJ.parse,fJ.parseParams,fJ.parseFmtpConfig,fJ.parsePayloads,fJ.parseRemoteCandidates,fJ.parseImageAttributes,fJ.parseSimulcastStreamList,/%[sdv%]/g),pJ=function(e,t,r){var n=[e+"="+(t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var a=t.names[i];t.name?n.push(r[t.name][a]):n.push(r[t.names[i]])}else n.push(r[t.name]);return function(e){var t=1,r=arguments,n=r.length;return e.replace(dJ,function(e){if(t>=n)return e;var i=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})}.apply(null,n)},hJ=["v","o","s","i","u","e","p","c","b","t","r","z","a"],vJ=["i","c","b","a"],mJ={write:function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var r=t.outerOrder||hJ,n=t.innerOrder||vJ,i=[];return r.forEach(function(t){lJ[t].forEach(function(r){r.name in e&&null!=e[r.name]?i.push(pJ(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach(function(e){i.push(pJ(t,r,e))})})}),e.media.forEach(function(e){i.push(pJ("m",lJ.m[0],e)),n.forEach(function(t){lJ[t].forEach(function(r){r.name in e&&null!=e[r.name]?i.push(pJ(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach(function(e){i.push(pJ(t,r,e))})})})}),i.join("\r\n")+"\r\n"},parse:fJ.parse,parseFmtpConfig:fJ.parseFmtpConfig,parseParams:fJ.parseParams,parsePayloads:fJ.parsePayloads,parseRemoteCandidates:fJ.parseRemoteCandidates,parseImageAttributes:fJ.parseImageAttributes,parseSimulcastStreamList:fJ.parseSimulcastStreamList},gJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(QS),n=l(tT),i=l(iT),a=l(dT),o=l(hT),s=l(zy),u=l(vT),c=l(mT);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QQ.ERROR_DICTIONARY.MEDIA.MESSAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,s.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.name=QQ.ERROR_DICTIONARY.RECONNECTION.NAME,n.sdkMessage=QQ.ERROR_DICTIONARY.MEDIA.MESSAGE,n.error=r,n.stack=r?r.stack:(new Error).stack,n.code=QQ.ERROR_DICTIONARY.RECONNECTION.CODE,n}return(0,c.default)(t,e),t}(function(e){function t(){var t=(0,a.default)(e,(0,i.default)(arguments));return(0,n.default)(t,(0,o.default)(this)),t}return t.prototype=(0,r.default)(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n.default?(0,n.default)(t,e):t.__proto__=e,t}(Error));t.default=f});r(gJ);var yJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=u(_f),n=u(YQ),i=u(mJ),a=u(ZQ),o=u($Q),s=u(gJ);function u(e){return e&&e.__esModule?e:{default:e}}var c={},l=function(e,t){var r=void 0;return r=-1!==e[t].search(QQ.AUDIO)?QQ.AUDIO_BANDWIDTH_LIMIT:QQ.VIDEO_BANDWIDTH_LIMIT,e.splice(t+1,0,QQ.SDP.B_LINE+":"+r),e},f=function(e){var t=e,r=e.match(/\na=fmtp:(\d+).*level-asymmetry-allowed=1.*/g);return r&&r.forEach(function(e){t=t.replace(e,e+";"+QQ.SDP.MAX_FS_8160)}),t},d=function(e){var t=e.match(/\nm=video.*/g),r=e.match(/\na=rtpmap:\d+\sH264.*/g);return!t||!!r},p=function(e){i.default.parse(e).media.forEach(function(e){return e.candidates&&0===e.candidates.length?(o.default.logger.error("PeerConnectionManager->validateSdp#iceCandidate: Ice candadate never completed"),!1):QQ.SDP.BAD_MEDIA_PORTS.includes(e.port)?(o.default.logger.error("PeerConnectionManager->validateSdp#iceCandidate: Found invalid port number for the ice candidate"),!1):!(!e.icePwd||!e.iceUfrag)||(o.default.logger.error("PeerConnectionManager->validateSdp#iceCandidate: ice ufrag and password not found"),!1)})},h=function(e){for(var t=e,r=t.split(QQ.SDP.CARRIAGE_RETURN),n=0;n<r.length;n+=1)-1!==r[n].search(QQ.SDP.M_LINE)&&(r=l(r,n));return t=r.join(QQ.SDP.CARRIAGE_RETURN)};c.iceFailListener=function(e,t,r){e&&(e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case QQ.ICE_STATE.FAILED:case QQ.ICE_STATE.DISCONNECTED:o.default.logger.warn("PeerConnectionManager->oniceconnectionstatechange#"+r+" Interactive Connectivity Establishment(ICE)"+e.iceConnectionState+" at "+new Date),setTimeout(function(){switch(e.iceConnectionState){case QQ.ICE_STATE.FAILED:case QQ.ICE_STATE.DISCONNECTED:t()}},QQ.ICE_FAIL_TIMEOUT)}})},c.detectFailures=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){o.default.logger.error("PeerConnectionManager->reconnectFn#Ice failed, no function to reconnect with.")};e.iceFailListener(e,t,QQ.MEDIA_PEER_CONNECTION_NAME)},c.setContentSlides=function(e){return e&&e.sdp&&(e.sdp+=""+QQ.SDP.A_CONTENT_SLIDES+QQ.SDP.CARRIAGE_RETURN),e},c.iceCandidate=function(e){return new r.default(function(t){var r=setTimeout(function(){e.sdp=h(e.localDescription.sdp),e.sdp=f(e.sdp),e.sdp=e.sdp.replace(/\na=extmap.*/g,""),p(e.sdp)?t(e):setTimeout(function(){t(e)},QQ.RETRY_TIMEOUT)},QQ.ICE_TIMEOUT);e.onicecandidate=function(n){n.candidate||e.sdp||(e.sdp=h(e.localDescription.sdp),e.sdp=f(e.sdp),e.sdp=e.sdp.replace(/\na=extmap.*/g,""),null===n.candidate&&(p(e.sdp),clearTimeout(r),t(e)))}})},c.replaceTrack=function(e,t){try{var r=e.getSenders();r.length>0&&r.forEach(function(e){e.track&&e.track.kind===t.kind&&e.replaceTrack(t)})}catch(e){o.default.logger.error("PeerConnectionManager->replaceTrack#Error replacing track, "+e)}},c.addStream=function(e,t){try{if(t&&!n.default.msedge){if(e.getSenders&&e.getSenders().find(function(e){return null!=e.track}))return void t.getTracks().forEach(function(t){c.replaceTrack(e,t)});t.getTracks().forEach(function(r){e.addTrack(r,t)})}else n.default.msedge&&e.addStream(t)}catch(e){o.default.logger.error("peer-connection-manager->addStream#Error adding stream, error: "+JQ.error)}},c.setRemoteSessionDetails=function(e,t,n,i){o.default.logger.log("PeerConnectionManager->setRemoteSessionDetails#Setting the remote description type: "+t+"State: "+e.signalingState);var u=n;return(u=u.replace(/\na=extmap.*/g,""))||a.default.postEvent({event:JQ.eventType.REMOTE_SDP_RECEIVED,meetingId:i,data:{canProceed:!1,errors:[a.default.generateErrorPayload(2001,!0,JQ.error.name.MEDIA_ENGINE,"missing remoteSdp")]}}),e.signalingState===QQ.SDP.HAVE_LOCAL_OFFER||e.signalingState===QQ.SDP.STABLE&&t===QQ.SDP.OFFER?e.setRemoteDescription(new window.RTCSessionDescription({type:t,sdp:u})).then(function(){return a.default.postEvent({event:JQ.eventType.REMOTE_SDP_RECEIVED,meetingId:i})}).catch(function(e){return a.default.postEvent({event:JQ.eventType.REMOTE_SDP_RECEIVED,meetingId:i,data:{canProceed:!1,errors:[a.default.generateErrorPayload(2001,!0,e.name.MEDIA_ENGINE,"missing remoteSdp")]}})}):r.default.reject(new s.default("PeerConnection in wrong state"))},c.createOffer=function(e,t){o.default.logger.log("PeerConnectionManager->createOffer#createOffer: creating a new offer");try{return e.createOffer().then(function(t){return e.setLocalDescription(t)}).then(function(){return c.iceCandidate(e)}).then(function(){if(e.sdp=h(e.localDescription.sdp),e.sdp=f(e.sdp),!d(e.sdp))throw new s.default("openH264 is downloading please Wait. Upload logs if not working on second try");return e.sdp=e.sdp.replace(/\na=extmap.*/g,""),c.setContentSlides(e),a.default.postEvent({event:JQ.eventType.LOCAL_SDP_GENERATED,meetingId:t}),e}).catch(function(r){throw a.default.postEvent({event:JQ.eventType.LOCAL_SDP_GENERATED,meetingId:t,data:{canProceed:!1,errors:[a.default.generateErrorPayload(2001,!0,JQ.error.name.MEDIA_ENGINE)]}}),c.close(e),r})}catch(e){throw e}},c.rollBackLocalDescription=function(e){return e.setLocalDescription(new RTCSessionDescription({type:QQ.SDP.ROLLBACK})).then(function(){return e}).catch(function(e){return r.default.error(e)})},c.updatePeerConnection=function(e){o.default.logger.log("PeerConnectionManager->updatePeerConnection#updating the peerConnection with params: "+e);var t=e.meeting.mediaProperties,r=t.peerConnection,n=t.mediaSettings;return c.createAnswer({peerConnection:r,offerSdp:e.offerSdp[0]}).then(function(e){return(n.receiveShare||localShare)&&c.setContentSlides(e),[e.sdp]})},c.createAnswer=function(e){var t=e.peerConnection;return"have-remote-offer"===t.signalingState?r.default.resolve(t):c.setRemoteSessionDetails(t,"offer",e.offerSdp).then(function(){return t.createAnswer(e.sdpConstraints)}).then(function(e){return t.setLocalDescription(e)}).then(function(){return c.iceCandidate(t)}).then(function(){if(t.sdp=h(t.localDescription.sdp),t.sdp=f(t.sdp),!d(t.sdp))throw new s.default("openH264 is downloading please Wait. Upload logs if not working on second try");return t.sdp=t.sdp.replace(/\na=extmap.*/g,""),t}).catch(function(e){o.default.logger.error("peer-connection-manager->setRemoteSessionDetails#Error creating remote session, error: "+JQ.error)})},c.close=function(e){return e&&e.connectionState===QQ.PEER_CONNECTION_STATE.CLOSED?r.default.resolve():(o.default.logger.log("PeerConnectionManager->close#pc: close() -> closing the mediaPeerConnection"),r.default.resolve().then(function(){e&&e.close&&e.close()}))},t.default=c});r(yJ);var EJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(QS),n=l(tT),i=l(iT),a=l(dT),o=l(hT),s=l(zy),u=l(vT),c=l(mT);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QQ.ERROR_DICTIONARY.RECONNECTION.MESSAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,s.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.name=QQ.ERROR_DICTIONARY.RECONNECTION.NAME,n.sdkMessage=QQ.ERROR_DICTIONARY.RECONNECTION.MESSAGE,n.error=r,n.stack=r?r.stack:(new Error).stack,n.code=QQ.ERROR_DICTIONARY.RECONNECTION.CODE,n}return(0,c.default)(t,e),t}(function(e){function t(){var t=(0,a.default)(e,(0,i.default)(arguments));return(0,n.default)(t,(0,o.default)(this)),t}return t.prototype=(0,r.default)(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n.default?(0,n.default)(t,e):t.__proto__=e,t}(Error));t.default=f});r(EJ);var bJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={meetings:{deviceType:"WEB",mediaSettings:{sendAudio:!0,sendVideo:!0,receiveAudio:!0,receiveVideo:!0,pstn:!1,sendShare:!1,receiveShare:!1},reconnection:{enabled:!0,detection:!0,retry:{times:2,backOff:{start:1e3,rate:2}}},stats:{interval:1e3,historyMax:1800},logging:{enable:!0,verboseEvents:!0},resolution:{maxWidth:1280,maxHeight:720,idealWidth:1280,idealHeight:720}}}});r(bJ);var _J=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=c(Pf),n=c(_f),i=c($Q),a=c(yJ),o=c(EJ),s=c(gJ),u=c(bJ);function c(e){return e&&e.__esModule?e:{default:e}}var l={setLocalTrack:function(e,t){return!!t&&(t.enabled=!e,!0)},reconnectMedia:function(e,t){return e.connectionState===QQ.PEER_CONNECTION_STATE.CLOSED||e.connectionState===QQ.PEER_CONNECTION_STATE.FAILED?n.default.reject(new o.default("Reinitiate peerconnection")):a.default.createOffer(e,t)},generateLocalMedias:function(e,t,n){return e?[{localSdp:(0,r.default)({audioMuted:t,videoMuted:n}),mediaId:e}]:[]},getLocalMedia:function(e){var t=e.sendAudio,r=e.sendVideo,i=e.sendShare;return t||r?l.getMedia(t,r):i?l.getDisplayMedia({sendAudio:!1,sendShare:!0}):n.default.resolve(void 0)},checkTracks:function(e,t,r){var n=function(e,t){return e&&t?"sendrecv":e&&!t?"sendonly":!e&&t?"recvonly":"inactive"};return t?{track:t,direction:n(!!t,r)}:{track:e,direction:n(!!t,r)}},attachMedia:function(e,t){var r=e.mediaDirection,n=e.audioTrack,o=e.videoTrack,s=e.shareTrack,u=e.peerConnection,c=null;return c=l.checkTracks("audio",r.sendAudio&&n,r.receiveAudio),u.audioTransceiver=u.addTransceiver(c.track,{direction:c.direction}),c=l.checkTracks("video",r.sendVideo&&o,r.receiveVideo),u.videoTransceiver=u.addTransceiver(c.track,{direction:c.direction}),c=l.checkTracks("video",r.sendShare&&s,r.receiveShare),u.shareTransceiver=u.addTransceiver(c.track,{direction:c.direction}),u.onnegotiationneeded=function(e){i.default.logger.info("Media->attachMedia/onnegotiationneeded#PeerConnection: "+e)},a.default.createOffer(u,t)},updateMedia:function(e,t){var r=e.mediaDirection,n=e.audioTrack,o=e.videoTrack,s=e.shareTrack,u=e.peerConnection;return l.setTrackOnTransceiver(u.audioTransceiver,{type:"audio",track:n,sendTrack:r.sendAudio&&n,receiveTrack:r.receiveAudio}),l.setTrackOnTransceiver(u.videoTransceiver,{type:"video",track:o,sendTrack:r.sendVideo&&o,receiveTrack:r.receiveVideo}),l.setTrackOnTransceiver(u.shareTransceiver,{type:"video",track:s,sendTrack:r.sendShare&&s,receiveTrack:r.receiveShare}),u.onnegotiationneeded=function(e){i.default.logger.info("Media->attachMedia/onnegotiationneeded#PeerConnection: "+e)},a.default.createOffer(u,t)},setTrackOnTransceiver:function(e,t){var r=t.type,n=t.track,i=t.sendTrack,a=t.receiveTrack;try{var o=l.checkTracks(r,i&&n,a);t.track&&e.sender.replaceTrack(n),e.direction=o.direction}catch(e){throw e}},updateTransceiver:function(e,t,r,n){return l.setTrackOnTransceiver(r,n),a.default.createOffer(t,e)},getDisplayMedia:function(e){return navigator.mediaDevices.getDisplayMedia({audio:e.sendAudio,video:e.sendShare})},getMedia:function(e,t){var r={audio:e,video:!!t&&{deviceId:t.deviceId?t.deviceId:void 0,width:{ideal:u.default.meetings.resolution.idealWidth,max:u.default.meetings.resolution.maxWidth},height:{ideal:u.default.meetings.resolution.idealHeight,max:u.default.meetings.resolution.maxHeight}}};return new n.default(function(e,t){navigator.mediaDevices.getUserMedia(r).then(function(t){e(t)}).catch(function(e){t(new s.default(new Error({name:e.name,localMediaFailed:!0,cameraFailed:e===r.permissionDenied}),"Local Get User Media failed"))})})},getSupportedDevice:function(e){var t=e.sendAudio,r=e.sendVideo;return n.default.resolve().then(function(){return navigator.mediaDevices&&void 0!==navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(e){var n={audio:e.filter(function(e){return e.kind===QQ.AUDIO_INPUT}).length>0,video:e.filter(function(e){return e.kind===QQ.VIDEO_INPUT}).length>0};return{sendAudio:n.audio&&t||!0,sendVideo:n.video&&r||!0}}):{sendAudio:!0,sendVideo:!0}})},getDevices:function(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices():n.default.reject(new s.default("enumerateDevices not supported."))},toggleStream:function(){},stopTracks:function(e){return e?n.default.resolve().then(function(){if(e&&e.stop)try{e.stop()}catch(t){i.default.logger.error("media/index->stopTracks#Unable to stop the track with state "+e.readyState+", error: "+t)}}):n.default.resolve()},stopStream:function(e){return e?n.default.resolve().then(function(){e.getTracks?e.getTracks().forEach(function(e){e.stop()}):e.stop&&e.stop()}):n.default.resolve()},getUserMedia:function(e,t){return l.getLocalMedia({sendAudio:!!e.sendAudio&&(t.audio||e.sendAudio),sendVideo:!!e.sendVideo&&(t.video||e.sendVideo)}).then(function(t){return l.getLocalMedia({sendShare:e.sendShare}).then(function(e){return[t,e]})})}};t.default=l});r(_J);var SJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(zy),n=i($y);function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){(0,r.default)(this,e),this.history=[],this.max=t}return(0,n.default)(e,[{key:"get",value:function(){return this.history}},{key:"clear",value:function(){this.history=[]}},{key:"getAt",value:function(e){return this.history[e]}},{key:"getMostRecent",value:function(){return this.history.length>1?this.getAt(0):null}},{key:"getComparable",value:function(){return{previous:this.getMostRecent(),current:this.history.length>2?this.getAt(1):null}}},{key:"getSlice",value:function(e){return this.history.slice(0,e)}},{key:"add",value:function(e){var t=null;return this.history.length>=this.max&&(t=this.history.pop()),this.history.unshift(e),t}}]),e}();t.default=a});r(SJ);var TJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(hT),n=u(zy),i=u($y),a=u(vT),o=u(mT),s=u(gE);function u(e){return e&&e.__esModule?e:{default:e}}var c=new s.default,l=new s.default,f=new s.default,d=new s.default,p=new s.default,h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,n.default)(this,t);var i=(0,a.default)(this,(t.__proto__||(0,r.default)(t)).call(this,{objectMode:!0}));i.interval=e.interval,l.has(e.rTCRtpDirection)||l.set(e.rTCRtpDirection,new TS.EventEmitter);var o=l.get(e.rTCRtpDirection);return d.has(i)||d.set(i,o),f.has(o)||f.set(o,e.rTCRtpDirection),c.has(e.rTCRtpDirection)||c.set(e.rTCRtpDirection,e.peerConnection),o.once(QQ.ERROR,function(e){i.emit(QQ.ERROR,e)}),i}return(0,o.default)(t,e),(0,i.default)(t,[{key:"_read",value:function(){var e=this,t=d.get(this);t.once(QQ.STATS.DATA,function(t){e.isPaused()||e.push(t)}),p.has(t)||function e(t,r){var n=(0,hI.safeSetTimeout)(function(){var n=f.get(t),i=c.get(n);n&&n.getStats().then(function(n){t.emit(QQ.STATS.DATA,n),i.signalingState!==QQ.STATS.CLOSED&&i.connectionState!==QQ.STATS.CLOSED&&e(t,r)}).catch(function(e){t.emit(QQ.ERROR,e)})},r);p.set(t,n)}(t,this.interval)}}]),t}(IG.Readable);t.default=h});r(TJ);var wJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(jA),n=a(hN),i=a(Bp);function a(e){return e&&e.__esModule?e:{default:e}}var o={simplify:function(e){return(0,n.default)((0,i.default)(QQ.DEFAULT_TRANSFORM_REGEX),function(t){var r=!!QQ.DEFAULT_TRANSFORM_REGEX[t].regex.test(e.id)&&t;if(r){if(QQ.DEFAULT_TRANSFORM_REGEX[r].profiler){var n=e[QQ.DEFAULT_TRANSFORM_REGEX[r].profiler.type];if(!(n&&n.includes(QQ.DEFAULT_TRANSFORM_REGEX[r].profiler.value)&&r.toLowerCase().includes(QQ.DEFAULT_TRANSFORM_REGEX[r].profiler.value)))return r=!1}if(QQ.DEFAULT_TRANSFORM_REGEX[r].decider&&e[QQ.DEFAULT_TRANSFORM_REGEX[r].decider]!==QQ.DEFAULT_TRANSFORM_REGEX[r].selector)return r=!1}return r})},parse:function(e){var t={};return e&&e.forEach&&e.size>0&&e.forEach(function(e){e&&e.type&&QQ.DEFAULT_GET_STATS_FILTER.types.includes(e.type)&&(t[e.id]=e)}),t},convert:function(e,t){if(t.simplifyFn)return t.simplifyFn(e);var n={};return(0,r.default)(e,function(e){var t=o.simplify(e);t&&(n[t]=e)}),n},transform:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{simplifyFn:void 0},r=o.parse(e);return QQ.DEFAULT_TRANSFORM_REGEX?o.convert(r,t):r}};t.default=o});r(wJ);var IJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(zy),n=a($y),i=a(AR);function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t){(0,r.default)(this,e),this.data=t,this.id=i.default.v4()}return(0,n.default)(e,[{key:"getId",value:function(){return this.id}},{key:"getData",value:function(){return this.data}}]),e}();t.default=o});r(IJ);var AJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(hT),n=c(zy),i=c($y),a=c(vT),o=c(mT),s=c(wJ),u=c(IJ);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,n.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).call(this,{objectMode:!0}))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"_transform",value:function(e,t,r){if(e){var n=s.default.transform(e),i=new u.default(n);this.push({data:i}),r()}else r()}}]),t}(IG.Transform);t.default=l});r(AJ);var CJ=Qf.isFinite;var xJ=function(e){return"number"==typeof e&&CJ(e)},OJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s(oC),n=s(gp),i=s(xJ),a=s(jA),o=s(eJ);function s(e){return e&&e.__esModule?e:{default:e}}var u={analyze:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{analysisKeys:QQ.ANALYSIS_STATS.DEFAULT_KEYS};if(!((0,n.default)(e)&&e.length&&t&&(0,n.default)(t.analysisKeys)&&t.analysisKeys.length))throw new o.default("analyzer->analyze#series must be defined as a nonempty array of WebRTCData objects, and options.analysisKeys must be a nonempty array of strings, representing the properties to analyze.");var s=new r.default(t.analysisKeys),u={valid:!0,failed:{},data:{}};return s.forEach(function(t){var r=t.key;u.data[r]={valid:!0,reports:[]},u.failed[r]=[];for(var n={value:0},o=0,s=function(s){var c={};(0,a.default)(e[s].data.getData(),function(e){var a=e[r];a&&(0,i.default)(a)&&(c.value=a,c.difference=0,c.valid=!1,c.index=o,c.difference=c.value-n.value,t.check===QQ.ANALYSIS_CHECKS.INCREASING&&c.difference>0?c.valid=!0:t.check===QQ.ANALYSIS_CHECKS.DECREASING&&c.difference<0?c.valid=!0:t.check===QQ.ANALYSIS_CHECKS.CONSTANT?c.valid=!0:c.valid=!1,c.valid||(u.data[r].valid=!1,u.valid=!1,u.failed[r].push(s)),n=c,u.data[r].reports.push(c))}),o+=1},c=e.length-1;c>0;c-=1)s(c);u.data[r].valid||(u.valid=!1)}),u}};t.default=u});r(OJ);var RJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(zy),n=a($y),i=a(OJ);function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,r,n,i){var a={};return a.found=r.some(function(r){return!!(e[r]&&e[r][n]&&e[r][n]>0)&&(a.match={type:t,key:r,data:e[r],stat:n,kind:i},!0)}),a},s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};(0,r.default)(this,e),this.namespace=QQ.MEETINGS,this.series=t,this.callback=n,this.first=null,this.sendRemainStopped=!1,this.recvRemainStopped=!1}return(0,n.default)(e,[{key:"start",value:function(e){if(e&&e.data&&e.data.getData()){var t=e.data.getData();if(t&&!this.first){var r=[o(t,QQ.EVENT_TYPES.LOCAL,QQ.DEFAULT_EVENT_AUDIO_SEND_KEYS,QQ.EVENT_STATS_MAP.BYTES_SENT,QQ.AUDIO),o(t,QQ.EVENT_TYPES.LOCAL,QQ.DEFAULT_EVENT_VIDEO_SEND_KEYS,QQ.EVENT_STATS_MAP.BYTES_SENT,QQ.VIDEO),o(t,QQ.EVENT_TYPES.REMOTE,QQ.DEFAULT_EVENT_VIDEO_RECEIVE_KEYS,QQ.EVENT_STATS_MAP.BYTES_RECEIVED,QQ.VIDEO),o(t,QQ.EVENT_TYPES.REMOTE,QQ.DEFAULT_EVENT_AUDIO_RECEIVE_KEYS,QQ.EVENT_STATS_MAP.BYTES_RECEIVED,QQ.AUDIO)].find(function(e){return e&&e.found&&e.match});if(r)return this.first=r.match,this.callback(this.first),r}}return null}},{key:"stop",value:function(){if(this.series.get().length<5)return null;var e=this.series.getSlice(5),t=i.default.analyze(e,{analysisKeys:[{key:QQ.EVENT_STATS_MAP.BYTES_SENT,check:QQ.ANALYSIS_CHECKS.INCREASING}]}),r=i.default.analyze(e,{analysisKeys:[{key:QQ.EVENT_STATS_MAP.BYTES_RECEIVED,check:QQ.ANALYSIS_CHECKS.INCREASING}]});if(!t.valid&&t.data.bytesSent.reports.length>0){if(!this.sendRemainStopped){var n={stop:!0,stat:QQ.EVENT_STATS_MAP.BYTES_SENT};return this.callback(n),this.sendRemainStopped=!0,this.first=null,n}}else t.valid&&t.data.bytesSent.reports.length>0&&(this.sendRemainStopped=!1);if(!r.valid&&r.data.bytesReceived.reports.length>0){if(!this.recvRemainStopped){var a={stop:!0,stat:QQ.EVENT_STATS_MAP.BYTES_RECEIVED};return this.callback(a),this.recvRemainStopped=!0,this.first=null,a}}else r.valid&&r.data.bytesReceived.reports.length>0&&(this.recvRemainStopped=!1);return null}},{key:"event",value:function(e){return{start:this.start(e),stop:this.stop()}}}]),e}();t.default=s});r(RJ);var NJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(QS),n=l(tT),i=l(iT),a=l(dT),o=l(hT),s=l(zy),u=l(vT),c=l(mT);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QQ.ERROR_DICTIONARY.STATS.MESSAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,s.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.name=QQ.ERROR_DICTIONARY.STATS.NAME,n.sdkMessage=QQ.ERROR_DICTIONARY.STATS.MESSAGE,n.error=r,n.stack=r?r.stack:(new Error).stack,n.code=QQ.ERROR_DICTIONARY.STATS.CODE,n}return(0,c.default)(t,e),t}(function(e){function t(){var t=(0,a.default)(e,(0,i.default)(arguments));return(0,n.default)(t,(0,o.default)(this)),t}return t.prototype=(0,r.default)(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n.default?(0,n.default)(t,e):t.__proto__=e,t}(Error));t.default=f});r(NJ);var kJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=p(hT),n=p(zy),i=p($y),a=p(vT),o=p(mT),s=p(md),u=p(SJ),c=p(TJ),l=p(AJ),f=p(RJ),d=p(NJ);function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e,i,o){(0,n.default)(this,t);var s=(0,a.default)(this,(t.__proto__||(0,r.default)(t)).call(this,{},i));return s.namespace=QQ.MEETINGS,s.attrs=e,s.options=i,s.peerConnection=null,s.RTCRtpDirection=null,s.history=null,s.stream=null,s.filter=null,s.events=null,s.id=null,s.populate(o),s}return(0,o.default)(t,e),(0,i.default)(t,[{key:"populate",value:function(e){if(e){if(e.history&&this.withHistory(),e.filter&&!e.stream&&e.media&&this.withFilter(e.filter,e.media),e.stream&&!e.filter&&e.media&&this.withStream(e.stream,e.media),e.id&&this.withId(e.id),e.onClose){if(!(0,s.default)(e.onClose))throw new TypeError("stats->populate#onClose must be a callback function for filtered data.");this.onClose(e.onClose)}if(e.onEvent){if(!(0,s.default)(e.onEvent))throw new TypeError("stats->populate#onEvent must be a callback function for filtered data.");this.history?this.withEventsHistory(this.history,e.onEvent):this.withEvents(e.onEvent)}if(e.onData){if(!(0,s.default)(e.onData))throw new TypeError("stats->populate#onData must be a callback function for filtered data.");this.onData(e.onData)}}return this}},{key:"doHistory",value:function(e){this.history&&this.history.add(e)}},{key:"doEvents",value:function(e){this.events&&this.events.event(e)}},{key:"onData",value:function(e){var t=this;if(!this.filter)throw new TypeError("The stats sender/receiver filter must be set up before data can be processed.");return this.filter.on(QQ.STATS.DATA,function(r){t.doHistory(r),t.doEvents(r),e(r)}),this}},{key:"onClose",value:function(e){var t=this;if(!this.filter)throw new TypeError("the stats sender/receiver filter must be set up before data can be closed.");return this.stream.on(QQ.STATS.END,function(r){r||(r=new d.default("The stats stream for id: "+t.id+" ended.")),e(r)}),this}},{key:"withEventsHistory",value:function(e,t){var r=new f.default(e,t);return this.setEvents(r),this}},{key:"withEvents",value:function(e){var t=new f.default(null,e);return this.setEvents(t),this}},{key:"withHistory",value:function(){var e=new u.default(this.config.stats.historyMax);return this.setHistory(e),this}},{key:"withStream",value:function(e,t){var r=new c.default({rTCRtpDirection:e,peerConnection:t,interval:this.config.stats.interval});return this.setStream(r),this}},{key:"withFilter",value:function(e,t){return this.withStream(e,t),this.setFilter(new l.default),this.getStream().pipe(this.getFilter()),this}},{key:"withId",value:function(e){return e?this.setId(e):this.setId(AR.uuid.v4()),this}},{key:"build",value:function(){return this}},{key:"setId",value:function(e){this.id=e}},{key:"setHistory",value:function(e){this.history=e}},{key:"setEvents",value:function(e){this.events=e}},{key:"setStream",value:function(e){this.stream=e}},{key:"setFilter",value:function(e){this.filter=e}},{key:"getId",value:function(){return this.id}},{key:"getHistory",value:function(){return this.history}},{key:"getEvents",value:function(){return this.events}},{key:"getStream",value:function(){return this.stream}},{key:"getFilter",value:function(){return this.filter}}]),t}(XR.StatelessWebexPlugin);t.default=h});r(kJ);var PJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(hT),n=l(zy),i=l($y),a=l(vT),o=l(mT),s=l(jA),u=l(kJ),c=l(cJ);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e,i,o){(0,n.default)(this,t);var s=(0,a.default)(this,(t.__proto__||(0,r.default)(t)).call(this,{},i));return s.namespace=QQ.MEETINGS,s.attrs=e,s.options=i,s.senders={},s.receivers={},s.meetingRef=null,s.statsConfig=null,s.populate(o),s}return(0,o.default)(t,e),(0,i.default)(t,[{key:"populate",value:function(e){return e&&(e.config&&this.setConfig(e.config),e.meeting&&this.associateMeeting(e.meeting),e.senders&&this.addSenders(e.senders),e.receivers&&this.addReceivers(e.receivers)),this}},{key:"setConfig",value:function(e){this.statsConfig=e}},{key:"associateMeeting",value:function(e){return this.meetingRef=e,this}},{key:"addSenders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.forEach)throw new TypeError("Stats senders must be created with an iterable array of senders to act on.");return e.forEach(function(e){t.addSender(e,r)}),this}},{key:"addSender",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(t&&c.default.generateSingularOptions(e,this.statsConfig,this.meetingRef,QQ.STATS.SENDERS),e.type=QQ.STATS.SENDER,this.senders[e.id]=new u.default(this.attrs,this.options,e)),this}},{key:"addSenderStats",value:function(e){var t=new u.default(this.attrs,this.options);return this.senders[e]=t,t}},{key:"addReceiverStats",value:function(e){var t=new u.default(this.attrs,this.options);return this.receivers[e]=t,t}},{key:"addReceivers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.forEach)throw new TypeError("Stats receivers must be created with an iterable array of receivers to act on.");return e.forEach(function(e){t.addReceiver(e,r)}),this}},{key:"addReceiver",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(t&&c.default.generateSingularOptions(e,this.statsConfig,this.meetingRef,QQ.STATS.RECEIVERS),e.type=QQ.STATS.RECEIVER,this.receivers[e.id]=new u.default(this.attrs,this.options,e)),this}},{key:"getReceivers",value:function(){return this.receivers}},{key:"getSenders",value:function(){return this.senders}},{key:"getSender",value:function(e){return this.senders[e]}},{key:"getReceiver",value:function(e){return this.receivers[e]}},{key:"destroySenders",value:function(){var e=this;(0,s.default)(this.senders,function(t,r){e.destroySender(r)})}},{key:"destroyReceivers",value:function(){var e=this;(0,s.default)(this.receivers,function(t,r){e.destroyReceiver(r)})}},{key:"destroySender",value:function(e){var t=this.getSender(e);t&&t.stream&&t.stream.destroy(),t=null,delete this.receivers[e]}},{key:"destroyReceiver",value:function(e){var t=this.getReceiver(e);t&&t.stream&&t.stream.destroy(),t=null,delete this.receivers[e]}}]),t}(XR.StatelessWebexPlugin);t.default=f});r(PJ);var MJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(QS),n=l(tT),i=l(iT),a=l(dT),o=l(hT),s=l(zy),u=l(vT),c=l(mT);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QQ.ERROR_DICTIONARY.INTENT_TO_JOIN.MESSAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,s.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.name=QQ.ERROR_DICTIONARY.INTENT_TO_JOIN.NAME,n.sdkMessage=QQ.ERROR_DICTIONARY.INTENT_TO_JOIN.MESSAGE,n.error=r,n.stack=r?r.stack:(new Error).stack,n.joinIntentRequired=!0,n.code=QQ.ERROR_DICTIONARY.INTENT_TO_JOIN.CODE,n}return(0,c.default)(t,e),t}(function(e){function t(){var t=(0,a.default)(e,(0,i.default)(arguments));return(0,n.default)(t,(0,o.default)(this)),t}return t.prototype=(0,r.default)(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n.default?(0,n.default)(t,e):t.__proto__=e,t}(Error));t.default=f});r(MJ);var DJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(QS),n=l(tT),i=l(iT),a=l(dT),o=l(hT),s=l(zy),u=l(vT),c=l(mT);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:QQ.ERROR_DICTIONARY.JOIN_MEETING.MESSAGE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,s.default)(this,t);var i=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,r));return i.name=QQ.ERROR_DICTIONARY.JOIN_MEETING.NAME,i.sdkMessage=QQ.ERROR_DICTIONARY.JOIN_MEETING.MESSAGE,i.error=n,i.stack=n?n.stack:(new Error).stack,i.joinOptions=e,i.code=QQ.ERROR_DICTIONARY.JOIN_MEETING.CODE,i}return(0,c.default)(t,e),t}(function(e){function t(){var t=(0,a.default)(e,(0,i.default)(arguments));return(0,n.default)(t,(0,o.default)(this)),t}return t.prototype=(0,r.default)(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n.default?(0,n.default)(t,e):t.__proto__=e,t}(Error));t.default=f});r(DJ);var LJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(QS),n=l(tT),i=l(iT),a=l(dT),o=l(hT),s=l(zy),u=l(vT),c=l(mT);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QQ.ERROR_DICTIONARY.PERMISSION.MESSAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,s.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.name=QQ.ERROR_DICTIONARY.PERMISSION.NAME,n.sdkMessage=QQ.ERROR_DICTIONARY.PERMISSION.MESSAGE,n.error=r,n.stack=r?r.stack:(new Error).stack,n.code=QQ.ERROR_DICTIONARY.PERMISSION.CODE,n}return(0,c.default)(t,e),t}(function(e){function t(){var t=(0,a.default)(e,(0,i.default)(arguments));return(0,n.default)(t,(0,o.default)(this)),t}return t.prototype=(0,r.default)(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n.default?(0,n.default)(t,e):t.__proto__=e,t}(Error));t.default=f});r(LJ);var UJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=v(kC),n=v(IQ),i=v(_f),a=v(vm),o=v(cJ),s=v(ZQ),u=v(_J),c=v($Q),l=v(PJ),f=v(MJ),d=v(DJ),p=v(eJ),h=v(LJ);function v(e){return e&&e.__esModule?e:{default:e}}var m={parseLocusJoin:function(e){var t={};return t.locus=e.body.locus,t.mediaConnections=e.body.mediaConnections,t.locusUrl=t.locus.url,t.locusId=t.locus.url.split("/").pop(),t.selfId=t.locus.self.id,t.mediaConnections.forEach(function(e){e.mediaId&&(t.mediaId=e.mediaId)}),t},remoteUpdateAudioVideo:function(e,t,r){if(!r)return i.default.reject(new p.default("You need a meeting object."));var n=u.default.generateLocalMedias(r.mediaId,e,t);return(0,a.default)(n)?i.default.reject(new p.default("You need a media id on the meeting to change remote audio.")):(s.default.postEvent({event:JQ.eventType.MEDIA_REQUEST,meeting:r}),r.meetingRequest.remoteAudioVideoToggle({locusUrl:r.locusUrl,selfId:r.selfId,localMedias:n,deviceUrl:r.deviceUrl,correlationId:r.correlationId}).then(function(e){s.default.postEvent({event:JQ.eventType.MEDIA_RESPONSE,meeting:r}),r.locusInfo.onFullLocus(e.body.locus)}))},checkShare:function(e){return e.wirelessShare&&e.isSharing||e.isSharing?e.stopShare():i.default.resolve()},cleanOptions:function(e,t,r,n){return m.hasOwner(t)&&(m.isOwnerSelf(r,n)?(e.hostPin&&delete e.hostPin,e.moderator=QQ.MODERATOR_TRUE):e.moderator=QQ.MODERATOR_FALSE),e},hasOwner:function(e){return e&&e.owner},isOwnerSelf:function(e,t){return e===t},isPinOrGuest:function(e){return!(!e||!e.body||e.body.errorCode!==QQ.INTENT_TO_JOIN)},joinMeeting:function(e,t){return e?(s.default.postEvent({event:JQ.eventType.LOCAL_JOIN_REQUEST,meeting:e}),e.meetingRequest.joinMeeting({sipUri:e.sipUri,deviceUrl:e.deviceUrl,locusUrl:e.locusUrl,correlationId:e.id,roapMessage:t.roapMessage,resourceId:t.resourceId||null,moderator:t.moderator,hostPin:t.hostPin,moveToResource:t.moveToResource}).then(function(t){return s.default.postEvent({event:JQ.eventType.LOCUS_JOIN_RESPONSE,meeting:e,data:{trigger:JQ.trigger.LOCI_UPDATE,locus:t.body.locus,trackingId:t.headers.trackingid}}),m.parseLocusJoin(t)})):i.default.reject(new p.default("You need a meeting object."))},cleanUp:function(e){return e.closeLocalStream().then(function(){return e.closeLocalShare()}).then(function(){return e.closePeerConnections()}).then(function(){e.unsetLocalVideoTrack(),e.unsetLocalShareTrack(),e.unsetRemoteStream(),e.unsetPeerConnections()}).then(function(){return e.roap.stop(e.correlationId,e.roapSeq)})},leaveMeeting:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.meetingRequest.leaveMeeting({locusUrl:e.locusUrl,selfId:e.selfId,correlationId:t.correlationId,resourceId:t.resourceId||null,deviceUrl:e.deviceUrl}).then(function(){return e.roap.stop(e.correlationId,e.roapSeq)})}};m.leaveMeeting=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={locusUrl:e.locusUrl,selfId:e.selfId,correlationId:e.correlationId,resourceId:e.resourceId,deviceUrl:e.deviceUrl},a=(0,n.default)({},r,t);return e.meetingRequest.leaveMeeting(a).then(function(t){return t&&t.body&&t.body.locus&&e.locusInfo.onFullLocus(t.body.locus),i.default.resolve()}).then(function(){return t.moveMeeting?i.default.resolve():m.cleanUp(e)}).catch(function(t){return c.default.logger.error("MeetingUtil->leaveMeeting#An error occured while trying to leave meeting with an id of "+e.id+", error: "+t),i.default.reject(t)})},m.declineMeeting=function(e,t){return e.meetingRequest.declineMeeting({locusUrl:e.locusUrl,deviceUrl:e.deviceUrl,reason:t})},m.isUnjoined=function(e){return e.parsedLocus&&e.parsedLocus.self&&e.parsedLocus.self.state!==QQ._JOINED_},m.joinMeetingOptions=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.resourceId=e.resourceId||t.resourceId,e.setCorrelationId(e.id),(t=m.cleanOptions(t,e.meetingInfo,e.owner,e.userId)).hostPin&&s.default.postEvent({event:JQ.eventType.PIN_COLLECTED,meeting:e}),m.joinMeeting(e,t).then(function(t){return e.setLocus(t),i.default.resolve(t)}).catch(function(r){return m.isPinOrGuest(r)?m.hasOwner(e.meetingInfo)?m.joinMeeting(e,t).then(function(t){return e.setLocus(t),i.default.resolve()}):(s.default.postEvent({event:JQ.eventType.PIN_PROMPT,meeting:e}),i.default.reject(new f.default("Error Joining Meeting",r))):(c.default.logger.log("Meeting:index#join --\x3e Error joining the call, ",r),i.default.reject(new d.default(t,"Error Joining Meeting",r)))})},m.updateTransceiver=function(e,t){var r=e.type,n=e.sendTrack,a=e.receiveTrack,o=e.track,s=e.transceiver,l=e.peerConnection,f=e.previousMediaDirection;return void 0!==n&&n!==f.sendTrack||void 0!==a&&a!==f.receiveTrack?u.default.updateTransceiver(t.id,l,s,{track:o,type:r,receiveTrack:a,sendTrack:n}).then(function(){return t.meeting.roap.sendRoapMediaRequest({sdp:t.mediaProperties.peerConnection.sdp,roapSeq:t.roapSeq,meeting:t.meeting})}).catch(function(e){c.default.logger.error("Meeting:index->updateTransceiver#Error updating the "+r+" streams with error: "+e)}):o?(s.sender.replaceTrack(o),i.default.resolve()):i.default.reject(new p.default("update Failed: please pass valid parameter"))},m.validateOptions=function(e){var t=e.sendVideo,r=e.sendAudio,n=e.sendShare,a=e.localStream,o=e.localShare;return t&&!m.getTrack(a).videoTrack?i.default.reject(new p.default("please pass valid video streams")):r&&!m.getTrack(a).audioTrack?i.default.reject(new p.default("please pass valid audio streams")):n&&!m.getTrack(o).videoTrack?i.default.reject(new p.default("please pass valid share streams")):i.default.resolve()},m.getTrack=function(e){var t=null,n=null,i=null,a=null;if(!e)return{audioTrack:null,videoTrack:null};if(e.getAudioTracks&&(i=e.getAudioTracks()),e.getVideoTracks&&(a=e.getVideoTracks()),i&&i.length>0){var o=i;t=(0,r.default)(o,1)[0]}if(a&&a.length>0){var s=a;n=(0,r.default)(s,1)[0]}return{audioTrack:t,videoTrack:n}},m.getModeratorFromLocusInfo=function(e){return e&&e.parsedLocus&&e.parsedLocus.info&&e.parsedLocus.info&&e.parsedLocus.info.moderator},m.getPolicyFromLocusInfo=function(e){return e&&e.parsedLocus&&e.parsedLocus.info&&e.parsedLocus.info&&e.parsedLocus.info.policy},m.canUserLock=function(e,t){return!(!e.LOCK_CONTROL_LOCK||!t.LOCK_STATUS_UNLOCKED)},m.canUserUnlock=function(e,t){return!(!e.LOCK_CONTROL_UNLOCK||!t.LOCK_STATUS_LOCKED)},m.canUserRecord=function(e){return e.RECORDING_CONTROL_START},m.canUserPause=function(e){return e.RECORDING_CONTROL_PAUSE},m.canUserResume=function(e){return e.RECORDING_CONTROL_RESUME},m.canUserStop=function(e){return e.RECORDING_CONTROL_STOP},m.startRecording=function(e,t,r){var n=m.getModeratorFromLocusInfo(r);return n&&m.canUserRecord(n)?e.recordMeeting({locusUrl:t,recording:!0,paused:!1}):i.default.reject(new h.default("Start recording not allowed, due to moderator property."))},m.pauseRecording=function(e,t,r){var n=m.getModeratorFromLocusInfo(r);return n&&m.canUserPause(n)?e.recordMeeting({locusUrl:t,recording:!0,paused:!0}):i.default.reject(new h.default("Pause recording not allowed, due to moderator property."))},m.resumeRecording=function(e,t,r){var n=m.getModeratorFromLocusInfo(r);return n&&m.canUserResume(n)?e.recordMeeting({locusUrl:t,recording:!0,paused:!1}):i.default.reject(new h.default("Resume recording not allowed, due to moderator property."))},m.stopRecording=function(e,t,r){var n=m.getModeratorFromLocusInfo(r);return n&&m.canUserStop(n)?e.recordMeeting({locusUrl:t,recording:!1,paused:!1}):i.default.reject(new h.default("Stop recording not allowed, due to moderator property."))},m.lockMeeting=function(e,t,r){return e&&e.canLock?t.lockMeeting({locusUrl:r,lock:!0}):i.default.reject(new h.default("Lock not allowed, due to joined property."))},m.unlockMeeting=function(e,t,r){return e&&e.canUnlock?t.lockMeeting({locusUrl:r,lock:!1}):i.default.reject(new h.default("Unlock not allowed, due to joined property."))},m.startInternalStats=function(e){if(!e.internalStats){var t={useConfig:!0,senders:[{id:"mainAudio",correlate:"audio",history:!0,onEvent:function(t){"audio"===t.kind&&"bytesSent"===t.stat?s.default.postEvent({event:JQ.eventType.SENDING_MEDIA_START,meeting:e,data:{mediaType:JQ.mediaType.AUDIO}}):t.stop&&"bytesSent"===t.stat&&s.default.postEvent({event:JQ.eventType.SENDING_MEDIA_STOP,meeting:e,data:{mediaType:JQ.mediaType.AUDIO}})},onData:function(){}},{id:"mainVideo",correlate:"video",history:!0,onEvent:function(t){"video"===t.kind&&"bytesSent"===t.stat?s.default.postEvent({event:JQ.eventType.SENDING_MEDIA_START,meeting:e,data:{mediaType:JQ.mediaType.VIDEO}}):t.stop&&"bytesSent"===t.stat&&s.default.postEvent({event:JQ.eventType.SENDING_MEDIA_STOP,meeting:e,data:{mediaType:JQ.mediaType.VIDEO}})},onData:function(){}},{id:"mainShare",correlate:"video",onData:function(){}}],receivers:[{id:"mainAudio",correlate:"audio",history:!0,onEvent:function(t){"audio"===t.kind&&"bytesReceived"===t.stat?s.default.postEvent({event:JQ.eventType.RECEIVING_MEDIA_START,meeting:e,data:{mediaType:JQ.mediaType.AUDIO}}):t.stop&&"bytesReceived"===t.stat&&s.default.postEvent({event:JQ.eventType.RECEIVING_MEDIA_STOP,meeting:e,data:{mediaType:JQ.mediaType.AUDIO}})},onData:function(){}},{id:"mainVideo",correlate:"video",history:!0,onEvent:function(t){"video"===t.kind&&"bytesReceived"===t.stat?s.default.postEvent({event:JQ.eventType.RECEIVING_MEDIA_START,meeting:e,data:{mediaType:JQ.mediaType.VIDEO}}):t.stop&&"bytesReceived"===t.stat&&s.default.postEvent({event:JQ.eventType.RECEIVING_MEDIA_STOP,meeting:e,data:{mediaType:JQ.mediaType.VIDEO}})},onData:function(){}},{id:"mainShare",correlate:"video",onData:function(){}}]};o.default.generateOptions(t,QQ.STATS.CONFIG,e),t.config=QQ.STATS.CONFIG,e.internalStats=new l.default(e.attrs,e.options,t)}return e.internalStats},m.setPeerConnectionEvents=function(e){var t=e.mediaProperties.peerConnection;t.oniceconnectionstatechange=function(){switch(t.iceConnectionState){case QQ.ICE_STATE.CHECKING:s.default.postEvent({event:JQ.eventType.ICE_START,meeting:e});break;case QQ.ICE_STATE.COMPLETED:s.default.postEvent({event:JQ.eventType.ICE_END,meeting:e});break;case QQ.ICE_STATE.CONNECTED:case QQ.ICE_STATE.CLOSED:case QQ.ICE_STATE.DISCONNECTED:break;case QQ.ICE_STATE.FAILED:s.default.postEvent({event:JQ.eventType.ICE_END,meeting:e,data:{canProceed:!1,errors:[s.default.generateErrorPayload(2004,!1,JQ.error.name.MEDIA_ENGINE)]}})}}},t.default=m});r(UJ);var jJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=o(_f),n=o(yJ),i=o($Q),a=o(eJ);function o(e){return e&&e.__esModule?e:{default:e}}var s={},u=QQ._ANSWER_.toLowerCase();s.shouldHandleMedia=function(e){return!(e.mediaProperties.peerConnection&&e.mediaProperties.peerConnection.signalingState===QQ.SDP.HAVE_LOCAL_OFFER)},s.handleError=function(e){return n.default.rollBackLocalDescription({peerConnection:e}).then(function(){return r.default.resolve(!0)}).catch(function(e){return r.default.reject(e)})},s.findError=function(e,t,r){return(r===QQ.ROAP.RECEIVE_ROAP_MSG||r===QQ.ROAP.SEND_ROAP_MSG)&&e===QQ._ERROR_&&t===QQ._CONFLICT_},s.ensureMeeting=function(e,t){return!!(t!==QQ.ROAP.RECEIVE_ROAP_MSG&&t!==QQ.ROAP.SEND_ROAP_MSG&&t!==QQ.ROAP.SEND_ROAP_MSG_SUCCESS||e)},s.compareLastRemoteOffer=function(e,t){var r=void 0,n=void 0,i=!1;return t.length>0&&t.length===e.length&&t.forEach(function(t,a){r=t.indexOf(QQ._IN_),n=e[a].indexOf(QQ._IN_),t.substring(r)!==e[a].substring(n)&&(i=!0)}),i},s.updatePeerConnection=function(e,t){if(!s.compareLastRemoteOffer(t.OFFER.sdps,e.roap.lastRoapOffer)){var i=[];return e.mediaProperties.peerConnection&&i.push(e.mediaProperties.peerConnection.sdp),r.default.resolve(i)}return n.default.updatePeerConnection({offerSdp:t.OFFER.sdps,peerConnection:e.mediaProperties.peerConnection},e.meetingId).then(function(r){return e.roap.lastRoapOffer=t.OFFER.sdps,r})},s.setRemoteDescription=function(e,t){return i.default.logger.info("RoapUtil->setRemoteDescription#Transmit WAIT_TX_OK, correlationId: "+e.correlationId),e&&e.mediaProperties.peerConnection?n.default.setRemoteSessionDetails(e.mediaProperties.peerConnection,u,t.ANSWER.sdps[0],e.id).then(function(){return i.default.logger.info("RoapUtil->setRemoteDescription#Success for correlationId: "+e.correlationId),{seq:t.ANSWER.seq,locusId:e.locusId,locusSelfId:e.locusInfo.self.id,mediaId:e.mediaId,correlationId:e.correlationId}}).catch(function(e){throw e}):(i.default.logger.error("RoapUtil->setRemoteDescription#DANGER no media or screen peer connection, correlationId: "+e.correlationId),r.default.reject(new a.default("Must provide a media or screen peer connection")))},t.default=s});r(jJ);var FJ=n(function(e,t){var r;r=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e,t,r){e.exports=function(e,t){var r,n,i;for(r=1;r<arguments.length;r++)for(i in n=arguments[r])n.hasOwnProperty(i)&&(e[i]=n[i]);return e}},function(e,t,r){var n=r(0);e.exports={build:function(e,t){var r,i,a,o=t.plugins;for(r=0,i=o.length;r<i;r++)(a=o[r]).methods&&n(e,a.methods),a.properties&&Object.defineProperties(e,a.properties)},hook:function(e,t,r){var n,i,a,o,s=e.config.plugins,u=[e.context];for(r&&(u=u.concat(r)),n=0,i=s.length;n<i;n++)o=s[n],(a=s[n][t])&&a.apply(o,u)}}},function(e,t,r){function n(e){if(0===e.length)return e;var t,r,n=e.split(/[_-]/);if(1===n.length&&n[0][0].toLowerCase()===n[0][0])return e;for(r=n[0].toLowerCase(),t=1;t<n.length;t++)r=r+n[t].charAt(0).toUpperCase()+n[t].substring(1).toLowerCase();return r}n.prepended=function(e,t){return e+(t=n(t))[0].toUpperCase()+t.substring(1)},e.exports=n},function(e,t,r){var n=r(0),i=r(2);function a(e,t){e=e||{},this.options=e,this.defaults=t.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(e.init),this.data=this.configureData(e.data),this.methods=this.configureMethods(e.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(e.transitions||[]),this.plugins=this.configurePlugins(e.plugins,t.plugin)}n(a.prototype,{addState:function(e){this.map[e]||(this.states.push(e),this.addStateLifecycleNames(e),this.map[e]={})},addStateLifecycleNames:function(e){this.lifecycle.onEnter[e]=i.prepended("onEnter",e),this.lifecycle.onLeave[e]=i.prepended("onLeave",e),this.lifecycle.on[e]=i.prepended("on",e)},addTransition:function(e){this.transitions.indexOf(e)<0&&(this.transitions.push(e),this.addTransitionLifecycleNames(e))},addTransitionLifecycleNames:function(e){this.lifecycle.onBefore[e]=i.prepended("onBefore",e),this.lifecycle.onAfter[e]=i.prepended("onAfter",e),this.lifecycle.on[e]=i.prepended("on",e)},mapTransition:function(e){var t=e.name,r=e.from,n=e.to;return this.addState(r),"function"!=typeof n&&this.addState(n),this.addTransition(t),this.map[r][t]=e,e},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(e){return"string"==typeof e?this.mapTransition(n({},this.defaults.init,{to:e,active:!0})):"object"==typeof e?this.mapTransition(n({},this.defaults.init,e,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(e){return"function"==typeof e?e:"object"==typeof e?function(){return e}:function(){return{}}},configureMethods:function(e){return e||{}},configurePlugins:function(e,t){var r,n,i;for(r=0,n=(e=e||[]).length;r<n;r++)"function"==typeof(i=e[r])&&(e[r]=i=i()),i.configure&&i.configure(this);return e},configureTransitions:function(e){var t,r,n,i,a,o=this.defaults.wildcard;for(r=0;r<e.length;r++)for(n=e[r],i=Array.isArray(n.from)?n.from:[n.from||o],a=n.to||o,t=0;t<i.length;t++)this.mapTransition({name:n.name,from:i[t],to:a})},transitionFor:function(e,t){var r=this.defaults.wildcard;return this.map[e][t]||this.map[r][t]},transitionsFor:function(e){var t=this.defaults.wildcard;return Object.keys(this.map[e]).concat(Object.keys(this.map[t]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),e.exports=a},function(e,t,r){var n=r(0),i=r(6),a=r(1),o=[null,[]];function s(e,t){this.context=e,this.config=t,this.state=t.init.from,this.observers=[e]}n(s.prototype,{init:function(e){if(n(this.context,this.config.data.apply(this.context,e)),a.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(e){return Array.isArray(e)?e.indexOf(this.state)>=0:this.state===e},isPending:function(){return this.pending},can:function(e){return!this.isPending()&&!!this.seek(e)},cannot:function(e){return!this.can(e)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(e,t){var r=this.config.defaults.wildcard,n=this.config.transitionFor(this.state,e),i=n&&n.to;return"function"==typeof i?i.apply(this.context,t):i===r?this.state:i},fire:function(e,t){return this.transit(e,this.state,this.seek(e,t),t)},transit:function(e,t,r,n){var i=this.config.lifecycle,a=this.config.options.observeUnchangedState||t!==r;return r?this.isPending()?this.context.onPendingTransition(e,t,r):(this.config.addState(r),this.beginTransit(),n.unshift({transition:e,from:t,to:r,fsm:this.context}),this.observeEvents([this.observersForEvent(i.onBefore.transition),this.observersForEvent(i.onBefore[e]),a?this.observersForEvent(i.onLeave.state):o,a?this.observersForEvent(i.onLeave[t]):o,this.observersForEvent(i.on.transition),a?["doTransit",[this]]:o,a?this.observersForEvent(i.onEnter.state):o,a?this.observersForEvent(i.onEnter[r]):o,a?this.observersForEvent(i.on[r]):o,this.observersForEvent(i.onAfter.transition),this.observersForEvent(i.onAfter[e]),this.observersForEvent(i.on[e])],n)):this.context.onInvalidTransition(e,t,r)},beginTransit:function(){this.pending=!0},endTransit:function(e){return this.pending=!1,e},failTransit:function(e){throw this.pending=!1,e},doTransit:function(e){this.state=e.to},observe:function(e){if(2===e.length){var t={};t[e[0]]=e[1],this.observers.push(t)}else this.observers.push(e[0])},observersForEvent:function(e){for(var t,r=0,n=this.observers.length,i=[];r<n;r++)(t=this.observers[r])[e]&&i.push(t);return[e,i,!0]},observeEvents:function(e,t,r,n){if(0===e.length)return this.endTransit(void 0===n||n);var i=e[0][0],o=e[0][1],s=e[0][2];if(t[0].event=i,i&&s&&i!==r&&a.hook(this,"lifecycle",t),0===o.length)return e.shift(),this.observeEvents(e,t,i,n);var u=o.shift(),c=u[i].apply(u,t);return c&&"function"==typeof c.then?c.then(this.observeEvents.bind(this,e,t,i)).catch(this.failTransit.bind(this)):!1===c?this.endTransit(!1):this.observeEvents(e,t,i,c)},onInvalidTransition:function(e,t,r){throw new i("transition is invalid in current state",e,t,r,this.state)},onPendingTransition:function(e,t,r){throw new i("transition is invalid while previous transition is still in progress",e,t,r,this.state)}}),e.exports=s},function(e,t,r){var n=r(0),i=r(2),a=r(1),o=r(3),s=r(4),u={is:function(e){return this._fsm.is(e)},can:function(e){return this._fsm.can(e)},cannot:function(e){return this._fsm.cannot(e)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(e,t,r){return this._fsm.onInvalidTransition(e,t,r)},onPendingTransition:function(e,t,r){return this._fsm.onPendingTransition(e,t,r)}},c={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(e){throw Error("use transitions to change state")}}};function l(e){return f(this||{},e)}function f(e,t){return d(e,new o(t,l)),e._fsm(),e}function d(e,t){if("object"!=typeof e||Array.isArray(e))throw Error("StateMachine can only be applied to objects");a.build(e,t),Object.defineProperties(e,c),n(e,u),n(e,t.methods),t.allTransitions().forEach(function(t){e[i(t)]=function(){return this._fsm.fire(t,[].slice.call(arguments))}}),e._fsm=function(){this._fsm=new s(this,t),this._fsm.init(arguments)}}l.version="3.0.1",l.factory=function(){var e,t;"function"==typeof arguments[0]?(e=arguments[0],t=arguments[1]||{}):(e=function(){this._fsm.apply(this,arguments)},t=arguments[0]||{});var r=new o(t,l);return d(e.prototype,r),e.prototype._fsm.config=r,e},l.apply=f,l.defaults={wildcard:"*",init:{name:"init",from:"none"}},e.exports=l},function(e,t,r){e.exports=function(e,t,r,n,i){this.message=e,this.transition=t,this.from=r,this.to=n,this.current=i}}])},e.exports=r()});r(FJ);var BJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(FJ),n=i($Q);function i(e){return e&&e.__esModule?e:{default:e}}var a={createState:function(){return new(r.default.factory({init:QQ.ROAP.ROAP_STATE.INIT,transitions:[{name:QQ.ROAP.ROAP_TRANSITIONS.STEP,from:"*",to:function(e,t,r){var i=this.state;return function(e,t){var r=e.msg.messageType;if(t){if(r===QQ._OFFER_&&e.remote&&t.shareStatus===QQ._REQUESTED_)return!1;if(!t.mediaProperties.peerConnection&&r===QQ._ANSWER_)return!1}return n.default.logger.log("RoapStateMachine->shouldStep-> PeerConnectionState, ",t.mediaProperties.peerConnection.signalingState),n.default.logger.log("RoapStateMachine->shouldStep-> success save proceeding with transition, ",e.msg),!0}(r,t)?function(e,t,r){switch(e){case QQ.ROAP.ROAP_STATE.INIT:return t===QQ.ROAP.ROAP_SIGNAL.RX_OFFER?QQ.ROAP.ROAP_STATE.WAIT_TX_ANSWER:t===QQ.ROAP.ROAP_SIGNAL.TX_OFFER?QQ.ROAP.ROAP_STATE.WAIT_RX_ANSWER:e;case QQ.ROAP.ROAP_STATE.WAIT_RX_OFFER:return e;case QQ.ROAP.ROAP_STATE.WAIT_RX_ANSWER:return t===QQ.ROAP.ROAP_SIGNAL.RX_ANSWER?r.mediaId?QQ.ROAP.ROAP_STATE.WAIT_TX_OK:(n.default.logger.error("RoapStateMachine->handleTransition#Race Condition no mediaId, continuing."),e):t===QQ.ROAP.ROAP_SIGNAL.RX_OFFER?QQ.ROAP.ROAP_STATE.GLARE:e;case QQ.ROAP.ROAP_STATE.WAIT_TX_OFFER:return e;case QQ.ROAP.ROAP_STATE.WAIT_TX_ANSWER:return t===QQ.ROAP.ROAP_SIGNAL.TX_ANSWER?QQ.ROAP.ROAP_STATE.WAIT_RX_OK:e;case QQ.ROAP.ROAP_STATE.WAIT_TX_OK:return t===QQ.ROAP.ROAP_SIGNAL.TX_OK?QQ.ROAP.ROAP_STATE.INIT:e;case QQ.ROAP.ROAP_STATE.WAIT_RX_OK:return t===QQ.ROAP.ROAP_SIGNAL.RX_OK?QQ.ROAP.ROAP_STATE.INIT:e;case QQ.ROAP.ROAP_STATE.ERROR:return QQ.ROAP.ROAP_STATE.INIT;case QQ.ROAP.ROAP_STATE.GLARE:return QQ.ROAP.ROAP_STATE.WAIT_RX_ANSWER;default:return e}}(i,e,t):i}}],methods:{onAfterStep:function(e){n.default.logger.log("RoapStateMachine->onAfterStep#fired! State changed from '"+e.from+"' to '"+e.to+"' with transition '"+e.transition+"''.")}}}))}};t.default=a});r(BJ);var VJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=BJ)&&r.__esModule?r:{default:r};var i={sessions:{},getSession:function(e){return this.sessions[e]||(this.sessions[e]={}),this.sessions[e]},deleteSession:function(e){this.getSession(e)&&delete this.sessions[e]},getSessionSequence:function(e,t){var r=this.getSession(e);return r[t]||(r[t]={},r[t].state=n.default.createState()),r[t]},deleteSessionSequence:function(e,t){this.getSessionSequence(e,t)&&delete this.sessions[e][t]}};t.default=i});r(VJ);var GJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(hT),n=f(zy),i=f($y),a=f(vT),o=f(mT),s=f(Pf),u=f($Q),c=f(jJ),l=f(VJ);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e,i,o,s){(0,n.default)(this,t);var u=(0,a.default)(this,(t.__proto__||(0,r.default)(t)).call(this,{},i));return u.attrs=e,u.options=i,u.roapOk=o,u.roapAnswer=s,u}return(0,o.default)(t,e),(0,i.default)(t,[{key:"perform",value:function(e,t,r){var n=this;switch(e.state.state){case QQ.ROAP.ROAP_STATE.WAIT_TX_ANSWER:c.default.shouldHandleMedia(t)&&c.default.updatePeerConnection(t,e).then(function(r){n.roapAnswer({locusId:t.locusId,locusSelfId:t.locusInfo.self.id,mediaId:t.mediaId,sdps:r,seq:e.OFFER.seq,correlationId:t.correlationId,audioMuted:t.isAudioMuted(),videoMuted:t.isVideoMuted()})}).catch(function(e){u.default.logger.error("RoapHandler->perform#Error occured during wait receive answer, continuing, "+e)});break;case QQ.ROAP.ROAP_STATE.WAIT_TX_OK:c.default.shouldHandleMedia(t)||c.default.setRemoteDescription(t,e).then(function(e){n.roapOk(e)});break;case QQ.ROAP.ROAP_STATE.ERROR:u.default.logger.error("RoapHandler->perform#Roap State ERROR for session: "+e);break;case QQ.ROAP.ROAP_STATE.GLARE:e.GLARE_OFFER.tieBreaker=e.GLARE_OFFER.tieBreaker||0,e.OFFER.tieBreaker=e.OFFER.tieBreaker||0,u.default.logger.warn("RoapHandler->perform#Roap State resolved the GLARE condition."),e.GLARE_OFFER.tieBreaker<e.OFFER.tieBreaker?u.default.logger.log("RoapHandler->perform#Roap State local offer won after GLARE."):u.default.logger.log("RoapHandler->perform#Roap State remote offer won after GLARE."),e.state.step(QQ.ROAP.ROAP_SIGNAL.GLARE_RESOLVED,t,r),this.perform(e,t)}}},{key:"execute",value:function(e,t,r,n,i){t&&t.state&&(!function(e,t){var r=e.msg,n=r.seq,i=r.messageType;t.OFFER&&i===QQ._OFFER_?(t.GLARE_OFFER=e.msg,t.GLARE_OFFER.remote=!!e.remote,u.default.logger.warn("RoapHandler->handleSessionStep#Glare condition occurred with new mercury event, sequenceId: "+n)):(u.default.logger.info("RoapHandler->handleSessionStep#Save OFFER/ANSWER seq:"+n+" new mercury event "+i+"local state: "+(0,s.default)(t.state.state,null,2)),t[i]=e.msg,t[i].remote=!!e.remote)}(r,t),e=QQ.ROAP.ROAP_SIGNAL[""+i+r.msg.messageType],t.state.step(e,n,r),this.perform(t,n,r))}},{key:"handleAction",value:function(e,t,r,n){var i=void 0;switch(t.type){case QQ.ROAP.RECEIVE_ROAP_MSG:t.remote=!0,this.execute(i,e,t,r,QQ.ROAP.RX_);break;case QQ.ROAP.SEND_ROAP_MSG:t.local=!0,this.execute(i,e,t,r,QQ.ROAP.TX_);break;case QQ.ROAP.SEND_ROAP_MSG_SUCCESS:l.default.getSessionSequence(n,t.seq).ANSWER&&(i=QQ.ROAP.ROAP_SIGNAL.RX_ANSWER);break;case QQ.ROAP.RECEIVE_CALL_LEAVE:l.default.deleteSession(n),u.default.logger.log("RoapHandler->handleAction#RECEIVE_CALL_LEAVE event captured, cleaning up the RoapHandler for correlationId: "+n);break;case QQ.ROAP.RESET_ROAP_STATE:l.default.deleteSessionSequence(n,t.msg.seq),u.default.logger.log("RoapHandler->handleAction#RESET_ROAP_STATE event captured, resetting the RoapHandler state based on sequenceId: "+t.msg.seq);break;default:return!0}return!0}},{key:"submit",value:function(e){var t=e.correlationId,r=e.seq;!r&&e.msg&&(r=e.msg.seq);var n=l.default.getSessionSequence(t,r),i=this.webex.meetings.meetingCollection.get(t);return!!function(e,t,r){if(e&&e.type){if(e.msg&&e.msg.messageType&&e.msg.errorType&&c.default.findError(e.msg.messageType,e.msg.errorType,e.type))return c.default.handleError(t.mediaProperties.peerConnection).then(function(t){t&&l.default.deleteSessionSequence(r,e.msg.seq)}).catch(function(e){u.default.logger.warn("RoapHandler->checkForAndHandleErrors#Cannot reset the peer connection with error: "+e)}),!0;if(!c.default.ensureMeeting(t,e.type))return!0}return!1}(e,i,t)||this.handleAction(n,e,i,t)}}]),t}(XR.StatelessWebexPlugin);t.default=d});r(GJ);var qJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=p(Pf),n=p(_f),i=p(fI),a=p(hT),o=p(zy),s=p($y),u=p(vT),c=p(mT),l=p($Q),f=p(ZQ),d=p(eJ);function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){return(0,o.default)(this,t),(0,u.default)(this,(t.__proto__||(0,a.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"attachRechabilityData",value:function(e){var t=window.localStorage.getItem(QQ.REACHABILITY.localStorage);if(t)try{var r=JSON.parse(t);r&&(0,i.default)(r).length&&(e.reachability=r)}catch(e){l.default.logger.error("RoapRequest->attachReachabilityData#Error in parsing reachability data: "+e)}return e}},{key:"joinMeetingWithRoap",value:function(e){var t=this;return l.default.logger.info("RoapRequest->joinMeetingWithRoap#Join locus with roap"),l.default.logger.info("RoapRequest->joinMeetingWithRoap#Clocal SDP: "+e.roapMessage),n.default.resolve().then(function(){var n="",i={deviceUrl:t.webex.internal.device.url,usingResource:e.resourceId||null,correlationId:e.correlationId,localMedias:[{localSdp:(0,r.default)(t.attachRechabilityData({roapMessage:e.roapMessage,audioMuted:!1,videoMuted:!1}))}]};if(e.locusUrl)n=e.locusUrl+"/"+QQ.PARTICIPANT;else{if(!e.sipUrl)throw new d.default("Must provide a locusUrl or sipTarget");n=t.webex.internal.device.services.locusServiceUrl+"/"+QQ.LOCI+"/"+QQ.CALL,i.invitee={address:e.sipTarget}}return t.webex.request({method:QQ.HTTP_VERBS.POST,uri:n,body:i}).then(function(t){var r=t.body.locus;return r.roapSeq=e.roapMessage.seq,r.id=r.url.split("/").pop(),l.default.logger.info("RoapRequest->joinMeetingWithRoap#Joined locus ["+r.id+"]["+r.fullState.lastActive+"]"),r}).catch(function(e){throw l.default.logger.error("RoapRequest->joinMeetingWithRoap#failed with error: "+e),e})})}},{key:"sendRoap",value:function(e){var t=e.roapMessage,n=e.locusSelfUrl,i=e.mediaId,a=e.correlationId,o=e.meetingId;i||l.default.logger.info("RoapRequest->sendRoap#Race Condition /call mediaID not present");var s=n+"/"+QQ.MEDIA,u=this.webex.internal.device.url;return l.default.logger.info("RoapRequest->sendRoap#"+s+" \n "+t.messageType+" \n seq:"+t.seq),f.default.postEvent({event:JQ.eventType.MEDIA_REQUEST,meetingId:o}),this.webex.request({uri:s,method:QQ.HTTP_VERBS.PUT,body:{device:{url:u,deviceType:this.config.meetings.deviceType},correlationId:a,localMedias:[{localSdp:(0,r.default)(this.attachRechabilityData({roapMessage:t,audioMuted:!!e.audioMuted,videoMuted:!!e.audioVideo})),mediaId:e.mediaId}]}}).then(function(t){f.default.postEvent({event:JQ.eventType.MEDIA_RESPONSE,meetingId:o});var n=t.body.mediaConnections&&t.body.mediaConnections.length>0&&t.body.mediaConnections[0];l.default.logger.info("RoapRequest->sendRoap#:response:"+(0,r.default)(n,null,2)+"'\n StatusCode:'"+t.statusCode);var i=t.body.locus;return i.roapSeq=e.roapMessage.seq,i}).catch(function(n){throw f.default.postEvent({event:JQ.eventType.MEDIA_RESPONSE,meetingId:o,data:{error:f.default.parseLocusError(n,!0)}}),l.default.logger.error("RoapRequest->sendRoap#Error:"+(0,r.default)(n,null,2)),l.default.logger.error("RoapRequest->sendRoapRequest#errorBody:"+(0,r.default)(t,null,2)+" + '\\n mediaId:'"+e.mediaId),n})}}]),t}(XR.StatelessWebexPlugin);t.default=h});r(qJ);var KJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,n,i=m(KC),a=m(_f),o=m(Pf),s=m(hT),u=m(zy),c=m($y),l=m(vT),f=m(mT),d=m($Q),p=m(UJ),h=m(GJ),v=m(qJ);function m(e){return e&&e.__esModule?e:{default:e}}var g=(r=function(e){function t(e,r){(0,u.default)(this,t);var i=(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,{},r));return n.call(i),i.attrs=e,i.options=r,i.roapHandler=new h.default(i.attrs,i.options,i.sendRoapOK.bind(i),i.sendRoapAnswer.bind(i)),i.roapRequest=new v.default({},r),i.lastRoapOffer={},i}return(0,f.default)(t,e),(0,c.default)(t,[{key:"roapEvent",value:function(e){var t=e.message,r=e.correlationId;d.default.logger.log("Roap->roapEvent#Received Roap Message ["+(0,o.default)(t,null,2)+"]"),this.roapHandler.submit({type:QQ.ROAP.RECEIVE_ROAP_MSG,msg:t,correlationId:r})}},{key:"stop",value:function(e,t){return this.roapHandler.submit({type:QQ.ROAP.RECEIVE_CALL_LEAVE,seq:t,correlationId:e}),a.default.resolve()}},{key:"sendRoapOK",value:function(e){var t=this;return a.default.resolve().then(function(){var r=t.webex.meetings.meetingCollection.get(e.correlationId),n={messageType:QQ.ROAP.ROAP_TYPES.OK,version:QQ.ROAP.ROAP_VERSION,seq:e.seq};return d.default.logger.log("Roap->sendRoapOK#ROAP OK sending with seq "+e.seq),t.roapRequest.sendRoap({roapMessage:n,locusSelfUrl:r.selfUrl,mediaId:e.mediaId,correlationId:e.correlationId,audioMuted:r.isAudioMuted(),videoMuted:r.isVideoMuted(),meetingId:r.id}).then(function(){t.roapHandler.submit({type:QQ.ROAP.SEND_ROAP_MSG,msg:n,correlationId:e.correlationId}),d.default.logger.log("Roap->sendRoapOK#ROAP OK sent with seq "+e.seq),r.setRoapSeq(e.seq)})})}},{key:"sendRoapAnswer",value:function(e){var t=this,r=this.webex.meetings.meetingCollection.get(e.correlationId),n={messageType:QQ.ROAP.ROAP_TYPES.ANSWER,sdps:e.sdps,version:QQ.ROAP.ROAP_VERSION,seq:e.seq};return this.roapRequest.sendRoap({roapMessage:n,locusSelfUrl:r.selfUrl,mediaId:e.mediaId,correlationId:e.correlationId,audioMuted:e.audioMuted,videoMuted:e.videoMuted,meetingId:r.id}).then(function(){r.setRoapSeq(e.seq),t.roapHandler.submit({type:QQ.ROAP.SEND_ROAP_MSG,msg:n,correlationId:e.correlationId})})}},{key:"sendRoapError",value:function(e,t,r){var n={messageType:QQ.ROAP.ROAP_TYPES.ERROR,version:QQ.ROAP.ROAP_VERSION,errorType:r,seq:e.OFFER.seq};return this.roapRequest.sendRoap(n,t)}},{key:"sendRoapMediaRequest",value:function(e){var t=this,r=e.meeting,n={messageType:QQ.ROAP.ROAP_TYPES.OFFER,sdps:[e.sdp],version:QQ.ROAP.ROAP_VERSION,seq:"number"!=typeof e.roapSeq&&(0,i.default)(parseFloat(e.roapSeq))?0:e.roapSeq+1,tieBreaker:4294967294};return this.roapHandler.submit({type:QQ.ROAP.SEND_ROAP_MSG,msg:n,correlationId:r.correlationId}),this.roapRequest.sendRoap({roapMessage:n,correlationId:r.correlationId,locusSelfUrl:r.selfUrl,mediaId:r.mediaId,audioMuted:r.isAudioMuted(),videoMuted:r.isVideoMuted(),meetingId:r.id}).then(function(e){return t.roapHandler.submit({type:QQ.ROAP.SEND_ROAP_MSG_SUCCESS,seq:n.seq,correlationId:r.correlationId}),r.setRoapSeq(n.seq),e})}}]),t}(XR.StatelessWebexPlugin),n=function(){var e=this;this.sendRoapCallRequest=function(t){var r=t.meeting,n={messageType:QQ.ROAP.ROAP_TYPES.OFFER,sdps:[t.sdp],version:QQ.ROAP.ROAP_VERSION,seq:"number"!=typeof t.roapSeq&&(0,i.default)(parseFloat(t.roapSeq))?0:t.roapSeq+1,tieBreaker:4294967294};e.roapHandler.submit({type:QQ.ROAP.SEND_ROAP_MSG,msg:n,correlationId:r.correlationId});var a={localMedias:[{localSdp:(0,o.default)(e.roapRequest.attachRechabilityData({roapMessage:n,audioMuted:!!r.isAudioMuted(),videoMuted:!!r.isVideoMuted()}))}]};return p.default.joinMeetingOptions(r,{roapMessage:a}).then(function(t){return e.roapHandler.submit({type:QQ.ROAP.SEND_ROAP_MSG_SUCCESS,seq:n.seq,correlationId:r.correlationId}),r.setRoapSeq(n.seq),t})}},r);t.default=g});r(KJ);var HJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(YQ),n=i($Q);function i(e){return e&&e.__esModule?e:{default:e}}var a={createPeerConnection:function(){return new window.RTCPeerConnection(r.default.firefox?QQ.RTC_CONFIGURATION_FIREFOX:QQ.RTC_CONFIGURATION)},createMediaStream:function(e){return e||n.default.logger.error("Tracks don't exist"),new MediaStream(e)}};t.default=a});r(HJ);var zJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(zy),n=a($y),i=a(HJ);function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,e),this.namespace=QQ.MEETINGS,this.peerConnection=i.default.createPeerConnection(),this.mediaDirection=t.mediaDirection,this.videoTrack=t.videoTrack,this.audioTrack=t.audioTrack,this.shareTrack=t.shareTrack,this.remoteStream=t.remoteStream,this.remoteShare=t.remoteShare}return(0,n.default)(e,[{key:"setMediaDirection",value:function(e){this.mediaDirection=e}},{key:"setMediaPeerConnection",value:function(e){this.peerConnection=e}},{key:"setLocalVideoTrack",value:function(e){this.videoTrack=e}},{key:"setLocalAudioTrack",value:function(e){this.audioTrack=e}},{key:"setLocalShareTrack",value:function(e){this.shareTrack=e}},{key:"setRemoteStream",value:function(e){this.remoteStream=e}},{key:"setRemoteShare",value:function(e){this.remoteShare=e}},{key:"unsetPeerConnection",value:function(){this.peerConnection=null}},{key:"reInitiatePeerconnection",value:function(){this.peerConnection=i.default.createPeerConnection()}},{key:"unsetLocalVideoTrack",value:function(){this.videoTrack=null}},{key:"unsetLocalShareTrack",value:function(){this.shareTrack=null}},{key:"unsetLocalAudioTrack",value:function(){this.audioTrack=null}},{key:"unsetRemoteStream",value:function(){this.remoteStream=null}},{key:"unsetRemoteShare",value:function(){this.remoteShare=null}},{key:"unsetLocalVideoTracks",value:function(){this.unsetLocalVideoTrack(),this.unsetLocalShareTrack()}},{key:"unsetRemoteStreams",value:function(){this.unsetRemoteStream(),this.unsetRemoteShare()}},{key:"unsetShareStreams",value:function(){this.unsetLocalShareTrack(),this.unsetRemoteShare()}},{key:"unsetMediaStreams",value:function(){this.unsetLocalVideoTrack(),this.unsetRemoteStream()}}]),e}();t.default=o});r(zJ);var WJ=n(function(e,t){var r;r=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){function n(e){if(0===e.length)return e;var t,r,n=e.split(/[_-]/);if(1===n.length&&n[0][0].toLowerCase()===n[0][0])return e;for(r=n[0].toLowerCase(),t=1;t<n.length;t++)r=r+n[t].charAt(0).toUpperCase()+n[t].substring(1).toLowerCase();return r}n.prepended=function(e,t){return e+(t=n(t))[0].toUpperCase()+t.substring(1)},e.exports=n},function(e,t,r){var n=r(0);e.exports=function(e){var t=n((e=e||{}).name||e.past||"history"),r=n(e.future||"future"),i=n.prepended("clear",t),a=n.prepended(t,"back"),o=n.prepended(t,"forward"),s=n.prepended("can",a),u=n.prepended("can",o),c=e.max,l={configure:function(e){e.addTransitionLifecycleNames(a),e.addTransitionLifecycleNames(o)},init:function(e){e[t]=[],e[r]=[]},lifecycle:function(e,n){"onEnterState"===n.event&&(e[t].push(n.to),c&&e[t].length>c&&e[t].shift(),n.transition!==a&&n.transition!==o&&(e[r].length=0))},methods:{},properties:{}};return l.methods[i]=function(){this[t].length=0,this[r].length=0},l.properties[s]={get:function(){return this[t].length>1}},l.properties[u]={get:function(){return this[r].length>0}},l.methods[a]=function(){if(!this[s])throw Error("no history");var e=this[t].pop(),n=this[t].pop();this[r].push(e),this._fsm.transit(a,e,n,[])},l.methods[o]=function(){if(!this[u])throw Error("no history");var e=this.state,t=this[r].pop();this._fsm.transit(o,e,t,[])},l}}])},e.exports=r()});r(WJ);var YJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=s(FJ),n=s(WJ),i=s($Q),a=s(rJ),o=s(eJ);function s(e){return e&&e.__esModule?e:{default:e}}var u={create:function(e){if(!e)throw new o.default("You must initialize the meeting state machine with a meeting reference.");return new r.default({init:QQ.MEETING_STATE_MACHINE.STATES.IDLE,transitions:[{name:QQ.MEETING_STATE_MACHINE.TRANSITIONS.RING,from:[QQ.MEETING_STATE_MACHINE.STATES.IDLE,QQ.MEETING_STATE_MACHINE.STATES.SAFE,QQ.MEETING_STATE_MACHINE.STATES.JOINED],to:QQ.MEETING_STATE_MACHINE.STATES.RINGING},{name:QQ.MEETING_STATE_MACHINE.TRANSITIONS.JOIN,from:[QQ.MEETING_STATE_MACHINE.STATES.JOINED,QQ.MEETING_STATE_MACHINE.STATES.IDLE,QQ.MEETING_STATE_MACHINE.STATES.RINGING,QQ.MEETING_STATE_MACHINE.STATES.SAFE],to:QQ.MEETING_STATE_MACHINE.STATES.JOINED},{name:QQ.MEETING_STATE_MACHINE.TRANSITIONS.REMOTE,from:[QQ.MEETING_STATE_MACHINE.STATES.JOINED,QQ.MEETING_STATE_MACHINE.STATES.SAFE],to:function(e){return e.remoteAnswered?QQ.MEETING_STATE_MACHINE.STATES.ANSWERED:e.remoteDeclined?QQ.MEETING_STATE_MACHINE.STATES.DECLINED:QQ.MEETING_STATE_MACHINE.STATES.ERROR}},{name:QQ.MEETING_STATE_MACHINE.TRANSITIONS.LEAVE,from:[QQ.MEETING_STATE_MACHINE.STATES.RINGING,QQ.MEETING_STATE_MACHINE.STATES.JOINED,QQ.MEETING_STATE_MACHINE.STATES.ANSWERED,QQ.MEETING_STATE_MACHINE.STATES.DECLINED,QQ.MEETING_STATE_MACHINE.STATES.ERROR,QQ.MEETING_STATE_MACHINE.STATES.SAFE],to:QQ.MEETING_STATE_MACHINE.STATES.ENDED},{name:QQ.MEETING_STATE_MACHINE.TRANSITIONS.DECLINE,from:[QQ.MEETING_STATE_MACHINE.STATES.RINGING,QQ.MEETING_STATE_MACHINE.STATES.SAFE],to:QQ.MEETING_STATE_MACHINE.STATES.ENDED},{name:QQ.MEETING_STATE_MACHINE.TRANSITIONS.FAIL,from:"*",to:QQ.MEETING_STATE_MACHINE.STATES.ERROR},{name:QQ.MEETING_STATE_MACHINE.TRANSITIONS.SAFE,from:QQ.MEETING_STATE_MACHINE.STATES.ERROR,to:QQ.MEETING_STATE_MACHINE.STATES.SAFE},{name:QQ.MEETING_STATE_MACHINE.TRANSITIONS.RESET,from:"*",to:QQ.MEETING_STATE_MACHINE.STATES.IDLE}],data:{meeting:e},methods:{onRemote:function(e,t){this.meeting&&a.default.trigger(this.meeting,{file:"meeting/state",function:"onRemote"},QQ.EVENT_TRIGGERS.MEETING_RINGING_STOP,{id:this.meeting.id,type:t})},onRing:function(e,t){this.meeting&&a.default.trigger(this.meeting,{file:"meeting/state",function:"onRing"},QQ.EVENT_TRIGGERS.MEETING_RINGING,{type:t,id:this.meeting.id})},onBeforeError:function(e,t){i.default.logger.error("meeting/state->onError#meeting.id: "+this.meeting.id+" | Transition '"+e.transition+"' : "+e.from+" -> "+e.to+" failed after last state transition, with error "+t+". Moving to a non-informative state. Last states: "+this.history)},onAfterError:function(){this.safe()},onAfterTransition:function(e){i.default.logger.log("meeting/state->onAfterTransition#meeting.id: "+this.meeting.id+" | Transition '"+e.transition+"' : "+e.from+" -> "+e.to+" executed. Last states: "+this.history)}},plugins:[new n.default({max:25})]})}};t.default=u});r(YJ);var XJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=u(_f),n=u(FJ),i=u(WJ),a=u($Q),o=u(_J),s=u(UJ);function u(e){return e&&e.__esModule?e:{default:e}}var c={create:function(e,t){return e.sendAudio?new n.default({transitions:[{name:QQ.MEETING_AUDIO_STATE_MACHINE.TRANSITIONS.TOGGLE,from:"*",to:function(e){return function(e){return e.mute&&e.self?QQ.MEETING_AUDIO_STATE_MACHINE.STATES.MUTE_SELF:!e.mute&&e.self?QQ.MEETING_AUDIO_STATE_MACHINE.STATES.UNMUTE_SELF:null}(e)||this.state}}],data:{muted:!1,self:!0},methods:{isMuted:function(){return this.muted},isSelf:function(){return this.self},setData:function(e){this.muted=e.mute,this.self=e.self},onBeforeToggle:function(e,n){var i=this;return e.from!==e.to?function(e,t,n){return o.default.setLocalTrack(t.mute,n.mediaProperties.audioTrack),s.default.remoteUpdateAudioVideo(t.mute,n.video.muted,n).then(function(){a.default.logger.log("AudioStateMachine->onAfterToggle#"+e.event+" fired! State changed from '"+e.from+"' to '"+e.to+"' with transition '"+e.transition+"''.")}).catch(function(t){return a.default.logger.log("AudioStateMachine->onBeforeToggle#"+e.event+" fired! State failed to change with transition '"+e.transition+"''. After local audio toggle failed, resetting remote also failed, meeting audio in bad state with error: "+t+"."),r.default.reject(t)})}(e,n,t).then(function(){return r.default.resolve(i.data)}):r.default.resolve(this.data)},onAfterToggle:function(e,t){return this.setData(t),r.default.resolve(this.data)},plugins:[new i.default({max:5})]}}):null}};t.default=c});r(XJ);var $J=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=u(_f),n=u(FJ),i=u(WJ),a=u($Q),o=u(_J),s=u(UJ);function u(e){return e&&e.__esModule?e:{default:e}}var c={create:function(e,t){if(e.sendVideo)return new n.default({transitions:[{name:QQ.MEETING_VIDEO_STATE_MACHINE.TRANSITIONS.TOGGLE,from:"*",to:function(e){return function(e){return e.mute&&e.self?QQ.MEETING_VIDEO_STATE_MACHINE.STATES.MUTE_SELF:!e.mute&&e.self?QQ.MEETING_VIDEO_STATE_MACHINE.STATES.UNMUTE_SELF:null}(e)||this.state}}],data:{muted:!1,self:!0},methods:{isMuted:function(){return this.muted},isSelf:function(){return this.self},setData:function(e){this.muted=e.mute,this.self=e.self},onBeforeToggle:function(e,n){var i=this;return e.from!==e.to?function(e,t,n){return o.default.setLocalTrack(t.mute,n.mediaProperties.videoTrack),s.default.remoteUpdateAudioVideo(n.audio.muted,t.mute,n).then(function(){a.default.logger.log("VideoStateMachine->onAfterToggle#"+e.event+" fired! State changed from '"+e.from+"' to '"+e.to+"' with transition '"+e.transition+"''.")}).catch(function(t){return a.default.logger.log("VideoStateMachine->onBeforeToggle#"+e.event+" fired! State failed to change with transition '"+e.transition+"''. After local Video toggle failed, resetting remote also failed, meeting video in bad state with error: "+t+"."),r.default.reject(t)})}(e,n,t).then(function(){return r.default.resolve(i.data)}):r.default.resolve(this.data)},onAfterToggle:function(e,t){return this.setData(t),r.default.resolve(this.data)},plugins:[new i.default({max:5})]}})}};t.default=c});r($J);var QJ=n(function(e,t){t.__esModule=!0;var r=i(hT),n=i(uc);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t,i,a){null===t&&(t=Function.prototype);var o=(0,n.default)(t,i);if(void 0===o){var s=(0,r.default)(t);return null===s?void 0:e(s,i,a)}if("value"in o)return o.value;var u=o.get;return void 0!==u?u.call(a):void 0}});r(QJ);var JJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(hT),n=d(zy),i=d($y),a=d(vT),o=d(QJ),s=d(mT),u=d(TS),c=d($Q),l=d(XQ),f=d(tJ);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return(0,n.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,i.default)(t,[{key:"emit",value:function(e,n,i){return c.default.logger.debug(f.default.getScopeLog(e)+"event#"+n+(l.default.verboseEvents?" -- "+f.default.getEventLog(i):"")),(0,o.default)(t.prototype.__proto__||(0,r.default)(t.prototype),"emit",this).call(this,n,i)}}]),t}(u.default);t.default=p});r(JJ);var ZJ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={parse:function(e){var t={policy:r.parsePolicy(e),moderator:r.parseModerator(e)};return e.sipUri&&(t.sipUri=e.sipUri),t},parsePolicy:function(e){var t={};return e&&e.displayHints&&e.displayHints.joined&&e.displayHints.joined.length>0&&e.displayHints.joined.forEach(function(e){t[e]=!0}),t},parseModerator:function(e){var t={};return e&&e.displayHints&&e.displayHints.moderator&&e.displayHints.moderator.length>0&&e.displayHints.moderator.forEach(function(e){t[e]=!0}),t},isLocked:function(e){return e.LOCK_STATUS_LOCKED||!1},isUnlocked:function(e){return e.LOCK_STATUS_UNLOCKED||!1},getInfos:function(e,t){var n=null;e&&(n=e);var i=t&&r.parse(t),a={};return i&&(i.isLocked=r.isLocked(i.policy),i.isUnlocked=r.isUnlocked(i.policy),(n&&n.isUnlocked&&i.isLocked||!n&&i.isLocked)&&(a.isLocked=i.isLocked),(n&&n.isLocked&&i.isUnlocked||!n&&i.isUnlocked)&&(a.isUnlocked=i.isUnlocked)),{previous:n,current:i,updates:{isLocked:r.isLocked(i),isUnlocked:r.isUnlocked(i)}}}};t.default=r});r(ZJ);var eZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={parse:function(e){return{type:e.type||QQ.FULL_STATE.UNKNOWN,meetingState:e.state,locked:e.locked}},getFullState:function(e,t){var n=e&&r.parse(e),i=t&&r.parse(t);return{previous:n,current:i,updates:{isMeetingEnded:r.isMeetingEnded(n,i),isMeetingTerminating:r.isMeetingTerminating(n,i),meetingTypeChangedTo:r.isTypeChanged(n,i)}}},isMeetingEnded:function(e,t){return!(t.state!==QQ.FULL_STATE.INACTIVE||!e||e.state!==QQ.FULL_STATE.ACTIVE&&e.state!==QQ.FULL_STATE.INITIALIZING&&e.state!==QQ.FULL_STATE.TERMINATING)},isMeetingTerminating:function(e,t){return!(t.state!==QQ.FULL_STATE.TERMINATING||!e||e.state!==QQ.FULL_STATE.ACTIVE&&e.state!==QQ.FULL_STATE.INITIALIZING)},isTypeChanged:function(e,t){return e&&t.type===e.type?null:t&&t.type}};t.default=r});r(eZ);var tZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=eJ)&&r.__esModule?r:{default:r};var i={parse:function(e,t){return e?{muted:i.getMuted(e),lastModified:i.getLastModified(e),modifiedBy:i.getModifiedBy(e),guest:e.guest,moderator:e.moderator,mediaStatus:i.getStatus(e.status),state:e.state,joinedWith:e.devices.find(function(e){return t===e.url}),creator:e.isCreator,selfId:e.id,selfIdentity:i.getSelfIdentity(e),selfUrl:e.url}:null},getSelves:function(e,t,r){var n=e&&i.parse(e,r),a=t&&i.parse(t,r),o={};return o.isUnadmittedGuest=i.isUnadmittedGuest(a),o.isAdmittedGuest=i.isAdmittedGuest(n,a),o.isMutedByOthers=i.mutedByOthers(n,a),o.moderatorChanged=i.moderatorChanged(n,a),{previous:n,current:a,updates:{isUnadmittedGuest:i.isUnadmittedGuest(a),isAdmittedGuest:i.isAdmittedGuest(n,a),mutedByOthers:i.mutedByOthers(n,a)}}},getLastModified:function(e){return e&&e.controls&&e.controls.audio&&e.controls.audio.meta&&e.controls.audio.meta.lastModified?e.controls.audio.meta.lastModified:null},getModifiedBy:function(e){return e&&e.controls&&e.controls.audio&&e.controls.audio.meta&&e.controls.audio.meta.modifiedBy?e.controls.audio.meta.modifiedBy:null},getSelfIdentity:function(e){return e||e.person?e.person.id:null},getMuted:function(e){return e&&e.controls&&e.controls.audio?e.controls.audio.muted:null},getStatus:function(e){return{audio:e.audioStatus,video:e.videoStatus,slides:e.videoSlidesStatus}},isLocusGuestUnadmitted:function(e){return e&&e.guest&&e.state===QQ._IDLE_},isLocusGuestAdmitted:function(e){return e&&e.guest&&e.state===QQ._JOINED_},isUnadmittedGuest:function(e){if(!e)throw new n.default("self must be defined to determine if self is unadmitted as guest.");return i.isLocusGuestUnadmitted(e)},moderatorChanged:function(e,t){if(!e)return!0;if(!t)throw new n.default("New self must be defined to determine if self transitioned moderator status.");return e.moderator!==t.moderator},isAdmittedGuest:function(e,t){if(!e)return!1;if(!t)throw new n.default("New self must be defined to determine if self transitioned to admitted as guest.");return i.isLocusGuestUnadmitted(e)&&i.isLocusGuestAdmitted(t)},mutedByOthers:function(e,t){if(!t)throw new n.default("New self must be defined to determine if self was muted by others.");return t.muted&&(e.lastModified!==t.lastModified||e.modifiedBy!==t.modifiedBy)},getSipUrl:function(e,t,r){return e&&t===QQ._CALL_?{sipUri:e.person.sipUrl||e.person.emailAddress||e.person.email}:{sipUri:r}}};t.default=i});r(tZ);var rZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={parse:function(e){return e?{hostId:r.getId(e)}:null},getHosts:function(e,t){var n=e&&r.parse(e),i=t&&r.parse(t);return{previous:n,current:i,updates:{isNewHost:!n||!i||r.isDifferentHosts(n.hostId,i.hostId)}}},isDifferentHosts:function(e,t){return e!==t},getId:function(e){return e?e.id:null}};t.default=r});r(rZ);var nZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={parse:function(e){return e?{contentId:r.getContentId(e),disposition:r.getDisposition(e)}:null},getMediaShares:function(e,t){return{previous:e&&r.parse(e),current:t&&r.parse(t)}},getDisposition:function(e){var t=r.extractContentFloor(e);return t?t.disposition:null},extractContent:function(e){return e&&e.length&&e.find(function(e){return e.name===QQ.CONTENT})||null},extractFloor:function(e){return e?e.floor:null},extractContentFloor:function(e){var t=r.extractContent(e);return r.extractFloor(t)},getContentId:function(e){var t=r.extractContentFloor(e);return t&&t.beneficiary?t.beneficiary.id:null}};t.default=r});r(nZ);var iZ=function(e,t,r){for(var n=-1,i=e.length;++n<i;){var a=e[n],o=t(a);if(null!=o&&(void 0===s?o==o&&!gv(o):r(o,s)))var s=o,u=a}return u};var aZ=function(e,t){return e<t};var oZ=function(e){return e&&e.length?iZ(e,nm,aZ):void 0};var sZ=function(e,t){return e>t};var uZ=function(e){return e&&e.length?iZ(e,nm,sZ):void 0},cZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(uZ),n=i(oZ);function i(e){return e&&e.__esModule?e:{default:e}}var a={compareLocus:function(e,t){var i=Math.min(e.rangeStart,(0,n.default)(e.entries)),o=Math.max(e.rangeEnd,(0,r.default)(e.entries)),s=Math.min(t.rangeStart,(0,n.default)(t.entries)),u=Math.max(t.rangeEnd,(0,r.default)(t.entries)),c=a.calculateUnique(e,t),l=a.calculateUnique(t,e),f=!(0===e.rangeStart&&0===e.rangeEnd),d=!(0===t.rangeStart&&0===t.rangeEnd);return i>u?QQ.DELTAEVENT.GT:o<s?QQ.DELTAEVENT.LT:c.length||l.length?c.length&&!l.length?QQ.DELTAEVENT.GT:l.length&&!c.length?QQ.DELTAEVENT.LT:!f&&!d||a.hasUniqueButInRange(c,s,u)||a.hasUniqueButInRange(l,i,o)?QQ.DELTAEVENT.CF:(0,n.default)(c)>(0,n.default)(l)?QQ.DELTAEVENT.GT:QQ.DELTAEVENT.LT:e.rangeEnd-i>t.rangeEnd-s?QQ.DELTAEVENT.GT:e.rangeEnd-i<t.rangeEnd-s?QQ.DELTAEVENT.LT:QQ.DELTAEVENT.EQ},generateSyncDebugFlag:function(e,t){var r=t.baseSequence,n=e.locusInfo.sequence,i=t.sequence,o=["","","","","",""],s=function(e){return e?a.isEmptySequence(e)?QQ.LOCUS.SEQUENCE.EMPTY:QQ.LOCUS.SEQUENCE.DEF:QQ.LOCUS.SEQUENCE.UN_DEF};o[0]=s(r),o[1]=s(n),o[2]=s(i),o[3]=r&&n?a.compareLocus(r,n).toLowerCase():QQ.LOCUS.SEQUENCE.NA,o[4]=n&&i?a.compareLocus(n,i).toLowerCase():QQ.LOCUS.SEQUENCE.NA,o[5]=r&&i?a.compareLocus(r,i).toLowerCase():QQ.LOCUS.SEQUENCE.NA,e.desync=o.toString()},calculateUnique:function(e,t){var r=[];return e.entries.forEach(function(e){(e<t.rangeStart||e>t.rangeEnd)&&-1===t.entries.indexOf(e)&&r.push(e)}),r},isEmptySequence:function(e){return!!(Object.prototype.hasOwnProperty.call(e,QQ.LOCUS.SEQUENCE.RANGE_START)&&0===e.rangeStart&&Object.prototype.hasOwnProperty.call(e,QQ.LOCUS.SEQUENCE.RANGE_END)&&0===e.rangeEnd&&e.entries&&0===e.entries.length)},hasUniqueButInRange:function(e,t,r){return e.some(function(e){return e>t&&e<r})}};t.default=a});r(cZ);var lZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(oZ),n=i(cZ);function i(e){return e&&e.__esModule?e:{default:e}}var a={updateWithDeltaLocus:function(e,t){if(!(e.sequence&&e.sequence.rangeStart<=e.sequence.rangeEnd&&e.sequence.rangeEnd<=(0,r.default)(e.sequence.entries)))return null;if(!t.locusInfo.baseSequence)return t.meetingRequest.getFullLocus({desync:!0,locusUrl:t.locusUrl}).then(function(r){return r.body.baseSequence=e.baseSequence,t.locusInfo.onFullLocus(r.body),QQ.DELTAEVENT.EQ});e.sequence;var i=void 0,o=void 0;switch((i=n.default.compareLocus(e.sequence,t.locusInfo.sequence))===QQ.DELTAEVENT.GT&&e.baseSequence&&t.locusInfo.syncUrl&&((o=n.default.compareLocus(e.baseSequence,t.locusInfo.sequence))!==QQ.DELTAEVENT.LT&&o!==QQ.DELTAEVENT.CF||(i=QQ.DELTAEVENT.CF)),e.baseSequence||i!==QQ.DELTAEVENT.EQ||e.fullState.state!==QQ.LOCUS.STATE.INITIALIZING||0!==e.sequence.rangeStart||0!==e.sequence.rangeEnd||0!==e.sequence.entries.length||(i=QQ.DELTAEVENT.GT),i){case QQ.DELTAEVENT.LT:case QQ.DELTAEVENT.EQ:t.locusDesync=!1,t.needToGetFullLocus=!1;break;case QQ.DELTAEVENT.CF:n.default.generateSyncDebugFlag(t,e),t.locusDesync?t.meetingRequest.getFullLocus({desync:!0,locusUrl:t.locusUrl}).then(function(e){t.locusInfo.onFullLocus(e.body)}):(t.locusDesync=!0,a.syncMeeting(t,e));break;case QQ.DELTAEVENT.GT:t.locusInfo.onDeltaLocus(e),t.locusDesync=!1,t.needToGetFullLocus=!1}return i},syncMeeting:function(e,t){e&&e.locusInfo&&e.locusInfo.syncUrl&&e.locusInfo.fullState&&e.locusInfo.fullState.state!==QQ.LOCUS.STATE.INACTIVE&&e.meetingRequest.syncMeeting({syncUrl:t.syncUrl,desync:e.desync}).then(function(t){e.locusInfo.onDeltaLocus(t.body)})}};t.default=a});r(lZ);var fZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=g(hT),n=g(zy),i=g($y),a=g(vT),o=g(mT),s=g(SA),u=g($Q),c=g(JJ),l=g(ZQ),f=g(ZJ),d=g(eZ),p=g(tZ),h=g(rZ),v=g(nZ),m=g(lZ);function g(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments[2],s=arguments[3];(0,n.default)(this,t);var u=(0,a.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return u.meetingId=s,u.updateMeeting=e,u.controls=i.controls||null,u.conversationUrl=i.conversationUrl||null,u.created=i.created||null,u.mediaShares=i.mediaShares||null,u.participantsUrl=i.participantsUrl||null,u.replaces=i.replaces||null,u.aclUrl=i.aclUrl||null,u.baseSequence=i.baseSequence||null,u.sequence=i.sequence||null,u.membership=i.membership||null,u.identities=i.identities||null,u.participants=i.participants||null,u.emitChange=!1,u.parsedLocus={states:[]},u.webex=o,u.compareAndUpdateFlags={},u.updateLocusUrl(i.url),u.updateFullState(i.fullState),u.updateMeetingInfo(i.info),u.updateSelf(i.self,i.participants),u.updateHostInfo(i.host),u}return(0,o.default)(t,e),(0,i.default)(t,[{key:"initialSetup",value:function(e,t){t?m.default.updateWithDeltaLocus(e,t):this.onFullLocus(e),this.emitChange=!0}},{key:"parse",value:function(e,t){var r=t.eventType;switch(u.default.logger.info("locusInfo->parse#received locus data: "+r),r){case QQ.LOCUSEVENT.PARTICIPANT_JOIN:case QQ.LOCUSEVENT.PARTICIPANT_LEFT:case QQ.LOCUSEVENT.CONTROLS_UPDATED:case QQ.LOCUSEVENT.PARTICIPANT_AUDIO_MUTED:case QQ.LOCUSEVENT.PARTICIPANT_AUDIO_UNMUTED:case QQ.LOCUSEVENT.PARTICIPANT_VIDEO_MUTED:case QQ.LOCUSEVENT.PARTICIPANT_VIDEO_UNMUTED:case QQ.LOCUSEVENT.SELF_CHANGED:case QQ.LOCUSEVENT.PARTICIPANT_UPDATED:case QQ.LOCUSEVENT.PARTICIPANT_CONTROLS_UPDATED:case QQ.LOCUSEVENT.PARTICIPANT_ROLES_UPDATED:case QQ.LOCUSEVENT.PARTICIPANT_DECLINED:case QQ.LOCUSEVENT.FLOOR_GRANTED:case QQ.LOCUSEVENT.FLOOR_RELEASED:this.onFullLocus(t.locus,r);break;case QQ.LOCUSEVENT.DIFFERENCE:m.default.updateWithDeltaLocus(t.locus,e);break;default:m.default.updateWithDeltaLocus(t.locus,e)}}},{key:"emitScoped",value:function(e,t,r){return this.emit(e,t,r)}},{key:"onFullLocus",value:function(e,t){e||u.default.logger.error("LocusInfo->onFullLocus#Locus object passed as argument was invalid, continuing."),this.participants=e.participants,this.updateLocusInfo(e),this.updateParticipants(e.participants),this.isMeetingActive(),this.handleOneOnOneEvent(t)}},{key:"handleOneOnOneEvent",value:function(e){this.parsedLocus.info.type===QQ._CALL_&&(e===QQ.LOCUSEVENT.PARTICIPANT_DECLINED&&this.emitScoped({file:"locus-info",function:"handleOneonOneEvent"},QQ.EVENTS.REMOTE_ANSWERED_DECLINED,{remoteDeclined:!0,remoteAnswered:!1}),e===QQ.LOCUSEVENT.PARTICIPANT_JOIN&&this.emitScoped({file:"locus-info",function:"handleOneonOneEvent"},QQ.EVENTS.REMOTE_ANSWERED_DECLINED,{remoteDeclined:!1,remoteAnswered:!0}))}},{key:"onDeltaLocus",value:function(e){this.updateLocusInfo(e),this.updateParticipants(e.participants)}},{key:"updateLocusInfo",value:function(e){this.updateControls(e.controls),this.updateConversationUrl(e.conversationUrl),this.updateCreated(e.created),this.updateFullState(e.fullState),this.updateHostInfo(e.host),this.updateMeetingInfo(e.info,e.self),this.updateMediaShares(e.mediaShares),this.updateParticipantsUrl(e.participantsUrl),this.updateReplace(e.replace),this.updateSelf(e.self,e.participants),this.updateLocusUrl(e.url),this.updateAclUrl(e.aclUrl),this.updateBasequence(e.baseSequence),this.updateSequence(e.sequence),this.updateMemberShip(e.membership),this.updateIdentifiers(e.identities),this.compareAndUpdate()}},{key:"getLocusPartner",value:function(e,t){return e&&0!==e.length?e.find(function(r){return t&&r.identity!==t.identity&&(e.length<=2||r.type===QQ._USER_&&!r.removed)})||this.partner:null}},{key:"isMeetingActive",value:function(){if(this.parsedLocus.fullState.type===QQ._CALL_){var e=this.getLocusPartner(this.participants,this.self);this.updateMeeting({partner:e}),this.fullState&&this.fullState.state===QQ.LOCUS.STATE.INACTIVE?(u.default.logger.warn("LocusInfo#isMeetingActive-> Call Ended, locus state is inactive."),l.default.postEvent({event:JQ.eventType.REMOTE_ENDED,meetingId:this.meetingId}),this.emitScoped({file:"locus-info",function:"isMeetingActive"},QQ.EVENTS.DESTROY_MEETING,{shouldLeave:!1})):e.state!==QQ.MEETING_STATE.STATES.LEFT||!this.parsedLocus.self||this.parsedLocus.self.state!==QQ.MEETING_STATE.STATES.DECLINED&&this.parsedLocus.self.state!==QQ.MEETING_STATE.STATES.NOTIFIED&&this.parsedLocus.self.state!==QQ.MEETING_STATE.STATES.JOINED?!this.parsedLocus.self||this.parsedLocus.self.state!==QQ.MEETING_STATE.STATES.LEFT||e.state!==QQ.MEETING_STATE.STATES.LEFT&&e.state!==QQ.MEETING_STATE.STATES.DECLINED&&e.state!==QQ.MEETING_STATE.STATES.NOTIFIED&&e.state!==QQ.MEETING_STATE.STATES.IDLE||(l.default.postEvent({event:JQ.eventType.REMOTE_ENDED,meetingId:this.meetingId}),this.emitScoped({file:"locus-info",function:"isMeetingActive"},QQ.EVENTS.DESTROY_MEETING,{shouldLeave:!1})):(l.default.postEvent({event:JQ.eventType.REMOTE_ENDED,meetingId:this.meetingId}),this.emitScoped({file:"locus-info",function:"isMeetingActive"},QQ.EVENTS.DESTROY_MEETING,{shouldLeave:this.parsedLocus.self.joinedWith&&this.parsedLocus.self.joinedWith.state!==QQ._LEFT_}))}else this.parsedLocus.fullState.type===QQ._MEETING_?this.fullState&&this.fullState.state===QQ.LOCUS.STATE.INACTIVE?(l.default.postEvent({event:JQ.eventType.REMOTE_ENDED,meetingId:this.meetingId}),this.emitScoped({file:"locus-info",function:"isMeetingActive"},QQ.EVENTS.DESTROY_MEETING,{shouldLeave:!1})):this.fullState.removed&&(l.default.postEvent({event:JQ.eventType.REMOTE_ENDED,meetingId:this.meetingId}),this.emitScoped({file:"locus-info",function:"isMeetingActive"},QQ.EVENTS.DESTROY_MEETING,{shouldLeave:!1})):u.default.logger.warn("LocusInfo#isMeetingActive-> Meeting Type is unknown.")}},{key:"compareAndUpdate",value:function(){(this.compareAndUpdateFlags.compareSelfAndHost||this.compareAndUpdateFlags.compareHostAndSelf)&&this.compareSelfAndHost()}},{key:"compareSelfAndHost",value:function(){this.parsedLocus.self.selfIdentity===this.parsedLocus.host.hostId&&this.parsedLocus.self.moderator?this.emitScoped({file:"locus-info",function:"compareSelfAndHost"},QQ.EVENTS.LOCUS_INFO_CAN_ASSIGN_HOST,{canAssignHost:!0}):this.emitScoped({file:"locus-info",function:"compareSelfAndHost"},QQ.EVENTS.LOCUS_INFO_CAN_ASSIGN_HOST,{canAssignHost:!1})}},{key:"updateParticipants",value:function(e){this.emitScoped({file:"locus-info",function:"updateParticipants"},QQ.EVENTS.LOCUS_INFO_UPDATE_PARTICIPANTS,{participants:e,selfIdentity:this.parsedLocus.self&&this.parsedLocus.self.selfIdentity,selfId:this.parsedLocus.self&&this.parsedLocus.self.selfId,hostId:this.parsedLocus.host&&this.parsedLocus.host.hostId})}},{key:"updateControls",value:function(e){e&&!(0,s.default)(this.controls,e)&&(this.controls=e)}},{key:"updateConversationUrl",value:function(e){e&&!(0,s.default)(this.conversationUrl,e)&&(this.conversationUrl=e,this.updateMeeting({conversationUrl:e}))}},{key:"updateCreated",value:function(e){e&&!(0,s.default)(this.created,e)&&(this.created=e)}},{key:"updateFullState",value:function(e){if(e&&!(0,s.default)(this.fullState,e)){var t=d.default.getFullState(this.fullState,e);this.updateMeeting(t.current),t.updates.meetingTypeChangedTo&&this.emitScoped({file:"locus-info",function:"updateFullState"},QQ.LOCUSINFO.EVENTS.FULL_STATE_TYPE_UPDATE,{type:t.current.type}),this.parsedLocus.fullState=t.current,this.fullState=e}}},{key:"updateHostInfo",value:function(e){if(e&&!(0,s.default)(this.host,e)){var t=h.default.getHosts(this.host,e);this.updateMeeting(t.current),this.parsedLocus.host=t.current,t.updates.isNewHost&&(this.compareAndUpdateFlags.compareSelfAndHost=!0,this.emitScoped({file:"locus-info",function:"updateHostInfo"},QQ.EVENTS.LOCUS_INFO_UPDATE_HOST,{newHost:t.current,oldHost:t.previous})),this.host=e}else this.compareAndUpdateFlags.compareSelfAndHost=!1}},{key:"updateMeetingInfo",value:function(e,t){if(e&&(!(0,s.default)(this.info,e)||!(0,s.default)(f.default.parsePolicy(e),f.default.parsePolicy(this.info))||!(0,s.default)(f.default.parseModerator(e)||f.default.parseModerator(e)))){var r=f.default.getInfos(this.parsedLocus.info,e);this.emitScoped({file:"locus-info",function:"updateMeetingInfo"},QQ.LOCUSINFO.EVENTS.MEETING_INFO_UPDATED,{info:r.current,self:t}),r.updates.isLocked&&this.emitScoped({file:"locus-info",function:"updateMeetingInfo"},QQ.LOCUSINFO.EVENTS.MEETING_LOCKED,e),r.updates.isUnlocked&&this.emitScoped({file:"locus-info",function:"updateMeetingInfo"},QQ.LOCUSINFO.EVENTS.MEETING_UNLOCKED,e),this.info=e,this.parsedLocus.info=r.current,this.updateMeeting(r.current)}}},{key:"updateMediaShares",value:function(e){if(e&&!(0,s.default)(this.mediaShares,e)){var t=v.default.getMediaShares(this.mediaShares,e);this.updateMeeting(t.current),this.emitScoped({file:"locus-info",function:"updateMediaShares"},QQ.EVENTS.LOCUS_INFO_UPDATE_MEDIA_SHARES,{current:t.current,previous:t.previous}),this.parsedLocus.mediaShares=t.current,this.mediaShares=e}}},{key:"updateParticipantsUrl",value:function(e){e&&!(0,s.default)(this.participantsUrl,e)&&(this.participantsUrl=e)}},{key:"updateReplace",value:function(e){e&&!(0,s.default)(this.replace,e)&&(this.replace=e)}},{key:"updateSelf",value:function(e,t){if(e&&!(0,s.default)(this.self,e)){var r=p.default.getSelves(this.self,e,this.webex.internal.device.url);this.updateMeeting(r.current),this.parsedLocus.self=r.current,this.parsedLocus.states[this.parsedLocus.states.length-1]!==r.current.state&&this.parsedLocus.states.push(r.current.state);var n=p.default.getSipUrl(this.getLocusPartner(t,e),this.parsedLocus.fullState.type,this.parsedLocus.info.sipUri);n.sipUri&&this.updateMeeting(n),r.updates.moderatorChanged?this.compareAndUpdateFlags.compareHostAndSelf=!0:this.compareAndUpdateFlags.compareHostAndSelf=!1,r.updates.moderatorChanged&&this.emitScoped({file:"locus-info",function:"updateSelf"},QQ.LOCUSINFO.EVENTS.SELF_MODERATOR_CHANGED,e),r.updates.mutedByOthers&&this.emitScoped({file:"locus-info",function:"updateSelf"},QQ.LOCUSINFO.EVENTS.SELF_MUTED_BY_OTHERS,e),r.updates.isUnadmittedGuest&&this.emitScoped({file:"locus-info",function:"updateSelf"},QQ.LOCUSINFO.EVENTS.SELF_UNADMITTED_GUEST,e),r.updates.isAdmittedGuest&&this.emitScoped({file:"locus-info",function:"updateSelf"},QQ.LOCUSINFO.EVENTS.SELF_ADMITTED_GUEST,e),this.emitScoped({file:"locus-info",function:"updateSelf"},QQ.EVENTS.LOCUS_INFO_UPDATE_SELF,{oldSelf:r.previous,newSelf:r.current}),this.parsedLocus.self=r.current,this.self=e}else this.compareAndUpdateFlags.compareHostAndSelf=!1}},{key:"updateLocusUrl",value:function(e){e&&this.url!==e&&(this.url=e,this.updateMeeting({locusUrl:e}),this.emitScoped({file:"locus-info",function:"updateLocusUrl"},QQ.EVENTS.LOCUS_INFO_UPDATE_URL,e))}},{key:"updateAclUrl",value:function(e){e&&!(0,s.default)(this.aclUrl,e)&&(this.aclUrl=e)}},{key:"updateBasequence",value:function(e){e&&!(0,s.default)(this.baseSequence,e)&&(this.baseSequence=e)}},{key:"updateSequence",value:function(e){e&&!(0,s.default)(this.sequence,e)&&(this.sequence=e)}},{key:"updateMemberShip",value:function(e){e&&!(0,s.default)(this.membership,e)&&(this.membership=e)}},{key:"updateIdentifiers",value:function(e){e&&!(0,s.default)(this.identities,e)&&(this.identities=e)}}]),t}(c.default);t.default=y});r(fZ);var dZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(_f),n=c(zy),i=c($y),a=c($Q),o=c(EJ),s=c(yJ),u=c(_J);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){(0,n.default)(this,e),this.status=QQ.RECONNECTION.STATE.DEFAULT_STATUS,this.tryCount=QQ.RECONNECTION.STATE.DEFAULT_TRY_COUNT,this.webex=t.webex,this.configure(t)}return(0,i.default)(e,[{key:"configure",value:function(e){this.backOff=e.config.reconnection.retry.backOff.start}},{key:"reset",value:function(){this.status=QQ.RECONNECTION.STATE.DEFAULT_STATUS,this.tryCount=QQ.RECONNECTION.STATE.DEFAULT_TRY_COUNT}},{key:"validate",value:function(e){return e.config.reconnection.enabled?e.locusInfo&&e.locusInfo.fullState&&e.locusInfo.fullState.state===QQ._ACTIVE_&&e.locusInfo.fullState.active?e.webex.internal.mercury.connected?this.status!==QQ.RECONNECTION.STATE.DEFAULT_STATUS||this.status!==QQ.RECONNECTION.STATE.COMPLETE||new o.default("Multiple reconnections cannot occur concurrently"):new o.default("mercury is not connected, cannot reconnect"):new o.default("locus server for this call is not active, cannot reconnect"):new o.default("Reconnection is not enabled.")}},{key:"reconnect",value:function(e){var t=this.validate(e);return!0===t?this.execute(e):r.default.reject(t)}},{key:"execute",value:function(e){var t=this;return this.status=QQ.RECONNECTION.STATE.IN_PROGRESS,this.media(e).then(function(e){return a.default.logger.log("ReconnectionManager->execute#Media reestablished at: "+new Date),t.status=QQ.RECONNECTION.STATE.COMPLETE,r.default.resolve(e)}).catch(function(n){if(a.default.logger.error("ReconnectionManager->execute#Media reestablishment failed at: "+new Date),t.tryCount>e.config.reconnection.retry.times)return t.status=QQ.RECONNECTION.STATE.FAILURE,r.default.reject(new o.default(n));setTimeout(function(){return t.reconnect(e)},t.backOff*=e.config.reconnection.retry.backOff.rate)})}},{key:"reconnectMedia",value:function(e){var t=null;return t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?u.default.attachMedia(e.mediaProperties).then(function(t){return e.setRemoteStream(t)}):u.default.reconnectMedia(e.mediaProperties.peerConnection,e.meetingId),r.default.resolve(t).then(function(){return e.roap.sendRoapMediaRequest({sdp:e.mediaProperties.peerConnection.sdp,roapSeq:e.roapSeq,meeting:e})})}},{key:"media",value:function(t){return this.tryCount+=1,a.default.logger.log("Reconnection->media#Begin reestablishment of media at "+new Date),this.reconnectMedia(t).then(function(e){return r.default.resolve(e)}).catch(function(r){return a.default.logger.warn("Reconnection->media#Media could not reuse peer connection, failed with "+r),e.cleanup(t),t.mediaProperties.reInitiatePeerconnection(),t.reconnectMedia(!0).catch(function(e){a.default.logger.error("ReconnectionManager->media#Error reconnecting , error: "+e)})})}}],[{key:"cleanup",value:function(e){s.default.close(e.mediaProperties.peerConnection),e.mediaProperties.unsetPeerConnection()}}]),e}();t.default=l});r(dZ);var pZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(_f),n=c(hT),i=c(zy),a=c($y),o=c(vT),s=c(mT),u=c($Q);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"joinMeeting",value:function(e){var t=e.sipUri,r=e.deviceUrl,n=e.locusUrl,i=e.resourceId,a=e.correlationId,o=e.ensureConversation,s=e.moderator,u=e.hostPin,c=e.moveToResource,l=e.roapMessage,f="",d={device:{url:r,deviceType:this.config.meetings.deviceType},usingResource:i||null,moveMediaToResource:i&&c||!1,correlationId:a,respOnlySdp:!0,allowMultiDevice:!0,ensureConversation:o||!1,supportsNativeLobby:1};return void 0!==s&&(d.moderator=s),void 0!==u&&(d.hostPIN=u),n?f=n+"/"+QQ.PARTICIPANT:t&&(f=this.webex.internal.device.services.locusServiceUrl+"/"+QQ.LOCI+"/"+QQ.CALL,d.invitee={address:t}),f=f.concat("?"+QQ.ALTERNATE_REDIRECT_TRUE),i===t&&(d.callPreferences={requestedMedia:[QQ._SLIDES_]}),l&&(d.localMedias=l.localMedias),this.webex.request({method:QQ.HTTP_VERBS.POST,uri:f,body:d})}},{key:"syncMeeting",value:function(e){var t=e.desync,r=e.syncUrl;return t&&(r=r.concat(r.split("?")[1]?"&":"?").concat(QQ.LOCUS.SYNCDEBUG+"="+t)),this.request({method:QQ.HTTP_VERBS.GET,uri:r}).catch(function(e){return u.default.logger.error("MeetingRequest->syncMeeting#Error syncing meeting, error "+e),e})}},{key:"getFullLocus",value:function(e){var t=e.locusUrl,n=e.desync;return t?(n&&(t+="?"+QQ.LOCUS.SYNCDEBUG+"="+n),this.request({method:QQ.HTTP_VERBS.GET,uri:t}).catch(function(e){return u.default.logger.error("MeetingRequest->getFullLocus#Error getting full locus, error "+e),e})):r.default.reject()}},{key:"leaveMeeting",value:function(e){var t=e.locusUrl+"/"+QQ.PARTICIPANT+"/"+e.selfId+"/"+QQ.LEAVE,r={device:{deviceType:this.config.meetings.deviceType,url:e.deviceUrl},usingResource:e.resourceId||null,correlationId:e.correlationId};return this.request({method:QQ.HTTP_VERBS.PUT,uri:t,body:r})}},{key:"acknowledgeMeeting",value:function(e){var t=e.locusUrl+"/"+QQ.PARTICIPANT+"/"+QQ.ALERT,r={device:{deviceType:this.config.meetings.deviceType,url:e.deviceUrl},correlationId:e.id};return this.request({method:QQ.HTTP_VERBS.PUT,uri:t,body:r})}},{key:"recordMeeting",value:function(e){var t=e.locusUrl+"/"+QQ.CONTROLS,r={record:{recording:e.recording,paused:e.paused}};return this.request({method:QQ.HTTP_VERBS.PATCH,uri:t,body:r})}},{key:"lockMeeting",value:function(e){var t=e.locusUrl+"/"+QQ.CONTROLS,r={lock:{locked:e.lock}};return this.request({method:QQ.HTTP_VERBS.PATCH,uri:t,body:r})}},{key:"declineMeeting",value:function(e){var t=e.locusUrl+"/"+QQ.PARTICIPANT+"/"+QQ.DECLINE,r={device:{deviceType:this.config.meetings.deviceType,url:e.deviceUrl},reason:e.reason};return this.request({method:QQ.HTTP_VERBS.PUT,uri:t,body:r})}},{key:"remoteAudioVideoToggle",value:function(e){var t=e.locusUrl+"/"+QQ.PARTICIPANT+"/"+e.selfId+"/"+QQ.MEDIA,r={device:{deviceType:this.config.meetings.deviceType,url:e.deviceUrl},usingResource:e.resourceId||null,correlationId:e.correlationId,respOnlySdp:!0,localMedias:e.localMedias};return this.request({method:QQ.HTTP_VERBS.PUT,uri:t,body:r})}},{key:"changeMeetingFloor",value:function(e){var t={disposition:e.disposition};return e.disposition===QQ.FLOOR_ACTION.GRANTED&&(t={beneficiary:{url:e.personUrl,devices:[{deviceType:this.config.meetings.deviceType,url:e.deviceUrl}]},disposition:e.disposition,requester:{url:e.personUrl}}),this.request({uri:e.uri,method:QQ.HTTP_VERBS.PUT,body:{floor:t,resourceUrl:e.resourceUrl}})}}]),t}(XR.StatelessWebexPlugin);t.default=l});r(pZ);var hZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=eJ)&&r.__esModule?r:{default:r};var i={isUser:function(e){return e&&e.type===QQ._USER_},isModerator:function(e){return e&&e.moderator},isGuest:function(e){return e&&e.guest},isDevice:function(e){return e&&e.type===QQ._RESOURCE_ROOM_},isModeratorAssignmentProhibited:function(e){return e&&e.moderatorAssignmentNotAllowed},isSame:function(e,t){return e&&(e.id===t||e.person&&e.person.id===t)},isAssociatedSame:function(e,t){return e&&e.associatedUsers&&e.associatedUsers.some(function(e){return e.id===t||e.person&&e.person.id===t})},isNotAdmitted:function(e,t,r){return e&&e.guest&&(e.devices&&e.devices[0]&&e.devices[0].intent&&e.devices[0].intent.type===QQ._WAIT_&&t&&r===QQ._IN_LOBBY_||!r===QQ._IN_MEETING_)},isAudioMuted:function(e){if(!e)throw new n.default("Audio could not be processed, participant is undefined.");var t=i.isMuted(e.status,QQ.AUDIO_STATUS);if(e.controls&&e.controls.audio){if(e.controls.audio.muted)return!0;if(t)return!0}return!1},isVideoMuted:function(e){if(!e)throw new n.default("Video could not be processed, participant is undefined.");return i.isMuted(e.status,QQ.VIDEO_STATUS)},isMuted:function(e,t){if(e){if(e[t]===QQ._RECEIVE_ONLY_)return!0;if(e[t]===QQ._SEND_RECEIVE_)return!1}return null},isRecording:function(e){if(!e)throw new n.default("Recording could not be processed, participant is undefined.");return!(!e.controls||!e.controls.localRecord)&&e.controls.localRecord.recording},isRemovable:function(e,t,r,n){return!t&&!e&&(n!==QQ._CALL_&&!!r)},isMutable:function(e,t,r,n,i){return!!r&&(!n&&(i!==QQ._CALL_&&!(!e&&!t)))},extractStatus:function(e){return e&&e.devices&&e.devices.length?e.state===QQ._JOINED_?QQ._IN_MEETING_:e.state===QQ._IDLE_?e.devices&&e.devices.length>0&&e.devices.find(function(e){return e.intent&&(e.intent.type===QQ._WAIT_||e.intent.type===QQ._OBSERVE_)})?QQ._IN_LOBBY_:QQ._NOT_IN_MEETING_:(e.state,QQ._LEFT_,QQ._NOT_IN_MEETING_):QQ._NOT_IN_MEETING_},extractId:function(e){return e?e.id:null},extractName:function(e){return e&&e.person?e.person.name:null},extractEmail:function(e){return e&&e.person?e.person.email:null}};t.default=i});r(hZ);var vZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(zy),n=a($y),i=a(hZ);function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.default)(this,e),this.namespace=QQ.MEETINGS,this.participant=null,this.id=null,this.name=null,this.email=null,this.isAudioMuted=null,this.isVideoMuted=null,this.isSelf=null,this.isHost=null,this.isGuest=null,this.isInLobby=null,this.isInMeeting=null,this.isNotAdmitted=null,this.isContentSharing=null,this.status=null,this.isDevice=null,this.isUser=null,this.associatedUser=null,this.isRecording=null,this.isMutable=null,this.isRemovable=null,this.type=null,this.isModerator=null,this.isModeratorAssignmentProhibited=null,this.processParticipant(t),this.processParticipantOptions(t,n),this.processMember()}return(0,n.default)(e,[{key:"processParticipant",value:function(e){this.participant=e,e&&(this.id=i.default.extractId(e),this.name=i.default.extractName(e),this.email=i.default.extractEmail(e),this.isAudioMuted=i.default.isAudioMuted(e),this.isVideoMuted=i.default.isVideoMuted(e),this.isRecording=i.default.isRecording(e),this.isGuest=i.default.isGuest(e),this.isUser=i.default.isUser(e),this.isDevice=i.default.isDevice(e),this.isModerator=i.default.isModerator(e),this.isModeratorAssignmentProhibited=i.default.isModeratorAssignmentProhibited(e),this.processStatus(e),this.isNotAdmitted=i.default.isNotAdmitted(e,this.isGuest,this.status))}},{key:"processParticipantOptions",value:function(e,t){e&&t&&(this.processIsSelf(e,t.selfId),this.processIsHost(e,t.hostId),this.processIsContentSharing(e,t.contentSharingId),this.processType(t.type))}},{key:"processMember",value:function(){this.isRemovable=i.default.isRemovable(this.isSelf,this.isGuest,this.isInMeeting,this.type),this.isMutable=i.default.isMutable(this.isSelf,this.isDevice,this.isInMeeting,this.isAudioMuted,this.type)}},{key:"processStatus",value:function(e){switch(this.status=i.default.extractStatus(e),this.status){case QQ._IN_LOBBY_:this.isInLobby=!0,this.isInMeeting=!1;break;case QQ._IN_MEETING_:this.isInLobby=!1,this.isInMeeting=!0;break;case QQ._NOT_IN_MEETING_:this.isInLobby=!1,this.isInMeeting=!1;break;default:this.isInLobby=!1,this.isInMeeting=!1}}},{key:"setIsContentSharing",value:function(e){this.isContentSharing=e}},{key:"setIsHost",value:function(e){this.isHost=e}},{key:"setIsSelf",value:function(e){this.isSelf=e}},{key:"processIsContentSharing",value:function(e,t){i.default.isUser(e)?this.isContentSharing=i.default.isSame(e,t):i.default.isDevice(e)&&(this.isContentSharing=i.default.isAssociatedSame(e,t))}},{key:"processIsSelf",value:function(e,t){i.default.isUser(e)?this.isSelf=i.default.isSame(e,t):i.default.isDevice(e)&&(this.isSelf=i.default.isAssociatedSame(e,t),this.associatedUser=t)}},{key:"processIsHost",value:function(e,t){i.default.isUser(e)?this.isHost=i.default.isSame(e,t):i.default.isDevice(e)&&(this.isHost=i.default.isAssociatedSame(e,t))}},{key:"processType",value:function(e){this.type=e}}]),e}();t.default=o});r(vZ);var mZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(zy),n=i($y);function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){(0,r.default)(this,e),this.namespace=QQ.MEETINGS,this.members={}}return(0,n.default)(e,[{key:"set",value:function(e,t){this.members[e]=t}},{key:"setAll",value:function(e){this.members=e}},{key:"get",value:function(e){return this.members[e]}},{key:"getAll",value:function(){return this.members}}]),e}();t.default=a});r(mZ);var gZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={generateAddMemberOptions:function(e,t,r){return{invitee:e,locusUrl:t,alertIfActive:r}},generateAdmitMemberOptions:function(e,t){return{locusUrl:t,memberIds:e}},getAddMemberBody:function(e){return{invitees:[{address:e.invitee.emailAddress||e.invitee.email}],alertIfActive:e.alertIfActive}},getAdmitMemberRequestBody:function(e){return{admit:{participantIds:e.memberIds}}},getAdmitMemberRequestParams:function(e){var t=r.getAdmitMemberRequestBody(e),n=e.locusUrl+"/"+QQ.CONTROLS;return{method:QQ.HTTP_VERBS.PUT,uri:n,body:t}},getAddMemberRequestParams:function(e){var t=r.getAddMemberBody(e);return{method:QQ.HTTP_VERBS.PUT,uri:e.locusUrl,body:t}},isInvalidInvitee:function(e){return!e||!e.email&&!e.emailAddress||!QQ.VALID_EMAIL_ADDRESS.test(e.email||e.emailAddress)},getRemoveMemberRequestParams:function(e){var t={reason:e.reason},r=e.locusUrl+"/"+QQ.PARTICIPANT+"/"+e.memberId+"/"+QQ.LEAVE;return{method:QQ.HTTP_VERBS.PUT,uri:r,body:t}},generateTransferHostMemberOptions:function(e,t,r){return{moderator:t,locusUrl:r,memberId:e}},generateRemoveMemberOptions:function(e,t){return{reason:QQ._FORCED_,memberId:e,locusUrl:t}},generateMuteMemberOptions:function(e,t,r){return{memberId:e,muted:t,locusUrl:r}},getMuteMemberRequestParams:function(e){var t={audio:{muted:e.muted}},r=e.locusUrl+"/"+QQ.PARTICIPANT+"/"+e.memberId+"/"+QQ.CONTROLS;return{method:QQ.HTTP_VERBS.PATCH,uri:r,body:t}},getTransferHostToMemberRequestParams:function(e){var t={role:{moderator:e.moderator}},r=e.locusUrl+"/"+QQ.PARTICIPANT+"/"+e.memberId+"/"+QQ.CONTROLS;return{method:QQ.HTTP_VERBS.PATCH,uri:r,body:t}}};t.default=r});r(gZ);var yZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(hT),n=c(zy),i=c($y),a=c(vT),o=c(mT),s=c(eJ),u=c(gZ);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){var e,i,o,s;(0,n.default)(this,t);for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];return i=o=(0,a.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(c))),o.namespace=QQ.MEETINGS,s=i,(0,a.default)(o,s)}return(0,o.default)(t,e),(0,i.default)(t,[{key:"addMembers",value:function(e){if(e&&e.invitee&&e.invitee.emailAddress&&e.invitee.email&&e.locusUrl)throw new s.default("invitee must be passed and the associated locus url for this meeting object must be defined.");var t=u.default.getAddMemberRequestParams(e);return this.request(t)}},{key:"admitMember",value:function(e){if(!e||!e.locusUrl||!e.memberIds)throw new s.default("memberIds must be an array passed and the associated locus url for this meeting object must be defined.");var t=u.default.getAdmitMemberRequestParams(e);return this.request(t)}},{key:"removeMember",value:function(e){if(!e||!e.locusUrl||!e.memberId)throw new s.default("memberId must be defined, and the associated locus url for this meeting object must be defined.");var t=u.default.getRemoveMemberRequestParams(e);return this.request(t)}},{key:"muteMember",value:function(e){if(!e||!e.locusUrl||!e.memberId)throw new s.default("memberId must be defined, and the associated locus url for this meeting object must be defined.");var t=u.default.getMuteMemberRequestParams(e);return this.request(t)}},{key:"transferHostToMember",value:function(e){if(!(e&&e.locusUrl&&e.memberId&&e.moderator))throw new s.default("memberId must be defined, the associated locus url, and the moderator for this meeting object must be defined.");var t=u.default.getTransferHostToMemberRequestParams(e);return this.request(t)}}]),t}(XR.StatelessWebexPlugin);t.default=l});r(yZ);var EZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=m(_f),n=m(hT),i=m(zy),a=m($y),o=m(vT),s=m(mT),u=m(vm),c=m(rJ),l=m(vZ),f=m($Q),d=m(eJ),p=m(mZ),h=m(yZ),v=m(gZ);function m(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e,r){(0,i.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,n.default)(t)).call(this,{},r));return a.namespace=QQ.MEETINGS,a.membersRequest=new h.default({},r),a.membersCollection=new p.default,a.locusUrl=null,a.hostId=null,a.type=null,a.selfId=null,a.mediaShareContentId=null,a}return(0,s.default)(t,e),(0,a.default)(t,[{key:"locusSelfUpdate",value:function(e){var t=null,r=null;if(e&&(e.newSelf&&(t=e.newSelf.id),e.oldSelf&&(r=e.oldSelf.id)),t){var n=this.membersCollection.get(t);n&&n.setIsSelf(!0)}if(r){var i=this.membersCollection.get(r);i&&i.setIsSelf(!1)}this.selfId=t,c.default.trigger(this,{file:"members",function:"locusSelfUpdate"},QQ.EVENT_TRIGGERS.MEMBERS_SELF_UPDATE,{activeSelfId:t,endedSelfId:r})}},{key:"locusHostUpdate",value:function(e){var t=null,r=null;if(e&&(e.newHost&&(t=e.newHost.id),e.oldHost&&(r=e.oldHost.id)),t){var n=this.membersCollection.get(t);n&&n.setIsHost(!0)}if(r){var i=this.membersCollection.get(r);i&&i.setIsHost(!1)}this.hostId=t,c.default.trigger(this,{file:"members",function:"locusHostUpdate"},QQ.EVENT_TRIGGERS.MEMBERS_HOST_UPDATE,{activeHostId:t,endedHostId:r})}},{key:"locusParticipantsUpdate",value:function(e){if(e){var t=this.handleLocusInfoUpdatedParticipants(e),r=this.handleMembersUpdate(t);c.default.trigger(this,{file:"members",function:"locusParticipantsUpdate"},QQ.EVENT_TRIGGERS.MEMBERS_UPDATE,{delta:t,full:r})}}},{key:"locusMediaSharesUpdate",value:function(e){var t=e.current,r=e.previous,n=null,i=null;if(t&&t.contentId&&(t.disposition===QQ.FLOOR_ACTION.GRANTED?(n=t.contentId,i=r&&r.contentId):t.disposition===QQ.FLOOR_ACTION.RELEASED&&(i=t.contentId)),n){var a=this.membersCollection.get(n);a&&a.setIsContentSharing(!0)}if(i){var o=this.membersCollection.get(i);o&&o.setIsContentSharing(!1)}this.mediaShareContentId=n,c.default.trigger(this,{file:"members",function:"locusMediaSharesUpdate"},QQ.EVENT_TRIGGERS.MEMBERS_CONTENT_UPDATE,{activeContentSharingId:n,endedContentSharingId:i})}},{key:"locusUrlUpdate",value:function(e){e&&this.setLocusUrl(null,e)}},{key:"locusFullStateTypeUpdate",value:function(e){e&&this.setType(e)}},{key:"handleMembersUpdate",value:function(e){return e&&(e.updated&&this.constructMembers(e.updated),e.added&&this.constructMembers(e.added)),this.membersCollection.getAll()}},{key:"constructMembers",value:function(e){var t=this;e.forEach(function(e){t.membersCollection.set(e.id,e)})}},{key:"handleLocusInfoUpdatedParticipants",value:function(e){return this.hostId=e.hostId||this.hostId,this.selfId=e.selfId||this.selfId,e.participants||f.default.logger.warn("members/index->handleLocusInfoUpdatedParticipants#participants payload is missing."),this.update(e.participants)}},{key:"setLocusUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t)this.locusUrl=t;else{if(!e||!e.locusUrl&&!e.url)throw new d.default("Setting locusUrl for the Members module should be done with a locus object or locusUrl");this.locusUrl=e.locusUrl||e.url}}},{key:"setHostId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t)this.hostId=t;else{if(!e)throw new d.default("Setting hostid for the Members module should be done with a locus object or hostId");this.hostId=e&&e.owner&&e.owner.info?e.owner.info:null}}},{key:"setType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t)this.type=t;else{if(!e)throw new d.default("Setting type for the Members module should be done with a fullstate object or type string");this.type=e&&e.type||null}}},{key:"setSelfId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t)this.selfId=t;else{if(!e)throw new d.default("Setting selfid for the Members module should be done with a locus object or selfId");this.selfId=e&&e.self&&e.self.person&&e.self.person.id?e.self.person.id:null}}},{key:"setMediaShareContentId",value:function(e,t){if(t)this.mediaShareContentId=t;else{if(!e)throw new d.default("Setting hostid for the Members module should be done with a locus object or hostId");var r=e.mediaShares&&e.mediaShares.length&&e.mediaShares.find(function(e){return e.name===QQ.CONTENT});this.mediaShareContentId=r&&r.floor&&r.floor.beneficiary&&r.floor.beneficiary.id||null}}},{key:"update",value:function(e){var t=this,r={added:[],updated:[]};return e&&e.forEach(function(e){e.hideInRoster||(t.membersCollection.get(e.id)?r.updated.push(new l.default(e,{selfId:t.selfId,hostId:t.hostId,contentSharingId:t.mediaShareContentId,type:t.type})):r.added.push(new l.default(e,{selfId:t.selfId,hostId:t.hostId,contentSharingId:t.mediaShareContentId,type:t.type})))}),r}},{key:"addMember",value:function(e,t){if(!this.locusUrl)return r.default.reject(new d.default("The associated locus url for this meeting object must be defined."));if(v.default.isInvalidInvitee(e))return r.default.reject(new d.default("The invitee must be defined with either a valid email, or emailAddress property."));var n=v.default.generateAddMemberOptions(e,this.locusUrl,t);return this.membersRequest.addMembers(n)}},{key:"admitMembers",value:function(e){if((0,u.default)(e))return r.default.reject(new d.default("No member ids provided to admit."));var t=v.default.generateAdmitMemberOptions(e,this.locusUrl);return this.membersRequest.admitMember(t)}},{key:"removeMember",value:function(e){if(!this.locusUrl)return r.default.reject(new d.default("The associated locus url for this meeting object must be defined."));if(!e)return r.default.reject(new d.default("The member id must be defined to remove the member."));var t=v.default.generateRemoveMemberOptions(e,this.locusUrl);return this.membersRequest.removeMember(t)}},{key:"muteMember",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.locusUrl)return r.default.reject(new d.default("The associated locus url for this meetings members object must be defined."));if(!e)return r.default.reject(new d.default("The member id must be defined to mute the member."));var n=v.default.generateMuteMemberOptions(e,t,this.locusUrl);return this.membersRequest.muteMember(n)}},{key:"transferHostToMember",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.locusUrl)return r.default.reject(new d.default("The associated locus url for this meetings members object must be defined."));if(!e)return r.default.reject(new d.default("The member id must be defined to transfer host to the member."));var n=v.default.generateTransferHostMemberOptions(e,t,this.locusUrl);return this.membersRequest.transferHostToMember(n)}}]),t}(XR.StatelessWebexPlugin);t.default=g});r(EZ);var bZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(zy),n=i($y);function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){(0,r.default)(this,e),this.namespace=QQ.MEETINGS,this.canLock=null,this.canUnlock=null,this.canAssignHost=null}return(0,n.default)(e,[{key:"setCanLock",value:function(e){this.canLock=e}},{key:"setCanUnlock",value:function(e){this.canUnlock=e}},{key:"setCanAssignHost",value:function(e){this.canAssignHost=e}},{key:"getCanLock",value:function(){return this.canLock}},{key:"getCanUnlock",value:function(){return this.canUnlock}},{key:"getCanAssignHost",value:function(){return this.canAssignHost}}]),e}();t.default=a});r(bZ);var _Z=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=M(Af),n=M(kC),i=M(fI),a=M(_f),o=M(hT),s=M(zy),u=M($y),c=M(vT),l=M(mT),f=M(AR),d=M($Q),p=M(rJ),h=M(KJ),v=M(_J),m=M(zJ),g=M(YJ),y=M(XJ),E=M($J),b=M(fZ),_=M(yJ),S=M(ZQ),T=M(dZ),w=M(pZ),I=M(EZ),A=M(UJ),C=M(HJ),x=M(PJ),O=M(cJ),R=M(EJ),N=M(eJ),k=M(gJ),P=M(bZ);function M(e){return e&&e.__esModule?e:{default:e}}var D=function(e){function t(e,r){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,{},r));return n.namespace=QQ.MEETINGS,n.getMediaStreams=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v.default.getUserMedia(e,t).then(function(e){return e[0]||e[1]?a.default.resolve(e):a.default.reject(new k.default("Was not able to retrive media Stream"))})},n.getDevices=function(){return v.default.getDevices()},n.attrs=e,n.options=r,n.id=f.default.v4(),n.correlationId=n.id,n.userId=e.userId,n.resource=e.resource,n.deviceUrl=e.deviceUrl,n.roapSeq=QQ.ROAP_SEQ_PRE,n.meetingInfo={},n.members=new I.default({},{parent:n.webex}),n.roap=new h.default({},{parent:n.webex}),n.reconnectionManager=new T.default(n),n.audio=null,n.video=null,n.meetingFiniteStateMachine=g.default.create(n),n.stats=null,n.internalStats=null,n.convoId=null,n.locusUrl=e.locus&&e.locus.url||null,n.sipUri=null,n.partner=null,n.type=null,n.owner=null,n.hostId=null,n.policy=null,n.meetingRequest=new w.default({},r),n.locusInfo=new b.default(n.updateMeetingObject.bind(n),e.locus?e.locus:{},n.webex,n.id),n.mediaProperties=new m.default,n.inMeetingActions=new P.default,n.isSharing=!1,n.callEvents=[],n.setUpLocusInfoListeners(),n}return(0,l.default)(t,e),(0,u.default)(t,[{key:"setUpLocusInfoListeners",value:function(){this.setUpLocusInfoSelfListener(),this.setUpLocusInfoMeetingListener(),this.setUpLocusFullStateListener(),this.setUpLocusUrlListener(),this.setUpLocusHostListener(),this.setUpLocusSelfListener(),this.setUpLocusParticipantsListener(),this.setUpLocusMediaSharesListener(),this.setUpLocusInfoMeetingInfoListener(),this.setUpLocusInfoAssignHostListener()}},{key:"setUpLocusInfoAssignHostListener",value:function(){var e=this;this.locusInfo.on(QQ.EVENTS.LOCUS_INFO_CAN_ASSIGN_HOST,function(t){p.default.trigger(e,{file:"meeting/index",function:"setUpLocusInfoAssignHostListener"},QQ.EVENT_TRIGGERS.MEETING_ACTIONS_UPDATE,{canAssignHost:t.canAssignHost,canLock:e.inMeetingActions.getCanLock(),canUnlock:e.inMeetingActions.getCanUnlock()}),e.inMeetingActions.setCanAssignHost(t.canAssignHost)})}},{key:"setUpLocusFullStateListener",value:function(){var e=this;this.locusInfo.on(QQ.LOCUSINFO.EVENTS.FULL_STATE_TYPE_UPDATE,function(t){e.members.locusFullStateTypeUpdate(t)})}},{key:"sendCallAnalyzerMetrics",value:function(e){var t=e.event,r=e.trackingId,n=e.locus;if(t){var i={correlationId:this.correlationId,userId:this.userId,deviceId:this.deviceUrl};n?(i.locusId=n.url.split("/").pop(),i.locusStartTime=n.fullState.lastActive):this.locusUrl&&this.locusInfo.fullState&&(i.locusId=this.locusUrl&&this.locusUrl.split("/").pop(),i.locusStartTime=this.locusInfo.fullState&&this.locusInfo.fullState.lastActive),e.trackingId&&(i.trackingId=r);var a=S.default.initPayload(e.event,i,e);this.webex.internal.metrics.submitCallDiagnosticEvents(a)}else d.default.logger.error("Error [Call Analyzer Event",t||"","]: invalid identifers or event type! "+this.correlationId)}},{key:"setUpLocusSelfListener",value:function(){var e=this;this.locusInfo.on(QQ.EVENTS.LOCUS_INFO_UPDATE_SELF,function(t){e.members.locusSelfUpdate(t)})}},{key:"setUpLocusHostListener",value:function(){var e=this;this.locusInfo.on(QQ.EVENTS.LOCUS_INFO_UPDATE_HOST,function(t){e.members.locusHostUpdate(t)})}},{key:"setUpLocusParticipantsListener",value:function(){var e=this;this.locusInfo.on(QQ.EVENTS.LOCUS_INFO_UPDATE_PARTICIPANTS,function(t){e.members.locusParticipantsUpdate(t)})}},{key:"setUpLocusMediaSharesListener",value:function(){var e=this;this.locusInfo.on(QQ.EVENTS.LOCUS_INFO_UPDATE_MEDIA_SHARES,function(t){e.members.locusMediaSharesUpdate(t)})}},{key:"setUpLocusUrlListener",value:function(){var e=this;this.locusInfo.on(QQ.EVENTS.LOCUS_INFO_UPDATE_URL,function(t){e.members.locusUrlUpdate(t)})}},{key:"setUpLocusInfoMeetingInfoListener",value:function(){var e=this;this.locusInfo.on(QQ.LOCUSINFO.EVENTS.MEETING_LOCKED,function(t){t&&p.default.trigger(e,{file:"meeting/index",function:"setUpLocusInfoMeetingInfoListener"},QQ.EVENT_TRIGGERS.MEETING_LOCKED,{payload:t})}),this.locusInfo.on(QQ.LOCUSINFO.EVENTS.MEETING_UNLOCKED,function(t){t&&p.default.trigger(e,{file:"meeting/index",function:"setUpLocusInfoMeetingInfoListener"},QQ.EVENT_TRIGGERS.MEETING_UNLOCKED,{payload:t})}),this.locusInfo.on(QQ.LOCUSINFO.EVENTS.MEETING_INFO_UPDATED,function(t){if(t&&t.info){var r=void 0,n=void 0;t.self&&!t.self.moderator?(r=!1,n=!1):(r=A.default.canUserLock(t.info.moderator,t.info.policy),n=A.default.canUserUnlock(t.info.moderator,t.info.policy)),r&&!e.inMeetingActions.canLock&&p.default.trigger(e,{file:"meeting/index",function:"setUpLocusInfoMeetingInfoListener"},QQ.EVENT_TRIGGERS.MEETING_ACTIONS_UPDATE,{canLock:!0,canUnlock:!1,canAssignHost:e.inMeetingActions.getCanAssignHost()}),(n&&!e.inMeetingActions.canUnlock||!r)&&p.default.trigger(e,{file:"meeting/index",function:"setUpLocusInfoMeetingInfoListener"},QQ.EVENT_TRIGGERS.MEETING_ACTIONS_UPDATE,{canLock:!1,canUnlock:!0,canAssignHost:e.inMeetingActions.getCanAssignHost()}),e.inMeetingActions.setCanLock(r||!1),e.inMeetingActions.setCanUnlock(n||!1)}})}},{key:"setUpLocusInfoSelfListener",value:function(){var e=this;this.locusInfo.on(QQ.LOCUSINFO.EVENTS.SELF_MUTED_BY_OTHERS,function(t){t&&p.default.trigger(e,{file:"meeting/index",function:"setUpLocusInfoSelfListener"},QQ.EVENT_TRIGGERS.MEETING_SELF_MUTED_BY_OTHERS,{payload:t})}),this.locusInfo.on(QQ.LOCUSINFO.EVENTS.SELF_UNADMITTED_GUEST,function(t){t&&(p.default.trigger(e,{file:"meeting/index",function:"setUpLocusInfoSelfListener"},QQ.EVENT_TRIGGERS.MEETING_SELF_LOBBY_WAITING,{payload:t}),S.default.postEvent({event:JQ.eventType.LOBBY_ENTERED,meeting:e}))}),this.locusInfo.on(QQ.LOCUSINFO.EVENTS.SELF_ADMITTED_GUEST,function(t){t&&(p.default.trigger(e,{file:"meeting/index",function:"setUpLocusInfoSelfListener"},QQ.EVENT_TRIGGERS.MEETING_SELF_GUEST_ADMITTED,{payload:t}),S.default.postEvent({event:JQ.eventType.LOBBY_EXITED,meeting:e}))})}},{key:"setUpLocusInfoMeetingListener",value:function(){var e=this;this.locusInfo.on(QQ.EVENTS.REMOTE_ANSWERED_DECLINED,function(t){e.meetingFiniteStateMachine.remote(t)}),this.locusInfo.on(QQ.EVENTS.DESTROY_MEETING,function(t){e.wirelessShare&&e.mediaProperties.shareTrack&&(e.mediaProperties.shareTrack.onended=null,e.mediaProperties.shareTrack.stop()),t.shouldLeave?e.leave().then(function(){d.default.logger.warn("meeting/index->setUpLocusInfoMeetingListener:DESTROY_MEETING#The meeting has been left, but has not been destroyed, you should see a later event for leave.")}).catch(function(t){d.default.logger.error("meeting/index->setUpLocusInfoMeetingListener:DESTROY_MEETING#Issue with leave for meeting, meeting still in collection: "+e.meeting+", error: "+t)}):(A.default.cleanUp(e),p.default.trigger(e,{file:"meeting/index",function:"setUpLocusInfoMeetingListener"},QQ.EVENTS.DESTROY_MEETING,{response:t,meetingId:e.id}))})}},{key:"updateMeetingObject",value:function(e){var t=this;e&&(0,i.default)(e).length&&(0,i.default)(e).forEach(function(r){t[r]=e[r]})}},{key:"invite",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.members.addMember(e,t)}},{key:"admit",value:function(e){return this.members.admitMembers(e)}},{key:"remove",value:function(e){return this.members.removeMember(e)}},{key:"mute",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.members.muteMember(e,t)}},{key:"transfer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.members.transferHostToMember(e,t)}},{key:"getMembers",value:function(){return this.members}},{key:"getStats",value:function(e,t){return this.stats?t?(this.stats&&d.default.logger.log("Meeting:index#getStats --\x3e Overriding the previous stats object without destroying first can result in memory leaks."),this.createStats(e)):this.stats:this.createStats(e)}},{key:"createStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return O.default.generateOptions(e,QQ.STATS.CONFIG,this),e.config=QQ.STATS.CONFIG,this.stats=new x.default(this.attrs,this.options,e),this.stats}},{key:"stopStats",value:function(){this.stats&&(this.stats.destroySenders(),this.stats.destroyReceivers(),this.stats=null)}},{key:"isAudioMuted",value:function(){return this.audio&&this.audio.isMuted()}},{key:"isAudioSelf",value:function(){return this.audio&&this.audio.isSelf()}},{key:"isVideoMuted",value:function(){return this.video&&this.video.isMuted()}},{key:"isVideoSelf",value:function(){return this.video&&this.video.isSelf()}},{key:"parseMeetingInfo",value:function(e){!e||!e.body||e.errors&&e.errors.length>0||(this.convoId=e.body.convoId||this.convoId,this.locusUrl=e.body.locusUrl||this.locusUrl,this.setSipUri(e.body.sipMeetingUri||this.sipUri),this.owner=e.body.owner||this.owner)}},{key:"parseLocus",value:function(e){e&&(this.locusUrl=e.url,this.setLocus(e),e.participants&&e.self&&(this.partner=A.default.getLocusPartner(e.participants,e.self)),!this.sipUri&&this.partner&&this.type===QQ._CALL_&&this.setSipUri(this.partner.person.sipUrl||this.partner.person.emailAddress||this.partner.person.email))}},{key:"setSipUri",value:function(e){this.sipUri=e}},{key:"setRoapSeq",value:function(e){e>=0&&(this.roapSeq=e)}},{key:"setLocus",value:function(e){var t=e.locus||e;this.mediaConnections=e.mediaConnections,this.locusUrl=e.locusUrl||e.url,this.locusId=e.locusId,this.selfId=e.selfId,this.mediaId=e.mediaId,this.hostId=t.host?t.host.id:this.hostId,this.locusInfo.initialSetup(t)}},{key:"setRemoteStream",value:function(e){var t=this;e&&(e.ontrack=function(e){d.default.logger.log("Meeting:index->setRemoteStream/ontrack#Event received for peerConnection: "+e);var r=e.streams[0];t.mediaProperties.remoteStream=r,p.default.trigger(t,{file:"meeting/index",function:"setRemoteStream:pc.ontrack"},QQ.EVENT_TRIGGERS.MEDIA_READY,{type:QQ.EVENT_TYPES.REMOTE_AUDIO,stream:C.default.createMediaStream([t.mediaProperties.remoteStream.getAudioTracks()[0]])}),p.default.trigger(t,{file:"meeting/index",function:"setRemoteStream:pc.ontrack"},QQ.EVENT_TRIGGERS.MEDIA_READY,{type:QQ.EVENT_TYPES.REMOTE_VIDEO,stream:C.default.createMediaStream([t.mediaProperties.remoteStream.getVideoTracks()[0]])}),t.mediaProperties.remoteStream.getVideoTracks()[1]&&p.default.trigger(t,{file:"meeting/index",function:"setRemoteStream:pc.ontrack"},QQ.EVENT_TRIGGERS.MEDIA_READY,{type:QQ.EVENT_TYPES.REMOTE_SHARE,stream:C.default.createMediaStream([t.mediaProperties.remoteStream.getVideoTracks()[1]])})})}},{key:"unsetRemoteStream",value:function(){this.mediaProperties.unsetRemoteStream()}},{key:"closeRemoteStream",value:function(){var e=this;return v.default.stopStream(this.mediaProperties.remoteStream).then(function(){p.default.trigger(e,{file:"meeting/index",function:"closeRemoteStream"},QQ.EVENT_TRIGGERS.MEDIA_STOPPED,{type:QQ.EVENT_TYPES.REMOTE})})}},{key:"setShareStream",value:function(e){var t=this;e&&(e.ontrack=function(e){var r=(0,n.default)(e.streams,1);t.mediaProperties.remoteShare=r[0],p.default.trigger(t,{file:"meeting/index",function:"setShareStream:pc.ontrack"},QQ.EVENT_TRIGGERS.MEDIA_READY,{type:QQ.EVENT_TYPES.REMOTE_SHARE,stream:t.mediaProperties.remoteShare})})}},{key:"setLocalTracks",value:function(e){e&&(this.mediaProperties.setLocalAudioTrack(A.default.getTrack(e).audioTrack),this.mediaProperties.setLocalVideoTrack(A.default.getTrack(e).videoTrack),p.default.trigger(this,{file:"meeting/index",function:"setLocalTracks"},QQ.EVENT_TRIGGERS.MEDIA_READY,{type:QQ.EVENT_TYPES.LOCAL,stream:e}))}},{key:"setLocalShareTrack",value:function(e){var t=this;e&&(this.mediaProperties.setLocalShareTrack(A.default.getTrack(e).videoTrack),this.mediaProperties.shareTrack.onended=function(){t.wirelessShare?t.leave():t.stopShare()},p.default.trigger(this,{file:"meeting/index",function:"setLocalShareTrack"},QQ.EVENT_TRIGGERS.MEDIA_READY,{type:QQ.EVENT_TYPES.LOCAL_SHARE,stream:e}))}},{key:"closeLocalStream",value:function(){var e=this;return v.default.stopTracks(this.mediaProperties.audioTrack).then(function(){return v.default.stopTracks(e.mediaProperties.videoTrack)}).then(function(){p.default.trigger(e,{file:"meeting/index",function:"closeLocalStream"},QQ.EVENT_TRIGGERS.MEDIA_STOPPED,{type:QQ.EVENT_TYPES.LOCAL})})}},{key:"closeLocalShare",value:function(){var e=this;return v.default.stopTracks(this.mediaProperties.shareTrack).then(function(){p.default.trigger(e,{file:"meeting/index",function:"closeLocalShare"},QQ.EVENT_TRIGGERS.MEDIA_STOPPED,{type:QQ.EVENT_TYPES.LOCAL_SHARE})})}},{key:"unsetLocalVideoTrack",value:function(){this.mediaProperties.unsetLocalVideoTrack()}},{key:"unsetLocalShareTrack",value:function(){this.mediaProperties.unsetLocalShareTrack()}},{key:"setPeerConnections",value:function(){var e=this;this.config.reconnection.detection&&this.webex.internal.mercury.on(QQ.ONLINE,function(){e.reconnect()})}},{key:"closePeerConnections",value:function(){return _.default.close(this.mediaProperties.peerConnection)}},{key:"unsetPeerConnections",value:function(){this.mediaProperties.unsetPeerConnection(),this.config.reconnection.detection&&this.webex.internal.mercury.off(QQ.ONLINE)}},{key:"setCorrelationId",value:function(e){this.correlationId=e}},{key:"muteAudio",value:function(){var e=this;return!this.audio||this.audio&&!this.audio.toggle?a.default.reject(new N.default("no audio control associated to the meeting")):this.audio.toggle({mute:!0,self:!0}).then(function(){return d.default.logger.info("meeting/index->muteAudio#Audio mute successful."),S.default.postEvent({event:JQ.eventType.MUTED,meeting:e,data:{trigger:JQ.trigger.USER_INTERACTION,mediaType:JQ.mediaType.AUDIO}}),a.default.resolve()}).catch(function(e){d.default.logger.error("meeting/index->muteAudio#Audio mute error "+e)})}},{key:"unmuteAudio",value:function(){var e=this;return!this.audio||this.audio&&!this.audio.toggle?a.default.reject(new N.default("no audio control associated to the meeting")):this.audio.toggle({mute:!1,self:!0}).then(function(){S.default.postEvent({event:JQ.eventType.UNMUTED,meeting:e,data:{trigger:JQ.trigger.USER_INTERACTION,mediaType:JQ.mediaType.AUDIO}})})}},{key:"muteVideo",value:function(){var e=this;return!this.video||this.video&&!this.video.toggle?a.default.reject(new N.default("no video control associated to the meeting")):this.video.toggle({mute:!0,self:!0}).then(function(){S.default.postEvent({event:JQ.eventType.MUTED,meeting:e,data:{trigger:JQ.trigger.USER_INTERACTION,mediaType:JQ.mediaType.VIDEO}})})}},{key:"unmuteVideo",value:function(){var e=this;return!this.video||this.video&&!this.video.toggle?a.default.reject(new N.default("no audio control associated to the meeting")):this.video.toggle({mute:!1,self:!0}).then(function(){S.default.postEvent({event:JQ.eventType.UNMUTED,meeting:e,data:{trigger:JQ.trigger.USER_INTERACTION,mediaType:JQ.mediaType.VIDEO}})})}},{key:"joinWithMedia",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.mediaSettings,i=t.joinOptions,o=t.audioVideoOptions;this.join(i).then(function(t){return e.getMediaStreams(r,o).then(function(i){var o=(0,n.default)(i,2),s=o[0],u=o[1];return e.addMedia({mediaSettings:r,localShare:u,localStream:s}).then(function(e){a.default.resolve({join:t,media:e,local:[s,u]})})})}).catch(function(e){return a.default.reject(e)})}},{key:"reconnect",value:function(){var e=this;if(!this.reconnectionManager||!this.reconnectionManager.reconnect)throw new N.default("Cannot reconnect, ReconnectionManager must first be defined.");return p.default.trigger(this,{file:"meeting/index",function:"reconnect"},QQ.EVENT_TRIGGERS.MEETING_RECONNECTION_STARTING),S.default.postEvent({event:JQ.eventType.MEDIA_RECONNECTING,meeting:this}),this.reconnectionManager.reconnect(this).then(function(t){return p.default.trigger(e,{file:"meeting/index",function:"reconnect"},QQ.EVENT_TRIGGERS.MEETING_RECONNECTION_SUCCESS,{reconnect:t}),S.default.postEvent({event:JQ.eventType.MEDIA_RECOVERED,meeting:e}),a.default.resolve(t)}).catch(function(t){return p.default.trigger(e,{file:"meeting/index",function:"reconnect"},QQ.EVENT_TRIGGERS.MEETING_RECONNECTION_FAILURE,{error:new R.default("Reconnection failure event",t)}),S.default.postEvent({event:JQ.eventType.MEDIA_RECONNECTION_FAILED,meeting:e}),a.default.reject(new R.default("Reconnection failure event",t))}).finally(function(t){return e.reconnectionManager.reset(),a.default.resolve(t)})}},{key:"join",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S.default.postEvent({event:JQ.eventType.CALL_INITIATED,meeting:this,data:{trigger:JQ.trigger.USER_INTERACTION}}),t.hostPin&&S.default.pinCollection({meeting:this}),this.meetingFiniteStateMachine.state===QQ.MEETING_STATE_MACHINE.STATES.ENDED&&this.meetingFiniteStateMachine.reset(),this.meetingFiniteStateMachine.state!==QQ.MEETING_STATE_MACHINE.STATES.RINGING&&this.meetingFiniteStateMachine.ring(QQ._JOIN_),t.resourceId&&this.destination&&t.resourceId===this.destination&&(this.wirelessShare=!0),A.default.joinMeetingOptions(this,t).then(function(t){return e.meetingFiniteStateMachine.join(),a.default.resolve(t)}).catch(function(t){return e.meetingFiniteStateMachine.fail(t),a.default.reject(t)})}},{key:"moveTo",value:function(e){var t=this;if(!e)throw new N.default("Cannot move call without a resourceId.");return S.default.mediaCapabilities({meeting:this,data:{mediaCapabilities:{rx:{audio:!1,share:!1,share_audio:!1,video:!1,whiteboard:!1},tx:{audio:!1,share:!1,share_audio:!1,video:!1,whiteboard:!1}}}}),S.default.moveMedia({meeting:this}),A.default.joinMeetingOptions(this,{resourceId:e,moveToResource:!0}).then(function(){return t.meetingFiniteStateMachine.join(),t.updateMedia({mediaSettings:{sendVideo:!1,receiveVideo:!1,sendAudio:!1,receiveAudio:!1,sendShare:!1,receiveShare:!1}}).then(function(){return a.default.resolve(t)})}).catch(function(e){return t.meetingFiniteStateMachine.fail(e),a.default.reject(e)})}},{key:"moveFrom",value:function(e){var t=this;if(!e)throw new N.default("Cannot move call without a resourceId.");var r=this.correlationId;return this.id=f.default.v4(),this.webex.meetings.meetingCollection.set(this),S.default.mediaCapabilities({meeting:this,data:{mediaCapabilities:{rx:{audio:!0,share:!0,share_audio:!0,video:!0,whiteboard:!0},tx:{audio:!0,share:!0,share_audio:!0,video:!0,whiteboard:!0}}}}),S.default.moveMedia({meeting:this}),A.default.joinMeetingOptions(this).then(function(i){return t.getMediaStreams({sendAudio:!0,sendVideo:!0,sendShare:!1}).then(function(e){var r=(0,n.default)(e,2),o=r[0],s=r[1];return t.updateMedia({mediaSettings:{sendAudio:!0,receiveAudio:!0,sendVideo:!0,receiveVideo:!0,sendShare:!1,receiveShare:!1},localStream:o,localShare:s}).then(function(){return a.default.resolve(i)})}).then(function(){return A.default.leaveMeeting(t,{resourceId:e,correlationId:r,moveMeeting:!0})})}).then(function(){return t.webex.meetings.meetingCollection.delete(r),a.default.resolve()})}},{key:"addMedia",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(A.default.isUnjoined(this.locusInfo)&&!this.wirelessShare)return a.default.reject(new k.default("To add media, the "+(this.guest?"guest":"")+" user must be "+(this.guest?"admitted. Wait to be admitted":"joined to the meeting")+" to call addMedia"));var r=t.localStream,n=t.localShare,i=t.mediaSettings;return S.default.postEvent({event:JQ.eventType.MEDIA_CAPABILITIES,meeting:this,data:{mediaCapabilities:{rx:{audio:!1,share:!1,share_audio:!1,video:!1,whiteboard:!1},tx:{audio:!1,share:!1,share_audio:!1,video:!1,whiteboard:!1}}}}),A.default.validateOptions(t).then(function(){return A.default.setPeerConnectionEvents(e),e.preMedia(r,n,i)}).then(function(){return v.default.attachMedia(e.mediaProperties,e.id).then(function(t){d.default.logger.log("Meeting:index->addMedia#PeerConnection Received from attachMedia "+t),e.setRemoteStream(t),A.default.startInternalStats(e)}).catch(function(t){throw e.logger.error("Meeting:index#join --\x3e Error joining the call on roap initialization, ",t),t}).then(function(){return e.roap.sendRoapMediaRequest({sdp:e.mediaProperties.peerConnection.sdp,roapSeq:e.roapSeq,meeting:e}).catch(function(t){throw e.logger.error("Meeting:index#join --\x3e Error joining the call on send roap media request, ",t),t})}).then(function(){return i&&i.sendShare&&n?e.share():a.default.resolve()})})}},{key:"updateMedia",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.localStream,n=t.localShare,i=t.mediaSettings,o=this.mediaProperties.mediaDirection.sendShare;return A.default.validateOptions(t).then(function(){return e.preMedia(r,n,i)}).then(function(){return v.default.updateMedia(e.mediaProperties,e.id).then(function(t){d.default.logger.log("Meeting:index->updateMedia#PeerConnection received from updateMedia, "+t),e.setRemoteStream(t),(i.receiveShare||n)&&_.default.setContentSlides(t)}).catch(function(e){throw d.default.logger.error("Meeting:index#updateMedia --\x3e Error updatedMedia, ",e),e}).then(function(){return e.roap.sendRoapMediaRequest({sdp:e.mediaProperties.peerConnection.sdp,roapSeq:e.roapSeq,meeting:e}).catch(function(e){throw d.default.logger.error("Meeting:index#updateMedia --\x3e Error updateMedia on send roap media request, ",e),e})}).then(function(){return e.checkForStopShare(i.sendShare,o)}).then(function(t){return t?e.share():a.default.resolve()})})}},{key:"updateAudio",value:function(e){var t=this,r=e.sendAudio,n=e.receiveAudio,i=e.stream,o=this.mediaProperties.peerConnection.audioTransceiver,s=A.default.getTrack(i).audioTrack;return"boolean"!=typeof r||"boolean"!=typeof n?a.default.reject(new N.default("Pass sendVideo and receiveVideo parameter")):A.default.validateOptions({sendAudio:r,localStream:i}).then(function(){return A.default.updateTransceiver({type:"audio",sendTrack:e.sendAudio,receiveTrack:e.receiveAudio,track:s,transceiver:o,peerConnection:t.mediaProperties.peerConnection,previousMediaDirection:{sendTrack:t.mediaProperties.mediaDirection.sendAudio,receiveTrack:t.mediaProperties.mediaDirection.receiveAudio}},{mediaProperties:t.mediaProperties,roapSeq:t.roapSeq,meeting:t,id:t.id})}).then(function(){t.mediaProperties.setLocalAudioTrack(s),t.mediaProperties.mediaDirection.sendAudio=r,t.mediaProperties.mediaDirection.receiveAudio=n})}},{key:"updateVideo",value:function(e){var t=this,r=e.sendVideo,n=e.receiveVideo,i=e.stream,o=this.mediaProperties.peerConnection.videoTransceiver,s=A.default.getTrack(i).videoTrack;return"boolean"!=typeof r||"boolean"!=typeof n?a.default.reject(new N.default("Pass sendVideo and receiveVideo parameter")):A.default.validateOptions({sendVideo:r,localStream:i}).then(function(){return A.default.updateTransceiver({type:"video",sendTrack:e.sendVideo,receiveTrack:e.receiveVideo,track:s,transceiver:o,peerConnection:t.mediaProperties.peerConnection,previousMediaDirection:{sendTrack:t.mediaProperties.mediaDirection.sendVideo,receiveTrack:t.mediaProperties.mediaDirection.receiveVideo}},{mediaProperties:t.mediaProperties,roapSeq:t.roapSeq,meeting:t,id:t.id})}).then(function(){t.mediaProperties.setLocalVideoTrack(s),t.mediaProperties.mediaDirection.sendVideo=r,t.mediaProperties.mediaDirection.receiveVideo=n})}},{key:"checkForStopShare",value:function(e,t){return this.isSharing||!e||t?this.isSharing&&!e&&t?this.stopShare().then(function(){return a.default.resolve(!1)}):a.default.resolve():a.default.resolve(!0)}},{key:"updateShare",value:function(e){var t=this,r=e.sendShare,n=e.receiveShare,i=e.stream,o=this.mediaProperties.peerConnection.shareTransceiver,s=A.default.getTrack(i).videoTrack;if("boolean"!=typeof r||"boolean"!=typeof n)return a.default.reject(new N.default("Pass sendShare and receiveShare parameter"));var u=this.mediaProperties.mediaDirection.sendShare;return A.default.validateOptions({sendShare:r,localShare:i}).then(function(){return t.checkForStopShare(r,u)}).then(function(e){return A.default.updateTransceiver({type:"video",sendTrack:r,receiveTrack:n,track:s,transceiver:o,peerConnection:t.mediaProperties.peerConnection,previousMediaDirection:{sendTrack:t.mediaProperties.mediaDirection.sendShare,receiveTrack:t.mediaProperties.mediaDirection.receiveShare}},{mediaProperties:t.mediaProperties,roapSeq:t.roapSeq,meeting:t,id:t.id}).then(function(){return e?t.share():a.default.resolve()})}).then(function(){t.setLocalShareTrack(i),t.mediaProperties.mediaDirection.sendShare=r,t.mediaProperties.mediaDirection.receiveShare=n})}},{key:"preMedia",value:function(e,t,n){this.mediaProperties.setMediaDirection((0,r.default)(this.config.mediaSettings,n)),this.audio=this.audio||y.default.create(this.mediaProperties.mediaDirection,this),this.video=this.video||E.default.create(this.mediaProperties.mediaDirection,this),this.setLocalTracks(e),this.setLocalShareTrack(t)}},{key:"acknowledge",value:function(e){var t=this;return e?e===QQ._INCOMING_?this.meetingRequest.acknowledgeMeeting({locusUrl:this.locusUrl,deviceUrl:this.deviceUrl,id:this.id}).then(function(e){return a.default.resolve(e)}).then(function(r){return t.meetingFiniteStateMachine.ring(e),S.default.postEvent({event:JQ.eventType.ALERT_DISPLAYED,meeting:t}),a.default.resolve({response:r})}):a.default.resolve({message:"noop"}):a.default.reject(new N.default("Type must be set to acknowledge the meeting."))}},{key:"decline",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QQ._BUSY_;return A.default.declineMeeting(this,t).then(function(t){return e.meetingFiniteStateMachine.decline(),a.default.resolve(t)}).catch(function(t){return e.meetingFiniteStateMachine.fail(t),a.default.reject(t)})}},{key:"leave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S.default.postEvent({event:JQ.eventType.LEAVE,meeting:this,data:{trigger:JQ.trigger.USER_INTERACTION,canProceed:!1}}),A.default.leaveMeeting(this,t).then(function(t){return e.meetingFiniteStateMachine.leave(),a.default.resolve(t)}).catch(function(t){return e.meetingFiniteStateMachine.fail(t),a.default.reject(t)})}},{key:"share",value:function(){var e=this,t=this.locusInfo.mediaShares.find(function(e){return e.name===QQ.CONTENT});return t&&!this.isSharing?(S.default.postEvent({event:JQ.eventType.SHARE_INITIATED,meeting:this}),this.meetingRequest.changeMeetingFloor({disposition:QQ.FLOOR_ACTION.GRANTED,personUrl:this.locusInfo.self.url,deviceUrl:this.deviceUrl,uri:t.url,resourceUrl:this.resourceUrl}).then(function(){return e.isSharing=!0,p.default.trigger(e,{file:"meeting/index",function:"share"},QQ.EVENT_TRIGGERS.MEETING_STARTED_SHARING_LOCAL),S.default.postEvent({event:JQ.eventType.LOCAL_SHARE_FLOOR_GRANTED,meeting:e}),a.default.resolve()}).catch(function(e){return d.default.logger.error("Meeting/index->share#Error ",e),a.default.reject(e)})):a.default.reject(new N.default("Cannot share without content."))}},{key:"stopShare",value:function(){var e=this,t=this.locusInfo.mediaShares.find(function(e){return e.name===QQ.CONTENT});return t&&this.isSharing?(S.default.postEvent({event:JQ.eventType.SHARE_STOPPED,meeting:this}),v.default.stopTracks(this.mediaProperties.shareTrack),this.meetingRequest.changeMeetingFloor({disposition:QQ.FLOOR_ACTION.RELEASED,personUrl:this.locusInfo.self.url,deviceUrl:this.deviceUrl,uri:t.url,resourceUrl:this.resourceUrl}).catch(function(e){return d.default.logger.error("Meeting/index->stopShare#Error ",e),a.default.reject(e)}).finally(function(){e.isSharing=!1,p.default.trigger(e,{file:"meeting/index",function:"stopShare"},QQ.EVENT_TRIGGERS.MEETING_STOPPED_SHARING_LOCAL)})):a.default.reject(new N.default("Cannot stop share without content"))}},{key:"startRecording",value:function(){return A.default.startRecording(this.meetingRequest,this.locusUrl,this.locusInfo)}},{key:"stopRecording",value:function(){return A.default.stopRecording(this.meetingRequest,this.locusUrl,this.locusInfo)}},{key:"pauseRecording",value:function(){return A.default.pauseRecording(this.meetingRequest,this.locusUrl,this.locusInfo)}},{key:"resumeRecording",value:function(){return A.default.resumeRecording(this.meetingRequest,this.locusUrl,this.locusInfo)}},{key:"lockMeeting",value:function(){return A.default.lockMeeting(this.inMeetingActions,this.meetingRequest,this.locusUrl)}},{key:"unlockMeeting",value:function(){return A.default.unlockMeeting(this.inMeetingActions,this.meetingRequest,this.locusUrl)}}]),t}(XR.StatelessWebexPlugin);t.default=D});r(_Z);var SZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={getClaimPmrLink:function(e){var t=QQ.VALID_PMR_ADDRESS.test(e);return t?e:(t=e.match(QQ.VALID_PMR_LINK))?t[4]+"@"+t[2]+"."+QQ.WEBEX_DOT_COM:null},getClaimPmrPin:function(e){return QQ.VALID_PIN.test(e)?e:null},getClaimedRequestParams:function(e,t,r){return{method:QQ.HTTP_VERBS.POST,api:QQ.HECATE,resource:"/"+QQ.CMR_MEETINGS+"/"+QQ.CLAIM,body:{userId:r.userId,passcode:t,preferred:r.preferred,meetingAddress:e}}}};t.default=r});r(SZ);var TZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(_f),n=l(hT),i=l(zy),a=l($y),o=l(vT),s=l(mT),u=l(eJ),c=l(SZ);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){var e,r,a,s;(0,i.default)(this,t);for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];return r=a=(0,o.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(c))),a.namespace=QQ.MEETINGS,s=r,(0,o.default)(a,s)}return(0,s.default)(t,e),(0,a.default)(t,[{key:"claimPmr",value:function(e){if(!(e&&e.userId&&e.passcode&&e.meetingAddress&&e.preferred))throw new u.default("Claiming a PMR should be done with userId, passcode, preferred, and meetingAddress in options.");var t=c.default.getClaimPmrPin(e.passcode);if(!t)return r.default.reject(new u.default("The host pin provided was of an invalid format"));var n=c.default.getClaimPmrLink(e.meetingAddress);if(!n)return r.default.reject(new u.default("The PMR link provided was of an invalid format"));var i=c.default.getClaimedRequestParams(n,t,e);return this.request(i)}}]),t}(XR.StatelessWebexPlugin);t.default=f});r(TZ);var wZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=f(_f),n=f(hT),i=f(zy),a=f($y),o=f(vT),s=f(mT),u=f(sJ),c=f(eJ),l=f(TZ);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e,r){(0,i.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,n.default)(t)).call(this,{},r));return a.namespace=QQ.MEETINGS,a.pmr=null,a.sipUri=null,a.link=null,a.userId=null,a.name=null,a.meetingInfoRequest=new u.default({},r),a.personalMeetingRoomRequest=new l.default({},r),a}return(0,s.default)(t,e),(0,a.default)(t,[{key:"claim",value:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a={userId:this.webex.internal.device.userId,passcode:t,meetingAddress:e,preferred:i};return this.personalMeetingRoomRequest.claimPmr(a).then(function(e){return e&&e.body?(n.set(e.body),e.body):r.default.reject(new c.default("No PMR body provided. PMR values not updated."))})}},{key:"set",value:function(e){this.pmr=e,this.sipUri=e.sipMeetingUri,this.meetingLink=e.webExMeetingLink||e.meetingLink,this.userId=e.owner,this.name=e.meetingName,this.number=e.meetingNumber}},{key:"get",value:function(){var e=this,t={type:QQ._PERSONAL_ROOM_,destination:this.webex.internal.device.userId};return this.meetingInfoRequest.fetchMeetingInfo(t).then(function(t){return t&&t.body&&t.body.isPmr?(e.set(t.body),t.body):r.default.reject(new TypeError("The PMR requested is NOT a PMR. PMR values not set."))})}}]),t}(XR.StatelessWebexPlugin);t.default=d});r(wZ);var IZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=c(fI),n=c(Pf),i=c(hT),a=c(zy),o=c(vT),s=c(mT),u=c($Q);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){var e,s,c,l;(0,a.default)(this,t);for(var f=arguments.length,d=Array(f),p=0;p<f;p++)d[p]=arguments[p];return s=c=(0,o.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(d))),c.getClusters=function(){return c.request({method:QQ.HTTP_VERBS.GET,shouldRefreshAccessToken:!1,api:QQ.API.CALLIOPEDISCOVERY,resource:QQ.RESOURCE.CLUSTERS}).then(function(e){var t=e.body.clusters;return u.default.logger.info("ReachabilityRequest->getClusters#get clusters successful:"+(0,n.default)(t)),(0,r.default)(t)})},c.remoteSDPForClusters=function(e){return c.request({method:QQ.HTTP_VERBS.POST,shouldRefreshAccessToken:!1,api:QQ.API.CALLIOPEDISCOVERY,resource:QQ.RESOURCE.REACHABILITY,body:{offers:e}}).then(function(e){return u.default.logger.info("ReachabilityRequest->remoteSDPForClusters#Remote SDPs got succcessfully"),e.body})},l=s,(0,o.default)(c,l)}return(0,s.default)(t,e),t}(XR.StatelessWebexPlugin);t.default=l});r(IZ);var AZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=h(NC),n=h(fI),i=h(_f),a=h(Pf),o=h(hT),s=h(zy),u=h(vT),c=h(mT),l=h($Q),f=h(yJ),d=h(HJ),p=h(IZ);function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e,c){(0,s.default)(this,t);var h=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,{},c));return h.namespace=QQ.MEETINGS,h.setup=function(){h.processedClusterResults=[],h.peerConnectionMap={}},h.gatherReachability=function(){h.setup();try{return window.localStorage.setItem(QQ.REACHABILITY.localStorage,(0,a.default)({})),h.reachabilityRequest.getClusters().then(function(e){return h.performReachabilityCheck(e).then(function(e){return window.localStorage.setItem(QQ.REACHABILITY.localStorage,(0,a.default)(e)),e})}).catch(function(e){return l.default.logger.error("Reachability->gatherReachability#Error in calling getClusters(): "+e),{}})}catch(e){return l.default.logger.error("Reachability->gatherReachability#Error in accessing LocalStorage: "+e),{}}},h.performReachabilityCheck=function(e){if(!e||!e.length)return i.default.resolve({});var t=[];return new i.default(function(r){h.getLocalSDPForClusters(e).then(function(e){e&&(0,n.default)(e).length&&e.localSDPList&&e.peerConnection||(l.default.logger.info("Reachability->performReachabilityCheck#Local SDP is empty or has missing elements..returning"),r({})),h.peerConnectionMap=e.peerConnection,t=e.localSDPList,h.setRemoteOfferForEachCluster(t).then(function(e){r(e)})}).catch(function(e){l.default.logger.error("Reachability->performReachabilityCheck#Error in getLocalSDPForClusters: "+e),r({})})})},h.setRemoteOfferForEachCluster=function(e){var t={};return new i.default(function(r){h.reachabilityRequest.remoteSDPForClusters(e).then(function(e){var n=e.answers;n&&n.length||(l.default.logger.info("Reachability->setRemoteOfferForEachCluster#Remote SDP is empty."),h.cleanUpPeerConnections(h.peerConnectionMap),r({})),n.forEach(function(e){var i=e,o=i.clusterId;if(i&&i.sdp){var s=h.peerConnectionMap[o];h.setIceCallBackHandlers(s).then(function(e){if(e.clusterId=o,h.processedClusterResults.push(e.clusterId),t[e.clusterId]={start:e.iceStats.start,stop:e.iceStats.stop},h.processedClusterResults.length===n.length){var i=h.parseIceResultToReachabilityResult(t);l.default.logger.info("Reachability->setRemoteOfferForEachCluster#Returning reachability result"+(0,a.default)(i)),r(i)}}).catch(function(e){l.default.logger.error("Reachability->setRemoteOfferForEachCluster#Error in setIceCallBackHandlers(): "+e),h.cleanUpPeerConnections(h.peerConnectionMap),r({})}),f.default.setRemoteSessionDetails(s,QQ.ANSWER,i.sdp)}else l.default.logger.error("Reachability->setRemoteOfferForEachCluster# Error in getting remote sdp."),h.processedClusterResults.push(o),h.processedClusterResults.length===n.length&&(h.cleanUpPeerConnections(h.peerConnectionMap),r({}))})}).catch(function(e){l.default.logger.error("Reachability->setRemoteOfferForEachCluster#Error in remoteSDPForClusters!:"+e),h.cleanUpPeerConnections(h.peerConnectionMap),r({})})})},h.getLocalSDPForClusters=function(e){var t={},r=[],n={};return new i.default(function(i,a){e.forEach(function(o){var s=o;f.default.createOffer(d.default.createPeerConnection()).then(function(a){n[s]=a;var o={sdp:a.sdp,clusterId:s};r.push(o),r.length===e.length&&(t.peerConnection=n,t.localSDPList=r,i(t))}).catch(function(e){l.default.logger.error("Reachability->getLocalSDPForClusters#Error in getLocalSDP : "+e),a(e)})})})},h.parseIceResultToReachabilityResult=function(e){if(!e||!(0,n.default)(e).length)return{};var t={},i=!0,a=!1,o=void 0;try{for(var s,u=(0,r.default)((0,n.default)(e));!(i=(s=u.next()).done);i=!0){var c=s.value,l={};if(e[c].start>0&&e[c].stop>0)l={reachable:!0,latencyInMilliseconds:e[c].stop-e[c].start};else l={reachable:!1};t[c]={udp:l}}}catch(e){a=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw o}}return t},h.cleanUpPeerConnections=function(e){var t=!0,i=!1,a=void 0;try{for(var o,s=(0,r.default)((0,n.default)(e));!(t=(o=s.next()).done);t=!0){var u=o.value,c=e[u];c&&(l.default.logger.info("Reachability->cleanUpPeerConnections#Cleaning up peer connection created for cluster : "+u),c.close())}}catch(e){i=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw a}}},h.setIceCallBackHandlers=function(e){var t=null,r={start:0,stop:0};return new i.default(function(n){function i(t,r,i){t&&r&&(window.clearTimeout(r),r=void 0),e.close(),n({iceStats:i})}t=window.setTimeout(function(){l.default.logger.warn("Reachability->iceCallBackHandler#"+h.clusterId+" ice handler timed out."),i(!1,t,r)},5e3),e.oniceconnectionstatechange=function(){e&&(e.iceConnectionState===QQ.ICE_STATE.CHECKING&&(r.start=Date.now()),e.iceConnectionState===QQ.ICE_STATE.CONNECTED&&(r.stop=Date.now(),i(!0,t,r)),e.iceConnectionState===QQ.ICE_STATE.FAILED&&i(!1,t,r))}})},h.getClusters=function(){return h.reachabilityRequest.getClusters()},h.reachabilityRequest=new p.default({},c),h}return(0,c.default)(t,e),t}(XR.StatelessWebexPlugin);t.default=v});r(AZ);var CZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(_f),n=c(hT),i=c(zy),a=c($y),o=c(vT),s=c(mT),u=c($Q);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,a.default)(t,[{key:"getActiveMeetings",value:function(){var e=this;return this.request({api:QQ.API.LOCUS,resource:QQ.RESOURCE.LOCI}).then(function(t){return e.determineRedirections(t.body)}).catch(function(e){u.default.logger.error("MeetingRequest->getActiveMeetings# failed to get locus details, "+e)})}},{key:"determineRedirections",value:function(e){var t=this;return e.remoteLocusClusterUrls&&e.remoteLocusClusterUrls.length?r.default.all(e.remoteLocusClusterUrls.map(function(n){return t.request({method:QQ.HTTP_VERBS.GET,url:n,runWhitelistedDomains:!0}).then(function(t){return e.loci=e.loci.concat(t.body.loci),e.locusUrls=e.locusUrls.concat(t.body.locusUrls),r.default.resolve(e)}).catch(function(e){u.default.logger.error("MeetingRequest->determineRedirections# failed to get locus details from url: "+n+", reason: "+e)})})).then(function(){return r.default.resolve(e)}):r.default.resolve(e)}}]),t}(XR.StatelessWebexPlugin);t.default=l});r(CZ);var xZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(xJ),n=i(Bp);function i(e){return e&&e.__esModule?e:{default:e}}var a={difference:function(e,t){if(!e||!e.data||!e.data.getData||0===(0,n.default)(e.data.getData()).length)return t;var i={};return(0,n.default)(t.data.getData()).forEach(function(a){i[a]=i[a]?i[a]:{},(0,n.default)(t.data.getData()[a]).forEach(function(n){var o=t.data.getData()[a][n];!(0,r.default)(o)||QQ.DEFAULT_EXCLUDED_STATS.includes(n)&&0!==o||(e.data.getData()[a]&&e.data.getData()[a][n]?(o-=e.data.getData()[a][n],i[a][n]=o):i[a][n]=o)})}),i},sum:function(e,t){var i=t;return(0,n.default)(e.data.getData()).forEach(function(t){(0,n.default)(e.data.getData()[t]).forEach(function(n){var a=e.data.getData()[t][n];!(0,r.default)(a)||QQ.DEFAULT_EXCLUDED_STATS.includes(n)&&0!==a||(i[t][n]?i[t][n]+=a:i[t][n]=a)})}),i}};t.default=a});r(xZ);var OZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(hT),n=u(zy),i=u($y),a=u(vT),o=u(mT),s=u(hN);function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return(0,n.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).call(this,"meetings"))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"set",value:function(e){return this.meetings[e.id]=e,this.meetings[e.id]}},{key:"getByKey",value:function(e,t){return e&&t?(0,s.default)(this.meetings,function(r){return r[e]===t}):null}}]),t}(u(nJ).default);t.default=c});r(OZ);var RZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=eJ)&&r.__esModule?r:{default:r};var i={extractDestination:function(e,t){var r=e;if(t===QQ._LOCUS_ID_){if(!e||!e.url)throw new n.default("You cannot create a meeting by locus without a locus.url defined");var i=e.url.split("/");r=i[i.length-1]}return QQ.UUID_REG.test(r)?r:(0,cI.deconstructHydraId)(r).id||r},getMeetingAddedType:function(e){return e===QQ._LOCUS_ID_?QQ._INCOMING_:QQ._CREATED_},handleRoapMercury:function(e,t){var r=e.data;if(r.eventType===QQ.LOCUSEVENT.MESSAGE_ROAP){var n=t.getByKey(QQ.CORRELATION_ID,r.correlationId);n&&n.roap.roapEvent(r)}},checkForCorrelationId:function(e,t){var r=[];if(t){t&&t.self&&t.self.devices&&(r=t.self.devices);var n=r.find(function(t){return t.url===e});if(n&&n.correlationId)return n.correlationId}return!1}};t.default=i});r(RZ);var NZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=_(_f),n=_(hT),i=_(zy),a=_($y),o=_(vT),s=_(mT),u=_(ZQ),c=_(XQ),l=_($Q),f=_(rJ),d=_(uJ),p=_(_Z),h=_(wZ),v=_(AZ),m=_(CZ),g=_(OJ),y=_(xZ),E=_(OZ),b=_(RZ);function _(e){return e&&e.__esModule?e:{default:e}}var S=function(e){function t(){var e;(0,i.default)(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];var c=(0,o.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(a)));return c.namespace=QQ.MEETINGS,c.meetingInfo=new d.default({},{parent:c.webex}),c.request=new m.default({},{parent:c.webex}),c.meetingCollection=new E.default,c.personalMeetingRoom=new h.default({},{parent:c.webex}),c.reachability=null,c.onReady(),u.default.initialSetup(c.meetingCollection,c.webex.version),c}return(0,s.default)(t,e),(0,a.default)(t,[{key:"handleLocusEvent",value:function(e){var t=this,r=null;if(r=this.meetingCollection.getByKey(QQ.LOCUS_URL,e.locusUrl)||this.meetingCollection.getByKey(QQ.CORRELATION_ID,b.default.checkForCorrelationId(this.webex.internal.device.url,e.locus))||this.meetingCollection.getByKey(QQ.SIP_URI,e.locus.self&&e.locus.self.callbackInfo&&e.locus.self.callbackInfo.callbackAddress))u.default.postEvent({event:JQ.eventType.NOTIFICATION_RECEIVED,meeting:r,data:{trigger:JQ.trigger.MERCURY_EVENT}}),r.locusInfo.parse(r,e);else{if(e.locus&&e.locus.fullState&&e.locus.fullState.state===QQ.LOCUS.STATE.INACTIVE)return void l.default.logger.warn("Meetings->handleLocusEvent#Locus event received for meeting, after it was ended.");this.create(e.locus,QQ._LOCUS_ID_).then(function(t){r=t,e.eventType===QQ.LOCUSEVENT.DIFFERENCE?r.locusInfo.initialSetup(e.locus,r):r.locusInfo.initialSetup(e.locus)}).finally(function(){u.default.postEvent({event:JQ.eventType.NOTIFICATION_RECEIVED,meeting:r,data:{trigger:JQ.trigger.MERCURY_EVENT}}),u.default.postEvent({event:JQ.eventType.REMOTE_STARTED,meeting:r,data:{trigger:JQ.trigger.MERCURY_EVENT}}),f.default.trigger(t,{file:"meetings",function:"handleLocusEvent"},QQ.EVENT_TRIGGERS.MEETING_ADDED,{meeting:r,type:r.type===QQ._MEETING_?QQ._JOIN_:QQ._INCOMING_})})}}},{key:"handleLocusMercury",value:function(e){var t=e.data,r=t.eventType;r&&r!==QQ.LOCUSEVENT.MESSAGE_ROAP&&this.handleLocusEvent(t)}},{key:"listenForEvents",value:function(){var e=this;this.webex.internal.mercury.on(QQ.LOCUSEVENT.LOCUS_MERCURY,function(t){e.handleLocusMercury(t)}),this.webex.internal.mercury.on(QQ.ROAP.ROAP_MERCURY,function(t){b.default.handleRoapMercury(t,e.meetingCollection)})}},{key:"onReady",value:function(){var e=this;this.webex.once(QQ.READY,function(){c.default.set(e.config.logging),l.default.set(e.webex.logger),e.webex.canAuthorize&&(e.listenForEvents(),f.default.trigger(e,{file:"meetings",function:"onReady"},QQ.EVENT_TRIGGERS.MEETINGS_READY))})}},{key:"setReachability",value:function(){this.reachability=new v.default({},{parent:this.webex})}},{key:"getReachability",value:function(){return this.reachability}},{key:"startReachability",value:function(){this.reachability||this.setReachability(),this.getReachability().gatherReachability()}},{key:"getPersonalMeetingRoom",value:function(){return this.personalMeetingRoom}},{key:"destroy",value:function(e,t){return this.meetingCollection.delete(e),f.default.trigger(this,{file:"meetings",function:"destroy"},QQ.EVENT_TRIGGERS.MEETING_REMOVED,{meetingId:e,response:t}),t}},{key:"create",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.meetingCollection.getByKey(QQ.SIP_URI,e);return i?r.default.resolve(i):this.createMeeting(e,n).then(function(e){return e&&e.on?e.on(QQ.EVENTS.DESTROY_MEETING,function(e){t.destroy(e.meetingId,e.response)}):l.default.logger.error("meetings->create#ERROR, meeting does not have on method, will not be destroyed, meeting cleanup impossible for meeting: "+e),r.default.resolve(e)})}},{key:"createMeeting",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new p.default({userId:this.webex.internal.device.userId,deviceUrl:this.webex.internal.device.url,roapSeq:0,locus:r===QQ._LOCUS_ID_?e:null},{parent:this.webex});return this.meetingCollection.set(n),this.meetingInfo.fetchMeetingInfo(b.default.extractDestination(e,r),r).then(function(e){return n.parseMeetingInfo(e),n.meetingInfo=e,n}).catch(function(t){return l.default.logger.info("Meetings->createMeeting#Error "+t+" fetching /meetingInfo for creation."),l.default.logger.info("Meetings->createMeeting#Info assuming this destination is a 1:1 or wireless share"),n.destination=e,n}).finally(function(){if(r!==QQ._LOCUS_ID_){n.sipUri||n.setSipUri(e);var i=b.default.getMeetingAddedType(r);f.default.trigger(t,{file:"meetings",function:"createMeeting"},QQ.EVENT_TRIGGERS.MEETING_ADDED,{meeting:n,type:i})}})}},{key:"getMeetingByType",value:function(e,t){return this.meetingCollection.getByKey(e,t)}},{key:"getAllMeetings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.meetingCollection.getAll(e)}},{key:"syncMeetings",value:function(){var e=this;return this.request.getActiveMeetings().then(function(t){t.loci&&t.loci.length>0&&t.loci.forEach(function(t){e.handleLocusEvent({locus:t,locusUrl:t.url})})})}},{key:"getScheduledMeetings",value:function(){return this.meetingCollection.getAll({scheduled:!0})}},{key:"getLogger",value:function(){return l.default.get()}},{key:"getAnalyzer",value:function(){return g.default}},{key:"getCalculator",value:function(){return y.default}}]),t}(XR.WebexPlugin);t.default=S});r(NZ),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=i(NZ),n=i(bJ);function i(e){return e&&e.__esModule?e:{default:e}}(0,XR.registerPlugin)("meetings",r.default,{config:n.default}),t.default=r.default}));var kZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=u(Pf),n=u(nC),i=u(fc),a=u(Rf),o=u(ym),s=u(gp);function u(e){return e&&e.__esModule?e:{default:e}}var c=WY("messages"),l=XR.WebexPlugin.extend({initialize:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];(0,a.default)(XR.WebexPlugin.prototype.initialize,this,t)},listen:function(){var e=this;return(0,cI.createEventEnvelope)(this.webex,cI.SDK_EVENT.EXTERNAL.RESOURCE.MESSAGES).then(function(t){return e.eventEnvelope=t,e.webex.internal.mercury.connect().then(function(){e.listenTo(e.webex.internal.mercury,cI.SDK_EVENT.INTERNAL.TEAMS_ACTIVITY,function(t){return e.onWebexApiEvent(t)})})})},create:function(e){var t="body";e.file&&(this.logger.warn("Supplying a single `file` property is deprecated; please supply a `files` array"),e.files=[e.file],(0,i.default)(e,"file")),(0,s.default)(e.files)&&e.files.reduce(function(e,t){return e||"string"!=typeof t},!1)&&(t="formData");var r=(0,n.default)({method:"POST",service:"hydra",resource:"messages"},t,e);return this.request(r).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"messages/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"messages",qs:e}).then(function(e){return new XR.Page(e,t.webex)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"messages/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},onWebexApiEvent:function(e){var t=e.data.activity;switch(t.verb){case cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.SHARE:case cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.POST:var n=this.getMessageEvent(t,cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.CREATED);n&&(c('messages "created" payload:             '+(0,r.default)(n)),this.trigger(cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.CREATED,n));break;case cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.DELETE:var i=this.getMessageEvent(t,cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.DELETED);i&&(c('messages "deleted" payload:             '+(0,r.default)(i)),this.trigger(cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.DELETED,i))}},getMessageEvent:function(e,t){try{var r=(0,o.default)(this.eventEnvelope);if(r.event=t,r.data.created=e.published,r.actorId=(0,cI.constructHydraId)(cI.hydraTypes.PEOPLE,e.actor.entryUUID),r.data.roomType=e.target.tags.includes(cI.SDK_EVENT.INTERNAL.ACTIVITY_TAG.ONE_ON_ONE)?cI.SDK_EVENT.EXTERNAL.SPACE_TYPE.DIRECT:cI.SDK_EVENT.EXTERNAL.SPACE_TYPE.GROUP,r.data.roomId=(0,cI.constructHydraId)(cI.hydraTypes.ROOM,e.target.id),r.data.personId=(0,cI.constructHydraId)(cI.hydraTypes.PEOPLE,e.actor.entryUUID),r.data.personEmail=e.actor.emailAddress||e.actor.entryEmail,t!==cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.DELETED){var n=e.object,i=n.content,a=n.displayName,s=i||a,u=(0,cI.getHydraFiles)(e);r.data.id=(0,cI.constructHydraId)(cI.hydraTypes.MESSAGE,e.id),s&&(r.data.text=s),a&&a!==r.data.text&&(r.data.markdown=a),u.length&&(r.data.files=u)}else r.data.id=(0,cI.constructHydraId)(cI.hydraTypes.MESSAGE,e.object.id);return r}catch(e){return this.webex.logger.error("Unable to generate SDK event from mercury 'socket activity for message:"+t+" event: "+e.message),null}},version:"1.77.8"});t.default=l});r(kZ),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=kZ)&&r.__esModule?r:{default:r};(0,XR.registerPlugin)("messages",n.default),t.default=n.default}));var PZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=a(Pf),n=a(_f),i=a(ym);function a(e){return e&&e.__esModule?e:{default:e}}var o=WY("memberships"),s=XR.WebexPlugin.extend({listen:function(){var e=this;return(0,cI.createEventEnvelope)(this.webex,cI.SDK_EVENT.EXTERNAL.RESOURCE.MEMBERSHIPS).then(function(t){return e.eventEnvelope=t,e.webex.internal.mercury.connect().then(function(){e.listenTo(e.webex.internal.mercury,cI.SDK_EVENT.INTERNAL.TEAMS_ACTIVITY,function(t){return e.onWebexApiEvent(t)})})})},create:function(e){return this.request({method:"POST",service:"hydra",resource:"memberships",body:e}).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"memberships/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"memberships",qs:e}).then(function(e){return new XR.Page(e,t.webex)})},listWithReadStatus:function(e){var t=this,r=(0,cI.deconstructHydraId)(e.roomId),i={id:r.id,cluster:r.cluster};return(0,cI.ensureMyIdIsAvailable)(this.webex).then(function(){return(0,cI.ensureConvoAvailability)(t.webex).then(function(){return t.webex.internal.conversation.get(i,{participantAckFilter:"all",activitiesLimit:0}).then(function(e){try{for(var r=e.id,i=(0,cI.buildHydraRoomId)(r),a=e.participants.items,o={items:[]},s=(0,cI.getHydraRoomType)(e.tags),u=t.webex.internal.me.id,c=e.tags.includes(cI.SDK_EVENT.INTERNAL.ACTIVITY_TAG.HIDDEN),l=0;l<a.length;l+=1){var f=a[l],d={id:(0,cI.buildHydraMembershipId)(f.entryUUID,r),roomId:i,personId:(0,cI.buildHydraPersonId)(f.entryUUID),personEmail:f.entryEmailAddress||f.entryEmail,personDisplayName:f.displayName,personOrgId:(0,cI.buildHydraOrgId)(f.orgId),isMonitor:!1,roomType:s};c&&d.personId===u&&(d.isRoomHidden=c),"roomProperties"in f&&("lastSeenActivityDate"in f.roomProperties&&(d.lastSeenId=(0,cI.buildHydraMessageId)(f.roomProperties.lastSeenActivityUUID),d.lastSeenDate=f.roomProperties.lastSeenActivityDate),"isModerator"in f.roomProperties&&(d.isModerator=f.roomProperties.isModerator)),o.items.push(d)}return n.default.resolve(o)}catch(e){return n.default.reject(e)}})})})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"memberships/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id||e;return this.request({method:"PUT",service:"hydra",resource:"memberships/"+t,body:e}).then(function(e){return e.body})},updateLastSeen:function(e){var t=this,r={id:(0,cI.deconstructHydraId)(e.id).id},n=(0,cI.deconstructHydraId)(e.roomId),i={id:n.id,cluster:n.cluster};return(0,cI.ensureConvoAvailability)(this.webex).then(function(){return t.webex.internal.conversation.acknowledge(i,r).then(function(e){return{lastSeenId:(0,cI.buildHydraMessageId)(e.object.id),id:(0,cI.buildHydraMembershipId)(e.actor.entryUUID,e.target.id),personId:(0,cI.buildHydraPersonId)(e.actor.entryUUID),personEmail:e.actor.emailAddress||e.actor.entryEmail,personDisplayName:e.actor.displayName,personOrgId:(0,cI.buildHydraOrgId)(e.actor.orgId),roomId:(0,cI.buildHydraRoomId)(e.target.id),roomType:(0,cI.getHydraRoomType)(e.target.tags),isRoomHidden:!1,isMonitor:!1,created:e.published}})})},onWebexApiEvent:function(e){var t=this,n=e.data.activity;switch(n.verb){case cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.CREATE:n.object.participants.items.map(function(e){var r=(0,i.default)(n);return r.target=(0,i.default)(n.object),r.object=(0,i.default)(e),t.getMembershipEvent(r,cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.CREATED)}).forEach(function(e){e&&(o('membership "created" payload: '+(0,r.default)(e)),t.trigger(cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.CREATED,e))});break;case cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.ADD:var a=this.getMembershipEvent(n,cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.CREATED);a&&(o('membership "created" payload:             '+(0,r.default)(a)),this.trigger(cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.CREATED,a));break;case cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.LEAVE:var s=this.getMembershipEvent(n,cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.DELETED);s&&(o('membership "deleted" payload:             '+(0,r.default)(s)),this.trigger(cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.DELETED,s));break;case cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.ADD_MODERATOR:case cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.REMOVE_MODERATOR:case cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.HIDE:var u=this.getMembershipEvent(n,cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.UPDATED);u&&(o('membership "updated" payload:             '+(0,r.default)(u)),this.trigger(cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.UPDATED,u));break;case cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.ACKNOWLEDGE:var c=this.getMembershipEvent(n,cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.SEEN);c&&(o('membership "updated" payload:             '+(0,r.default)(c)),this.trigger(cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.SEEN,c))}},getMembershipEvent:function(e,t){try{var r=(0,i.default)(this.eventEnvelope),n=void 0,a=void 0;return r.event=t,r.data.created=e.published,r.actorId=(0,cI.buildHydraPersonId)(e.actor.entryUUID),e.verb!==cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.HIDE?(r.data.roomId=(0,cI.buildHydraRoomId)(e.target.id),r.data.roomType=(0,cI.getHydraRoomType)(e.target.tags),r.data.isRoomHidden=!1):(r.data.roomId=(0,cI.buildHydraRoomId)(e.object.id),r.data.roomType=cI.SDK_EVENT.EXTERNAL.SPACE_TYPE.DIRECT,r.data.isRoomHidden=!0),e.verb!==cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.ACKNOWLEDGE&&(e.object.roomProperties&&e.object.roomProperties.isModerator?r.data.isModerator=!0:r.data.isModerator=!1),e.verb===cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.ACKNOWLEDGE?(n=cI.SDK_EVENT.INTERNAL.ACTIVITY_FIELD.ACTOR,a=cI.SDK_EVENT.INTERNAL.ACTIVITY_FIELD.TARGET,r.data.lastSeenId=(0,cI.buildHydraMessageId)(e.object.id)):e.verb===cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.HIDE?(n=cI.SDK_EVENT.INTERNAL.ACTIVITY_FIELD.ACTOR,a=cI.SDK_EVENT.INTERNAL.ACTIVITY_FIELD.OBJECT):(n=cI.SDK_EVENT.INTERNAL.ACTIVITY_FIELD.OBJECT,a=cI.SDK_EVENT.INTERNAL.ACTIVITY_FIELD.TARGET),r.data.id=(0,cI.buildHydraMembershipId)(e[n].entryUUID,e[a].id),r.data.personId=(0,cI.buildHydraPersonId)(e[n].entryUUID),r.data.personEmail=e[n].emailAddress||e[n].entryEmail,r.data.personDisplayName=e[n].displayName,r.data.personOrgId=(0,cI.buildHydraOrgId)(e[n].orgId),r}catch(e){return this.webex.logger.error("Unable to generate SDK event from mercury 'socket activity for memberships:"+t+" event: "+e.message),null}},version:"1.77.8"});t.default=s});r(PZ),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=PZ)&&r.__esModule?r:{default:r};(0,XR.registerPlugin)("memberships",n.default),t.default=n.default}));var MZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=_f)&&r.__esModule?r:{default:r};var i=XR.Batcher.extend({namespace:"People",handleHttpSuccess:function(e){var t=this;return n.default.all(e.body.items.map(function(e){return t.handleItemSuccess(e.id,e)}))},handleItemFailure:function(e,t){return this.getDeferredForResponse(e).then(function(e){e.reject(t)})},handleItemSuccess:function(e,t){return this.getDeferredForResponse(e).then(function(e){e.resolve(t)})},fingerprintRequest:function(e){var t=this.webex.people.inferPersonIdFromUuid(e);return n.default.resolve(t)},fingerprintResponse:function(e){return n.default.resolve(e)},prepareRequest:function(e){return n.default.resolve(e.join())},submitHttpRequest:function(e){return this.webex.request({service:"hydra",resource:"people/?id="+e+"&showAllTypes="+this.config.showAllTypes})}});t.default=i});r(MZ);var DZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=o(uc),i=o(_f),a=o(MZ);function o(e){return e&&e.__esModule?e:{default:e}}var s,u,c,l,f,d,p=XR.WebexPlugin.extend((r={namespace:"People",children:{batcher:a.default},get:function(e){if(!e)return i.default.reject(new Error("A person with an id is required"));if("me"===e)return this._getMe();var t=e.personId||e.id||e;return this.batcher.request(t)},list:function(e){var t=this;if(Array.isArray(e)){var r=e;return i.default.all(r.map(function(e){return t.batcher.request(e)}))}return this.request({service:"hydra",resource:"people",qs:e}).then(function(e){return new XR.Page(e,t.webex)})},inferPersonIdFromUuid:function(e){try{if(cI.base64.decode(e).includes("ciscospark://"))return e}catch(e){}return cI.base64.encode("ciscospark://us/PEOPLE/"+e)},_getMe:function(){return this.webex.request({service:"hydra",resource:"people/me"}).then(function(e){return e.body})},version:"1.77.8"},s=r,u="_getMe",c=[cI.oneFlight],l=(0,n.default)(r,"_getMe"),f=r,d={},Object.keys(l).forEach(function(e){d[e]=l[e]}),d.enumerable=!!d.enumerable,d.configurable=!!d.configurable,("value"in d||d.initializer)&&(d.writable=!0),d=c.slice().reverse().reduce(function(e,t){return t(s,u,e)||e},d),f&&void 0!==d.initializer&&(d.value=d.initializer?d.initializer.call(f):void 0,d.initializer=void 0),void 0===d.initializer&&(Object.defineProperty(s,u,d),d=null),r));t.default=p});r(DZ);var LZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={people:{batcherWait:100,batcherMaxCalls:10,batcherMaxWait:1500,showAllTypes:!1}}});r(LZ),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i(DZ).default}});var r=i(DZ),n=i(LZ);function i(e){return e&&e.__esModule?e:{default:e}}(0,XR.registerPlugin)("people",r.default,{config:n.default})}));var UZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n,i=p(NC),a=p(IQ),o=p(Pf),s=p(hS),u=p(_f),c=p(vS),l=p(ym),f=(r=(0,c.default)(s.default.mark(function e(t){var r,n,i,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=(0,cI.getHydraRoomType)(t.tags),n=t.displayName?t.displayName:t.computedTitle,i=t.lastReadableActivityDate?t.lastReadableActivityDate:t.lastRelevantActivityDate,o=(0,a.default)({id:(0,cI.buildHydraRoomId)(t.id),type:r},n&&{title:t.displayName},i&&{lastActivityDate:i},{lastSeenActivityDate:t.lastSeenActivityDate?t.lastSeenActivityDate:new Date(0).toISOString()}),e.abrupt("return",u.default.resolve(o));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",u.default.reject(e.t0));case 11:case"end":return e.stop()}},e,this,[[0,8]])})),function(e){return r.apply(this,arguments)}),d=(n=(0,c.default)(s.default.mark(function e(t){var r,n,a,o,c,l,d,p;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r={items:[]},n=[],a=!0,o=!1,c=void 0,e.prev=5,l=(0,i.default)(t);!(a=(d=l.next()).done);a=!0)p=d.value,n.push(f(p));e.next=13;break;case 9:e.prev=9,e.t0=e.catch(5),o=!0,c=e.t0;case 13:e.prev=13,e.prev=14,!a&&l.return&&l.return();case 16:if(e.prev=16,!o){e.next=19;break}throw c;case 19:return e.finish(16);case 20:return e.finish(13);case 21:return e.abrupt("return",u.default.all(n).then(function(e){return r.items=e,r.items.sort(function(e,t){return e.lastActivityDate<t.lastActivityDate?1:-1}),r}));case 22:case"end":return e.stop()}},e,this,[[5,9,13,21],[14,,16,20]])})),function(e){return n.apply(this,arguments)});function p(e){return e&&e.__esModule?e:{default:e}}var h=WY("memberships"),v=XR.WebexPlugin.extend({listen:function(){var e=this;return(0,cI.createEventEnvelope)(this.webex,cI.SDK_EVENT.EXTERNAL.RESOURCE.ROOMS).then(function(t){return e.eventEnvelope=t,e.webex.internal.mercury.connect().then(function(){e.listenTo(e.webex.internal.mercury,cI.SDK_EVENT.INTERNAL.TEAMS_ACTIVITY,function(t){return e.onWebexApiEvent(t)})})})},create:function(e){return this.request({method:"POST",service:"hydra",resource:"rooms",body:e}).then(function(e){return e.body})},get:function(e,t){var r=e.id||e;return this.request({service:"hydra",resource:"rooms/"+r,qs:t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"rooms/",qs:e}).then(function(e){return new XR.Page(e,t.webex)})},listWithReadStatus:function(){var e=(0,c.default)(s.default.mark(function e(){var t,r,n=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new Date,r={activitiesLimit:0,computeTitleIfEmpty:!0,conversationsLimit:1e3,isActive:!0},!(i>0)){e.next=7;break}r.conversationsLimit=i,r.sinceDate=t.setDate(t.getDate()-14),e.next=9;break;case 7:if(!(i<0||i>100)){e.next=9;break}return e.abrupt("return",u.default.reject(new Error("rooms.listWithReadStatus: optional maxRecent parameter must be an integer between 1 and 100")));case 9:return e.abrupt("return",(0,cI.ensureConvoAvailability)(this.webex).then(function(){return n.webex.internal.conversation.list(r)}).then(function(e){return d(e)}));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getWithReadStatus:function(e){var t=this,r=(0,cI.deconstructHydraId)(e),n={id:r.id,cluster:r.cluster};return(0,cI.ensureConvoAvailability)(this.webex).then(function(){return t.webex.internal.conversation.get(n,{computeTitleIfEmpty:!0,activitiesLimit:0}).then(function(e){return f(e)})})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"rooms/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id;return this.request({method:"PUT",service:"hydra",resource:"rooms/"+t,body:e}).then(function(e){return e.body})},onWebexApiEvent:function(e){var t=e.data.activity;switch(t.verb){case cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.CREATE:var r=this.getRoomEvent(t,cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.CREATED);r&&(h('room "created" payload:             '+(0,o.default)(r)),this.trigger(cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.CREATED,r));break;case cI.SDK_EVENT.INTERNAL.ACTIVITY_VERB.UPDATE:var n=this.getRoomEvent(t,cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.UPDATED);n&&(h('room "updated" payload:             '+(0,o.default)(n)),this.trigger(cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.UPDATED,n))}},getRoomEvent:function(e,t){try{var r=(0,l.default)(this.eventEnvelope),n=void 0;if(r.event=t,r.data.created=e.published,r.actorId=(0,cI.buildHydraPersonId)(e.actor.entryUUID),t===cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.CREATED)n=cI.SDK_EVENT.INTERNAL.ACTIVITY_FIELD.OBJECT,r.data.creatorId=(0,cI.buildHydraPersonId)(e.actor.entryUUID),r.data.lastActivity=e.published;else{if(t!==cI.SDK_EVENT.EXTERNAL.EVENT_TYPE.UPDATED)throw new Error("unexpected event type");n=cI.SDK_EVENT.INTERNAL.ACTIVITY_FIELD.TARGET}return r.data.id=(0,cI.buildHydraRoomId)(e[n].id),r.data.type=(0,cI.getHydraRoomType)(e[n].tags),r.data.isLocked=e[n].tags.includes(cI.SDK_EVENT.INTERNAL.ACTIVITY_TAG.LOCKED),r}catch(e){return this.webex.logger.error("Unable to generate SDK event from mercury 'socket activity for rooms:"+t+" event: "+e.message),null}},version:"1.77.8"});t.default=v});r(UZ),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=UZ)&&r.__esModule?r:{default:r};(0,XR.registerPlugin)("rooms",n.default),t.default=n.default}));var jZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=XR.WebexPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"teams",body:e}).then(function(e){return e.body})},get:function(e,t){var r=e.id||e;return this.request({service:"hydra",resource:"teams/"+r,qs:t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"teams/",qs:e}).then(function(e){return new XR.Page(e,t.webex)})},update:function(e){var t=e.id;return this.request({method:"PUT",service:"hydra",resource:"teams/"+t,body:e}).then(function(e){return e.body})},version:"1.77.8"});t.default=r});r(jZ),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=jZ)&&r.__esModule?r:{default:r};(0,XR.registerPlugin)("teams",n.default),t.default=n.default}));var FZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=XR.WebexPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"team/memberships",body:e}).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"team/memberships/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"team/memberships",qs:e}).then(function(e){return new XR.Page(e,t.webex)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"team/memberships/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id||e;return this.request({method:"PUT",service:"hydra",resource:"team/memberships/"+t,body:e}).then(function(e){return e.body})},version:"1.77.8"});t.default=r});r(FZ),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=FZ)&&r.__esModule?r:{default:r};(0,XR.registerPlugin)("teamMemberships",n.default),t.default=n.default}));var BZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=XR.WebexPlugin.extend({create:function(e){return this.request({method:"POST",service:"hydra",resource:"webhooks",body:e}).then(function(e){return e.body})},get:function(e){var t=e.id||e;return this.request({service:"hydra",resource:"webhooks/"+t}).then(function(e){return e.body.items||e.body})},list:function(e){var t=this;return this.request({service:"hydra",resource:"webhooks/",qs:e}).then(function(e){return new XR.Page(e,t.webex)})},remove:function(e){var t=e.id||e;return this.request({method:"DELETE",service:"hydra",resource:"webhooks/"+t}).then(function(e){if(204!==e.statusCode)return e.body})},update:function(e){var t=e.id;return this.request({method:"PUT",service:"hydra",resource:"webhooks/"+t,body:e}).then(function(e){return e.body})},version:"1.77.8"});t.default=r});r(BZ),r(n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=BZ)&&r.__esModule?r:{default:r};(0,XR.registerPlugin)("webhooks",n.default),t.default=n.default}));var VZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(fc),n=u(_f),i=u(Pf),a=u(zy),o=u($y),s=u(gE);function u(e){return e&&e.__esModule?e:{default:e}}var c=new s.default,l=new s.default,f=function(){function e(t){(0,a.default)(this,e),this.Bound=function(){function e(t,r){(0,a.default)(this,e),c.set(this,t),l.set(this,r.logger)}return(0,o.default)(e,[{key:"_getRawData",value:function(){var e=localStorage.getItem(t);return e?JSON.parse(e):{}}},{key:"_load",value:function(){return this._getRawData()[c.get(this)]||{}}},{key:"_save",value:function(e){var r=this._getRawData();r[c.get(this)]=e,localStorage.setItem(t,(0,i.default)(r))}},{key:"clear",value:function(){return l.get(this).info("local-storage-store-adapter: clearing localStorage"),n.default.resolve(localStorage.removeItem(t))}},{key:"del",value:function(e){var t=this;return new n.default(function(n){l.get(t).info("local-storage-store-adapter: deleting `"+e+"`");var i=t._load();(0,r.default)(i,e),t._save(i),n()})}},{key:"get",value:function(e){var t=this;return new n.default(function(r,n){l.get(t).info("local-storage-store-adapter: reading `"+e+"`");var i=t._load()[e];return void 0!==i?r(i):n(new XR.NotFoundError("No value found for "+e))})}},{key:"put",value:function(e,t){var r=this;return new n.default(function(n){l.get(r).info("local-storage-store-adapter: writing `"+e+"`");var i=r._load();i[e]=t,r._save(i),n()})}}]),e}()}return(0,o.default)(e,[{key:"bind",value:function(e,t){return t=t||{},e?t.logger?(t.logger.info("local-storage-store-adapter: returning binding"),n.default.resolve(new this.Bound(e,t))):n.default.reject(new Error("`options.logger` is required")):n.default.reject(new Error("`namespace` is required"))}}]),e}();t.default=f});r(VZ);var GZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=VZ)&&r.__esModule?r:{default:r};t.default={boundedAdapter:new n.default("webex"),unboundedAdapter:XR.MemoryStoreAdapter}});r(GZ);var qZ=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r,n=(r=GZ)&&r.__esModule?r:{default:r};t.default={hydra:xu.env.HYDRA_SERVICE_URL||"https://api.ciscospark.com/v1",hydraServiceUrl:xu.env.HYDRA_SERVICE_URL||"https://api.ciscospark.com/v1",credentials:{clientType:"confidential"},device:{validateDomains:!0,ephemeral:!0},storage:{boundedAdapter:n.default,unboundedAdapter:n.default}}});r(qZ);var KZ=XR.default.extend({webex:!0,version:"1.77.8"});KZ.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.config=pR({},qZ,e.config),new KZ(e)};var HZ=KZ;e._babelPolyfill;var zZ=HZ;return window.webex=zZ}();
