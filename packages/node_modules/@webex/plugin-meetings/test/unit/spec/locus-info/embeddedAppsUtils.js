import {assert} from '@webex/test-helper-chai';

import EmbeddedAppUtils from '@webex/plugin-meetings/src/locus-info/embeddedAppsUtils';

describe('plugin-meetings', () => {
  describe('embeddedAppsUtils', () => {
    const embeddedApps = [
      {
        url: 'https://hecate-b.wbx2.com/apps/api/v1/locus/7a4994a7',
        sequence: 138849877016800000,
        appId: 'Y2lzY29zcGFyazovL3VzL0FQUExJQ0FUSU9OLzQxODc1MGQ0LTM3ZDctNGY2MC1hOWE3LWEwZTE1NDFhNjRkNg',
        instanceInfo: {
          appInstanceUrl: 'https://webex.sli.do/participant/event/mFKKjcYxzx9h31eyWgngFS?clusterId=eu1',
          externalAppInstanceUrl: '',
          title: 'Active session'
        },
        state: 'STARTED',
        lastModified: '2022-10-13T21:01:41.680Z'
      },
      {
        url: 'https://hecate-b.wbx2.com/apps/api/v1/locus/7a4994a7',
        sequence: 138849877016800000,
        appId: 'Y2lzY29zcGFyazovL3VzL0FQUExJQ0FUSU9OLzQxODc1MGQ0LTM3ZDctNGY2MC1hOWE3LWEwZTE1NDFhNjRkNg',
        instanceInfo: {
          appInstanceUrl: 'https://webex.sli.do/participant/event/mFKKjcYxzx9h31eyWgngFS?clusterId=eu1',
          externalAppInstanceUrl: '',
          title: 'Active session'
        },
        state: 'STOPPED',
        lastModified: '2022-10-13T21:01:31.680Z'
      }
    ];

    describe('parse', () => {
      it('returns a copy of embeddedApps', () => {
        const parsedApps = EmbeddedAppUtils.parse(embeddedApps);

        assert.deepEqual(parsedApps, embeddedApps);
        assert.notStrictEqual(parsedApps, embeddedApps);
      });
    });
  });
});
