import {find} from 'lodash';

import CalendarUtil from './util';

const CalendarCollection = {
  items: {},

  get(id) {
    return this.items[id];
  },

  getBy(key, value) {
    if (key && value) {
      return find(this.items, (item) => (item[key] === value));
    }

    return null;
  },

  set(item) {
    const itemId = item.id;
    const meeting = CalendarUtil.derive(item);

    this.items[itemId] = meeting;

    return itemId;
  },

  reset() {
    this.items = {};
  },

  remove(id) {
    const meeting = this.get(id);

    delete this.items[id];

    return meeting;
  },

  setAll(items) {
    items.forEach((item) => {
      this.set(item);
    });
  },

  getAll() {
    return Object.values(this.items);
  }

};

export default CalendarCollection;
